var NodeViewer=(()=>{var jpe=Object.create;var Ug=Object.defineProperty;var Hpe=Object.getOwnPropertyDescriptor;var Wpe=Object.getOwnPropertyNames;var Zpe=Object.getPrototypeOf,Xpe=Object.prototype.hasOwnProperty;var qpe=(t,e,n)=>e in t?Ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var dr=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,n)=>(typeof require!="undefined"?require:e)[n]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Vg=(t,e)=>()=>(t&&(e=t(t=0)),e);var Ze=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),mr=(t,e)=>{for(var n in e)Ug(t,n,{get:e[n],enumerable:!0})},e4=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Wpe(e))!Xpe.call(t,a)&&a!==n&&Ug(t,a,{get:()=>e[a],enumerable:!(i=Hpe(e,a))||i.enumerable});return t},t4=(t,e,n)=>(e4(t,e,"default"),n&&e4(n,e,"default")),Ma=(t,e,n)=>(n=t!=null?jpe(Zpe(t)):{},e4(e||!t||!t.__esModule?Ug(n,"default",{value:t,enumerable:!0}):n,t)),r4=t=>e4(Ug({},"__esModule",{value:!0}),t);var le=(t,e,n)=>(qpe(t,typeof e!="symbol"?e+"":e,n),n);var Q7=Ze((Gft,yj)=>{"use strict";function n3e(t){var e=t.length,n=1,i=new Array(e),a;for(a=e;a>0;a--)i[a-1]=n,n=n*t[a-1];return{stride:i,data:new Uint32Array(n)}}function i3e(t){var e=t.length,n=1,i=new Array(e),a=[],o,s;for(o=e;o>0;o--)i[o-1]=n,n=n*t[o-1];for(s=0;s<n;s++)a.push([]);return{stride:i,data:a}}yj.exports={integer:n3e,array:i3e}});var eT=Ze((Uft,xj)=>{"use strict";xj.exports=a3e;function a3e(t,e){var n=new Array(t),i=Math.floor(t/2)<<1,a=0,o,s,l,c,u;for(u=0;u<i;u+=2)o=-2*Math.log(e()),s=Math.sqrt(o),l=2*Math.PI*e(),a+=o,n[u]=s*Math.cos(l),n[u+1]=s*Math.sin(l);if(t%2){var d=Math.sqrt(-2*Math.log(e()))*Math.cos(2*Math.PI*e());n[t-1]=d,a+=Math.pow(d,2)}for(c=1/Math.sqrt(a),u=0;u<t;++u)n[u]*=c;return n}});var Sj=Ze((Vft,bj)=>{bj.exports=function(e,n){e=e||1,n=n||2;for(var i=e*2+1,a=Math.pow(i,n)-1,o=new Array(a),s=0;s<a;s++)for(var l=o[s]=new Array(n),c=s<a/2?s:s+1,u=1;u<=n;u++){var d=c%Math.pow(i,u);l[u-1]=d/Math.pow(i,u-1)-e,c-=d}return o}});var rT=Ze(($ft,Nj)=>{"use strict";var o3e=Sj();function s3e(t){var e=o3e(2,t),n=[],i;for(e=e.filter(function(a){for(var o=0,s=0;s<t;s++)o+=Math.pow(Math.max(0,Math.abs(a[s])-1),2);return o<t}),i=0;i<t;i++)n.push(0);return e.push(n),e.sort(function(a,o){var s=0,l=0,c;for(c=0;c<t;c++)s+=Math.pow(a[c],2),l+=Math.pow(o[c],2);return s<l?-1:s>l?1:0}),e}var tT={};function l3e(t){return tT[t]||(tT[t]=s3e(t)),tT[t]}Nj.exports=l3e});var Tj=Ze((zft,Aj)=>{"use strict";var c3e=Q7().integer,u3e=eT(),d3e=rT();function f3e(t,e){for(var n=0,i=0;i<t.length;i++)n+=Math.pow(t[i]-e[i],2);return n}function Fr(t,e){if(typeof t.distanceFunction=="function")throw new Error("PoissonDiskSampling: Tried to instantiate the fixed density implementation with a distanceFunction");this.shape=t.shape,this.minDistance=t.minDistance,this.maxDistance=t.maxDistance||t.minDistance*2,this.maxTries=Math.ceil(Math.max(1,t.tries||30)),this.rng=e||Math.random;for(var n=0,i=0;i<this.shape.length;i++)n=Math.max(n,this.shape[i]);var a=Math.max(1,n/128|0),o=1e-14*a;this.dimension=this.shape.length,this.squaredMinDistance=this.minDistance*this.minDistance,this.minDistancePlusEpsilon=this.minDistance+o,this.deltaDistance=Math.max(0,this.maxDistance-this.minDistancePlusEpsilon),this.cellSize=this.minDistance/Math.sqrt(this.dimension),this.neighbourhood=d3e(this.dimension),this.currentPoint=null,this.processList=[],this.samplePoints=[],this.gridShape=[];for(var i=0;i<this.dimension;i++)this.gridShape.push(Math.ceil(this.shape[i]/this.cellSize));this.grid=c3e(this.gridShape)}Fr.prototype.shape=null;Fr.prototype.dimension=null;Fr.prototype.minDistance=null;Fr.prototype.maxDistance=null;Fr.prototype.minDistancePlusEpsilon=null;Fr.prototype.squaredMinDistance=null;Fr.prototype.deltaDistance=null;Fr.prototype.cellSize=null;Fr.prototype.maxTries=null;Fr.prototype.rng=null;Fr.prototype.neighbourhood=null;Fr.prototype.currentPoint=null;Fr.prototype.processList=null;Fr.prototype.samplePoints=null;Fr.prototype.gridShape=null;Fr.prototype.grid=null;Fr.prototype.addRandomPoint=function(){for(var t=new Array(this.dimension),e=0;e<this.dimension;e++)t[e]=this.rng()*this.shape[e];return this.directAddPoint(t)};Fr.prototype.addPoint=function(t){var e,n=!0;if(t.length===this.dimension)for(e=0;e<this.dimension&&n;e++)n=t[e]>=0&&t[e]<this.shape[e];else n=!1;return n?this.directAddPoint(t):null};Fr.prototype.directAddPoint=function(t){var e=0,n=this.grid.stride,i;for(this.processList.push(t),this.samplePoints.push(t),i=0;i<this.dimension;i++)e+=(t[i]/this.cellSize|0)*n[i];return this.grid.data[e]=this.samplePoints.length,t};Fr.prototype.inNeighbourhood=function(t){var e=this.dimension,n=this.grid.stride,i,a,o,s,l;for(i=0;i<this.neighbourhood.length;i++){for(a=0,o=0;o<e;o++){if(s=(t[o]/this.cellSize|0)+this.neighbourhood[i][o],s<0||s>=this.gridShape[o]){a=-1;break}a+=s*n[o]}if(a!==-1&&this.grid.data[a]!==0&&(l=this.samplePoints[this.grid.data[a]-1],f3e(t,l)<this.squaredMinDistance))return!0}return!1};Fr.prototype.next=function(){for(var t,e,n,i,a,o,s;this.processList.length>0;){for(this.currentPoint===null&&(this.currentPoint=this.processList.shift()),i=this.currentPoint,t=0;t<this.maxTries;t++){for(o=!0,n=this.minDistancePlusEpsilon+this.deltaDistance*this.rng(),this.dimension===2?(e=this.rng()*Math.PI*2,a=[Math.cos(e),Math.sin(e)]):a=u3e(this.dimension,this.rng),s=0;o&&s<this.dimension;s++)a[s]=i[s]+a[s]*n,o=a[s]>=0&&a[s]<this.shape[s];if(o&&!this.inNeighbourhood(a))return this.directAddPoint(a)}t===this.maxTries&&(this.currentPoint=null)}return null};Fr.prototype.fill=function(){for(this.samplePoints.length===0&&this.addRandomPoint();this.next(););return this.samplePoints};Fr.prototype.getAllPoints=function(){return this.samplePoints};Fr.prototype.getAllPointsWithDistance=function(){throw new Error("PoissonDiskSampling: getAllPointsWithDistance() is not available in fixed-density implementation")};Fr.prototype.reset=function(){var t=this.grid.data,e=0;for(e=0;e<t.length;e++)t[e]=0;this.samplePoints=[],this.currentPoint=null,this.processList.length=0};Aj.exports=Fr});var wj=Ze((jft,Cj)=>{"use strict";var p3e=Q7().array,h3e=eT(),m3e=rT();function g3e(t,e){for(var n=0,i=0;i<t.length;i++)n+=Math.pow(t[i]-e[i],2);return Math.sqrt(n)}function gr(t,e){if(typeof t.distanceFunction!="function")throw new Error("PoissonDiskSampling: Tried to instantiate the variable density implementation without a distanceFunction");this.shape=t.shape,this.minDistance=t.minDistance,this.maxDistance=t.maxDistance||t.minDistance*2,this.maxTries=Math.ceil(Math.max(1,t.tries||30)),this.distanceFunction=t.distanceFunction,this.bias=Math.max(0,Math.min(1,t.bias||0)),this.rng=e||Math.random;for(var n=0,i=0;i<this.shape.length;i++)n=Math.max(n,this.shape[i]);var a=Math.max(1,n/128|0),o=1e-14*a;this.dimension=this.shape.length,this.minDistancePlusEpsilon=this.minDistance+o,this.deltaDistance=Math.max(0,this.maxDistance-this.minDistancePlusEpsilon),this.cellSize=this.maxDistance/Math.sqrt(this.dimension),this.neighbourhood=m3e(this.dimension),this.currentPoint=null,this.currentDistance=0,this.processList=[],this.samplePoints=[],this.sampleDistance=[],this.gridShape=[];for(var i=0;i<this.dimension;i++)this.gridShape.push(Math.ceil(this.shape[i]/this.cellSize));this.grid=p3e(this.gridShape)}gr.prototype.shape=null;gr.prototype.dimension=null;gr.prototype.minDistance=null;gr.prototype.maxDistance=null;gr.prototype.minDistancePlusEpsilon=null;gr.prototype.deltaDistance=null;gr.prototype.cellSize=null;gr.prototype.maxTries=null;gr.prototype.distanceFunction=null;gr.prototype.bias=null;gr.prototype.rng=null;gr.prototype.neighbourhood=null;gr.prototype.currentPoint=null;gr.prototype.currentDistance=null;gr.prototype.processList=null;gr.prototype.samplePoints=null;gr.prototype.sampleDistance=null;gr.prototype.gridShape=null;gr.prototype.grid=null;gr.prototype.addRandomPoint=function(){for(var t=new Array(this.dimension),e=0;e<this.dimension;e++)t[e]=this.rng()*this.shape[e];return this.directAddPoint(t)};gr.prototype.addPoint=function(t){var e,n=!0;if(t.length===this.dimension)for(e=0;e<this.dimension&&n;e++)n=t[e]>=0&&t[e]<this.shape[e];else n=!1;return n?this.directAddPoint(t):null};gr.prototype.directAddPoint=function(t){var e=0,n=this.grid.stride,i=this.samplePoints.length,a;for(this.processList.push(i),this.samplePoints.push(t),this.sampleDistance.push(this.distanceFunction(t)),a=0;a<this.dimension;a++)e+=(t[a]/this.cellSize|0)*n[a];return this.grid.data[e].push(i),t};gr.prototype.inNeighbourhood=function(t){var e=this.dimension,n=this.grid.stride,i,a,o,s,l,c,u=this.distanceFunction(t);for(i=0;i<this.neighbourhood.length;i++){for(a=0,o=0;o<e;o++){if(s=(t[o]/this.cellSize|0)+this.neighbourhood[i][o],s<0||s>=this.gridShape[o]){a=-1;break}a+=s*n[o]}if(a!==-1&&this.grid.data[a].length>0)for(var d=0;d<this.grid.data[a].length;d++){l=this.samplePoints[this.grid.data[a][d]],c=this.sampleDistance[this.grid.data[a][d]];var f=Math.min(c,u),p=Math.max(c,u),h=f+(p-f)*this.bias;if(g3e(t,l)<this.minDistance+this.deltaDistance*h)return!0}}return!1};gr.prototype.next=function(){for(var t,e,n,i,a,o,s,l;this.processList.length>0;){if(this.currentPoint===null){var c=this.processList.shift();this.currentPoint=this.samplePoints[c],this.currentDistance=this.sampleDistance[c]}for(i=this.currentPoint,a=this.currentDistance,t=0;t<this.maxTries;t++){for(s=!0,n=this.minDistancePlusEpsilon+this.deltaDistance*(a+(1-a)*this.bias),this.dimension===2?(e=this.rng()*Math.PI*2,o=[Math.cos(e),Math.sin(e)]):o=h3e(this.dimension,this.rng),l=0;s&&l<this.dimension;l++)o[l]=i[l]+o[l]*n,s=o[l]>=0&&o[l]<this.shape[l];if(s&&!this.inNeighbourhood(o))return this.directAddPoint(o)}t===this.maxTries&&(this.currentPoint=null)}return null};gr.prototype.fill=function(){for(this.samplePoints.length===0&&this.addRandomPoint();this.next(););return this.samplePoints};gr.prototype.getAllPoints=function(){return this.samplePoints};gr.prototype.getAllPointsWithDistance=function(){var t=new Array(this.samplePoints.length),e=0,n=0,i;for(e=0;e<this.samplePoints.length;e++){for(i=new Array(this.dimension+1),n=0;n<this.dimension;n++)i[n]=this.samplePoints[e][n];i[this.dimension]=this.sampleDistance[e],t[e]=i}return t};gr.prototype.reset=function(){var t=this.grid.data,e=0;for(e=0;e<t.length;e++)t[e]=[];this.samplePoints=[],this.currentPoint=null,this.processList.length=0};Cj.exports=gr});var Rj=Ze((Hft,Ij)=>{"use strict";var _3e=Tj(),E3e=wj();function bc(t,e){this.shape=t.shape,typeof t.distanceFunction=="function"?this.implementation=new E3e(t,e):this.implementation=new _3e(t,e)}bc.prototype.implementation=null;bc.prototype.addRandomPoint=function(){return this.implementation.addRandomPoint()};bc.prototype.addPoint=function(t){return this.implementation.addPoint(t)};bc.prototype.next=function(){return this.implementation.next()};bc.prototype.fill=function(){return this.implementation.fill()};bc.prototype.getAllPoints=function(){return this.implementation.getAllPoints()};bc.prototype.getAllPointsWithDistance=function(){return this.implementation.getAllPointsWithDistance()};bc.prototype.reset=function(){this.implementation.reset()};Ij.exports=bc});var Mj=Ze((Pj,nT)=>{(function(t,e,n){function i(l){var c=this,u=s();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function a(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&a(d,u),f.state=function(){return a(u,{})}),f}function s(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.alea=o})(Pj,typeof nT=="object"&&nT,typeof define=="function"&&define)});var Oj=Ze((Lj,iT)=>{(function(t,e,n){function i(s){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(s|0)?l.x=s:c+=s;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&a(u,c),d.state=function(){return a(c,{})}),d}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xor128=o})(Lj,typeof iT=="object"&&iT,typeof define=="function"&&define)});var Dj=Ze((Bj,aT)=>{(function(t,e,n){function i(s){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:c+=s;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&a(u,c),d.state=function(){return a(c,{})}),d}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xorwow=o})(Bj,typeof aT=="object"&&aT,typeof define=="function"&&define)});var kj=Ze((Fj,oT)=>{(function(t,e,n){function i(s){var l=this;l.next=function(){var u=l.x,d=l.i,f,p,h;return f=u[d],f^=f>>>7,p=f^f<<24,f=u[d+1&7],p^=f^f>>>10,f=u[d+3&7],p^=f^f>>>3,f=u[d+4&7],p^=f^f<<7,f=u[d+7&7],f=f^f<<13,p^=f^f<<9,u[d]=p,l.i=d+1&7,p};function c(u,d){var f,p,h=[];if(d===(d|0))p=h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?p=h[7]=-1:p=h[f],u.x=h,u.i=0,f=256;f>0;--f)u.next()}c(l,s)}function a(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,u&&(u.x&&a(u,c),d.state=function(){return a(c,{})}),d}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xorshift7=o})(Fj,typeof oT=="object"&&oT,typeof define=="function"&&define)});var Uj=Ze((Gj,sT)=>{(function(t,e,n){function i(s){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,p,h;return l.w=u=u+1640531527|0,h=d[f+34&127],p=d[f=f+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=d[f]=h^p,l.i=f,h+(u^u>>>16)|0};function c(u,d){var f,p,h,m,_,E=[],v=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,v=Math.max(v,d.length)),h=0,m=-32;m<v;++m)d&&(p^=d.charCodeAt((m+32)%d.length)),m===0&&(_=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(_=_+1640531527|0,f=E[m&127]^=p+_,h=f==0?h+1:0);for(h>=128&&(E[(d&&d.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=E[h+34&127],f=E[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,E[h]=p^f;u.w=_,u.X=E,u.i=h}c(l,s)}function a(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,u&&(u.X&&a(u,c),d.state=function(){return a(c,{})}),d}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xor4096=o})(Gj,typeof sT=="object"&&sT,typeof define=="function"&&define)});var $j=Ze((Vj,lT)=>{(function(t,e,n){function i(s){var l=this,c="";l.next=function(){var d=l.b,f=l.c,p=l.d,h=l.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^h,h=h-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-p|0,l.d=p<<16^f>>>16^h,l.a=h-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):c+=s;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function a(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&a(u,c),d.state=function(){return a(c,{})}),d}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.tychei=o})(Vj,typeof lT=="object"&&lT,typeof define=="function"&&define)});var jj=Ze((zj,I5)=>{(function(t,e,n){var i=256,a=6,o=52,s="random",l=n.pow(i,a),c=n.pow(2,o),u=c*2,d=i-1,f;function p(x,S,N){var w=[];S=S==!0?{entropy:!0}:S||{};var T=E(_(S.entropy?[x,y(e)]:x==null?v():x,3),w),I=new h(w),R=function(){for(var L=I.g(a),O=l,H=0;L<c;)L=(L+H)*i,O*=i,H=I.g(1);for(;L>=u;)L/=2,O/=2,H>>>=1;return(L+H)/O};return R.int32=function(){return I.g(4)|0},R.quick=function(){return I.g(4)/4294967296},R.double=R,E(y(I.S),e),(S.pass||N||function(L,O,H,U){return U&&(U.S&&m(U,I),L.state=function(){return m(I,{})}),H?(n[s]=L,O):L})(R,T,"global"in S?S.global:this==n,S.state)}function h(x){var S,N=x.length,w=this,T=0,I=w.i=w.j=0,R=w.S=[];for(N||(x=[N++]);T<i;)R[T]=T++;for(T=0;T<i;T++)R[T]=R[I=d&I+x[T%N]+(S=R[T])],R[I]=S;(w.g=function(L){for(var O,H=0,U=w.i,X=w.j,W=w.S;L--;)O=W[U=d&U+1],H=H*i+W[d&(W[U]=W[X=d&X+O])+(W[X]=O)];return w.i=U,w.j=X,H})(i)}function m(x,S){return S.i=x.i,S.j=x.j,S.S=x.S.slice(),S}function _(x,S){var N=[],w=typeof x,T;if(S&&w=="object")for(T in x)try{N.push(_(x[T],S-1))}catch(I){}return N.length?N:w=="string"?x:x+"\0"}function E(x,S){for(var N=x+"",w,T=0;T<N.length;)S[d&T]=d&(w^=S[d&T]*19)+N.charCodeAt(T++);return y(S)}function v(){try{var x;return f&&(x=f.randomBytes)?x=x(i):(x=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(x)),y(x)}catch(w){var S=t.navigator,N=S&&S.plugins;return[+new Date,t,N,t.screen,y(e)]}}function y(x){return String.fromCharCode.apply(0,x)}if(E(n.random(),e),typeof I5=="object"&&I5.exports){I5.exports=p;try{f=dr("crypto")}catch(x){}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+s]=p})(typeof self!="undefined"?self:zj,[],Math)});var Wj=Ze((Wft,Hj)=>{var v3e=Mj(),y3e=Oj(),x3e=Dj(),b3e=kj(),S3e=Uj(),N3e=$j(),fp=jj();fp.alea=v3e;fp.xor128=y3e;fp.xorwow=x3e;fp.xorshift7=b3e;fp.xor4096=S3e;fp.tychei=N3e;Hj.exports=fp});var Kj=Ze((Zft,P5)=>{"use strict";var Sc=256,Zj=6,A3e=52,R5=[],E2=typeof global=="undefined"?window:global,T3e=Math.pow(Sc,Zj),Xj=Math.pow(2,A3e),C3e=Xj*2,pp=Sc-1,w3e=Math.random;P5.exports=function(t,e){if(e&&e.global===!0)return e.global=!1,Math.random=P5.exports(t,e),e.global=!0,Math.random;var n=e&&e.entropy||!1,i=[],a=cT(qj(n?[t,v2(R5)]:0 in arguments?t:R3e(),3),i),o=new I3e(i);return cT(v2(o.S),R5),function(){for(var s=o.g(Zj),l=T3e,c=0;s<Xj;)s=(s+c)*Sc,l*=Sc,c=o.g(1);for(;s>=C3e;)s/=2,l/=2,c>>>=1;return(s+c)/l}};P5.exports.resetGlobal=function(){Math.random=w3e};function I3e(t){var e,n=t.length,i=this,a=0,o=i.i=i.j=0,s=i.S=[];for(n||(t=[n++]);a<Sc;)s[a]=a++;for(a=0;a<Sc;a++)s[a]=s[o=pp&o+t[a%n]+(e=s[a])],s[o]=e;(i.g=function(l){for(var c,u=0,d=i.i,f=i.j,p=i.S;l--;)c=p[d=pp&d+1],u=u*Sc+p[pp&(p[d]=p[f=pp&f+c])+(p[f]=c)];return i.i=d,i.j=f,u})(Sc)}function qj(t,e){var n=[],i=(typeof t)[0],a;if(e&&i=="o")for(a in t)try{n.push(qj(t[a],e-1))}catch(o){}return n.length?n:i=="s"?t:t+"\0"}function cT(t,e){for(var n=t+"",i,a=0;a<n.length;)e[pp&a]=pp&(i^=e[pp&a]*19)+n.charCodeAt(a++);return v2(e)}function R3e(t){try{return E2.crypto.getRandomValues(t=new Uint8Array(Sc)),v2(t)}catch(e){return[+new Date,E2,E2.navigator&&E2.navigator.plugins,E2.screen,v2(R5)]}}function v2(t){return String.fromCharCode.apply(0,t)}cT(Math.random(),R5)});var Yj=Ze((uT,dT)=>{(function(){"use strict";var t=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,n=1/3,i=1/6,a=(Math.sqrt(5)-1)/4,o=(5-Math.sqrt(5))/20;function s(d){var f;typeof d=="function"?f=d:d?f=c(d):f=Math.random,this.p=l(f),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var p=0;p<512;p++)this.perm[p]=this.p[p&255],this.permMod12[p]=this.perm[p]%12}s.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(d,f){var p=this.permMod12,h=this.perm,m=this.grad3,_=0,E=0,v=0,y=(d+f)*t,x=Math.floor(d+y),S=Math.floor(f+y),N=(x+S)*e,w=x-N,T=S-N,I=d-w,R=f-T,L,O;I>R?(L=1,O=0):(L=0,O=1);var H=I-L+e,U=R-O+e,X=I-1+2*e,W=R-1+2*e,ne=x&255,be=S&255,q=.5-I*I-R*R;if(q>=0){var ie=p[ne+h[be]]*3;q*=q,_=q*q*(m[ie]*I+m[ie+1]*R)}var ge=.5-H*H-U*U;if(ge>=0){var et=p[ne+L+h[be+O]]*3;ge*=ge,E=ge*ge*(m[et]*H+m[et+1]*U)}var qe=.5-X*X-W*W;if(qe>=0){var vt=p[ne+1+h[be+1]]*3;qe*=qe,v=qe*qe*(m[vt]*X+m[vt+1]*W)}return 70*(_+E+v)},noise3D:function(d,f,p){var h=this.permMod12,m=this.perm,_=this.grad3,E,v,y,x,S=(d+f+p)*n,N=Math.floor(d+S),w=Math.floor(f+S),T=Math.floor(p+S),I=(N+w+T)*i,R=N-I,L=w-I,O=T-I,H=d-R,U=f-L,X=p-O,W,ne,be,q,ie,ge;H>=U?U>=X?(W=1,ne=0,be=0,q=1,ie=1,ge=0):H>=X?(W=1,ne=0,be=0,q=1,ie=0,ge=1):(W=0,ne=0,be=1,q=1,ie=0,ge=1):U<X?(W=0,ne=0,be=1,q=0,ie=1,ge=1):H<X?(W=0,ne=1,be=0,q=0,ie=1,ge=1):(W=0,ne=1,be=0,q=1,ie=1,ge=0);var et=H-W+i,qe=U-ne+i,vt=X-be+i,ar=H-q+2*i,Qt=U-ie+2*i,Ai=X-ge+2*i,Ti=H-1+3*i,Ci=U-1+3*i,Qe=X-1+3*i,Nt=N&255,Bt=w&255,Ue=T&255,Cr=.6-H*H-U*U-X*X;if(Cr<0)E=0;else{var qt=h[Nt+m[Bt+m[Ue]]]*3;Cr*=Cr,E=Cr*Cr*(_[qt]*H+_[qt+1]*U+_[qt+2]*X)}var kr=.6-et*et-qe*qe-vt*vt;if(kr<0)v=0;else{var er=h[Nt+W+m[Bt+ne+m[Ue+be]]]*3;kr*=kr,v=kr*kr*(_[er]*et+_[er+1]*qe+_[er+2]*vt)}var Mn=.6-ar*ar-Qt*Qt-Ai*Ai;if(Mn<0)y=0;else{var ia=h[Nt+q+m[Bt+ie+m[Ue+ge]]]*3;Mn*=Mn,y=Mn*Mn*(_[ia]*ar+_[ia+1]*Qt+_[ia+2]*Ai)}var hs=.6-Ti*Ti-Ci*Ci-Qe*Qe;if(hs<0)x=0;else{var Ql=h[Nt+1+m[Bt+1+m[Ue+1]]]*3;hs*=hs,x=hs*hs*(_[Ql]*Ti+_[Ql+1]*Ci+_[Ql+2]*Qe)}return 32*(E+v+y+x)},noise4D:function(d,f,p,h){var m=this.perm,_=this.grad4,E,v,y,x,S,N=(d+f+p+h)*a,w=Math.floor(d+N),T=Math.floor(f+N),I=Math.floor(p+N),R=Math.floor(h+N),L=(w+T+I+R)*o,O=w-L,H=T-L,U=I-L,X=R-L,W=d-O,ne=f-H,be=p-U,q=h-X,ie=0,ge=0,et=0,qe=0;W>ne?ie++:ge++,W>be?ie++:et++,W>q?ie++:qe++,ne>be?ge++:et++,ne>q?ge++:qe++,be>q?et++:qe++;var vt,ar,Qt,Ai,Ti,Ci,Qe,Nt,Bt,Ue,Cr,qt;vt=ie>=3?1:0,ar=ge>=3?1:0,Qt=et>=3?1:0,Ai=qe>=3?1:0,Ti=ie>=2?1:0,Ci=ge>=2?1:0,Qe=et>=2?1:0,Nt=qe>=2?1:0,Bt=ie>=1?1:0,Ue=ge>=1?1:0,Cr=et>=1?1:0,qt=qe>=1?1:0;var kr=W-vt+o,er=ne-ar+o,Mn=be-Qt+o,ia=q-Ai+o,hs=W-Ti+2*o,Ql=ne-Ci+2*o,D=be-Qe+2*o,Eg=q-Nt+2*o,vg=W-Bt+3*o,yg=ne-Ue+3*o,xg=be-Cr+3*o,ms=q-qt+3*o,U1=W-1+4*o,ec=ne-1+4*o,V1=be-1+4*o,bg=q-1+4*o,cf=w&255,uu=T&255,Wn=I&255,tc=R&255,du=.6-W*W-ne*ne-be*be-q*q;if(du<0)E=0;else{var $1=m[cf+m[uu+m[Wn+m[tc]]]]%32*4;du*=du,E=du*du*(_[$1]*W+_[$1+1]*ne+_[$1+2]*be+_[$1+3]*q)}var uf=.6-kr*kr-er*er-Mn*Mn-ia*ia;if(uf<0)v=0;else{var z1=m[cf+vt+m[uu+ar+m[Wn+Qt+m[tc+Ai]]]]%32*4;uf*=uf,v=uf*uf*(_[z1]*kr+_[z1+1]*er+_[z1+2]*Mn+_[z1+3]*ia)}var df=.6-hs*hs-Ql*Ql-D*D-Eg*Eg;if(df<0)y=0;else{var j1=m[cf+Ti+m[uu+Ci+m[Wn+Qe+m[tc+Nt]]]]%32*4;df*=df,y=df*df*(_[j1]*hs+_[j1+1]*Ql+_[j1+2]*D+_[j1+3]*Eg)}var fu=.6-vg*vg-yg*yg-xg*xg-ms*ms;if(fu<0)x=0;else{var ff=m[cf+Bt+m[uu+Ue+m[Wn+Cr+m[tc+qt]]]]%32*4;fu*=fu,x=fu*fu*(_[ff]*vg+_[ff+1]*yg+_[ff+2]*xg+_[ff+3]*ms)}var pf=.6-U1*U1-ec*ec-V1*V1-bg*bg;if(pf<0)S=0;else{var H1=m[cf+1+m[uu+1+m[Wn+1+m[tc+1]]]]%32*4;pf*=pf,S=pf*pf*(_[H1]*U1+_[H1+1]*ec+_[H1+2]*V1+_[H1+3]*bg)}return 27*(E+v+y+x+S)}};function l(d){var f,p=new Uint8Array(256);for(f=0;f<256;f++)p[f]=f;for(f=0;f<255;f++){var h=f+~~(d()*(256-f)),m=p[f];p[f]=p[h],p[h]=m}return p}s._buildPermutationTable=l;function c(){var d=0,f=0,p=0,h=1,m=u();d=m(" "),f=m(" "),p=m(" ");for(var _=0;_<arguments.length;_++)d-=m(arguments[_]),d<0&&(d+=1),f-=m(arguments[_]),f<0&&(f+=1),p-=m(arguments[_]),p<0&&(p+=1);return m=null,function(){var E=2091639*d+h*23283064365386963e-26;return d=f,f=p,p=E-(h=E|0)}}function u(){var d=4022871197;return function(f){f=f.toString();for(var p=0;p<f.length;p++){d+=f.charCodeAt(p);var h=.02519603282416938*d;d=h>>>0,h-=d,h*=d,d=h>>>0,h-=d,d+=h*4294967296}return(d>>>0)*23283064365386963e-26}}typeof define!="undefined"&&define.amd&&define(function(){return s}),typeof uT!="undefined"?uT.SimplexNoise=s:typeof window!="undefined"&&(window.SimplexNoise=s),typeof dT!="undefined"&&(dT.exports=s)})()});var Yh=Ze((Xft,Jj)=>{"use strict";Jj.exports=function(){for(var e=0;e<arguments.length;e++)if(typeof arguments[e]!="undefined")return arguments[e]}});var tH=Ze((qft,eH)=>{var P3e=Kj(),M3e=Yj(),Hi=Yh();function Qj(t){t=Hi(t,null);var e=Math.random,n,i,a,o=null,s=!1;return l(t),{value:c,createRandom:function(q){return Qj(q)},setSeed:l,getSeed:d,getRandomSeed:f,valueNonZero:u,permuteNoise:h,noise1D:m,noise2D:_,noise3D:E,noise4D:v,sign:y,boolean:x,chance:S,range:N,rangeFloor:w,pick:T,shuffle:I,onCircle:R,insideCircle:L,onSphere:O,insideSphere:H,quaternion:U,weighted:ne,weightedSet:X,weightedSetIndex:W,gaussian:be};function l(q,ie){typeof q=="number"||typeof q=="string"?(n=q,i=P3e(n,ie)):(n=void 0,i=e),a=p(),o=null,s=!1}function c(){return i()}function u(){for(var q=0;q===0;)q=c();return q}function d(){return n}function f(){var q=String(Math.floor(Math.random()*1e6));return q}function p(){return new M3e(i)}function h(){a=p()}function m(q,ie,ge){if(!isFinite(q))throw new TypeError("x component for noise() must be finite");return ie=Hi(ie,1),ge=Hi(ge,1),ge*a.noise2D(q*ie,0)}function _(q,ie,ge,et){if(!isFinite(q))throw new TypeError("x component for noise() must be finite");if(!isFinite(ie))throw new TypeError("y component for noise() must be finite");return ge=Hi(ge,1),et=Hi(et,1),et*a.noise2D(q*ge,ie*ge)}function E(q,ie,ge,et,qe){if(!isFinite(q))throw new TypeError("x component for noise() must be finite");if(!isFinite(ie))throw new TypeError("y component for noise() must be finite");if(!isFinite(ge))throw new TypeError("z component for noise() must be finite");return et=Hi(et,1),qe=Hi(qe,1),qe*a.noise3D(q*et,ie*et,ge*et)}function v(q,ie,ge,et,qe,vt){if(!isFinite(q))throw new TypeError("x component for noise() must be finite");if(!isFinite(ie))throw new TypeError("y component for noise() must be finite");if(!isFinite(ge))throw new TypeError("z component for noise() must be finite");if(!isFinite(et))throw new TypeError("w component for noise() must be finite");return qe=Hi(qe,1),vt=Hi(vt,1),vt*a.noise4D(q*qe,ie*qe,ge*qe,et*qe)}function y(){return x()?1:-1}function x(){return c()>.5}function S(q){if(q=Hi(q,.5),typeof q!="number")throw new TypeError("expected n to be a number");return c()<q}function N(q,ie){if(ie===void 0&&(ie=q,q=0),typeof q!="number"||typeof ie!="number")throw new TypeError("Expected all arguments to be numbers");return c()*(ie-q)+q}function w(q,ie){if(ie===void 0&&(ie=q,q=0),typeof q!="number"||typeof ie!="number")throw new TypeError("Expected all arguments to be numbers");return Math.floor(N(q,ie))}function T(q){if(q.length!==0)return q[w(0,q.length)]}function I(q){if(!Array.isArray(q))throw new TypeError("Expected Array, got "+typeof q);for(var ie,ge,et=q.length,qe=q.slice();et;)ie=Math.floor(c()*et--),ge=qe[et],qe[et]=qe[ie],qe[ie]=ge;return qe}function R(q,ie){q=Hi(q,1),ie=ie||[];var ge=c()*2*Math.PI;return ie[0]=q*Math.cos(ge),ie[1]=q*Math.sin(ge),ie}function L(q,ie){q=Hi(q,1),ie=ie||[],R(1,ie);var ge=q*Math.sqrt(c());return ie[0]*=ge,ie[1]*=ge,ie}function O(q,ie){q=Hi(q,1),ie=ie||[];var ge=c()*Math.PI*2,et=c()*2-1,qe=ge,vt=Math.acos(et);return ie[0]=q*Math.sin(vt)*Math.cos(qe),ie[1]=q*Math.sin(vt)*Math.sin(qe),ie[2]=q*Math.cos(vt),ie}function H(q,ie){q=Hi(q,1),ie=ie||[];var ge=c()*Math.PI*2,et=c()*2-1,qe=c(),vt=ge,ar=Math.acos(et),Qt=q*Math.cbrt(qe);return ie[0]=Qt*Math.sin(ar)*Math.cos(vt),ie[1]=Qt*Math.sin(ar)*Math.sin(vt),ie[2]=Qt*Math.cos(ar),ie}function U(q){q=q||[];var ie=c(),ge=c(),et=c(),qe=Math.sqrt(1-ie),vt=Math.sqrt(ie),ar=Math.PI*2*ge,Qt=Math.PI*2*et,Ai=Math.sin(ar)*qe,Ti=Math.cos(ar)*qe,Ci=Math.sin(Qt)*vt,Qe=Math.cos(Qt)*vt;return q[0]=Ai,q[1]=Ti,q[2]=Ci,q[3]=Qe,q}function X(q){return q=q||[],q.length===0?null:q[W(q)].value}function W(q){return q=q||[],q.length===0?-1:ne(q.map(function(ie){return ie.weight}))}function ne(q){if(q=q||[],q.length===0)return-1;var ie=0,ge;for(ge=0;ge<q.length;ge++)ie+=q[ge];if(ie<=0)throw new Error("Weights must sum to > 0");var et=c()*ie;for(ge=0;ge<q.length;ge++){if(et<q[ge])return ge;et-=q[ge]}return 0}function be(q,ie){if(q=Hi(q,0),ie=Hi(ie,1),s){s=!1;var ge=o;return o=null,q+ie*ge}else{var et=0,qe=0,vt=0;do et=c()*2-1,qe=c()*2-1,vt=et*et+qe*qe;while(vt>=1||vt===0);var ar=Math.sqrt(-2*Math.log(vt)/vt);return o=qe*ar,s=!0,q+ie*(et*ar)}}}eH.exports=Qj()});var M5=Ze((Kft,rH)=>{rH.exports=L3e;function L3e(t,e,n){if(typeof e!="number"||typeof n!="number")throw new TypeError('Must specify "to" and "from" arguments as numbers');if(e>n){var i=e;e=n,n=i}var a=n-e;return a===0?n:t-a*Math.floor((t-e)/a)}});var uH=Ze((Yft,cH)=>{var y2=Yh(),O3e=M5(),iH=Number.EPSILON;function L5(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}function B3e(t){return L5(t,0,1)}function O5(t,e,n){return t*(1-n)+e*n}function aH(t,e,n){return Math.abs(t-e)<iH?0:(n-t)/(e-t)}function D3e(t,e,n){var i=L5(aH(t,e,n),0,1);return i*i*(3-2*i)}function F3e(t,e){return e=y2(e,0),typeof t=="number"&&isFinite(t)?t:e}function fT(t){if(typeof t!="number")throw new TypeError("Expected dims argument");return function(e,n){n=y2(n,0);var i;e==null?i=n:typeof e=="number"&&isFinite(e)&&(i=e);var a=[],o;if(i==null)for(o=0;o<t;o++)a[o]=F3e(e[o],n);else for(o=0;o<t;o++)a[o]=i;return a}}function oH(t,e,n,i){if(i=i||[],t.length!==e.length)throw new TypeError("min and max array are expected to have the same length");for(var a=0;a<t.length;a++)i[a]=O5(t[a],e[a],n);return i}function nH(t,e){if(t=y2(t,0),typeof t!="number")throw new TypeError("Expected n argument to be a number");for(var n=[],i=0;i<t;i++)n.push(e);return n}function k3e(t,e){if(t=y2(t,0),typeof t!="number")throw new TypeError("Expected n argument to be a number");e=e||{},typeof e=="boolean"&&(e={endpoint:!0});var n=y2(e.offset,0);return e.endpoint?nH(t).map(function(i,a){return t<=1?0:(a+n)/(t-1)}):nH(t).map(function(i,a){return(a+n)/t})}function G3e(t,e,n){e=L5(e,0,1);var i=t.length-1,a=e*i,o=Math.floor(a),s=a-o,l=Math.min(o+1,i),c=t[o%t.length],u=t[l%t.length];if(typeof c=="number"&&typeof u=="number")return O5(c,u,s);if(Array.isArray(c)&&Array.isArray(u))return oH(c,u,s,n);throw new TypeError("Mismatch in value type of two array elements: "+o+" and "+l)}function sH(t,e){return(t%e+e)%e}function U3e(t){return t*Math.PI/180}function V3e(t){return t*180/Math.PI}function $3e(t){return t-Math.floor(t)}function z3e(t){return t>0?1:t<0?-1:0}function j3e(t,e){return t=sH(t,e*2),e-Math.abs(t-e)}function lH(t,e,n,i){return O5(t,e,1-Math.exp(-n*i))}function H3e(t,e,n,i,a){a=a||[];for(var o=0;o<t.length;o++)a[o]=lH(t[o],e[o],n,i);return a}function W3e(t,e,n,i,a,o){if(Math.abs(e-n)<iH)return i;var s=(t-e)/(n-e)*(a-i)+i;return o&&(a<i?s<a?s=a:s>i&&(s=i):s>a?s=a:s<i&&(s=i)),s}cH.exports={mod:sH,fract:$3e,sign:z3e,degToRad:U3e,radToDeg:V3e,wrap:O3e,pingPong:j3e,linspace:k3e,lerp:O5,lerpArray:oH,inverseLerp:aH,lerpFrames:G3e,clamp:L5,clamp01:B3e,smoothstep:D3e,damp:lH,dampArray:H3e,mapRange:W3e,expand2D:fT(2),expand3D:fT(3),expand4D:fT(4)}});var fH=Ze((Jft,pT)=>{var Z3e=Yh(),x2=["mm","cm","m","pc","pt","in","ft","px"],dH={m:{system:"metric",factor:1},cm:{system:"metric",factor:1/100},mm:{system:"metric",factor:1/1e3},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}},X3e={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};function q3e(t,e){return+(Math.round(t+"e"+e)+"e-"+e)}function K3e(t,e,n,i){if(typeof t!="number"||!isFinite(t))throw new Error("Value must be a finite number");if(!e||!n)throw new Error("Must specify from and to units");i=i||{};var a=Z3e(i.pixelsPerInch,96),o=i.precision,s=i.roundPixel!==!1;if(e=e.toLowerCase(),n=n.toLowerCase(),x2.indexOf(e)===-1)throw new Error('Invalid from unit "'+e+'", must be one of: '+x2.join(", "));if(x2.indexOf(n)===-1)throw new Error('Invalid from unit "'+n+'", must be one of: '+x2.join(", "));if(e===n)return t;var l=1,c=1,u=!1;e==="px"&&(c=1/a,e="in"),n==="px"&&(u=!0,l=a,n="in");var d=dH[e],f=dH[n],p=t*d.factor*c;d.system!==f.system&&(p*=X3e[d.system].ratio);var h=p/f.factor*l;return u&&s?h=Math.round(h):typeof o=="number"&&isFinite(o)&&(h=q3e(h,o)),h}pT.exports=K3e;pT.exports.units=x2});function gT(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function pH(){return new gT}var hT,mT,hp,Y3e,hH,mH=Vg(()=>{hT=Math.PI,mT=2*hT,hp=1e-6,Y3e=mT-hp;gT.prototype=pH.prototype={constructor:gT,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,a,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(t,e,n,i,a){t=+t,e=+e,n=+n,i=+i,a=+a;var o=this._x1,s=this._y1,l=n-t,c=i-e,u=o-t,d=s-e,f=u*u+d*d;if(a<0)throw new Error("negative radius: "+a);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>hp)if(!(Math.abs(d*l-c*u)>hp)||!a)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var p=n-o,h=i-s,m=l*l+c*c,_=p*p+h*h,E=Math.sqrt(m),v=Math.sqrt(f),y=a*Math.tan((hT-Math.acos((m+f-_)/(2*E*v)))/2),x=y/v,S=y/E;Math.abs(x-1)>hp&&(this._+="L"+(t+x*u)+","+(e+x*d)),this._+="A"+a+","+a+",0,0,"+ +(d*p>u*h)+","+(this._x1=t+S*l)+","+(this._y1=e+S*c)}},arc:function(t,e,n,i,a,o){t=+t,e=+e,n=+n,o=!!o;var s=n*Math.cos(i),l=n*Math.sin(i),c=t+s,u=e+l,d=1^o,f=o?i-a:a-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>hp||Math.abs(this._y1-u)>hp)&&(this._+="L"+c+","+u),n&&(f<0&&(f=f%mT+mT),f>Y3e?this._+="A"+n+","+n+",0,1,"+d+","+(t-s)+","+(e-l)+"A"+n+","+n+",0,1,"+d+","+(this._x1=c)+","+(this._y1=u):f>hp&&(this._+="A"+n+","+n+",0,"+ +(f>=hT)+","+d+","+(this._x1=t+n*Math.cos(a))+","+(this._y1=e+n*Math.sin(a))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};hH=pH});var gH={};mr(gH,{path:()=>hH});var _H=Vg(()=>{mH()});var yH=Ze((tpt,vH)=>{function EH(t){return[t[0],t[1]]}function co(t,e){return[t,e]}vH.exports=function(e){e=e||{};var n=typeof e.recursion=="number"?e.recursion:8,i=typeof e.epsilon=="number"?e.epsilon:11920929e-14,a=typeof e.pathEpsilon=="number"?e.pathEpsilon:1,o=typeof e.angleEpsilon=="number"?e.angleEpsilon:.01,s=e.angleTolerance||0,l=e.cuspLimit||0;return function(f,p,h,m,_,E){E||(E=[]),_=typeof _=="number"?_:1;var v=a/_;return v*=v,c(f,p,h,m,E,v),E};function c(d,f,p,h,m,_){m.push(EH(d));var E=d[0],v=d[1],y=f[0],x=f[1],S=p[0],N=p[1],w=h[0],T=h[1];u(E,v,y,x,S,N,w,T,m,_,0),m.push(EH(h))}function u(d,f,p,h,m,_,E,v,y,x,S){if(!(S>n)){var N=Math.PI,w=(d+p)/2,T=(f+h)/2,I=(p+m)/2,R=(h+_)/2,L=(m+E)/2,O=(_+v)/2,H=(w+I)/2,U=(T+R)/2,X=(I+L)/2,W=(R+O)/2,ne=(H+X)/2,be=(U+W)/2;if(S>0){var q=E-d,ie=v-f,ge=Math.abs((p-E)*ie-(h-v)*q),et=Math.abs((m-E)*ie-(_-v)*q),qe,vt;if(ge>i&&et>i){if((ge+et)*(ge+et)<=x*(q*q+ie*ie)){if(s<o){y.push(co(ne,be));return}var ar=Math.atan2(_-h,m-p);if(qe=Math.abs(ar-Math.atan2(h-f,p-d)),vt=Math.abs(Math.atan2(v-_,E-m)-ar),qe>=N&&(qe=2*N-qe),vt>=N&&(vt=2*N-vt),qe+vt<s){y.push(co(ne,be));return}if(l!==0){if(qe>l){y.push(co(p,h));return}if(vt>l){y.push(co(m,_));return}}}}else if(ge>i){if(ge*ge<=x*(q*q+ie*ie)){if(s<o){y.push(co(ne,be));return}if(qe=Math.abs(Math.atan2(_-h,m-p)-Math.atan2(h-f,p-d)),qe>=N&&(qe=2*N-qe),qe<s){y.push(co(p,h)),y.push(co(m,_));return}if(l!==0&&qe>l){y.push(co(p,h));return}}}else if(et>i){if(et*et<=x*(q*q+ie*ie)){if(s<o){y.push(co(ne,be));return}if(qe=Math.abs(Math.atan2(v-_,E-m)-Math.atan2(_-h,m-p)),qe>=N&&(qe=2*N-qe),qe<s){y.push(co(p,h)),y.push(co(m,_));return}if(l!==0&&qe>l){y.push(co(m,_));return}}}else if(q=ne-(d+E)/2,ie=be-(f+v)/2,q*q+ie*ie<=x){y.push(co(ne,be));return}}u(d,f,w,T,H,U,ne,be,y,x,S+1),u(ne,be,X,W,L,O,E,v,y,x,S+1)}}}});var bH=Ze((rpt,xH)=>{xH.exports=yH()()});var _T=Ze((npt,SH)=>{SH.exports=J3e;function J3e(t){var e=0,n=0,i=0,a=0;return t.map(function(o){o=o.slice();var s=o[0],l=s.toUpperCase();if(s!=l)switch(o[0]=l,s){case"a":o[6]+=i,o[7]+=a;break;case"v":o[1]+=a;break;case"h":o[1]+=i;break;default:for(var c=1;c<o.length;)o[c++]+=i,o[c++]+=a}switch(l){case"Z":i=e,a=n;break;case"H":i=o[1];break;case"V":a=o[1];break;case"M":i=e=o[1],a=n=o[2];break;default:i=o[o.length-2],a=o[o.length-1]}return o})}});var IH=Ze((ipt,wH)=>{var mp=Math.PI,NH=CH(120);wH.exports=Q3e;function Q3e(t){for(var e,n=[],i=0,a=0,o=0,s=0,l=null,c=null,u=0,d=0,f=0,p=t.length;f<p;f++){var h=t[f],m=h[0];switch(m){case"M":o=h[1],s=h[2];break;case"A":h=TH(u,d,h[1],h[2],CH(h[3]),h[4],h[5],h[6],h[7]),h.unshift("C"),h.length>7&&(n.push(h.splice(0,7)),h.unshift("C"));break;case"S":var _=u,E=d;(e=="C"||e=="S")&&(_+=_-i,E+=E-a),h=["C",_,E,h[1],h[2],h[3],h[4]];break;case"T":e=="Q"||e=="T"?(l=u*2-l,c=d*2-c):(l=u,c=d),h=AH(u,d,l,c,h[1],h[2]);break;case"Q":l=h[1],c=h[2],h=AH(u,d,h[1],h[2],h[3],h[4]);break;case"L":h=B5(u,d,h[1],h[2]);break;case"H":h=B5(u,d,h[1],d);break;case"V":h=B5(u,d,u,h[1]);break;case"Z":h=B5(u,d,o,s);break}e=m,u=h[h.length-2],d=h[h.length-1],h.length>4?(i=h[h.length-4],a=h[h.length-3]):(i=u,a=d),n.push(h)}return n}function B5(t,e,n,i){return["C",t,e,n,i,n,i]}function AH(t,e,n,i,a,o){return["C",t/3+2/3*n,e/3+2/3*i,a/3+2/3*n,o/3+2/3*i,a,o]}function TH(t,e,n,i,a,o,s,l,c,u){if(u)x=u[0],S=u[1],v=u[2],y=u[3];else{var d=ET(t,e,-a);t=d.x,e=d.y,d=ET(l,c,-a),l=d.x,c=d.y;var f=(t-l)/2,p=(e-c)/2,h=f*f/(n*n)+p*p/(i*i);h>1&&(h=Math.sqrt(h),n=h*n,i=h*i);var m=n*n,_=i*i,E=(o==s?-1:1)*Math.sqrt(Math.abs((m*_-m*p*p-_*f*f)/(m*p*p+_*f*f)));E==1/0&&(E=1);var v=E*n*p/i+(t+l)/2,y=E*-i*f/n+(e+c)/2,x=Math.asin(((e-y)/i).toFixed(9)),S=Math.asin(((c-y)/i).toFixed(9));x=t<v?mp-x:x,S=l<v?mp-S:S,x<0&&(x=mp*2+x),S<0&&(S=mp*2+S),s&&x>S&&(x=x-mp*2),!s&&S>x&&(S=S-mp*2)}if(Math.abs(S-x)>NH){var N=S,w=l,T=c;S=x+NH*(s&&S>x?1:-1),l=v+n*Math.cos(S),c=y+i*Math.sin(S);var I=TH(l,c,n,i,a,0,s,w,T,[S,N,v,y])}var R=Math.tan((S-x)/4),L=4/3*n*R,O=4/3*i*R,H=[2*t-(t+L*Math.sin(x)),2*e-(e-O*Math.cos(x)),l+L*Math.sin(S),c-O*Math.cos(S),l,c];if(u)return H;I&&(H=H.concat(I));for(var U=0;U<H.length;){var X=ET(H[U],H[U+1],a);H[U++]=X.x,H[U++]=X.y}return H}function ET(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function CH(t){return t*(mp/180)}});var PH=Ze((apt,RH)=>{RH.exports=function(e,n){return e[0]=n[0],e[1]=n[1],e}});var LH=Ze((opt,MH)=>{var e6e=bH(),t6e=_T(),r6e=IH(),n6e=PH();function D5(t,e,n){return t[0]=e,t[1]=n,t}var i6e=[0,0],a6e=[0,0],o6e=[0,0];function s6e(t,e,n,i){e6e(n,D5(i6e,i[1],i[2]),D5(a6e,i[3],i[4]),D5(o6e,i[5],i[6]),e,t)}MH.exports=function(e,n){var i=[],a=[],o=[0,0];return r6e(t6e(e)).forEach(function(s,l,c){if(s[0]==="M")n6e(o,s.slice(1)),a.length>0&&(i.push(a),a=[]);else if(s[0]==="C")s6e(a,n,o,s),D5(o,s[5],s[6]);else throw new Error("illegal type in SVG: "+s[0])}),a.length>0&&i.push(a),i}});var BH=Ze((spt,OH)=>{OH.exports=c6e;var vT={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},l6e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function c6e(t){var e=[];return t.replace(l6e,function(n,i,a){var o=i.toLowerCase();for(a=d6e(a),o=="m"&&a.length>2&&(e.push([i].concat(a.splice(0,2))),o="l",i=i=="m"?"l":"L");;){if(a.length==vT[o])return a.unshift(i),e.push(a);if(a.length<vT[o])throw new Error("malformed path data");e.push([i].concat(a.splice(0,vT[o])))}}),e}var u6e=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function d6e(t){var e=t.match(u6e);return e?e.map(Number):[]}});var FH={};mr(FH,{default:()=>g6e});var f6e,b2,yT,p6e,DH,h6e,m6e,g6e,kH=Vg(()=>{f6e=function(){function t(e,n){var i=[],a=!0,o=!1,s=void 0;try{for(var l=e[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(i.push(c.value),!(n&&i.length===n));a=!0);}catch(u){o=!0,s=u}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}return i}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b2=Math.PI*2,yT=function(e,n,i,a,o,s,l){var c=e.x,u=e.y;c*=n,u*=i;var d=a*c-o*u,f=o*c+a*u;return{x:d+s,y:f+l}},p6e=function(e,n){var i=n===1.5707963267948966?.551915024494:n===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(n/4),a=Math.cos(e),o=Math.sin(e),s=Math.cos(e+n),l=Math.sin(e+n);return[{x:a-o*i,y:o+a*i},{x:s+l*i,y:l-s*i},{x:s,y:l}]},DH=function(e,n,i,a){var o=e*a-n*i<0?-1:1,s=e*i+n*a;return s>1&&(s=1),s<-1&&(s=-1),o*Math.acos(s)},h6e=function(e,n,i,a,o,s,l,c,u,d,f,p){var h=Math.pow(o,2),m=Math.pow(s,2),_=Math.pow(f,2),E=Math.pow(p,2),v=h*m-h*E-m*_;v<0&&(v=0),v/=h*E+m*_,v=Math.sqrt(v)*(l===c?-1:1);var y=v*o/s*p,x=v*-s/o*f,S=d*y-u*x+(e+i)/2,N=u*y+d*x+(n+a)/2,w=(f-y)/o,T=(p-x)/s,I=(-f-y)/o,R=(-p-x)/s,L=DH(1,0,w,T),O=DH(w,T,I,R);return c===0&&O>0&&(O-=b2),c===1&&O<0&&(O+=b2),[S,N,L,O]},m6e=function(e){var n=e.px,i=e.py,a=e.cx,o=e.cy,s=e.rx,l=e.ry,c=e.xAxisRotation,u=c===void 0?0:c,d=e.largeArcFlag,f=d===void 0?0:d,p=e.sweepFlag,h=p===void 0?0:p,m=[];if(s===0||l===0)return[];var _=Math.sin(u*b2/360),E=Math.cos(u*b2/360),v=E*(n-a)/2+_*(i-o)/2,y=-_*(n-a)/2+E*(i-o)/2;if(v===0&&y===0)return[];s=Math.abs(s),l=Math.abs(l);var x=Math.pow(v,2)/Math.pow(s,2)+Math.pow(y,2)/Math.pow(l,2);x>1&&(s*=Math.sqrt(x),l*=Math.sqrt(x));var S=h6e(n,i,a,o,s,l,f,h,_,E,v,y),N=f6e(S,4),w=N[0],T=N[1],I=N[2],R=N[3],L=Math.abs(R)/(b2/4);Math.abs(1-L)<1e-7&&(L=1);var O=Math.max(Math.ceil(L),1);R/=O;for(var H=0;H<O;H++)m.push(p6e(I,R)),I+=R;return m.map(function(U){var X=yT(U[0],s,l,E,_,w,T),W=X.x,ne=X.y,be=yT(U[1],s,l,E,_,w,T),q=be.x,ie=be.y,ge=yT(U[2],s,l,E,_,w,T),et=ge.x,qe=ge.y;return{x1:W,y1:ne,x2:q,y2:ie,x:et,y:qe}})},g6e=m6e});var VH=Ze((lpt,UH)=>{"use strict";UH.exports=E6e;var _6e=(kH(),r4(FH));function E6e(t){for(var e,n=[],i=0,a=0,o=0,s=0,l=null,c=null,u=0,d=0,f=0,p=t.length;f<p;f++){var h=t[f],m=h[0];switch(m){case"M":o=h[1],s=h[2];break;case"A":var _=_6e({px:u,py:d,cx:h[6],cy:h[7],rx:h[1],ry:h[2],xAxisRotation:h[3],largeArcFlag:h[4],sweepFlag:h[5]});if(!_.length)continue;for(var E=0,v;E<_.length;E++)v=_[E],h=["C",v.x1,v.y1,v.x2,v.y2,v.x,v.y],E<_.length-1&&n.push(h);break;case"S":var y=u,x=d;(e=="C"||e=="S")&&(y+=y-i,x+=x-a),h=["C",y,x,h[1],h[2],h[3],h[4]];break;case"T":e=="Q"||e=="T"?(l=u*2-l,c=d*2-c):(l=u,c=d),h=GH(u,d,l,c,h[1],h[2]);break;case"Q":l=h[1],c=h[2],h=GH(u,d,h[1],h[2],h[3],h[4]);break;case"L":h=F5(u,d,h[1],h[2]);break;case"H":h=F5(u,d,h[1],d);break;case"V":h=F5(u,d,u,h[1]);break;case"Z":h=F5(u,d,o,s);break}e=m,u=h[h.length-2],d=h[h.length-1],h.length>4?(i=h[h.length-4],a=h[h.length-3]):(i=u,a=d),n.push(h)}return n}function F5(t,e,n,i){return["C",t,e,n,i,n,i]}function GH(t,e,n,i,a,o){return["C",t/3+2/3*n,e/3+2/3*i,a/3+2/3*n,o/3+2/3*i,a,o]}});var xT=Ze((cpt,k5)=>{var v6e=function(){"use strict";function t(d,f){return f!=null&&d instanceof f}var e;try{e=Map}catch(d){e=function(){}}var n;try{n=Set}catch(d){n=function(){}}var i;try{i=Promise}catch(d){i=function(){}}function a(d,f,p,h,m){typeof f=="object"&&(p=f.depth,h=f.prototype,m=f.includeNonEnumerable,f=f.circular);var _=[],E=[],v=typeof Buffer!="undefined";typeof f=="undefined"&&(f=!0),typeof p=="undefined"&&(p=1/0);function y(x,S){if(x===null)return null;if(S===0)return x;var N,w;if(typeof x!="object")return x;if(t(x,e))N=new e;else if(t(x,n))N=new n;else if(t(x,i))N=new i(function(W,ne){x.then(function(be){W(y(be,S-1))},function(be){ne(y(be,S-1))})});else if(a.__isArray(x))N=[];else if(a.__isRegExp(x))N=new RegExp(x.source,u(x)),x.lastIndex&&(N.lastIndex=x.lastIndex);else if(a.__isDate(x))N=new Date(x.getTime());else{if(v&&Buffer.isBuffer(x))return Buffer.allocUnsafe?N=Buffer.allocUnsafe(x.length):N=new Buffer(x.length),x.copy(N),N;t(x,Error)?N=Object.create(x):typeof h=="undefined"?(w=Object.getPrototypeOf(x),N=Object.create(w)):(N=Object.create(h),w=h)}if(f){var T=_.indexOf(x);if(T!=-1)return E[T];_.push(x),E.push(N)}t(x,e)&&x.forEach(function(W,ne){var be=y(ne,S-1),q=y(W,S-1);N.set(be,q)}),t(x,n)&&x.forEach(function(W){var ne=y(W,S-1);N.add(ne)});for(var I in x){var R;w&&(R=Object.getOwnPropertyDescriptor(w,I)),!(R&&R.set==null)&&(N[I]=y(x[I],S-1))}if(Object.getOwnPropertySymbols)for(var L=Object.getOwnPropertySymbols(x),I=0;I<L.length;I++){var O=L[I],H=Object.getOwnPropertyDescriptor(x,O);H&&!H.enumerable&&!m||(N[O]=y(x[O],S-1),H.enumerable||Object.defineProperty(N,O,{enumerable:!1}))}if(m)for(var U=Object.getOwnPropertyNames(x),I=0;I<U.length;I++){var X=U[I],H=Object.getOwnPropertyDescriptor(x,X);H&&H.enumerable||(N[X]=y(x[X],S-1),Object.defineProperty(N,X,{enumerable:!1}))}return N}return y(d,p)}a.clonePrototype=function(f){if(f===null)return null;var p=function(){};return p.prototype=f,new p};function o(d){return Object.prototype.toString.call(d)}a.__objToStr=o;function s(d){return typeof d=="object"&&o(d)==="[object Date]"}a.__isDate=s;function l(d){return typeof d=="object"&&o(d)==="[object Array]"}a.__isArray=l;function c(d){return typeof d=="object"&&o(d)==="[object RegExp]"}a.__isRegExp=c;function u(d){var f="";return d.global&&(f+="g"),d.ignoreCase&&(f+="i"),d.multiline&&(f+="m"),f}return a.__getRegExpFlags=u,a}();typeof k5=="object"&&k5.exports&&(k5.exports=v6e)});var bT=Ze((upt,$H)=>{$H.exports.squaredDistance=y6e;function y6e(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}});var jH=Ze((dpt,NT)=>{var zH=xT(),ST=bT().squaredDistance;NT.exports.sort=function(e){if(e=zH(e),!e.length)return e;var n=[];for(n.push(e[0]),e=e.slice(1);e.length;){var i=n[n.length-1],a=i[i.length-1],o=e.reduce(function(u,d,f){var p=d[0],h=d[d.length-1],m=ST(a,p),_=ST(a,h);return u?m<u.distance?{idx:f,distance:m,reverse:!1}:_<u.distance?{idx:f,distance:_,reverse:!0}:u:{idx:f,distance:Math.min(m,_),reverse:_<m}},null),s=o.idx,l=o.reverse,c=e.splice(s,1)[0].slice();l&&c.reverse(),n.push(c)}return n};NT.exports.merge=function(e,n){n=n!=null?n:.05;var i=n*n;e=zH(e);for(var a=1;a<e.length;a++){var o=e[a-1],s=e[a];ST(s[0],o[o.length-1])<i&&(e=x6e(e,a-1,a),a-=1)}return e};function x6e(t,e,n){var i=Math.min(e,n),a=Math.max(e,n);t=t.slice();var o=t[i],s=t[a],l=o.concat(s.slice(1));return t.splice(a,1),t.splice(i,1,l),t}});var WH=Ze((fpt,HH)=>{"use strict";HH.exports=G5;G5.polyline=G5;G5.polygon=b6e;function G5(t,e,n){var i=t.length,a=Jh(t[0],e),o=[],s,l,c,u,d;for(n||(n=[]),s=1;s<i;s++){for(l=t[s-1],c=t[s],u=d=Jh(c,e);;)if(a|u){if(a&u)break;a?(l=AT(l,c,a,e),a=Jh(l,e)):(c=AT(l,c,u,e),u=Jh(c,e))}else{o.push(l),u!==d?(o.push(c),s<i-1&&(n.push(o),o=[])):s===i-1&&o.push(c);break}a=d}return o.length&&n.push(o),n}function b6e(t,e){var n,i,a,o,s,l,c;for(i=1;i<=8;i*=2){for(n=[],a=t[t.length-1],o=!(Jh(a,e)&i),s=0;s<t.length;s++)l=t[s],c=!(Jh(l,e)&i),c!==o&&n.push(AT(a,l,i,e)),c&&n.push(l),a=l,o=c;if(t=n,!t.length)break}return n}function AT(t,e,n,i){return n&8?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:n&4?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:n&2?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:n&1?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function Jh(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}});var V5=Ze((ppt,ZH)=>{"use strict";var TT=Math.abs,S6e=Math.min;function U5(t,e,n,i){var a=TT(t-e);return n==null&&(n=U5.DBL_EPSILON),i==null&&(i=n),a<=n||a<=i*S6e(TT(t),TT(e))?!0:t===e}U5.FLT_EPSILON=11920929e-14;U5.DBL_EPSILON=2220446049250313e-31;ZH.exports=U5});var qH=Ze((hpt,XH)=>{var N6e=Object.prototype.toString;XH.exports=A6e;function A6e(t){return t.BYTES_PER_ELEMENT&&N6e.call(t.buffer)==="[object ArrayBuffer]"||Array.isArray(t)}});var YH=Ze((mpt,KH)=>{"use strict";var CT=Math.abs,T6e=Math.min;function wT(t,e,n,i){var a=CT(t-e);return a<=n||a<=i*T6e(CT(t),CT(e))?!0:t===e}wT.FLT_EPSILON=11920929e-14;wT.DBL_EPSILON=2220446049250313e-31;KH.exports=wT});var tW=Ze((gpt,eW)=>{var JH=qH(),QH=YH();eW.exports=function(t,e,n,i){return!t||!e||!JH(t)||!JH(e)||t.length!==e.length?!1:(typeof n!="number"&&(n=QH.FLT_EPSILON),typeof i!="number"&&(i=n),Array.prototype.slice.call(t).every(function(a,o){var s=e[o];return a===s||QH(a,s,n,i)}))}});var iW=Ze((_pt,nW)=>{var Fu=V5();nW.exports=C6e;function C6e(t,e,n,i,a){return w6e(t[0],t[1],e[0],e[1],n[0],n[1],i,a)}function w6e(t,e,n,i,a,o,s,l){l==null&&(l=[]);var c=rW(t,e,a,o,s),u=rW(n,i,a,o,s);if(c&&u)return l.push([t,e]),l.push([n,i]),!0;var d,f,p,h,m;if(c||u){p=R6e(t,e,n,i,a,o),h=p[0],m=p[1],d=IT(h,m,a,o),f=Math.sqrt(s*s-d*d);var _=c?[t,e]:[n,i],E=c?Qh(h,m,n,i,f):Qh(h,m,t,e,f);return Fu(_[0],E[0])&&Fu(_[1],E[1])?(l.push(_),!0):(l.push(_),l.push(E),!0)}return p=P6e(t,e,n,i,a,o),h=p[0],m=p[1],Fu(t,h)&&Fu(e,m)||Fu(n,h)&&Fu(i,m)?!1:(d=IT(h,m,a,o),d>s?!1:Fu(d,s)?(l.push([h,m]),!0):Fu(d,0)?(l.push(Qh(a,o,t,e,s)),l.push(Qh(a,o,n,i,s)),!0):(f=Math.sqrt(s*s-d*d),l.push(Qh(h,m,t,e,f)),l.push(Qh(h,m,n,i,f)),!0))}function I6e(t,e,n,i){var a=n-t,o=i-e;return a*a+o*o}function rW(t,e,n,i,a){return I6e(t,e,n,i)<=a*a}function IT(t,e,n,i){var a=t-n,o=e-i;return Math.sqrt(a*a+o*o)}function Qh(t,e,n,i,a){var o=a/IT(t,e,n,i);return[t+o*(n-t),e+o*(i-e)]}function R6e(t,e,n,i,a,o){var s=n-t,l=i-e,c=a-t,u=o-e,d=s*c+l*u,f=s*s+l*l,p=d/f;return[t+p*s,e+p*l]}function P6e(t,e,n,i,a,o){var s=n-t,l=i-e,c=a-t,u=o-e,d=s*c+l*u;if(d<=0)return[t,e];var f=s*s+l*l;if(f<=d)return[n,i];var p=d/f;return[t+p*s,e+p*l]}});var oW=Ze((Ept,aW)=>{var M6e=V5();aW.exports=L6e;function L6e(t,e,n,i,a){a==null&&(a=[]);var o=gp(e[0]-t[0])+gp(e[1]-t[1]),s=2*((e[0]-t[0])*(t[0]-n[0])+(e[1]-t[1])*(t[1]-n[1])),l=gp(n[0])+gp(n[1])+gp(t[0])+gp(t[1])-2*(n[0]*t[0]+n[1]*t[1])-gp(i),c=s*s-4*o*l,u;if(c<0)return!1;if(M6e(c,0))return u=-s/(2*o),a.push([t[0]+u*(e[0]-t[0]),t[1]+u*(e[1]-t[1])]),!0;if(c>0){var d=Math.sqrt(c);return u=(-s+d)/(2*o),a.push([t[0]+u*(e[0]-t[0]),t[1]+u*(e[1]-t[1])]),u=(-s-d)/(2*o),a.push([t[0]+u*(e[0]-t[0]),t[1]+u*(e[1]-t[1])]),!0}return null}function gp(t){return t*t}});var RT=Ze((vpt,yl)=>{var sW=WH(),O6e=V5(),B6e=tW(),cW=xT(),lW=bT().squaredDistance;yl.exports.arePointsCollinear=function(t,e,n){var i=t[0],a=t[1],o=e[0],s=e[1],l=n[0],c=n[1];return O6e((a-s)*(i-l),(a-c)*(i-o))};yl.exports.removeDuplicatePoints=function(t){for(var e=[],n,i=0;i<t.length;i++){var a=t[i];(!n||!B6e(n,a))&&(e.push(a),n=a)}return cW(e)};yl.exports.removeCollinearPoints=function(t){for(var e=[],n=cW(t);n.length>=3;){var i=n[0],a=n[1],o=n[2],s=yl.exports.arePointsCollinear(i,a,o);if(s){var l=lW(i,a),c=lW(i,o);l>c&&(s=!1)}if(s)n.splice(1,1);else for(var u=0;u<1;u++)e.push(n.shift())}for(;n.length;)e.push(n.shift());return e};yl.exports.clipSegmentToCircle=iW();yl.exports.clipLineToCircle=oW();yl.exports.clipPolylinesToBox=function(t,e,n,i){if(!Array.isArray(e)||e.length!==2&&e.length!==4)throw new Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(e.length===2){var a=e[0],o=e[1];e=[a[0],a[1],o[0],o[1]]}return i=i!==!1,n=!!n,n?t.map(function(s){var l=sW.polygon(s,e);return i&&l.length>2&&l.push(l[0]),l}).filter(function(s){return s.length>0}):t.map(function(s){return sW.polyline(s,e)}).reduce(function(s,l){return s.concat(l)},[])};yl.exports.createHatchLines=D6e;function D6e(t,e,n,i){if(!Array.isArray(t)||t.length!==2&&t.length!==4)throw new Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(t.length===2){var a=t[0],o=t[1];t=[a[0],a[1],o[0],o[1]]}if(e==null&&(e=-Math.PI/4),n==null&&(n=.5),i==null&&(i=[]),n=Math.abs(n),n===0)throw new Error("cannot use a spacing of zero as it will run an infinite loop!");var s=t[0],l=t[1],c=t[2],u=t[3],d=c-s,f=u-l;if(d===0||f===0)return i;for(var p=Math.sqrt(d*d+f*f)/2,h=Math.PI/2-e,m=Math.cos(h),_=Math.sin(h),E=s+d/2,v=l+f/2,y=-p;y<=p;){var x=E+y*m+p*_,S=v+y*_-p*m,N=E+y*m-p*_,w=v+y*_+p*m;y+=n,!(x<s&&N<s||x>c&&N>c)&&(S<l&&w<l||S>u&&w>u||i.push([[x,S],[N,w]]))}return i}yl.exports.getBounds=function(e){var n=e.length;if(n===0)throw new Error("Expected points to be a non-empty array");for(var i=e[0].length,a=e[0].slice(),o=e[0].slice(),s=1;s<n;++s)for(var l=e[s],c=0;c<i;++c){var u=l[c];a[c]=Math.min(a[c],u),o[c]=Math.max(o[c],u)}return[a,o]}});var AW=Ze((ypt,Uo)=>{var pW=Yh(),ku=fH(),F6e=(_H(),r4(gH)),k6e=LH(),hW=BH(),G6e=_T(),U6e=VH(),uW=jH(),dW=RT(),mW=.03,gW="cm",$5=90;Uo.exports.createPath=V6e;function V6e(t){var e=F6e.path();return typeof t=="function"&&t(e),e.lineTo=n(e.lineTo),e.quadraticCurveTo=n(e.quadraticCurveTo),e.bezierCurveTo=n(e.bezierCurveTo),e;function n(i){return function(){var a=Array.prototype.slice.call(arguments);return e._x1==null&&e._y1==null&&e.moveTo(a[0],a[1]),i.apply(e,a)}}}Uo.exports.pathsToSVGPaths=_W;function _W(t,e){e=e||{};var n=MT(t,e),i=Array.isArray(n)?n:[n];return i.filter(Boolean)}Uo.exports.pathsToPolylines=EW;function EW(t,e){e=e||{};var n;if(e.curveResolution!=null&&isFinite(e.curveResolution)&&typeof e.curveResolution=="number")n=e.curveResolution;else{var i=e.units||"px";n=Math.max(1,ku(4,i,"px"))}var a=[];return z5(t,function(o){if(typeof o=="string"){var s=hW(o),l=k6e(s,n);l.forEach(function(u){a.push(u)})}else{var c=o.map(function(u){return[u[0]||0,u[1]||0]});a.push(c)}}),a}Uo.exports.pathsToSVG=PT;function PT(t,e){e=e||{};var n=e.width,i=e.height,a=typeof n=="undefined"||typeof i=="undefined";if(a)throw new Error('Must specify "width" and "height" options');var o="px",s=e.units||o,l={units:s,viewUnits:"px",roundPixel:!1,precision:pW(e.precision,5),pixelsPerInch:$5};if(t=EW(t,Object.assign({},l,{curveResolution:e.curveResolution||void 0})),e.optimize){var c=typeof e.optimize=="object"?e.optimize:{sort:!0,merge:!0,removeDuplicates:!0,removeCollinear:!0},u=c.sort!==!1,d=c.merge!==!1,f=c.removeDuplicates!==!1,p=c.removeCollinear!==!1;if(f&&(t=t.map(function(I){return dW.removeDuplicatePoints(I)})),p&&(t=t.map(function(I){return dW.removeCollinearPoints(I)})),u&&(t=uW.sort(t)),d){var h=c.mergeThreshold!=null?c.mergeThreshold:ku(.25,"mm",s,{pixelsPerInch:$5});t=uW.merge(t,h)}}var m=_W(t,l),_=ku(n,s,o,l).toString(),E=ku(i,s,o,l).toString(),v=e.fillStyle||"none",y=e.strokeStyle||"black",x=e.lineWidth,S=e.lineJoin,N=e.lineCap;typeof x=="undefined"&&(x=ku(mW,gW,s,l).toString());var w=m.map(function(I){var R=fW([["d",I]]);return"    <path "+R+" />"}).join(`
`),T=fW([["fill",v],["stroke",y],["stroke-width",x+""+s],S?["stroke-linejoin",S]:!1,N?["stroke-linecap",N]:!1]);return['<?xml version="1.0" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','    "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">','<svg width="'+n+s+'" height="'+i+s+'"','    xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+_+" "+E+'">',"  <g "+T+">",w,"  </g>","</svg>"].join(`
`)}function fW(t){return t.filter(Boolean).map(function(e){return e[0]+'="'+e[1]+'"'}).join(" ")}Uo.exports.renderPaths=vW;function vW(t,e){e=e||{};var n=e.context;if(!n)throw new Error('Must specify "context" options');var i=e.units||"px",a=e.width,o=e.height;if(typeof a=="undefined"||typeof o=="undefined")throw new Error('Must specify "width" and "height" options');var s=e.lineWidth;return typeof s=="undefined"&&(s=ku(mW,gW,i,{roundPixel:!1,pixelsPerInch:$5})),n.clearRect(0,0,a,o),n.fillStyle=e.background||"white",n.fillRect(0,0,a,o),n.strokeStyle=e.foreground||e.strokeStyle||"black",n.lineWidth=s,n.lineJoin=e.lineJoin||"miter",n.lineCap=e.lineCap||"butt",z5(t,function(l){n.beginPath(),typeof l=="string"?yW(n,l):l.forEach(function(c){n.lineTo(c[0],c[1])}),n.stroke()}),[n.canvas,{data:PT(t,e),extension:".svg"}]}Uo.exports.convertToSVGPath=MT;function MT(t,e){return bW(t)?"":typeof t=="string"?t:SW(t)?t.toString():NW(t)?xW(t,e):Array.isArray(t)?t.map(function(n){return MT(n,e)}).reduce(function(n,i){return n.concat(i)},[]):""}Uo.exports.eachPath=z5;function z5(t,e){bW(t)||(typeof t=="string"||SW(t)?e(t.toString()):NW(t)?e(t):Array.isArray(t)&&t.forEach(function(n){return z5(n,e)}))}Uo.exports.drawSVGPath=yW;function yW(t,e){for(var n=U6e(G6e(hW(e))),i=0;i<n.length;i++){var a=n[i],o=a[0];if(o==="M")t.moveTo(a[1],a[2]);else if(o==="C")t.bezierCurveTo(a[1],a[2],a[3],a[4],a[5],a[6]);else throw new Error('Illegal type "'+o+'" in SVG commands')}}Uo.exports.polylineToSVGPath=xW;function xW(t,e){e=e||{};var n=e.units||"px",i=e.viewUnits||n,a=[],o={roundPixel:!1,precision:pW(e.precision,5),pixelsPerInch:$5};return t.forEach(function(s,l){var c=l===0?"M":"L",u=ku(s[0],n,i,o).toString(),d=ku(s[1],n,i,o).toString();a.push(c+u+" "+d)}),a.join(" ")}function bW(t){return!t||Array.isArray(t)&&t.length===0}function SW(t){return typeof t=="object"&&t&&!Array.isArray(t)}function NW(t){return!t||!Array.isArray(t)||t.length===0?!1:$6e(t[0])}function $6e(t){return Array.isArray(t)&&t.length>=2&&t.every(function(e){return typeof e=="number"})}Uo.exports.polylinesToSVG=function(e,n){if(!Array.isArray(e))throw new Error("Expected array of arrays for polylines");return console.warn("polylinesToSVG is deprecated, use pathsToSVG instead which has the same functionality"),PT(e,n)};Uo.exports.renderPolylines=function(e,n){if(!Array.isArray(e))throw new Error("Expected array of arrays for polylines");return console.warn("renderPolylines is deprecated, use renderPaths instead which has the same functionality"),vW(e,n)}});var TW=Ze((LT,OT)=>{(function(t,e){typeof LT=="object"&&typeof OT!="undefined"?OT.exports=e():typeof define=="function"&&define.amd?define(e):t.createREGL=e()})(LT,function(){"use strict";var t=function(C){return C instanceof Uint8Array||C instanceof Uint16Array||C instanceof Uint32Array||C instanceof Int8Array||C instanceof Int16Array||C instanceof Int32Array||C instanceof Float32Array||C instanceof Float64Array||C instanceof Uint8ClampedArray},e=function(C,M){for(var V=Object.keys(M),oe=0;oe<V.length;++oe)C[V[oe]]=M[V[oe]];return C},n=`
`;function i(C){return typeof atob!="undefined"?atob(C):"base64:"+C}function a(C){var M=new Error("(regl) "+C);throw console.error(M),M}function o(C,M){C||a(M)}function s(C){return C?": "+C:""}function l(C,M,V){C in M||a("unknown parameter ("+C+")"+s(V)+". possible values: "+Object.keys(M).join())}function c(C,M){t(C)||a("invalid parameter type"+s(M)+". must be a typed array")}function u(C,M){switch(M){case"number":return typeof C=="number";case"object":return typeof C=="object";case"string":return typeof C=="string";case"boolean":return typeof C=="boolean";case"function":return typeof C=="function";case"undefined":return typeof C=="undefined";case"symbol":return typeof C=="symbol"}}function d(C,M,V){u(C,M)||a("invalid parameter type"+s(V)+". expected "+M+", got "+typeof C)}function f(C,M){C>=0&&(C|0)===C||a("invalid parameter type, ("+C+")"+s(M)+". must be a nonnegative integer")}function p(C,M,V){M.indexOf(C)<0&&a("invalid value"+s(V)+". must be one of: "+M)}var h=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function m(C){Object.keys(C).forEach(function(M){h.indexOf(M)<0&&a('invalid regl constructor argument "'+M+'". must be one of '+h)})}function _(C,M){for(C=C+"";C.length<M;)C=" "+C;return C}function E(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function v(C,M){this.number=C,this.line=M,this.errors=[]}function y(C,M,V){this.file=C,this.line=M,this.message=V}function x(){var C=new Error,M=(C.stack||C).toString(),V=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(M);if(V)return V[1];var oe=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(M);return oe?oe[1]:"unknown"}function S(){var C=new Error,M=(C.stack||C).toString(),V=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(M);if(V)return V[1];var oe=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(M);return oe?oe[1]:"unknown"}function N(C,M){var V=C.split(`
`),oe=1,_e=0,ae={unknown:new E,0:new E};ae.unknown.name=ae[0].name=M||x(),ae.unknown.lines.push(new v(0,""));for(var ue=0;ue<V.length;++ue){var Ae=V[ue],Ce=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ae);if(Ce)switch(Ce[1]){case"line":var Me=/(\d+)(\s+\d+)?/.exec(Ce[2]);Me&&(oe=Me[1]|0,Me[2]&&(_e=Me[2]|0,_e in ae||(ae[_e]=new E)));break;case"define":var we=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Ce[2]);we&&(ae[_e].name=we[1]?i(we[2]):we[2]);break}ae[_e].lines.push(new v(oe++,Ae))}return Object.keys(ae).forEach(function(Be){var Ve=ae[Be];Ve.lines.forEach(function(Te){Ve.index[Te.number]=Te})}),ae}function w(C){var M=[];return C.split(`
`).forEach(function(V){if(!(V.length<5)){var oe=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(V);oe?M.push(new y(oe[1]|0,oe[2]|0,oe[3].trim())):V.length>0&&M.push(new y("unknown",0,V))}}),M}function T(C,M){M.forEach(function(V){var oe=C[V.file];if(oe){var _e=oe.index[V.line];if(_e){_e.errors.push(V),oe.hasErrors=!0;return}}C.unknown.hasErrors=!0,C.unknown.lines[0].errors.push(V)})}function I(C,M,V,oe,_e){if(!C.getShaderParameter(M,C.COMPILE_STATUS)){var ae=C.getShaderInfoLog(M),ue=oe===C.FRAGMENT_SHADER?"fragment":"vertex";W(V,"string",ue+" shader source must be a string",_e);var Ae=N(V,_e),Ce=w(ae);T(Ae,Ce),Object.keys(Ae).forEach(function(Me){var we=Ae[Me];if(!we.hasErrors)return;var Be=[""],Ve=[""];function Te(De,Q){Be.push(De),Ve.push(Q||"")}Te("file number "+Me+": "+we.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),we.lines.forEach(function(De){if(De.errors.length>0){Te(_(De.number,4)+"|  ","background-color:yellow; font-weight:bold"),Te(De.line+n,"color:red; background-color:yellow; font-weight:bold");var Q=0;De.errors.forEach(function(de){var Re=de.message,He=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Re);if(He){var ye=He[1];switch(Re=He[2],ye){case"assign":ye="=";break}Q=Math.max(De.line.indexOf(ye,Q),0)}else Q=0;Te(_("| ",6)),Te(_("^^^",Q+3)+n,"font-weight:bold"),Te(_("| ",6)),Te(Re+n,"font-weight:bold")}),Te(_("| ",6)+n)}else Te(_(De.number,4)+"|  "),Te(De.line+n,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ve[0]=Be.join("%c"),console.log.apply(console,Ve)):console.log(Be.join(""))}),o.raise("Error compiling "+ue+" shader, "+Ae[0].name)}}function R(C,M,V,oe,_e){if(!C.getProgramParameter(M,C.LINK_STATUS)){var ae=C.getProgramInfoLog(M),ue=N(V,_e),Ae=N(oe,_e),Ce='Error linking program with vertex shader, "'+Ae[0].name+'", and fragment shader "'+ue[0].name+'"';typeof document!="undefined"?console.log("%c"+Ce+n+"%c"+ae,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ce+n+ae),o.raise(Ce)}}function L(C){C._commandRef=x()}function O(C,M,V,oe){L(C);function _e(Ce){return Ce?oe.id(Ce):0}C._fragId=_e(C.static.frag),C._vertId=_e(C.static.vert);function ae(Ce,Me){Object.keys(Me).forEach(function(we){Ce[oe.id(we)]=!0})}var ue=C._uniformSet={};ae(ue,M.static),ae(ue,M.dynamic);var Ae=C._attributeSet={};ae(Ae,V.static),ae(Ae,V.dynamic),C._hasCount="count"in C.static||"count"in C.dynamic||"elements"in C.static||"elements"in C.dynamic}function H(C,M){var V=S();a(C+" in command "+(M||x())+(V==="unknown"?"":" called from "+V))}function U(C,M,V){C||H(M,V||x())}function X(C,M,V,oe){C in M||H("unknown parameter ("+C+")"+s(V)+". possible values: "+Object.keys(M).join(),oe||x())}function W(C,M,V,oe){u(C,M)||H("invalid parameter type"+s(V)+". expected "+M+", got "+typeof C,oe||x())}function ne(C){C()}function be(C,M,V){C.texture?p(C.texture._texture.internalformat,M,"unsupported texture format for attachment"):p(C.renderbuffer._renderbuffer.format,V,"unsupported renderbuffer format for attachment")}var q=33071,ie=9728,ge=9984,et=9985,qe=9986,vt=9987,ar=5120,Qt=5121,Ai=5122,Ti=5123,Ci=5124,Qe=5125,Nt=5126,Bt=32819,Ue=32820,Cr=33635,qt=34042,kr=36193,er={};er[ar]=er[Qt]=1,er[Ai]=er[Ti]=er[kr]=er[Cr]=er[Bt]=er[Ue]=2,er[Ci]=er[Qe]=er[Nt]=er[qt]=4;function Mn(C,M){return C===Ue||C===Bt||C===Cr?2:C===qt?4:er[C]*M}function ia(C){return!(C&C-1)&&!!C}function hs(C,M,V){var oe,_e=M.width,ae=M.height,ue=M.channels;o(_e>0&&_e<=V.maxTextureSize&&ae>0&&ae<=V.maxTextureSize,"invalid texture shape"),(C.wrapS!==q||C.wrapT!==q)&&o(ia(_e)&&ia(ae),"incompatible wrap mode for texture, both width and height must be power of 2"),M.mipmask===1?_e!==1&&ae!==1&&o(C.minFilter!==ge&&C.minFilter!==qe&&C.minFilter!==et&&C.minFilter!==vt,"min filter requires mipmap"):(o(ia(_e)&&ia(ae),"texture must be a square power of 2 to support mipmapping"),o(M.mipmask===(_e<<1)-1,"missing or incomplete mipmap data")),M.type===Nt&&(V.extensions.indexOf("oes_texture_float_linear")<0&&o(C.minFilter===ie&&C.magFilter===ie,"filter not supported, must enable oes_texture_float_linear"),o(!C.genMipmaps,"mipmap generation not supported with float textures"));var Ae=M.images;for(oe=0;oe<16;++oe)if(Ae[oe]){var Ce=_e>>oe,Me=ae>>oe;o(M.mipmask&1<<oe,"missing mipmap data");var we=Ae[oe];if(o(we.width===Ce&&we.height===Me,"invalid shape for mip images"),o(we.format===M.format&&we.internalformat===M.internalformat&&we.type===M.type,"incompatible type for mip image"),!we.compressed)if(we.data){var Be=Math.ceil(Mn(we.type,ue)*Ce/we.unpackAlignment)*we.unpackAlignment;o(we.data.byteLength===Be*Me,"invalid data for image, buffer size is inconsistent with image format")}else we.element||we.copy}else C.genMipmaps||o((M.mipmask&1<<oe)===0,"extra mipmap data");M.compressed&&o(!C.genMipmaps,"mipmap generation for compressed images not supported")}function Ql(C,M,V,oe){var _e=C.width,ae=C.height,ue=C.channels;o(_e>0&&_e<=oe.maxTextureSize&&ae>0&&ae<=oe.maxTextureSize,"invalid texture shape"),o(_e===ae,"cube map must be square"),o(M.wrapS===q&&M.wrapT===q,"wrap mode not supported by cube map");for(var Ae=0;Ae<V.length;++Ae){var Ce=V[Ae];o(Ce.width===_e&&Ce.height===ae,"inconsistent cube map face shape"),M.genMipmaps&&(o(!Ce.compressed,"can not generate mipmap for compressed textures"),o(Ce.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Me=Ce.images,we=0;we<16;++we){var Be=Me[we];if(Be){var Ve=_e>>we,Te=ae>>we;o(Ce.mipmask&1<<we,"missing mipmap data"),o(Be.width===Ve&&Be.height===Te,"invalid shape for mip images"),o(Be.format===C.format&&Be.internalformat===C.internalformat&&Be.type===C.type,"incompatible type for mip image"),Be.compressed||(Be.data?o(Be.data.byteLength===Ve*Te*Math.max(Mn(Be.type,ue),Be.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Be.element||Be.copy)}}}}var D=e(o,{optional:ne,raise:a,commandRaise:H,command:U,parameter:l,commandParameter:X,constructor:m,type:d,commandType:W,isTypedArray:c,nni:f,oneOf:p,shaderError:I,linkError:R,callSite:S,saveCommandRef:L,saveDrawInfo:O,framebufferFormat:be,guessCommand:x,texture2D:hs,textureCube:Ql}),Eg=0,vg=0,yg=5,xg=6;function ms(C,M){this.id=Eg++,this.type=C,this.data=M}function U1(C){return C.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ec(C){if(C.length===0)return[];var M=C.charAt(0),V=C.charAt(C.length-1);if(C.length>1&&M===V&&(M==='"'||M==="'"))return['"'+U1(C.substr(1,C.length-2))+'"'];var oe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(C);if(oe)return ec(C.substr(0,oe.index)).concat(ec(oe[1])).concat(ec(C.substr(oe.index+oe[0].length)));var _e=C.split(".");if(_e.length===1)return['"'+U1(C)+'"'];for(var ae=[],ue=0;ue<_e.length;++ue)ae=ae.concat(ec(_e[ue]));return ae}function V1(C){return"["+ec(C).join("][")+"]"}function bg(C,M){return new ms(C,V1(M+""))}function cf(C){return typeof C=="function"&&!C._reglType||C instanceof ms}function uu(C,M){if(typeof C=="function")return new ms(vg,C);if(typeof C=="number"||typeof C=="boolean")return new ms(yg,C);if(Array.isArray(C))return new ms(xg,C.map((V,oe)=>uu(V,M+"["+oe+"]")));if(C instanceof ms)return C;D(!1,"invalid option type in uniform "+M)}var Wn={DynamicVariable:ms,define:bg,isDynamic:cf,unbox:uu,accessor:V1},tc={next:typeof requestAnimationFrame=="function"?function(C){return requestAnimationFrame(C)}:function(C){return setTimeout(C,16)},cancel:typeof cancelAnimationFrame=="function"?function(C){return cancelAnimationFrame(C)}:clearTimeout},du=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function $1(){var C={"":0},M=[""];return{id:function(V){var oe=C[V];return oe||(oe=C[V]=M.length,M.push(V),oe)},str:function(V){return M[V]}}}function uf(C,M,V){var oe=document.createElement("canvas");e(oe.style,{border:0,margin:0,padding:0,top:0,left:0}),C.appendChild(oe),C===document.body&&(oe.style.position="absolute",e(C.style,{margin:0,padding:0}));function _e(){var Ae=window.innerWidth,Ce=window.innerHeight;if(C!==document.body){var Me=C.getBoundingClientRect();Ae=Me.right-Me.left,Ce=Me.bottom-Me.top}oe.width=V*Ae,oe.height=V*Ce,e(oe.style,{width:Ae+"px",height:Ce+"px"})}var ae;C!==document.body&&typeof ResizeObserver=="function"?(ae=new ResizeObserver(function(){setTimeout(_e)}),ae.observe(C)):window.addEventListener("resize",_e,!1);function ue(){ae?ae.disconnect():window.removeEventListener("resize",_e),C.removeChild(oe)}return _e(),{canvas:oe,onDestroy:ue}}function z1(C,M){function V(oe){try{return C.getContext(oe,M)}catch(_e){return null}}return V("webgl")||V("experimental-webgl")||V("webgl-experimental")}function df(C){return typeof C.nodeName=="string"&&typeof C.appendChild=="function"&&typeof C.getBoundingClientRect=="function"}function j1(C){return typeof C.drawArrays=="function"||typeof C.drawElements=="function"}function fu(C){return typeof C=="string"?C.split():(D(Array.isArray(C),"invalid extension array"),C)}function ff(C){return typeof C=="string"?(D(typeof document!="undefined","not supported outside of DOM"),document.querySelector(C)):C}function pf(C){var M=C||{},V,oe,_e,ae,ue={},Ae=[],Ce=[],Me=typeof window=="undefined"?1:window.devicePixelRatio,we=!1,Be=function(De){De&&D.raise(De)},Ve=function(){};if(typeof M=="string"?(D(typeof document!="undefined","selector queries only supported in DOM enviroments"),V=document.querySelector(M),D(V,"invalid query string for element")):typeof M=="object"?df(M)?V=M:j1(M)?(ae=M,_e=ae.canvas):(D.constructor(M),"gl"in M?ae=M.gl:"canvas"in M?_e=ff(M.canvas):"container"in M&&(oe=ff(M.container)),"attributes"in M&&(ue=M.attributes,D.type(ue,"object","invalid context attributes")),"extensions"in M&&(Ae=fu(M.extensions)),"optionalExtensions"in M&&(Ce=fu(M.optionalExtensions)),"onDone"in M&&(D.type(M.onDone,"function","invalid or missing onDone callback"),Be=M.onDone),"profile"in M&&(we=!!M.profile),"pixelRatio"in M&&(Me=+M.pixelRatio,D(Me>0,"invalid pixel ratio"))):D.raise("invalid arguments to regl"),V&&(V.nodeName.toLowerCase()==="canvas"?_e=V:oe=V),!ae){if(!_e){D(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Te=uf(oe||document.body,Be,Me);if(!Te)return null;_e=Te.canvas,Ve=Te.onDestroy}ue.premultipliedAlpha===void 0&&(ue.premultipliedAlpha=!0),ae=z1(_e,ue)}return ae?{gl:ae,canvas:_e,container:oe,extensions:Ae,optionalExtensions:Ce,pixelRatio:Me,profile:we,onDone:Be,onDestroy:Ve}:(Ve(),Be("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function H1(C,M){var V={};function oe(ue){D.type(ue,"string","extension name must be string");var Ae=ue.toLowerCase(),Ce;try{Ce=V[Ae]=C.getExtension(Ae)}catch(Me){}return!!Ce}for(var _e=0;_e<M.extensions.length;++_e){var ae=M.extensions[_e];if(!oe(ae))return M.onDestroy(),M.onDone('"'+ae+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return M.optionalExtensions.forEach(oe),{extensions:V,restore:function(){Object.keys(V).forEach(function(ue){if(V[ue]&&!oe(ue))throw new Error("(regl): error restoring extension "+ue)})}}}function Ra(C,M){for(var V=Array(C),oe=0;oe<C;++oe)V[oe]=M(oe);return V}var $ue=5120,zue=5121,jue=5122,Hue=5123,Wue=5124,Zue=5125,Xue=5126;function que(C){for(var M=16;M<=1<<28;M*=16)if(C<=M)return M;return 0}function _F(C){var M,V;return M=(C>65535)<<4,C>>>=M,V=(C>255)<<3,C>>>=V,M|=V,V=(C>15)<<2,C>>>=V,M|=V,V=(C>3)<<1,C>>>=V,M|=V,M|C>>1}function EF(){var C=Ra(8,function(){return[]});function M(ae){var ue=que(ae),Ae=C[_F(ue)>>2];return Ae.length>0?Ae.pop():new ArrayBuffer(ue)}function V(ae){C[_F(ae.byteLength)>>2].push(ae)}function oe(ae,ue){var Ae=null;switch(ae){case $ue:Ae=new Int8Array(M(ue),0,ue);break;case zue:Ae=new Uint8Array(M(ue),0,ue);break;case jue:Ae=new Int16Array(M(2*ue),0,ue);break;case Hue:Ae=new Uint16Array(M(2*ue),0,ue);break;case Wue:Ae=new Int32Array(M(4*ue),0,ue);break;case Zue:Ae=new Uint32Array(M(4*ue),0,ue);break;case Xue:Ae=new Float32Array(M(4*ue),0,ue);break;default:return null}return Ae.length!==ue?Ae.subarray(0,ue):Ae}function _e(ae){V(ae.buffer)}return{alloc:M,free:V,allocType:oe,freeType:_e}}var nn=EF();nn.zero=EF();var Kue=3408,Yue=3410,Jue=3411,Que=3412,ede=3413,tde=3414,rde=3415,nde=33901,ide=33902,ade=3379,ode=3386,sde=34921,lde=36347,cde=36348,ude=35661,dde=35660,fde=34930,pde=36349,hde=34076,mde=34024,gde=7936,_de=7937,Ede=7938,vde=35724,yde=34047,xde=36063,bde=34852,Av=3553,vF=34067,Sde=34069,Nde=33984,Sg=6408,PS=5126,yF=5121,MS=36160,Ade=36053,Tde=36064,Cde=16384,wde=function(C,M){var V=1;M.ext_texture_filter_anisotropic&&(V=C.getParameter(yde));var oe=1,_e=1;M.webgl_draw_buffers&&(oe=C.getParameter(bde),_e=C.getParameter(xde));var ae=!!M.oes_texture_float;if(ae){var ue=C.createTexture();C.bindTexture(Av,ue),C.texImage2D(Av,0,Sg,1,1,0,Sg,PS,null);var Ae=C.createFramebuffer();if(C.bindFramebuffer(MS,Ae),C.framebufferTexture2D(MS,Tde,Av,ue,0),C.bindTexture(Av,null),C.checkFramebufferStatus(MS)!==Ade)ae=!1;else{C.viewport(0,0,1,1),C.clearColor(1,0,0,1),C.clear(Cde);var Ce=nn.allocType(PS,4);C.readPixels(0,0,1,1,Sg,PS,Ce),C.getError()?ae=!1:(C.deleteFramebuffer(Ae),C.deleteTexture(ue),ae=Ce[0]===1),nn.freeType(Ce)}}var Me=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),we=!0;if(!Me){var Be=C.createTexture(),Ve=nn.allocType(yF,36);C.activeTexture(Nde),C.bindTexture(vF,Be),C.texImage2D(Sde,0,Sg,3,3,0,Sg,yF,Ve),nn.freeType(Ve),C.bindTexture(vF,null),C.deleteTexture(Be),we=!C.getError()}return{colorBits:[C.getParameter(Yue),C.getParameter(Jue),C.getParameter(Que),C.getParameter(ede)],depthBits:C.getParameter(tde),stencilBits:C.getParameter(rde),subpixelBits:C.getParameter(Kue),extensions:Object.keys(M).filter(function(Te){return!!M[Te]}),maxAnisotropic:V,maxDrawbuffers:oe,maxColorAttachments:_e,pointSizeDims:C.getParameter(nde),lineWidthDims:C.getParameter(ide),maxViewportDims:C.getParameter(ode),maxCombinedTextureUnits:C.getParameter(ude),maxCubeMapSize:C.getParameter(hde),maxRenderbufferSize:C.getParameter(mde),maxTextureUnits:C.getParameter(fde),maxTextureSize:C.getParameter(ade),maxAttributes:C.getParameter(sde),maxVertexUniforms:C.getParameter(lde),maxVertexTextureUnits:C.getParameter(dde),maxVaryingVectors:C.getParameter(cde),maxFragmentUniforms:C.getParameter(pde),glsl:C.getParameter(vde),renderer:C.getParameter(_de),vendor:C.getParameter(gde),version:C.getParameter(Ede),readFloat:ae,npotTextureCube:we}};function gs(C){return!!C&&typeof C=="object"&&Array.isArray(C.shape)&&Array.isArray(C.stride)&&typeof C.offset=="number"&&C.shape.length===C.stride.length&&(Array.isArray(C.data)||t(C.data))}var eo=function(C){return Object.keys(C).map(function(M){return C[M]})},Tv={shape:Mde,flatten:Pde};function Ide(C,M,V){for(var oe=0;oe<M;++oe)V[oe]=C[oe]}function Rde(C,M,V,oe){for(var _e=0,ae=0;ae<M;++ae)for(var ue=C[ae],Ae=0;Ae<V;++Ae)oe[_e++]=ue[Ae]}function xF(C,M,V,oe,_e,ae){for(var ue=ae,Ae=0;Ae<M;++Ae)for(var Ce=C[Ae],Me=0;Me<V;++Me)for(var we=Ce[Me],Be=0;Be<oe;++Be)_e[ue++]=we[Be]}function bF(C,M,V,oe,_e){for(var ae=1,ue=V+1;ue<M.length;++ue)ae*=M[ue];var Ae=M[V];if(M.length-V===4){var Ce=M[V+1],Me=M[V+2],we=M[V+3];for(ue=0;ue<Ae;++ue)xF(C[ue],Ce,Me,we,oe,_e),_e+=ae}else for(ue=0;ue<Ae;++ue)bF(C[ue],M,V+1,oe,_e),_e+=ae}function Pde(C,M,V,oe){var _e=1;if(M.length)for(var ae=0;ae<M.length;++ae)_e*=M[ae];else _e=0;var ue=oe||nn.allocType(V,_e);switch(M.length){case 0:break;case 1:Ide(C,M[0],ue);break;case 2:Rde(C,M[0],M[1],ue);break;case 3:xF(C,M[0],M[1],M[2],ue,0);break;default:bF(C,M,0,ue,0)}return ue}function Mde(C){for(var M=[],V=C;V.length;V=V[0])M.push(V.length);return M}var LS={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Lde=5120,Ode=5122,Bde=5124,Dde=5121,Fde=5123,kde=5125,Gde=5126,Ude=5126,hf={int8:Lde,int16:Ode,int32:Bde,uint8:Dde,uint16:Fde,uint32:kde,float:Gde,float32:Ude},Vde=35048,$de=35040,Cv={dynamic:Vde,stream:$de,static:35044},OS=Tv.flatten,SF=Tv.shape,NF=35044,zde=35040,BS=5121,DS=5126,pu=[];pu[5120]=1,pu[5122]=2,pu[5124]=4,pu[5121]=1,pu[5123]=2,pu[5125]=4,pu[5126]=4;function wv(C){return LS[Object.prototype.toString.call(C)]|0}function AF(C,M){for(var V=0;V<M.length;++V)C[V]=M[V]}function TF(C,M,V,oe,_e,ae,ue){for(var Ae=0,Ce=0;Ce<V;++Ce)for(var Me=0;Me<oe;++Me)C[Ae++]=M[_e*Ce+ae*Me+ue]}function jde(C,M,V,oe){var _e=0,ae={};function ue(Q){this.id=_e++,this.buffer=C.createBuffer(),this.type=Q,this.usage=NF,this.byteLength=0,this.dimension=1,this.dtype=BS,this.persistentData=null,V.profile&&(this.stats={size:0})}ue.prototype.bind=function(){C.bindBuffer(this.type,this.buffer)},ue.prototype.destroy=function(){Ve(this)};var Ae=[];function Ce(Q,de){var Re=Ae.pop();return Re||(Re=new ue(Q)),Re.bind(),Be(Re,de,zde,0,1,!1),Re}function Me(Q){Ae.push(Q)}function we(Q,de,Re){Q.byteLength=de.byteLength,C.bufferData(Q.type,de,Re)}function Be(Q,de,Re,He,ye,Xe){var Ne;if(Q.usage=Re,Array.isArray(de)){if(Q.dtype=He||DS,de.length>0){var ke;if(Array.isArray(de[0])){Ne=SF(de);for(var xe=1,Ge=1;Ge<Ne.length;++Ge)xe*=Ne[Ge];Q.dimension=xe,ke=OS(de,Ne,Q.dtype),we(Q,ke,Re),Xe?Q.persistentData=ke:nn.freeType(ke)}else if(typeof de[0]=="number"){Q.dimension=ye;var lt=nn.allocType(Q.dtype,de.length);AF(lt,de),we(Q,lt,Re),Xe?Q.persistentData=lt:nn.freeType(lt)}else t(de[0])?(Q.dimension=de[0].length,Q.dtype=He||wv(de[0])||DS,ke=OS(de,[de.length,de[0].length],Q.dtype),we(Q,ke,Re),Xe?Q.persistentData=ke:nn.freeType(ke)):D.raise("invalid buffer data")}}else if(t(de))Q.dtype=He||wv(de),Q.dimension=ye,we(Q,de,Re),Xe&&(Q.persistentData=new Uint8Array(new Uint8Array(de.buffer)));else if(gs(de)){Ne=de.shape;var yt=de.stride,$e=de.offset,Le=0,ve=0,gt=0,At=0;Ne.length===1?(Le=Ne[0],ve=1,gt=yt[0],At=0):Ne.length===2?(Le=Ne[0],ve=Ne[1],gt=yt[0],At=yt[1]):D.raise("invalid shape"),Q.dtype=He||wv(de.data)||DS,Q.dimension=ve;var Ye=nn.allocType(Q.dtype,Le*ve);TF(Ye,de.data,Le,ve,gt,At,$e),we(Q,Ye,Re),Xe?Q.persistentData=Ye:nn.freeType(Ye)}else de instanceof ArrayBuffer?(Q.dtype=BS,Q.dimension=ye,we(Q,de,Re),Xe&&(Q.persistentData=new Uint8Array(new Uint8Array(de)))):D.raise("invalid buffer data")}function Ve(Q){M.bufferCount--,oe(Q);var de=Q.buffer;D(de,"buffer must not be deleted already"),C.deleteBuffer(de),Q.buffer=null,delete ae[Q.id]}function Te(Q,de,Re,He){M.bufferCount++;var ye=new ue(de);ae[ye.id]=ye;function Xe(xe){var Ge=NF,lt=null,yt=0,$e=0,Le=1;return Array.isArray(xe)||t(xe)||gs(xe)||xe instanceof ArrayBuffer?lt=xe:typeof xe=="number"?yt=xe|0:xe&&(D.type(xe,"object","buffer arguments must be an object, a number or an array"),"data"in xe&&(D(lt===null||Array.isArray(lt)||t(lt)||gs(lt),"invalid data for buffer"),lt=xe.data),"usage"in xe&&(D.parameter(xe.usage,Cv,"invalid buffer usage"),Ge=Cv[xe.usage]),"type"in xe&&(D.parameter(xe.type,hf,"invalid buffer type"),$e=hf[xe.type]),"dimension"in xe&&(D.type(xe.dimension,"number","invalid dimension"),Le=xe.dimension|0),"length"in xe&&(D.nni(yt,"buffer length must be a nonnegative integer"),yt=xe.length|0)),ye.bind(),lt?Be(ye,lt,Ge,$e,Le,He):(yt&&C.bufferData(ye.type,yt,Ge),ye.dtype=$e||BS,ye.usage=Ge,ye.dimension=Le,ye.byteLength=yt),V.profile&&(ye.stats.size=ye.byteLength*pu[ye.dtype]),Xe}function Ne(xe,Ge){D(Ge+xe.byteLength<=ye.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+xe.byteLength+" starting from offset "+Ge+" to a buffer of size "+ye.byteLength),C.bufferSubData(ye.type,Ge,xe)}function ke(xe,Ge){var lt=(Ge||0)|0,yt;if(ye.bind(),t(xe)||xe instanceof ArrayBuffer)Ne(xe,lt);else if(Array.isArray(xe)){if(xe.length>0)if(typeof xe[0]=="number"){var $e=nn.allocType(ye.dtype,xe.length);AF($e,xe),Ne($e,lt),nn.freeType($e)}else if(Array.isArray(xe[0])||t(xe[0])){yt=SF(xe);var Le=OS(xe,yt,ye.dtype);Ne(Le,lt),nn.freeType(Le)}else D.raise("invalid buffer data")}else if(gs(xe)){yt=xe.shape;var ve=xe.stride,gt=0,At=0,Ye=0,Ft=0;yt.length===1?(gt=yt[0],At=1,Ye=ve[0],Ft=0):yt.length===2?(gt=yt[0],At=yt[1],Ye=ve[0],Ft=ve[1]):D.raise("invalid shape");var xt=Array.isArray(xe.data)?ye.dtype:wv(xe.data),Mt=nn.allocType(xt,gt*At);TF(Mt,xe.data,gt,At,Ye,Ft,xe.offset),Ne(Mt,lt),nn.freeType(Mt)}else D.raise("invalid data for buffer subdata");return Xe}return Re||Xe(Q),Xe._reglType="buffer",Xe._buffer=ye,Xe.subdata=ke,V.profile&&(Xe.stats=ye.stats),Xe.destroy=function(){Ve(ye)},Xe}function De(){eo(ae).forEach(function(Q){Q.buffer=C.createBuffer(),C.bindBuffer(Q.type,Q.buffer),C.bufferData(Q.type,Q.persistentData||Q.byteLength,Q.usage)})}return V.profile&&(M.getTotalBufferSize=function(){var Q=0;return Object.keys(ae).forEach(function(de){Q+=ae[de].stats.size}),Q}),{create:Te,createStream:Ce,destroyStream:Me,clear:function(){eo(ae).forEach(Ve),Ae.forEach(Ve)},getBuffer:function(Q){return Q&&Q._buffer instanceof ue?Q._buffer:null},restore:De,_initBuffer:Be}}var Hde=0,Wde=0,Zde=1,Xde=1,qde=4,Kde=4,W1={points:Hde,point:Wde,lines:Zde,line:Xde,triangles:qde,triangle:Kde,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Yde=0,Jde=1,Ng=4,Qde=5120,Z1=5121,CF=5122,X1=5123,wF=5124,mf=5125,FS=34963,efe=35040,tfe=35044;function rfe(C,M,V,oe){var _e={},ae=0,ue={uint8:Z1,uint16:X1};M.oes_element_index_uint&&(ue.uint32=mf);function Ae(De){this.id=ae++,_e[this.id]=this,this.buffer=De,this.primType=Ng,this.vertCount=0,this.type=0}Ae.prototype.bind=function(){this.buffer.bind()};var Ce=[];function Me(De){var Q=Ce.pop();return Q||(Q=new Ae(V.create(null,FS,!0,!1)._buffer)),Be(Q,De,efe,-1,-1,0,0),Q}function we(De){Ce.push(De)}function Be(De,Q,de,Re,He,ye,Xe){De.buffer.bind();var Ne;if(Q){var ke=Xe;!Xe&&(!t(Q)||gs(Q)&&!t(Q.data))&&(ke=M.oes_element_index_uint?mf:X1),V._initBuffer(De.buffer,Q,de,ke,3)}else C.bufferData(FS,ye,de),De.buffer.dtype=Ne||Z1,De.buffer.usage=de,De.buffer.dimension=3,De.buffer.byteLength=ye;if(Ne=Xe,!Xe){switch(De.buffer.dtype){case Z1:case Qde:Ne=Z1;break;case X1:case CF:Ne=X1;break;case mf:case wF:Ne=mf;break;default:D.raise("unsupported type for element array")}De.buffer.dtype=Ne}De.type=Ne,D(Ne!==mf||!!M.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var xe=He;xe<0&&(xe=De.buffer.byteLength,Ne===X1?xe>>=1:Ne===mf&&(xe>>=2)),De.vertCount=xe;var Ge=Re;if(Re<0){Ge=Ng;var lt=De.buffer.dimension;lt===1&&(Ge=Yde),lt===2&&(Ge=Jde),lt===3&&(Ge=Ng)}De.primType=Ge}function Ve(De){oe.elementsCount--,D(De.buffer!==null,"must not double destroy elements"),delete _e[De.id],De.buffer.destroy(),De.buffer=null}function Te(De,Q){var de=V.create(null,FS,!0),Re=new Ae(de._buffer);oe.elementsCount++;function He(ye){if(!ye)de(),Re.primType=Ng,Re.vertCount=0,Re.type=Z1;else if(typeof ye=="number")de(ye),Re.primType=Ng,Re.vertCount=ye|0,Re.type=Z1;else{var Xe=null,Ne=tfe,ke=-1,xe=-1,Ge=0,lt=0;Array.isArray(ye)||t(ye)||gs(ye)?Xe=ye:(D.type(ye,"object","invalid arguments for elements"),"data"in ye&&(Xe=ye.data,D(Array.isArray(Xe)||t(Xe)||gs(Xe),"invalid data for element buffer")),"usage"in ye&&(D.parameter(ye.usage,Cv,"invalid element buffer usage"),Ne=Cv[ye.usage]),"primitive"in ye&&(D.parameter(ye.primitive,W1,"invalid element buffer primitive"),ke=W1[ye.primitive]),"count"in ye&&(D(typeof ye.count=="number"&&ye.count>=0,"invalid vertex count for elements"),xe=ye.count|0),"type"in ye&&(D.parameter(ye.type,ue,"invalid buffer type"),lt=ue[ye.type]),"length"in ye?Ge=ye.length|0:(Ge=xe,lt===X1||lt===CF?Ge*=2:(lt===mf||lt===wF)&&(Ge*=4))),Be(Re,Xe,Ne,ke,xe,Ge,lt)}return He}return He(De),He._reglType="elements",He._elements=Re,He.subdata=function(ye,Xe){return de.subdata(ye,Xe),He},He.destroy=function(){Ve(Re)},He}return{create:Te,createStream:Me,destroyStream:we,getElements:function(De){return typeof De=="function"&&De._elements instanceof Ae?De._elements:null},clear:function(){eo(_e).forEach(Ve)}}}var IF=new Float32Array(1),nfe=new Uint32Array(IF.buffer),ife=5123;function RF(C){for(var M=nn.allocType(ife,C.length),V=0;V<C.length;++V)if(isNaN(C[V]))M[V]=65535;else if(C[V]===1/0)M[V]=31744;else if(C[V]===-1/0)M[V]=64512;else{IF[0]=C[V];var oe=nfe[0],_e=oe>>>31<<15,ae=(oe<<1>>>24)-127,ue=oe>>13&1024-1;if(ae<-24)M[V]=_e;else if(ae<-14){var Ae=-14-ae;M[V]=_e+(ue+1024>>Ae)}else ae>15?M[V]=_e+31744:M[V]=_e+(ae+15<<10)+ue}return M}function qr(C){return Array.isArray(C)||t(C)}var PF=function(C){return!(C&C-1)&&!!C},afe=34467,rl=3553,kS=34067,Iv=34069,gf=6408,GS=6406,Rv=6407,Ag=6409,Pv=6410,MF=32854,US=32855,LF=36194,ofe=32819,sfe=32820,lfe=33635,cfe=34042,VS=6402,Mv=34041,$S=35904,zS=35906,q1=36193,jS=33776,HS=33777,WS=33778,ZS=33779,OF=35986,BF=35987,DF=34798,FF=35840,kF=35841,GF=35842,UF=35843,VF=36196,K1=5121,XS=5123,qS=5125,Tg=5126,ufe=10242,dfe=10243,ffe=10497,KS=33071,pfe=33648,hfe=10240,mfe=10241,YS=9728,gfe=9729,JS=9984,$F=9985,zF=9986,QS=9987,_fe=33170,Lv=4352,Efe=4353,vfe=4354,yfe=34046,xfe=3317,bfe=37440,Sfe=37441,Nfe=37443,jF=37444,Cg=33984,Afe=[JS,zF,$F,QS],Ov=[0,Ag,Pv,Rv,gf],Co={};Co[Ag]=Co[GS]=Co[VS]=1,Co[Mv]=Co[Pv]=2,Co[Rv]=Co[$S]=3,Co[gf]=Co[zS]=4;function Y1(C){return"[object "+C+"]"}var HF=Y1("HTMLCanvasElement"),WF=Y1("OffscreenCanvas"),ZF=Y1("CanvasRenderingContext2D"),XF=Y1("ImageBitmap"),qF=Y1("HTMLImageElement"),KF=Y1("HTMLVideoElement"),Tfe=Object.keys(LS).concat([HF,WF,ZF,XF,qF,KF]),J1=[];J1[K1]=1,J1[Tg]=4,J1[q1]=2,J1[XS]=2,J1[qS]=4;var ii=[];ii[MF]=2,ii[US]=2,ii[LF]=2,ii[Mv]=4,ii[jS]=.5,ii[HS]=.5,ii[WS]=1,ii[ZS]=1,ii[OF]=.5,ii[BF]=1,ii[DF]=1,ii[FF]=.5,ii[kF]=.25,ii[GF]=.5,ii[UF]=.25,ii[VF]=.5;function YF(C){return Array.isArray(C)&&(C.length===0||typeof C[0]=="number")}function JF(C){if(!Array.isArray(C))return!1;var M=C.length;return!(M===0||!qr(C[0]))}function _f(C){return Object.prototype.toString.call(C)}function QF(C){return _f(C)===HF}function ek(C){return _f(C)===WF}function Cfe(C){return _f(C)===ZF}function wfe(C){return _f(C)===XF}function Ife(C){return _f(C)===qF}function Rfe(C){return _f(C)===KF}function eN(C){if(!C)return!1;var M=_f(C);return Tfe.indexOf(M)>=0?!0:YF(C)||JF(C)||gs(C)}function tk(C){return LS[Object.prototype.toString.call(C)]|0}function Pfe(C,M){var V=M.length;switch(C.type){case K1:case XS:case qS:case Tg:var oe=nn.allocType(C.type,V);oe.set(M),C.data=oe;break;case q1:C.data=RF(M);break;default:D.raise("unsupported texture type, must specify a typed array")}}function rk(C,M){return nn.allocType(C.type===q1?Tg:C.type,M)}function nk(C,M){C.type===q1?(C.data=RF(M),nn.freeType(M)):C.data=M}function Mfe(C,M,V,oe,_e,ae){for(var ue=C.width,Ae=C.height,Ce=C.channels,Me=ue*Ae*Ce,we=rk(C,Me),Be=0,Ve=0;Ve<Ae;++Ve)for(var Te=0;Te<ue;++Te)for(var De=0;De<Ce;++De)we[Be++]=M[V*Te+oe*Ve+_e*De+ae];nk(C,we)}function Bv(C,M,V,oe,_e,ae){var ue;if(typeof ii[C]!="undefined"?ue=ii[C]:ue=Co[C]*J1[M],ae&&(ue*=6),_e){for(var Ae=0,Ce=V;Ce>=1;)Ae+=ue*Ce*Ce,Ce/=2;return Ae}else return ue*V*oe}function Lfe(C,M,V,oe,_e,ae,ue){var Ae={"don't care":Lv,"dont care":Lv,nice:vfe,fast:Efe},Ce={repeat:ffe,clamp:KS,mirror:pfe},Me={nearest:YS,linear:gfe},we=e({mipmap:QS,"nearest mipmap nearest":JS,"linear mipmap nearest":$F,"nearest mipmap linear":zF,"linear mipmap linear":QS},Me),Be={none:0,browser:jF},Ve={uint8:K1,rgba4:ofe,rgb565:lfe,"rgb5 a1":sfe},Te={alpha:GS,luminance:Ag,"luminance alpha":Pv,rgb:Rv,rgba:gf,rgba4:MF,"rgb5 a1":US,rgb565:LF},De={};M.ext_srgb&&(Te.srgb=$S,Te.srgba=zS),M.oes_texture_float&&(Ve.float32=Ve.float=Tg),M.oes_texture_half_float&&(Ve.float16=Ve["half float"]=q1),M.webgl_depth_texture&&(e(Te,{depth:VS,"depth stencil":Mv}),e(Ve,{uint16:XS,uint32:qS,"depth stencil":cfe})),M.webgl_compressed_texture_s3tc&&e(De,{"rgb s3tc dxt1":jS,"rgba s3tc dxt1":HS,"rgba s3tc dxt3":WS,"rgba s3tc dxt5":ZS}),M.webgl_compressed_texture_atc&&e(De,{"rgb atc":OF,"rgba atc explicit alpha":BF,"rgba atc interpolated alpha":DF}),M.webgl_compressed_texture_pvrtc&&e(De,{"rgb pvrtc 4bppv1":FF,"rgb pvrtc 2bppv1":kF,"rgba pvrtc 4bppv1":GF,"rgba pvrtc 2bppv1":UF}),M.webgl_compressed_texture_etc1&&(De["rgb etc1"]=VF);var Q=Array.prototype.slice.call(C.getParameter(afe));Object.keys(De).forEach(function(G){var se=De[G];Q.indexOf(se)>=0&&(Te[G]=se)});var de=Object.keys(Te);V.textureFormats=de;var Re=[];Object.keys(Te).forEach(function(G){var se=Te[G];Re[se]=G});var He=[];Object.keys(Ve).forEach(function(G){var se=Ve[G];He[se]=G});var ye=[];Object.keys(Me).forEach(function(G){var se=Me[G];ye[se]=G});var Xe=[];Object.keys(we).forEach(function(G){var se=we[G];Xe[se]=G});var Ne=[];Object.keys(Ce).forEach(function(G){var se=Ce[G];Ne[se]=G});var ke=de.reduce(function(G,se){var re=Te[se];return re===Ag||re===GS||re===Ag||re===Pv||re===VS||re===Mv||M.ext_srgb&&(re===$S||re===zS)?G[re]=re:re===US||se.indexOf("rgba")>=0?G[re]=gf:G[re]=Rv,G},{});function xe(){this.internalformat=gf,this.format=gf,this.type=K1,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=jF,this.width=0,this.height=0,this.channels=0}function Ge(G,se){G.internalformat=se.internalformat,G.format=se.format,G.type=se.type,G.compressed=se.compressed,G.premultiplyAlpha=se.premultiplyAlpha,G.flipY=se.flipY,G.unpackAlignment=se.unpackAlignment,G.colorSpace=se.colorSpace,G.width=se.width,G.height=se.height,G.channels=se.channels}function lt(G,se){if(!(typeof se!="object"||!se)){if("premultiplyAlpha"in se&&(D.type(se.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),G.premultiplyAlpha=se.premultiplyAlpha),"flipY"in se&&(D.type(se.flipY,"boolean","invalid texture flip"),G.flipY=se.flipY),"alignment"in se&&(D.oneOf(se.alignment,[1,2,4,8],"invalid texture unpack alignment"),G.unpackAlignment=se.alignment),"colorSpace"in se&&(D.parameter(se.colorSpace,Be,"invalid colorSpace"),G.colorSpace=Be[se.colorSpace]),"type"in se){var re=se.type;D(M.oes_texture_float||!(re==="float"||re==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),D(M.oes_texture_half_float||!(re==="half float"||re==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),D(M.webgl_depth_texture||!(re==="uint16"||re==="uint32"||re==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),D.parameter(re,Ve,"invalid texture type"),G.type=Ve[re]}var Ke=G.width,kt=G.height,F=G.channels,P=!1;"shape"in se?(D(Array.isArray(se.shape)&&se.shape.length>=2,"shape must be an array"),Ke=se.shape[0],kt=se.shape[1],se.shape.length===3&&(F=se.shape[2],D(F>0&&F<=4,"invalid number of channels"),P=!0),D(Ke>=0&&Ke<=V.maxTextureSize,"invalid width"),D(kt>=0&&kt<=V.maxTextureSize,"invalid height")):("radius"in se&&(Ke=kt=se.radius,D(Ke>=0&&Ke<=V.maxTextureSize,"invalid radius")),"width"in se&&(Ke=se.width,D(Ke>=0&&Ke<=V.maxTextureSize,"invalid width")),"height"in se&&(kt=se.height,D(kt>=0&&kt<=V.maxTextureSize,"invalid height")),"channels"in se&&(F=se.channels,D(F>0&&F<=4,"invalid number of channels"),P=!0)),G.width=Ke|0,G.height=kt|0,G.channels=F|0;var z=!1;if("format"in se){var J=se.format;D(M.webgl_depth_texture||!(J==="depth"||J==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),D.parameter(J,Te,"invalid texture format");var ee=G.internalformat=Te[J];G.format=ke[ee],J in Ve&&("type"in se||(G.type=Ve[J])),J in De&&(G.compressed=!0),z=!0}!P&&z?G.channels=Co[G.format]:P&&!z?G.channels!==Ov[G.format]&&(G.format=G.internalformat=Ov[G.channels]):z&&P&&D(G.channels===Co[G.format],"number of channels inconsistent with specified format")}}function yt(G){C.pixelStorei(bfe,G.flipY),C.pixelStorei(Sfe,G.premultiplyAlpha),C.pixelStorei(Nfe,G.colorSpace),C.pixelStorei(xfe,G.unpackAlignment)}function $e(){xe.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Le(G,se){var re=null;if(eN(se)?re=se:se&&(D.type(se,"object","invalid pixel data type"),lt(G,se),"x"in se&&(G.xOffset=se.x|0),"y"in se&&(G.yOffset=se.y|0),eN(se.data)&&(re=se.data)),D(!G.compressed||re instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),se.copy){D(!re,"can not specify copy and data field for the same texture");var Ke=_e.viewportWidth,kt=_e.viewportHeight;G.width=G.width||Ke-G.xOffset,G.height=G.height||kt-G.yOffset,G.needsCopy=!0,D(G.xOffset>=0&&G.xOffset<Ke&&G.yOffset>=0&&G.yOffset<kt&&G.width>0&&G.width<=Ke&&G.height>0&&G.height<=kt,"copy texture read out of bounds")}else if(!re)G.width=G.width||1,G.height=G.height||1,G.channels=G.channels||4;else if(t(re))G.channels=G.channels||4,G.data=re,!("type"in se)&&G.type===K1&&(G.type=tk(re));else if(YF(re))G.channels=G.channels||4,Pfe(G,re),G.alignment=1,G.needsFree=!0;else if(gs(re)){var F=re.data;!Array.isArray(F)&&G.type===K1&&(G.type=tk(F));var P=re.shape,z=re.stride,J,ee,Z,j,K,k;P.length===3?(Z=P[2],k=z[2]):(D(P.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Z=1,k=1),J=P[0],ee=P[1],j=z[0],K=z[1],G.alignment=1,G.width=J,G.height=ee,G.channels=Z,G.format=G.internalformat=Ov[Z],G.needsFree=!0,Mfe(G,F,j,K,k,re.offset)}else if(QF(re)||ek(re)||Cfe(re))QF(re)||ek(re)?G.element=re:G.element=re.canvas,G.width=G.element.width,G.height=G.element.height,G.channels=4;else if(wfe(re))G.element=re,G.width=re.width,G.height=re.height,G.channels=4;else if(Ife(re))G.element=re,G.width=re.naturalWidth,G.height=re.naturalHeight,G.channels=4;else if(Rfe(re))G.element=re,G.width=re.videoWidth,G.height=re.videoHeight,G.channels=4;else if(JF(re)){var $=G.width||re[0].length,B=G.height||re.length,Y=G.channels;qr(re[0][0])?Y=Y||re[0][0].length:Y=Y||1;for(var te=Tv.shape(re),me=1,Ee=0;Ee<te.length;++Ee)me*=te[Ee];var fe=rk(G,me);Tv.flatten(re,te,"",fe),nk(G,fe),G.alignment=1,G.width=$,G.height=B,G.channels=Y,G.format=G.internalformat=Ov[Y],G.needsFree=!0}G.type===Tg?D(V.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):G.type===q1&&D(V.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function ve(G,se,re){var Ke=G.element,kt=G.data,F=G.internalformat,P=G.format,z=G.type,J=G.width,ee=G.height;yt(G),Ke?C.texImage2D(se,re,P,P,z,Ke):G.compressed?C.compressedTexImage2D(se,re,F,J,ee,0,kt):G.needsCopy?(oe(),C.copyTexImage2D(se,re,P,G.xOffset,G.yOffset,J,ee,0)):C.texImage2D(se,re,P,J,ee,0,P,z,kt||null)}function gt(G,se,re,Ke,kt){var F=G.element,P=G.data,z=G.internalformat,J=G.format,ee=G.type,Z=G.width,j=G.height;yt(G),F?C.texSubImage2D(se,kt,re,Ke,J,ee,F):G.compressed?C.compressedTexSubImage2D(se,kt,re,Ke,z,Z,j,P):G.needsCopy?(oe(),C.copyTexSubImage2D(se,kt,re,Ke,G.xOffset,G.yOffset,Z,j)):C.texSubImage2D(se,kt,re,Ke,Z,j,J,ee,P)}var At=[];function Ye(){return At.pop()||new $e}function Ft(G){G.needsFree&&nn.freeType(G.data),$e.call(G),At.push(G)}function xt(){xe.call(this),this.genMipmaps=!1,this.mipmapHint=Lv,this.mipmask=0,this.images=Array(16)}function Mt(G,se,re){var Ke=G.images[0]=Ye();G.mipmask=1,Ke.width=G.width=se,Ke.height=G.height=re,Ke.channels=G.channels=4}function Zt(G,se){var re=null;if(eN(se))re=G.images[0]=Ye(),Ge(re,G),Le(re,se),G.mipmask=1;else if(lt(G,se),Array.isArray(se.mipmap))for(var Ke=se.mipmap,kt=0;kt<Ke.length;++kt)re=G.images[kt]=Ye(),Ge(re,G),re.width>>=kt,re.height>>=kt,Le(re,Ke[kt]),G.mipmask|=1<<kt;else re=G.images[0]=Ye(),Ge(re,G),Le(re,se),G.mipmask=1;Ge(G,G.images[0]),G.compressed&&(G.internalformat===jS||G.internalformat===HS||G.internalformat===WS||G.internalformat===ZS)&&D(G.width%4===0&&G.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function on(G,se){for(var re=G.images,Ke=0;Ke<re.length;++Ke){if(!re[Ke])return;ve(re[Ke],se,Ke)}}var Ln=[];function Ut(){var G=Ln.pop()||new xt;xe.call(G),G.mipmask=0;for(var se=0;se<16;++se)G.images[se]=null;return G}function _n(G){for(var se=G.images,re=0;re<se.length;++re)se[re]&&Ft(se[re]),se[re]=null;Ln.push(G)}function Er(){this.minFilter=YS,this.magFilter=YS,this.wrapS=KS,this.wrapT=KS,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Lv}function sn(G,se){if("min"in se){var re=se.min;D.parameter(re,we),G.minFilter=we[re],Afe.indexOf(G.minFilter)>=0&&!("faces"in se)&&(G.genMipmaps=!0)}if("mag"in se){var Ke=se.mag;D.parameter(Ke,Me),G.magFilter=Me[Ke]}var kt=G.wrapS,F=G.wrapT;if("wrap"in se){var P=se.wrap;typeof P=="string"?(D.parameter(P,Ce),kt=F=Ce[P]):Array.isArray(P)&&(D.parameter(P[0],Ce),D.parameter(P[1],Ce),kt=Ce[P[0]],F=Ce[P[1]])}else{if("wrapS"in se){var z=se.wrapS;D.parameter(z,Ce),kt=Ce[z]}if("wrapT"in se){var J=se.wrapT;D.parameter(J,Ce),F=Ce[J]}}if(G.wrapS=kt,G.wrapT=F,"anisotropic"in se){var ee=se.anisotropic;D(typeof ee=="number"&&ee>=1&&ee<=V.maxAnisotropic,"aniso samples must be between 1 and "),G.anisotropic=se.anisotropic}if("mipmap"in se){var Z=!1;switch(typeof se.mipmap){case"string":D.parameter(se.mipmap,Ae,"invalid mipmap hint"),G.mipmapHint=Ae[se.mipmap],G.genMipmaps=!0,Z=!0;break;case"boolean":Z=G.genMipmaps=se.mipmap;break;case"object":D(Array.isArray(se.mipmap),"invalid mipmap type"),G.genMipmaps=!1,Z=!0;break;default:D.raise("invalid mipmap type")}Z&&!("min"in se)&&(G.minFilter=JS)}}function En(G,se){C.texParameteri(se,mfe,G.minFilter),C.texParameteri(se,hfe,G.magFilter),C.texParameteri(se,ufe,G.wrapS),C.texParameteri(se,dfe,G.wrapT),M.ext_texture_filter_anisotropic&&C.texParameteri(se,yfe,G.anisotropic),G.genMipmaps&&(C.hint(_fe,G.mipmapHint),C.generateMipmap(se))}var vn=0,Zn={},ai=V.maxTextureUnits,Kr=Array(ai).map(function(){return null});function Tt(G){xe.call(this),this.mipmask=0,this.internalformat=gf,this.id=vn++,this.refCount=1,this.target=G,this.texture=C.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Er,ue.profile&&(this.stats={size:0})}function oi(G){C.activeTexture(Cg),C.bindTexture(G.target,G.texture)}function Yt(){var G=Kr[0];G?C.bindTexture(G.target,G.texture):C.bindTexture(rl,null)}function ct(G){var se=G.texture;D(se,"must not double destroy texture");var re=G.unit,Ke=G.target;re>=0&&(C.activeTexture(Cg+re),C.bindTexture(Ke,null),Kr[re]=null),C.deleteTexture(se),G.texture=null,G.params=null,G.pixels=null,G.refCount=0,delete Zn[G.id],ae.textureCount--}e(Tt.prototype,{bind:function(){var G=this;G.bindCount+=1;var se=G.unit;if(se<0){for(var re=0;re<ai;++re){var Ke=Kr[re];if(Ke){if(Ke.bindCount>0)continue;Ke.unit=-1}Kr[re]=G,se=re;break}se>=ai&&D.raise("insufficient number of texture units"),ue.profile&&ae.maxTextureUnits<se+1&&(ae.maxTextureUnits=se+1),G.unit=se,C.activeTexture(Cg+se),C.bindTexture(G.target,G.texture)}return se},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ct(this)}});function Gt(G,se){var re=new Tt(rl);Zn[re.id]=re,ae.textureCount++;function Ke(P,z){var J=re.texInfo;Er.call(J);var ee=Ut();return typeof P=="number"?typeof z=="number"?Mt(ee,P|0,z|0):Mt(ee,P|0,P|0):P?(D.type(P,"object","invalid arguments to regl.texture"),sn(J,P),Zt(ee,P)):Mt(ee,1,1),J.genMipmaps&&(ee.mipmask=(ee.width<<1)-1),re.mipmask=ee.mipmask,Ge(re,ee),D.texture2D(J,ee,V),re.internalformat=ee.internalformat,Ke.width=ee.width,Ke.height=ee.height,oi(re),on(ee,rl),En(J,rl),Yt(),_n(ee),ue.profile&&(re.stats.size=Bv(re.internalformat,re.type,ee.width,ee.height,J.genMipmaps,!1)),Ke.format=Re[re.internalformat],Ke.type=He[re.type],Ke.mag=ye[J.magFilter],Ke.min=Xe[J.minFilter],Ke.wrapS=Ne[J.wrapS],Ke.wrapT=Ne[J.wrapT],Ke}function kt(P,z,J,ee){D(!!P,"must specify image data");var Z=z|0,j=J|0,K=ee|0,k=Ye();return Ge(k,re),k.width=0,k.height=0,Le(k,P),k.width=k.width||(re.width>>K)-Z,k.height=k.height||(re.height>>K)-j,D(re.type===k.type&&re.format===k.format&&re.internalformat===k.internalformat,"incompatible format for texture.subimage"),D(Z>=0&&j>=0&&Z+k.width<=re.width&&j+k.height<=re.height,"texture.subimage write out of bounds"),D(re.mipmask&1<<K,"missing mipmap data"),D(k.data||k.element||k.needsCopy,"missing image data"),oi(re),gt(k,rl,Z,j,K),Yt(),Ft(k),Ke}function F(P,z){var J=P|0,ee=z|0||J;if(J===re.width&&ee===re.height)return Ke;Ke.width=re.width=J,Ke.height=re.height=ee,oi(re);for(var Z=0;re.mipmask>>Z;++Z){var j=J>>Z,K=ee>>Z;if(!j||!K)break;C.texImage2D(rl,Z,re.format,j,K,0,re.format,re.type,null)}return Yt(),ue.profile&&(re.stats.size=Bv(re.internalformat,re.type,J,ee,!1,!1)),Ke}return Ke(G,se),Ke.subimage=kt,Ke.resize=F,Ke._reglType="texture2d",Ke._texture=re,ue.profile&&(Ke.stats=re.stats),Ke.destroy=function(){re.decRef()},Ke}function $t(G,se,re,Ke,kt,F){var P=new Tt(kS);Zn[P.id]=P,ae.cubeCount++;var z=new Array(6);function J(j,K,k,$,B,Y){var te,me=P.texInfo;for(Er.call(me),te=0;te<6;++te)z[te]=Ut();if(typeof j=="number"||!j){var Ee=j|0||1;for(te=0;te<6;++te)Mt(z[te],Ee,Ee)}else if(typeof j=="object")if(K)Zt(z[0],j),Zt(z[1],K),Zt(z[2],k),Zt(z[3],$),Zt(z[4],B),Zt(z[5],Y);else if(sn(me,j),lt(P,j),"faces"in j){var fe=j.faces;for(D(Array.isArray(fe)&&fe.length===6,"cube faces must be a length 6 array"),te=0;te<6;++te)D(typeof fe[te]=="object"&&!!fe[te],"invalid input for cube map face"),Ge(z[te],P),Zt(z[te],fe[te])}else for(te=0;te<6;++te)Zt(z[te],j);else D.raise("invalid arguments to cube map");for(Ge(P,z[0]),V.npotTextureCube||D(PF(P.width)&&PF(P.height),"your browser does not support non power or two texture dimensions"),me.genMipmaps?P.mipmask=(z[0].width<<1)-1:P.mipmask=z[0].mipmask,D.textureCube(P,me,z,V),P.internalformat=z[0].internalformat,J.width=z[0].width,J.height=z[0].height,oi(P),te=0;te<6;++te)on(z[te],Iv+te);for(En(me,kS),Yt(),ue.profile&&(P.stats.size=Bv(P.internalformat,P.type,J.width,J.height,me.genMipmaps,!0)),J.format=Re[P.internalformat],J.type=He[P.type],J.mag=ye[me.magFilter],J.min=Xe[me.minFilter],J.wrapS=Ne[me.wrapS],J.wrapT=Ne[me.wrapT],te=0;te<6;++te)_n(z[te]);return J}function ee(j,K,k,$,B){D(!!K,"must specify image data"),D(typeof j=="number"&&j===(j|0)&&j>=0&&j<6,"invalid face");var Y=k|0,te=$|0,me=B|0,Ee=Ye();return Ge(Ee,P),Ee.width=0,Ee.height=0,Le(Ee,K),Ee.width=Ee.width||(P.width>>me)-Y,Ee.height=Ee.height||(P.height>>me)-te,D(P.type===Ee.type&&P.format===Ee.format&&P.internalformat===Ee.internalformat,"incompatible format for texture.subimage"),D(Y>=0&&te>=0&&Y+Ee.width<=P.width&&te+Ee.height<=P.height,"texture.subimage write out of bounds"),D(P.mipmask&1<<me,"missing mipmap data"),D(Ee.data||Ee.element||Ee.needsCopy,"missing image data"),oi(P),gt(Ee,Iv+j,Y,te,me),Yt(),Ft(Ee),J}function Z(j){var K=j|0;if(K!==P.width){J.width=P.width=K,J.height=P.height=K,oi(P);for(var k=0;k<6;++k)for(var $=0;P.mipmask>>$;++$)C.texImage2D(Iv+k,$,P.format,K>>$,K>>$,0,P.format,P.type,null);return Yt(),ue.profile&&(P.stats.size=Bv(P.internalformat,P.type,J.width,J.height,!1,!0)),J}}return J(G,se,re,Ke,kt,F),J.subimage=ee,J.resize=Z,J._reglType="textureCube",J._texture=P,ue.profile&&(J.stats=P.stats),J.destroy=function(){P.decRef()},J}function Yr(){for(var G=0;G<ai;++G)C.activeTexture(Cg+G),C.bindTexture(rl,null),Kr[G]=null;eo(Zn).forEach(ct),ae.cubeCount=0,ae.textureCount=0}ue.profile&&(ae.getTotalTextureSize=function(){var G=0;return Object.keys(Zn).forEach(function(se){G+=Zn[se].stats.size}),G});function il(){for(var G=0;G<ai;++G){var se=Kr[G];se&&(se.bindCount=0,se.unit=-1,Kr[G]=null)}eo(Zn).forEach(function(re){re.texture=C.createTexture(),C.bindTexture(re.target,re.texture);for(var Ke=0;Ke<32;++Ke)if(re.mipmask&1<<Ke)if(re.target===rl)C.texImage2D(rl,Ke,re.internalformat,re.width>>Ke,re.height>>Ke,0,re.internalformat,re.type,null);else for(var kt=0;kt<6;++kt)C.texImage2D(Iv+kt,Ke,re.internalformat,re.width>>Ke,re.height>>Ke,0,re.internalformat,re.type,null);En(re.texInfo,re.target)})}function Nf(){for(var G=0;G<ai;++G){var se=Kr[G];se&&(se.bindCount=0,se.unit=-1,Kr[G]=null),C.activeTexture(Cg+G),C.bindTexture(rl,null),C.bindTexture(kS,null)}}return{create2D:Gt,createCube:$t,clear:Yr,getTexture:function(G){return null},restore:il,refresh:Nf}}var hu=36161,Dv=32854,ik=32855,ak=36194,ok=33189,sk=36168,lk=34041,ck=35907,uk=34836,dk=34842,fk=34843,_s=[];_s[Dv]=2,_s[ik]=2,_s[ak]=2,_s[ok]=2,_s[sk]=1,_s[lk]=4,_s[ck]=4,_s[uk]=16,_s[dk]=8,_s[fk]=6;function pk(C,M,V){return _s[C]*M*V}var Ofe=function(C,M,V,oe,_e){var ae={rgba4:Dv,rgb565:ak,"rgb5 a1":ik,depth:ok,stencil:sk,"depth stencil":lk};M.ext_srgb&&(ae.srgba=ck),M.ext_color_buffer_half_float&&(ae.rgba16f=dk,ae.rgb16f=fk),M.webgl_color_buffer_float&&(ae.rgba32f=uk);var ue=[];Object.keys(ae).forEach(function(Te){var De=ae[Te];ue[De]=Te});var Ae=0,Ce={};function Me(Te){this.id=Ae++,this.refCount=1,this.renderbuffer=Te,this.format=Dv,this.width=0,this.height=0,_e.profile&&(this.stats={size:0})}Me.prototype.decRef=function(){--this.refCount<=0&&we(this)};function we(Te){var De=Te.renderbuffer;D(De,"must not double destroy renderbuffer"),C.bindRenderbuffer(hu,null),C.deleteRenderbuffer(De),Te.renderbuffer=null,Te.refCount=0,delete Ce[Te.id],oe.renderbufferCount--}function Be(Te,De){var Q=new Me(C.createRenderbuffer());Ce[Q.id]=Q,oe.renderbufferCount++;function de(He,ye){var Xe=0,Ne=0,ke=Dv;if(typeof He=="object"&&He){var xe=He;if("shape"in xe){var Ge=xe.shape;D(Array.isArray(Ge)&&Ge.length>=2,"invalid renderbuffer shape"),Xe=Ge[0]|0,Ne=Ge[1]|0}else"radius"in xe&&(Xe=Ne=xe.radius|0),"width"in xe&&(Xe=xe.width|0),"height"in xe&&(Ne=xe.height|0);"format"in xe&&(D.parameter(xe.format,ae,"invalid renderbuffer format"),ke=ae[xe.format])}else typeof He=="number"?(Xe=He|0,typeof ye=="number"?Ne=ye|0:Ne=Xe):He?D.raise("invalid arguments to renderbuffer constructor"):Xe=Ne=1;if(D(Xe>0&&Ne>0&&Xe<=V.maxRenderbufferSize&&Ne<=V.maxRenderbufferSize,"invalid renderbuffer size"),!(Xe===Q.width&&Ne===Q.height&&ke===Q.format))return de.width=Q.width=Xe,de.height=Q.height=Ne,Q.format=ke,C.bindRenderbuffer(hu,Q.renderbuffer),C.renderbufferStorage(hu,ke,Xe,Ne),D(C.getError()===0,"invalid render buffer format"),_e.profile&&(Q.stats.size=pk(Q.format,Q.width,Q.height)),de.format=ue[Q.format],de}function Re(He,ye){var Xe=He|0,Ne=ye|0||Xe;return Xe===Q.width&&Ne===Q.height||(D(Xe>0&&Ne>0&&Xe<=V.maxRenderbufferSize&&Ne<=V.maxRenderbufferSize,"invalid renderbuffer size"),de.width=Q.width=Xe,de.height=Q.height=Ne,C.bindRenderbuffer(hu,Q.renderbuffer),C.renderbufferStorage(hu,Q.format,Xe,Ne),D(C.getError()===0,"invalid render buffer format"),_e.profile&&(Q.stats.size=pk(Q.format,Q.width,Q.height))),de}return de(Te,De),de.resize=Re,de._reglType="renderbuffer",de._renderbuffer=Q,_e.profile&&(de.stats=Q.stats),de.destroy=function(){Q.decRef()},de}_e.profile&&(oe.getTotalRenderbufferSize=function(){var Te=0;return Object.keys(Ce).forEach(function(De){Te+=Ce[De].stats.size}),Te});function Ve(){eo(Ce).forEach(function(Te){Te.renderbuffer=C.createRenderbuffer(),C.bindRenderbuffer(hu,Te.renderbuffer),C.renderbufferStorage(hu,Te.format,Te.width,Te.height)}),C.bindRenderbuffer(hu,null)}return{create:Be,clear:function(){eo(Ce).forEach(we)},restore:Ve}},rc=36160,tN=36161,Ef=3553,Fv=34069,hk=36064,mk=36096,gk=36128,_k=33306,Ek=36053,Bfe=36054,Dfe=36055,Ffe=36057,kfe=36061,Gfe=36193,Ufe=5121,Vfe=5126,vk=6407,yk=6408,$fe=6402,zfe=[vk,yk],rN=[];rN[yk]=4,rN[vk]=3;var kv=[];kv[Ufe]=1,kv[Vfe]=4,kv[Gfe]=2;var jfe=32854,Hfe=32855,Wfe=36194,Zfe=33189,Xfe=36168,xk=34041,qfe=35907,Kfe=34836,Yfe=34842,Jfe=34843,Qfe=[jfe,Hfe,Wfe,qfe,Yfe,Jfe,Kfe],Q1={};Q1[Ek]="complete",Q1[Bfe]="incomplete attachment",Q1[Ffe]="incomplete dimensions",Q1[Dfe]="incomplete, missing attachment",Q1[kfe]="unsupported";function epe(C,M,V,oe,_e,ae){var ue={cur:null,next:null,dirty:!1,setFBO:null},Ae=["rgba"],Ce=["rgba4","rgb565","rgb5 a1"];M.ext_srgb&&Ce.push("srgba"),M.ext_color_buffer_half_float&&Ce.push("rgba16f","rgb16f"),M.webgl_color_buffer_float&&Ce.push("rgba32f");var Me=["uint8"];M.oes_texture_half_float&&Me.push("half float","float16"),M.oes_texture_float&&Me.push("float","float32");function we($e,Le,ve){this.target=$e,this.texture=Le,this.renderbuffer=ve;var gt=0,At=0;Le?(gt=Le.width,At=Le.height):ve&&(gt=ve.width,At=ve.height),this.width=gt,this.height=At}function Be($e){$e&&($e.texture&&$e.texture._texture.decRef(),$e.renderbuffer&&$e.renderbuffer._renderbuffer.decRef())}function Ve($e,Le,ve){if($e)if($e.texture){var gt=$e.texture._texture,At=Math.max(1,gt.width),Ye=Math.max(1,gt.height);D(At===Le&&Ye===ve,"inconsistent width/height for supplied texture"),gt.refCount+=1}else{var Ft=$e.renderbuffer._renderbuffer;D(Ft.width===Le&&Ft.height===ve,"inconsistent width/height for renderbuffer"),Ft.refCount+=1}}function Te($e,Le){Le&&(Le.texture?C.framebufferTexture2D(rc,$e,Le.target,Le.texture._texture.texture,0):C.framebufferRenderbuffer(rc,$e,tN,Le.renderbuffer._renderbuffer.renderbuffer))}function De($e){var Le=Ef,ve=null,gt=null,At=$e;typeof $e=="object"&&(At=$e.data,"target"in $e&&(Le=$e.target|0)),D.type(At,"function","invalid attachment data");var Ye=At._reglType;return Ye==="texture2d"?(ve=At,D(Le===Ef)):Ye==="textureCube"?(ve=At,D(Le>=Fv&&Le<Fv+6,"invalid cube map target")):Ye==="renderbuffer"?(gt=At,Le=tN):D.raise("invalid regl object for attachment"),new we(Le,ve,gt)}function Q($e,Le,ve,gt,At){if(ve){var Ye=oe.create2D({width:$e,height:Le,format:gt,type:At});return Ye._texture.refCount=0,new we(Ef,Ye,null)}else{var Ft=_e.create({width:$e,height:Le,format:gt});return Ft._renderbuffer.refCount=0,new we(tN,null,Ft)}}function de($e){return $e&&($e.texture||$e.renderbuffer)}function Re($e,Le,ve){$e&&($e.texture?$e.texture.resize(Le,ve):$e.renderbuffer&&$e.renderbuffer.resize(Le,ve),$e.width=Le,$e.height=ve)}var He=0,ye={};function Xe(){this.id=He++,ye[this.id]=this,this.framebuffer=C.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ne($e){$e.colorAttachments.forEach(Be),Be($e.depthAttachment),Be($e.stencilAttachment),Be($e.depthStencilAttachment)}function ke($e){var Le=$e.framebuffer;D(Le,"must not double destroy framebuffer"),C.deleteFramebuffer(Le),$e.framebuffer=null,ae.framebufferCount--,delete ye[$e.id]}function xe($e){var Le;C.bindFramebuffer(rc,$e.framebuffer);var ve=$e.colorAttachments;for(Le=0;Le<ve.length;++Le)Te(hk+Le,ve[Le]);for(Le=ve.length;Le<V.maxColorAttachments;++Le)C.framebufferTexture2D(rc,hk+Le,Ef,null,0);C.framebufferTexture2D(rc,_k,Ef,null,0),C.framebufferTexture2D(rc,mk,Ef,null,0),C.framebufferTexture2D(rc,gk,Ef,null,0),Te(mk,$e.depthAttachment),Te(gk,$e.stencilAttachment),Te(_k,$e.depthStencilAttachment);var gt=C.checkFramebufferStatus(rc);!C.isContextLost()&&gt!==Ek&&D.raise("framebuffer configuration not supported, status = "+Q1[gt]),C.bindFramebuffer(rc,ue.next?ue.next.framebuffer:null),ue.cur=ue.next,C.getError()}function Ge($e,Le){var ve=new Xe;ae.framebufferCount++;function gt(Ye,Ft){var xt;D(ue.next!==ve,"can not update framebuffer which is currently in use");var Mt=0,Zt=0,on=!0,Ln=!0,Ut=null,_n=!0,Er="rgba",sn="uint8",En=1,vn=null,Zn=null,ai=null,Kr=!1;if(typeof Ye=="number")Mt=Ye|0,Zt=Ft|0||Mt;else if(!Ye)Mt=Zt=1;else{D.type(Ye,"object","invalid arguments for framebuffer");var Tt=Ye;if("shape"in Tt){var oi=Tt.shape;D(Array.isArray(oi)&&oi.length>=2,"invalid shape for framebuffer"),Mt=oi[0],Zt=oi[1]}else"radius"in Tt&&(Mt=Zt=Tt.radius),"width"in Tt&&(Mt=Tt.width),"height"in Tt&&(Zt=Tt.height);("color"in Tt||"colors"in Tt)&&(Ut=Tt.color||Tt.colors,Array.isArray(Ut)&&D(Ut.length===1||M.webgl_draw_buffers,"multiple render targets not supported")),Ut||("colorCount"in Tt&&(En=Tt.colorCount|0,D(En>0,"invalid color buffer count")),"colorTexture"in Tt&&(_n=!!Tt.colorTexture,Er="rgba4"),"colorType"in Tt&&(sn=Tt.colorType,_n?(D(M.oes_texture_float||!(sn==="float"||sn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),D(M.oes_texture_half_float||!(sn==="half float"||sn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):sn==="half float"||sn==="float16"?(D(M.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Er="rgba16f"):(sn==="float"||sn==="float32")&&(D(M.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Er="rgba32f"),D.oneOf(sn,Me,"invalid color type")),"colorFormat"in Tt&&(Er=Tt.colorFormat,Ae.indexOf(Er)>=0?_n=!0:Ce.indexOf(Er)>=0?_n=!1:_n?D.oneOf(Tt.colorFormat,Ae,"invalid color format for texture"):D.oneOf(Tt.colorFormat,Ce,"invalid color format for renderbuffer"))),("depthTexture"in Tt||"depthStencilTexture"in Tt)&&(Kr=!!(Tt.depthTexture||Tt.depthStencilTexture),D(!Kr||M.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Tt&&(typeof Tt.depth=="boolean"?on=Tt.depth:(vn=Tt.depth,Ln=!1)),"stencil"in Tt&&(typeof Tt.stencil=="boolean"?Ln=Tt.stencil:(Zn=Tt.stencil,on=!1)),"depthStencil"in Tt&&(typeof Tt.depthStencil=="boolean"?on=Ln=Tt.depthStencil:(ai=Tt.depthStencil,on=!1,Ln=!1))}var Yt=null,ct=null,Gt=null,$t=null;if(Array.isArray(Ut))Yt=Ut.map(De);else if(Ut)Yt=[De(Ut)];else for(Yt=new Array(En),xt=0;xt<En;++xt)Yt[xt]=Q(Mt,Zt,_n,Er,sn);D(M.webgl_draw_buffers||Yt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),D(Yt.length<=V.maxColorAttachments,"too many color attachments, not supported"),Mt=Mt||Yt[0].width,Zt=Zt||Yt[0].height,vn?ct=De(vn):on&&!Ln&&(ct=Q(Mt,Zt,Kr,"depth","uint32")),Zn?Gt=De(Zn):Ln&&!on&&(Gt=Q(Mt,Zt,!1,"stencil","uint8")),ai?$t=De(ai):!vn&&!Zn&&Ln&&on&&($t=Q(Mt,Zt,Kr,"depth stencil","depth stencil")),D(!!vn+!!Zn+!!ai<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Yr=null;for(xt=0;xt<Yt.length;++xt)if(Ve(Yt[xt],Mt,Zt),D(!Yt[xt]||Yt[xt].texture&&zfe.indexOf(Yt[xt].texture._texture.format)>=0||Yt[xt].renderbuffer&&Qfe.indexOf(Yt[xt].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+xt+" is invalid"),Yt[xt]&&Yt[xt].texture){var il=rN[Yt[xt].texture._texture.format]*kv[Yt[xt].texture._texture.type];Yr===null?Yr=il:D(Yr===il,"all color attachments much have the same number of bits per pixel.")}return Ve(ct,Mt,Zt),D(!ct||ct.texture&&ct.texture._texture.format===$fe||ct.renderbuffer&&ct.renderbuffer._renderbuffer.format===Zfe,"invalid depth attachment for framebuffer object"),Ve(Gt,Mt,Zt),D(!Gt||Gt.renderbuffer&&Gt.renderbuffer._renderbuffer.format===Xfe,"invalid stencil attachment for framebuffer object"),Ve($t,Mt,Zt),D(!$t||$t.texture&&$t.texture._texture.format===xk||$t.renderbuffer&&$t.renderbuffer._renderbuffer.format===xk,"invalid depth-stencil attachment for framebuffer object"),Ne(ve),ve.width=Mt,ve.height=Zt,ve.colorAttachments=Yt,ve.depthAttachment=ct,ve.stencilAttachment=Gt,ve.depthStencilAttachment=$t,gt.color=Yt.map(de),gt.depth=de(ct),gt.stencil=de(Gt),gt.depthStencil=de($t),gt.width=ve.width,gt.height=ve.height,xe(ve),gt}function At(Ye,Ft){D(ue.next!==ve,"can not resize a framebuffer which is currently in use");var xt=Math.max(Ye|0,1),Mt=Math.max(Ft|0||xt,1);if(xt===ve.width&&Mt===ve.height)return gt;for(var Zt=ve.colorAttachments,on=0;on<Zt.length;++on)Re(Zt[on],xt,Mt);return Re(ve.depthAttachment,xt,Mt),Re(ve.stencilAttachment,xt,Mt),Re(ve.depthStencilAttachment,xt,Mt),ve.width=gt.width=xt,ve.height=gt.height=Mt,xe(ve),gt}return gt($e,Le),e(gt,{resize:At,_reglType:"framebuffer",_framebuffer:ve,destroy:function(){ke(ve),Ne(ve)},use:function(Ye){ue.setFBO({framebuffer:gt},Ye)}})}function lt($e){var Le=Array(6);function ve(At){var Ye;D(Le.indexOf(ue.next)<0,"can not update framebuffer which is currently in use");var Ft={color:null},xt=0,Mt=null,Zt="rgba",on="uint8",Ln=1;if(typeof At=="number")xt=At|0;else if(!At)xt=1;else{D.type(At,"object","invalid arguments for framebuffer");var Ut=At;if("shape"in Ut){var _n=Ut.shape;D(Array.isArray(_n)&&_n.length>=2,"invalid shape for framebuffer"),D(_n[0]===_n[1],"cube framebuffer must be square"),xt=_n[0]}else"radius"in Ut&&(xt=Ut.radius|0),"width"in Ut?(xt=Ut.width|0,"height"in Ut&&D(Ut.height===xt,"must be square")):"height"in Ut&&(xt=Ut.height|0);("color"in Ut||"colors"in Ut)&&(Mt=Ut.color||Ut.colors,Array.isArray(Mt)&&D(Mt.length===1||M.webgl_draw_buffers,"multiple render targets not supported")),Mt||("colorCount"in Ut&&(Ln=Ut.colorCount|0,D(Ln>0,"invalid color buffer count")),"colorType"in Ut&&(D.oneOf(Ut.colorType,Me,"invalid color type"),on=Ut.colorType),"colorFormat"in Ut&&(Zt=Ut.colorFormat,D.oneOf(Ut.colorFormat,Ae,"invalid color format for texture"))),"depth"in Ut&&(Ft.depth=Ut.depth),"stencil"in Ut&&(Ft.stencil=Ut.stencil),"depthStencil"in Ut&&(Ft.depthStencil=Ut.depthStencil)}var Er;if(Mt)if(Array.isArray(Mt))for(Er=[],Ye=0;Ye<Mt.length;++Ye)Er[Ye]=Mt[Ye];else Er=[Mt];else{Er=Array(Ln);var sn={radius:xt,format:Zt,type:on};for(Ye=0;Ye<Ln;++Ye)Er[Ye]=oe.createCube(sn)}for(Ft.color=Array(Er.length),Ye=0;Ye<Er.length;++Ye){var En=Er[Ye];D(typeof En=="function"&&En._reglType==="textureCube","invalid cube map"),xt=xt||En.width,D(En.width===xt&&En.height===xt,"invalid cube map shape"),Ft.color[Ye]={target:Fv,data:Er[Ye]}}for(Ye=0;Ye<6;++Ye){for(var vn=0;vn<Er.length;++vn)Ft.color[vn].target=Fv+Ye;Ye>0&&(Ft.depth=Le[0].depth,Ft.stencil=Le[0].stencil,Ft.depthStencil=Le[0].depthStencil),Le[Ye]?Le[Ye](Ft):Le[Ye]=Ge(Ft)}return e(ve,{width:xt,height:xt,color:Er})}function gt(At){var Ye,Ft=At|0;if(D(Ft>0&&Ft<=V.maxCubeMapSize,"invalid radius for cube fbo"),Ft===ve.width)return ve;var xt=ve.color;for(Ye=0;Ye<xt.length;++Ye)xt[Ye].resize(Ft);for(Ye=0;Ye<6;++Ye)Le[Ye].resize(Ft);return ve.width=ve.height=Ft,ve}return ve($e),e(ve,{faces:Le,resize:gt,_reglType:"framebufferCube",destroy:function(){Le.forEach(function(At){At.destroy()})}})}function yt(){ue.cur=null,ue.next=null,ue.dirty=!0,eo(ye).forEach(function($e){$e.framebuffer=C.createFramebuffer(),xe($e)})}return e(ue,{getFramebuffer:function($e){if(typeof $e=="function"&&$e._reglType==="framebuffer"){var Le=$e._framebuffer;if(Le instanceof Xe)return Le}return null},create:Ge,createCube:lt,clear:function(){eo(ye).forEach(ke)},restore:yt})}var tpe=5126,bk=34962;function nN(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=tpe,this.offset=0,this.stride=0,this.divisor=0}function rpe(C,M,V,oe,_e){for(var ae=V.maxAttributes,ue=new Array(ae),Ae=0;Ae<ae;++Ae)ue[Ae]=new nN;var Ce=0,Me={},we={Record:nN,scope:{},state:ue,currentVAO:null,targetVAO:null,restore:Ve()?ye:function(){},createVAO:Xe,getVAO:De,destroyBuffer:Be,setVAO:Ve()?Q:de,clear:Ve()?Re:function(){}};function Be(Ne){for(var ke=0;ke<ue.length;++ke){var xe=ue[ke];xe.buffer===Ne&&(C.disableVertexAttribArray(ke),xe.buffer=null)}}function Ve(){return M.oes_vertex_array_object}function Te(){return M.angle_instanced_arrays}function De(Ne){return typeof Ne=="function"&&Ne._vao?Ne._vao:null}function Q(Ne){if(Ne!==we.currentVAO){var ke=Ve();Ne?ke.bindVertexArrayOES(Ne.vao):ke.bindVertexArrayOES(null),we.currentVAO=Ne}}function de(Ne){if(Ne!==we.currentVAO){if(Ne)Ne.bindAttrs();else for(var ke=Te(),xe=0;xe<ue.length;++xe){var Ge=ue[xe];Ge.buffer?(C.enableVertexAttribArray(xe),C.vertexAttribPointer(xe,Ge.size,Ge.type,Ge.normalized,Ge.stride,Ge.offfset),ke&&Ge.divisor&&ke.vertexAttribDivisorANGLE(xe,Ge.divisor)):(C.disableVertexAttribArray(xe),C.vertexAttrib4f(xe,Ge.x,Ge.y,Ge.z,Ge.w))}we.currentVAO=Ne}}function Re(){eo(Me).forEach(function(Ne){Ne.destroy()})}function He(){this.id=++Ce,this.attributes=[];var Ne=Ve();Ne?this.vao=Ne.createVertexArrayOES():this.vao=null,Me[this.id]=this,this.buffers=[]}He.prototype.bindAttrs=function(){for(var Ne=Te(),ke=this.attributes,xe=0;xe<ke.length;++xe){var Ge=ke[xe];Ge.buffer?(C.enableVertexAttribArray(xe),C.bindBuffer(bk,Ge.buffer.buffer),C.vertexAttribPointer(xe,Ge.size,Ge.type,Ge.normalized,Ge.stride,Ge.offset),Ne&&Ge.divisor&&Ne.vertexAttribDivisorANGLE(xe,Ge.divisor)):(C.disableVertexAttribArray(xe),C.vertexAttrib4f(xe,Ge.x,Ge.y,Ge.z,Ge.w))}for(var lt=ke.length;lt<ae;++lt)C.disableVertexAttribArray(lt)},He.prototype.refresh=function(){var Ne=Ve();Ne&&(Ne.bindVertexArrayOES(this.vao),this.bindAttrs(),we.currentVAO=this)},He.prototype.destroy=function(){if(this.vao){var Ne=Ve();this===we.currentVAO&&(we.currentVAO=null,Ne.bindVertexArrayOES(null)),Ne.deleteVertexArrayOES(this.vao),this.vao=null}Me[this.id]&&(delete Me[this.id],oe.vaoCount-=1)};function ye(){var Ne=Ve();Ne&&eo(Me).forEach(function(ke){ke.refresh()})}function Xe(Ne){var ke=new He;oe.vaoCount+=1;function xe(Ge){D(Array.isArray(Ge),"arguments to vertex array constructor must be an array"),D(Ge.length<ae,"too many attributes"),D(Ge.length>0,"must specify at least one attribute");var lt={},yt=ke.attributes;yt.length=Ge.length;for(var $e=0;$e<Ge.length;++$e){var Le=Ge[$e],ve=yt[$e]=new nN,gt=Le.data||Le;if(Array.isArray(gt)||t(gt)||gs(gt)){var At;ke.buffers[$e]&&(At=ke.buffers[$e],t(gt)&&At._buffer.byteLength>=gt.byteLength?At.subdata(gt):(At.destroy(),ke.buffers[$e]=null)),ke.buffers[$e]||(At=ke.buffers[$e]=_e.create(Le,bk,!1,!0)),ve.buffer=_e.getBuffer(At),ve.size=ve.buffer.dimension|0,ve.normalized=!1,ve.type=ve.buffer.dtype,ve.offset=0,ve.stride=0,ve.divisor=0,ve.state=1,lt[$e]=1}else _e.getBuffer(Le)?(ve.buffer=_e.getBuffer(Le),ve.size=ve.buffer.dimension|0,ve.normalized=!1,ve.type=ve.buffer.dtype,ve.offset=0,ve.stride=0,ve.divisor=0,ve.state=1):_e.getBuffer(Le.buffer)?(ve.buffer=_e.getBuffer(Le.buffer),ve.size=(+Le.size||ve.buffer.dimension)|0,ve.normalized=!!Le.normalized||!1,"type"in Le?(D.parameter(Le.type,hf,"invalid buffer type"),ve.type=hf[Le.type]):ve.type=ve.buffer.dtype,ve.offset=(Le.offset||0)|0,ve.stride=(Le.stride||0)|0,ve.divisor=(Le.divisor||0)|0,ve.state=1,D(ve.size>=1&&ve.size<=4,"size must be between 1 and 4"),D(ve.offset>=0,"invalid offset"),D(ve.stride>=0&&ve.stride<=255,"stride must be between 0 and 255"),D(ve.divisor>=0,"divisor must be positive"),D(!ve.divisor||!!M.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Le?(D($e>0,"first attribute must not be a constant"),ve.x=+Le.x||0,ve.y=+Le.y||0,ve.z=+Le.z||0,ve.w=+Le.w||0,ve.state=2):D(!1,"invalid attribute spec for location "+$e)}for(var Ye=0;Ye<ke.buffers.length;++Ye)!lt[Ye]&&ke.buffers[Ye]&&(ke.buffers[Ye].destroy(),ke.buffers[Ye]=null);return ke.refresh(),xe}return xe.destroy=function(){for(var Ge=0;Ge<ke.buffers.length;++Ge)ke.buffers[Ge]&&ke.buffers[Ge].destroy();ke.buffers.length=0,ke.destroy()},xe._vao=ke,xe._reglType="vao",xe(Ne)}return we}var Sk=35632,npe=35633,ipe=35718,ape=35721;function ope(C,M,V,oe){var _e={},ae={};function ue(Q,de,Re,He){this.name=Q,this.id=de,this.location=Re,this.info=He}function Ae(Q,de){for(var Re=0;Re<Q.length;++Re)if(Q[Re].id===de.id){Q[Re].location=de.location;return}Q.push(de)}function Ce(Q,de,Re){var He=Q===Sk?_e:ae,ye=He[de];if(!ye){var Xe=M.str(de);ye=C.createShader(Q),C.shaderSource(ye,Xe),C.compileShader(ye),D.shaderError(C,ye,Xe,Q,Re),He[de]=ye}return ye}var Me={},we=[],Be=0;function Ve(Q,de){this.id=Be++,this.fragId=Q,this.vertId=de,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,oe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Te(Q,de,Re){var He,ye,Xe=Ce(Sk,Q.fragId),Ne=Ce(npe,Q.vertId),ke=Q.program=C.createProgram();if(C.attachShader(ke,Xe),C.attachShader(ke,Ne),Re)for(He=0;He<Re.length;++He){var xe=Re[He];C.bindAttribLocation(ke,xe[0],xe[1])}C.linkProgram(ke),D.linkError(C,ke,M.str(Q.fragId),M.str(Q.vertId),de);var Ge=C.getProgramParameter(ke,ipe);oe.profile&&(Q.stats.uniformsCount=Ge);var lt=Q.uniforms;for(He=0;He<Ge;++He)if(ye=C.getActiveUniform(ke,He),ye)if(ye.size>1)for(var yt=0;yt<ye.size;++yt){var $e=ye.name.replace("[0]","["+yt+"]");Ae(lt,new ue($e,M.id($e),C.getUniformLocation(ke,$e),ye))}else Ae(lt,new ue(ye.name,M.id(ye.name),C.getUniformLocation(ke,ye.name),ye));var Le=C.getProgramParameter(ke,ape);oe.profile&&(Q.stats.attributesCount=Le);var ve=Q.attributes;for(He=0;He<Le;++He)ye=C.getActiveAttrib(ke,He),ye&&Ae(ve,new ue(ye.name,M.id(ye.name),C.getAttribLocation(ke,ye.name),ye))}oe.profile&&(V.getMaxUniformsCount=function(){var Q=0;return we.forEach(function(de){de.stats.uniformsCount>Q&&(Q=de.stats.uniformsCount)}),Q},V.getMaxAttributesCount=function(){var Q=0;return we.forEach(function(de){de.stats.attributesCount>Q&&(Q=de.stats.attributesCount)}),Q});function De(){_e={},ae={};for(var Q=0;Q<we.length;++Q)Te(we[Q],null,we[Q].attributes.map(function(de){return[de.location,de.name]}))}return{clear:function(){var Q=C.deleteShader.bind(C);eo(_e).forEach(Q),_e={},eo(ae).forEach(Q),ae={},we.forEach(function(de){C.deleteProgram(de.program)}),we.length=0,Me={},V.shaderCount=0},program:function(Q,de,Re,He){D.command(Q>=0,"missing vertex shader",Re),D.command(de>=0,"missing fragment shader",Re);var ye=Me[de];ye||(ye=Me[de]={});var Xe=ye[Q];if(Xe&&(Xe.refCount++,!He))return Xe;var Ne=new Ve(de,Q);return V.shaderCount++,Te(Ne,Re,He),Xe||(ye[Q]=Ne),we.push(Ne),e(Ne,{destroy:function(){if(Ne.refCount--,Ne.refCount<=0){C.deleteProgram(Ne.program);var ke=we.indexOf(Ne);we.splice(ke,1),V.shaderCount--}ye[Ne.vertId].refCount<=0&&(C.deleteShader(ae[Ne.vertId]),delete ae[Ne.vertId],delete Me[Ne.fragId][Ne.vertId]),Object.keys(Me[Ne.fragId]).length||(C.deleteShader(_e[Ne.fragId]),delete _e[Ne.fragId],delete Me[Ne.fragId])}})},restore:De,shader:Ce,frag:-1,vert:-1}}var spe=6408,wg=5121,lpe=3333,Gv=5126;function cpe(C,M,V,oe,_e,ae,ue){function Ae(we){var Be;M.next===null?(D(_e.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Be=wg):(D(M.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Be=M.next.colorAttachments[0].texture._texture.type,ae.oes_texture_float?(D(Be===wg||Be===Gv,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Be===Gv&&D(ue.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):D(Be===wg,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ve=0,Te=0,De=oe.framebufferWidth,Q=oe.framebufferHeight,de=null;t(we)?de=we:we&&(D.type(we,"object","invalid arguments to regl.read()"),Ve=we.x|0,Te=we.y|0,D(Ve>=0&&Ve<oe.framebufferWidth,"invalid x offset for regl.read"),D(Te>=0&&Te<oe.framebufferHeight,"invalid y offset for regl.read"),De=(we.width||oe.framebufferWidth-Ve)|0,Q=(we.height||oe.framebufferHeight-Te)|0,de=we.data||null),de&&(Be===wg?D(de instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Be===Gv&&D(de instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),D(De>0&&De+Ve<=oe.framebufferWidth,"invalid width for read pixels"),D(Q>0&&Q+Te<=oe.framebufferHeight,"invalid height for read pixels"),V();var Re=De*Q*4;return de||(Be===wg?de=new Uint8Array(Re):Be===Gv&&(de=de||new Float32Array(Re))),D.isTypedArray(de,"data buffer for regl.read() must be a typedarray"),D(de.byteLength>=Re,"data buffer for regl.read() too small"),C.pixelStorei(lpe,4),C.readPixels(Ve,Te,De,Q,spe,Be,de),de}function Ce(we){var Be;return M.setFBO({framebuffer:we.framebuffer},function(){Be=Ae(we)}),Be}function Me(we){return!we||!("framebuffer"in we)?Ae(we):Ce(we)}return Me}function eh(C){return Array.prototype.slice.call(C)}function th(C){return eh(C).join("")}function upe(){var C=0,M=[],V=[];function oe(Be){for(var Ve=0;Ve<V.length;++Ve)if(V[Ve]===Be)return M[Ve];var Te="g"+C++;return M.push(Te),V.push(Be),Te}function _e(){var Be=[];function Ve(){Be.push.apply(Be,eh(arguments))}var Te=[];function De(){var Q="v"+C++;return Te.push(Q),arguments.length>0&&(Be.push(Q,"="),Be.push.apply(Be,eh(arguments)),Be.push(";")),Q}return e(Ve,{def:De,toString:function(){return th([Te.length>0?"var "+Te.join(",")+";":"",th(Be)])}})}function ae(){var Be=_e(),Ve=_e(),Te=Be.toString,De=Ve.toString;function Q(de,Re){Ve(de,Re,"=",Be.def(de,Re),";")}return e(function(){Be.apply(Be,eh(arguments))},{def:Be.def,entry:Be,exit:Ve,save:Q,set:function(de,Re,He){Q(de,Re),Be(de,Re,"=",He,";")},toString:function(){return Te()+De()}})}function ue(){var Be=th(arguments),Ve=ae(),Te=ae(),De=Ve.toString,Q=Te.toString;return e(Ve,{then:function(){return Ve.apply(Ve,eh(arguments)),this},else:function(){return Te.apply(Te,eh(arguments)),this},toString:function(){var de=Q();return de&&(de="else{"+de+"}"),th(["if(",Be,"){",De(),"}",de])}})}var Ae=_e(),Ce={};function Me(Be,Ve){var Te=[];function De(){var ye="a"+Te.length;return Te.push(ye),ye}Ve=Ve||0;for(var Q=0;Q<Ve;++Q)De();var de=ae(),Re=de.toString,He=Ce[Be]=e(de,{arg:De,toString:function(){return th(["function(",Te.join(),"){",Re(),"}"])}});return He}function we(){var Be=['"use strict";',Ae,"return {"];Object.keys(Ce).forEach(function(De){Be.push('"',De,'":',Ce[De].toString(),",")}),Be.push("}");var Ve=th(Be).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Te=Function.apply(null,M.concat(Ve));return Te.apply(null,V)}return{global:Ae,link:oe,block:_e,proc:Me,scope:ae,cond:ue,compile:we}}var rh="xyzw".split(""),Nk=5121,nh=1,iN=2,aN=0,oN=1,sN=2,lN=3,Uv=4,Ak=5,Tk=6,Ck="dither",wk="blend.enable",Ik="blend.color",cN="blend.equation",uN="blend.func",Rk="depth.enable",Pk="depth.func",Mk="depth.range",Lk="depth.mask",dN="colorMask",Ok="cull.enable",Bk="cull.face",fN="frontFace",pN="lineWidth",Dk="polygonOffset.enable",hN="polygonOffset.offset",Fk="sample.alpha",kk="sample.enable",mN="sample.coverage",Gk="stencil.enable",Uk="stencil.mask",gN="stencil.func",_N="stencil.opFront",Ig="stencil.opBack",Vk="scissor.enable",Vv="scissor.box",nc="viewport",Rg="profile",vf="framebuffer",Pg="vert",Mg="frag",yf="elements",xf="primitive",bf="count",$v="offset",zv="instances",Lg="vao",EN="Width",vN="Height",ih=vf+EN,ah=vf+vN,dpe=nc+EN,fpe=nc+vN,$k="drawingBuffer",zk=$k+EN,jk=$k+vN,ppe=[uN,cN,gN,_N,Ig,mN,nc,Vv,hN],oh=34962,hpe=34963,mpe=35632,gpe=35633,Hk=3553,_pe=34067,Epe=2884,vpe=3042,ype=3024,xpe=2960,bpe=2929,Spe=3089,Npe=32823,Ape=32926,Tpe=32928,yN=5126,jv=35664,Hv=35665,Wv=35666,xN=5124,Zv=35667,Xv=35668,qv=35669,bN=35670,Kv=35671,Yv=35672,Jv=35673,Og=35674,Bg=35675,Dg=35676,Fg=35678,kg=35680,Wk=4,Gg=1028,Sf=1029,Zk=2304,SN=2305,Cpe=32775,wpe=32776,Ipe=519,mu=7680,Xk=0,qk=1,Kk=32774,Rpe=513,Yk=36160,Ppe=36064,nl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jk=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],sh={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},gu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Qk={frag:mpe,vert:gpe},NN={cw:Zk,ccw:SN};function Qv(C){return Array.isArray(C)||t(C)||gs(C)}function eG(C){return C.sort(function(M,V){return M===nc?-1:V===nc?1:M<V?-1:1})}function aa(C,M,V,oe){this.thisDep=C,this.contextDep=M,this.propDep=V,this.append=oe}function _u(C){return C&&!(C.thisDep||C.contextDep||C.propDep)}function an(C){return new aa(!1,!1,!1,C)}function Pa(C,M){var V=C.type;if(V===aN){var oe=C.data.length;return new aa(!0,oe>=1,oe>=2,M)}else if(V===Uv){var _e=C.data;return new aa(_e.thisDep,_e.contextDep,_e.propDep,M)}else{if(V===Ak)return new aa(!1,!1,!1,M);if(V===Tk){for(var ae=!1,ue=!1,Ae=!1,Ce=0;Ce<C.data.length;++Ce){var Me=C.data[Ce];if(Me.type===oN)Ae=!0;else if(Me.type===sN)ue=!0;else if(Me.type===lN)ae=!0;else if(Me.type===aN){ae=!0;var we=Me.data;we>=1&&(ue=!0),we>=2&&(Ae=!0)}else Me.type===Uv&&(ae=ae||Me.data.thisDep,ue=ue||Me.data.contextDep,Ae=Ae||Me.data.propDep)}return new aa(ae,ue,Ae,M)}else return new aa(V===lN,V===sN,V===oN,M)}}var tG=new aa(!1,!1,!1,function(){});function Mpe(C,M,V,oe,_e,ae,ue,Ae,Ce,Me,we,Be,Ve,Te,De){var Q=Me.Record,de={add:32774,subtract:32778,"reverse subtract":32779};V.ext_blend_minmax&&(de.min=Cpe,de.max=wpe);var Re=V.angle_instanced_arrays,He=V.webgl_draw_buffers,ye={dirty:!0,profile:De.profile},Xe={},Ne=[],ke={},xe={};function Ge(F){return F.replace(".","_")}function lt(F,P,z){var J=Ge(F);Ne.push(F),Xe[J]=ye[J]=!!z,ke[J]=P}function yt(F,P,z){var J=Ge(F);Ne.push(F),Array.isArray(z)?(ye[J]=z.slice(),Xe[J]=z.slice()):ye[J]=Xe[J]=z,xe[J]=P}lt(Ck,ype),lt(wk,vpe),yt(Ik,"blendColor",[0,0,0,0]),yt(cN,"blendEquationSeparate",[Kk,Kk]),yt(uN,"blendFuncSeparate",[qk,Xk,qk,Xk]),lt(Rk,bpe,!0),yt(Pk,"depthFunc",Rpe),yt(Mk,"depthRange",[0,1]),yt(Lk,"depthMask",!0),yt(dN,dN,[!0,!0,!0,!0]),lt(Ok,Epe),yt(Bk,"cullFace",Sf),yt(fN,fN,SN),yt(pN,pN,1),lt(Dk,Npe),yt(hN,"polygonOffset",[0,0]),lt(Fk,Ape),lt(kk,Tpe),yt(mN,"sampleCoverage",[1,!1]),lt(Gk,xpe),yt(Uk,"stencilMask",-1),yt(gN,"stencilFunc",[Ipe,0,-1]),yt(_N,"stencilOpSeparate",[Gg,mu,mu,mu]),yt(Ig,"stencilOpSeparate",[Sf,mu,mu,mu]),lt(Vk,Spe),yt(Vv,"scissor",[0,0,C.drawingBufferWidth,C.drawingBufferHeight]),yt(nc,nc,[0,0,C.drawingBufferWidth,C.drawingBufferHeight]);var $e={gl:C,context:Ve,strings:M,next:Xe,current:ye,draw:Be,elements:ae,buffer:_e,shader:we,attributes:Me.state,vao:Me,uniforms:Ce,framebuffer:Ae,extensions:V,timer:Te,isBufferArgs:Qv},Le={primTypes:W1,compareFuncs:sh,blendFuncs:nl,blendEquations:de,stencilOps:gu,glTypes:hf,orientationType:NN};D.optional(function(){$e.isArrayLike=qr}),He&&(Le.backBuffer=[Sf],Le.drawBuffer=Ra(oe.maxDrawbuffers,function(F){return F===0?[0]:Ra(F,function(P){return Ppe+P})}));var ve=0;function gt(){var F=upe(),P=F.link,z=F.global;F.id=ve++,F.batchId="0";var J=P($e),ee=F.shared={props:"a0"};Object.keys($e).forEach(function($){ee[$]=z.def(J,".",$)}),D.optional(function(){F.CHECK=P(D),F.commandStr=D.guessCommand(),F.command=P(F.commandStr),F.assert=function($,B,Y){$("if(!(",B,"))",this.CHECK,".commandRaise(",P(Y),",",this.command,");")},Le.invalidBlendCombinations=Jk});var Z=F.next={},j=F.current={};Object.keys(xe).forEach(function($){Array.isArray(ye[$])&&(Z[$]=z.def(ee.next,".",$),j[$]=z.def(ee.current,".",$))});var K=F.constants={};Object.keys(Le).forEach(function($){K[$]=z.def(JSON.stringify(Le[$]))}),F.invoke=function($,B){switch(B.type){case aN:var Y=["this",ee.context,ee.props,F.batchId];return $.def(P(B.data),".call(",Y.slice(0,Math.max(B.data.length+1,4)),")");case oN:return $.def(ee.props,B.data);case sN:return $.def(ee.context,B.data);case lN:return $.def("this",B.data);case Uv:return B.data.append(F,$),B.data.ref;case Ak:return B.data.toString();case Tk:return B.data.map(function(te){return F.invoke($,te)})}},F.attribCache={};var k={};return F.scopeAttrib=function($){var B=M.id($);if(B in k)return k[B];var Y=Me.scope[B];Y||(Y=Me.scope[B]=new Q);var te=k[B]=P(Y);return te},F}function At(F){var P=F.static,z=F.dynamic,J;if(Rg in P){var ee=!!P[Rg];J=an(function(j,K){return ee}),J.enable=ee}else if(Rg in z){var Z=z[Rg];J=Pa(Z,function(j,K){return j.invoke(K,Z)})}return J}function Ye(F,P){var z=F.static,J=F.dynamic;if(vf in z){var ee=z[vf];return ee?(ee=Ae.getFramebuffer(ee),D.command(ee,"invalid framebuffer object"),an(function(j,K){var k=j.link(ee),$=j.shared;K.set($.framebuffer,".next",k);var B=$.context;return K.set(B,"."+ih,k+".width"),K.set(B,"."+ah,k+".height"),k})):an(function(j,K){var k=j.shared;K.set(k.framebuffer,".next","null");var $=k.context;return K.set($,"."+ih,$+"."+zk),K.set($,"."+ah,$+"."+jk),"null"})}else if(vf in J){var Z=J[vf];return Pa(Z,function(j,K){var k=j.invoke(K,Z),$=j.shared,B=$.framebuffer,Y=K.def(B,".getFramebuffer(",k,")");D.optional(function(){j.assert(K,"!"+k+"||"+Y,"invalid framebuffer object")}),K.set(B,".next",Y);var te=$.context;return K.set(te,"."+ih,Y+"?"+Y+".width:"+te+"."+zk),K.set(te,"."+ah,Y+"?"+Y+".height:"+te+"."+jk),Y})}else return null}function Ft(F,P,z){var J=F.static,ee=F.dynamic;function Z(k){if(k in J){var $=J[k];D.commandType($,"object","invalid "+k,z.commandStr);var B=!0,Y=$.x|0,te=$.y|0,me,Ee;return"width"in $?(me=$.width|0,D.command(me>=0,"invalid "+k,z.commandStr)):B=!1,"height"in $?(Ee=$.height|0,D.command(Ee>=0,"invalid "+k,z.commandStr)):B=!1,new aa(!B&&P&&P.thisDep,!B&&P&&P.contextDep,!B&&P&&P.propDep,function(it,Ct){var Je=it.shared.context,dt=me;"width"in $||(dt=Ct.def(Je,".",ih,"-",Y));var bt=Ee;return"height"in $||(bt=Ct.def(Je,".",ah,"-",te)),[Y,te,dt,bt]})}else if(k in ee){var fe=ee[k],Ie=Pa(fe,function(it,Ct){var Je=it.invoke(Ct,fe);D.optional(function(){it.assert(Ct,Je+"&&typeof "+Je+'==="object"',"invalid "+k)});var dt=it.shared.context,bt=Ct.def(Je,".x|0"),Xt=Ct.def(Je,".y|0"),jr=Ct.def('"width" in ',Je,"?",Je,".width|0:","(",dt,".",ih,"-",bt,")"),oa=Ct.def('"height" in ',Je,"?",Je,".height|0:","(",dt,".",ah,"-",Xt,")");return D.optional(function(){it.assert(Ct,jr+">=0&&"+oa+">=0","invalid "+k)}),[bt,Xt,jr,oa]});return P&&(Ie.thisDep=Ie.thisDep||P.thisDep,Ie.contextDep=Ie.contextDep||P.contextDep,Ie.propDep=Ie.propDep||P.propDep),Ie}else return P?new aa(P.thisDep,P.contextDep,P.propDep,function(it,Ct){var Je=it.shared.context;return[0,0,Ct.def(Je,".",ih),Ct.def(Je,".",ah)]}):null}var j=Z(nc);if(j){var K=j;j=new aa(j.thisDep,j.contextDep,j.propDep,function(k,$){var B=K.append(k,$),Y=k.shared.context;return $.set(Y,"."+dpe,B[2]),$.set(Y,"."+fpe,B[3]),B})}return{viewport:j,scissor_box:Z(Vv)}}function xt(F,P){var z=F.static,J=typeof z[Mg]=="string"&&typeof z[Pg]=="string";if(J){if(Object.keys(P.dynamic).length>0)return null;var ee=P.static,Z=Object.keys(ee);if(Z.length>0&&typeof ee[Z[0]]=="number"){for(var j=[],K=0;K<Z.length;++K)D(typeof ee[Z[K]]=="number","must specify all vertex attribute locations when using vaos"),j.push([ee[Z[K]]|0,Z[K]]);return j}}return null}function Mt(F,P,z){var J=F.static,ee=F.dynamic;function Z(B){if(B in J){var Y=M.id(J[B]);D.optional(function(){we.shader(Qk[B],Y,D.guessCommand())});var te=an(function(){return Y});return te.id=Y,te}else if(B in ee){var me=ee[B];return Pa(me,function(Ee,fe){var Ie=Ee.invoke(fe,me),it=fe.def(Ee.shared.strings,".id(",Ie,")");return D.optional(function(){fe(Ee.shared.shader,".shader(",Qk[B],",",it,",",Ee.command,");")}),it})}return null}var j=Z(Mg),K=Z(Pg),k=null,$;return _u(j)&&_u(K)?(k=we.program(K.id,j.id,null,z),$=an(function(B,Y){return B.link(k)})):$=new aa(j&&j.thisDep||K&&K.thisDep,j&&j.contextDep||K&&K.contextDep,j&&j.propDep||K&&K.propDep,function(B,Y){var te=B.shared.shader,me;j?me=j.append(B,Y):me=Y.def(te,".",Mg);var Ee;K?Ee=K.append(B,Y):Ee=Y.def(te,".",Pg);var fe=te+".program("+Ee+","+me;return D.optional(function(){fe+=","+B.command}),Y.def(fe+")")}),{frag:j,vert:K,progVar:$,program:k}}function Zt(F,P){var z=F.static,J=F.dynamic;function ee(){if(yf in z){var B=z[yf];Qv(B)?B=ae.getElements(ae.create(B,!0)):B&&(B=ae.getElements(B),D.command(B,"invalid elements",P.commandStr));var Y=an(function(me,Ee){if(B){var fe=me.link(B);return me.ELEMENTS=fe,fe}return me.ELEMENTS=null,null});return Y.value=B,Y}else if(yf in J){var te=J[yf];return Pa(te,function(me,Ee){var fe=me.shared,Ie=fe.isBufferArgs,it=fe.elements,Ct=me.invoke(Ee,te),Je=Ee.def("null"),dt=Ee.def(Ie,"(",Ct,")"),bt=me.cond(dt).then(Je,"=",it,".createStream(",Ct,");").else(Je,"=",it,".getElements(",Ct,");");return D.optional(function(){me.assert(bt.else,"!"+Ct+"||"+Je,"invalid elements")}),Ee.entry(bt),Ee.exit(me.cond(dt).then(it,".destroyStream(",Je,");")),me.ELEMENTS=Je,Je})}return null}var Z=ee();function j(){if(xf in z){var B=z[xf];return D.commandParameter(B,W1,"invalid primitve",P.commandStr),an(function(te,me){return W1[B]})}else if(xf in J){var Y=J[xf];return Pa(Y,function(te,me){var Ee=te.constants.primTypes,fe=te.invoke(me,Y);return D.optional(function(){te.assert(me,fe+" in "+Ee,"invalid primitive, must be one of "+Object.keys(W1))}),me.def(Ee,"[",fe,"]")})}else if(Z)return _u(Z)?Z.value?an(function(te,me){return me.def(te.ELEMENTS,".primType")}):an(function(){return Wk}):new aa(Z.thisDep,Z.contextDep,Z.propDep,function(te,me){var Ee=te.ELEMENTS;return me.def(Ee,"?",Ee,".primType:",Wk)});return null}function K(B,Y){if(B in z){var te=z[B]|0;return D.command(!Y||te>=0,"invalid "+B,P.commandStr),an(function(Ee,fe){return Y&&(Ee.OFFSET=te),te})}else if(B in J){var me=J[B];return Pa(me,function(Ee,fe){var Ie=Ee.invoke(fe,me);return Y&&(Ee.OFFSET=Ie,D.optional(function(){Ee.assert(fe,Ie+">=0","invalid "+B)})),Ie})}else if(Y&&Z)return an(function(Ee,fe){return Ee.OFFSET="0",0});return null}var k=K($v,!0);function $(){if(bf in z){var B=z[bf]|0;return D.command(typeof B=="number"&&B>=0,"invalid vertex count",P.commandStr),an(function(){return B})}else if(bf in J){var Y=J[bf];return Pa(Y,function(Ee,fe){var Ie=Ee.invoke(fe,Y);return D.optional(function(){Ee.assert(fe,"typeof "+Ie+'==="number"&&'+Ie+">=0&&"+Ie+"===("+Ie+"|0)","invalid vertex count")}),Ie})}else if(Z)if(_u(Z)){if(Z)return k?new aa(k.thisDep,k.contextDep,k.propDep,function(Ee,fe){var Ie=fe.def(Ee.ELEMENTS,".vertCount-",Ee.OFFSET);return D.optional(function(){Ee.assert(fe,Ie+">=0","invalid vertex offset/element buffer too small")}),Ie}):an(function(Ee,fe){return fe.def(Ee.ELEMENTS,".vertCount")});var te=an(function(){return-1});return D.optional(function(){te.MISSING=!0}),te}else{var me=new aa(Z.thisDep||k.thisDep,Z.contextDep||k.contextDep,Z.propDep||k.propDep,function(Ee,fe){var Ie=Ee.ELEMENTS;return Ee.OFFSET?fe.def(Ie,"?",Ie,".vertCount-",Ee.OFFSET,":-1"):fe.def(Ie,"?",Ie,".vertCount:-1")});return D.optional(function(){me.DYNAMIC=!0}),me}return null}return{elements:Z,primitive:j(),count:$(),instances:K(zv,!1),offset:k}}function on(F,P){var z=F.static,J=F.dynamic,ee={};return Ne.forEach(function(Z){var j=Ge(Z);function K(k,$){if(Z in z){var B=k(z[Z]);ee[j]=an(function(){return B})}else if(Z in J){var Y=J[Z];ee[j]=Pa(Y,function(te,me){return $(te,me,te.invoke(me,Y))})}}switch(Z){case Ok:case wk:case Ck:case Gk:case Rk:case Vk:case Dk:case Fk:case kk:case Lk:return K(function(k){return D.commandType(k,"boolean",Z,P.commandStr),k},function(k,$,B){return D.optional(function(){k.assert($,"typeof "+B+'==="boolean"',"invalid flag "+Z,k.commandStr)}),B});case Pk:return K(function(k){return D.commandParameter(k,sh,"invalid "+Z,P.commandStr),sh[k]},function(k,$,B){var Y=k.constants.compareFuncs;return D.optional(function(){k.assert($,B+" in "+Y,"invalid "+Z+", must be one of "+Object.keys(sh))}),$.def(Y,"[",B,"]")});case Mk:return K(function(k){return D.command(qr(k)&&k.length===2&&typeof k[0]=="number"&&typeof k[1]=="number"&&k[0]<=k[1],"depth range is 2d array",P.commandStr),k},function(k,$,B){D.optional(function(){k.assert($,k.shared.isArrayLike+"("+B+")&&"+B+".length===2&&typeof "+B+'[0]==="number"&&typeof '+B+'[1]==="number"&&'+B+"[0]<="+B+"[1]","depth range must be a 2d array")});var Y=$.def("+",B,"[0]"),te=$.def("+",B,"[1]");return[Y,te]});case uN:return K(function(k){D.commandType(k,"object","blend.func",P.commandStr);var $="srcRGB"in k?k.srcRGB:k.src,B="srcAlpha"in k?k.srcAlpha:k.src,Y="dstRGB"in k?k.dstRGB:k.dst,te="dstAlpha"in k?k.dstAlpha:k.dst;return D.commandParameter($,nl,j+".srcRGB",P.commandStr),D.commandParameter(B,nl,j+".srcAlpha",P.commandStr),D.commandParameter(Y,nl,j+".dstRGB",P.commandStr),D.commandParameter(te,nl,j+".dstAlpha",P.commandStr),D.command(Jk.indexOf($+", "+Y)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+$+", "+Y+")",P.commandStr),[nl[$],nl[Y],nl[B],nl[te]]},function(k,$,B){var Y=k.constants.blendFuncs;D.optional(function(){k.assert($,B+"&&typeof "+B+'==="object"',"invalid blend func, must be an object")});function te(Je,dt){var bt=$.def('"',Je,dt,'" in ',B,"?",B,".",Je,dt,":",B,".",Je);return D.optional(function(){k.assert($,bt+" in "+Y,"invalid "+Z+"."+Je+dt+", must be one of "+Object.keys(nl))}),bt}var me=te("src","RGB"),Ee=te("dst","RGB");D.optional(function(){var Je=k.constants.invalidBlendCombinations;k.assert($,Je+".indexOf("+me+'+", "+'+Ee+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var fe=$.def(Y,"[",me,"]"),Ie=$.def(Y,"[",te("src","Alpha"),"]"),it=$.def(Y,"[",Ee,"]"),Ct=$.def(Y,"[",te("dst","Alpha"),"]");return[fe,it,Ie,Ct]});case cN:return K(function(k){if(typeof k=="string")return D.commandParameter(k,de,"invalid "+Z,P.commandStr),[de[k],de[k]];if(typeof k=="object")return D.commandParameter(k.rgb,de,Z+".rgb",P.commandStr),D.commandParameter(k.alpha,de,Z+".alpha",P.commandStr),[de[k.rgb],de[k.alpha]];D.commandRaise("invalid blend.equation",P.commandStr)},function(k,$,B){var Y=k.constants.blendEquations,te=$.def(),me=$.def(),Ee=k.cond("typeof ",B,'==="string"');return D.optional(function(){function fe(Ie,it,Ct){k.assert(Ie,Ct+" in "+Y,"invalid "+it+", must be one of "+Object.keys(de))}fe(Ee.then,Z,B),k.assert(Ee.else,B+"&&typeof "+B+'==="object"',"invalid "+Z),fe(Ee.else,Z+".rgb",B+".rgb"),fe(Ee.else,Z+".alpha",B+".alpha")}),Ee.then(te,"=",me,"=",Y,"[",B,"];"),Ee.else(te,"=",Y,"[",B,".rgb];",me,"=",Y,"[",B,".alpha];"),$(Ee),[te,me]});case Ik:return K(function(k){return D.command(qr(k)&&k.length===4,"blend.color must be a 4d array",P.commandStr),Ra(4,function($){return+k[$]})},function(k,$,B){return D.optional(function(){k.assert($,k.shared.isArrayLike+"("+B+")&&"+B+".length===4","blend.color must be a 4d array")}),Ra(4,function(Y){return $.def("+",B,"[",Y,"]")})});case Uk:return K(function(k){return D.commandType(k,"number",j,P.commandStr),k|0},function(k,$,B){return D.optional(function(){k.assert($,"typeof "+B+'==="number"',"invalid stencil.mask")}),$.def(B,"|0")});case gN:return K(function(k){D.commandType(k,"object",j,P.commandStr);var $=k.cmp||"keep",B=k.ref||0,Y="mask"in k?k.mask:-1;return D.commandParameter($,sh,Z+".cmp",P.commandStr),D.commandType(B,"number",Z+".ref",P.commandStr),D.commandType(Y,"number",Z+".mask",P.commandStr),[sh[$],B,Y]},function(k,$,B){var Y=k.constants.compareFuncs;D.optional(function(){function fe(){k.assert($,Array.prototype.join.call(arguments,""),"invalid stencil.func")}fe(B+"&&typeof ",B,'==="object"'),fe('!("cmp" in ',B,")||(",B,".cmp in ",Y,")")});var te=$.def('"cmp" in ',B,"?",Y,"[",B,".cmp]",":",mu),me=$.def(B,".ref|0"),Ee=$.def('"mask" in ',B,"?",B,".mask|0:-1");return[te,me,Ee]});case _N:case Ig:return K(function(k){D.commandType(k,"object",j,P.commandStr);var $=k.fail||"keep",B=k.zfail||"keep",Y=k.zpass||"keep";return D.commandParameter($,gu,Z+".fail",P.commandStr),D.commandParameter(B,gu,Z+".zfail",P.commandStr),D.commandParameter(Y,gu,Z+".zpass",P.commandStr),[Z===Ig?Sf:Gg,gu[$],gu[B],gu[Y]]},function(k,$,B){var Y=k.constants.stencilOps;D.optional(function(){k.assert($,B+"&&typeof "+B+'==="object"',"invalid "+Z)});function te(me){return D.optional(function(){k.assert($,'!("'+me+'" in '+B+")||("+B+"."+me+" in "+Y+")","invalid "+Z+"."+me+", must be one of "+Object.keys(gu))}),$.def('"',me,'" in ',B,"?",Y,"[",B,".",me,"]:",mu)}return[Z===Ig?Sf:Gg,te("fail"),te("zfail"),te("zpass")]});case hN:return K(function(k){D.commandType(k,"object",j,P.commandStr);var $=k.factor|0,B=k.units|0;return D.commandType($,"number",j+".factor",P.commandStr),D.commandType(B,"number",j+".units",P.commandStr),[$,B]},function(k,$,B){D.optional(function(){k.assert($,B+"&&typeof "+B+'==="object"',"invalid "+Z)});var Y=$.def(B,".factor|0"),te=$.def(B,".units|0");return[Y,te]});case Bk:return K(function(k){var $=0;return k==="front"?$=Gg:k==="back"&&($=Sf),D.command(!!$,j,P.commandStr),$},function(k,$,B){return D.optional(function(){k.assert($,B+'==="front"||'+B+'==="back"',"invalid cull.face")}),$.def(B,'==="front"?',Gg,":",Sf)});case pN:return K(function(k){return D.command(typeof k=="number"&&k>=oe.lineWidthDims[0]&&k<=oe.lineWidthDims[1],"invalid line width, must be a positive number between "+oe.lineWidthDims[0]+" and "+oe.lineWidthDims[1],P.commandStr),k},function(k,$,B){return D.optional(function(){k.assert($,"typeof "+B+'==="number"&&'+B+">="+oe.lineWidthDims[0]+"&&"+B+"<="+oe.lineWidthDims[1],"invalid line width")}),B});case fN:return K(function(k){return D.commandParameter(k,NN,j,P.commandStr),NN[k]},function(k,$,B){return D.optional(function(){k.assert($,B+'==="cw"||'+B+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),$.def(B+'==="cw"?'+Zk+":"+SN)});case dN:return K(function(k){return D.command(qr(k)&&k.length===4,"color.mask must be length 4 array",P.commandStr),k.map(function($){return!!$})},function(k,$,B){return D.optional(function(){k.assert($,k.shared.isArrayLike+"("+B+")&&"+B+".length===4","invalid color.mask")}),Ra(4,function(Y){return"!!"+B+"["+Y+"]"})});case mN:return K(function(k){D.command(typeof k=="object"&&k,j,P.commandStr);var $="value"in k?k.value:1,B=!!k.invert;return D.command(typeof $=="number"&&$>=0&&$<=1,"sample.coverage.value must be a number between 0 and 1",P.commandStr),[$,B]},function(k,$,B){D.optional(function(){k.assert($,B+"&&typeof "+B+'==="object"',"invalid sample.coverage")});var Y=$.def('"value" in ',B,"?+",B,".value:1"),te=$.def("!!",B,".invert");return[Y,te]})}}),ee}function Ln(F,P){var z=F.static,J=F.dynamic,ee={};return Object.keys(z).forEach(function(Z){var j=z[Z],K;if(typeof j=="number"||typeof j=="boolean")K=an(function(){return j});else if(typeof j=="function"){var k=j._reglType;k==="texture2d"||k==="textureCube"?K=an(function($){return $.link(j)}):k==="framebuffer"||k==="framebufferCube"?(D.command(j.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Z+'"',P.commandStr),K=an(function($){return $.link(j.color[0])})):D.commandRaise('invalid data for uniform "'+Z+'"',P.commandStr)}else qr(j)?K=an(function($){var B=$.global.def("[",Ra(j.length,function(Y){return D.command(typeof j[Y]=="number"||typeof j[Y]=="boolean","invalid uniform "+Z,$.commandStr),j[Y]}),"]");return B}):D.commandRaise('invalid or missing data for uniform "'+Z+'"',P.commandStr);K.value=j,ee[Z]=K}),Object.keys(J).forEach(function(Z){var j=J[Z];ee[Z]=Pa(j,function(K,k){return K.invoke(k,j)})}),ee}function Ut(F,P){var z=F.static,J=F.dynamic,ee={};return Object.keys(z).forEach(function(Z){var j=z[Z],K=M.id(Z),k=new Q;if(Qv(j))k.state=nh,k.buffer=_e.getBuffer(_e.create(j,oh,!1,!0)),k.type=0;else{var $=_e.getBuffer(j);if($)k.state=nh,k.buffer=$,k.type=0;else if(D.command(typeof j=="object"&&j,"invalid data for attribute "+Z,P.commandStr),"constant"in j){var B=j.constant;k.buffer="null",k.state=iN,typeof B=="number"?k.x=B:(D.command(qr(B)&&B.length>0&&B.length<=4,"invalid constant for attribute "+Z,P.commandStr),rh.forEach(function(it,Ct){Ct<B.length&&(k[it]=B[Ct])}))}else{Qv(j.buffer)?$=_e.getBuffer(_e.create(j.buffer,oh,!1,!0)):$=_e.getBuffer(j.buffer),D.command(!!$,'missing buffer for attribute "'+Z+'"',P.commandStr);var Y=j.offset|0;D.command(Y>=0,'invalid offset for attribute "'+Z+'"',P.commandStr);var te=j.stride|0;D.command(te>=0&&te<256,'invalid stride for attribute "'+Z+'", must be integer betweeen [0, 255]',P.commandStr);var me=j.size|0;D.command(!("size"in j)||me>0&&me<=4,'invalid size for attribute "'+Z+'", must be 1,2,3,4',P.commandStr);var Ee=!!j.normalized,fe=0;"type"in j&&(D.commandParameter(j.type,hf,"invalid type for attribute "+Z,P.commandStr),fe=hf[j.type]);var Ie=j.divisor|0;"divisor"in j&&(D.command(Ie===0||Re,'cannot specify divisor for attribute "'+Z+'", instancing not supported',P.commandStr),D.command(Ie>=0,'invalid divisor for attribute "'+Z+'"',P.commandStr)),D.optional(function(){var it=P.commandStr,Ct=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(j).forEach(function(Je){D.command(Ct.indexOf(Je)>=0,'unknown parameter "'+Je+'" for attribute pointer "'+Z+'" (valid parameters are '+Ct+")",it)})}),k.buffer=$,k.state=nh,k.size=me,k.normalized=Ee,k.type=fe||$.dtype,k.offset=Y,k.stride=te,k.divisor=Ie}}ee[Z]=an(function(it,Ct){var Je=it.attribCache;if(K in Je)return Je[K];var dt={isStream:!1};return Object.keys(k).forEach(function(bt){dt[bt]=k[bt]}),k.buffer&&(dt.buffer=it.link(k.buffer),dt.type=dt.type||dt.buffer+".dtype"),Je[K]=dt,dt})}),Object.keys(J).forEach(function(Z){var j=J[Z];function K(k,$){var B=k.invoke($,j),Y=k.shared,te=k.constants,me=Y.isBufferArgs,Ee=Y.buffer;D.optional(function(){k.assert($,B+"&&(typeof "+B+'==="object"||typeof '+B+'==="function")&&('+me+"("+B+")||"+Ee+".getBuffer("+B+")||"+Ee+".getBuffer("+B+".buffer)||"+me+"("+B+'.buffer)||("constant" in '+B+"&&(typeof "+B+'.constant==="number"||'+Y.isArrayLike+"("+B+".constant))))",'invalid dynamic attribute "'+Z+'"')});var fe={isStream:$.def(!1)},Ie=new Q;Ie.state=nh,Object.keys(Ie).forEach(function(dt){fe[dt]=$.def(""+Ie[dt])});var it=fe.buffer,Ct=fe.type;$("if(",me,"(",B,")){",fe.isStream,"=true;",it,"=",Ee,".createStream(",oh,",",B,");",Ct,"=",it,".dtype;","}else{",it,"=",Ee,".getBuffer(",B,");","if(",it,"){",Ct,"=",it,".dtype;",'}else if("constant" in ',B,"){",fe.state,"=",iN,";","if(typeof "+B+'.constant === "number"){',fe[rh[0]],"=",B,".constant;",rh.slice(1).map(function(dt){return fe[dt]}).join("="),"=0;","}else{",rh.map(function(dt,bt){return fe[dt]+"="+B+".constant.length>"+bt+"?"+B+".constant["+bt+"]:0;"}).join(""),"}}else{","if(",me,"(",B,".buffer)){",it,"=",Ee,".createStream(",oh,",",B,".buffer);","}else{",it,"=",Ee,".getBuffer(",B,".buffer);","}",Ct,'="type" in ',B,"?",te.glTypes,"[",B,".type]:",it,".dtype;",fe.normalized,"=!!",B,".normalized;");function Je(dt){$(fe[dt],"=",B,".",dt,"|0;")}return Je("size"),Je("offset"),Je("stride"),Je("divisor"),$("}}"),$.exit("if(",fe.isStream,"){",Ee,".destroyStream(",it,");","}"),fe}ee[Z]=Pa(j,K)}),ee}function _n(F,P){var z=F.static,J=F.dynamic;if(Lg in z){var ee=z[Lg];return ee!==null&&Me.getVAO(ee)===null&&(ee=Me.createVAO(ee)),an(function(j){return j.link(Me.getVAO(ee))})}else if(Lg in J){var Z=J[Lg];return Pa(Z,function(j,K){var k=j.invoke(K,Z);return K.def(j.shared.vao+".getVAO("+k+")")})}return null}function Er(F){var P=F.static,z=F.dynamic,J={};return Object.keys(P).forEach(function(ee){var Z=P[ee];J[ee]=an(function(j,K){return typeof Z=="number"||typeof Z=="boolean"?""+Z:j.link(Z)})}),Object.keys(z).forEach(function(ee){var Z=z[ee];J[ee]=Pa(Z,function(j,K){return j.invoke(K,Z)})}),J}function sn(F,P,z,J,ee){var Z=F.static,j=F.dynamic;D.optional(function(){var Je=[vf,Pg,Mg,yf,xf,$v,bf,zv,Rg,Lg].concat(Ne);function dt(bt){Object.keys(bt).forEach(function(Xt){D.command(Je.indexOf(Xt)>=0,'unknown parameter "'+Xt+'"',ee.commandStr)})}dt(Z),dt(j)});var K=xt(F,P),k=Ye(F,ee),$=Ft(F,k,ee),B=Zt(F,ee),Y=on(F,ee),te=Mt(F,ee,K);function me(Je){var dt=$[Je];dt&&(Y[Je]=dt)}me(nc),me(Ge(Vv));var Ee=Object.keys(Y).length>0,fe={framebuffer:k,draw:B,shader:te,state:Y,dirty:Ee,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(fe.profile=At(F,ee),fe.uniforms=Ln(z,ee),fe.drawVAO=fe.scopeVAO=_n(F,ee),!fe.drawVAO&&te.program&&!K&&V.angle_instanced_arrays){var Ie=!0,it=te.program.attributes.map(function(Je){var dt=P.static[Je];return Ie=Ie&&!!dt,dt});if(Ie&&it.length>0){var Ct=Me.getVAO(Me.createVAO(it));fe.drawVAO=new aa(null,null,null,function(Je,dt){return Je.link(Ct)}),fe.useVAO=!0}}return K?fe.useVAO=!0:fe.attributes=Ut(P,ee),fe.context=Er(J,ee),fe}function En(F,P,z){var J=F.shared,ee=J.context,Z=F.scope();Object.keys(z).forEach(function(j){P.save(ee,"."+j);var K=z[j],k=K.append(F,P);Array.isArray(k)?Z(ee,".",j,"=[",k.join(),"];"):Z(ee,".",j,"=",k,";")}),P(Z)}function vn(F,P,z,J){var ee=F.shared,Z=ee.gl,j=ee.framebuffer,K;He&&(K=P.def(ee.extensions,".webgl_draw_buffers"));var k=F.constants,$=k.drawBuffer,B=k.backBuffer,Y;z?Y=z.append(F,P):Y=P.def(j,".next"),J||P("if(",Y,"!==",j,".cur){"),P("if(",Y,"){",Z,".bindFramebuffer(",Yk,",",Y,".framebuffer);"),He&&P(K,".drawBuffersWEBGL(",$,"[",Y,".colorAttachments.length]);"),P("}else{",Z,".bindFramebuffer(",Yk,",null);"),He&&P(K,".drawBuffersWEBGL(",B,");"),P("}",j,".cur=",Y,";"),J||P("}")}function Zn(F,P,z){var J=F.shared,ee=J.gl,Z=F.current,j=F.next,K=J.current,k=J.next,$=F.cond(K,".dirty");Ne.forEach(function(B){var Y=Ge(B);if(!(Y in z.state)){var te,me;if(Y in j){te=j[Y],me=Z[Y];var Ee=Ra(ye[Y].length,function(Ie){return $.def(te,"[",Ie,"]")});$(F.cond(Ee.map(function(Ie,it){return Ie+"!=="+me+"["+it+"]"}).join("||")).then(ee,".",xe[Y],"(",Ee,");",Ee.map(function(Ie,it){return me+"["+it+"]="+Ie}).join(";"),";"))}else{te=$.def(k,".",Y);var fe=F.cond(te,"!==",K,".",Y);$(fe),Y in ke?fe(F.cond(te).then(ee,".enable(",ke[Y],");").else(ee,".disable(",ke[Y],");"),K,".",Y,"=",te,";"):fe(ee,".",xe[Y],"(",te,");",K,".",Y,"=",te,";")}}}),Object.keys(z.state).length===0&&$(K,".dirty=false;"),P($)}function ai(F,P,z,J){var ee=F.shared,Z=F.current,j=ee.current,K=ee.gl;eG(Object.keys(z)).forEach(function(k){var $=z[k];if(!(J&&!J($))){var B=$.append(F,P);if(ke[k]){var Y=ke[k];_u($)?B?P(K,".enable(",Y,");"):P(K,".disable(",Y,");"):P(F.cond(B).then(K,".enable(",Y,");").else(K,".disable(",Y,");")),P(j,".",k,"=",B,";")}else if(qr(B)){var te=Z[k];P(K,".",xe[k],"(",B,");",B.map(function(me,Ee){return te+"["+Ee+"]="+me}).join(";"),";")}else P(K,".",xe[k],"(",B,");",j,".",k,"=",B,";")}})}function Kr(F,P){Re&&(F.instancing=P.def(F.shared.extensions,".angle_instanced_arrays"))}function Tt(F,P,z,J,ee){var Z=F.shared,j=F.stats,K=Z.current,k=Z.timer,$=z.profile;function B(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Y,te;function me(Je){Y=P.def(),Je(Y,"=",B(),";"),typeof ee=="string"?Je(j,".count+=",ee,";"):Je(j,".count++;"),Te&&(J?(te=P.def(),Je(te,"=",k,".getNumPendingQueries();")):Je(k,".beginQuery(",j,");"))}function Ee(Je){Je(j,".cpuTime+=",B(),"-",Y,";"),Te&&(J?Je(k,".pushScopeStats(",te,",",k,".getNumPendingQueries(),",j,");"):Je(k,".endQuery();"))}function fe(Je){var dt=P.def(K,".profile");P(K,".profile=",Je,";"),P.exit(K,".profile=",dt,";")}var Ie;if($){if(_u($)){$.enable?(me(P),Ee(P.exit),fe("true")):fe("false");return}Ie=$.append(F,P),fe(Ie)}else Ie=P.def(K,".profile");var it=F.block();me(it),P("if(",Ie,"){",it,"}");var Ct=F.block();Ee(Ct),P.exit("if(",Ie,"){",Ct,"}")}function oi(F,P,z,J,ee){var Z=F.shared;function j(k){switch(k){case jv:case Zv:case Kv:return 2;case Hv:case Xv:case Yv:return 3;case Wv:case qv:case Jv:return 4;default:return 1}}function K(k,$,B){var Y=Z.gl,te=P.def(k,".location"),me=P.def(Z.attributes,"[",te,"]"),Ee=B.state,fe=B.buffer,Ie=[B.x,B.y,B.z,B.w],it=["buffer","normalized","offset","stride"];function Ct(){P("if(!",me,".buffer){",Y,".enableVertexAttribArray(",te,");}");var dt=B.type,bt;if(B.size?bt=P.def(B.size,"||",$):bt=$,P("if(",me,".type!==",dt,"||",me,".size!==",bt,"||",it.map(function(jr){return me+"."+jr+"!=="+B[jr]}).join("||"),"){",Y,".bindBuffer(",oh,",",fe,".buffer);",Y,".vertexAttribPointer(",[te,bt,dt,B.normalized,B.stride,B.offset],");",me,".type=",dt,";",me,".size=",bt,";",it.map(function(jr){return me+"."+jr+"="+B[jr]+";"}).join(""),"}"),Re){var Xt=B.divisor;P("if(",me,".divisor!==",Xt,"){",F.instancing,".vertexAttribDivisorANGLE(",[te,Xt],");",me,".divisor=",Xt,";}")}}function Je(){P("if(",me,".buffer){",Y,".disableVertexAttribArray(",te,");",me,".buffer=null;","}if(",rh.map(function(dt,bt){return me+"."+dt+"!=="+Ie[bt]}).join("||"),"){",Y,".vertexAttrib4f(",te,",",Ie,");",rh.map(function(dt,bt){return me+"."+dt+"="+Ie[bt]+";"}).join(""),"}")}Ee===nh?Ct():Ee===iN?Je():(P("if(",Ee,"===",nh,"){"),Ct(),P("}else{"),Je(),P("}"))}J.forEach(function(k){var $=k.name,B=z.attributes[$],Y;if(B){if(!ee(B))return;Y=B.append(F,P)}else{if(!ee(tG))return;var te=F.scopeAttrib($);D.optional(function(){F.assert(P,te+".state","missing attribute "+$)}),Y={},Object.keys(new Q).forEach(function(me){Y[me]=P.def(te,".",me)})}K(F.link(k),j(k.info.type),Y)})}function Yt(F,P,z,J,ee){for(var Z=F.shared,j=Z.gl,K,k=0;k<J.length;++k){var $=J[k],B=$.name,Y=$.info.type,te=z.uniforms[B],me=F.link($),Ee=me+".location",fe;if(te){if(!ee(te))continue;if(_u(te)){var Ie=te.value;if(D.command(Ie!==null&&typeof Ie!="undefined",'missing uniform "'+B+'"',F.commandStr),Y===Fg||Y===kg){D.command(typeof Ie=="function"&&(Y===Fg&&(Ie._reglType==="texture2d"||Ie._reglType==="framebuffer")||Y===kg&&(Ie._reglType==="textureCube"||Ie._reglType==="framebufferCube")),"invalid texture for uniform "+B,F.commandStr);var it=F.link(Ie._texture||Ie.color[0]._texture);P(j,".uniform1i(",Ee,",",it+".bind());"),P.exit(it,".unbind();")}else if(Y===Og||Y===Bg||Y===Dg){D.optional(function(){D.command(qr(Ie),"invalid matrix for uniform "+B,F.commandStr),D.command(Y===Og&&Ie.length===4||Y===Bg&&Ie.length===9||Y===Dg&&Ie.length===16,"invalid length for matrix uniform "+B,F.commandStr)});var Ct=F.global.def("new Float32Array(["+Array.prototype.slice.call(Ie)+"])"),Je=2;Y===Bg?Je=3:Y===Dg&&(Je=4),P(j,".uniformMatrix",Je,"fv(",Ee,",false,",Ct,");")}else{switch(Y){case yN:D.commandType(Ie,"number","uniform "+B,F.commandStr),K="1f";break;case jv:D.command(qr(Ie)&&Ie.length===2,"uniform "+B,F.commandStr),K="2f";break;case Hv:D.command(qr(Ie)&&Ie.length===3,"uniform "+B,F.commandStr),K="3f";break;case Wv:D.command(qr(Ie)&&Ie.length===4,"uniform "+B,F.commandStr),K="4f";break;case bN:D.commandType(Ie,"boolean","uniform "+B,F.commandStr),K="1i";break;case xN:D.commandType(Ie,"number","uniform "+B,F.commandStr),K="1i";break;case Kv:D.command(qr(Ie)&&Ie.length===2,"uniform "+B,F.commandStr),K="2i";break;case Zv:D.command(qr(Ie)&&Ie.length===2,"uniform "+B,F.commandStr),K="2i";break;case Yv:D.command(qr(Ie)&&Ie.length===3,"uniform "+B,F.commandStr),K="3i";break;case Xv:D.command(qr(Ie)&&Ie.length===3,"uniform "+B,F.commandStr),K="3i";break;case Jv:D.command(qr(Ie)&&Ie.length===4,"uniform "+B,F.commandStr),K="4i";break;case qv:D.command(qr(Ie)&&Ie.length===4,"uniform "+B,F.commandStr),K="4i";break}P(j,".uniform",K,"(",Ee,",",qr(Ie)?Array.prototype.slice.call(Ie):Ie,");")}continue}else fe=te.append(F,P)}else{if(!ee(tG))continue;fe=P.def(Z.uniforms,"[",M.id(B),"]")}Y===Fg?(D(!Array.isArray(fe),"must specify a scalar prop for textures"),P("if(",fe,"&&",fe,'._reglType==="framebuffer"){',fe,"=",fe,".color[0];","}")):Y===kg&&(D(!Array.isArray(fe),"must specify a scalar prop for cube maps"),P("if(",fe,"&&",fe,'._reglType==="framebufferCube"){',fe,"=",fe,".color[0];","}")),D.optional(function(){function oa(Es,lG){F.assert(P,Es,'bad data or missing for uniform "'+B+'".  '+lG)}function AN(Es){D(!Array.isArray(fe),"must not specify an array type for uniform"),oa("typeof "+fe+'==="'+Es+'"',"invalid type, expected "+Es)}function wo(Es,lG){Array.isArray(fe)?D(fe.length===Es,"must have length "+Es):oa(Z.isArrayLike+"("+fe+")&&"+fe+".length==="+Es,"invalid vector, should have length "+Es,F.commandStr)}function sG(Es){D(!Array.isArray(fe),"must not specify a value type"),oa("typeof "+fe+'==="function"&&'+fe+'._reglType==="texture'+(Es===Hk?"2d":"Cube")+'"',"invalid texture type",F.commandStr)}switch(Y){case xN:AN("number");break;case Zv:wo(2,"number");break;case Xv:wo(3,"number");break;case qv:wo(4,"number");break;case yN:AN("number");break;case jv:wo(2,"number");break;case Hv:wo(3,"number");break;case Wv:wo(4,"number");break;case bN:AN("boolean");break;case Kv:wo(2,"boolean");break;case Yv:wo(3,"boolean");break;case Jv:wo(4,"boolean");break;case Og:wo(4,"number");break;case Bg:wo(9,"number");break;case Dg:wo(16,"number");break;case Fg:sG(Hk);break;case kg:sG(_pe);break}});var dt=1;switch(Y){case Fg:case kg:var bt=P.def(fe,"._texture");P(j,".uniform1i(",Ee,",",bt,".bind());"),P.exit(bt,".unbind();");continue;case xN:case bN:K="1i";break;case Zv:case Kv:K="2i",dt=2;break;case Xv:case Yv:K="3i",dt=3;break;case qv:case Jv:K="4i",dt=4;break;case yN:K="1f";break;case jv:K="2f",dt=2;break;case Hv:K="3f",dt=3;break;case Wv:K="4f",dt=4;break;case Og:K="Matrix2fv";break;case Bg:K="Matrix3fv";break;case Dg:K="Matrix4fv";break}if(P(j,".uniform",K,"(",Ee,","),K.charAt(0)==="M"){var Xt=Math.pow(Y-Og+2,2),jr=F.global.def("new Float32Array(",Xt,")");Array.isArray(fe)?P("false,(",Ra(Xt,function(oa){return jr+"["+oa+"]="+fe[oa]}),",",jr,")"):P("false,(Array.isArray(",fe,")||",fe," instanceof Float32Array)?",fe,":(",Ra(Xt,function(oa){return jr+"["+oa+"]="+fe+"["+oa+"]"}),",",jr,")")}else dt>1?P(Ra(dt,function(oa){return Array.isArray(fe)?fe[oa]:fe+"["+oa+"]"})):(D(!Array.isArray(fe),"uniform value must not be an array"),P(fe));P(");")}}function ct(F,P,z,J){var ee=F.shared,Z=ee.gl,j=ee.draw,K=J.draw;function k(){var bt=K.elements,Xt,jr=P;return bt?((bt.contextDep&&J.contextDynamic||bt.propDep)&&(jr=z),Xt=bt.append(F,jr)):Xt=jr.def(j,".",yf),Xt&&jr("if("+Xt+")"+Z+".bindBuffer("+hpe+","+Xt+".buffer.buffer);"),Xt}function $(){var bt=K.count,Xt,jr=P;return bt?((bt.contextDep&&J.contextDynamic||bt.propDep)&&(jr=z),Xt=bt.append(F,jr),D.optional(function(){bt.MISSING&&F.assert(P,"false","missing vertex count"),bt.DYNAMIC&&F.assert(jr,Xt+">=0","missing vertex count")})):(Xt=jr.def(j,".",bf),D.optional(function(){F.assert(jr,Xt+">=0","missing vertex count")})),Xt}var B=k();function Y(bt){var Xt=K[bt];return Xt?Xt.contextDep&&J.contextDynamic||Xt.propDep?Xt.append(F,z):Xt.append(F,P):P.def(j,".",bt)}var te=Y(xf),me=Y($v),Ee=$();if(typeof Ee=="number"){if(Ee===0)return}else z("if(",Ee,"){"),z.exit("}");var fe,Ie;Re&&(fe=Y(zv),Ie=F.instancing);var it=B+".type",Ct=K.elements&&_u(K.elements);function Je(){function bt(){z(Ie,".drawElementsInstancedANGLE(",[te,Ee,it,me+"<<(("+it+"-"+Nk+")>>1)",fe],");")}function Xt(){z(Ie,".drawArraysInstancedANGLE(",[te,me,Ee,fe],");")}B?Ct?bt():(z("if(",B,"){"),bt(),z("}else{"),Xt(),z("}")):Xt()}function dt(){function bt(){z(Z+".drawElements("+[te,Ee,it,me+"<<(("+it+"-"+Nk+")>>1)"]+");")}function Xt(){z(Z+".drawArrays("+[te,me,Ee]+");")}B?Ct?bt():(z("if(",B,"){"),bt(),z("}else{"),Xt(),z("}")):Xt()}Re&&(typeof fe!="number"||fe>=0)?typeof fe=="string"?(z("if(",fe,">0){"),Je(),z("}else if(",fe,"<0){"),dt(),z("}")):Je():dt()}function Gt(F,P,z,J,ee){var Z=gt(),j=Z.proc("body",ee);return D.optional(function(){Z.commandStr=P.commandStr,Z.command=Z.link(P.commandStr)}),Re&&(Z.instancing=j.def(Z.shared.extensions,".angle_instanced_arrays")),F(Z,j,z,J),Z.compile().body}function $t(F,P,z,J){Kr(F,P),z.useVAO?z.drawVAO?P(F.shared.vao,".setVAO(",z.drawVAO.append(F,P),");"):P(F.shared.vao,".setVAO(",F.shared.vao,".targetVAO);"):(P(F.shared.vao,".setVAO(null);"),oi(F,P,z,J.attributes,function(){return!0})),Yt(F,P,z,J.uniforms,function(){return!0}),ct(F,P,P,z)}function Yr(F,P){var z=F.proc("draw",1);Kr(F,z),En(F,z,P.context),vn(F,z,P.framebuffer),Zn(F,z,P),ai(F,z,P.state),Tt(F,z,P,!1,!0);var J=P.shader.progVar.append(F,z);if(z(F.shared.gl,".useProgram(",J,".program);"),P.shader.program)$t(F,z,P,P.shader.program);else{z(F.shared.vao,".setVAO(null);");var ee=F.global.def("{}"),Z=z.def(J,".id"),j=z.def(ee,"[",Z,"]");z(F.cond(j).then(j,".call(this,a0);").else(j,"=",ee,"[",Z,"]=",F.link(function(K){return Gt($t,F,P,K,1)}),"(",J,");",j,".call(this,a0);"))}Object.keys(P.state).length>0&&z(F.shared.current,".dirty=true;")}function il(F,P,z,J){F.batchId="a1",Kr(F,P);function ee(){return!0}oi(F,P,z,J.attributes,ee),Yt(F,P,z,J.uniforms,ee),ct(F,P,P,z)}function Nf(F,P,z,J){Kr(F,P);var ee=z.contextDep,Z=P.def(),j="a0",K="a1",k=P.def();F.shared.props=k,F.batchId=Z;var $=F.scope(),B=F.scope();P($.entry,"for(",Z,"=0;",Z,"<",K,";++",Z,"){",k,"=",j,"[",Z,"];",B,"}",$.exit);function Y(it){return it.contextDep&&ee||it.propDep}function te(it){return!Y(it)}if(z.needsContext&&En(F,B,z.context),z.needsFramebuffer&&vn(F,B,z.framebuffer),ai(F,B,z.state,Y),z.profile&&Y(z.profile)&&Tt(F,B,z,!1,!0),J)z.useVAO?z.drawVAO?Y(z.drawVAO)?B(F.shared.vao,".setVAO(",z.drawVAO.append(F,B),");"):$(F.shared.vao,".setVAO(",z.drawVAO.append(F,$),");"):$(F.shared.vao,".setVAO(",F.shared.vao,".targetVAO);"):($(F.shared.vao,".setVAO(null);"),oi(F,$,z,J.attributes,te),oi(F,B,z,J.attributes,Y)),Yt(F,$,z,J.uniforms,te),Yt(F,B,z,J.uniforms,Y),ct(F,$,B,z);else{var me=F.global.def("{}"),Ee=z.shader.progVar.append(F,B),fe=B.def(Ee,".id"),Ie=B.def(me,"[",fe,"]");B(F.shared.gl,".useProgram(",Ee,".program);","if(!",Ie,"){",Ie,"=",me,"[",fe,"]=",F.link(function(it){return Gt(il,F,z,it,2)}),"(",Ee,");}",Ie,".call(this,a0[",Z,"],",Z,");")}}function G(F,P){var z=F.proc("batch",2);F.batchId="0",Kr(F,z);var J=!1,ee=!0;Object.keys(P.context).forEach(function(me){J=J||P.context[me].propDep}),J||(En(F,z,P.context),ee=!1);var Z=P.framebuffer,j=!1;Z?(Z.propDep?J=j=!0:Z.contextDep&&J&&(j=!0),j||vn(F,z,Z)):vn(F,z,null),P.state.viewport&&P.state.viewport.propDep&&(J=!0);function K(me){return me.contextDep&&J||me.propDep}Zn(F,z,P),ai(F,z,P.state,function(me){return!K(me)}),(!P.profile||!K(P.profile))&&Tt(F,z,P,!1,"a1"),P.contextDep=J,P.needsContext=ee,P.needsFramebuffer=j;var k=P.shader.progVar;if(k.contextDep&&J||k.propDep)Nf(F,z,P,null);else{var $=k.append(F,z);if(z(F.shared.gl,".useProgram(",$,".program);"),P.shader.program)Nf(F,z,P,P.shader.program);else{z(F.shared.vao,".setVAO(null);");var B=F.global.def("{}"),Y=z.def($,".id"),te=z.def(B,"[",Y,"]");z(F.cond(te).then(te,".call(this,a0,a1);").else(te,"=",B,"[",Y,"]=",F.link(function(me){return Gt(Nf,F,P,me,2)}),"(",$,");",te,".call(this,a0,a1);"))}}Object.keys(P.state).length>0&&z(F.shared.current,".dirty=true;")}function se(F,P){var z=F.proc("scope",3);F.batchId="a2";var J=F.shared,ee=J.current;En(F,z,P.context),P.framebuffer&&P.framebuffer.append(F,z),eG(Object.keys(P.state)).forEach(function(j){var K=P.state[j],k=K.append(F,z);qr(k)?k.forEach(function($,B){z.set(F.next[j],"["+B+"]",$)}):z.set(J.next,"."+j,k)}),Tt(F,z,P,!0,!0),[yf,$v,bf,zv,xf].forEach(function(j){var K=P.draw[j];K&&z.set(J.draw,"."+j,""+K.append(F,z))}),Object.keys(P.uniforms).forEach(function(j){var K=P.uniforms[j].append(F,z);Array.isArray(K)&&(K="["+K.join()+"]"),z.set(J.uniforms,"["+M.id(j)+"]",K)}),Object.keys(P.attributes).forEach(function(j){var K=P.attributes[j].append(F,z),k=F.scopeAttrib(j);Object.keys(new Q).forEach(function($){z.set(k,"."+$,K[$])})}),P.scopeVAO&&z.set(J.vao,".targetVAO",P.scopeVAO.append(F,z));function Z(j){var K=P.shader[j];K&&z.set(J.shader,"."+j,K.append(F,z))}Z(Pg),Z(Mg),Object.keys(P.state).length>0&&(z(ee,".dirty=true;"),z.exit(ee,".dirty=true;")),z("a1(",F.shared.context,",a0,",F.batchId,");")}function re(F){if(!(typeof F!="object"||qr(F))){for(var P=Object.keys(F),z=0;z<P.length;++z)if(Wn.isDynamic(F[P[z]]))return!0;return!1}}function Ke(F,P,z){var J=P.static[z];if(!J||!re(J))return;var ee=F.global,Z=Object.keys(J),j=!1,K=!1,k=!1,$=F.global.def("{}");Z.forEach(function(Y){var te=J[Y];if(Wn.isDynamic(te)){typeof te=="function"&&(te=J[Y]=Wn.unbox(te));var me=Pa(te,null);j=j||me.thisDep,k=k||me.propDep,K=K||me.contextDep}else{switch(ee($,".",Y,"="),typeof te){case"number":ee(te);break;case"string":ee('"',te,'"');break;case"object":Array.isArray(te)&&ee("[",te.join(),"]");break;default:ee(F.link(te));break}ee(";")}});function B(Y,te){Z.forEach(function(me){var Ee=J[me];if(Wn.isDynamic(Ee)){var fe=Y.invoke(te,Ee);te($,".",me,"=",fe,";")}})}P.dynamic[z]=new Wn.DynamicVariable(Uv,{thisDep:j,contextDep:K,propDep:k,ref:$,append:B}),delete P.static[z]}function kt(F,P,z,J,ee){var Z=gt();Z.stats=Z.link(ee),Object.keys(P.static).forEach(function(K){Ke(Z,P,K)}),ppe.forEach(function(K){Ke(Z,F,K)});var j=sn(F,P,z,J,Z);return Yr(Z,j),se(Z,j),G(Z,j),e(Z.compile(),{destroy:function(){j.shader.program.destroy()}})}return{next:Xe,current:ye,procs:function(){var F=gt(),P=F.proc("poll"),z=F.proc("refresh"),J=F.block();P(J),z(J);var ee=F.shared,Z=ee.gl,j=ee.next,K=ee.current;J(K,".dirty=false;"),vn(F,P),vn(F,z,null,!0);var k;Re&&(k=F.link(Re)),V.oes_vertex_array_object&&z(F.link(V.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var $=0;$<oe.maxAttributes;++$){var B=z.def(ee.attributes,"[",$,"]"),Y=F.cond(B,".buffer");Y.then(Z,".enableVertexAttribArray(",$,");",Z,".bindBuffer(",oh,",",B,".buffer.buffer);",Z,".vertexAttribPointer(",$,",",B,".size,",B,".type,",B,".normalized,",B,".stride,",B,".offset);").else(Z,".disableVertexAttribArray(",$,");",Z,".vertexAttrib4f(",$,",",B,".x,",B,".y,",B,".z,",B,".w);",B,".buffer=null;"),z(Y),Re&&z(k,".vertexAttribDivisorANGLE(",$,",",B,".divisor);")}return z(F.shared.vao,".currentVAO=null;",F.shared.vao,".setVAO(",F.shared.vao,".targetVAO);"),Object.keys(ke).forEach(function(te){var me=ke[te],Ee=J.def(j,".",te),fe=F.block();fe("if(",Ee,"){",Z,".enable(",me,")}else{",Z,".disable(",me,")}",K,".",te,"=",Ee,";"),z(fe),P("if(",Ee,"!==",K,".",te,"){",fe,"}")}),Object.keys(xe).forEach(function(te){var me=xe[te],Ee=ye[te],fe,Ie,it=F.block();if(it(Z,".",me,"("),qr(Ee)){var Ct=Ee.length;fe=F.global.def(j,".",te),Ie=F.global.def(K,".",te),it(Ra(Ct,function(Je){return fe+"["+Je+"]"}),");",Ra(Ct,function(Je){return Ie+"["+Je+"]="+fe+"["+Je+"];"}).join("")),P("if(",Ra(Ct,function(Je){return fe+"["+Je+"]!=="+Ie+"["+Je+"]"}).join("||"),"){",it,"}")}else fe=J.def(j,".",te),Ie=J.def(K,".",te),it(fe,");",K,".",te,"=",fe,";"),P("if(",fe,"!==",Ie,"){",it,"}");z(it)}),F.compile()}(),compile:kt}}function Lpe(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Ope=34918,Bpe=34919,rG=35007,Dpe=function(C,M){if(!M.ext_disjoint_timer_query)return null;var V=[];function oe(){return V.pop()||M.ext_disjoint_timer_query.createQueryEXT()}function _e(Re){V.push(Re)}var ae=[];function ue(Re){var He=oe();M.ext_disjoint_timer_query.beginQueryEXT(rG,He),ae.push(He),Te(ae.length-1,ae.length,Re)}function Ae(){M.ext_disjoint_timer_query.endQueryEXT(rG)}function Ce(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Me=[];function we(){return Me.pop()||new Ce}function Be(Re){Me.push(Re)}var Ve=[];function Te(Re,He,ye){var Xe=we();Xe.startQueryIndex=Re,Xe.endQueryIndex=He,Xe.sum=0,Xe.stats=ye,Ve.push(Xe)}var De=[],Q=[];function de(){var Re,He,ye=ae.length;if(ye!==0){Q.length=Math.max(Q.length,ye+1),De.length=Math.max(De.length,ye+1),De[0]=0,Q[0]=0;var Xe=0;for(Re=0,He=0;He<ae.length;++He){var Ne=ae[He];M.ext_disjoint_timer_query.getQueryObjectEXT(Ne,Bpe)?(Xe+=M.ext_disjoint_timer_query.getQueryObjectEXT(Ne,Ope),_e(Ne)):ae[Re++]=Ne,De[He+1]=Xe,Q[He+1]=Re}for(ae.length=Re,Re=0,He=0;He<Ve.length;++He){var ke=Ve[He],xe=ke.startQueryIndex,Ge=ke.endQueryIndex;ke.sum+=De[Ge]-De[xe];var lt=Q[xe],yt=Q[Ge];yt===lt?(ke.stats.gpuTime+=ke.sum/1e6,Be(ke)):(ke.startQueryIndex=lt,ke.endQueryIndex=yt,Ve[Re++]=ke)}Ve.length=Re}}return{beginQuery:ue,endQuery:Ae,pushScopeStats:Te,update:de,getNumPendingQueries:function(){return ae.length},clear:function(){V.push.apply(V,ae);for(var Re=0;Re<V.length;Re++)M.ext_disjoint_timer_query.deleteQueryEXT(V[Re]);ae.length=0,V.length=0},restore:function(){ae.length=0,V.length=0}}},Fpe=16384,kpe=256,Gpe=1024,Upe=34962,nG="webglcontextlost",iG="webglcontextrestored",aG=1,Vpe=2,$pe=3;function oG(C,M){for(var V=0;V<C.length;++V)if(C[V]===M)return V;return-1}function zpe(C){var M=pf(C);if(!M)return null;var V=M.gl,oe=V.getContextAttributes(),_e=V.isContextLost(),ae=H1(V,M);if(!ae)return null;var ue=$1(),Ae=Lpe(),Ce=ae.extensions,Me=Dpe(V,Ce),we=du(),Be=V.drawingBufferWidth,Ve=V.drawingBufferHeight,Te={tick:0,time:0,viewportWidth:Be,viewportHeight:Ve,framebufferWidth:Be,framebufferHeight:Ve,drawingBufferWidth:Be,drawingBufferHeight:Ve,pixelRatio:M.pixelRatio},De={},Q={elements:null,primitive:4,count:-1,offset:0,instances:-1},de=wde(V,Ce),Re=jde(V,Ae,M,ye),He=rpe(V,Ce,de,Ae,Re);function ye(ct){return He.destroyBuffer(ct)}var Xe=rfe(V,Ce,Re,Ae),Ne=ope(V,ue,Ae,M),ke=Lfe(V,Ce,de,function(){lt.procs.poll()},Te,Ae,M),xe=Ofe(V,Ce,de,Ae,M),Ge=epe(V,Ce,de,ke,xe,Ae),lt=Mpe(V,ue,Ce,de,Re,Xe,ke,Ge,De,He,Ne,Q,Te,Me,M),yt=cpe(V,Ge,lt.procs.poll,Te,oe,Ce,de),$e=lt.next,Le=V.canvas,ve=[],gt=[],At=[],Ye=[M.onDestroy],Ft=null;function xt(){if(ve.length===0){Me&&Me.update(),Ft=null;return}Ft=tc.next(xt),ai();for(var ct=ve.length-1;ct>=0;--ct){var Gt=ve[ct];Gt&&Gt(Te,null,0)}V.flush(),Me&&Me.update()}function Mt(){!Ft&&ve.length>0&&(Ft=tc.next(xt))}function Zt(){Ft&&(tc.cancel(xt),Ft=null)}function on(ct){ct.preventDefault(),_e=!0,Zt(),gt.forEach(function(Gt){Gt()})}function Ln(ct){V.getError(),_e=!1,ae.restore(),Ne.restore(),Re.restore(),ke.restore(),xe.restore(),Ge.restore(),He.restore(),Me&&Me.restore(),lt.procs.refresh(),Mt(),At.forEach(function(Gt){Gt()})}Le&&(Le.addEventListener(nG,on,!1),Le.addEventListener(iG,Ln,!1));function Ut(){ve.length=0,Zt(),Le&&(Le.removeEventListener(nG,on),Le.removeEventListener(iG,Ln)),Ne.clear(),Ge.clear(),xe.clear(),ke.clear(),Xe.clear(),Re.clear(),He.clear(),Me&&Me.clear(),Ye.forEach(function(ct){ct()})}function _n(ct){D(!!ct,"invalid args to regl({...})"),D.type(ct,"object","invalid args to regl({...})");function Gt(ee){var Z=e({},ee);delete Z.uniforms,delete Z.attributes,delete Z.context,delete Z.vao,"stencil"in Z&&Z.stencil.op&&(Z.stencil.opBack=Z.stencil.opFront=Z.stencil.op,delete Z.stencil.op);function j(K){if(K in Z){var k=Z[K];delete Z[K],Object.keys(k).forEach(function($){Z[K+"."+$]=k[$]})}}return j("blend"),j("depth"),j("cull"),j("stencil"),j("polygonOffset"),j("scissor"),j("sample"),"vao"in ee&&(Z.vao=ee.vao),Z}function $t(ee,Z){var j={},K={};return Object.keys(ee).forEach(function(k){var $=ee[k];if(Wn.isDynamic($)){K[k]=Wn.unbox($,k);return}else if(Z&&Array.isArray($)){for(var B=0;B<$.length;++B)if(Wn.isDynamic($[B])){K[k]=Wn.unbox($,k);return}}j[k]=$}),{dynamic:K,static:j}}var Yr=$t(ct.context||{},!0),il=$t(ct.uniforms||{},!0),Nf=$t(ct.attributes||{},!1),G=$t(Gt(ct),!1),se={gpuTime:0,cpuTime:0,count:0},re=lt.compile(G,Nf,il,Yr,se),Ke=re.draw,kt=re.batch,F=re.scope,P=[];function z(ee){for(;P.length<ee;)P.push(null);return P}function J(ee,Z){var j;if(_e&&D.raise("context lost"),typeof ee=="function")return F.call(this,null,ee,0);if(typeof Z=="function")if(typeof ee=="number")for(j=0;j<ee;++j)F.call(this,null,Z,j);else if(Array.isArray(ee))for(j=0;j<ee.length;++j)F.call(this,ee[j],Z,j);else return F.call(this,ee,Z,0);else if(typeof ee=="number"){if(ee>0)return kt.call(this,z(ee|0),ee|0)}else if(Array.isArray(ee)){if(ee.length)return kt.call(this,ee,ee.length)}else return Ke.call(this,ee)}return e(J,{stats:se,destroy:function(){re.destroy()}})}var Er=Ge.setFBO=_n({framebuffer:Wn.define.call(null,aG,"framebuffer")});function sn(ct,Gt){var $t=0;lt.procs.poll();var Yr=Gt.color;Yr&&(V.clearColor(+Yr[0]||0,+Yr[1]||0,+Yr[2]||0,+Yr[3]||0),$t|=Fpe),"depth"in Gt&&(V.clearDepth(+Gt.depth),$t|=kpe),"stencil"in Gt&&(V.clearStencil(Gt.stencil|0),$t|=Gpe),D(!!$t,"called regl.clear with no buffer specified"),V.clear($t)}function En(ct){if(D(typeof ct=="object"&&ct,"regl.clear() takes an object as input"),"framebuffer"in ct)if(ct.framebuffer&&ct.framebuffer_reglType==="framebufferCube")for(var Gt=0;Gt<6;++Gt)Er(e({framebuffer:ct.framebuffer.faces[Gt]},ct),sn);else Er(ct,sn);else sn(null,ct)}function vn(ct){D.type(ct,"function","regl.frame() callback must be a function"),ve.push(ct);function Gt(){var $t=oG(ve,ct);D($t>=0,"cannot cancel a frame twice");function Yr(){var il=oG(ve,Yr);ve[il]=ve[ve.length-1],ve.length-=1,ve.length<=0&&Zt()}ve[$t]=Yr}return Mt(),{cancel:Gt}}function Zn(){var ct=$e.viewport,Gt=$e.scissor_box;ct[0]=ct[1]=Gt[0]=Gt[1]=0,Te.viewportWidth=Te.framebufferWidth=Te.drawingBufferWidth=ct[2]=Gt[2]=V.drawingBufferWidth,Te.viewportHeight=Te.framebufferHeight=Te.drawingBufferHeight=ct[3]=Gt[3]=V.drawingBufferHeight}function ai(){Te.tick+=1,Te.time=Tt(),Zn(),lt.procs.poll()}function Kr(){ke.refresh(),Zn(),lt.procs.refresh(),Me&&Me.update()}function Tt(){return(du()-we)/1e3}Kr();function oi(ct,Gt){D.type(Gt,"function","listener callback must be a function");var $t;switch(ct){case"frame":return vn(Gt);case"lost":$t=gt;break;case"restore":$t=At;break;case"destroy":$t=Ye;break;default:D.raise("invalid event, must be one of frame,lost,restore,destroy")}return $t.push(Gt),{cancel:function(){for(var Yr=0;Yr<$t.length;++Yr)if($t[Yr]===Gt){$t[Yr]=$t[$t.length-1],$t.pop();return}}}}var Yt=e(_n,{clear:En,prop:Wn.define.bind(null,aG),context:Wn.define.bind(null,Vpe),this:Wn.define.bind(null,$pe),draw:_n({}),buffer:function(ct){return Re.create(ct,Upe,!1,!1)},elements:function(ct){return Xe.create(ct,!1)},texture:ke.create2D,cube:ke.createCube,renderbuffer:xe.create,framebuffer:Ge.create,framebufferCube:Ge.createCube,vao:He.createVAO,attributes:oe,frame:vn,on:oi,limits:de,hasExtension:function(ct){return de.extensions.indexOf(ct.toLowerCase())>=0},read:yt,destroy:Ut,_gl:V,_refresh:Kr,poll:function(){ai(),Me&&Me.update()},now:Tt,stats:Ae});return M.onDone(null,Yt),Yt}return zpe})});var wW=Ze((xpt,CW)=>{CW.exports=z6e;function z6e(t){t=typeof t!="undefined"?t:1,Array.isArray(t)||(t=[t,t]);var e=[[-t[0],-t[1],0],[t[0],-t[1],0],[t[0],t[1],0],[-t[0],t[1],0]],n=[[0,1,2],[2,3,0]],i=[[0,0],[1,0],[1,1],[0,1]],a=[0,0,-1],o=[a.slice(),a.slice(),a.slice(),a.slice()];return{positions:e,cells:n,uvs:i,normals:o}}});var OW=Ze((bpt,LW)=>{LW.exports={rgb2hsl:S2,rgb2hsv:j5,rgb2hwb:N2,rgb2cmyk:A2,rgb2keyword:T2,rgb2xyz:FT,rgb2lab:kT,rgb2lch:j6e,hsl2rgb:H5,hsl2hsv:H6e,hsl2hwb:W6e,hsl2cmyk:Z6e,hsl2keyword:X6e,hsv2rgb:W5,hsv2hsl:q6e,hsv2hwb:K6e,hsv2cmyk:Y6e,hsv2keyword:J6e,hwb2rgb:C2,hwb2hsl:Q6e,hwb2hsv:eve,hwb2cmyk:tve,hwb2keyword:rve,cmyk2rgb:w2,cmyk2hsl:nve,cmyk2hsv:ive,cmyk2hwb:ave,cmyk2keyword:ove,keyword2rgb:_p,keyword2hsl:uve,keyword2hsv:dve,keyword2hwb:fve,keyword2cmyk:pve,keyword2lab:hve,keyword2xyz:mve,xyz2rgb:IW,xyz2lab:RW,xyz2lch:sve,lab2xyz:GT,lab2rgb:PW,lab2lch:UT,lch2lab:VT,lch2xyz:lve,lch2rgb:cve};function S2(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,a=Math.min(e,n,i),o=Math.max(e,n,i),s=o-a,l,c,u;return o==a?l=0:e==o?l=(n-i)/s:n==o?l=2+(i-e)/s:i==o&&(l=4+(e-n)/s),l=Math.min(l*60,360),l<0&&(l+=360),u=(a+o)/2,o==a?c=0:u<=.5?c=s/(o+a):c=s/(2-o-a),[l,c*100,u*100]}function j5(t){var e=t[0],n=t[1],i=t[2],a=Math.min(e,n,i),o=Math.max(e,n,i),s=o-a,l,c,u;return o==0?c=0:c=s/o*1e3/10,o==a?l=0:e==o?l=(n-i)/s:n==o?l=2+(i-e)/s:i==o&&(l=4+(e-n)/s),l=Math.min(l*60,360),l<0&&(l+=360),u=o/255*1e3/10,[l,c,u]}function N2(t){var e=t[0],n=t[1],o=t[2],i=S2(t)[0],a=1/255*Math.min(e,Math.min(n,o)),o=1-1/255*Math.max(e,Math.max(n,o));return[i,a*100,o*100]}function A2(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,a,o,s,l;return l=Math.min(1-e,1-n,1-i),a=(1-e-l)/(1-l)||0,o=(1-n-l)/(1-l)||0,s=(1-i-l)/(1-l)||0,[a*100,o*100,s*100,l*100]}function T2(t){return MW[JSON.stringify(t)]}function FT(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var a=e*.4124+n*.3576+i*.1805,o=e*.2126+n*.7152+i*.0722,s=e*.0193+n*.1192+i*.9505;return[a*100,o*100,s*100]}function kT(t){var e=FT(t),n=e[0],i=e[1],a=e[2],o,s,l;return n/=95.047,i/=100,a/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,o=116*i-16,s=500*(n-i),l=200*(i-a),[o,s,l]}function j6e(t){return UT(kT(t))}function H5(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,a,o,s,l,c;if(n==0)return c=i*255,[c,c,c];i<.5?o=i*(1+n):o=i+n-i*n,a=2*i-o,l=[0,0,0];for(var u=0;u<3;u++)s=e+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?c=a+(o-a)*6*s:2*s<1?c=o:3*s<2?c=a+(o-a)*(2/3-s)*6:c=a,l[u]=c*255;return l}function H6e(t){var e=t[0],n=t[1]/100,i=t[2]/100,a,o;return i===0?[0,0,0]:(i*=2,n*=i<=1?i:2-i,o=(i+n)/2,a=2*n/(i+n),[e,a*100,o*100])}function W6e(t){return N2(H5(t))}function Z6e(t){return A2(H5(t))}function X6e(t){return T2(H5(t))}function W5(t){var e=t[0]/60,n=t[1]/100,c=t[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*c*(1-n),s=255*c*(1-n*a),l=255*c*(1-n*(1-a)),c=255*c;switch(i){case 0:return[c,l,o];case 1:return[s,c,o];case 2:return[o,c,l];case 3:return[o,s,c];case 4:return[l,o,c];case 5:return[c,o,s]}}function q6e(t){var e=t[0],n=t[1]/100,i=t[2]/100,a,o;return o=(2-n)*i,a=n*i,a/=o<=1?o:2-o,a=a||0,o/=2,[e,a*100,o*100]}function K6e(t){return N2(W5(t))}function Y6e(t){return A2(W5(t))}function J6e(t){return T2(W5(t))}function C2(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,a=n+i,o,s,l,c;switch(a>1&&(n/=a,i/=a),o=Math.floor(6*e),s=1-i,l=6*e-o,o&1&&(l=1-l),c=n+l*(s-n),o){default:case 6:case 0:r=s,g=c,b=n;break;case 1:r=c,g=s,b=n;break;case 2:r=n,g=s,b=c;break;case 3:r=n,g=c,b=s;break;case 4:r=c,g=n,b=s;break;case 5:r=s,g=n,b=c;break}return[r*255,g*255,b*255]}function Q6e(t){return S2(C2(t))}function eve(t){return j5(C2(t))}function tve(t){return A2(C2(t))}function rve(t){return T2(C2(t))}function w2(t){var e=t[0]/100,n=t[1]/100,i=t[2]/100,a=t[3]/100,o,s,l;return o=1-Math.min(1,e*(1-a)+a),s=1-Math.min(1,n*(1-a)+a),l=1-Math.min(1,i*(1-a)+a),[o*255,s*255,l*255]}function nve(t){return S2(w2(t))}function ive(t){return j5(w2(t))}function ave(t){return N2(w2(t))}function ove(t){return T2(w2(t))}function IW(t){var e=t[0]/100,n=t[1]/100,i=t[2]/100,a,o,s;return a=e*3.2406+n*-1.5372+i*-.4986,o=e*-.9689+n*1.8758+i*.0415,s=e*.0557+n*-.204+i*1.057,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[a*255,o*255,s*255]}function RW(t){var e=t[0],n=t[1],i=t[2],a,o,s;return e/=95.047,n/=100,i/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,a=116*n-16,o=500*(e-n),s=200*(n-i),[a,o,s]}function sve(t){return UT(RW(t))}function GT(t){var e=t[0],n=t[1],i=t[2],a,o,s,l;return e<=8?(o=e*100/903.3,l=7.787*(o/100)+16/116):(o=100*Math.pow((e+16)/116,3),l=Math.pow(o/100,1/3)),a=a/95.047<=.008856?a=95.047*(n/500+l-16/116)/7.787:95.047*Math.pow(n/500+l,3),s=s/108.883<=.008859?s=108.883*(l-i/200-16/116)/7.787:108.883*Math.pow(l-i/200,3),[a,o,s]}function UT(t){var e=t[0],n=t[1],i=t[2],a,o,s;return a=Math.atan2(i,n),o=a*360/2/Math.PI,o<0&&(o+=360),s=Math.sqrt(n*n+i*i),[e,s,o]}function PW(t){return IW(GT(t))}function VT(t){var e=t[0],n=t[1],i=t[2],a,o,s;return s=i/360*2*Math.PI,a=n*Math.cos(s),o=n*Math.sin(s),[e,a,o]}function lve(t){return GT(VT(t))}function cve(t){return PW(VT(t))}function _p(t){return DT[t]}function uve(t){return S2(_p(t))}function dve(t){return j5(_p(t))}function fve(t){return N2(_p(t))}function pve(t){return A2(_p(t))}function hve(t){return kT(_p(t))}function mve(t){return FT(_p(t))}var DT={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},MW={};for(BT in DT)MW[JSON.stringify(DT[BT])]=BT;var BT});var FW=Ze((Spt,DW)=>{var $T=OW(),Ep=function(){return new I2};for(e0 in $T)Ep[e0+"Raw"]=function(t){return function(e){return typeof e=="number"&&(e=Array.prototype.slice.call(arguments)),$T[t](e)}}(e0),zT=/(\w+)2(\w+)/.exec(e0),Z5=zT[1],BW=zT[2],Ep[Z5]=Ep[Z5]||{},Ep[Z5][BW]=Ep[e0]=function(t){return function(e){typeof e=="number"&&(e=Array.prototype.slice.call(arguments));var n=$T[t](e);if(typeof n=="string"||n===void 0)return n;for(var i=0;i<n.length;i++)n[i]=Math.round(n[i]);return n}}(e0);var zT,Z5,BW,e0,I2=function(){this.convs={}};I2.prototype.routeSpace=function(t,e){var n=e[0];return n===void 0?this.getValues(t):(typeof n=="number"&&(n=Array.prototype.slice.call(e)),this.setValues(t,n))};I2.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this};I2.prototype.getValues=function(t){var e=this.convs[t];if(!e){var n=this.space,i=this.convs[n];e=Ep[n][t](i),this.convs[t]=e}return e};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){I2.prototype[t]=function(e){return this.routeSpace(t,arguments)}});DW.exports=Ep});var GW=Ze((Npt,kW)=>{var jT=FW();kW.exports=function(t){var e,n,i,a;if(e=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(t)){var o=e[1],s=o.replace(/a$/,""),l=s==="cmyk"?4:3;n=jT[s],i=e[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(u,d){return/%$/.test(u)&&d===l?parseFloat(u)/100:(/%$/.test(u),parseFloat(u))}),o===s&&i.push(1),a=i[l]===void 0?1:i[l],i=i.slice(0,l),n[s]=function(){return i}}else if(/^#[A-Fa-f0-9]+$/.test(t)){var s=t.replace(/^#/,""),l=s.length;n=jT.rgb,i=s.split(l===3?/(.)/:/(..)/),i=i.filter(Boolean).map(function(f){return parseInt(l===3?f+f:f,16)}),a=1,n.rgb=function(){return i},i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0)}else n=jT.keyword,n.keyword=function(){return t},i=t,a=1;var c={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{c.rgb=n.rgb(i)}catch(u){}try{c.hsl=n.hsl(i)}catch(u){}try{c.hsv=n.hsv(i)}catch(u){}try{c.cmyk=n.cmyk(i)}catch(u){}try{c.keyword=n.keyword(i)}catch(u){}return c.rgb&&(c.hex="#"+c.rgb.map(function(u){var d=u.toString(16);return d.length===1?"0"+d:d}).join("")),c.rgb&&(c.rgba=c.rgb.concat(a)),c.hsl&&(c.hsla=c.hsl.concat(a)),c.hsv&&(c.hsva=c.hsv.concat(a)),c.cmyk&&(c.cmyka=c.cmyk.concat(a)),c}});var zW=Ze((Apt,$W)=>{var gve=TW(),_ve=wW(),Eve=GW(),UW=Yh();$W.exports=vve;function vve(t){if(t=t||{},!t.gl)throw new Error('Must specify { context: "webgl" } in sketch settings, or a WebGL-enabled canvas');var e=t.gl,n={gl:e};typeof t.extensions!="undefined"&&(n.extensions=t.extensions),typeof t.optionalExtensions!="undefined"&&(n.optionalExtensions=t.optionalExtensions),typeof t.profile!="undefined"&&(n.profile=t.profile),typeof t.onDone!="undefined"&&(n.onDone=t.onDone);var i=gve(n),a=_ve(),o=new Map,s=t.uniforms||{},l=Object.assign({},s);Object.keys(s).forEach(function(E){var v=s[E];typeof v=="function"?l[E]=function(y,x,S){var N=v.call(s,x,S);if(VW(N))if(o.has(v)){var w=o.get(v);w(N),N=w}else{var T=i.texture(N);o.set(v,T),N=T}return N}:VW(v)?l[E]=i.texture(v):l[E]=v});var c;try{c=m()}catch(E){_(E)}var u=UW(t.clearColor,"black");if(typeof u=="string"){var d=Eve(u);if(!d.rgb)throw new Error('Error parsing { clearColor } color string "'+u+'"');u=d.rgb.slice(0,3).map(function(E){return E/255})}else if(u&&(!Array.isArray(u)||u.length<3))throw new Error("Error with { clearColor } option, must be a string or [ r, g, b ] float array");var f=UW(t.clearAlpha,1),p=u?u.concat([f||0]):!1;return{render:function(E){i.poll(),p&&i.clear({color:p,depth:1,stencil:0}),h(E),e.flush()},regl:i,drawQuad:h,unload:function(){o.clear(),i.destroy()}};function h(E){if(E=E||{},c)try{c(E)}catch(v){_(v)&&E==null&&console.warn('Warning: shader.render() is not called with any "props" parameter')}}function m(){return i({scissor:t.scissor?{enable:!0,box:{x:i.prop("scissorX"),y:i.prop("scissorY"),width:i.prop("scissorWidth"),height:i.prop("scissorHeight")}}:!1,uniforms:l,frag:t.frag||["precision highp float;","","void main () {","  gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","}"].join(`
`),vert:t.vert||["precision highp float;","attribute vec3 position;","varying vec2 vUv;","","void main () {","  gl_Position = vec4(position.xyz, 1.0);","  vUv = gl_Position.xy * 0.5 + 0.5;","}"].join(`
`),blend:t.blend!==!1?{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1}}:void 0,attributes:{position:a.positions},elements:a.cells})}function _(E){if(/^\(regl\)/.test(E.message))return!0;throw E}}function VW(t){return t&&!Array.isArray(t)&&typeof t=="object"}});var HT=Ze((Tpt,yve)=>{yve.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}});var HW=Ze((Cpt,jW)=>{jW.exports=xve;function xve(t){var e=t[0],n=t[1],i=t[2],a,o,s,l,c;if(n===0)return c=i,[c,c,c];i<.5?o=i*(1+n):o=i+n-i*n,a=2*i-o,l=[0,0,0];for(var u=0;u<3;u++)s=e+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?c=a+(o-a)*6*s:2*s<1?c=o:3*s<2?c=a+(o-a)*(2/3-s)*6:c=a,l[u]=c;return l}});var ZW=Ze((wpt,WW)=>{WW.exports=bve;function bve(t){var e=t[0],n=t[1],i=t[2],a=Math.min(e,n,i),o=Math.max(e,n,i),s=o-a,l,c,u;return o===a?l=0:e===o?l=(n-i)/s:n===o?l=2+(i-e)/s:i===o&&(l=4+(e-n)/s),l=Math.min(l*60,360),l<0&&(l+=360),u=(a+o)/2,o===a?c=0:u<=.5?c=s/(o+a):c=s/(2-o-a),[l/360,c,u]}});var ZT=Ze((Ipt,WT)=>{var Sve=HW(),Nve=ZW(),Ave=M5();WT.exports.RGBAToHSLA=Tve;function Tve(t){var e=Nve([t[0]/255,t[1]/255,t[2]/255]);return[Math.max(0,Math.min(360,Math.round(e[0]*360))),Math.max(0,Math.min(100,Math.round(e[1]*100))),Math.max(0,Math.min(100,Math.round(e[2]*100))),t[3]]}WT.exports.HSLAToRGBA=Cve;function Cve(t){var e=Ave(t[0],0,360),n=Sve([e/360,t[1]/100,t[2]/100]);return[Math.max(0,Math.min(255,Math.round(n[0]*255))),Math.max(0,Math.min(255,Math.round(n[1]*255))),Math.max(0,Math.min(255,Math.round(n[2]*255))),t[3]]}});var XT=Ze((Rpt,XW)=>{XW.exports=wve;function wve(t){if(typeof t!="string")throw new TypeError("Hex code parsing must be performed on a string parameter");if(t=t.toLowerCase(),!/^#[a-f0-9]+$/.test(t))return null;var e=t.replace(/^#/,""),n=1;e.length===8&&(n=parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),e.length===4&&(n=parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var i=parseInt(e,16),a=i>>16,o=i>>8&255,s=i&255;return[a,o,s,n]}});var qT=Ze((Ppt,qW)=>{qW.exports=Ive;function Ive(t){if(!t||!Array.isArray(t))throw new TypeError("Must specify an array to convert into a hex code");var e=Math.max(0,Math.min(255,Math.round(t[0]||0))),n=Math.max(0,Math.min(255,Math.round(t[1]||0))),i=Math.max(0,Math.min(255,Math.round(t[2]||0))),a=t[3];(typeof a=="undefined"||!isFinite(a))&&(a=1);var o=Math.max(0,Math.min(255,Math.round(a*255))),s=o===255?"":(o|256).toString(16).slice(1),l=(i|n<<8|e<<16|1<<24).toString(16).slice(1)+s;return"#"+l}});var eZ=Ze((Mpt,q5)=>{var KW=HT(),KT=ZT(),Rve=XT(),YW=qT(),QW=M5();function YT(t){if(typeof t!="string")throw new TypeError("Color parsing must be performed on a string parameter");t=t.toLowerCase(),t in KW?t=KW[t]:t==="transparent"&&(t="#00000000");var e,n,i;if(/^#[a-f0-9]+$/.test(t))e=Rve(t),i=YW(e),n=KT.RGBAToHSLA(e);else{var a=/^((?:rgb|hsl)a?)\s*\(([^)]*)\)/.exec(t);if(!a)return null;var o=a[1].replace(/a$/,""),s=a[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(c,u){return u<=2?Math.round(parseFloat(c)||0):(c=parseFloat(c),(typeof c!="number"||!isFinite(c))&&(c=1),c)});(typeof s[3]=="undefined"||!isFinite(s[3]))&&(s[3]=1),o==="rgb"?(n=KT.RGBAToHSLA(s),e=s):o==="hsl"&&(e=KT.HSLAToRGBA(s),s[0]=QW(s[0],0,360),n=s),i=YW(e)}if(!e&&!i&&!n)return null;var l={hex:i,alpha:e[3],rgb:e.slice(0,3),rgba:e,hsl:n.slice(0,3),hsla:n};return l}q5.exports.parse=Pve;function Pve(t){if(typeof t=="string")return YT(t);if(Array.isArray(t)&&t.length>=3){var e=X5(t[0],t[1],t[2],t[3]);return YT(e)}else if(t&&typeof t=="object"){var n;if(t.hex?n=t.hex:t.rgba?n=X5(t.rgba[0],t.rgba[1],t.rgba[2],t.rgba[3]):t.hsla?n=JW(t.hsla[0],t.hsla[1],t.hsla[2],t.hsla[3]):t.rgb?n=X5(t.rgb[0],t.rgb[1],t.rgb[2]):t.hsl&&(n=JW(t.hsl[0],t.hsl[1],t.hsl[2])),n)return YT(n)}return null}q5.exports.style=Mve;function Mve(t){var e=q5.exports.parse(t);if(e){var n=e.rgba;return X5(n[0],n[1],n[2],n[3])}return null}function X5(t,e,n,i){return t=Math.max(0,Math.min(255,Math.round(t))),e=Math.max(0,Math.min(255,Math.round(e))),n=Math.max(0,Math.min(255,Math.round(n))),i===1||!isFinite(i)||typeof i=="undefined"?"rgb("+[t,e,n].join(", ")+")":(i=Math.max(0,Math.min(1,i)),"rgba("+[t,e,n,i].join(", ")+")")}function JW(t,e,n,i){return t=QW(t,0,360),t=Math.max(0,Math.min(360,Math.round(t))),e=Math.max(0,Math.min(100,Math.round(e))),n=Math.max(0,Math.min(100,Math.round(n))),i===1||!isFinite(i)||typeof i=="undefined"?"hsl("+[t,e,n].join(", ")+")":(i=Math.max(0,Math.min(1,i)),"hsla("+[t,e,n,i].join(", ")+")")}});var rZ=Ze((Lpt,tZ)=>{var Lve=.2126,Ove=.7152,Bve=.0722,JT=1/12.92;function QT(t){return Math.pow((t+.055)/1.055,2.4)}tZ.exports=Dve;function Dve(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,a=e<=.03928?e*JT:QT(e),o=n<=.03928?n*JT:QT(n),s=i<=.03928?i*JT:QT(i);return a*Lve+o*Ove+s*Bve}});var aZ=Ze((Opt,Fn)=>{var nZ=eZ(),Fve=HT(),kve=rZ(),iZ=ZT(),Gve=XT(),Uve=qT();Fn.exports.parse=nZ.parse;Fn.exports.style=nZ.style;Fn.exports.names=Fve;Fn.exports.relativeLuminance=function(e){var n=Fn.exports.parse(e);return n?kve(n.rgb):null};Fn.exports.contrastRatio=function(e,n){var i=Fn.exports.relativeLuminance(e),a=Fn.exports.relativeLuminance(n);if(i==null||a==null)return null;var o=Math.max(i,a),s=Math.min(i,a);return(o+.05)/(s+.05)};Fn.exports.offsetHSL=function(t,e,n,i){var a=Fn.exports.parse(t);return a?(a.hsla[0]+=e||0,a.hsla[1]=Math.max(0,Math.min(100,a.hsla[1]+(n||0))),a.hsla[2]=Math.max(0,Math.min(100,a.hsla[2]+(i||0))),Fn.exports.parse({hsla:a.hsla})):null};Fn.exports.blend=function(t,e,n){var i=Fn.exports.parse(t),a=Fn.exports.parse(e);if(i==null||a==null)return null;var o=i.rgba,s=a.rgba;n=typeof n=="number"&&isFinite(n)?n:1;var l=n*s[3];if(l>=1)return a;for(var c=0;c<3;c++)s[c]=s[c]*l+o[c]*(o[3]*(1-l));return s[3]=Math.max(0,Math.min(1,l+o[3]*(1-l))),Fn.exports.parse(s)};Fn.exports.hexToRGBA=Gve;Fn.exports.RGBAToHex=Uve;Fn.exports.RGBAToHSLA=iZ.RGBAToHSLA;Fn.exports.HSLAToRGBA=iZ.HSLAToRGBA});var sZ=Ze((Bpt,oZ)=>{oZ.exports={random:tH(),math:uH(),penplot:AW(),geometry:RT(),shader:zW(),color:aZ()}});var cX=Ze((Lht,EC)=>{"use strict";EC.exports=d9;EC.exports.default=d9;function d9(t,e,n){n=n||2;var i=e&&e.length,a=i?e[0]*n:t.length,o=oX(t,0,a,n,!0),s=[];if(!o||o.next===o.prev)return s;var l,c,u,d,f,p,h;if(i&&(o=W4e(t,e,o,n)),t.length>80*n){l=u=t[0],c=d=t[1];for(var m=n;m<a;m+=n)f=t[m],p=t[m+1],f<l&&(l=f),p<c&&(c=p),f>u&&(u=f),p>d&&(d=p);h=Math.max(u-l,d-c),h=h!==0?32767/h:0}return X2(o,s,n,l,c,h,0),s}function oX(t,e,n,i,a){var o,s;if(a===_C(t,e,n,i)>0)for(o=e;o<n;o+=i)s=aX(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=aX(o,t[o],t[o+1],s);return s&&f9(s,s.next)&&(K2(s),s=s.next),s}function Np(t,e){if(!t)return t;e||(e=t);var n=t,i;do if(i=!1,!n.steiner&&(f9(n,n.next)||Qr(n.prev,n,n.next)===0)){if(K2(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function X2(t,e,n,i,a,o,s){if(t){!s&&o&&Y4e(t,i,a,o);for(var l=t,c,u;t.prev!==t.next;){if(c=t.prev,u=t.next,o?z4e(t,i,a,o):$4e(t)){e.push(c.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),K2(t),t=u.next,l=u.next;continue}if(t=u,t===l){s?s===1?(t=j4e(Np(t),e,n),X2(t,e,n,i,a,o,2)):s===2&&H4e(t,e,n,i,a,o):X2(Np(t),e,n,i,a,o,1);break}}}}function $4e(t){var e=t.prev,n=t,i=t.next;if(Qr(e,n,i)>=0)return!1;for(var a=e.x,o=n.x,s=i.x,l=e.y,c=n.y,u=i.y,d=a<o?a<s?a:s:o<s?o:s,f=l<c?l<u?l:u:c<u?c:u,p=a>o?a>s?a:s:o>s?o:s,h=l>c?l>u?l:u:c>u?c:u,m=i.next;m!==e;){if(m.x>=d&&m.x<=p&&m.y>=f&&m.y<=h&&c0(a,l,o,c,s,u,m.x,m.y)&&Qr(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function z4e(t,e,n,i){var a=t.prev,o=t,s=t.next;if(Qr(a,o,s)>=0)return!1;for(var l=a.x,c=o.x,u=s.x,d=a.y,f=o.y,p=s.y,h=l<c?l<u?l:u:c<u?c:u,m=d<f?d<p?d:p:f<p?f:p,_=l>c?l>u?l:u:c>u?c:u,E=d>f?d>p?d:p:f>p?f:p,v=mC(h,m,e,n,i),y=mC(_,E,e,n,i),x=t.prevZ,S=t.nextZ;x&&x.z>=v&&S&&S.z<=y;){if(x.x>=h&&x.x<=_&&x.y>=m&&x.y<=E&&x!==a&&x!==s&&c0(l,d,c,f,u,p,x.x,x.y)&&Qr(x.prev,x,x.next)>=0||(x=x.prevZ,S.x>=h&&S.x<=_&&S.y>=m&&S.y<=E&&S!==a&&S!==s&&c0(l,d,c,f,u,p,S.x,S.y)&&Qr(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;x&&x.z>=v;){if(x.x>=h&&x.x<=_&&x.y>=m&&x.y<=E&&x!==a&&x!==s&&c0(l,d,c,f,u,p,x.x,x.y)&&Qr(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;S&&S.z<=y;){if(S.x>=h&&S.x<=_&&S.y>=m&&S.y<=E&&S!==a&&S!==s&&c0(l,d,c,f,u,p,S.x,S.y)&&Qr(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function j4e(t,e,n){var i=t;do{var a=i.prev,o=i.next.next;!f9(a,o)&&sX(a,i,i.next,o)&&q2(a,o)&&q2(o,a)&&(e.push(a.i/n|0),e.push(i.i/n|0),e.push(o.i/n|0),K2(i),K2(i.next),i=t=o),i=i.next}while(i!==t);return Np(i)}function H4e(t,e,n,i,a,o){var s=t;do{for(var l=s.next.next;l!==s.prev;){if(s.i!==l.i&&e5e(s,l)){var c=lX(s,l);s=Np(s,s.next),c=Np(c,c.next),X2(s,e,n,i,a,o,0),X2(c,e,n,i,a,o,0);return}l=l.next}s=s.next}while(s!==t)}function W4e(t,e,n,i){var a=[],o,s,l,c,u;for(o=0,s=e.length;o<s;o++)l=e[o]*i,c=o<s-1?e[o+1]*i:t.length,u=oX(t,l,c,i,!1),u===u.next&&(u.steiner=!0),a.push(Q4e(u));for(a.sort(Z4e),o=0;o<a.length;o++)n=X4e(a[o],n);return n}function Z4e(t,e){return t.x-e.x}function X4e(t,e){var n=q4e(t,e);if(!n)return e;var i=lX(n,t);return Np(i,i.next),Np(n,n.next)}function q4e(t,e){var n=e,i=t.x,a=t.y,o=-1/0,s;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var l=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=i&&l>o&&(o=l,s=n.x<n.next.x?n:n.next,l===i))return s}n=n.next}while(n!==e);if(!s)return null;var c=s,u=s.x,d=s.y,f=1/0,p;n=s;do i>=n.x&&n.x>=u&&i!==n.x&&c0(a<d?i:o,a,u,d,a<d?o:i,a,n.x,n.y)&&(p=Math.abs(a-n.y)/(i-n.x),q2(n,t)&&(p<f||p===f&&(n.x>s.x||n.x===s.x&&K4e(s,n)))&&(s=n,f=p)),n=n.next;while(n!==c);return s}function K4e(t,e){return Qr(t.prev,t,e.prev)<0&&Qr(e.next,t,t.next)<0}function Y4e(t,e,n,i){var a=t;do a.z===0&&(a.z=mC(a.x,a.y,e,n,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,J4e(a)}function J4e(t){var e,n,i,a,o,s,l,c,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,l=0,e=0;e<u&&(l++,i=i.nextZ,!!i);e++);for(c=u;l>0||c>0&&i;)l!==0&&(c===0||!i||n.z<=i.z)?(a=n,n=n.nextZ,l--):(a=i,i=i.nextZ,c--),o?o.nextZ=a:t=a,a.prevZ=o,o=a;n=i}o.nextZ=null,u*=2}while(s>1);return t}function mC(t,e,n,i,a){return t=(t-n)*a|0,e=(e-i)*a|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Q4e(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function c0(t,e,n,i,a,o,s,l){return(a-s)*(e-l)>=(t-s)*(o-l)&&(t-s)*(i-l)>=(n-s)*(e-l)&&(n-s)*(o-l)>=(a-s)*(i-l)}function e5e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!t5e(t,e)&&(q2(t,e)&&q2(e,t)&&r5e(t,e)&&(Qr(t.prev,t,e.prev)||Qr(t,e.prev,e))||f9(t,e)&&Qr(t.prev,t,t.next)>0&&Qr(e.prev,e,e.next)>0)}function Qr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function f9(t,e){return t.x===e.x&&t.y===e.y}function sX(t,e,n,i){var a=u9(Qr(t,e,n)),o=u9(Qr(t,e,i)),s=u9(Qr(n,i,t)),l=u9(Qr(n,i,e));return!!(a!==o&&s!==l||a===0&&c9(t,n,e)||o===0&&c9(t,i,e)||s===0&&c9(n,t,i)||l===0&&c9(n,e,i))}function c9(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function u9(t){return t>0?1:t<0?-1:0}function t5e(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&sX(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function q2(t,e){return Qr(t.prev,t,t.next)<0?Qr(t,e,t.next)>=0&&Qr(t,t.prev,e)>=0:Qr(t,e,t.prev)<0||Qr(t,t.next,e)<0}function r5e(t,e){var n=t,i=!1,a=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&a<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function lX(t,e){var n=new gC(t.i,t.x,t.y),i=new gC(e.i,e.x,e.y),a=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=a,a.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function aX(t,e,n,i){var a=new gC(t,e,n);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function K2(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function gC(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}d9.deviation=function(t,e,n,i){var a=e&&e.length,o=a?e[0]*n:t.length,s=Math.abs(_C(t,0,o,n));if(a)for(var l=0,c=e.length;l<c;l++){var u=e[l]*n,d=l<c-1?e[l+1]*n:t.length;s-=Math.abs(_C(t,u,d,n))}var f=0;for(l=0;l<i.length;l+=3){var p=i[l]*n,h=i[l+1]*n,m=i[l+2]*n;f+=Math.abs((t[p]-t[m])*(t[h+1]-t[p+1])-(t[p]-t[h])*(t[m+1]-t[p+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function _C(t,e,n,i){for(var a=0,o=e,s=n-i;o<n;o+=i)a+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return a}d9.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,a=0;a<t.length;a++){for(var o=0;o<t[a].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[a][o][s]);a>0&&(i+=t[a-1].length,n.holes.push(i))}return n}});var ZJ=Ze((myt,WJ)=>{"use strict";var dn={};WJ.exports=dn;function HJ(t){return t<0?-1:1}function XSe(t){return t%1===.5&&!(t&1)?Math.floor(t):Math.round(t)}function fd(t,e){e.unsigned||--t;let n=e.unsigned?0:-Math.pow(2,t),i=Math.pow(2,t)-1,a=e.moduloBitLength?Math.pow(2,e.moduloBitLength):Math.pow(2,t),o=e.moduloBitLength?Math.pow(2,e.moduloBitLength-1):Math.pow(2,t-1);return function(s,l){l||(l={});let c=+s;if(l.enforceRange){if(!Number.isFinite(c))throw new TypeError("Argument is not a finite number");if(c=HJ(c)*Math.floor(Math.abs(c)),c<n||c>i)throw new TypeError("Argument is not in byte range");return c}if(!isNaN(c)&&l.clamp)return c=XSe(c),c<n&&(c=n),c>i&&(c=i),c;if(!Number.isFinite(c)||c===0)return 0;if(c=HJ(c)*Math.floor(Math.abs(c)),c=c%a,!e.unsigned&&c>=o)return c-a;if(e.unsigned){if(c<0)c+=a;else if(c===-0)return 0}return c}}dn.void=function(){};dn.boolean=function(t){return!!t};dn.byte=fd(8,{unsigned:!1});dn.octet=fd(8,{unsigned:!0});dn.short=fd(16,{unsigned:!1});dn["unsigned short"]=fd(16,{unsigned:!0});dn.long=fd(32,{unsigned:!1});dn["unsigned long"]=fd(32,{unsigned:!0});dn["long long"]=fd(32,{unsigned:!1,moduloBitLength:64});dn["unsigned long long"]=fd(32,{unsigned:!0,moduloBitLength:64});dn.double=function(t){let e=+t;if(!Number.isFinite(e))throw new TypeError("Argument is not a finite floating-point value");return e};dn["unrestricted double"]=function(t){let e=+t;if(isNaN(e))throw new TypeError("Argument is NaN");return e};dn.float=dn.double;dn["unrestricted float"]=dn["unrestricted double"];dn.DOMString=function(t,e){return e||(e={}),e.treatNullAsEmptyString&&t===null?"":String(t)};dn.ByteString=function(t,e){let n=String(t),i;for(let a=0;(i=n.codePointAt(a))!==void 0;++a)if(i>255)throw new TypeError("Argument is not a valid bytestring");return n};dn.USVString=function(t){let e=String(t),n=e.length,i=[];for(let a=0;a<n;++a){let o=e.charCodeAt(a);if(o<55296||o>57343)i.push(String.fromCodePoint(o));else if(56320<=o&&o<=57343)i.push(String.fromCodePoint(65533));else if(a===n-1)i.push(String.fromCodePoint(65533));else{let s=e.charCodeAt(a+1);if(56320<=s&&s<=57343){let l=o&1023,c=s&1023;i.push(String.fromCodePoint(65536+1024*l+c)),++a}else i.push(String.fromCodePoint(65533))}}return i.join("")};dn.Date=function(t,e){if(!(t instanceof Date))throw new TypeError("Argument is not a Date object");if(!isNaN(t))return t};dn.RegExp=function(t,e){return t instanceof RegExp||(t=new RegExp(t)),t}});var XJ=Ze((gyt,pd)=>{"use strict";pd.exports.mixin=function(e,n){let i=Object.getOwnPropertyNames(n);for(let a=0;a<i.length;++a)Object.defineProperty(e,i[a],Object.getOwnPropertyDescriptor(n,i[a]))};pd.exports.wrapperSymbol=Symbol("wrapper");pd.exports.implSymbol=Symbol("impl");pd.exports.wrapperForImpl=function(t){return t[pd.exports.wrapperSymbol]};pd.exports.implForWrapper=function(t){return t[pd.exports.implSymbol]}});var qJ=Ze((_yt,qSe)=>{qSe.exports=[[[0,44],"disallowed_STD3_valid"],[[45,46],"valid"],[[47,47],"disallowed_STD3_valid"],[[48,57],"valid"],[[58,64],"disallowed_STD3_valid"],[[65,65],"mapped",[97]],[[66,66],"mapped",[98]],[[67,67],"mapped",[99]],[[68,68],"mapped",[100]],[[69,69],"mapped",[101]],[[70,70],"mapped",[102]],[[71,71],"mapped",[103]],[[72,72],"mapped",[104]],[[73,73],"mapped",[105]],[[74,74],"mapped",[106]],[[75,75],"mapped",[107]],[[76,76],"mapped",[108]],[[77,77],"mapped",[109]],[[78,78],"mapped",[110]],[[79,79],"mapped",[111]],[[80,80],"mapped",[112]],[[81,81],"mapped",[113]],[[82,82],"mapped",[114]],[[83,83],"mapped",[115]],[[84,84],"mapped",[116]],[[85,85],"mapped",[117]],[[86,86],"mapped",[118]],[[87,87],"mapped",[119]],[[88,88],"mapped",[120]],[[89,89],"mapped",[121]],[[90,90],"mapped",[122]],[[91,96],"disallowed_STD3_valid"],[[97,122],"valid"],[[123,127],"disallowed_STD3_valid"],[[128,159],"disallowed"],[[160,160],"disallowed_STD3_mapped",[32]],[[161,167],"valid",[],"NV8"],[[168,168],"disallowed_STD3_mapped",[32,776]],[[169,169],"valid",[],"NV8"],[[170,170],"mapped",[97]],[[171,172],"valid",[],"NV8"],[[173,173],"ignored"],[[174,174],"valid",[],"NV8"],[[175,175],"disallowed_STD3_mapped",[32,772]],[[176,177],"valid",[],"NV8"],[[178,178],"mapped",[50]],[[179,179],"mapped",[51]],[[180,180],"disallowed_STD3_mapped",[32,769]],[[181,181],"mapped",[956]],[[182,182],"valid",[],"NV8"],[[183,183],"valid"],[[184,184],"disallowed_STD3_mapped",[32,807]],[[185,185],"mapped",[49]],[[186,186],"mapped",[111]],[[187,187],"valid",[],"NV8"],[[188,188],"mapped",[49,8260,52]],[[189,189],"mapped",[49,8260,50]],[[190,190],"mapped",[51,8260,52]],[[191,191],"valid",[],"NV8"],[[192,192],"mapped",[224]],[[193,193],"mapped",[225]],[[194,194],"mapped",[226]],[[195,195],"mapped",[227]],[[196,196],"mapped",[228]],[[197,197],"mapped",[229]],[[198,198],"mapped",[230]],[[199,199],"mapped",[231]],[[200,200],"mapped",[232]],[[201,201],"mapped",[233]],[[202,202],"mapped",[234]],[[203,203],"mapped",[235]],[[204,204],"mapped",[236]],[[205,205],"mapped",[237]],[[206,206],"mapped",[238]],[[207,207],"mapped",[239]],[[208,208],"mapped",[240]],[[209,209],"mapped",[241]],[[210,210],"mapped",[242]],[[211,211],"mapped",[243]],[[212,212],"mapped",[244]],[[213,213],"mapped",[245]],[[214,214],"mapped",[246]],[[215,215],"valid",[],"NV8"],[[216,216],"mapped",[248]],[[217,217],"mapped",[249]],[[218,218],"mapped",[250]],[[219,219],"mapped",[251]],[[220,220],"mapped",[252]],[[221,221],"mapped",[253]],[[222,222],"mapped",[254]],[[223,223],"deviation",[115,115]],[[224,246],"valid"],[[247,247],"valid",[],"NV8"],[[248,255],"valid"],[[256,256],"mapped",[257]],[[257,257],"valid"],[[258,258],"mapped",[259]],[[259,259],"valid"],[[260,260],"mapped",[261]],[[261,261],"valid"],[[262,262],"mapped",[263]],[[263,263],"valid"],[[264,264],"mapped",[265]],[[265,265],"valid"],[[266,266],"mapped",[267]],[[267,267],"valid"],[[268,268],"mapped",[269]],[[269,269],"valid"],[[270,270],"mapped",[271]],[[271,271],"valid"],[[272,272],"mapped",[273]],[[273,273],"valid"],[[274,274],"mapped",[275]],[[275,275],"valid"],[[276,276],"mapped",[277]],[[277,277],"valid"],[[278,278],"mapped",[279]],[[279,279],"valid"],[[280,280],"mapped",[281]],[[281,281],"valid"],[[282,282],"mapped",[283]],[[283,283],"valid"],[[284,284],"mapped",[285]],[[285,285],"valid"],[[286,286],"mapped",[287]],[[287,287],"valid"],[[288,288],"mapped",[289]],[[289,289],"valid"],[[290,290],"mapped",[291]],[[291,291],"valid"],[[292,292],"mapped",[293]],[[293,293],"valid"],[[294,294],"mapped",[295]],[[295,295],"valid"],[[296,296],"mapped",[297]],[[297,297],"valid"],[[298,298],"mapped",[299]],[[299,299],"valid"],[[300,300],"mapped",[301]],[[301,301],"valid"],[[302,302],"mapped",[303]],[[303,303],"valid"],[[304,304],"mapped",[105,775]],[[305,305],"valid"],[[306,307],"mapped",[105,106]],[[308,308],"mapped",[309]],[[309,309],"valid"],[[310,310],"mapped",[311]],[[311,312],"valid"],[[313,313],"mapped",[314]],[[314,314],"valid"],[[315,315],"mapped",[316]],[[316,316],"valid"],[[317,317],"mapped",[318]],[[318,318],"valid"],[[319,320],"mapped",[108,183]],[[321,321],"mapped",[322]],[[322,322],"valid"],[[323,323],"mapped",[324]],[[324,324],"valid"],[[325,325],"mapped",[326]],[[326,326],"valid"],[[327,327],"mapped",[328]],[[328,328],"valid"],[[329,329],"mapped",[700,110]],[[330,330],"mapped",[331]],[[331,331],"valid"],[[332,332],"mapped",[333]],[[333,333],"valid"],[[334,334],"mapped",[335]],[[335,335],"valid"],[[336,336],"mapped",[337]],[[337,337],"valid"],[[338,338],"mapped",[339]],[[339,339],"valid"],[[340,340],"mapped",[341]],[[341,341],"valid"],[[342,342],"mapped",[343]],[[343,343],"valid"],[[344,344],"mapped",[345]],[[345,345],"valid"],[[346,346],"mapped",[347]],[[347,347],"valid"],[[348,348],"mapped",[349]],[[349,349],"valid"],[[350,350],"mapped",[351]],[[351,351],"valid"],[[352,352],"mapped",[353]],[[353,353],"valid"],[[354,354],"mapped",[355]],[[355,355],"valid"],[[356,356],"mapped",[357]],[[357,357],"valid"],[[358,358],"mapped",[359]],[[359,359],"valid"],[[360,360],"mapped",[361]],[[361,361],"valid"],[[362,362],"mapped",[363]],[[363,363],"valid"],[[364,364],"mapped",[365]],[[365,365],"valid"],[[366,366],"mapped",[367]],[[367,367],"valid"],[[368,368],"mapped",[369]],[[369,369],"valid"],[[370,370],"mapped",[371]],[[371,371],"valid"],[[372,372],"mapped",[373]],[[373,373],"valid"],[[374,374],"mapped",[375]],[[375,375],"valid"],[[376,376],"mapped",[255]],[[377,377],"mapped",[378]],[[378,378],"valid"],[[379,379],"mapped",[380]],[[380,380],"valid"],[[381,381],"mapped",[382]],[[382,382],"valid"],[[383,383],"mapped",[115]],[[384,384],"valid"],[[385,385],"mapped",[595]],[[386,386],"mapped",[387]],[[387,387],"valid"],[[388,388],"mapped",[389]],[[389,389],"valid"],[[390,390],"mapped",[596]],[[391,391],"mapped",[392]],[[392,392],"valid"],[[393,393],"mapped",[598]],[[394,394],"mapped",[599]],[[395,395],"mapped",[396]],[[396,397],"valid"],[[398,398],"mapped",[477]],[[399,399],"mapped",[601]],[[400,400],"mapped",[603]],[[401,401],"mapped",[402]],[[402,402],"valid"],[[403,403],"mapped",[608]],[[404,404],"mapped",[611]],[[405,405],"valid"],[[406,406],"mapped",[617]],[[407,407],"mapped",[616]],[[408,408],"mapped",[409]],[[409,411],"valid"],[[412,412],"mapped",[623]],[[413,413],"mapped",[626]],[[414,414],"valid"],[[415,415],"mapped",[629]],[[416,416],"mapped",[417]],[[417,417],"valid"],[[418,418],"mapped",[419]],[[419,419],"valid"],[[420,420],"mapped",[421]],[[421,421],"valid"],[[422,422],"mapped",[640]],[[423,423],"mapped",[424]],[[424,424],"valid"],[[425,425],"mapped",[643]],[[426,427],"valid"],[[428,428],"mapped",[429]],[[429,429],"valid"],[[430,430],"mapped",[648]],[[431,431],"mapped",[432]],[[432,432],"valid"],[[433,433],"mapped",[650]],[[434,434],"mapped",[651]],[[435,435],"mapped",[436]],[[436,436],"valid"],[[437,437],"mapped",[438]],[[438,438],"valid"],[[439,439],"mapped",[658]],[[440,440],"mapped",[441]],[[441,443],"valid"],[[444,444],"mapped",[445]],[[445,451],"valid"],[[452,454],"mapped",[100,382]],[[455,457],"mapped",[108,106]],[[458,460],"mapped",[110,106]],[[461,461],"mapped",[462]],[[462,462],"valid"],[[463,463],"mapped",[464]],[[464,464],"valid"],[[465,465],"mapped",[466]],[[466,466],"valid"],[[467,467],"mapped",[468]],[[468,468],"valid"],[[469,469],"mapped",[470]],[[470,470],"valid"],[[471,471],"mapped",[472]],[[472,472],"valid"],[[473,473],"mapped",[474]],[[474,474],"valid"],[[475,475],"mapped",[476]],[[476,477],"valid"],[[478,478],"mapped",[479]],[[479,479],"valid"],[[480,480],"mapped",[481]],[[481,481],"valid"],[[482,482],"mapped",[483]],[[483,483],"valid"],[[484,484],"mapped",[485]],[[485,485],"valid"],[[486,486],"mapped",[487]],[[487,487],"valid"],[[488,488],"mapped",[489]],[[489,489],"valid"],[[490,490],"mapped",[491]],[[491,491],"valid"],[[492,492],"mapped",[493]],[[493,493],"valid"],[[494,494],"mapped",[495]],[[495,496],"valid"],[[497,499],"mapped",[100,122]],[[500,500],"mapped",[501]],[[501,501],"valid"],[[502,502],"mapped",[405]],[[503,503],"mapped",[447]],[[504,504],"mapped",[505]],[[505,505],"valid"],[[506,506],"mapped",[507]],[[507,507],"valid"],[[508,508],"mapped",[509]],[[509,509],"valid"],[[510,510],"mapped",[511]],[[511,511],"valid"],[[512,512],"mapped",[513]],[[513,513],"valid"],[[514,514],"mapped",[515]],[[515,515],"valid"],[[516,516],"mapped",[517]],[[517,517],"valid"],[[518,518],"mapped",[519]],[[519,519],"valid"],[[520,520],"mapped",[521]],[[521,521],"valid"],[[522,522],"mapped",[523]],[[523,523],"valid"],[[524,524],"mapped",[525]],[[525,525],"valid"],[[526,526],"mapped",[527]],[[527,527],"valid"],[[528,528],"mapped",[529]],[[529,529],"valid"],[[530,530],"mapped",[531]],[[531,531],"valid"],[[532,532],"mapped",[533]],[[533,533],"valid"],[[534,534],"mapped",[535]],[[535,535],"valid"],[[536,536],"mapped",[537]],[[537,537],"valid"],[[538,538],"mapped",[539]],[[539,539],"valid"],[[540,540],"mapped",[541]],[[541,541],"valid"],[[542,542],"mapped",[543]],[[543,543],"valid"],[[544,544],"mapped",[414]],[[545,545],"valid"],[[546,546],"mapped",[547]],[[547,547],"valid"],[[548,548],"mapped",[549]],[[549,549],"valid"],[[550,550],"mapped",[551]],[[551,551],"valid"],[[552,552],"mapped",[553]],[[553,553],"valid"],[[554,554],"mapped",[555]],[[555,555],"valid"],[[556,556],"mapped",[557]],[[557,557],"valid"],[[558,558],"mapped",[559]],[[559,559],"valid"],[[560,560],"mapped",[561]],[[561,561],"valid"],[[562,562],"mapped",[563]],[[563,563],"valid"],[[564,566],"valid"],[[567,569],"valid"],[[570,570],"mapped",[11365]],[[571,571],"mapped",[572]],[[572,572],"valid"],[[573,573],"mapped",[410]],[[574,574],"mapped",[11366]],[[575,576],"valid"],[[577,577],"mapped",[578]],[[578,578],"valid"],[[579,579],"mapped",[384]],[[580,580],"mapped",[649]],[[581,581],"mapped",[652]],[[582,582],"mapped",[583]],[[583,583],"valid"],[[584,584],"mapped",[585]],[[585,585],"valid"],[[586,586],"mapped",[587]],[[587,587],"valid"],[[588,588],"mapped",[589]],[[589,589],"valid"],[[590,590],"mapped",[591]],[[591,591],"valid"],[[592,680],"valid"],[[681,685],"valid"],[[686,687],"valid"],[[688,688],"mapped",[104]],[[689,689],"mapped",[614]],[[690,690],"mapped",[106]],[[691,691],"mapped",[114]],[[692,692],"mapped",[633]],[[693,693],"mapped",[635]],[[694,694],"mapped",[641]],[[695,695],"mapped",[119]],[[696,696],"mapped",[121]],[[697,705],"valid"],[[706,709],"valid",[],"NV8"],[[710,721],"valid"],[[722,727],"valid",[],"NV8"],[[728,728],"disallowed_STD3_mapped",[32,774]],[[729,729],"disallowed_STD3_mapped",[32,775]],[[730,730],"disallowed_STD3_mapped",[32,778]],[[731,731],"disallowed_STD3_mapped",[32,808]],[[732,732],"disallowed_STD3_mapped",[32,771]],[[733,733],"disallowed_STD3_mapped",[32,779]],[[734,734],"valid",[],"NV8"],[[735,735],"valid",[],"NV8"],[[736,736],"mapped",[611]],[[737,737],"mapped",[108]],[[738,738],"mapped",[115]],[[739,739],"mapped",[120]],[[740,740],"mapped",[661]],[[741,745],"valid",[],"NV8"],[[746,747],"valid",[],"NV8"],[[748,748],"valid"],[[749,749],"valid",[],"NV8"],[[750,750],"valid"],[[751,767],"valid",[],"NV8"],[[768,831],"valid"],[[832,832],"mapped",[768]],[[833,833],"mapped",[769]],[[834,834],"valid"],[[835,835],"mapped",[787]],[[836,836],"mapped",[776,769]],[[837,837],"mapped",[953]],[[838,846],"valid"],[[847,847],"ignored"],[[848,855],"valid"],[[856,860],"valid"],[[861,863],"valid"],[[864,865],"valid"],[[866,866],"valid"],[[867,879],"valid"],[[880,880],"mapped",[881]],[[881,881],"valid"],[[882,882],"mapped",[883]],[[883,883],"valid"],[[884,884],"mapped",[697]],[[885,885],"valid"],[[886,886],"mapped",[887]],[[887,887],"valid"],[[888,889],"disallowed"],[[890,890],"disallowed_STD3_mapped",[32,953]],[[891,893],"valid"],[[894,894],"disallowed_STD3_mapped",[59]],[[895,895],"mapped",[1011]],[[896,899],"disallowed"],[[900,900],"disallowed_STD3_mapped",[32,769]],[[901,901],"disallowed_STD3_mapped",[32,776,769]],[[902,902],"mapped",[940]],[[903,903],"mapped",[183]],[[904,904],"mapped",[941]],[[905,905],"mapped",[942]],[[906,906],"mapped",[943]],[[907,907],"disallowed"],[[908,908],"mapped",[972]],[[909,909],"disallowed"],[[910,910],"mapped",[973]],[[911,911],"mapped",[974]],[[912,912],"valid"],[[913,913],"mapped",[945]],[[914,914],"mapped",[946]],[[915,915],"mapped",[947]],[[916,916],"mapped",[948]],[[917,917],"mapped",[949]],[[918,918],"mapped",[950]],[[919,919],"mapped",[951]],[[920,920],"mapped",[952]],[[921,921],"mapped",[953]],[[922,922],"mapped",[954]],[[923,923],"mapped",[955]],[[924,924],"mapped",[956]],[[925,925],"mapped",[957]],[[926,926],"mapped",[958]],[[927,927],"mapped",[959]],[[928,928],"mapped",[960]],[[929,929],"mapped",[961]],[[930,930],"disallowed"],[[931,931],"mapped",[963]],[[932,932],"mapped",[964]],[[933,933],"mapped",[965]],[[934,934],"mapped",[966]],[[935,935],"mapped",[967]],[[936,936],"mapped",[968]],[[937,937],"mapped",[969]],[[938,938],"mapped",[970]],[[939,939],"mapped",[971]],[[940,961],"valid"],[[962,962],"deviation",[963]],[[963,974],"valid"],[[975,975],"mapped",[983]],[[976,976],"mapped",[946]],[[977,977],"mapped",[952]],[[978,978],"mapped",[965]],[[979,979],"mapped",[973]],[[980,980],"mapped",[971]],[[981,981],"mapped",[966]],[[982,982],"mapped",[960]],[[983,983],"valid"],[[984,984],"mapped",[985]],[[985,985],"valid"],[[986,986],"mapped",[987]],[[987,987],"valid"],[[988,988],"mapped",[989]],[[989,989],"valid"],[[990,990],"mapped",[991]],[[991,991],"valid"],[[992,992],"mapped",[993]],[[993,993],"valid"],[[994,994],"mapped",[995]],[[995,995],"valid"],[[996,996],"mapped",[997]],[[997,997],"valid"],[[998,998],"mapped",[999]],[[999,999],"valid"],[[1e3,1e3],"mapped",[1001]],[[1001,1001],"valid"],[[1002,1002],"mapped",[1003]],[[1003,1003],"valid"],[[1004,1004],"mapped",[1005]],[[1005,1005],"valid"],[[1006,1006],"mapped",[1007]],[[1007,1007],"valid"],[[1008,1008],"mapped",[954]],[[1009,1009],"mapped",[961]],[[1010,1010],"mapped",[963]],[[1011,1011],"valid"],[[1012,1012],"mapped",[952]],[[1013,1013],"mapped",[949]],[[1014,1014],"valid",[],"NV8"],[[1015,1015],"mapped",[1016]],[[1016,1016],"valid"],[[1017,1017],"mapped",[963]],[[1018,1018],"mapped",[1019]],[[1019,1019],"valid"],[[1020,1020],"valid"],[[1021,1021],"mapped",[891]],[[1022,1022],"mapped",[892]],[[1023,1023],"mapped",[893]],[[1024,1024],"mapped",[1104]],[[1025,1025],"mapped",[1105]],[[1026,1026],"mapped",[1106]],[[1027,1027],"mapped",[1107]],[[1028,1028],"mapped",[1108]],[[1029,1029],"mapped",[1109]],[[1030,1030],"mapped",[1110]],[[1031,1031],"mapped",[1111]],[[1032,1032],"mapped",[1112]],[[1033,1033],"mapped",[1113]],[[1034,1034],"mapped",[1114]],[[1035,1035],"mapped",[1115]],[[1036,1036],"mapped",[1116]],[[1037,1037],"mapped",[1117]],[[1038,1038],"mapped",[1118]],[[1039,1039],"mapped",[1119]],[[1040,1040],"mapped",[1072]],[[1041,1041],"mapped",[1073]],[[1042,1042],"mapped",[1074]],[[1043,1043],"mapped",[1075]],[[1044,1044],"mapped",[1076]],[[1045,1045],"mapped",[1077]],[[1046,1046],"mapped",[1078]],[[1047,1047],"mapped",[1079]],[[1048,1048],"mapped",[1080]],[[1049,1049],"mapped",[1081]],[[1050,1050],"mapped",[1082]],[[1051,1051],"mapped",[1083]],[[1052,1052],"mapped",[1084]],[[1053,1053],"mapped",[1085]],[[1054,1054],"mapped",[1086]],[[1055,1055],"mapped",[1087]],[[1056,1056],"mapped",[1088]],[[1057,1057],"mapped",[1089]],[[1058,1058],"mapped",[1090]],[[1059,1059],"mapped",[1091]],[[1060,1060],"mapped",[1092]],[[1061,1061],"mapped",[1093]],[[1062,1062],"mapped",[1094]],[[1063,1063],"mapped",[1095]],[[1064,1064],"mapped",[1096]],[[1065,1065],"mapped",[1097]],[[1066,1066],"mapped",[1098]],[[1067,1067],"mapped",[1099]],[[1068,1068],"mapped",[1100]],[[1069,1069],"mapped",[1101]],[[1070,1070],"mapped",[1102]],[[1071,1071],"mapped",[1103]],[[1072,1103],"valid"],[[1104,1104],"valid"],[[1105,1116],"valid"],[[1117,1117],"valid"],[[1118,1119],"valid"],[[1120,1120],"mapped",[1121]],[[1121,1121],"valid"],[[1122,1122],"mapped",[1123]],[[1123,1123],"valid"],[[1124,1124],"mapped",[1125]],[[1125,1125],"valid"],[[1126,1126],"mapped",[1127]],[[1127,1127],"valid"],[[1128,1128],"mapped",[1129]],[[1129,1129],"valid"],[[1130,1130],"mapped",[1131]],[[1131,1131],"valid"],[[1132,1132],"mapped",[1133]],[[1133,1133],"valid"],[[1134,1134],"mapped",[1135]],[[1135,1135],"valid"],[[1136,1136],"mapped",[1137]],[[1137,1137],"valid"],[[1138,1138],"mapped",[1139]],[[1139,1139],"valid"],[[1140,1140],"mapped",[1141]],[[1141,1141],"valid"],[[1142,1142],"mapped",[1143]],[[1143,1143],"valid"],[[1144,1144],"mapped",[1145]],[[1145,1145],"valid"],[[1146,1146],"mapped",[1147]],[[1147,1147],"valid"],[[1148,1148],"mapped",[1149]],[[1149,1149],"valid"],[[1150,1150],"mapped",[1151]],[[1151,1151],"valid"],[[1152,1152],"mapped",[1153]],[[1153,1153],"valid"],[[1154,1154],"valid",[],"NV8"],[[1155,1158],"valid"],[[1159,1159],"valid"],[[1160,1161],"valid",[],"NV8"],[[1162,1162],"mapped",[1163]],[[1163,1163],"valid"],[[1164,1164],"mapped",[1165]],[[1165,1165],"valid"],[[1166,1166],"mapped",[1167]],[[1167,1167],"valid"],[[1168,1168],"mapped",[1169]],[[1169,1169],"valid"],[[1170,1170],"mapped",[1171]],[[1171,1171],"valid"],[[1172,1172],"mapped",[1173]],[[1173,1173],"valid"],[[1174,1174],"mapped",[1175]],[[1175,1175],"valid"],[[1176,1176],"mapped",[1177]],[[1177,1177],"valid"],[[1178,1178],"mapped",[1179]],[[1179,1179],"valid"],[[1180,1180],"mapped",[1181]],[[1181,1181],"valid"],[[1182,1182],"mapped",[1183]],[[1183,1183],"valid"],[[1184,1184],"mapped",[1185]],[[1185,1185],"valid"],[[1186,1186],"mapped",[1187]],[[1187,1187],"valid"],[[1188,1188],"mapped",[1189]],[[1189,1189],"valid"],[[1190,1190],"mapped",[1191]],[[1191,1191],"valid"],[[1192,1192],"mapped",[1193]],[[1193,1193],"valid"],[[1194,1194],"mapped",[1195]],[[1195,1195],"valid"],[[1196,1196],"mapped",[1197]],[[1197,1197],"valid"],[[1198,1198],"mapped",[1199]],[[1199,1199],"valid"],[[1200,1200],"mapped",[1201]],[[1201,1201],"valid"],[[1202,1202],"mapped",[1203]],[[1203,1203],"valid"],[[1204,1204],"mapped",[1205]],[[1205,1205],"valid"],[[1206,1206],"mapped",[1207]],[[1207,1207],"valid"],[[1208,1208],"mapped",[1209]],[[1209,1209],"valid"],[[1210,1210],"mapped",[1211]],[[1211,1211],"valid"],[[1212,1212],"mapped",[1213]],[[1213,1213],"valid"],[[1214,1214],"mapped",[1215]],[[1215,1215],"valid"],[[1216,1216],"disallowed"],[[1217,1217],"mapped",[1218]],[[1218,1218],"valid"],[[1219,1219],"mapped",[1220]],[[1220,1220],"valid"],[[1221,1221],"mapped",[1222]],[[1222,1222],"valid"],[[1223,1223],"mapped",[1224]],[[1224,1224],"valid"],[[1225,1225],"mapped",[1226]],[[1226,1226],"valid"],[[1227,1227],"mapped",[1228]],[[1228,1228],"valid"],[[1229,1229],"mapped",[1230]],[[1230,1230],"valid"],[[1231,1231],"valid"],[[1232,1232],"mapped",[1233]],[[1233,1233],"valid"],[[1234,1234],"mapped",[1235]],[[1235,1235],"valid"],[[1236,1236],"mapped",[1237]],[[1237,1237],"valid"],[[1238,1238],"mapped",[1239]],[[1239,1239],"valid"],[[1240,1240],"mapped",[1241]],[[1241,1241],"valid"],[[1242,1242],"mapped",[1243]],[[1243,1243],"valid"],[[1244,1244],"mapped",[1245]],[[1245,1245],"valid"],[[1246,1246],"mapped",[1247]],[[1247,1247],"valid"],[[1248,1248],"mapped",[1249]],[[1249,1249],"valid"],[[1250,1250],"mapped",[1251]],[[1251,1251],"valid"],[[1252,1252],"mapped",[1253]],[[1253,1253],"valid"],[[1254,1254],"mapped",[1255]],[[1255,1255],"valid"],[[1256,1256],"mapped",[1257]],[[1257,1257],"valid"],[[1258,1258],"mapped",[1259]],[[1259,1259],"valid"],[[1260,1260],"mapped",[1261]],[[1261,1261],"valid"],[[1262,1262],"mapped",[1263]],[[1263,1263],"valid"],[[1264,1264],"mapped",[1265]],[[1265,1265],"valid"],[[1266,1266],"mapped",[1267]],[[1267,1267],"valid"],[[1268,1268],"mapped",[1269]],[[1269,1269],"valid"],[[1270,1270],"mapped",[1271]],[[1271,1271],"valid"],[[1272,1272],"mapped",[1273]],[[1273,1273],"valid"],[[1274,1274],"mapped",[1275]],[[1275,1275],"valid"],[[1276,1276],"mapped",[1277]],[[1277,1277],"valid"],[[1278,1278],"mapped",[1279]],[[1279,1279],"valid"],[[1280,1280],"mapped",[1281]],[[1281,1281],"valid"],[[1282,1282],"mapped",[1283]],[[1283,1283],"valid"],[[1284,1284],"mapped",[1285]],[[1285,1285],"valid"],[[1286,1286],"mapped",[1287]],[[1287,1287],"valid"],[[1288,1288],"mapped",[1289]],[[1289,1289],"valid"],[[1290,1290],"mapped",[1291]],[[1291,1291],"valid"],[[1292,1292],"mapped",[1293]],[[1293,1293],"valid"],[[1294,1294],"mapped",[1295]],[[1295,1295],"valid"],[[1296,1296],"mapped",[1297]],[[1297,1297],"valid"],[[1298,1298],"mapped",[1299]],[[1299,1299],"valid"],[[1300,1300],"mapped",[1301]],[[1301,1301],"valid"],[[1302,1302],"mapped",[1303]],[[1303,1303],"valid"],[[1304,1304],"mapped",[1305]],[[1305,1305],"valid"],[[1306,1306],"mapped",[1307]],[[1307,1307],"valid"],[[1308,1308],"mapped",[1309]],[[1309,1309],"valid"],[[1310,1310],"mapped",[1311]],[[1311,1311],"valid"],[[1312,1312],"mapped",[1313]],[[1313,1313],"valid"],[[1314,1314],"mapped",[1315]],[[1315,1315],"valid"],[[1316,1316],"mapped",[1317]],[[1317,1317],"valid"],[[1318,1318],"mapped",[1319]],[[1319,1319],"valid"],[[1320,1320],"mapped",[1321]],[[1321,1321],"valid"],[[1322,1322],"mapped",[1323]],[[1323,1323],"valid"],[[1324,1324],"mapped",[1325]],[[1325,1325],"valid"],[[1326,1326],"mapped",[1327]],[[1327,1327],"valid"],[[1328,1328],"disallowed"],[[1329,1329],"mapped",[1377]],[[1330,1330],"mapped",[1378]],[[1331,1331],"mapped",[1379]],[[1332,1332],"mapped",[1380]],[[1333,1333],"mapped",[1381]],[[1334,1334],"mapped",[1382]],[[1335,1335],"mapped",[1383]],[[1336,1336],"mapped",[1384]],[[1337,1337],"mapped",[1385]],[[1338,1338],"mapped",[1386]],[[1339,1339],"mapped",[1387]],[[1340,1340],"mapped",[1388]],[[1341,1341],"mapped",[1389]],[[1342,1342],"mapped",[1390]],[[1343,1343],"mapped",[1391]],[[1344,1344],"mapped",[1392]],[[1345,1345],"mapped",[1393]],[[1346,1346],"mapped",[1394]],[[1347,1347],"mapped",[1395]],[[1348,1348],"mapped",[1396]],[[1349,1349],"mapped",[1397]],[[1350,1350],"mapped",[1398]],[[1351,1351],"mapped",[1399]],[[1352,1352],"mapped",[1400]],[[1353,1353],"mapped",[1401]],[[1354,1354],"mapped",[1402]],[[1355,1355],"mapped",[1403]],[[1356,1356],"mapped",[1404]],[[1357,1357],"mapped",[1405]],[[1358,1358],"mapped",[1406]],[[1359,1359],"mapped",[1407]],[[1360,1360],"mapped",[1408]],[[1361,1361],"mapped",[1409]],[[1362,1362],"mapped",[1410]],[[1363,1363],"mapped",[1411]],[[1364,1364],"mapped",[1412]],[[1365,1365],"mapped",[1413]],[[1366,1366],"mapped",[1414]],[[1367,1368],"disallowed"],[[1369,1369],"valid"],[[1370,1375],"valid",[],"NV8"],[[1376,1376],"disallowed"],[[1377,1414],"valid"],[[1415,1415],"mapped",[1381,1410]],[[1416,1416],"disallowed"],[[1417,1417],"valid",[],"NV8"],[[1418,1418],"valid",[],"NV8"],[[1419,1420],"disallowed"],[[1421,1422],"valid",[],"NV8"],[[1423,1423],"valid",[],"NV8"],[[1424,1424],"disallowed"],[[1425,1441],"valid"],[[1442,1442],"valid"],[[1443,1455],"valid"],[[1456,1465],"valid"],[[1466,1466],"valid"],[[1467,1469],"valid"],[[1470,1470],"valid",[],"NV8"],[[1471,1471],"valid"],[[1472,1472],"valid",[],"NV8"],[[1473,1474],"valid"],[[1475,1475],"valid",[],"NV8"],[[1476,1476],"valid"],[[1477,1477],"valid"],[[1478,1478],"valid",[],"NV8"],[[1479,1479],"valid"],[[1480,1487],"disallowed"],[[1488,1514],"valid"],[[1515,1519],"disallowed"],[[1520,1524],"valid"],[[1525,1535],"disallowed"],[[1536,1539],"disallowed"],[[1540,1540],"disallowed"],[[1541,1541],"disallowed"],[[1542,1546],"valid",[],"NV8"],[[1547,1547],"valid",[],"NV8"],[[1548,1548],"valid",[],"NV8"],[[1549,1551],"valid",[],"NV8"],[[1552,1557],"valid"],[[1558,1562],"valid"],[[1563,1563],"valid",[],"NV8"],[[1564,1564],"disallowed"],[[1565,1565],"disallowed"],[[1566,1566],"valid",[],"NV8"],[[1567,1567],"valid",[],"NV8"],[[1568,1568],"valid"],[[1569,1594],"valid"],[[1595,1599],"valid"],[[1600,1600],"valid",[],"NV8"],[[1601,1618],"valid"],[[1619,1621],"valid"],[[1622,1624],"valid"],[[1625,1630],"valid"],[[1631,1631],"valid"],[[1632,1641],"valid"],[[1642,1645],"valid",[],"NV8"],[[1646,1647],"valid"],[[1648,1652],"valid"],[[1653,1653],"mapped",[1575,1652]],[[1654,1654],"mapped",[1608,1652]],[[1655,1655],"mapped",[1735,1652]],[[1656,1656],"mapped",[1610,1652]],[[1657,1719],"valid"],[[1720,1721],"valid"],[[1722,1726],"valid"],[[1727,1727],"valid"],[[1728,1742],"valid"],[[1743,1743],"valid"],[[1744,1747],"valid"],[[1748,1748],"valid",[],"NV8"],[[1749,1756],"valid"],[[1757,1757],"disallowed"],[[1758,1758],"valid",[],"NV8"],[[1759,1768],"valid"],[[1769,1769],"valid",[],"NV8"],[[1770,1773],"valid"],[[1774,1775],"valid"],[[1776,1785],"valid"],[[1786,1790],"valid"],[[1791,1791],"valid"],[[1792,1805],"valid",[],"NV8"],[[1806,1806],"disallowed"],[[1807,1807],"disallowed"],[[1808,1836],"valid"],[[1837,1839],"valid"],[[1840,1866],"valid"],[[1867,1868],"disallowed"],[[1869,1871],"valid"],[[1872,1901],"valid"],[[1902,1919],"valid"],[[1920,1968],"valid"],[[1969,1969],"valid"],[[1970,1983],"disallowed"],[[1984,2037],"valid"],[[2038,2042],"valid",[],"NV8"],[[2043,2047],"disallowed"],[[2048,2093],"valid"],[[2094,2095],"disallowed"],[[2096,2110],"valid",[],"NV8"],[[2111,2111],"disallowed"],[[2112,2139],"valid"],[[2140,2141],"disallowed"],[[2142,2142],"valid",[],"NV8"],[[2143,2207],"disallowed"],[[2208,2208],"valid"],[[2209,2209],"valid"],[[2210,2220],"valid"],[[2221,2226],"valid"],[[2227,2228],"valid"],[[2229,2274],"disallowed"],[[2275,2275],"valid"],[[2276,2302],"valid"],[[2303,2303],"valid"],[[2304,2304],"valid"],[[2305,2307],"valid"],[[2308,2308],"valid"],[[2309,2361],"valid"],[[2362,2363],"valid"],[[2364,2381],"valid"],[[2382,2382],"valid"],[[2383,2383],"valid"],[[2384,2388],"valid"],[[2389,2389],"valid"],[[2390,2391],"valid"],[[2392,2392],"mapped",[2325,2364]],[[2393,2393],"mapped",[2326,2364]],[[2394,2394],"mapped",[2327,2364]],[[2395,2395],"mapped",[2332,2364]],[[2396,2396],"mapped",[2337,2364]],[[2397,2397],"mapped",[2338,2364]],[[2398,2398],"mapped",[2347,2364]],[[2399,2399],"mapped",[2351,2364]],[[2400,2403],"valid"],[[2404,2405],"valid",[],"NV8"],[[2406,2415],"valid"],[[2416,2416],"valid",[],"NV8"],[[2417,2418],"valid"],[[2419,2423],"valid"],[[2424,2424],"valid"],[[2425,2426],"valid"],[[2427,2428],"valid"],[[2429,2429],"valid"],[[2430,2431],"valid"],[[2432,2432],"valid"],[[2433,2435],"valid"],[[2436,2436],"disallowed"],[[2437,2444],"valid"],[[2445,2446],"disallowed"],[[2447,2448],"valid"],[[2449,2450],"disallowed"],[[2451,2472],"valid"],[[2473,2473],"disallowed"],[[2474,2480],"valid"],[[2481,2481],"disallowed"],[[2482,2482],"valid"],[[2483,2485],"disallowed"],[[2486,2489],"valid"],[[2490,2491],"disallowed"],[[2492,2492],"valid"],[[2493,2493],"valid"],[[2494,2500],"valid"],[[2501,2502],"disallowed"],[[2503,2504],"valid"],[[2505,2506],"disallowed"],[[2507,2509],"valid"],[[2510,2510],"valid"],[[2511,2518],"disallowed"],[[2519,2519],"valid"],[[2520,2523],"disallowed"],[[2524,2524],"mapped",[2465,2492]],[[2525,2525],"mapped",[2466,2492]],[[2526,2526],"disallowed"],[[2527,2527],"mapped",[2479,2492]],[[2528,2531],"valid"],[[2532,2533],"disallowed"],[[2534,2545],"valid"],[[2546,2554],"valid",[],"NV8"],[[2555,2555],"valid",[],"NV8"],[[2556,2560],"disallowed"],[[2561,2561],"valid"],[[2562,2562],"valid"],[[2563,2563],"valid"],[[2564,2564],"disallowed"],[[2565,2570],"valid"],[[2571,2574],"disallowed"],[[2575,2576],"valid"],[[2577,2578],"disallowed"],[[2579,2600],"valid"],[[2601,2601],"disallowed"],[[2602,2608],"valid"],[[2609,2609],"disallowed"],[[2610,2610],"valid"],[[2611,2611],"mapped",[2610,2620]],[[2612,2612],"disallowed"],[[2613,2613],"valid"],[[2614,2614],"mapped",[2616,2620]],[[2615,2615],"disallowed"],[[2616,2617],"valid"],[[2618,2619],"disallowed"],[[2620,2620],"valid"],[[2621,2621],"disallowed"],[[2622,2626],"valid"],[[2627,2630],"disallowed"],[[2631,2632],"valid"],[[2633,2634],"disallowed"],[[2635,2637],"valid"],[[2638,2640],"disallowed"],[[2641,2641],"valid"],[[2642,2648],"disallowed"],[[2649,2649],"mapped",[2582,2620]],[[2650,2650],"mapped",[2583,2620]],[[2651,2651],"mapped",[2588,2620]],[[2652,2652],"valid"],[[2653,2653],"disallowed"],[[2654,2654],"mapped",[2603,2620]],[[2655,2661],"disallowed"],[[2662,2676],"valid"],[[2677,2677],"valid"],[[2678,2688],"disallowed"],[[2689,2691],"valid"],[[2692,2692],"disallowed"],[[2693,2699],"valid"],[[2700,2700],"valid"],[[2701,2701],"valid"],[[2702,2702],"disallowed"],[[2703,2705],"valid"],[[2706,2706],"disallowed"],[[2707,2728],"valid"],[[2729,2729],"disallowed"],[[2730,2736],"valid"],[[2737,2737],"disallowed"],[[2738,2739],"valid"],[[2740,2740],"disallowed"],[[2741,2745],"valid"],[[2746,2747],"disallowed"],[[2748,2757],"valid"],[[2758,2758],"disallowed"],[[2759,2761],"valid"],[[2762,2762],"disallowed"],[[2763,2765],"valid"],[[2766,2767],"disallowed"],[[2768,2768],"valid"],[[2769,2783],"disallowed"],[[2784,2784],"valid"],[[2785,2787],"valid"],[[2788,2789],"disallowed"],[[2790,2799],"valid"],[[2800,2800],"valid",[],"NV8"],[[2801,2801],"valid",[],"NV8"],[[2802,2808],"disallowed"],[[2809,2809],"valid"],[[2810,2816],"disallowed"],[[2817,2819],"valid"],[[2820,2820],"disallowed"],[[2821,2828],"valid"],[[2829,2830],"disallowed"],[[2831,2832],"valid"],[[2833,2834],"disallowed"],[[2835,2856],"valid"],[[2857,2857],"disallowed"],[[2858,2864],"valid"],[[2865,2865],"disallowed"],[[2866,2867],"valid"],[[2868,2868],"disallowed"],[[2869,2869],"valid"],[[2870,2873],"valid"],[[2874,2875],"disallowed"],[[2876,2883],"valid"],[[2884,2884],"valid"],[[2885,2886],"disallowed"],[[2887,2888],"valid"],[[2889,2890],"disallowed"],[[2891,2893],"valid"],[[2894,2901],"disallowed"],[[2902,2903],"valid"],[[2904,2907],"disallowed"],[[2908,2908],"mapped",[2849,2876]],[[2909,2909],"mapped",[2850,2876]],[[2910,2910],"disallowed"],[[2911,2913],"valid"],[[2914,2915],"valid"],[[2916,2917],"disallowed"],[[2918,2927],"valid"],[[2928,2928],"valid",[],"NV8"],[[2929,2929],"valid"],[[2930,2935],"valid",[],"NV8"],[[2936,2945],"disallowed"],[[2946,2947],"valid"],[[2948,2948],"disallowed"],[[2949,2954],"valid"],[[2955,2957],"disallowed"],[[2958,2960],"valid"],[[2961,2961],"disallowed"],[[2962,2965],"valid"],[[2966,2968],"disallowed"],[[2969,2970],"valid"],[[2971,2971],"disallowed"],[[2972,2972],"valid"],[[2973,2973],"disallowed"],[[2974,2975],"valid"],[[2976,2978],"disallowed"],[[2979,2980],"valid"],[[2981,2983],"disallowed"],[[2984,2986],"valid"],[[2987,2989],"disallowed"],[[2990,2997],"valid"],[[2998,2998],"valid"],[[2999,3001],"valid"],[[3002,3005],"disallowed"],[[3006,3010],"valid"],[[3011,3013],"disallowed"],[[3014,3016],"valid"],[[3017,3017],"disallowed"],[[3018,3021],"valid"],[[3022,3023],"disallowed"],[[3024,3024],"valid"],[[3025,3030],"disallowed"],[[3031,3031],"valid"],[[3032,3045],"disallowed"],[[3046,3046],"valid"],[[3047,3055],"valid"],[[3056,3058],"valid",[],"NV8"],[[3059,3066],"valid",[],"NV8"],[[3067,3071],"disallowed"],[[3072,3072],"valid"],[[3073,3075],"valid"],[[3076,3076],"disallowed"],[[3077,3084],"valid"],[[3085,3085],"disallowed"],[[3086,3088],"valid"],[[3089,3089],"disallowed"],[[3090,3112],"valid"],[[3113,3113],"disallowed"],[[3114,3123],"valid"],[[3124,3124],"valid"],[[3125,3129],"valid"],[[3130,3132],"disallowed"],[[3133,3133],"valid"],[[3134,3140],"valid"],[[3141,3141],"disallowed"],[[3142,3144],"valid"],[[3145,3145],"disallowed"],[[3146,3149],"valid"],[[3150,3156],"disallowed"],[[3157,3158],"valid"],[[3159,3159],"disallowed"],[[3160,3161],"valid"],[[3162,3162],"valid"],[[3163,3167],"disallowed"],[[3168,3169],"valid"],[[3170,3171],"valid"],[[3172,3173],"disallowed"],[[3174,3183],"valid"],[[3184,3191],"disallowed"],[[3192,3199],"valid",[],"NV8"],[[3200,3200],"disallowed"],[[3201,3201],"valid"],[[3202,3203],"valid"],[[3204,3204],"disallowed"],[[3205,3212],"valid"],[[3213,3213],"disallowed"],[[3214,3216],"valid"],[[3217,3217],"disallowed"],[[3218,3240],"valid"],[[3241,3241],"disallowed"],[[3242,3251],"valid"],[[3252,3252],"disallowed"],[[3253,3257],"valid"],[[3258,3259],"disallowed"],[[3260,3261],"valid"],[[3262,3268],"valid"],[[3269,3269],"disallowed"],[[3270,3272],"valid"],[[3273,3273],"disallowed"],[[3274,3277],"valid"],[[3278,3284],"disallowed"],[[3285,3286],"valid"],[[3287,3293],"disallowed"],[[3294,3294],"valid"],[[3295,3295],"disallowed"],[[3296,3297],"valid"],[[3298,3299],"valid"],[[3300,3301],"disallowed"],[[3302,3311],"valid"],[[3312,3312],"disallowed"],[[3313,3314],"valid"],[[3315,3328],"disallowed"],[[3329,3329],"valid"],[[3330,3331],"valid"],[[3332,3332],"disallowed"],[[3333,3340],"valid"],[[3341,3341],"disallowed"],[[3342,3344],"valid"],[[3345,3345],"disallowed"],[[3346,3368],"valid"],[[3369,3369],"valid"],[[3370,3385],"valid"],[[3386,3386],"valid"],[[3387,3388],"disallowed"],[[3389,3389],"valid"],[[3390,3395],"valid"],[[3396,3396],"valid"],[[3397,3397],"disallowed"],[[3398,3400],"valid"],[[3401,3401],"disallowed"],[[3402,3405],"valid"],[[3406,3406],"valid"],[[3407,3414],"disallowed"],[[3415,3415],"valid"],[[3416,3422],"disallowed"],[[3423,3423],"valid"],[[3424,3425],"valid"],[[3426,3427],"valid"],[[3428,3429],"disallowed"],[[3430,3439],"valid"],[[3440,3445],"valid",[],"NV8"],[[3446,3448],"disallowed"],[[3449,3449],"valid",[],"NV8"],[[3450,3455],"valid"],[[3456,3457],"disallowed"],[[3458,3459],"valid"],[[3460,3460],"disallowed"],[[3461,3478],"valid"],[[3479,3481],"disallowed"],[[3482,3505],"valid"],[[3506,3506],"disallowed"],[[3507,3515],"valid"],[[3516,3516],"disallowed"],[[3517,3517],"valid"],[[3518,3519],"disallowed"],[[3520,3526],"valid"],[[3527,3529],"disallowed"],[[3530,3530],"valid"],[[3531,3534],"disallowed"],[[3535,3540],"valid"],[[3541,3541],"disallowed"],[[3542,3542],"valid"],[[3543,3543],"disallowed"],[[3544,3551],"valid"],[[3552,3557],"disallowed"],[[3558,3567],"valid"],[[3568,3569],"disallowed"],[[3570,3571],"valid"],[[3572,3572],"valid",[],"NV8"],[[3573,3584],"disallowed"],[[3585,3634],"valid"],[[3635,3635],"mapped",[3661,3634]],[[3636,3642],"valid"],[[3643,3646],"disallowed"],[[3647,3647],"valid",[],"NV8"],[[3648,3662],"valid"],[[3663,3663],"valid",[],"NV8"],[[3664,3673],"valid"],[[3674,3675],"valid",[],"NV8"],[[3676,3712],"disallowed"],[[3713,3714],"valid"],[[3715,3715],"disallowed"],[[3716,3716],"valid"],[[3717,3718],"disallowed"],[[3719,3720],"valid"],[[3721,3721],"disallowed"],[[3722,3722],"valid"],[[3723,3724],"disallowed"],[[3725,3725],"valid"],[[3726,3731],"disallowed"],[[3732,3735],"valid"],[[3736,3736],"disallowed"],[[3737,3743],"valid"],[[3744,3744],"disallowed"],[[3745,3747],"valid"],[[3748,3748],"disallowed"],[[3749,3749],"valid"],[[3750,3750],"disallowed"],[[3751,3751],"valid"],[[3752,3753],"disallowed"],[[3754,3755],"valid"],[[3756,3756],"disallowed"],[[3757,3762],"valid"],[[3763,3763],"mapped",[3789,3762]],[[3764,3769],"valid"],[[3770,3770],"disallowed"],[[3771,3773],"valid"],[[3774,3775],"disallowed"],[[3776,3780],"valid"],[[3781,3781],"disallowed"],[[3782,3782],"valid"],[[3783,3783],"disallowed"],[[3784,3789],"valid"],[[3790,3791],"disallowed"],[[3792,3801],"valid"],[[3802,3803],"disallowed"],[[3804,3804],"mapped",[3755,3737]],[[3805,3805],"mapped",[3755,3745]],[[3806,3807],"valid"],[[3808,3839],"disallowed"],[[3840,3840],"valid"],[[3841,3850],"valid",[],"NV8"],[[3851,3851],"valid"],[[3852,3852],"mapped",[3851]],[[3853,3863],"valid",[],"NV8"],[[3864,3865],"valid"],[[3866,3871],"valid",[],"NV8"],[[3872,3881],"valid"],[[3882,3892],"valid",[],"NV8"],[[3893,3893],"valid"],[[3894,3894],"valid",[],"NV8"],[[3895,3895],"valid"],[[3896,3896],"valid",[],"NV8"],[[3897,3897],"valid"],[[3898,3901],"valid",[],"NV8"],[[3902,3906],"valid"],[[3907,3907],"mapped",[3906,4023]],[[3908,3911],"valid"],[[3912,3912],"disallowed"],[[3913,3916],"valid"],[[3917,3917],"mapped",[3916,4023]],[[3918,3921],"valid"],[[3922,3922],"mapped",[3921,4023]],[[3923,3926],"valid"],[[3927,3927],"mapped",[3926,4023]],[[3928,3931],"valid"],[[3932,3932],"mapped",[3931,4023]],[[3933,3944],"valid"],[[3945,3945],"mapped",[3904,4021]],[[3946,3946],"valid"],[[3947,3948],"valid"],[[3949,3952],"disallowed"],[[3953,3954],"valid"],[[3955,3955],"mapped",[3953,3954]],[[3956,3956],"valid"],[[3957,3957],"mapped",[3953,3956]],[[3958,3958],"mapped",[4018,3968]],[[3959,3959],"mapped",[4018,3953,3968]],[[3960,3960],"mapped",[4019,3968]],[[3961,3961],"mapped",[4019,3953,3968]],[[3962,3968],"valid"],[[3969,3969],"mapped",[3953,3968]],[[3970,3972],"valid"],[[3973,3973],"valid",[],"NV8"],[[3974,3979],"valid"],[[3980,3983],"valid"],[[3984,3986],"valid"],[[3987,3987],"mapped",[3986,4023]],[[3988,3989],"valid"],[[3990,3990],"valid"],[[3991,3991],"valid"],[[3992,3992],"disallowed"],[[3993,3996],"valid"],[[3997,3997],"mapped",[3996,4023]],[[3998,4001],"valid"],[[4002,4002],"mapped",[4001,4023]],[[4003,4006],"valid"],[[4007,4007],"mapped",[4006,4023]],[[4008,4011],"valid"],[[4012,4012],"mapped",[4011,4023]],[[4013,4013],"valid"],[[4014,4016],"valid"],[[4017,4023],"valid"],[[4024,4024],"valid"],[[4025,4025],"mapped",[3984,4021]],[[4026,4028],"valid"],[[4029,4029],"disallowed"],[[4030,4037],"valid",[],"NV8"],[[4038,4038],"valid"],[[4039,4044],"valid",[],"NV8"],[[4045,4045],"disallowed"],[[4046,4046],"valid",[],"NV8"],[[4047,4047],"valid",[],"NV8"],[[4048,4049],"valid",[],"NV8"],[[4050,4052],"valid",[],"NV8"],[[4053,4056],"valid",[],"NV8"],[[4057,4058],"valid",[],"NV8"],[[4059,4095],"disallowed"],[[4096,4129],"valid"],[[4130,4130],"valid"],[[4131,4135],"valid"],[[4136,4136],"valid"],[[4137,4138],"valid"],[[4139,4139],"valid"],[[4140,4146],"valid"],[[4147,4149],"valid"],[[4150,4153],"valid"],[[4154,4159],"valid"],[[4160,4169],"valid"],[[4170,4175],"valid",[],"NV8"],[[4176,4185],"valid"],[[4186,4249],"valid"],[[4250,4253],"valid"],[[4254,4255],"valid",[],"NV8"],[[4256,4293],"disallowed"],[[4294,4294],"disallowed"],[[4295,4295],"mapped",[11559]],[[4296,4300],"disallowed"],[[4301,4301],"mapped",[11565]],[[4302,4303],"disallowed"],[[4304,4342],"valid"],[[4343,4344],"valid"],[[4345,4346],"valid"],[[4347,4347],"valid",[],"NV8"],[[4348,4348],"mapped",[4316]],[[4349,4351],"valid"],[[4352,4441],"valid",[],"NV8"],[[4442,4446],"valid",[],"NV8"],[[4447,4448],"disallowed"],[[4449,4514],"valid",[],"NV8"],[[4515,4519],"valid",[],"NV8"],[[4520,4601],"valid",[],"NV8"],[[4602,4607],"valid",[],"NV8"],[[4608,4614],"valid"],[[4615,4615],"valid"],[[4616,4678],"valid"],[[4679,4679],"valid"],[[4680,4680],"valid"],[[4681,4681],"disallowed"],[[4682,4685],"valid"],[[4686,4687],"disallowed"],[[4688,4694],"valid"],[[4695,4695],"disallowed"],[[4696,4696],"valid"],[[4697,4697],"disallowed"],[[4698,4701],"valid"],[[4702,4703],"disallowed"],[[4704,4742],"valid"],[[4743,4743],"valid"],[[4744,4744],"valid"],[[4745,4745],"disallowed"],[[4746,4749],"valid"],[[4750,4751],"disallowed"],[[4752,4782],"valid"],[[4783,4783],"valid"],[[4784,4784],"valid"],[[4785,4785],"disallowed"],[[4786,4789],"valid"],[[4790,4791],"disallowed"],[[4792,4798],"valid"],[[4799,4799],"disallowed"],[[4800,4800],"valid"],[[4801,4801],"disallowed"],[[4802,4805],"valid"],[[4806,4807],"disallowed"],[[4808,4814],"valid"],[[4815,4815],"valid"],[[4816,4822],"valid"],[[4823,4823],"disallowed"],[[4824,4846],"valid"],[[4847,4847],"valid"],[[4848,4878],"valid"],[[4879,4879],"valid"],[[4880,4880],"valid"],[[4881,4881],"disallowed"],[[4882,4885],"valid"],[[4886,4887],"disallowed"],[[4888,4894],"valid"],[[4895,4895],"valid"],[[4896,4934],"valid"],[[4935,4935],"valid"],[[4936,4954],"valid"],[[4955,4956],"disallowed"],[[4957,4958],"valid"],[[4959,4959],"valid"],[[4960,4960],"valid",[],"NV8"],[[4961,4988],"valid",[],"NV8"],[[4989,4991],"disallowed"],[[4992,5007],"valid"],[[5008,5017],"valid",[],"NV8"],[[5018,5023],"disallowed"],[[5024,5108],"valid"],[[5109,5109],"valid"],[[5110,5111],"disallowed"],[[5112,5112],"mapped",[5104]],[[5113,5113],"mapped",[5105]],[[5114,5114],"mapped",[5106]],[[5115,5115],"mapped",[5107]],[[5116,5116],"mapped",[5108]],[[5117,5117],"mapped",[5109]],[[5118,5119],"disallowed"],[[5120,5120],"valid",[],"NV8"],[[5121,5740],"valid"],[[5741,5742],"valid",[],"NV8"],[[5743,5750],"valid"],[[5751,5759],"valid"],[[5760,5760],"disallowed"],[[5761,5786],"valid"],[[5787,5788],"valid",[],"NV8"],[[5789,5791],"disallowed"],[[5792,5866],"valid"],[[5867,5872],"valid",[],"NV8"],[[5873,5880],"valid"],[[5881,5887],"disallowed"],[[5888,5900],"valid"],[[5901,5901],"disallowed"],[[5902,5908],"valid"],[[5909,5919],"disallowed"],[[5920,5940],"valid"],[[5941,5942],"valid",[],"NV8"],[[5943,5951],"disallowed"],[[5952,5971],"valid"],[[5972,5983],"disallowed"],[[5984,5996],"valid"],[[5997,5997],"disallowed"],[[5998,6e3],"valid"],[[6001,6001],"disallowed"],[[6002,6003],"valid"],[[6004,6015],"disallowed"],[[6016,6067],"valid"],[[6068,6069],"disallowed"],[[6070,6099],"valid"],[[6100,6102],"valid",[],"NV8"],[[6103,6103],"valid"],[[6104,6107],"valid",[],"NV8"],[[6108,6108],"valid"],[[6109,6109],"valid"],[[6110,6111],"disallowed"],[[6112,6121],"valid"],[[6122,6127],"disallowed"],[[6128,6137],"valid",[],"NV8"],[[6138,6143],"disallowed"],[[6144,6149],"valid",[],"NV8"],[[6150,6150],"disallowed"],[[6151,6154],"valid",[],"NV8"],[[6155,6157],"ignored"],[[6158,6158],"disallowed"],[[6159,6159],"disallowed"],[[6160,6169],"valid"],[[6170,6175],"disallowed"],[[6176,6263],"valid"],[[6264,6271],"disallowed"],[[6272,6313],"valid"],[[6314,6314],"valid"],[[6315,6319],"disallowed"],[[6320,6389],"valid"],[[6390,6399],"disallowed"],[[6400,6428],"valid"],[[6429,6430],"valid"],[[6431,6431],"disallowed"],[[6432,6443],"valid"],[[6444,6447],"disallowed"],[[6448,6459],"valid"],[[6460,6463],"disallowed"],[[6464,6464],"valid",[],"NV8"],[[6465,6467],"disallowed"],[[6468,6469],"valid",[],"NV8"],[[6470,6509],"valid"],[[6510,6511],"disallowed"],[[6512,6516],"valid"],[[6517,6527],"disallowed"],[[6528,6569],"valid"],[[6570,6571],"valid"],[[6572,6575],"disallowed"],[[6576,6601],"valid"],[[6602,6607],"disallowed"],[[6608,6617],"valid"],[[6618,6618],"valid",[],"XV8"],[[6619,6621],"disallowed"],[[6622,6623],"valid",[],"NV8"],[[6624,6655],"valid",[],"NV8"],[[6656,6683],"valid"],[[6684,6685],"disallowed"],[[6686,6687],"valid",[],"NV8"],[[6688,6750],"valid"],[[6751,6751],"disallowed"],[[6752,6780],"valid"],[[6781,6782],"disallowed"],[[6783,6793],"valid"],[[6794,6799],"disallowed"],[[6800,6809],"valid"],[[6810,6815],"disallowed"],[[6816,6822],"valid",[],"NV8"],[[6823,6823],"valid"],[[6824,6829],"valid",[],"NV8"],[[6830,6831],"disallowed"],[[6832,6845],"valid"],[[6846,6846],"valid",[],"NV8"],[[6847,6911],"disallowed"],[[6912,6987],"valid"],[[6988,6991],"disallowed"],[[6992,7001],"valid"],[[7002,7018],"valid",[],"NV8"],[[7019,7027],"valid"],[[7028,7036],"valid",[],"NV8"],[[7037,7039],"disallowed"],[[7040,7082],"valid"],[[7083,7085],"valid"],[[7086,7097],"valid"],[[7098,7103],"valid"],[[7104,7155],"valid"],[[7156,7163],"disallowed"],[[7164,7167],"valid",[],"NV8"],[[7168,7223],"valid"],[[7224,7226],"disallowed"],[[7227,7231],"valid",[],"NV8"],[[7232,7241],"valid"],[[7242,7244],"disallowed"],[[7245,7293],"valid"],[[7294,7295],"valid",[],"NV8"],[[7296,7359],"disallowed"],[[7360,7367],"valid",[],"NV8"],[[7368,7375],"disallowed"],[[7376,7378],"valid"],[[7379,7379],"valid",[],"NV8"],[[7380,7410],"valid"],[[7411,7414],"valid"],[[7415,7415],"disallowed"],[[7416,7417],"valid"],[[7418,7423],"disallowed"],[[7424,7467],"valid"],[[7468,7468],"mapped",[97]],[[7469,7469],"mapped",[230]],[[7470,7470],"mapped",[98]],[[7471,7471],"valid"],[[7472,7472],"mapped",[100]],[[7473,7473],"mapped",[101]],[[7474,7474],"mapped",[477]],[[7475,7475],"mapped",[103]],[[7476,7476],"mapped",[104]],[[7477,7477],"mapped",[105]],[[7478,7478],"mapped",[106]],[[7479,7479],"mapped",[107]],[[7480,7480],"mapped",[108]],[[7481,7481],"mapped",[109]],[[7482,7482],"mapped",[110]],[[7483,7483],"valid"],[[7484,7484],"mapped",[111]],[[7485,7485],"mapped",[547]],[[7486,7486],"mapped",[112]],[[7487,7487],"mapped",[114]],[[7488,7488],"mapped",[116]],[[7489,7489],"mapped",[117]],[[7490,7490],"mapped",[119]],[[7491,7491],"mapped",[97]],[[7492,7492],"mapped",[592]],[[7493,7493],"mapped",[593]],[[7494,7494],"mapped",[7426]],[[7495,7495],"mapped",[98]],[[7496,7496],"mapped",[100]],[[7497,7497],"mapped",[101]],[[7498,7498],"mapped",[601]],[[7499,7499],"mapped",[603]],[[7500,7500],"mapped",[604]],[[7501,7501],"mapped",[103]],[[7502,7502],"valid"],[[7503,7503],"mapped",[107]],[[7504,7504],"mapped",[109]],[[7505,7505],"mapped",[331]],[[7506,7506],"mapped",[111]],[[7507,7507],"mapped",[596]],[[7508,7508],"mapped",[7446]],[[7509,7509],"mapped",[7447]],[[7510,7510],"mapped",[112]],[[7511,7511],"mapped",[116]],[[7512,7512],"mapped",[117]],[[7513,7513],"mapped",[7453]],[[7514,7514],"mapped",[623]],[[7515,7515],"mapped",[118]],[[7516,7516],"mapped",[7461]],[[7517,7517],"mapped",[946]],[[7518,7518],"mapped",[947]],[[7519,7519],"mapped",[948]],[[7520,7520],"mapped",[966]],[[7521,7521],"mapped",[967]],[[7522,7522],"mapped",[105]],[[7523,7523],"mapped",[114]],[[7524,7524],"mapped",[117]],[[7525,7525],"mapped",[118]],[[7526,7526],"mapped",[946]],[[7527,7527],"mapped",[947]],[[7528,7528],"mapped",[961]],[[7529,7529],"mapped",[966]],[[7530,7530],"mapped",[967]],[[7531,7531],"valid"],[[7532,7543],"valid"],[[7544,7544],"mapped",[1085]],[[7545,7578],"valid"],[[7579,7579],"mapped",[594]],[[7580,7580],"mapped",[99]],[[7581,7581],"mapped",[597]],[[7582,7582],"mapped",[240]],[[7583,7583],"mapped",[604]],[[7584,7584],"mapped",[102]],[[7585,7585],"mapped",[607]],[[7586,7586],"mapped",[609]],[[7587,7587],"mapped",[613]],[[7588,7588],"mapped",[616]],[[7589,7589],"mapped",[617]],[[7590,7590],"mapped",[618]],[[7591,7591],"mapped",[7547]],[[7592,7592],"mapped",[669]],[[7593,7593],"mapped",[621]],[[7594,7594],"mapped",[7557]],[[7595,7595],"mapped",[671]],[[7596,7596],"mapped",[625]],[[7597,7597],"mapped",[624]],[[7598,7598],"mapped",[626]],[[7599,7599],"mapped",[627]],[[7600,7600],"mapped",[628]],[[7601,7601],"mapped",[629]],[[7602,7602],"mapped",[632]],[[7603,7603],"mapped",[642]],[[7604,7604],"mapped",[643]],[[7605,7605],"mapped",[427]],[[7606,7606],"mapped",[649]],[[7607,7607],"mapped",[650]],[[7608,7608],"mapped",[7452]],[[7609,7609],"mapped",[651]],[[7610,7610],"mapped",[652]],[[7611,7611],"mapped",[122]],[[7612,7612],"mapped",[656]],[[7613,7613],"mapped",[657]],[[7614,7614],"mapped",[658]],[[7615,7615],"mapped",[952]],[[7616,7619],"valid"],[[7620,7626],"valid"],[[7627,7654],"valid"],[[7655,7669],"valid"],[[7670,7675],"disallowed"],[[7676,7676],"valid"],[[7677,7677],"valid"],[[7678,7679],"valid"],[[7680,7680],"mapped",[7681]],[[7681,7681],"valid"],[[7682,7682],"mapped",[7683]],[[7683,7683],"valid"],[[7684,7684],"mapped",[7685]],[[7685,7685],"valid"],[[7686,7686],"mapped",[7687]],[[7687,7687],"valid"],[[7688,7688],"mapped",[7689]],[[7689,7689],"valid"],[[7690,7690],"mapped",[7691]],[[7691,7691],"valid"],[[7692,7692],"mapped",[7693]],[[7693,7693],"valid"],[[7694,7694],"mapped",[7695]],[[7695,7695],"valid"],[[7696,7696],"mapped",[7697]],[[7697,7697],"valid"],[[7698,7698],"mapped",[7699]],[[7699,7699],"valid"],[[7700,7700],"mapped",[7701]],[[7701,7701],"valid"],[[7702,7702],"mapped",[7703]],[[7703,7703],"valid"],[[7704,7704],"mapped",[7705]],[[7705,7705],"valid"],[[7706,7706],"mapped",[7707]],[[7707,7707],"valid"],[[7708,7708],"mapped",[7709]],[[7709,7709],"valid"],[[7710,7710],"mapped",[7711]],[[7711,7711],"valid"],[[7712,7712],"mapped",[7713]],[[7713,7713],"valid"],[[7714,7714],"mapped",[7715]],[[7715,7715],"valid"],[[7716,7716],"mapped",[7717]],[[7717,7717],"valid"],[[7718,7718],"mapped",[7719]],[[7719,7719],"valid"],[[7720,7720],"mapped",[7721]],[[7721,7721],"valid"],[[7722,7722],"mapped",[7723]],[[7723,7723],"valid"],[[7724,7724],"mapped",[7725]],[[7725,7725],"valid"],[[7726,7726],"mapped",[7727]],[[7727,7727],"valid"],[[7728,7728],"mapped",[7729]],[[7729,7729],"valid"],[[7730,7730],"mapped",[7731]],[[7731,7731],"valid"],[[7732,7732],"mapped",[7733]],[[7733,7733],"valid"],[[7734,7734],"mapped",[7735]],[[7735,7735],"valid"],[[7736,7736],"mapped",[7737]],[[7737,7737],"valid"],[[7738,7738],"mapped",[7739]],[[7739,7739],"valid"],[[7740,7740],"mapped",[7741]],[[7741,7741],"valid"],[[7742,7742],"mapped",[7743]],[[7743,7743],"valid"],[[7744,7744],"mapped",[7745]],[[7745,7745],"valid"],[[7746,7746],"mapped",[7747]],[[7747,7747],"valid"],[[7748,7748],"mapped",[7749]],[[7749,7749],"valid"],[[7750,7750],"mapped",[7751]],[[7751,7751],"valid"],[[7752,7752],"mapped",[7753]],[[7753,7753],"valid"],[[7754,7754],"mapped",[7755]],[[7755,7755],"valid"],[[7756,7756],"mapped",[7757]],[[7757,7757],"valid"],[[7758,7758],"mapped",[7759]],[[7759,7759],"valid"],[[7760,7760],"mapped",[7761]],[[7761,7761],"valid"],[[7762,7762],"mapped",[7763]],[[7763,7763],"valid"],[[7764,7764],"mapped",[7765]],[[7765,7765],"valid"],[[7766,7766],"mapped",[7767]],[[7767,7767],"valid"],[[7768,7768],"mapped",[7769]],[[7769,7769],"valid"],[[7770,7770],"mapped",[7771]],[[7771,7771],"valid"],[[7772,7772],"mapped",[7773]],[[7773,7773],"valid"],[[7774,7774],"mapped",[7775]],[[7775,7775],"valid"],[[7776,7776],"mapped",[7777]],[[7777,7777],"valid"],[[7778,7778],"mapped",[7779]],[[7779,7779],"valid"],[[7780,7780],"mapped",[7781]],[[7781,7781],"valid"],[[7782,7782],"mapped",[7783]],[[7783,7783],"valid"],[[7784,7784],"mapped",[7785]],[[7785,7785],"valid"],[[7786,7786],"mapped",[7787]],[[7787,7787],"valid"],[[7788,7788],"mapped",[7789]],[[7789,7789],"valid"],[[7790,7790],"mapped",[7791]],[[7791,7791],"valid"],[[7792,7792],"mapped",[7793]],[[7793,7793],"valid"],[[7794,7794],"mapped",[7795]],[[7795,7795],"valid"],[[7796,7796],"mapped",[7797]],[[7797,7797],"valid"],[[7798,7798],"mapped",[7799]],[[7799,7799],"valid"],[[7800,7800],"mapped",[7801]],[[7801,7801],"valid"],[[7802,7802],"mapped",[7803]],[[7803,7803],"valid"],[[7804,7804],"mapped",[7805]],[[7805,7805],"valid"],[[7806,7806],"mapped",[7807]],[[7807,7807],"valid"],[[7808,7808],"mapped",[7809]],[[7809,7809],"valid"],[[7810,7810],"mapped",[7811]],[[7811,7811],"valid"],[[7812,7812],"mapped",[7813]],[[7813,7813],"valid"],[[7814,7814],"mapped",[7815]],[[7815,7815],"valid"],[[7816,7816],"mapped",[7817]],[[7817,7817],"valid"],[[7818,7818],"mapped",[7819]],[[7819,7819],"valid"],[[7820,7820],"mapped",[7821]],[[7821,7821],"valid"],[[7822,7822],"mapped",[7823]],[[7823,7823],"valid"],[[7824,7824],"mapped",[7825]],[[7825,7825],"valid"],[[7826,7826],"mapped",[7827]],[[7827,7827],"valid"],[[7828,7828],"mapped",[7829]],[[7829,7833],"valid"],[[7834,7834],"mapped",[97,702]],[[7835,7835],"mapped",[7777]],[[7836,7837],"valid"],[[7838,7838],"mapped",[115,115]],[[7839,7839],"valid"],[[7840,7840],"mapped",[7841]],[[7841,7841],"valid"],[[7842,7842],"mapped",[7843]],[[7843,7843],"valid"],[[7844,7844],"mapped",[7845]],[[7845,7845],"valid"],[[7846,7846],"mapped",[7847]],[[7847,7847],"valid"],[[7848,7848],"mapped",[7849]],[[7849,7849],"valid"],[[7850,7850],"mapped",[7851]],[[7851,7851],"valid"],[[7852,7852],"mapped",[7853]],[[7853,7853],"valid"],[[7854,7854],"mapped",[7855]],[[7855,7855],"valid"],[[7856,7856],"mapped",[7857]],[[7857,7857],"valid"],[[7858,7858],"mapped",[7859]],[[7859,7859],"valid"],[[7860,7860],"mapped",[7861]],[[7861,7861],"valid"],[[7862,7862],"mapped",[7863]],[[7863,7863],"valid"],[[7864,7864],"mapped",[7865]],[[7865,7865],"valid"],[[7866,7866],"mapped",[7867]],[[7867,7867],"valid"],[[7868,7868],"mapped",[7869]],[[7869,7869],"valid"],[[7870,7870],"mapped",[7871]],[[7871,7871],"valid"],[[7872,7872],"mapped",[7873]],[[7873,7873],"valid"],[[7874,7874],"mapped",[7875]],[[7875,7875],"valid"],[[7876,7876],"mapped",[7877]],[[7877,7877],"valid"],[[7878,7878],"mapped",[7879]],[[7879,7879],"valid"],[[7880,7880],"mapped",[7881]],[[7881,7881],"valid"],[[7882,7882],"mapped",[7883]],[[7883,7883],"valid"],[[7884,7884],"mapped",[7885]],[[7885,7885],"valid"],[[7886,7886],"mapped",[7887]],[[7887,7887],"valid"],[[7888,7888],"mapped",[7889]],[[7889,7889],"valid"],[[7890,7890],"mapped",[7891]],[[7891,7891],"valid"],[[7892,7892],"mapped",[7893]],[[7893,7893],"valid"],[[7894,7894],"mapped",[7895]],[[7895,7895],"valid"],[[7896,7896],"mapped",[7897]],[[7897,7897],"valid"],[[7898,7898],"mapped",[7899]],[[7899,7899],"valid"],[[7900,7900],"mapped",[7901]],[[7901,7901],"valid"],[[7902,7902],"mapped",[7903]],[[7903,7903],"valid"],[[7904,7904],"mapped",[7905]],[[7905,7905],"valid"],[[7906,7906],"mapped",[7907]],[[7907,7907],"valid"],[[7908,7908],"mapped",[7909]],[[7909,7909],"valid"],[[7910,7910],"mapped",[7911]],[[7911,7911],"valid"],[[7912,7912],"mapped",[7913]],[[7913,7913],"valid"],[[7914,7914],"mapped",[7915]],[[7915,7915],"valid"],[[7916,7916],"mapped",[7917]],[[7917,7917],"valid"],[[7918,7918],"mapped",[7919]],[[7919,7919],"valid"],[[7920,7920],"mapped",[7921]],[[7921,7921],"valid"],[[7922,7922],"mapped",[7923]],[[7923,7923],"valid"],[[7924,7924],"mapped",[7925]],[[7925,7925],"valid"],[[7926,7926],"mapped",[7927]],[[7927,7927],"valid"],[[7928,7928],"mapped",[7929]],[[7929,7929],"valid"],[[7930,7930],"mapped",[7931]],[[7931,7931],"valid"],[[7932,7932],"mapped",[7933]],[[7933,7933],"valid"],[[7934,7934],"mapped",[7935]],[[7935,7935],"valid"],[[7936,7943],"valid"],[[7944,7944],"mapped",[7936]],[[7945,7945],"mapped",[7937]],[[7946,7946],"mapped",[7938]],[[7947,7947],"mapped",[7939]],[[7948,7948],"mapped",[7940]],[[7949,7949],"mapped",[7941]],[[7950,7950],"mapped",[7942]],[[7951,7951],"mapped",[7943]],[[7952,7957],"valid"],[[7958,7959],"disallowed"],[[7960,7960],"mapped",[7952]],[[7961,7961],"mapped",[7953]],[[7962,7962],"mapped",[7954]],[[7963,7963],"mapped",[7955]],[[7964,7964],"mapped",[7956]],[[7965,7965],"mapped",[7957]],[[7966,7967],"disallowed"],[[7968,7975],"valid"],[[7976,7976],"mapped",[7968]],[[7977,7977],"mapped",[7969]],[[7978,7978],"mapped",[7970]],[[7979,7979],"mapped",[7971]],[[7980,7980],"mapped",[7972]],[[7981,7981],"mapped",[7973]],[[7982,7982],"mapped",[7974]],[[7983,7983],"mapped",[7975]],[[7984,7991],"valid"],[[7992,7992],"mapped",[7984]],[[7993,7993],"mapped",[7985]],[[7994,7994],"mapped",[7986]],[[7995,7995],"mapped",[7987]],[[7996,7996],"mapped",[7988]],[[7997,7997],"mapped",[7989]],[[7998,7998],"mapped",[7990]],[[7999,7999],"mapped",[7991]],[[8e3,8005],"valid"],[[8006,8007],"disallowed"],[[8008,8008],"mapped",[8e3]],[[8009,8009],"mapped",[8001]],[[8010,8010],"mapped",[8002]],[[8011,8011],"mapped",[8003]],[[8012,8012],"mapped",[8004]],[[8013,8013],"mapped",[8005]],[[8014,8015],"disallowed"],[[8016,8023],"valid"],[[8024,8024],"disallowed"],[[8025,8025],"mapped",[8017]],[[8026,8026],"disallowed"],[[8027,8027],"mapped",[8019]],[[8028,8028],"disallowed"],[[8029,8029],"mapped",[8021]],[[8030,8030],"disallowed"],[[8031,8031],"mapped",[8023]],[[8032,8039],"valid"],[[8040,8040],"mapped",[8032]],[[8041,8041],"mapped",[8033]],[[8042,8042],"mapped",[8034]],[[8043,8043],"mapped",[8035]],[[8044,8044],"mapped",[8036]],[[8045,8045],"mapped",[8037]],[[8046,8046],"mapped",[8038]],[[8047,8047],"mapped",[8039]],[[8048,8048],"valid"],[[8049,8049],"mapped",[940]],[[8050,8050],"valid"],[[8051,8051],"mapped",[941]],[[8052,8052],"valid"],[[8053,8053],"mapped",[942]],[[8054,8054],"valid"],[[8055,8055],"mapped",[943]],[[8056,8056],"valid"],[[8057,8057],"mapped",[972]],[[8058,8058],"valid"],[[8059,8059],"mapped",[973]],[[8060,8060],"valid"],[[8061,8061],"mapped",[974]],[[8062,8063],"disallowed"],[[8064,8064],"mapped",[7936,953]],[[8065,8065],"mapped",[7937,953]],[[8066,8066],"mapped",[7938,953]],[[8067,8067],"mapped",[7939,953]],[[8068,8068],"mapped",[7940,953]],[[8069,8069],"mapped",[7941,953]],[[8070,8070],"mapped",[7942,953]],[[8071,8071],"mapped",[7943,953]],[[8072,8072],"mapped",[7936,953]],[[8073,8073],"mapped",[7937,953]],[[8074,8074],"mapped",[7938,953]],[[8075,8075],"mapped",[7939,953]],[[8076,8076],"mapped",[7940,953]],[[8077,8077],"mapped",[7941,953]],[[8078,8078],"mapped",[7942,953]],[[8079,8079],"mapped",[7943,953]],[[8080,8080],"mapped",[7968,953]],[[8081,8081],"mapped",[7969,953]],[[8082,8082],"mapped",[7970,953]],[[8083,8083],"mapped",[7971,953]],[[8084,8084],"mapped",[7972,953]],[[8085,8085],"mapped",[7973,953]],[[8086,8086],"mapped",[7974,953]],[[8087,8087],"mapped",[7975,953]],[[8088,8088],"mapped",[7968,953]],[[8089,8089],"mapped",[7969,953]],[[8090,8090],"mapped",[7970,953]],[[8091,8091],"mapped",[7971,953]],[[8092,8092],"mapped",[7972,953]],[[8093,8093],"mapped",[7973,953]],[[8094,8094],"mapped",[7974,953]],[[8095,8095],"mapped",[7975,953]],[[8096,8096],"mapped",[8032,953]],[[8097,8097],"mapped",[8033,953]],[[8098,8098],"mapped",[8034,953]],[[8099,8099],"mapped",[8035,953]],[[8100,8100],"mapped",[8036,953]],[[8101,8101],"mapped",[8037,953]],[[8102,8102],"mapped",[8038,953]],[[8103,8103],"mapped",[8039,953]],[[8104,8104],"mapped",[8032,953]],[[8105,8105],"mapped",[8033,953]],[[8106,8106],"mapped",[8034,953]],[[8107,8107],"mapped",[8035,953]],[[8108,8108],"mapped",[8036,953]],[[8109,8109],"mapped",[8037,953]],[[8110,8110],"mapped",[8038,953]],[[8111,8111],"mapped",[8039,953]],[[8112,8113],"valid"],[[8114,8114],"mapped",[8048,953]],[[8115,8115],"mapped",[945,953]],[[8116,8116],"mapped",[940,953]],[[8117,8117],"disallowed"],[[8118,8118],"valid"],[[8119,8119],"mapped",[8118,953]],[[8120,8120],"mapped",[8112]],[[8121,8121],"mapped",[8113]],[[8122,8122],"mapped",[8048]],[[8123,8123],"mapped",[940]],[[8124,8124],"mapped",[945,953]],[[8125,8125],"disallowed_STD3_mapped",[32,787]],[[8126,8126],"mapped",[953]],[[8127,8127],"disallowed_STD3_mapped",[32,787]],[[8128,8128],"disallowed_STD3_mapped",[32,834]],[[8129,8129],"disallowed_STD3_mapped",[32,776,834]],[[8130,8130],"mapped",[8052,953]],[[8131,8131],"mapped",[951,953]],[[8132,8132],"mapped",[942,953]],[[8133,8133],"disallowed"],[[8134,8134],"valid"],[[8135,8135],"mapped",[8134,953]],[[8136,8136],"mapped",[8050]],[[8137,8137],"mapped",[941]],[[8138,8138],"mapped",[8052]],[[8139,8139],"mapped",[942]],[[8140,8140],"mapped",[951,953]],[[8141,8141],"disallowed_STD3_mapped",[32,787,768]],[[8142,8142],"disallowed_STD3_mapped",[32,787,769]],[[8143,8143],"disallowed_STD3_mapped",[32,787,834]],[[8144,8146],"valid"],[[8147,8147],"mapped",[912]],[[8148,8149],"disallowed"],[[8150,8151],"valid"],[[8152,8152],"mapped",[8144]],[[8153,8153],"mapped",[8145]],[[8154,8154],"mapped",[8054]],[[8155,8155],"mapped",[943]],[[8156,8156],"disallowed"],[[8157,8157],"disallowed_STD3_mapped",[32,788,768]],[[8158,8158],"disallowed_STD3_mapped",[32,788,769]],[[8159,8159],"disallowed_STD3_mapped",[32,788,834]],[[8160,8162],"valid"],[[8163,8163],"mapped",[944]],[[8164,8167],"valid"],[[8168,8168],"mapped",[8160]],[[8169,8169],"mapped",[8161]],[[8170,8170],"mapped",[8058]],[[8171,8171],"mapped",[973]],[[8172,8172],"mapped",[8165]],[[8173,8173],"disallowed_STD3_mapped",[32,776,768]],[[8174,8174],"disallowed_STD3_mapped",[32,776,769]],[[8175,8175],"disallowed_STD3_mapped",[96]],[[8176,8177],"disallowed"],[[8178,8178],"mapped",[8060,953]],[[8179,8179],"mapped",[969,953]],[[8180,8180],"mapped",[974,953]],[[8181,8181],"disallowed"],[[8182,8182],"valid"],[[8183,8183],"mapped",[8182,953]],[[8184,8184],"mapped",[8056]],[[8185,8185],"mapped",[972]],[[8186,8186],"mapped",[8060]],[[8187,8187],"mapped",[974]],[[8188,8188],"mapped",[969,953]],[[8189,8189],"disallowed_STD3_mapped",[32,769]],[[8190,8190],"disallowed_STD3_mapped",[32,788]],[[8191,8191],"disallowed"],[[8192,8202],"disallowed_STD3_mapped",[32]],[[8203,8203],"ignored"],[[8204,8205],"deviation",[]],[[8206,8207],"disallowed"],[[8208,8208],"valid",[],"NV8"],[[8209,8209],"mapped",[8208]],[[8210,8214],"valid",[],"NV8"],[[8215,8215],"disallowed_STD3_mapped",[32,819]],[[8216,8227],"valid",[],"NV8"],[[8228,8230],"disallowed"],[[8231,8231],"valid",[],"NV8"],[[8232,8238],"disallowed"],[[8239,8239],"disallowed_STD3_mapped",[32]],[[8240,8242],"valid",[],"NV8"],[[8243,8243],"mapped",[8242,8242]],[[8244,8244],"mapped",[8242,8242,8242]],[[8245,8245],"valid",[],"NV8"],[[8246,8246],"mapped",[8245,8245]],[[8247,8247],"mapped",[8245,8245,8245]],[[8248,8251],"valid",[],"NV8"],[[8252,8252],"disallowed_STD3_mapped",[33,33]],[[8253,8253],"valid",[],"NV8"],[[8254,8254],"disallowed_STD3_mapped",[32,773]],[[8255,8262],"valid",[],"NV8"],[[8263,8263],"disallowed_STD3_mapped",[63,63]],[[8264,8264],"disallowed_STD3_mapped",[63,33]],[[8265,8265],"disallowed_STD3_mapped",[33,63]],[[8266,8269],"valid",[],"NV8"],[[8270,8274],"valid",[],"NV8"],[[8275,8276],"valid",[],"NV8"],[[8277,8278],"valid",[],"NV8"],[[8279,8279],"mapped",[8242,8242,8242,8242]],[[8280,8286],"valid",[],"NV8"],[[8287,8287],"disallowed_STD3_mapped",[32]],[[8288,8288],"ignored"],[[8289,8291],"disallowed"],[[8292,8292],"ignored"],[[8293,8293],"disallowed"],[[8294,8297],"disallowed"],[[8298,8303],"disallowed"],[[8304,8304],"mapped",[48]],[[8305,8305],"mapped",[105]],[[8306,8307],"disallowed"],[[8308,8308],"mapped",[52]],[[8309,8309],"mapped",[53]],[[8310,8310],"mapped",[54]],[[8311,8311],"mapped",[55]],[[8312,8312],"mapped",[56]],[[8313,8313],"mapped",[57]],[[8314,8314],"disallowed_STD3_mapped",[43]],[[8315,8315],"mapped",[8722]],[[8316,8316],"disallowed_STD3_mapped",[61]],[[8317,8317],"disallowed_STD3_mapped",[40]],[[8318,8318],"disallowed_STD3_mapped",[41]],[[8319,8319],"mapped",[110]],[[8320,8320],"mapped",[48]],[[8321,8321],"mapped",[49]],[[8322,8322],"mapped",[50]],[[8323,8323],"mapped",[51]],[[8324,8324],"mapped",[52]],[[8325,8325],"mapped",[53]],[[8326,8326],"mapped",[54]],[[8327,8327],"mapped",[55]],[[8328,8328],"mapped",[56]],[[8329,8329],"mapped",[57]],[[8330,8330],"disallowed_STD3_mapped",[43]],[[8331,8331],"mapped",[8722]],[[8332,8332],"disallowed_STD3_mapped",[61]],[[8333,8333],"disallowed_STD3_mapped",[40]],[[8334,8334],"disallowed_STD3_mapped",[41]],[[8335,8335],"disallowed"],[[8336,8336],"mapped",[97]],[[8337,8337],"mapped",[101]],[[8338,8338],"mapped",[111]],[[8339,8339],"mapped",[120]],[[8340,8340],"mapped",[601]],[[8341,8341],"mapped",[104]],[[8342,8342],"mapped",[107]],[[8343,8343],"mapped",[108]],[[8344,8344],"mapped",[109]],[[8345,8345],"mapped",[110]],[[8346,8346],"mapped",[112]],[[8347,8347],"mapped",[115]],[[8348,8348],"mapped",[116]],[[8349,8351],"disallowed"],[[8352,8359],"valid",[],"NV8"],[[8360,8360],"mapped",[114,115]],[[8361,8362],"valid",[],"NV8"],[[8363,8363],"valid",[],"NV8"],[[8364,8364],"valid",[],"NV8"],[[8365,8367],"valid",[],"NV8"],[[8368,8369],"valid",[],"NV8"],[[8370,8373],"valid",[],"NV8"],[[8374,8376],"valid",[],"NV8"],[[8377,8377],"valid",[],"NV8"],[[8378,8378],"valid",[],"NV8"],[[8379,8381],"valid",[],"NV8"],[[8382,8382],"valid",[],"NV8"],[[8383,8399],"disallowed"],[[8400,8417],"valid",[],"NV8"],[[8418,8419],"valid",[],"NV8"],[[8420,8426],"valid",[],"NV8"],[[8427,8427],"valid",[],"NV8"],[[8428,8431],"valid",[],"NV8"],[[8432,8432],"valid",[],"NV8"],[[8433,8447],"disallowed"],[[8448,8448],"disallowed_STD3_mapped",[97,47,99]],[[8449,8449],"disallowed_STD3_mapped",[97,47,115]],[[8450,8450],"mapped",[99]],[[8451,8451],"mapped",[176,99]],[[8452,8452],"valid",[],"NV8"],[[8453,8453],"disallowed_STD3_mapped",[99,47,111]],[[8454,8454],"disallowed_STD3_mapped",[99,47,117]],[[8455,8455],"mapped",[603]],[[8456,8456],"valid",[],"NV8"],[[8457,8457],"mapped",[176,102]],[[8458,8458],"mapped",[103]],[[8459,8462],"mapped",[104]],[[8463,8463],"mapped",[295]],[[8464,8465],"mapped",[105]],[[8466,8467],"mapped",[108]],[[8468,8468],"valid",[],"NV8"],[[8469,8469],"mapped",[110]],[[8470,8470],"mapped",[110,111]],[[8471,8472],"valid",[],"NV8"],[[8473,8473],"mapped",[112]],[[8474,8474],"mapped",[113]],[[8475,8477],"mapped",[114]],[[8478,8479],"valid",[],"NV8"],[[8480,8480],"mapped",[115,109]],[[8481,8481],"mapped",[116,101,108]],[[8482,8482],"mapped",[116,109]],[[8483,8483],"valid",[],"NV8"],[[8484,8484],"mapped",[122]],[[8485,8485],"valid",[],"NV8"],[[8486,8486],"mapped",[969]],[[8487,8487],"valid",[],"NV8"],[[8488,8488],"mapped",[122]],[[8489,8489],"valid",[],"NV8"],[[8490,8490],"mapped",[107]],[[8491,8491],"mapped",[229]],[[8492,8492],"mapped",[98]],[[8493,8493],"mapped",[99]],[[8494,8494],"valid",[],"NV8"],[[8495,8496],"mapped",[101]],[[8497,8497],"mapped",[102]],[[8498,8498],"disallowed"],[[8499,8499],"mapped",[109]],[[8500,8500],"mapped",[111]],[[8501,8501],"mapped",[1488]],[[8502,8502],"mapped",[1489]],[[8503,8503],"mapped",[1490]],[[8504,8504],"mapped",[1491]],[[8505,8505],"mapped",[105]],[[8506,8506],"valid",[],"NV8"],[[8507,8507],"mapped",[102,97,120]],[[8508,8508],"mapped",[960]],[[8509,8510],"mapped",[947]],[[8511,8511],"mapped",[960]],[[8512,8512],"mapped",[8721]],[[8513,8516],"valid",[],"NV8"],[[8517,8518],"mapped",[100]],[[8519,8519],"mapped",[101]],[[8520,8520],"mapped",[105]],[[8521,8521],"mapped",[106]],[[8522,8523],"valid",[],"NV8"],[[8524,8524],"valid",[],"NV8"],[[8525,8525],"valid",[],"NV8"],[[8526,8526],"valid"],[[8527,8527],"valid",[],"NV8"],[[8528,8528],"mapped",[49,8260,55]],[[8529,8529],"mapped",[49,8260,57]],[[8530,8530],"mapped",[49,8260,49,48]],[[8531,8531],"mapped",[49,8260,51]],[[8532,8532],"mapped",[50,8260,51]],[[8533,8533],"mapped",[49,8260,53]],[[8534,8534],"mapped",[50,8260,53]],[[8535,8535],"mapped",[51,8260,53]],[[8536,8536],"mapped",[52,8260,53]],[[8537,8537],"mapped",[49,8260,54]],[[8538,8538],"mapped",[53,8260,54]],[[8539,8539],"mapped",[49,8260,56]],[[8540,8540],"mapped",[51,8260,56]],[[8541,8541],"mapped",[53,8260,56]],[[8542,8542],"mapped",[55,8260,56]],[[8543,8543],"mapped",[49,8260]],[[8544,8544],"mapped",[105]],[[8545,8545],"mapped",[105,105]],[[8546,8546],"mapped",[105,105,105]],[[8547,8547],"mapped",[105,118]],[[8548,8548],"mapped",[118]],[[8549,8549],"mapped",[118,105]],[[8550,8550],"mapped",[118,105,105]],[[8551,8551],"mapped",[118,105,105,105]],[[8552,8552],"mapped",[105,120]],[[8553,8553],"mapped",[120]],[[8554,8554],"mapped",[120,105]],[[8555,8555],"mapped",[120,105,105]],[[8556,8556],"mapped",[108]],[[8557,8557],"mapped",[99]],[[8558,8558],"mapped",[100]],[[8559,8559],"mapped",[109]],[[8560,8560],"mapped",[105]],[[8561,8561],"mapped",[105,105]],[[8562,8562],"mapped",[105,105,105]],[[8563,8563],"mapped",[105,118]],[[8564,8564],"mapped",[118]],[[8565,8565],"mapped",[118,105]],[[8566,8566],"mapped",[118,105,105]],[[8567,8567],"mapped",[118,105,105,105]],[[8568,8568],"mapped",[105,120]],[[8569,8569],"mapped",[120]],[[8570,8570],"mapped",[120,105]],[[8571,8571],"mapped",[120,105,105]],[[8572,8572],"mapped",[108]],[[8573,8573],"mapped",[99]],[[8574,8574],"mapped",[100]],[[8575,8575],"mapped",[109]],[[8576,8578],"valid",[],"NV8"],[[8579,8579],"disallowed"],[[8580,8580],"valid"],[[8581,8584],"valid",[],"NV8"],[[8585,8585],"mapped",[48,8260,51]],[[8586,8587],"valid",[],"NV8"],[[8588,8591],"disallowed"],[[8592,8682],"valid",[],"NV8"],[[8683,8691],"valid",[],"NV8"],[[8692,8703],"valid",[],"NV8"],[[8704,8747],"valid",[],"NV8"],[[8748,8748],"mapped",[8747,8747]],[[8749,8749],"mapped",[8747,8747,8747]],[[8750,8750],"valid",[],"NV8"],[[8751,8751],"mapped",[8750,8750]],[[8752,8752],"mapped",[8750,8750,8750]],[[8753,8799],"valid",[],"NV8"],[[8800,8800],"disallowed_STD3_valid"],[[8801,8813],"valid",[],"NV8"],[[8814,8815],"disallowed_STD3_valid"],[[8816,8945],"valid",[],"NV8"],[[8946,8959],"valid",[],"NV8"],[[8960,8960],"valid",[],"NV8"],[[8961,8961],"valid",[],"NV8"],[[8962,9e3],"valid",[],"NV8"],[[9001,9001],"mapped",[12296]],[[9002,9002],"mapped",[12297]],[[9003,9082],"valid",[],"NV8"],[[9083,9083],"valid",[],"NV8"],[[9084,9084],"valid",[],"NV8"],[[9085,9114],"valid",[],"NV8"],[[9115,9166],"valid",[],"NV8"],[[9167,9168],"valid",[],"NV8"],[[9169,9179],"valid",[],"NV8"],[[9180,9191],"valid",[],"NV8"],[[9192,9192],"valid",[],"NV8"],[[9193,9203],"valid",[],"NV8"],[[9204,9210],"valid",[],"NV8"],[[9211,9215],"disallowed"],[[9216,9252],"valid",[],"NV8"],[[9253,9254],"valid",[],"NV8"],[[9255,9279],"disallowed"],[[9280,9290],"valid",[],"NV8"],[[9291,9311],"disallowed"],[[9312,9312],"mapped",[49]],[[9313,9313],"mapped",[50]],[[9314,9314],"mapped",[51]],[[9315,9315],"mapped",[52]],[[9316,9316],"mapped",[53]],[[9317,9317],"mapped",[54]],[[9318,9318],"mapped",[55]],[[9319,9319],"mapped",[56]],[[9320,9320],"mapped",[57]],[[9321,9321],"mapped",[49,48]],[[9322,9322],"mapped",[49,49]],[[9323,9323],"mapped",[49,50]],[[9324,9324],"mapped",[49,51]],[[9325,9325],"mapped",[49,52]],[[9326,9326],"mapped",[49,53]],[[9327,9327],"mapped",[49,54]],[[9328,9328],"mapped",[49,55]],[[9329,9329],"mapped",[49,56]],[[9330,9330],"mapped",[49,57]],[[9331,9331],"mapped",[50,48]],[[9332,9332],"disallowed_STD3_mapped",[40,49,41]],[[9333,9333],"disallowed_STD3_mapped",[40,50,41]],[[9334,9334],"disallowed_STD3_mapped",[40,51,41]],[[9335,9335],"disallowed_STD3_mapped",[40,52,41]],[[9336,9336],"disallowed_STD3_mapped",[40,53,41]],[[9337,9337],"disallowed_STD3_mapped",[40,54,41]],[[9338,9338],"disallowed_STD3_mapped",[40,55,41]],[[9339,9339],"disallowed_STD3_mapped",[40,56,41]],[[9340,9340],"disallowed_STD3_mapped",[40,57,41]],[[9341,9341],"disallowed_STD3_mapped",[40,49,48,41]],[[9342,9342],"disallowed_STD3_mapped",[40,49,49,41]],[[9343,9343],"disallowed_STD3_mapped",[40,49,50,41]],[[9344,9344],"disallowed_STD3_mapped",[40,49,51,41]],[[9345,9345],"disallowed_STD3_mapped",[40,49,52,41]],[[9346,9346],"disallowed_STD3_mapped",[40,49,53,41]],[[9347,9347],"disallowed_STD3_mapped",[40,49,54,41]],[[9348,9348],"disallowed_STD3_mapped",[40,49,55,41]],[[9349,9349],"disallowed_STD3_mapped",[40,49,56,41]],[[9350,9350],"disallowed_STD3_mapped",[40,49,57,41]],[[9351,9351],"disallowed_STD3_mapped",[40,50,48,41]],[[9352,9371],"disallowed"],[[9372,9372],"disallowed_STD3_mapped",[40,97,41]],[[9373,9373],"disallowed_STD3_mapped",[40,98,41]],[[9374,9374],"disallowed_STD3_mapped",[40,99,41]],[[9375,9375],"disallowed_STD3_mapped",[40,100,41]],[[9376,9376],"disallowed_STD3_mapped",[40,101,41]],[[9377,9377],"disallowed_STD3_mapped",[40,102,41]],[[9378,9378],"disallowed_STD3_mapped",[40,103,41]],[[9379,9379],"disallowed_STD3_mapped",[40,104,41]],[[9380,9380],"disallowed_STD3_mapped",[40,105,41]],[[9381,9381],"disallowed_STD3_mapped",[40,106,41]],[[9382,9382],"disallowed_STD3_mapped",[40,107,41]],[[9383,9383],"disallowed_STD3_mapped",[40,108,41]],[[9384,9384],"disallowed_STD3_mapped",[40,109,41]],[[9385,9385],"disallowed_STD3_mapped",[40,110,41]],[[9386,9386],"disallowed_STD3_mapped",[40,111,41]],[[9387,9387],"disallowed_STD3_mapped",[40,112,41]],[[9388,9388],"disallowed_STD3_mapped",[40,113,41]],[[9389,9389],"disallowed_STD3_mapped",[40,114,41]],[[9390,9390],"disallowed_STD3_mapped",[40,115,41]],[[9391,9391],"disallowed_STD3_mapped",[40,116,41]],[[9392,9392],"disallowed_STD3_mapped",[40,117,41]],[[9393,9393],"disallowed_STD3_mapped",[40,118,41]],[[9394,9394],"disallowed_STD3_mapped",[40,119,41]],[[9395,9395],"disallowed_STD3_mapped",[40,120,41]],[[9396,9396],"disallowed_STD3_mapped",[40,121,41]],[[9397,9397],"disallowed_STD3_mapped",[40,122,41]],[[9398,9398],"mapped",[97]],[[9399,9399],"mapped",[98]],[[9400,9400],"mapped",[99]],[[9401,9401],"mapped",[100]],[[9402,9402],"mapped",[101]],[[9403,9403],"mapped",[102]],[[9404,9404],"mapped",[103]],[[9405,9405],"mapped",[104]],[[9406,9406],"mapped",[105]],[[9407,9407],"mapped",[106]],[[9408,9408],"mapped",[107]],[[9409,9409],"mapped",[108]],[[9410,9410],"mapped",[109]],[[9411,9411],"mapped",[110]],[[9412,9412],"mapped",[111]],[[9413,9413],"mapped",[112]],[[9414,9414],"mapped",[113]],[[9415,9415],"mapped",[114]],[[9416,9416],"mapped",[115]],[[9417,9417],"mapped",[116]],[[9418,9418],"mapped",[117]],[[9419,9419],"mapped",[118]],[[9420,9420],"mapped",[119]],[[9421,9421],"mapped",[120]],[[9422,9422],"mapped",[121]],[[9423,9423],"mapped",[122]],[[9424,9424],"mapped",[97]],[[9425,9425],"mapped",[98]],[[9426,9426],"mapped",[99]],[[9427,9427],"mapped",[100]],[[9428,9428],"mapped",[101]],[[9429,9429],"mapped",[102]],[[9430,9430],"mapped",[103]],[[9431,9431],"mapped",[104]],[[9432,9432],"mapped",[105]],[[9433,9433],"mapped",[106]],[[9434,9434],"mapped",[107]],[[9435,9435],"mapped",[108]],[[9436,9436],"mapped",[109]],[[9437,9437],"mapped",[110]],[[9438,9438],"mapped",[111]],[[9439,9439],"mapped",[112]],[[9440,9440],"mapped",[113]],[[9441,9441],"mapped",[114]],[[9442,9442],"mapped",[115]],[[9443,9443],"mapped",[116]],[[9444,9444],"mapped",[117]],[[9445,9445],"mapped",[118]],[[9446,9446],"mapped",[119]],[[9447,9447],"mapped",[120]],[[9448,9448],"mapped",[121]],[[9449,9449],"mapped",[122]],[[9450,9450],"mapped",[48]],[[9451,9470],"valid",[],"NV8"],[[9471,9471],"valid",[],"NV8"],[[9472,9621],"valid",[],"NV8"],[[9622,9631],"valid",[],"NV8"],[[9632,9711],"valid",[],"NV8"],[[9712,9719],"valid",[],"NV8"],[[9720,9727],"valid",[],"NV8"],[[9728,9747],"valid",[],"NV8"],[[9748,9749],"valid",[],"NV8"],[[9750,9751],"valid",[],"NV8"],[[9752,9752],"valid",[],"NV8"],[[9753,9753],"valid",[],"NV8"],[[9754,9839],"valid",[],"NV8"],[[9840,9841],"valid",[],"NV8"],[[9842,9853],"valid",[],"NV8"],[[9854,9855],"valid",[],"NV8"],[[9856,9865],"valid",[],"NV8"],[[9866,9873],"valid",[],"NV8"],[[9874,9884],"valid",[],"NV8"],[[9885,9885],"valid",[],"NV8"],[[9886,9887],"valid",[],"NV8"],[[9888,9889],"valid",[],"NV8"],[[9890,9905],"valid",[],"NV8"],[[9906,9906],"valid",[],"NV8"],[[9907,9916],"valid",[],"NV8"],[[9917,9919],"valid",[],"NV8"],[[9920,9923],"valid",[],"NV8"],[[9924,9933],"valid",[],"NV8"],[[9934,9934],"valid",[],"NV8"],[[9935,9953],"valid",[],"NV8"],[[9954,9954],"valid",[],"NV8"],[[9955,9955],"valid",[],"NV8"],[[9956,9959],"valid",[],"NV8"],[[9960,9983],"valid",[],"NV8"],[[9984,9984],"valid",[],"NV8"],[[9985,9988],"valid",[],"NV8"],[[9989,9989],"valid",[],"NV8"],[[9990,9993],"valid",[],"NV8"],[[9994,9995],"valid",[],"NV8"],[[9996,10023],"valid",[],"NV8"],[[10024,10024],"valid",[],"NV8"],[[10025,10059],"valid",[],"NV8"],[[10060,10060],"valid",[],"NV8"],[[10061,10061],"valid",[],"NV8"],[[10062,10062],"valid",[],"NV8"],[[10063,10066],"valid",[],"NV8"],[[10067,10069],"valid",[],"NV8"],[[10070,10070],"valid",[],"NV8"],[[10071,10071],"valid",[],"NV8"],[[10072,10078],"valid",[],"NV8"],[[10079,10080],"valid",[],"NV8"],[[10081,10087],"valid",[],"NV8"],[[10088,10101],"valid",[],"NV8"],[[10102,10132],"valid",[],"NV8"],[[10133,10135],"valid",[],"NV8"],[[10136,10159],"valid",[],"NV8"],[[10160,10160],"valid",[],"NV8"],[[10161,10174],"valid",[],"NV8"],[[10175,10175],"valid",[],"NV8"],[[10176,10182],"valid",[],"NV8"],[[10183,10186],"valid",[],"NV8"],[[10187,10187],"valid",[],"NV8"],[[10188,10188],"valid",[],"NV8"],[[10189,10189],"valid",[],"NV8"],[[10190,10191],"valid",[],"NV8"],[[10192,10219],"valid",[],"NV8"],[[10220,10223],"valid",[],"NV8"],[[10224,10239],"valid",[],"NV8"],[[10240,10495],"valid",[],"NV8"],[[10496,10763],"valid",[],"NV8"],[[10764,10764],"mapped",[8747,8747,8747,8747]],[[10765,10867],"valid",[],"NV8"],[[10868,10868],"disallowed_STD3_mapped",[58,58,61]],[[10869,10869],"disallowed_STD3_mapped",[61,61]],[[10870,10870],"disallowed_STD3_mapped",[61,61,61]],[[10871,10971],"valid",[],"NV8"],[[10972,10972],"mapped",[10973,824]],[[10973,11007],"valid",[],"NV8"],[[11008,11021],"valid",[],"NV8"],[[11022,11027],"valid",[],"NV8"],[[11028,11034],"valid",[],"NV8"],[[11035,11039],"valid",[],"NV8"],[[11040,11043],"valid",[],"NV8"],[[11044,11084],"valid",[],"NV8"],[[11085,11087],"valid",[],"NV8"],[[11088,11092],"valid",[],"NV8"],[[11093,11097],"valid",[],"NV8"],[[11098,11123],"valid",[],"NV8"],[[11124,11125],"disallowed"],[[11126,11157],"valid",[],"NV8"],[[11158,11159],"disallowed"],[[11160,11193],"valid",[],"NV8"],[[11194,11196],"disallowed"],[[11197,11208],"valid",[],"NV8"],[[11209,11209],"disallowed"],[[11210,11217],"valid",[],"NV8"],[[11218,11243],"disallowed"],[[11244,11247],"valid",[],"NV8"],[[11248,11263],"disallowed"],[[11264,11264],"mapped",[11312]],[[11265,11265],"mapped",[11313]],[[11266,11266],"mapped",[11314]],[[11267,11267],"mapped",[11315]],[[11268,11268],"mapped",[11316]],[[11269,11269],"mapped",[11317]],[[11270,11270],"mapped",[11318]],[[11271,11271],"mapped",[11319]],[[11272,11272],"mapped",[11320]],[[11273,11273],"mapped",[11321]],[[11274,11274],"mapped",[11322]],[[11275,11275],"mapped",[11323]],[[11276,11276],"mapped",[11324]],[[11277,11277],"mapped",[11325]],[[11278,11278],"mapped",[11326]],[[11279,11279],"mapped",[11327]],[[11280,11280],"mapped",[11328]],[[11281,11281],"mapped",[11329]],[[11282,11282],"mapped",[11330]],[[11283,11283],"mapped",[11331]],[[11284,11284],"mapped",[11332]],[[11285,11285],"mapped",[11333]],[[11286,11286],"mapped",[11334]],[[11287,11287],"mapped",[11335]],[[11288,11288],"mapped",[11336]],[[11289,11289],"mapped",[11337]],[[11290,11290],"mapped",[11338]],[[11291,11291],"mapped",[11339]],[[11292,11292],"mapped",[11340]],[[11293,11293],"mapped",[11341]],[[11294,11294],"mapped",[11342]],[[11295,11295],"mapped",[11343]],[[11296,11296],"mapped",[11344]],[[11297,11297],"mapped",[11345]],[[11298,11298],"mapped",[11346]],[[11299,11299],"mapped",[11347]],[[11300,11300],"mapped",[11348]],[[11301,11301],"mapped",[11349]],[[11302,11302],"mapped",[11350]],[[11303,11303],"mapped",[11351]],[[11304,11304],"mapped",[11352]],[[11305,11305],"mapped",[11353]],[[11306,11306],"mapped",[11354]],[[11307,11307],"mapped",[11355]],[[11308,11308],"mapped",[11356]],[[11309,11309],"mapped",[11357]],[[11310,11310],"mapped",[11358]],[[11311,11311],"disallowed"],[[11312,11358],"valid"],[[11359,11359],"disallowed"],[[11360,11360],"mapped",[11361]],[[11361,11361],"valid"],[[11362,11362],"mapped",[619]],[[11363,11363],"mapped",[7549]],[[11364,11364],"mapped",[637]],[[11365,11366],"valid"],[[11367,11367],"mapped",[11368]],[[11368,11368],"valid"],[[11369,11369],"mapped",[11370]],[[11370,11370],"valid"],[[11371,11371],"mapped",[11372]],[[11372,11372],"valid"],[[11373,11373],"mapped",[593]],[[11374,11374],"mapped",[625]],[[11375,11375],"mapped",[592]],[[11376,11376],"mapped",[594]],[[11377,11377],"valid"],[[11378,11378],"mapped",[11379]],[[11379,11379],"valid"],[[11380,11380],"valid"],[[11381,11381],"mapped",[11382]],[[11382,11383],"valid"],[[11384,11387],"valid"],[[11388,11388],"mapped",[106]],[[11389,11389],"mapped",[118]],[[11390,11390],"mapped",[575]],[[11391,11391],"mapped",[576]],[[11392,11392],"mapped",[11393]],[[11393,11393],"valid"],[[11394,11394],"mapped",[11395]],[[11395,11395],"valid"],[[11396,11396],"mapped",[11397]],[[11397,11397],"valid"],[[11398,11398],"mapped",[11399]],[[11399,11399],"valid"],[[11400,11400],"mapped",[11401]],[[11401,11401],"valid"],[[11402,11402],"mapped",[11403]],[[11403,11403],"valid"],[[11404,11404],"mapped",[11405]],[[11405,11405],"valid"],[[11406,11406],"mapped",[11407]],[[11407,11407],"valid"],[[11408,11408],"mapped",[11409]],[[11409,11409],"valid"],[[11410,11410],"mapped",[11411]],[[11411,11411],"valid"],[[11412,11412],"mapped",[11413]],[[11413,11413],"valid"],[[11414,11414],"mapped",[11415]],[[11415,11415],"valid"],[[11416,11416],"mapped",[11417]],[[11417,11417],"valid"],[[11418,11418],"mapped",[11419]],[[11419,11419],"valid"],[[11420,11420],"mapped",[11421]],[[11421,11421],"valid"],[[11422,11422],"mapped",[11423]],[[11423,11423],"valid"],[[11424,11424],"mapped",[11425]],[[11425,11425],"valid"],[[11426,11426],"mapped",[11427]],[[11427,11427],"valid"],[[11428,11428],"mapped",[11429]],[[11429,11429],"valid"],[[11430,11430],"mapped",[11431]],[[11431,11431],"valid"],[[11432,11432],"mapped",[11433]],[[11433,11433],"valid"],[[11434,11434],"mapped",[11435]],[[11435,11435],"valid"],[[11436,11436],"mapped",[11437]],[[11437,11437],"valid"],[[11438,11438],"mapped",[11439]],[[11439,11439],"valid"],[[11440,11440],"mapped",[11441]],[[11441,11441],"valid"],[[11442,11442],"mapped",[11443]],[[11443,11443],"valid"],[[11444,11444],"mapped",[11445]],[[11445,11445],"valid"],[[11446,11446],"mapped",[11447]],[[11447,11447],"valid"],[[11448,11448],"mapped",[11449]],[[11449,11449],"valid"],[[11450,11450],"mapped",[11451]],[[11451,11451],"valid"],[[11452,11452],"mapped",[11453]],[[11453,11453],"valid"],[[11454,11454],"mapped",[11455]],[[11455,11455],"valid"],[[11456,11456],"mapped",[11457]],[[11457,11457],"valid"],[[11458,11458],"mapped",[11459]],[[11459,11459],"valid"],[[11460,11460],"mapped",[11461]],[[11461,11461],"valid"],[[11462,11462],"mapped",[11463]],[[11463,11463],"valid"],[[11464,11464],"mapped",[11465]],[[11465,11465],"valid"],[[11466,11466],"mapped",[11467]],[[11467,11467],"valid"],[[11468,11468],"mapped",[11469]],[[11469,11469],"valid"],[[11470,11470],"mapped",[11471]],[[11471,11471],"valid"],[[11472,11472],"mapped",[11473]],[[11473,11473],"valid"],[[11474,11474],"mapped",[11475]],[[11475,11475],"valid"],[[11476,11476],"mapped",[11477]],[[11477,11477],"valid"],[[11478,11478],"mapped",[11479]],[[11479,11479],"valid"],[[11480,11480],"mapped",[11481]],[[11481,11481],"valid"],[[11482,11482],"mapped",[11483]],[[11483,11483],"valid"],[[11484,11484],"mapped",[11485]],[[11485,11485],"valid"],[[11486,11486],"mapped",[11487]],[[11487,11487],"valid"],[[11488,11488],"mapped",[11489]],[[11489,11489],"valid"],[[11490,11490],"mapped",[11491]],[[11491,11492],"valid"],[[11493,11498],"valid",[],"NV8"],[[11499,11499],"mapped",[11500]],[[11500,11500],"valid"],[[11501,11501],"mapped",[11502]],[[11502,11505],"valid"],[[11506,11506],"mapped",[11507]],[[11507,11507],"valid"],[[11508,11512],"disallowed"],[[11513,11519],"valid",[],"NV8"],[[11520,11557],"valid"],[[11558,11558],"disallowed"],[[11559,11559],"valid"],[[11560,11564],"disallowed"],[[11565,11565],"valid"],[[11566,11567],"disallowed"],[[11568,11621],"valid"],[[11622,11623],"valid"],[[11624,11630],"disallowed"],[[11631,11631],"mapped",[11617]],[[11632,11632],"valid",[],"NV8"],[[11633,11646],"disallowed"],[[11647,11647],"valid"],[[11648,11670],"valid"],[[11671,11679],"disallowed"],[[11680,11686],"valid"],[[11687,11687],"disallowed"],[[11688,11694],"valid"],[[11695,11695],"disallowed"],[[11696,11702],"valid"],[[11703,11703],"disallowed"],[[11704,11710],"valid"],[[11711,11711],"disallowed"],[[11712,11718],"valid"],[[11719,11719],"disallowed"],[[11720,11726],"valid"],[[11727,11727],"disallowed"],[[11728,11734],"valid"],[[11735,11735],"disallowed"],[[11736,11742],"valid"],[[11743,11743],"disallowed"],[[11744,11775],"valid"],[[11776,11799],"valid",[],"NV8"],[[11800,11803],"valid",[],"NV8"],[[11804,11805],"valid",[],"NV8"],[[11806,11822],"valid",[],"NV8"],[[11823,11823],"valid"],[[11824,11824],"valid",[],"NV8"],[[11825,11825],"valid",[],"NV8"],[[11826,11835],"valid",[],"NV8"],[[11836,11842],"valid",[],"NV8"],[[11843,11903],"disallowed"],[[11904,11929],"valid",[],"NV8"],[[11930,11930],"disallowed"],[[11931,11934],"valid",[],"NV8"],[[11935,11935],"mapped",[27597]],[[11936,12018],"valid",[],"NV8"],[[12019,12019],"mapped",[40863]],[[12020,12031],"disallowed"],[[12032,12032],"mapped",[19968]],[[12033,12033],"mapped",[20008]],[[12034,12034],"mapped",[20022]],[[12035,12035],"mapped",[20031]],[[12036,12036],"mapped",[20057]],[[12037,12037],"mapped",[20101]],[[12038,12038],"mapped",[20108]],[[12039,12039],"mapped",[20128]],[[12040,12040],"mapped",[20154]],[[12041,12041],"mapped",[20799]],[[12042,12042],"mapped",[20837]],[[12043,12043],"mapped",[20843]],[[12044,12044],"mapped",[20866]],[[12045,12045],"mapped",[20886]],[[12046,12046],"mapped",[20907]],[[12047,12047],"mapped",[20960]],[[12048,12048],"mapped",[20981]],[[12049,12049],"mapped",[20992]],[[12050,12050],"mapped",[21147]],[[12051,12051],"mapped",[21241]],[[12052,12052],"mapped",[21269]],[[12053,12053],"mapped",[21274]],[[12054,12054],"mapped",[21304]],[[12055,12055],"mapped",[21313]],[[12056,12056],"mapped",[21340]],[[12057,12057],"mapped",[21353]],[[12058,12058],"mapped",[21378]],[[12059,12059],"mapped",[21430]],[[12060,12060],"mapped",[21448]],[[12061,12061],"mapped",[21475]],[[12062,12062],"mapped",[22231]],[[12063,12063],"mapped",[22303]],[[12064,12064],"mapped",[22763]],[[12065,12065],"mapped",[22786]],[[12066,12066],"mapped",[22794]],[[12067,12067],"mapped",[22805]],[[12068,12068],"mapped",[22823]],[[12069,12069],"mapped",[22899]],[[12070,12070],"mapped",[23376]],[[12071,12071],"mapped",[23424]],[[12072,12072],"mapped",[23544]],[[12073,12073],"mapped",[23567]],[[12074,12074],"mapped",[23586]],[[12075,12075],"mapped",[23608]],[[12076,12076],"mapped",[23662]],[[12077,12077],"mapped",[23665]],[[12078,12078],"mapped",[24027]],[[12079,12079],"mapped",[24037]],[[12080,12080],"mapped",[24049]],[[12081,12081],"mapped",[24062]],[[12082,12082],"mapped",[24178]],[[12083,12083],"mapped",[24186]],[[12084,12084],"mapped",[24191]],[[12085,12085],"mapped",[24308]],[[12086,12086],"mapped",[24318]],[[12087,12087],"mapped",[24331]],[[12088,12088],"mapped",[24339]],[[12089,12089],"mapped",[24400]],[[12090,12090],"mapped",[24417]],[[12091,12091],"mapped",[24435]],[[12092,12092],"mapped",[24515]],[[12093,12093],"mapped",[25096]],[[12094,12094],"mapped",[25142]],[[12095,12095],"mapped",[25163]],[[12096,12096],"mapped",[25903]],[[12097,12097],"mapped",[25908]],[[12098,12098],"mapped",[25991]],[[12099,12099],"mapped",[26007]],[[12100,12100],"mapped",[26020]],[[12101,12101],"mapped",[26041]],[[12102,12102],"mapped",[26080]],[[12103,12103],"mapped",[26085]],[[12104,12104],"mapped",[26352]],[[12105,12105],"mapped",[26376]],[[12106,12106],"mapped",[26408]],[[12107,12107],"mapped",[27424]],[[12108,12108],"mapped",[27490]],[[12109,12109],"mapped",[27513]],[[12110,12110],"mapped",[27571]],[[12111,12111],"mapped",[27595]],[[12112,12112],"mapped",[27604]],[[12113,12113],"mapped",[27611]],[[12114,12114],"mapped",[27663]],[[12115,12115],"mapped",[27668]],[[12116,12116],"mapped",[27700]],[[12117,12117],"mapped",[28779]],[[12118,12118],"mapped",[29226]],[[12119,12119],"mapped",[29238]],[[12120,12120],"mapped",[29243]],[[12121,12121],"mapped",[29247]],[[12122,12122],"mapped",[29255]],[[12123,12123],"mapped",[29273]],[[12124,12124],"mapped",[29275]],[[12125,12125],"mapped",[29356]],[[12126,12126],"mapped",[29572]],[[12127,12127],"mapped",[29577]],[[12128,12128],"mapped",[29916]],[[12129,12129],"mapped",[29926]],[[12130,12130],"mapped",[29976]],[[12131,12131],"mapped",[29983]],[[12132,12132],"mapped",[29992]],[[12133,12133],"mapped",[3e4]],[[12134,12134],"mapped",[30091]],[[12135,12135],"mapped",[30098]],[[12136,12136],"mapped",[30326]],[[12137,12137],"mapped",[30333]],[[12138,12138],"mapped",[30382]],[[12139,12139],"mapped",[30399]],[[12140,12140],"mapped",[30446]],[[12141,12141],"mapped",[30683]],[[12142,12142],"mapped",[30690]],[[12143,12143],"mapped",[30707]],[[12144,12144],"mapped",[31034]],[[12145,12145],"mapped",[31160]],[[12146,12146],"mapped",[31166]],[[12147,12147],"mapped",[31348]],[[12148,12148],"mapped",[31435]],[[12149,12149],"mapped",[31481]],[[12150,12150],"mapped",[31859]],[[12151,12151],"mapped",[31992]],[[12152,12152],"mapped",[32566]],[[12153,12153],"mapped",[32593]],[[12154,12154],"mapped",[32650]],[[12155,12155],"mapped",[32701]],[[12156,12156],"mapped",[32769]],[[12157,12157],"mapped",[32780]],[[12158,12158],"mapped",[32786]],[[12159,12159],"mapped",[32819]],[[12160,12160],"mapped",[32895]],[[12161,12161],"mapped",[32905]],[[12162,12162],"mapped",[33251]],[[12163,12163],"mapped",[33258]],[[12164,12164],"mapped",[33267]],[[12165,12165],"mapped",[33276]],[[12166,12166],"mapped",[33292]],[[12167,12167],"mapped",[33307]],[[12168,12168],"mapped",[33311]],[[12169,12169],"mapped",[33390]],[[12170,12170],"mapped",[33394]],[[12171,12171],"mapped",[33400]],[[12172,12172],"mapped",[34381]],[[12173,12173],"mapped",[34411]],[[12174,12174],"mapped",[34880]],[[12175,12175],"mapped",[34892]],[[12176,12176],"mapped",[34915]],[[12177,12177],"mapped",[35198]],[[12178,12178],"mapped",[35211]],[[12179,12179],"mapped",[35282]],[[12180,12180],"mapped",[35328]],[[12181,12181],"mapped",[35895]],[[12182,12182],"mapped",[35910]],[[12183,12183],"mapped",[35925]],[[12184,12184],"mapped",[35960]],[[12185,12185],"mapped",[35997]],[[12186,12186],"mapped",[36196]],[[12187,12187],"mapped",[36208]],[[12188,12188],"mapped",[36275]],[[12189,12189],"mapped",[36523]],[[12190,12190],"mapped",[36554]],[[12191,12191],"mapped",[36763]],[[12192,12192],"mapped",[36784]],[[12193,12193],"mapped",[36789]],[[12194,12194],"mapped",[37009]],[[12195,12195],"mapped",[37193]],[[12196,12196],"mapped",[37318]],[[12197,12197],"mapped",[37324]],[[12198,12198],"mapped",[37329]],[[12199,12199],"mapped",[38263]],[[12200,12200],"mapped",[38272]],[[12201,12201],"mapped",[38428]],[[12202,12202],"mapped",[38582]],[[12203,12203],"mapped",[38585]],[[12204,12204],"mapped",[38632]],[[12205,12205],"mapped",[38737]],[[12206,12206],"mapped",[38750]],[[12207,12207],"mapped",[38754]],[[12208,12208],"mapped",[38761]],[[12209,12209],"mapped",[38859]],[[12210,12210],"mapped",[38893]],[[12211,12211],"mapped",[38899]],[[12212,12212],"mapped",[38913]],[[12213,12213],"mapped",[39080]],[[12214,12214],"mapped",[39131]],[[12215,12215],"mapped",[39135]],[[12216,12216],"mapped",[39318]],[[12217,12217],"mapped",[39321]],[[12218,12218],"mapped",[39340]],[[12219,12219],"mapped",[39592]],[[12220,12220],"mapped",[39640]],[[12221,12221],"mapped",[39647]],[[12222,12222],"mapped",[39717]],[[12223,12223],"mapped",[39727]],[[12224,12224],"mapped",[39730]],[[12225,12225],"mapped",[39740]],[[12226,12226],"mapped",[39770]],[[12227,12227],"mapped",[40165]],[[12228,12228],"mapped",[40565]],[[12229,12229],"mapped",[40575]],[[12230,12230],"mapped",[40613]],[[12231,12231],"mapped",[40635]],[[12232,12232],"mapped",[40643]],[[12233,12233],"mapped",[40653]],[[12234,12234],"mapped",[40657]],[[12235,12235],"mapped",[40697]],[[12236,12236],"mapped",[40701]],[[12237,12237],"mapped",[40718]],[[12238,12238],"mapped",[40723]],[[12239,12239],"mapped",[40736]],[[12240,12240],"mapped",[40763]],[[12241,12241],"mapped",[40778]],[[12242,12242],"mapped",[40786]],[[12243,12243],"mapped",[40845]],[[12244,12244],"mapped",[40860]],[[12245,12245],"mapped",[40864]],[[12246,12271],"disallowed"],[[12272,12283],"disallowed"],[[12284,12287],"disallowed"],[[12288,12288],"disallowed_STD3_mapped",[32]],[[12289,12289],"valid",[],"NV8"],[[12290,12290],"mapped",[46]],[[12291,12292],"valid",[],"NV8"],[[12293,12295],"valid"],[[12296,12329],"valid",[],"NV8"],[[12330,12333],"valid"],[[12334,12341],"valid",[],"NV8"],[[12342,12342],"mapped",[12306]],[[12343,12343],"valid",[],"NV8"],[[12344,12344],"mapped",[21313]],[[12345,12345],"mapped",[21316]],[[12346,12346],"mapped",[21317]],[[12347,12347],"valid",[],"NV8"],[[12348,12348],"valid"],[[12349,12349],"valid",[],"NV8"],[[12350,12350],"valid",[],"NV8"],[[12351,12351],"valid",[],"NV8"],[[12352,12352],"disallowed"],[[12353,12436],"valid"],[[12437,12438],"valid"],[[12439,12440],"disallowed"],[[12441,12442],"valid"],[[12443,12443],"disallowed_STD3_mapped",[32,12441]],[[12444,12444],"disallowed_STD3_mapped",[32,12442]],[[12445,12446],"valid"],[[12447,12447],"mapped",[12424,12426]],[[12448,12448],"valid",[],"NV8"],[[12449,12542],"valid"],[[12543,12543],"mapped",[12467,12488]],[[12544,12548],"disallowed"],[[12549,12588],"valid"],[[12589,12589],"valid"],[[12590,12592],"disallowed"],[[12593,12593],"mapped",[4352]],[[12594,12594],"mapped",[4353]],[[12595,12595],"mapped",[4522]],[[12596,12596],"mapped",[4354]],[[12597,12597],"mapped",[4524]],[[12598,12598],"mapped",[4525]],[[12599,12599],"mapped",[4355]],[[12600,12600],"mapped",[4356]],[[12601,12601],"mapped",[4357]],[[12602,12602],"mapped",[4528]],[[12603,12603],"mapped",[4529]],[[12604,12604],"mapped",[4530]],[[12605,12605],"mapped",[4531]],[[12606,12606],"mapped",[4532]],[[12607,12607],"mapped",[4533]],[[12608,12608],"mapped",[4378]],[[12609,12609],"mapped",[4358]],[[12610,12610],"mapped",[4359]],[[12611,12611],"mapped",[4360]],[[12612,12612],"mapped",[4385]],[[12613,12613],"mapped",[4361]],[[12614,12614],"mapped",[4362]],[[12615,12615],"mapped",[4363]],[[12616,12616],"mapped",[4364]],[[12617,12617],"mapped",[4365]],[[12618,12618],"mapped",[4366]],[[12619,12619],"mapped",[4367]],[[12620,12620],"mapped",[4368]],[[12621,12621],"mapped",[4369]],[[12622,12622],"mapped",[4370]],[[12623,12623],"mapped",[4449]],[[12624,12624],"mapped",[4450]],[[12625,12625],"mapped",[4451]],[[12626,12626],"mapped",[4452]],[[12627,12627],"mapped",[4453]],[[12628,12628],"mapped",[4454]],[[12629,12629],"mapped",[4455]],[[12630,12630],"mapped",[4456]],[[12631,12631],"mapped",[4457]],[[12632,12632],"mapped",[4458]],[[12633,12633],"mapped",[4459]],[[12634,12634],"mapped",[4460]],[[12635,12635],"mapped",[4461]],[[12636,12636],"mapped",[4462]],[[12637,12637],"mapped",[4463]],[[12638,12638],"mapped",[4464]],[[12639,12639],"mapped",[4465]],[[12640,12640],"mapped",[4466]],[[12641,12641],"mapped",[4467]],[[12642,12642],"mapped",[4468]],[[12643,12643],"mapped",[4469]],[[12644,12644],"disallowed"],[[12645,12645],"mapped",[4372]],[[12646,12646],"mapped",[4373]],[[12647,12647],"mapped",[4551]],[[12648,12648],"mapped",[4552]],[[12649,12649],"mapped",[4556]],[[12650,12650],"mapped",[4558]],[[12651,12651],"mapped",[4563]],[[12652,12652],"mapped",[4567]],[[12653,12653],"mapped",[4569]],[[12654,12654],"mapped",[4380]],[[12655,12655],"mapped",[4573]],[[12656,12656],"mapped",[4575]],[[12657,12657],"mapped",[4381]],[[12658,12658],"mapped",[4382]],[[12659,12659],"mapped",[4384]],[[12660,12660],"mapped",[4386]],[[12661,12661],"mapped",[4387]],[[12662,12662],"mapped",[4391]],[[12663,12663],"mapped",[4393]],[[12664,12664],"mapped",[4395]],[[12665,12665],"mapped",[4396]],[[12666,12666],"mapped",[4397]],[[12667,12667],"mapped",[4398]],[[12668,12668],"mapped",[4399]],[[12669,12669],"mapped",[4402]],[[12670,12670],"mapped",[4406]],[[12671,12671],"mapped",[4416]],[[12672,12672],"mapped",[4423]],[[12673,12673],"mapped",[4428]],[[12674,12674],"mapped",[4593]],[[12675,12675],"mapped",[4594]],[[12676,12676],"mapped",[4439]],[[12677,12677],"mapped",[4440]],[[12678,12678],"mapped",[4441]],[[12679,12679],"mapped",[4484]],[[12680,12680],"mapped",[4485]],[[12681,12681],"mapped",[4488]],[[12682,12682],"mapped",[4497]],[[12683,12683],"mapped",[4498]],[[12684,12684],"mapped",[4500]],[[12685,12685],"mapped",[4510]],[[12686,12686],"mapped",[4513]],[[12687,12687],"disallowed"],[[12688,12689],"valid",[],"NV8"],[[12690,12690],"mapped",[19968]],[[12691,12691],"mapped",[20108]],[[12692,12692],"mapped",[19977]],[[12693,12693],"mapped",[22235]],[[12694,12694],"mapped",[19978]],[[12695,12695],"mapped",[20013]],[[12696,12696],"mapped",[19979]],[[12697,12697],"mapped",[30002]],[[12698,12698],"mapped",[20057]],[[12699,12699],"mapped",[19993]],[[12700,12700],"mapped",[19969]],[[12701,12701],"mapped",[22825]],[[12702,12702],"mapped",[22320]],[[12703,12703],"mapped",[20154]],[[12704,12727],"valid"],[[12728,12730],"valid"],[[12731,12735],"disallowed"],[[12736,12751],"valid",[],"NV8"],[[12752,12771],"valid",[],"NV8"],[[12772,12783],"disallowed"],[[12784,12799],"valid"],[[12800,12800],"disallowed_STD3_mapped",[40,4352,41]],[[12801,12801],"disallowed_STD3_mapped",[40,4354,41]],[[12802,12802],"disallowed_STD3_mapped",[40,4355,41]],[[12803,12803],"disallowed_STD3_mapped",[40,4357,41]],[[12804,12804],"disallowed_STD3_mapped",[40,4358,41]],[[12805,12805],"disallowed_STD3_mapped",[40,4359,41]],[[12806,12806],"disallowed_STD3_mapped",[40,4361,41]],[[12807,12807],"disallowed_STD3_mapped",[40,4363,41]],[[12808,12808],"disallowed_STD3_mapped",[40,4364,41]],[[12809,12809],"disallowed_STD3_mapped",[40,4366,41]],[[12810,12810],"disallowed_STD3_mapped",[40,4367,41]],[[12811,12811],"disallowed_STD3_mapped",[40,4368,41]],[[12812,12812],"disallowed_STD3_mapped",[40,4369,41]],[[12813,12813],"disallowed_STD3_mapped",[40,4370,41]],[[12814,12814],"disallowed_STD3_mapped",[40,44032,41]],[[12815,12815],"disallowed_STD3_mapped",[40,45208,41]],[[12816,12816],"disallowed_STD3_mapped",[40,45796,41]],[[12817,12817],"disallowed_STD3_mapped",[40,46972,41]],[[12818,12818],"disallowed_STD3_mapped",[40,47560,41]],[[12819,12819],"disallowed_STD3_mapped",[40,48148,41]],[[12820,12820],"disallowed_STD3_mapped",[40,49324,41]],[[12821,12821],"disallowed_STD3_mapped",[40,50500,41]],[[12822,12822],"disallowed_STD3_mapped",[40,51088,41]],[[12823,12823],"disallowed_STD3_mapped",[40,52264,41]],[[12824,12824],"disallowed_STD3_mapped",[40,52852,41]],[[12825,12825],"disallowed_STD3_mapped",[40,53440,41]],[[12826,12826],"disallowed_STD3_mapped",[40,54028,41]],[[12827,12827],"disallowed_STD3_mapped",[40,54616,41]],[[12828,12828],"disallowed_STD3_mapped",[40,51452,41]],[[12829,12829],"disallowed_STD3_mapped",[40,50724,51204,41]],[[12830,12830],"disallowed_STD3_mapped",[40,50724,54980,41]],[[12831,12831],"disallowed"],[[12832,12832],"disallowed_STD3_mapped",[40,19968,41]],[[12833,12833],"disallowed_STD3_mapped",[40,20108,41]],[[12834,12834],"disallowed_STD3_mapped",[40,19977,41]],[[12835,12835],"disallowed_STD3_mapped",[40,22235,41]],[[12836,12836],"disallowed_STD3_mapped",[40,20116,41]],[[12837,12837],"disallowed_STD3_mapped",[40,20845,41]],[[12838,12838],"disallowed_STD3_mapped",[40,19971,41]],[[12839,12839],"disallowed_STD3_mapped",[40,20843,41]],[[12840,12840],"disallowed_STD3_mapped",[40,20061,41]],[[12841,12841],"disallowed_STD3_mapped",[40,21313,41]],[[12842,12842],"disallowed_STD3_mapped",[40,26376,41]],[[12843,12843],"disallowed_STD3_mapped",[40,28779,41]],[[12844,12844],"disallowed_STD3_mapped",[40,27700,41]],[[12845,12845],"disallowed_STD3_mapped",[40,26408,41]],[[12846,12846],"disallowed_STD3_mapped",[40,37329,41]],[[12847,12847],"disallowed_STD3_mapped",[40,22303,41]],[[12848,12848],"disallowed_STD3_mapped",[40,26085,41]],[[12849,12849],"disallowed_STD3_mapped",[40,26666,41]],[[12850,12850],"disallowed_STD3_mapped",[40,26377,41]],[[12851,12851],"disallowed_STD3_mapped",[40,31038,41]],[[12852,12852],"disallowed_STD3_mapped",[40,21517,41]],[[12853,12853],"disallowed_STD3_mapped",[40,29305,41]],[[12854,12854],"disallowed_STD3_mapped",[40,36001,41]],[[12855,12855],"disallowed_STD3_mapped",[40,31069,41]],[[12856,12856],"disallowed_STD3_mapped",[40,21172,41]],[[12857,12857],"disallowed_STD3_mapped",[40,20195,41]],[[12858,12858],"disallowed_STD3_mapped",[40,21628,41]],[[12859,12859],"disallowed_STD3_mapped",[40,23398,41]],[[12860,12860],"disallowed_STD3_mapped",[40,30435,41]],[[12861,12861],"disallowed_STD3_mapped",[40,20225,41]],[[12862,12862],"disallowed_STD3_mapped",[40,36039,41]],[[12863,12863],"disallowed_STD3_mapped",[40,21332,41]],[[12864,12864],"disallowed_STD3_mapped",[40,31085,41]],[[12865,12865],"disallowed_STD3_mapped",[40,20241,41]],[[12866,12866],"disallowed_STD3_mapped",[40,33258,41]],[[12867,12867],"disallowed_STD3_mapped",[40,33267,41]],[[12868,12868],"mapped",[21839]],[[12869,12869],"mapped",[24188]],[[12870,12870],"mapped",[25991]],[[12871,12871],"mapped",[31631]],[[12872,12879],"valid",[],"NV8"],[[12880,12880],"mapped",[112,116,101]],[[12881,12881],"mapped",[50,49]],[[12882,12882],"mapped",[50,50]],[[12883,12883],"mapped",[50,51]],[[12884,12884],"mapped",[50,52]],[[12885,12885],"mapped",[50,53]],[[12886,12886],"mapped",[50,54]],[[12887,12887],"mapped",[50,55]],[[12888,12888],"mapped",[50,56]],[[12889,12889],"mapped",[50,57]],[[12890,12890],"mapped",[51,48]],[[12891,12891],"mapped",[51,49]],[[12892,12892],"mapped",[51,50]],[[12893,12893],"mapped",[51,51]],[[12894,12894],"mapped",[51,52]],[[12895,12895],"mapped",[51,53]],[[12896,12896],"mapped",[4352]],[[12897,12897],"mapped",[4354]],[[12898,12898],"mapped",[4355]],[[12899,12899],"mapped",[4357]],[[12900,12900],"mapped",[4358]],[[12901,12901],"mapped",[4359]],[[12902,12902],"mapped",[4361]],[[12903,12903],"mapped",[4363]],[[12904,12904],"mapped",[4364]],[[12905,12905],"mapped",[4366]],[[12906,12906],"mapped",[4367]],[[12907,12907],"mapped",[4368]],[[12908,12908],"mapped",[4369]],[[12909,12909],"mapped",[4370]],[[12910,12910],"mapped",[44032]],[[12911,12911],"mapped",[45208]],[[12912,12912],"mapped",[45796]],[[12913,12913],"mapped",[46972]],[[12914,12914],"mapped",[47560]],[[12915,12915],"mapped",[48148]],[[12916,12916],"mapped",[49324]],[[12917,12917],"mapped",[50500]],[[12918,12918],"mapped",[51088]],[[12919,12919],"mapped",[52264]],[[12920,12920],"mapped",[52852]],[[12921,12921],"mapped",[53440]],[[12922,12922],"mapped",[54028]],[[12923,12923],"mapped",[54616]],[[12924,12924],"mapped",[52280,44256]],[[12925,12925],"mapped",[51452,51032]],[[12926,12926],"mapped",[50864]],[[12927,12927],"valid",[],"NV8"],[[12928,12928],"mapped",[19968]],[[12929,12929],"mapped",[20108]],[[12930,12930],"mapped",[19977]],[[12931,12931],"mapped",[22235]],[[12932,12932],"mapped",[20116]],[[12933,12933],"mapped",[20845]],[[12934,12934],"mapped",[19971]],[[12935,12935],"mapped",[20843]],[[12936,12936],"mapped",[20061]],[[12937,12937],"mapped",[21313]],[[12938,12938],"mapped",[26376]],[[12939,12939],"mapped",[28779]],[[12940,12940],"mapped",[27700]],[[12941,12941],"mapped",[26408]],[[12942,12942],"mapped",[37329]],[[12943,12943],"mapped",[22303]],[[12944,12944],"mapped",[26085]],[[12945,12945],"mapped",[26666]],[[12946,12946],"mapped",[26377]],[[12947,12947],"mapped",[31038]],[[12948,12948],"mapped",[21517]],[[12949,12949],"mapped",[29305]],[[12950,12950],"mapped",[36001]],[[12951,12951],"mapped",[31069]],[[12952,12952],"mapped",[21172]],[[12953,12953],"mapped",[31192]],[[12954,12954],"mapped",[30007]],[[12955,12955],"mapped",[22899]],[[12956,12956],"mapped",[36969]],[[12957,12957],"mapped",[20778]],[[12958,12958],"mapped",[21360]],[[12959,12959],"mapped",[27880]],[[12960,12960],"mapped",[38917]],[[12961,12961],"mapped",[20241]],[[12962,12962],"mapped",[20889]],[[12963,12963],"mapped",[27491]],[[12964,12964],"mapped",[19978]],[[12965,12965],"mapped",[20013]],[[12966,12966],"mapped",[19979]],[[12967,12967],"mapped",[24038]],[[12968,12968],"mapped",[21491]],[[12969,12969],"mapped",[21307]],[[12970,12970],"mapped",[23447]],[[12971,12971],"mapped",[23398]],[[12972,12972],"mapped",[30435]],[[12973,12973],"mapped",[20225]],[[12974,12974],"mapped",[36039]],[[12975,12975],"mapped",[21332]],[[12976,12976],"mapped",[22812]],[[12977,12977],"mapped",[51,54]],[[12978,12978],"mapped",[51,55]],[[12979,12979],"mapped",[51,56]],[[12980,12980],"mapped",[51,57]],[[12981,12981],"mapped",[52,48]],[[12982,12982],"mapped",[52,49]],[[12983,12983],"mapped",[52,50]],[[12984,12984],"mapped",[52,51]],[[12985,12985],"mapped",[52,52]],[[12986,12986],"mapped",[52,53]],[[12987,12987],"mapped",[52,54]],[[12988,12988],"mapped",[52,55]],[[12989,12989],"mapped",[52,56]],[[12990,12990],"mapped",[52,57]],[[12991,12991],"mapped",[53,48]],[[12992,12992],"mapped",[49,26376]],[[12993,12993],"mapped",[50,26376]],[[12994,12994],"mapped",[51,26376]],[[12995,12995],"mapped",[52,26376]],[[12996,12996],"mapped",[53,26376]],[[12997,12997],"mapped",[54,26376]],[[12998,12998],"mapped",[55,26376]],[[12999,12999],"mapped",[56,26376]],[[13e3,13e3],"mapped",[57,26376]],[[13001,13001],"mapped",[49,48,26376]],[[13002,13002],"mapped",[49,49,26376]],[[13003,13003],"mapped",[49,50,26376]],[[13004,13004],"mapped",[104,103]],[[13005,13005],"mapped",[101,114,103]],[[13006,13006],"mapped",[101,118]],[[13007,13007],"mapped",[108,116,100]],[[13008,13008],"mapped",[12450]],[[13009,13009],"mapped",[12452]],[[13010,13010],"mapped",[12454]],[[13011,13011],"mapped",[12456]],[[13012,13012],"mapped",[12458]],[[13013,13013],"mapped",[12459]],[[13014,13014],"mapped",[12461]],[[13015,13015],"mapped",[12463]],[[13016,13016],"mapped",[12465]],[[13017,13017],"mapped",[12467]],[[13018,13018],"mapped",[12469]],[[13019,13019],"mapped",[12471]],[[13020,13020],"mapped",[12473]],[[13021,13021],"mapped",[12475]],[[13022,13022],"mapped",[12477]],[[13023,13023],"mapped",[12479]],[[13024,13024],"mapped",[12481]],[[13025,13025],"mapped",[12484]],[[13026,13026],"mapped",[12486]],[[13027,13027],"mapped",[12488]],[[13028,13028],"mapped",[12490]],[[13029,13029],"mapped",[12491]],[[13030,13030],"mapped",[12492]],[[13031,13031],"mapped",[12493]],[[13032,13032],"mapped",[12494]],[[13033,13033],"mapped",[12495]],[[13034,13034],"mapped",[12498]],[[13035,13035],"mapped",[12501]],[[13036,13036],"mapped",[12504]],[[13037,13037],"mapped",[12507]],[[13038,13038],"mapped",[12510]],[[13039,13039],"mapped",[12511]],[[13040,13040],"mapped",[12512]],[[13041,13041],"mapped",[12513]],[[13042,13042],"mapped",[12514]],[[13043,13043],"mapped",[12516]],[[13044,13044],"mapped",[12518]],[[13045,13045],"mapped",[12520]],[[13046,13046],"mapped",[12521]],[[13047,13047],"mapped",[12522]],[[13048,13048],"mapped",[12523]],[[13049,13049],"mapped",[12524]],[[13050,13050],"mapped",[12525]],[[13051,13051],"mapped",[12527]],[[13052,13052],"mapped",[12528]],[[13053,13053],"mapped",[12529]],[[13054,13054],"mapped",[12530]],[[13055,13055],"disallowed"],[[13056,13056],"mapped",[12450,12497,12540,12488]],[[13057,13057],"mapped",[12450,12523,12501,12449]],[[13058,13058],"mapped",[12450,12531,12506,12450]],[[13059,13059],"mapped",[12450,12540,12523]],[[13060,13060],"mapped",[12452,12491,12531,12464]],[[13061,13061],"mapped",[12452,12531,12481]],[[13062,13062],"mapped",[12454,12457,12531]],[[13063,13063],"mapped",[12456,12473,12463,12540,12489]],[[13064,13064],"mapped",[12456,12540,12459,12540]],[[13065,13065],"mapped",[12458,12531,12473]],[[13066,13066],"mapped",[12458,12540,12512]],[[13067,13067],"mapped",[12459,12452,12522]],[[13068,13068],"mapped",[12459,12521,12483,12488]],[[13069,13069],"mapped",[12459,12525,12522,12540]],[[13070,13070],"mapped",[12460,12525,12531]],[[13071,13071],"mapped",[12460,12531,12510]],[[13072,13072],"mapped",[12462,12460]],[[13073,13073],"mapped",[12462,12491,12540]],[[13074,13074],"mapped",[12461,12517,12522,12540]],[[13075,13075],"mapped",[12462,12523,12480,12540]],[[13076,13076],"mapped",[12461,12525]],[[13077,13077],"mapped",[12461,12525,12464,12521,12512]],[[13078,13078],"mapped",[12461,12525,12513,12540,12488,12523]],[[13079,13079],"mapped",[12461,12525,12527,12483,12488]],[[13080,13080],"mapped",[12464,12521,12512]],[[13081,13081],"mapped",[12464,12521,12512,12488,12531]],[[13082,13082],"mapped",[12463,12523,12476,12452,12525]],[[13083,13083],"mapped",[12463,12525,12540,12493]],[[13084,13084],"mapped",[12465,12540,12473]],[[13085,13085],"mapped",[12467,12523,12490]],[[13086,13086],"mapped",[12467,12540,12509]],[[13087,13087],"mapped",[12469,12452,12463,12523]],[[13088,13088],"mapped",[12469,12531,12481,12540,12512]],[[13089,13089],"mapped",[12471,12522,12531,12464]],[[13090,13090],"mapped",[12475,12531,12481]],[[13091,13091],"mapped",[12475,12531,12488]],[[13092,13092],"mapped",[12480,12540,12473]],[[13093,13093],"mapped",[12487,12471]],[[13094,13094],"mapped",[12489,12523]],[[13095,13095],"mapped",[12488,12531]],[[13096,13096],"mapped",[12490,12494]],[[13097,13097],"mapped",[12494,12483,12488]],[[13098,13098],"mapped",[12495,12452,12484]],[[13099,13099],"mapped",[12497,12540,12475,12531,12488]],[[13100,13100],"mapped",[12497,12540,12484]],[[13101,13101],"mapped",[12496,12540,12524,12523]],[[13102,13102],"mapped",[12500,12450,12473,12488,12523]],[[13103,13103],"mapped",[12500,12463,12523]],[[13104,13104],"mapped",[12500,12467]],[[13105,13105],"mapped",[12499,12523]],[[13106,13106],"mapped",[12501,12449,12521,12483,12489]],[[13107,13107],"mapped",[12501,12451,12540,12488]],[[13108,13108],"mapped",[12502,12483,12471,12455,12523]],[[13109,13109],"mapped",[12501,12521,12531]],[[13110,13110],"mapped",[12504,12463,12479,12540,12523]],[[13111,13111],"mapped",[12506,12477]],[[13112,13112],"mapped",[12506,12491,12498]],[[13113,13113],"mapped",[12504,12523,12484]],[[13114,13114],"mapped",[12506,12531,12473]],[[13115,13115],"mapped",[12506,12540,12472]],[[13116,13116],"mapped",[12505,12540,12479]],[[13117,13117],"mapped",[12509,12452,12531,12488]],[[13118,13118],"mapped",[12508,12523,12488]],[[13119,13119],"mapped",[12507,12531]],[[13120,13120],"mapped",[12509,12531,12489]],[[13121,13121],"mapped",[12507,12540,12523]],[[13122,13122],"mapped",[12507,12540,12531]],[[13123,13123],"mapped",[12510,12452,12463,12525]],[[13124,13124],"mapped",[12510,12452,12523]],[[13125,13125],"mapped",[12510,12483,12495]],[[13126,13126],"mapped",[12510,12523,12463]],[[13127,13127],"mapped",[12510,12531,12471,12519,12531]],[[13128,13128],"mapped",[12511,12463,12525,12531]],[[13129,13129],"mapped",[12511,12522]],[[13130,13130],"mapped",[12511,12522,12496,12540,12523]],[[13131,13131],"mapped",[12513,12460]],[[13132,13132],"mapped",[12513,12460,12488,12531]],[[13133,13133],"mapped",[12513,12540,12488,12523]],[[13134,13134],"mapped",[12516,12540,12489]],[[13135,13135],"mapped",[12516,12540,12523]],[[13136,13136],"mapped",[12518,12450,12531]],[[13137,13137],"mapped",[12522,12483,12488,12523]],[[13138,13138],"mapped",[12522,12521]],[[13139,13139],"mapped",[12523,12500,12540]],[[13140,13140],"mapped",[12523,12540,12502,12523]],[[13141,13141],"mapped",[12524,12512]],[[13142,13142],"mapped",[12524,12531,12488,12466,12531]],[[13143,13143],"mapped",[12527,12483,12488]],[[13144,13144],"mapped",[48,28857]],[[13145,13145],"mapped",[49,28857]],[[13146,13146],"mapped",[50,28857]],[[13147,13147],"mapped",[51,28857]],[[13148,13148],"mapped",[52,28857]],[[13149,13149],"mapped",[53,28857]],[[13150,13150],"mapped",[54,28857]],[[13151,13151],"mapped",[55,28857]],[[13152,13152],"mapped",[56,28857]],[[13153,13153],"mapped",[57,28857]],[[13154,13154],"mapped",[49,48,28857]],[[13155,13155],"mapped",[49,49,28857]],[[13156,13156],"mapped",[49,50,28857]],[[13157,13157],"mapped",[49,51,28857]],[[13158,13158],"mapped",[49,52,28857]],[[13159,13159],"mapped",[49,53,28857]],[[13160,13160],"mapped",[49,54,28857]],[[13161,13161],"mapped",[49,55,28857]],[[13162,13162],"mapped",[49,56,28857]],[[13163,13163],"mapped",[49,57,28857]],[[13164,13164],"mapped",[50,48,28857]],[[13165,13165],"mapped",[50,49,28857]],[[13166,13166],"mapped",[50,50,28857]],[[13167,13167],"mapped",[50,51,28857]],[[13168,13168],"mapped",[50,52,28857]],[[13169,13169],"mapped",[104,112,97]],[[13170,13170],"mapped",[100,97]],[[13171,13171],"mapped",[97,117]],[[13172,13172],"mapped",[98,97,114]],[[13173,13173],"mapped",[111,118]],[[13174,13174],"mapped",[112,99]],[[13175,13175],"mapped",[100,109]],[[13176,13176],"mapped",[100,109,50]],[[13177,13177],"mapped",[100,109,51]],[[13178,13178],"mapped",[105,117]],[[13179,13179],"mapped",[24179,25104]],[[13180,13180],"mapped",[26157,21644]],[[13181,13181],"mapped",[22823,27491]],[[13182,13182],"mapped",[26126,27835]],[[13183,13183],"mapped",[26666,24335,20250,31038]],[[13184,13184],"mapped",[112,97]],[[13185,13185],"mapped",[110,97]],[[13186,13186],"mapped",[956,97]],[[13187,13187],"mapped",[109,97]],[[13188,13188],"mapped",[107,97]],[[13189,13189],"mapped",[107,98]],[[13190,13190],"mapped",[109,98]],[[13191,13191],"mapped",[103,98]],[[13192,13192],"mapped",[99,97,108]],[[13193,13193],"mapped",[107,99,97,108]],[[13194,13194],"mapped",[112,102]],[[13195,13195],"mapped",[110,102]],[[13196,13196],"mapped",[956,102]],[[13197,13197],"mapped",[956,103]],[[13198,13198],"mapped",[109,103]],[[13199,13199],"mapped",[107,103]],[[13200,13200],"mapped",[104,122]],[[13201,13201],"mapped",[107,104,122]],[[13202,13202],"mapped",[109,104,122]],[[13203,13203],"mapped",[103,104,122]],[[13204,13204],"mapped",[116,104,122]],[[13205,13205],"mapped",[956,108]],[[13206,13206],"mapped",[109,108]],[[13207,13207],"mapped",[100,108]],[[13208,13208],"mapped",[107,108]],[[13209,13209],"mapped",[102,109]],[[13210,13210],"mapped",[110,109]],[[13211,13211],"mapped",[956,109]],[[13212,13212],"mapped",[109,109]],[[13213,13213],"mapped",[99,109]],[[13214,13214],"mapped",[107,109]],[[13215,13215],"mapped",[109,109,50]],[[13216,13216],"mapped",[99,109,50]],[[13217,13217],"mapped",[109,50]],[[13218,13218],"mapped",[107,109,50]],[[13219,13219],"mapped",[109,109,51]],[[13220,13220],"mapped",[99,109,51]],[[13221,13221],"mapped",[109,51]],[[13222,13222],"mapped",[107,109,51]],[[13223,13223],"mapped",[109,8725,115]],[[13224,13224],"mapped",[109,8725,115,50]],[[13225,13225],"mapped",[112,97]],[[13226,13226],"mapped",[107,112,97]],[[13227,13227],"mapped",[109,112,97]],[[13228,13228],"mapped",[103,112,97]],[[13229,13229],"mapped",[114,97,100]],[[13230,13230],"mapped",[114,97,100,8725,115]],[[13231,13231],"mapped",[114,97,100,8725,115,50]],[[13232,13232],"mapped",[112,115]],[[13233,13233],"mapped",[110,115]],[[13234,13234],"mapped",[956,115]],[[13235,13235],"mapped",[109,115]],[[13236,13236],"mapped",[112,118]],[[13237,13237],"mapped",[110,118]],[[13238,13238],"mapped",[956,118]],[[13239,13239],"mapped",[109,118]],[[13240,13240],"mapped",[107,118]],[[13241,13241],"mapped",[109,118]],[[13242,13242],"mapped",[112,119]],[[13243,13243],"mapped",[110,119]],[[13244,13244],"mapped",[956,119]],[[13245,13245],"mapped",[109,119]],[[13246,13246],"mapped",[107,119]],[[13247,13247],"mapped",[109,119]],[[13248,13248],"mapped",[107,969]],[[13249,13249],"mapped",[109,969]],[[13250,13250],"disallowed"],[[13251,13251],"mapped",[98,113]],[[13252,13252],"mapped",[99,99]],[[13253,13253],"mapped",[99,100]],[[13254,13254],"mapped",[99,8725,107,103]],[[13255,13255],"disallowed"],[[13256,13256],"mapped",[100,98]],[[13257,13257],"mapped",[103,121]],[[13258,13258],"mapped",[104,97]],[[13259,13259],"mapped",[104,112]],[[13260,13260],"mapped",[105,110]],[[13261,13261],"mapped",[107,107]],[[13262,13262],"mapped",[107,109]],[[13263,13263],"mapped",[107,116]],[[13264,13264],"mapped",[108,109]],[[13265,13265],"mapped",[108,110]],[[13266,13266],"mapped",[108,111,103]],[[13267,13267],"mapped",[108,120]],[[13268,13268],"mapped",[109,98]],[[13269,13269],"mapped",[109,105,108]],[[13270,13270],"mapped",[109,111,108]],[[13271,13271],"mapped",[112,104]],[[13272,13272],"disallowed"],[[13273,13273],"mapped",[112,112,109]],[[13274,13274],"mapped",[112,114]],[[13275,13275],"mapped",[115,114]],[[13276,13276],"mapped",[115,118]],[[13277,13277],"mapped",[119,98]],[[13278,13278],"mapped",[118,8725,109]],[[13279,13279],"mapped",[97,8725,109]],[[13280,13280],"mapped",[49,26085]],[[13281,13281],"mapped",[50,26085]],[[13282,13282],"mapped",[51,26085]],[[13283,13283],"mapped",[52,26085]],[[13284,13284],"mapped",[53,26085]],[[13285,13285],"mapped",[54,26085]],[[13286,13286],"mapped",[55,26085]],[[13287,13287],"mapped",[56,26085]],[[13288,13288],"mapped",[57,26085]],[[13289,13289],"mapped",[49,48,26085]],[[13290,13290],"mapped",[49,49,26085]],[[13291,13291],"mapped",[49,50,26085]],[[13292,13292],"mapped",[49,51,26085]],[[13293,13293],"mapped",[49,52,26085]],[[13294,13294],"mapped",[49,53,26085]],[[13295,13295],"mapped",[49,54,26085]],[[13296,13296],"mapped",[49,55,26085]],[[13297,13297],"mapped",[49,56,26085]],[[13298,13298],"mapped",[49,57,26085]],[[13299,13299],"mapped",[50,48,26085]],[[13300,13300],"mapped",[50,49,26085]],[[13301,13301],"mapped",[50,50,26085]],[[13302,13302],"mapped",[50,51,26085]],[[13303,13303],"mapped",[50,52,26085]],[[13304,13304],"mapped",[50,53,26085]],[[13305,13305],"mapped",[50,54,26085]],[[13306,13306],"mapped",[50,55,26085]],[[13307,13307],"mapped",[50,56,26085]],[[13308,13308],"mapped",[50,57,26085]],[[13309,13309],"mapped",[51,48,26085]],[[13310,13310],"mapped",[51,49,26085]],[[13311,13311],"mapped",[103,97,108]],[[13312,19893],"valid"],[[19894,19903],"disallowed"],[[19904,19967],"valid",[],"NV8"],[[19968,40869],"valid"],[[40870,40891],"valid"],[[40892,40899],"valid"],[[40900,40907],"valid"],[[40908,40908],"valid"],[[40909,40917],"valid"],[[40918,40959],"disallowed"],[[40960,42124],"valid"],[[42125,42127],"disallowed"],[[42128,42145],"valid",[],"NV8"],[[42146,42147],"valid",[],"NV8"],[[42148,42163],"valid",[],"NV8"],[[42164,42164],"valid",[],"NV8"],[[42165,42176],"valid",[],"NV8"],[[42177,42177],"valid",[],"NV8"],[[42178,42180],"valid",[],"NV8"],[[42181,42181],"valid",[],"NV8"],[[42182,42182],"valid",[],"NV8"],[[42183,42191],"disallowed"],[[42192,42237],"valid"],[[42238,42239],"valid",[],"NV8"],[[42240,42508],"valid"],[[42509,42511],"valid",[],"NV8"],[[42512,42539],"valid"],[[42540,42559],"disallowed"],[[42560,42560],"mapped",[42561]],[[42561,42561],"valid"],[[42562,42562],"mapped",[42563]],[[42563,42563],"valid"],[[42564,42564],"mapped",[42565]],[[42565,42565],"valid"],[[42566,42566],"mapped",[42567]],[[42567,42567],"valid"],[[42568,42568],"mapped",[42569]],[[42569,42569],"valid"],[[42570,42570],"mapped",[42571]],[[42571,42571],"valid"],[[42572,42572],"mapped",[42573]],[[42573,42573],"valid"],[[42574,42574],"mapped",[42575]],[[42575,42575],"valid"],[[42576,42576],"mapped",[42577]],[[42577,42577],"valid"],[[42578,42578],"mapped",[42579]],[[42579,42579],"valid"],[[42580,42580],"mapped",[42581]],[[42581,42581],"valid"],[[42582,42582],"mapped",[42583]],[[42583,42583],"valid"],[[42584,42584],"mapped",[42585]],[[42585,42585],"valid"],[[42586,42586],"mapped",[42587]],[[42587,42587],"valid"],[[42588,42588],"mapped",[42589]],[[42589,42589],"valid"],[[42590,42590],"mapped",[42591]],[[42591,42591],"valid"],[[42592,42592],"mapped",[42593]],[[42593,42593],"valid"],[[42594,42594],"mapped",[42595]],[[42595,42595],"valid"],[[42596,42596],"mapped",[42597]],[[42597,42597],"valid"],[[42598,42598],"mapped",[42599]],[[42599,42599],"valid"],[[42600,42600],"mapped",[42601]],[[42601,42601],"valid"],[[42602,42602],"mapped",[42603]],[[42603,42603],"valid"],[[42604,42604],"mapped",[42605]],[[42605,42607],"valid"],[[42608,42611],"valid",[],"NV8"],[[42612,42619],"valid"],[[42620,42621],"valid"],[[42622,42622],"valid",[],"NV8"],[[42623,42623],"valid"],[[42624,42624],"mapped",[42625]],[[42625,42625],"valid"],[[42626,42626],"mapped",[42627]],[[42627,42627],"valid"],[[42628,42628],"mapped",[42629]],[[42629,42629],"valid"],[[42630,42630],"mapped",[42631]],[[42631,42631],"valid"],[[42632,42632],"mapped",[42633]],[[42633,42633],"valid"],[[42634,42634],"mapped",[42635]],[[42635,42635],"valid"],[[42636,42636],"mapped",[42637]],[[42637,42637],"valid"],[[42638,42638],"mapped",[42639]],[[42639,42639],"valid"],[[42640,42640],"mapped",[42641]],[[42641,42641],"valid"],[[42642,42642],"mapped",[42643]],[[42643,42643],"valid"],[[42644,42644],"mapped",[42645]],[[42645,42645],"valid"],[[42646,42646],"mapped",[42647]],[[42647,42647],"valid"],[[42648,42648],"mapped",[42649]],[[42649,42649],"valid"],[[42650,42650],"mapped",[42651]],[[42651,42651],"valid"],[[42652,42652],"mapped",[1098]],[[42653,42653],"mapped",[1100]],[[42654,42654],"valid"],[[42655,42655],"valid"],[[42656,42725],"valid"],[[42726,42735],"valid",[],"NV8"],[[42736,42737],"valid"],[[42738,42743],"valid",[],"NV8"],[[42744,42751],"disallowed"],[[42752,42774],"valid",[],"NV8"],[[42775,42778],"valid"],[[42779,42783],"valid"],[[42784,42785],"valid",[],"NV8"],[[42786,42786],"mapped",[42787]],[[42787,42787],"valid"],[[42788,42788],"mapped",[42789]],[[42789,42789],"valid"],[[42790,42790],"mapped",[42791]],[[42791,42791],"valid"],[[42792,42792],"mapped",[42793]],[[42793,42793],"valid"],[[42794,42794],"mapped",[42795]],[[42795,42795],"valid"],[[42796,42796],"mapped",[42797]],[[42797,42797],"valid"],[[42798,42798],"mapped",[42799]],[[42799,42801],"valid"],[[42802,42802],"mapped",[42803]],[[42803,42803],"valid"],[[42804,42804],"mapped",[42805]],[[42805,42805],"valid"],[[42806,42806],"mapped",[42807]],[[42807,42807],"valid"],[[42808,42808],"mapped",[42809]],[[42809,42809],"valid"],[[42810,42810],"mapped",[42811]],[[42811,42811],"valid"],[[42812,42812],"mapped",[42813]],[[42813,42813],"valid"],[[42814,42814],"mapped",[42815]],[[42815,42815],"valid"],[[42816,42816],"mapped",[42817]],[[42817,42817],"valid"],[[42818,42818],"mapped",[42819]],[[42819,42819],"valid"],[[42820,42820],"mapped",[42821]],[[42821,42821],"valid"],[[42822,42822],"mapped",[42823]],[[42823,42823],"valid"],[[42824,42824],"mapped",[42825]],[[42825,42825],"valid"],[[42826,42826],"mapped",[42827]],[[42827,42827],"valid"],[[42828,42828],"mapped",[42829]],[[42829,42829],"valid"],[[42830,42830],"mapped",[42831]],[[42831,42831],"valid"],[[42832,42832],"mapped",[42833]],[[42833,42833],"valid"],[[42834,42834],"mapped",[42835]],[[42835,42835],"valid"],[[42836,42836],"mapped",[42837]],[[42837,42837],"valid"],[[42838,42838],"mapped",[42839]],[[42839,42839],"valid"],[[42840,42840],"mapped",[42841]],[[42841,42841],"valid"],[[42842,42842],"mapped",[42843]],[[42843,42843],"valid"],[[42844,42844],"mapped",[42845]],[[42845,42845],"valid"],[[42846,42846],"mapped",[42847]],[[42847,42847],"valid"],[[42848,42848],"mapped",[42849]],[[42849,42849],"valid"],[[42850,42850],"mapped",[42851]],[[42851,42851],"valid"],[[42852,42852],"mapped",[42853]],[[42853,42853],"valid"],[[42854,42854],"mapped",[42855]],[[42855,42855],"valid"],[[42856,42856],"mapped",[42857]],[[42857,42857],"valid"],[[42858,42858],"mapped",[42859]],[[42859,42859],"valid"],[[42860,42860],"mapped",[42861]],[[42861,42861],"valid"],[[42862,42862],"mapped",[42863]],[[42863,42863],"valid"],[[42864,42864],"mapped",[42863]],[[42865,42872],"valid"],[[42873,42873],"mapped",[42874]],[[42874,42874],"valid"],[[42875,42875],"mapped",[42876]],[[42876,42876],"valid"],[[42877,42877],"mapped",[7545]],[[42878,42878],"mapped",[42879]],[[42879,42879],"valid"],[[42880,42880],"mapped",[42881]],[[42881,42881],"valid"],[[42882,42882],"mapped",[42883]],[[42883,42883],"valid"],[[42884,42884],"mapped",[42885]],[[42885,42885],"valid"],[[42886,42886],"mapped",[42887]],[[42887,42888],"valid"],[[42889,42890],"valid",[],"NV8"],[[42891,42891],"mapped",[42892]],[[42892,42892],"valid"],[[42893,42893],"mapped",[613]],[[42894,42894],"valid"],[[42895,42895],"valid"],[[42896,42896],"mapped",[42897]],[[42897,42897],"valid"],[[42898,42898],"mapped",[42899]],[[42899,42899],"valid"],[[42900,42901],"valid"],[[42902,42902],"mapped",[42903]],[[42903,42903],"valid"],[[42904,42904],"mapped",[42905]],[[42905,42905],"valid"],[[42906,42906],"mapped",[42907]],[[42907,42907],"valid"],[[42908,42908],"mapped",[42909]],[[42909,42909],"valid"],[[42910,42910],"mapped",[42911]],[[42911,42911],"valid"],[[42912,42912],"mapped",[42913]],[[42913,42913],"valid"],[[42914,42914],"mapped",[42915]],[[42915,42915],"valid"],[[42916,42916],"mapped",[42917]],[[42917,42917],"valid"],[[42918,42918],"mapped",[42919]],[[42919,42919],"valid"],[[42920,42920],"mapped",[42921]],[[42921,42921],"valid"],[[42922,42922],"mapped",[614]],[[42923,42923],"mapped",[604]],[[42924,42924],"mapped",[609]],[[42925,42925],"mapped",[620]],[[42926,42927],"disallowed"],[[42928,42928],"mapped",[670]],[[42929,42929],"mapped",[647]],[[42930,42930],"mapped",[669]],[[42931,42931],"mapped",[43859]],[[42932,42932],"mapped",[42933]],[[42933,42933],"valid"],[[42934,42934],"mapped",[42935]],[[42935,42935],"valid"],[[42936,42998],"disallowed"],[[42999,42999],"valid"],[[43e3,43e3],"mapped",[295]],[[43001,43001],"mapped",[339]],[[43002,43002],"valid"],[[43003,43007],"valid"],[[43008,43047],"valid"],[[43048,43051],"valid",[],"NV8"],[[43052,43055],"disallowed"],[[43056,43065],"valid",[],"NV8"],[[43066,43071],"disallowed"],[[43072,43123],"valid"],[[43124,43127],"valid",[],"NV8"],[[43128,43135],"disallowed"],[[43136,43204],"valid"],[[43205,43213],"disallowed"],[[43214,43215],"valid",[],"NV8"],[[43216,43225],"valid"],[[43226,43231],"disallowed"],[[43232,43255],"valid"],[[43256,43258],"valid",[],"NV8"],[[43259,43259],"valid"],[[43260,43260],"valid",[],"NV8"],[[43261,43261],"valid"],[[43262,43263],"disallowed"],[[43264,43309],"valid"],[[43310,43311],"valid",[],"NV8"],[[43312,43347],"valid"],[[43348,43358],"disallowed"],[[43359,43359],"valid",[],"NV8"],[[43360,43388],"valid",[],"NV8"],[[43389,43391],"disallowed"],[[43392,43456],"valid"],[[43457,43469],"valid",[],"NV8"],[[43470,43470],"disallowed"],[[43471,43481],"valid"],[[43482,43485],"disallowed"],[[43486,43487],"valid",[],"NV8"],[[43488,43518],"valid"],[[43519,43519],"disallowed"],[[43520,43574],"valid"],[[43575,43583],"disallowed"],[[43584,43597],"valid"],[[43598,43599],"disallowed"],[[43600,43609],"valid"],[[43610,43611],"disallowed"],[[43612,43615],"valid",[],"NV8"],[[43616,43638],"valid"],[[43639,43641],"valid",[],"NV8"],[[43642,43643],"valid"],[[43644,43647],"valid"],[[43648,43714],"valid"],[[43715,43738],"disallowed"],[[43739,43741],"valid"],[[43742,43743],"valid",[],"NV8"],[[43744,43759],"valid"],[[43760,43761],"valid",[],"NV8"],[[43762,43766],"valid"],[[43767,43776],"disallowed"],[[43777,43782],"valid"],[[43783,43784],"disallowed"],[[43785,43790],"valid"],[[43791,43792],"disallowed"],[[43793,43798],"valid"],[[43799,43807],"disallowed"],[[43808,43814],"valid"],[[43815,43815],"disallowed"],[[43816,43822],"valid"],[[43823,43823],"disallowed"],[[43824,43866],"valid"],[[43867,43867],"valid",[],"NV8"],[[43868,43868],"mapped",[42791]],[[43869,43869],"mapped",[43831]],[[43870,43870],"mapped",[619]],[[43871,43871],"mapped",[43858]],[[43872,43875],"valid"],[[43876,43877],"valid"],[[43878,43887],"disallowed"],[[43888,43888],"mapped",[5024]],[[43889,43889],"mapped",[5025]],[[43890,43890],"mapped",[5026]],[[43891,43891],"mapped",[5027]],[[43892,43892],"mapped",[5028]],[[43893,43893],"mapped",[5029]],[[43894,43894],"mapped",[5030]],[[43895,43895],"mapped",[5031]],[[43896,43896],"mapped",[5032]],[[43897,43897],"mapped",[5033]],[[43898,43898],"mapped",[5034]],[[43899,43899],"mapped",[5035]],[[43900,43900],"mapped",[5036]],[[43901,43901],"mapped",[5037]],[[43902,43902],"mapped",[5038]],[[43903,43903],"mapped",[5039]],[[43904,43904],"mapped",[5040]],[[43905,43905],"mapped",[5041]],[[43906,43906],"mapped",[5042]],[[43907,43907],"mapped",[5043]],[[43908,43908],"mapped",[5044]],[[43909,43909],"mapped",[5045]],[[43910,43910],"mapped",[5046]],[[43911,43911],"mapped",[5047]],[[43912,43912],"mapped",[5048]],[[43913,43913],"mapped",[5049]],[[43914,43914],"mapped",[5050]],[[43915,43915],"mapped",[5051]],[[43916,43916],"mapped",[5052]],[[43917,43917],"mapped",[5053]],[[43918,43918],"mapped",[5054]],[[43919,43919],"mapped",[5055]],[[43920,43920],"mapped",[5056]],[[43921,43921],"mapped",[5057]],[[43922,43922],"mapped",[5058]],[[43923,43923],"mapped",[5059]],[[43924,43924],"mapped",[5060]],[[43925,43925],"mapped",[5061]],[[43926,43926],"mapped",[5062]],[[43927,43927],"mapped",[5063]],[[43928,43928],"mapped",[5064]],[[43929,43929],"mapped",[5065]],[[43930,43930],"mapped",[5066]],[[43931,43931],"mapped",[5067]],[[43932,43932],"mapped",[5068]],[[43933,43933],"mapped",[5069]],[[43934,43934],"mapped",[5070]],[[43935,43935],"mapped",[5071]],[[43936,43936],"mapped",[5072]],[[43937,43937],"mapped",[5073]],[[43938,43938],"mapped",[5074]],[[43939,43939],"mapped",[5075]],[[43940,43940],"mapped",[5076]],[[43941,43941],"mapped",[5077]],[[43942,43942],"mapped",[5078]],[[43943,43943],"mapped",[5079]],[[43944,43944],"mapped",[5080]],[[43945,43945],"mapped",[5081]],[[43946,43946],"mapped",[5082]],[[43947,43947],"mapped",[5083]],[[43948,43948],"mapped",[5084]],[[43949,43949],"mapped",[5085]],[[43950,43950],"mapped",[5086]],[[43951,43951],"mapped",[5087]],[[43952,43952],"mapped",[5088]],[[43953,43953],"mapped",[5089]],[[43954,43954],"mapped",[5090]],[[43955,43955],"mapped",[5091]],[[43956,43956],"mapped",[5092]],[[43957,43957],"mapped",[5093]],[[43958,43958],"mapped",[5094]],[[43959,43959],"mapped",[5095]],[[43960,43960],"mapped",[5096]],[[43961,43961],"mapped",[5097]],[[43962,43962],"mapped",[5098]],[[43963,43963],"mapped",[5099]],[[43964,43964],"mapped",[5100]],[[43965,43965],"mapped",[5101]],[[43966,43966],"mapped",[5102]],[[43967,43967],"mapped",[5103]],[[43968,44010],"valid"],[[44011,44011],"valid",[],"NV8"],[[44012,44013],"valid"],[[44014,44015],"disallowed"],[[44016,44025],"valid"],[[44026,44031],"disallowed"],[[44032,55203],"valid"],[[55204,55215],"disallowed"],[[55216,55238],"valid",[],"NV8"],[[55239,55242],"disallowed"],[[55243,55291],"valid",[],"NV8"],[[55292,55295],"disallowed"],[[55296,57343],"disallowed"],[[57344,63743],"disallowed"],[[63744,63744],"mapped",[35912]],[[63745,63745],"mapped",[26356]],[[63746,63746],"mapped",[36554]],[[63747,63747],"mapped",[36040]],[[63748,63748],"mapped",[28369]],[[63749,63749],"mapped",[20018]],[[63750,63750],"mapped",[21477]],[[63751,63752],"mapped",[40860]],[[63753,63753],"mapped",[22865]],[[63754,63754],"mapped",[37329]],[[63755,63755],"mapped",[21895]],[[63756,63756],"mapped",[22856]],[[63757,63757],"mapped",[25078]],[[63758,63758],"mapped",[30313]],[[63759,63759],"mapped",[32645]],[[63760,63760],"mapped",[34367]],[[63761,63761],"mapped",[34746]],[[63762,63762],"mapped",[35064]],[[63763,63763],"mapped",[37007]],[[63764,63764],"mapped",[27138]],[[63765,63765],"mapped",[27931]],[[63766,63766],"mapped",[28889]],[[63767,63767],"mapped",[29662]],[[63768,63768],"mapped",[33853]],[[63769,63769],"mapped",[37226]],[[63770,63770],"mapped",[39409]],[[63771,63771],"mapped",[20098]],[[63772,63772],"mapped",[21365]],[[63773,63773],"mapped",[27396]],[[63774,63774],"mapped",[29211]],[[63775,63775],"mapped",[34349]],[[63776,63776],"mapped",[40478]],[[63777,63777],"mapped",[23888]],[[63778,63778],"mapped",[28651]],[[63779,63779],"mapped",[34253]],[[63780,63780],"mapped",[35172]],[[63781,63781],"mapped",[25289]],[[63782,63782],"mapped",[33240]],[[63783,63783],"mapped",[34847]],[[63784,63784],"mapped",[24266]],[[63785,63785],"mapped",[26391]],[[63786,63786],"mapped",[28010]],[[63787,63787],"mapped",[29436]],[[63788,63788],"mapped",[37070]],[[63789,63789],"mapped",[20358]],[[63790,63790],"mapped",[20919]],[[63791,63791],"mapped",[21214]],[[63792,63792],"mapped",[25796]],[[63793,63793],"mapped",[27347]],[[63794,63794],"mapped",[29200]],[[63795,63795],"mapped",[30439]],[[63796,63796],"mapped",[32769]],[[63797,63797],"mapped",[34310]],[[63798,63798],"mapped",[34396]],[[63799,63799],"mapped",[36335]],[[63800,63800],"mapped",[38706]],[[63801,63801],"mapped",[39791]],[[63802,63802],"mapped",[40442]],[[63803,63803],"mapped",[30860]],[[63804,63804],"mapped",[31103]],[[63805,63805],"mapped",[32160]],[[63806,63806],"mapped",[33737]],[[63807,63807],"mapped",[37636]],[[63808,63808],"mapped",[40575]],[[63809,63809],"mapped",[35542]],[[63810,63810],"mapped",[22751]],[[63811,63811],"mapped",[24324]],[[63812,63812],"mapped",[31840]],[[63813,63813],"mapped",[32894]],[[63814,63814],"mapped",[29282]],[[63815,63815],"mapped",[30922]],[[63816,63816],"mapped",[36034]],[[63817,63817],"mapped",[38647]],[[63818,63818],"mapped",[22744]],[[63819,63819],"mapped",[23650]],[[63820,63820],"mapped",[27155]],[[63821,63821],"mapped",[28122]],[[63822,63822],"mapped",[28431]],[[63823,63823],"mapped",[32047]],[[63824,63824],"mapped",[32311]],[[63825,63825],"mapped",[38475]],[[63826,63826],"mapped",[21202]],[[63827,63827],"mapped",[32907]],[[63828,63828],"mapped",[20956]],[[63829,63829],"mapped",[20940]],[[63830,63830],"mapped",[31260]],[[63831,63831],"mapped",[32190]],[[63832,63832],"mapped",[33777]],[[63833,63833],"mapped",[38517]],[[63834,63834],"mapped",[35712]],[[63835,63835],"mapped",[25295]],[[63836,63836],"mapped",[27138]],[[63837,63837],"mapped",[35582]],[[63838,63838],"mapped",[20025]],[[63839,63839],"mapped",[23527]],[[63840,63840],"mapped",[24594]],[[63841,63841],"mapped",[29575]],[[63842,63842],"mapped",[30064]],[[63843,63843],"mapped",[21271]],[[63844,63844],"mapped",[30971]],[[63845,63845],"mapped",[20415]],[[63846,63846],"mapped",[24489]],[[63847,63847],"mapped",[19981]],[[63848,63848],"mapped",[27852]],[[63849,63849],"mapped",[25976]],[[63850,63850],"mapped",[32034]],[[63851,63851],"mapped",[21443]],[[63852,63852],"mapped",[22622]],[[63853,63853],"mapped",[30465]],[[63854,63854],"mapped",[33865]],[[63855,63855],"mapped",[35498]],[[63856,63856],"mapped",[27578]],[[63857,63857],"mapped",[36784]],[[63858,63858],"mapped",[27784]],[[63859,63859],"mapped",[25342]],[[63860,63860],"mapped",[33509]],[[63861,63861],"mapped",[25504]],[[63862,63862],"mapped",[30053]],[[63863,63863],"mapped",[20142]],[[63864,63864],"mapped",[20841]],[[63865,63865],"mapped",[20937]],[[63866,63866],"mapped",[26753]],[[63867,63867],"mapped",[31975]],[[63868,63868],"mapped",[33391]],[[63869,63869],"mapped",[35538]],[[63870,63870],"mapped",[37327]],[[63871,63871],"mapped",[21237]],[[63872,63872],"mapped",[21570]],[[63873,63873],"mapped",[22899]],[[63874,63874],"mapped",[24300]],[[63875,63875],"mapped",[26053]],[[63876,63876],"mapped",[28670]],[[63877,63877],"mapped",[31018]],[[63878,63878],"mapped",[38317]],[[63879,63879],"mapped",[39530]],[[63880,63880],"mapped",[40599]],[[63881,63881],"mapped",[40654]],[[63882,63882],"mapped",[21147]],[[63883,63883],"mapped",[26310]],[[63884,63884],"mapped",[27511]],[[63885,63885],"mapped",[36706]],[[63886,63886],"mapped",[24180]],[[63887,63887],"mapped",[24976]],[[63888,63888],"mapped",[25088]],[[63889,63889],"mapped",[25754]],[[63890,63890],"mapped",[28451]],[[63891,63891],"mapped",[29001]],[[63892,63892],"mapped",[29833]],[[63893,63893],"mapped",[31178]],[[63894,63894],"mapped",[32244]],[[63895,63895],"mapped",[32879]],[[63896,63896],"mapped",[36646]],[[63897,63897],"mapped",[34030]],[[63898,63898],"mapped",[36899]],[[63899,63899],"mapped",[37706]],[[63900,63900],"mapped",[21015]],[[63901,63901],"mapped",[21155]],[[63902,63902],"mapped",[21693]],[[63903,63903],"mapped",[28872]],[[63904,63904],"mapped",[35010]],[[63905,63905],"mapped",[35498]],[[63906,63906],"mapped",[24265]],[[63907,63907],"mapped",[24565]],[[63908,63908],"mapped",[25467]],[[63909,63909],"mapped",[27566]],[[63910,63910],"mapped",[31806]],[[63911,63911],"mapped",[29557]],[[63912,63912],"mapped",[20196]],[[63913,63913],"mapped",[22265]],[[63914,63914],"mapped",[23527]],[[63915,63915],"mapped",[23994]],[[63916,63916],"mapped",[24604]],[[63917,63917],"mapped",[29618]],[[63918,63918],"mapped",[29801]],[[63919,63919],"mapped",[32666]],[[63920,63920],"mapped",[32838]],[[63921,63921],"mapped",[37428]],[[63922,63922],"mapped",[38646]],[[63923,63923],"mapped",[38728]],[[63924,63924],"mapped",[38936]],[[63925,63925],"mapped",[20363]],[[63926,63926],"mapped",[31150]],[[63927,63927],"mapped",[37300]],[[63928,63928],"mapped",[38584]],[[63929,63929],"mapped",[24801]],[[63930,63930],"mapped",[20102]],[[63931,63931],"mapped",[20698]],[[63932,63932],"mapped",[23534]],[[63933,63933],"mapped",[23615]],[[63934,63934],"mapped",[26009]],[[63935,63935],"mapped",[27138]],[[63936,63936],"mapped",[29134]],[[63937,63937],"mapped",[30274]],[[63938,63938],"mapped",[34044]],[[63939,63939],"mapped",[36988]],[[63940,63940],"mapped",[40845]],[[63941,63941],"mapped",[26248]],[[63942,63942],"mapped",[38446]],[[63943,63943],"mapped",[21129]],[[63944,63944],"mapped",[26491]],[[63945,63945],"mapped",[26611]],[[63946,63946],"mapped",[27969]],[[63947,63947],"mapped",[28316]],[[63948,63948],"mapped",[29705]],[[63949,63949],"mapped",[30041]],[[63950,63950],"mapped",[30827]],[[63951,63951],"mapped",[32016]],[[63952,63952],"mapped",[39006]],[[63953,63953],"mapped",[20845]],[[63954,63954],"mapped",[25134]],[[63955,63955],"mapped",[38520]],[[63956,63956],"mapped",[20523]],[[63957,63957],"mapped",[23833]],[[63958,63958],"mapped",[28138]],[[63959,63959],"mapped",[36650]],[[63960,63960],"mapped",[24459]],[[63961,63961],"mapped",[24900]],[[63962,63962],"mapped",[26647]],[[63963,63963],"mapped",[29575]],[[63964,63964],"mapped",[38534]],[[63965,63965],"mapped",[21033]],[[63966,63966],"mapped",[21519]],[[63967,63967],"mapped",[23653]],[[63968,63968],"mapped",[26131]],[[63969,63969],"mapped",[26446]],[[63970,63970],"mapped",[26792]],[[63971,63971],"mapped",[27877]],[[63972,63972],"mapped",[29702]],[[63973,63973],"mapped",[30178]],[[63974,63974],"mapped",[32633]],[[63975,63975],"mapped",[35023]],[[63976,63976],"mapped",[35041]],[[63977,63977],"mapped",[37324]],[[63978,63978],"mapped",[38626]],[[63979,63979],"mapped",[21311]],[[63980,63980],"mapped",[28346]],[[63981,63981],"mapped",[21533]],[[63982,63982],"mapped",[29136]],[[63983,63983],"mapped",[29848]],[[63984,63984],"mapped",[34298]],[[63985,63985],"mapped",[38563]],[[63986,63986],"mapped",[40023]],[[63987,63987],"mapped",[40607]],[[63988,63988],"mapped",[26519]],[[63989,63989],"mapped",[28107]],[[63990,63990],"mapped",[33256]],[[63991,63991],"mapped",[31435]],[[63992,63992],"mapped",[31520]],[[63993,63993],"mapped",[31890]],[[63994,63994],"mapped",[29376]],[[63995,63995],"mapped",[28825]],[[63996,63996],"mapped",[35672]],[[63997,63997],"mapped",[20160]],[[63998,63998],"mapped",[33590]],[[63999,63999],"mapped",[21050]],[[64e3,64e3],"mapped",[20999]],[[64001,64001],"mapped",[24230]],[[64002,64002],"mapped",[25299]],[[64003,64003],"mapped",[31958]],[[64004,64004],"mapped",[23429]],[[64005,64005],"mapped",[27934]],[[64006,64006],"mapped",[26292]],[[64007,64007],"mapped",[36667]],[[64008,64008],"mapped",[34892]],[[64009,64009],"mapped",[38477]],[[64010,64010],"mapped",[35211]],[[64011,64011],"mapped",[24275]],[[64012,64012],"mapped",[20800]],[[64013,64013],"mapped",[21952]],[[64014,64015],"valid"],[[64016,64016],"mapped",[22618]],[[64017,64017],"valid"],[[64018,64018],"mapped",[26228]],[[64019,64020],"valid"],[[64021,64021],"mapped",[20958]],[[64022,64022],"mapped",[29482]],[[64023,64023],"mapped",[30410]],[[64024,64024],"mapped",[31036]],[[64025,64025],"mapped",[31070]],[[64026,64026],"mapped",[31077]],[[64027,64027],"mapped",[31119]],[[64028,64028],"mapped",[38742]],[[64029,64029],"mapped",[31934]],[[64030,64030],"mapped",[32701]],[[64031,64031],"valid"],[[64032,64032],"mapped",[34322]],[[64033,64033],"valid"],[[64034,64034],"mapped",[35576]],[[64035,64036],"valid"],[[64037,64037],"mapped",[36920]],[[64038,64038],"mapped",[37117]],[[64039,64041],"valid"],[[64042,64042],"mapped",[39151]],[[64043,64043],"mapped",[39164]],[[64044,64044],"mapped",[39208]],[[64045,64045],"mapped",[40372]],[[64046,64046],"mapped",[37086]],[[64047,64047],"mapped",[38583]],[[64048,64048],"mapped",[20398]],[[64049,64049],"mapped",[20711]],[[64050,64050],"mapped",[20813]],[[64051,64051],"mapped",[21193]],[[64052,64052],"mapped",[21220]],[[64053,64053],"mapped",[21329]],[[64054,64054],"mapped",[21917]],[[64055,64055],"mapped",[22022]],[[64056,64056],"mapped",[22120]],[[64057,64057],"mapped",[22592]],[[64058,64058],"mapped",[22696]],[[64059,64059],"mapped",[23652]],[[64060,64060],"mapped",[23662]],[[64061,64061],"mapped",[24724]],[[64062,64062],"mapped",[24936]],[[64063,64063],"mapped",[24974]],[[64064,64064],"mapped",[25074]],[[64065,64065],"mapped",[25935]],[[64066,64066],"mapped",[26082]],[[64067,64067],"mapped",[26257]],[[64068,64068],"mapped",[26757]],[[64069,64069],"mapped",[28023]],[[64070,64070],"mapped",[28186]],[[64071,64071],"mapped",[28450]],[[64072,64072],"mapped",[29038]],[[64073,64073],"mapped",[29227]],[[64074,64074],"mapped",[29730]],[[64075,64075],"mapped",[30865]],[[64076,64076],"mapped",[31038]],[[64077,64077],"mapped",[31049]],[[64078,64078],"mapped",[31048]],[[64079,64079],"mapped",[31056]],[[64080,64080],"mapped",[31062]],[[64081,64081],"mapped",[31069]],[[64082,64082],"mapped",[31117]],[[64083,64083],"mapped",[31118]],[[64084,64084],"mapped",[31296]],[[64085,64085],"mapped",[31361]],[[64086,64086],"mapped",[31680]],[[64087,64087],"mapped",[32244]],[[64088,64088],"mapped",[32265]],[[64089,64089],"mapped",[32321]],[[64090,64090],"mapped",[32626]],[[64091,64091],"mapped",[32773]],[[64092,64092],"mapped",[33261]],[[64093,64094],"mapped",[33401]],[[64095,64095],"mapped",[33879]],[[64096,64096],"mapped",[35088]],[[64097,64097],"mapped",[35222]],[[64098,64098],"mapped",[35585]],[[64099,64099],"mapped",[35641]],[[64100,64100],"mapped",[36051]],[[64101,64101],"mapped",[36104]],[[64102,64102],"mapped",[36790]],[[64103,64103],"mapped",[36920]],[[64104,64104],"mapped",[38627]],[[64105,64105],"mapped",[38911]],[[64106,64106],"mapped",[38971]],[[64107,64107],"mapped",[24693]],[[64108,64108],"mapped",[148206]],[[64109,64109],"mapped",[33304]],[[64110,64111],"disallowed"],[[64112,64112],"mapped",[20006]],[[64113,64113],"mapped",[20917]],[[64114,64114],"mapped",[20840]],[[64115,64115],"mapped",[20352]],[[64116,64116],"mapped",[20805]],[[64117,64117],"mapped",[20864]],[[64118,64118],"mapped",[21191]],[[64119,64119],"mapped",[21242]],[[64120,64120],"mapped",[21917]],[[64121,64121],"mapped",[21845]],[[64122,64122],"mapped",[21913]],[[64123,64123],"mapped",[21986]],[[64124,64124],"mapped",[22618]],[[64125,64125],"mapped",[22707]],[[64126,64126],"mapped",[22852]],[[64127,64127],"mapped",[22868]],[[64128,64128],"mapped",[23138]],[[64129,64129],"mapped",[23336]],[[64130,64130],"mapped",[24274]],[[64131,64131],"mapped",[24281]],[[64132,64132],"mapped",[24425]],[[64133,64133],"mapped",[24493]],[[64134,64134],"mapped",[24792]],[[64135,64135],"mapped",[24910]],[[64136,64136],"mapped",[24840]],[[64137,64137],"mapped",[24974]],[[64138,64138],"mapped",[24928]],[[64139,64139],"mapped",[25074]],[[64140,64140],"mapped",[25140]],[[64141,64141],"mapped",[25540]],[[64142,64142],"mapped",[25628]],[[64143,64143],"mapped",[25682]],[[64144,64144],"mapped",[25942]],[[64145,64145],"mapped",[26228]],[[64146,64146],"mapped",[26391]],[[64147,64147],"mapped",[26395]],[[64148,64148],"mapped",[26454]],[[64149,64149],"mapped",[27513]],[[64150,64150],"mapped",[27578]],[[64151,64151],"mapped",[27969]],[[64152,64152],"mapped",[28379]],[[64153,64153],"mapped",[28363]],[[64154,64154],"mapped",[28450]],[[64155,64155],"mapped",[28702]],[[64156,64156],"mapped",[29038]],[[64157,64157],"mapped",[30631]],[[64158,64158],"mapped",[29237]],[[64159,64159],"mapped",[29359]],[[64160,64160],"mapped",[29482]],[[64161,64161],"mapped",[29809]],[[64162,64162],"mapped",[29958]],[[64163,64163],"mapped",[30011]],[[64164,64164],"mapped",[30237]],[[64165,64165],"mapped",[30239]],[[64166,64166],"mapped",[30410]],[[64167,64167],"mapped",[30427]],[[64168,64168],"mapped",[30452]],[[64169,64169],"mapped",[30538]],[[64170,64170],"mapped",[30528]],[[64171,64171],"mapped",[30924]],[[64172,64172],"mapped",[31409]],[[64173,64173],"mapped",[31680]],[[64174,64174],"mapped",[31867]],[[64175,64175],"mapped",[32091]],[[64176,64176],"mapped",[32244]],[[64177,64177],"mapped",[32574]],[[64178,64178],"mapped",[32773]],[[64179,64179],"mapped",[33618]],[[64180,64180],"mapped",[33775]],[[64181,64181],"mapped",[34681]],[[64182,64182],"mapped",[35137]],[[64183,64183],"mapped",[35206]],[[64184,64184],"mapped",[35222]],[[64185,64185],"mapped",[35519]],[[64186,64186],"mapped",[35576]],[[64187,64187],"mapped",[35531]],[[64188,64188],"mapped",[35585]],[[64189,64189],"mapped",[35582]],[[64190,64190],"mapped",[35565]],[[64191,64191],"mapped",[35641]],[[64192,64192],"mapped",[35722]],[[64193,64193],"mapped",[36104]],[[64194,64194],"mapped",[36664]],[[64195,64195],"mapped",[36978]],[[64196,64196],"mapped",[37273]],[[64197,64197],"mapped",[37494]],[[64198,64198],"mapped",[38524]],[[64199,64199],"mapped",[38627]],[[64200,64200],"mapped",[38742]],[[64201,64201],"mapped",[38875]],[[64202,64202],"mapped",[38911]],[[64203,64203],"mapped",[38923]],[[64204,64204],"mapped",[38971]],[[64205,64205],"mapped",[39698]],[[64206,64206],"mapped",[40860]],[[64207,64207],"mapped",[141386]],[[64208,64208],"mapped",[141380]],[[64209,64209],"mapped",[144341]],[[64210,64210],"mapped",[15261]],[[64211,64211],"mapped",[16408]],[[64212,64212],"mapped",[16441]],[[64213,64213],"mapped",[152137]],[[64214,64214],"mapped",[154832]],[[64215,64215],"mapped",[163539]],[[64216,64216],"mapped",[40771]],[[64217,64217],"mapped",[40846]],[[64218,64255],"disallowed"],[[64256,64256],"mapped",[102,102]],[[64257,64257],"mapped",[102,105]],[[64258,64258],"mapped",[102,108]],[[64259,64259],"mapped",[102,102,105]],[[64260,64260],"mapped",[102,102,108]],[[64261,64262],"mapped",[115,116]],[[64263,64274],"disallowed"],[[64275,64275],"mapped",[1396,1398]],[[64276,64276],"mapped",[1396,1381]],[[64277,64277],"mapped",[1396,1387]],[[64278,64278],"mapped",[1406,1398]],[[64279,64279],"mapped",[1396,1389]],[[64280,64284],"disallowed"],[[64285,64285],"mapped",[1497,1460]],[[64286,64286],"valid"],[[64287,64287],"mapped",[1522,1463]],[[64288,64288],"mapped",[1506]],[[64289,64289],"mapped",[1488]],[[64290,64290],"mapped",[1491]],[[64291,64291],"mapped",[1492]],[[64292,64292],"mapped",[1499]],[[64293,64293],"mapped",[1500]],[[64294,64294],"mapped",[1501]],[[64295,64295],"mapped",[1512]],[[64296,64296],"mapped",[1514]],[[64297,64297],"disallowed_STD3_mapped",[43]],[[64298,64298],"mapped",[1513,1473]],[[64299,64299],"mapped",[1513,1474]],[[64300,64300],"mapped",[1513,1468,1473]],[[64301,64301],"mapped",[1513,1468,1474]],[[64302,64302],"mapped",[1488,1463]],[[64303,64303],"mapped",[1488,1464]],[[64304,64304],"mapped",[1488,1468]],[[64305,64305],"mapped",[1489,1468]],[[64306,64306],"mapped",[1490,1468]],[[64307,64307],"mapped",[1491,1468]],[[64308,64308],"mapped",[1492,1468]],[[64309,64309],"mapped",[1493,1468]],[[64310,64310],"mapped",[1494,1468]],[[64311,64311],"disallowed"],[[64312,64312],"mapped",[1496,1468]],[[64313,64313],"mapped",[1497,1468]],[[64314,64314],"mapped",[1498,1468]],[[64315,64315],"mapped",[1499,1468]],[[64316,64316],"mapped",[1500,1468]],[[64317,64317],"disallowed"],[[64318,64318],"mapped",[1502,1468]],[[64319,64319],"disallowed"],[[64320,64320],"mapped",[1504,1468]],[[64321,64321],"mapped",[1505,1468]],[[64322,64322],"disallowed"],[[64323,64323],"mapped",[1507,1468]],[[64324,64324],"mapped",[1508,1468]],[[64325,64325],"disallowed"],[[64326,64326],"mapped",[1510,1468]],[[64327,64327],"mapped",[1511,1468]],[[64328,64328],"mapped",[1512,1468]],[[64329,64329],"mapped",[1513,1468]],[[64330,64330],"mapped",[1514,1468]],[[64331,64331],"mapped",[1493,1465]],[[64332,64332],"mapped",[1489,1471]],[[64333,64333],"mapped",[1499,1471]],[[64334,64334],"mapped",[1508,1471]],[[64335,64335],"mapped",[1488,1500]],[[64336,64337],"mapped",[1649]],[[64338,64341],"mapped",[1659]],[[64342,64345],"mapped",[1662]],[[64346,64349],"mapped",[1664]],[[64350,64353],"mapped",[1658]],[[64354,64357],"mapped",[1663]],[[64358,64361],"mapped",[1657]],[[64362,64365],"mapped",[1700]],[[64366,64369],"mapped",[1702]],[[64370,64373],"mapped",[1668]],[[64374,64377],"mapped",[1667]],[[64378,64381],"mapped",[1670]],[[64382,64385],"mapped",[1671]],[[64386,64387],"mapped",[1677]],[[64388,64389],"mapped",[1676]],[[64390,64391],"mapped",[1678]],[[64392,64393],"mapped",[1672]],[[64394,64395],"mapped",[1688]],[[64396,64397],"mapped",[1681]],[[64398,64401],"mapped",[1705]],[[64402,64405],"mapped",[1711]],[[64406,64409],"mapped",[1715]],[[64410,64413],"mapped",[1713]],[[64414,64415],"mapped",[1722]],[[64416,64419],"mapped",[1723]],[[64420,64421],"mapped",[1728]],[[64422,64425],"mapped",[1729]],[[64426,64429],"mapped",[1726]],[[64430,64431],"mapped",[1746]],[[64432,64433],"mapped",[1747]],[[64434,64449],"valid",[],"NV8"],[[64450,64466],"disallowed"],[[64467,64470],"mapped",[1709]],[[64471,64472],"mapped",[1735]],[[64473,64474],"mapped",[1734]],[[64475,64476],"mapped",[1736]],[[64477,64477],"mapped",[1735,1652]],[[64478,64479],"mapped",[1739]],[[64480,64481],"mapped",[1733]],[[64482,64483],"mapped",[1737]],[[64484,64487],"mapped",[1744]],[[64488,64489],"mapped",[1609]],[[64490,64491],"mapped",[1574,1575]],[[64492,64493],"mapped",[1574,1749]],[[64494,64495],"mapped",[1574,1608]],[[64496,64497],"mapped",[1574,1735]],[[64498,64499],"mapped",[1574,1734]],[[64500,64501],"mapped",[1574,1736]],[[64502,64504],"mapped",[1574,1744]],[[64505,64507],"mapped",[1574,1609]],[[64508,64511],"mapped",[1740]],[[64512,64512],"mapped",[1574,1580]],[[64513,64513],"mapped",[1574,1581]],[[64514,64514],"mapped",[1574,1605]],[[64515,64515],"mapped",[1574,1609]],[[64516,64516],"mapped",[1574,1610]],[[64517,64517],"mapped",[1576,1580]],[[64518,64518],"mapped",[1576,1581]],[[64519,64519],"mapped",[1576,1582]],[[64520,64520],"mapped",[1576,1605]],[[64521,64521],"mapped",[1576,1609]],[[64522,64522],"mapped",[1576,1610]],[[64523,64523],"mapped",[1578,1580]],[[64524,64524],"mapped",[1578,1581]],[[64525,64525],"mapped",[1578,1582]],[[64526,64526],"mapped",[1578,1605]],[[64527,64527],"mapped",[1578,1609]],[[64528,64528],"mapped",[1578,1610]],[[64529,64529],"mapped",[1579,1580]],[[64530,64530],"mapped",[1579,1605]],[[64531,64531],"mapped",[1579,1609]],[[64532,64532],"mapped",[1579,1610]],[[64533,64533],"mapped",[1580,1581]],[[64534,64534],"mapped",[1580,1605]],[[64535,64535],"mapped",[1581,1580]],[[64536,64536],"mapped",[1581,1605]],[[64537,64537],"mapped",[1582,1580]],[[64538,64538],"mapped",[1582,1581]],[[64539,64539],"mapped",[1582,1605]],[[64540,64540],"mapped",[1587,1580]],[[64541,64541],"mapped",[1587,1581]],[[64542,64542],"mapped",[1587,1582]],[[64543,64543],"mapped",[1587,1605]],[[64544,64544],"mapped",[1589,1581]],[[64545,64545],"mapped",[1589,1605]],[[64546,64546],"mapped",[1590,1580]],[[64547,64547],"mapped",[1590,1581]],[[64548,64548],"mapped",[1590,1582]],[[64549,64549],"mapped",[1590,1605]],[[64550,64550],"mapped",[1591,1581]],[[64551,64551],"mapped",[1591,1605]],[[64552,64552],"mapped",[1592,1605]],[[64553,64553],"mapped",[1593,1580]],[[64554,64554],"mapped",[1593,1605]],[[64555,64555],"mapped",[1594,1580]],[[64556,64556],"mapped",[1594,1605]],[[64557,64557],"mapped",[1601,1580]],[[64558,64558],"mapped",[1601,1581]],[[64559,64559],"mapped",[1601,1582]],[[64560,64560],"mapped",[1601,1605]],[[64561,64561],"mapped",[1601,1609]],[[64562,64562],"mapped",[1601,1610]],[[64563,64563],"mapped",[1602,1581]],[[64564,64564],"mapped",[1602,1605]],[[64565,64565],"mapped",[1602,1609]],[[64566,64566],"mapped",[1602,1610]],[[64567,64567],"mapped",[1603,1575]],[[64568,64568],"mapped",[1603,1580]],[[64569,64569],"mapped",[1603,1581]],[[64570,64570],"mapped",[1603,1582]],[[64571,64571],"mapped",[1603,1604]],[[64572,64572],"mapped",[1603,1605]],[[64573,64573],"mapped",[1603,1609]],[[64574,64574],"mapped",[1603,1610]],[[64575,64575],"mapped",[1604,1580]],[[64576,64576],"mapped",[1604,1581]],[[64577,64577],"mapped",[1604,1582]],[[64578,64578],"mapped",[1604,1605]],[[64579,64579],"mapped",[1604,1609]],[[64580,64580],"mapped",[1604,1610]],[[64581,64581],"mapped",[1605,1580]],[[64582,64582],"mapped",[1605,1581]],[[64583,64583],"mapped",[1605,1582]],[[64584,64584],"mapped",[1605,1605]],[[64585,64585],"mapped",[1605,1609]],[[64586,64586],"mapped",[1605,1610]],[[64587,64587],"mapped",[1606,1580]],[[64588,64588],"mapped",[1606,1581]],[[64589,64589],"mapped",[1606,1582]],[[64590,64590],"mapped",[1606,1605]],[[64591,64591],"mapped",[1606,1609]],[[64592,64592],"mapped",[1606,1610]],[[64593,64593],"mapped",[1607,1580]],[[64594,64594],"mapped",[1607,1605]],[[64595,64595],"mapped",[1607,1609]],[[64596,64596],"mapped",[1607,1610]],[[64597,64597],"mapped",[1610,1580]],[[64598,64598],"mapped",[1610,1581]],[[64599,64599],"mapped",[1610,1582]],[[64600,64600],"mapped",[1610,1605]],[[64601,64601],"mapped",[1610,1609]],[[64602,64602],"mapped",[1610,1610]],[[64603,64603],"mapped",[1584,1648]],[[64604,64604],"mapped",[1585,1648]],[[64605,64605],"mapped",[1609,1648]],[[64606,64606],"disallowed_STD3_mapped",[32,1612,1617]],[[64607,64607],"disallowed_STD3_mapped",[32,1613,1617]],[[64608,64608],"disallowed_STD3_mapped",[32,1614,1617]],[[64609,64609],"disallowed_STD3_mapped",[32,1615,1617]],[[64610,64610],"disallowed_STD3_mapped",[32,1616,1617]],[[64611,64611],"disallowed_STD3_mapped",[32,1617,1648]],[[64612,64612],"mapped",[1574,1585]],[[64613,64613],"mapped",[1574,1586]],[[64614,64614],"mapped",[1574,1605]],[[64615,64615],"mapped",[1574,1606]],[[64616,64616],"mapped",[1574,1609]],[[64617,64617],"mapped",[1574,1610]],[[64618,64618],"mapped",[1576,1585]],[[64619,64619],"mapped",[1576,1586]],[[64620,64620],"mapped",[1576,1605]],[[64621,64621],"mapped",[1576,1606]],[[64622,64622],"mapped",[1576,1609]],[[64623,64623],"mapped",[1576,1610]],[[64624,64624],"mapped",[1578,1585]],[[64625,64625],"mapped",[1578,1586]],[[64626,64626],"mapped",[1578,1605]],[[64627,64627],"mapped",[1578,1606]],[[64628,64628],"mapped",[1578,1609]],[[64629,64629],"mapped",[1578,1610]],[[64630,64630],"mapped",[1579,1585]],[[64631,64631],"mapped",[1579,1586]],[[64632,64632],"mapped",[1579,1605]],[[64633,64633],"mapped",[1579,1606]],[[64634,64634],"mapped",[1579,1609]],[[64635,64635],"mapped",[1579,1610]],[[64636,64636],"mapped",[1601,1609]],[[64637,64637],"mapped",[1601,1610]],[[64638,64638],"mapped",[1602,1609]],[[64639,64639],"mapped",[1602,1610]],[[64640,64640],"mapped",[1603,1575]],[[64641,64641],"mapped",[1603,1604]],[[64642,64642],"mapped",[1603,1605]],[[64643,64643],"mapped",[1603,1609]],[[64644,64644],"mapped",[1603,1610]],[[64645,64645],"mapped",[1604,1605]],[[64646,64646],"mapped",[1604,1609]],[[64647,64647],"mapped",[1604,1610]],[[64648,64648],"mapped",[1605,1575]],[[64649,64649],"mapped",[1605,1605]],[[64650,64650],"mapped",[1606,1585]],[[64651,64651],"mapped",[1606,1586]],[[64652,64652],"mapped",[1606,1605]],[[64653,64653],"mapped",[1606,1606]],[[64654,64654],"mapped",[1606,1609]],[[64655,64655],"mapped",[1606,1610]],[[64656,64656],"mapped",[1609,1648]],[[64657,64657],"mapped",[1610,1585]],[[64658,64658],"mapped",[1610,1586]],[[64659,64659],"mapped",[1610,1605]],[[64660,64660],"mapped",[1610,1606]],[[64661,64661],"mapped",[1610,1609]],[[64662,64662],"mapped",[1610,1610]],[[64663,64663],"mapped",[1574,1580]],[[64664,64664],"mapped",[1574,1581]],[[64665,64665],"mapped",[1574,1582]],[[64666,64666],"mapped",[1574,1605]],[[64667,64667],"mapped",[1574,1607]],[[64668,64668],"mapped",[1576,1580]],[[64669,64669],"mapped",[1576,1581]],[[64670,64670],"mapped",[1576,1582]],[[64671,64671],"mapped",[1576,1605]],[[64672,64672],"mapped",[1576,1607]],[[64673,64673],"mapped",[1578,1580]],[[64674,64674],"mapped",[1578,1581]],[[64675,64675],"mapped",[1578,1582]],[[64676,64676],"mapped",[1578,1605]],[[64677,64677],"mapped",[1578,1607]],[[64678,64678],"mapped",[1579,1605]],[[64679,64679],"mapped",[1580,1581]],[[64680,64680],"mapped",[1580,1605]],[[64681,64681],"mapped",[1581,1580]],[[64682,64682],"mapped",[1581,1605]],[[64683,64683],"mapped",[1582,1580]],[[64684,64684],"mapped",[1582,1605]],[[64685,64685],"mapped",[1587,1580]],[[64686,64686],"mapped",[1587,1581]],[[64687,64687],"mapped",[1587,1582]],[[64688,64688],"mapped",[1587,1605]],[[64689,64689],"mapped",[1589,1581]],[[64690,64690],"mapped",[1589,1582]],[[64691,64691],"mapped",[1589,1605]],[[64692,64692],"mapped",[1590,1580]],[[64693,64693],"mapped",[1590,1581]],[[64694,64694],"mapped",[1590,1582]],[[64695,64695],"mapped",[1590,1605]],[[64696,64696],"mapped",[1591,1581]],[[64697,64697],"mapped",[1592,1605]],[[64698,64698],"mapped",[1593,1580]],[[64699,64699],"mapped",[1593,1605]],[[64700,64700],"mapped",[1594,1580]],[[64701,64701],"mapped",[1594,1605]],[[64702,64702],"mapped",[1601,1580]],[[64703,64703],"mapped",[1601,1581]],[[64704,64704],"mapped",[1601,1582]],[[64705,64705],"mapped",[1601,1605]],[[64706,64706],"mapped",[1602,1581]],[[64707,64707],"mapped",[1602,1605]],[[64708,64708],"mapped",[1603,1580]],[[64709,64709],"mapped",[1603,1581]],[[64710,64710],"mapped",[1603,1582]],[[64711,64711],"mapped",[1603,1604]],[[64712,64712],"mapped",[1603,1605]],[[64713,64713],"mapped",[1604,1580]],[[64714,64714],"mapped",[1604,1581]],[[64715,64715],"mapped",[1604,1582]],[[64716,64716],"mapped",[1604,1605]],[[64717,64717],"mapped",[1604,1607]],[[64718,64718],"mapped",[1605,1580]],[[64719,64719],"mapped",[1605,1581]],[[64720,64720],"mapped",[1605,1582]],[[64721,64721],"mapped",[1605,1605]],[[64722,64722],"mapped",[1606,1580]],[[64723,64723],"mapped",[1606,1581]],[[64724,64724],"mapped",[1606,1582]],[[64725,64725],"mapped",[1606,1605]],[[64726,64726],"mapped",[1606,1607]],[[64727,64727],"mapped",[1607,1580]],[[64728,64728],"mapped",[1607,1605]],[[64729,64729],"mapped",[1607,1648]],[[64730,64730],"mapped",[1610,1580]],[[64731,64731],"mapped",[1610,1581]],[[64732,64732],"mapped",[1610,1582]],[[64733,64733],"mapped",[1610,1605]],[[64734,64734],"mapped",[1610,1607]],[[64735,64735],"mapped",[1574,1605]],[[64736,64736],"mapped",[1574,1607]],[[64737,64737],"mapped",[1576,1605]],[[64738,64738],"mapped",[1576,1607]],[[64739,64739],"mapped",[1578,1605]],[[64740,64740],"mapped",[1578,1607]],[[64741,64741],"mapped",[1579,1605]],[[64742,64742],"mapped",[1579,1607]],[[64743,64743],"mapped",[1587,1605]],[[64744,64744],"mapped",[1587,1607]],[[64745,64745],"mapped",[1588,1605]],[[64746,64746],"mapped",[1588,1607]],[[64747,64747],"mapped",[1603,1604]],[[64748,64748],"mapped",[1603,1605]],[[64749,64749],"mapped",[1604,1605]],[[64750,64750],"mapped",[1606,1605]],[[64751,64751],"mapped",[1606,1607]],[[64752,64752],"mapped",[1610,1605]],[[64753,64753],"mapped",[1610,1607]],[[64754,64754],"mapped",[1600,1614,1617]],[[64755,64755],"mapped",[1600,1615,1617]],[[64756,64756],"mapped",[1600,1616,1617]],[[64757,64757],"mapped",[1591,1609]],[[64758,64758],"mapped",[1591,1610]],[[64759,64759],"mapped",[1593,1609]],[[64760,64760],"mapped",[1593,1610]],[[64761,64761],"mapped",[1594,1609]],[[64762,64762],"mapped",[1594,1610]],[[64763,64763],"mapped",[1587,1609]],[[64764,64764],"mapped",[1587,1610]],[[64765,64765],"mapped",[1588,1609]],[[64766,64766],"mapped",[1588,1610]],[[64767,64767],"mapped",[1581,1609]],[[64768,64768],"mapped",[1581,1610]],[[64769,64769],"mapped",[1580,1609]],[[64770,64770],"mapped",[1580,1610]],[[64771,64771],"mapped",[1582,1609]],[[64772,64772],"mapped",[1582,1610]],[[64773,64773],"mapped",[1589,1609]],[[64774,64774],"mapped",[1589,1610]],[[64775,64775],"mapped",[1590,1609]],[[64776,64776],"mapped",[1590,1610]],[[64777,64777],"mapped",[1588,1580]],[[64778,64778],"mapped",[1588,1581]],[[64779,64779],"mapped",[1588,1582]],[[64780,64780],"mapped",[1588,1605]],[[64781,64781],"mapped",[1588,1585]],[[64782,64782],"mapped",[1587,1585]],[[64783,64783],"mapped",[1589,1585]],[[64784,64784],"mapped",[1590,1585]],[[64785,64785],"mapped",[1591,1609]],[[64786,64786],"mapped",[1591,1610]],[[64787,64787],"mapped",[1593,1609]],[[64788,64788],"mapped",[1593,1610]],[[64789,64789],"mapped",[1594,1609]],[[64790,64790],"mapped",[1594,1610]],[[64791,64791],"mapped",[1587,1609]],[[64792,64792],"mapped",[1587,1610]],[[64793,64793],"mapped",[1588,1609]],[[64794,64794],"mapped",[1588,1610]],[[64795,64795],"mapped",[1581,1609]],[[64796,64796],"mapped",[1581,1610]],[[64797,64797],"mapped",[1580,1609]],[[64798,64798],"mapped",[1580,1610]],[[64799,64799],"mapped",[1582,1609]],[[64800,64800],"mapped",[1582,1610]],[[64801,64801],"mapped",[1589,1609]],[[64802,64802],"mapped",[1589,1610]],[[64803,64803],"mapped",[1590,1609]],[[64804,64804],"mapped",[1590,1610]],[[64805,64805],"mapped",[1588,1580]],[[64806,64806],"mapped",[1588,1581]],[[64807,64807],"mapped",[1588,1582]],[[64808,64808],"mapped",[1588,1605]],[[64809,64809],"mapped",[1588,1585]],[[64810,64810],"mapped",[1587,1585]],[[64811,64811],"mapped",[1589,1585]],[[64812,64812],"mapped",[1590,1585]],[[64813,64813],"mapped",[1588,1580]],[[64814,64814],"mapped",[1588,1581]],[[64815,64815],"mapped",[1588,1582]],[[64816,64816],"mapped",[1588,1605]],[[64817,64817],"mapped",[1587,1607]],[[64818,64818],"mapped",[1588,1607]],[[64819,64819],"mapped",[1591,1605]],[[64820,64820],"mapped",[1587,1580]],[[64821,64821],"mapped",[1587,1581]],[[64822,64822],"mapped",[1587,1582]],[[64823,64823],"mapped",[1588,1580]],[[64824,64824],"mapped",[1588,1581]],[[64825,64825],"mapped",[1588,1582]],[[64826,64826],"mapped",[1591,1605]],[[64827,64827],"mapped",[1592,1605]],[[64828,64829],"mapped",[1575,1611]],[[64830,64831],"valid",[],"NV8"],[[64832,64847],"disallowed"],[[64848,64848],"mapped",[1578,1580,1605]],[[64849,64850],"mapped",[1578,1581,1580]],[[64851,64851],"mapped",[1578,1581,1605]],[[64852,64852],"mapped",[1578,1582,1605]],[[64853,64853],"mapped",[1578,1605,1580]],[[64854,64854],"mapped",[1578,1605,1581]],[[64855,64855],"mapped",[1578,1605,1582]],[[64856,64857],"mapped",[1580,1605,1581]],[[64858,64858],"mapped",[1581,1605,1610]],[[64859,64859],"mapped",[1581,1605,1609]],[[64860,64860],"mapped",[1587,1581,1580]],[[64861,64861],"mapped",[1587,1580,1581]],[[64862,64862],"mapped",[1587,1580,1609]],[[64863,64864],"mapped",[1587,1605,1581]],[[64865,64865],"mapped",[1587,1605,1580]],[[64866,64867],"mapped",[1587,1605,1605]],[[64868,64869],"mapped",[1589,1581,1581]],[[64870,64870],"mapped",[1589,1605,1605]],[[64871,64872],"mapped",[1588,1581,1605]],[[64873,64873],"mapped",[1588,1580,1610]],[[64874,64875],"mapped",[1588,1605,1582]],[[64876,64877],"mapped",[1588,1605,1605]],[[64878,64878],"mapped",[1590,1581,1609]],[[64879,64880],"mapped",[1590,1582,1605]],[[64881,64882],"mapped",[1591,1605,1581]],[[64883,64883],"mapped",[1591,1605,1605]],[[64884,64884],"mapped",[1591,1605,1610]],[[64885,64885],"mapped",[1593,1580,1605]],[[64886,64887],"mapped",[1593,1605,1605]],[[64888,64888],"mapped",[1593,1605,1609]],[[64889,64889],"mapped",[1594,1605,1605]],[[64890,64890],"mapped",[1594,1605,1610]],[[64891,64891],"mapped",[1594,1605,1609]],[[64892,64893],"mapped",[1601,1582,1605]],[[64894,64894],"mapped",[1602,1605,1581]],[[64895,64895],"mapped",[1602,1605,1605]],[[64896,64896],"mapped",[1604,1581,1605]],[[64897,64897],"mapped",[1604,1581,1610]],[[64898,64898],"mapped",[1604,1581,1609]],[[64899,64900],"mapped",[1604,1580,1580]],[[64901,64902],"mapped",[1604,1582,1605]],[[64903,64904],"mapped",[1604,1605,1581]],[[64905,64905],"mapped",[1605,1581,1580]],[[64906,64906],"mapped",[1605,1581,1605]],[[64907,64907],"mapped",[1605,1581,1610]],[[64908,64908],"mapped",[1605,1580,1581]],[[64909,64909],"mapped",[1605,1580,1605]],[[64910,64910],"mapped",[1605,1582,1580]],[[64911,64911],"mapped",[1605,1582,1605]],[[64912,64913],"disallowed"],[[64914,64914],"mapped",[1605,1580,1582]],[[64915,64915],"mapped",[1607,1605,1580]],[[64916,64916],"mapped",[1607,1605,1605]],[[64917,64917],"mapped",[1606,1581,1605]],[[64918,64918],"mapped",[1606,1581,1609]],[[64919,64920],"mapped",[1606,1580,1605]],[[64921,64921],"mapped",[1606,1580,1609]],[[64922,64922],"mapped",[1606,1605,1610]],[[64923,64923],"mapped",[1606,1605,1609]],[[64924,64925],"mapped",[1610,1605,1605]],[[64926,64926],"mapped",[1576,1582,1610]],[[64927,64927],"mapped",[1578,1580,1610]],[[64928,64928],"mapped",[1578,1580,1609]],[[64929,64929],"mapped",[1578,1582,1610]],[[64930,64930],"mapped",[1578,1582,1609]],[[64931,64931],"mapped",[1578,1605,1610]],[[64932,64932],"mapped",[1578,1605,1609]],[[64933,64933],"mapped",[1580,1605,1610]],[[64934,64934],"mapped",[1580,1581,1609]],[[64935,64935],"mapped",[1580,1605,1609]],[[64936,64936],"mapped",[1587,1582,1609]],[[64937,64937],"mapped",[1589,1581,1610]],[[64938,64938],"mapped",[1588,1581,1610]],[[64939,64939],"mapped",[1590,1581,1610]],[[64940,64940],"mapped",[1604,1580,1610]],[[64941,64941],"mapped",[1604,1605,1610]],[[64942,64942],"mapped",[1610,1581,1610]],[[64943,64943],"mapped",[1610,1580,1610]],[[64944,64944],"mapped",[1610,1605,1610]],[[64945,64945],"mapped",[1605,1605,1610]],[[64946,64946],"mapped",[1602,1605,1610]],[[64947,64947],"mapped",[1606,1581,1610]],[[64948,64948],"mapped",[1602,1605,1581]],[[64949,64949],"mapped",[1604,1581,1605]],[[64950,64950],"mapped",[1593,1605,1610]],[[64951,64951],"mapped",[1603,1605,1610]],[[64952,64952],"mapped",[1606,1580,1581]],[[64953,64953],"mapped",[1605,1582,1610]],[[64954,64954],"mapped",[1604,1580,1605]],[[64955,64955],"mapped",[1603,1605,1605]],[[64956,64956],"mapped",[1604,1580,1605]],[[64957,64957],"mapped",[1606,1580,1581]],[[64958,64958],"mapped",[1580,1581,1610]],[[64959,64959],"mapped",[1581,1580,1610]],[[64960,64960],"mapped",[1605,1580,1610]],[[64961,64961],"mapped",[1601,1605,1610]],[[64962,64962],"mapped",[1576,1581,1610]],[[64963,64963],"mapped",[1603,1605,1605]],[[64964,64964],"mapped",[1593,1580,1605]],[[64965,64965],"mapped",[1589,1605,1605]],[[64966,64966],"mapped",[1587,1582,1610]],[[64967,64967],"mapped",[1606,1580,1610]],[[64968,64975],"disallowed"],[[64976,65007],"disallowed"],[[65008,65008],"mapped",[1589,1604,1746]],[[65009,65009],"mapped",[1602,1604,1746]],[[65010,65010],"mapped",[1575,1604,1604,1607]],[[65011,65011],"mapped",[1575,1603,1576,1585]],[[65012,65012],"mapped",[1605,1581,1605,1583]],[[65013,65013],"mapped",[1589,1604,1593,1605]],[[65014,65014],"mapped",[1585,1587,1608,1604]],[[65015,65015],"mapped",[1593,1604,1610,1607]],[[65016,65016],"mapped",[1608,1587,1604,1605]],[[65017,65017],"mapped",[1589,1604,1609]],[[65018,65018],"disallowed_STD3_mapped",[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605]],[[65019,65019],"disallowed_STD3_mapped",[1580,1604,32,1580,1604,1575,1604,1607]],[[65020,65020],"mapped",[1585,1740,1575,1604]],[[65021,65021],"valid",[],"NV8"],[[65022,65023],"disallowed"],[[65024,65039],"ignored"],[[65040,65040],"disallowed_STD3_mapped",[44]],[[65041,65041],"mapped",[12289]],[[65042,65042],"disallowed"],[[65043,65043],"disallowed_STD3_mapped",[58]],[[65044,65044],"disallowed_STD3_mapped",[59]],[[65045,65045],"disallowed_STD3_mapped",[33]],[[65046,65046],"disallowed_STD3_mapped",[63]],[[65047,65047],"mapped",[12310]],[[65048,65048],"mapped",[12311]],[[65049,65049],"disallowed"],[[65050,65055],"disallowed"],[[65056,65059],"valid"],[[65060,65062],"valid"],[[65063,65069],"valid"],[[65070,65071],"valid"],[[65072,65072],"disallowed"],[[65073,65073],"mapped",[8212]],[[65074,65074],"mapped",[8211]],[[65075,65076],"disallowed_STD3_mapped",[95]],[[65077,65077],"disallowed_STD3_mapped",[40]],[[65078,65078],"disallowed_STD3_mapped",[41]],[[65079,65079],"disallowed_STD3_mapped",[123]],[[65080,65080],"disallowed_STD3_mapped",[125]],[[65081,65081],"mapped",[12308]],[[65082,65082],"mapped",[12309]],[[65083,65083],"mapped",[12304]],[[65084,65084],"mapped",[12305]],[[65085,65085],"mapped",[12298]],[[65086,65086],"mapped",[12299]],[[65087,65087],"mapped",[12296]],[[65088,65088],"mapped",[12297]],[[65089,65089],"mapped",[12300]],[[65090,65090],"mapped",[12301]],[[65091,65091],"mapped",[12302]],[[65092,65092],"mapped",[12303]],[[65093,65094],"valid",[],"NV8"],[[65095,65095],"disallowed_STD3_mapped",[91]],[[65096,65096],"disallowed_STD3_mapped",[93]],[[65097,65100],"disallowed_STD3_mapped",[32,773]],[[65101,65103],"disallowed_STD3_mapped",[95]],[[65104,65104],"disallowed_STD3_mapped",[44]],[[65105,65105],"mapped",[12289]],[[65106,65106],"disallowed"],[[65107,65107],"disallowed"],[[65108,65108],"disallowed_STD3_mapped",[59]],[[65109,65109],"disallowed_STD3_mapped",[58]],[[65110,65110],"disallowed_STD3_mapped",[63]],[[65111,65111],"disallowed_STD3_mapped",[33]],[[65112,65112],"mapped",[8212]],[[65113,65113],"disallowed_STD3_mapped",[40]],[[65114,65114],"disallowed_STD3_mapped",[41]],[[65115,65115],"disallowed_STD3_mapped",[123]],[[65116,65116],"disallowed_STD3_mapped",[125]],[[65117,65117],"mapped",[12308]],[[65118,65118],"mapped",[12309]],[[65119,65119],"disallowed_STD3_mapped",[35]],[[65120,65120],"disallowed_STD3_mapped",[38]],[[65121,65121],"disallowed_STD3_mapped",[42]],[[65122,65122],"disallowed_STD3_mapped",[43]],[[65123,65123],"mapped",[45]],[[65124,65124],"disallowed_STD3_mapped",[60]],[[65125,65125],"disallowed_STD3_mapped",[62]],[[65126,65126],"disallowed_STD3_mapped",[61]],[[65127,65127],"disallowed"],[[65128,65128],"disallowed_STD3_mapped",[92]],[[65129,65129],"disallowed_STD3_mapped",[36]],[[65130,65130],"disallowed_STD3_mapped",[37]],[[65131,65131],"disallowed_STD3_mapped",[64]],[[65132,65135],"disallowed"],[[65136,65136],"disallowed_STD3_mapped",[32,1611]],[[65137,65137],"mapped",[1600,1611]],[[65138,65138],"disallowed_STD3_mapped",[32,1612]],[[65139,65139],"valid"],[[65140,65140],"disallowed_STD3_mapped",[32,1613]],[[65141,65141],"disallowed"],[[65142,65142],"disallowed_STD3_mapped",[32,1614]],[[65143,65143],"mapped",[1600,1614]],[[65144,65144],"disallowed_STD3_mapped",[32,1615]],[[65145,65145],"mapped",[1600,1615]],[[65146,65146],"disallowed_STD3_mapped",[32,1616]],[[65147,65147],"mapped",[1600,1616]],[[65148,65148],"disallowed_STD3_mapped",[32,1617]],[[65149,65149],"mapped",[1600,1617]],[[65150,65150],"disallowed_STD3_mapped",[32,1618]],[[65151,65151],"mapped",[1600,1618]],[[65152,65152],"mapped",[1569]],[[65153,65154],"mapped",[1570]],[[65155,65156],"mapped",[1571]],[[65157,65158],"mapped",[1572]],[[65159,65160],"mapped",[1573]],[[65161,65164],"mapped",[1574]],[[65165,65166],"mapped",[1575]],[[65167,65170],"mapped",[1576]],[[65171,65172],"mapped",[1577]],[[65173,65176],"mapped",[1578]],[[65177,65180],"mapped",[1579]],[[65181,65184],"mapped",[1580]],[[65185,65188],"mapped",[1581]],[[65189,65192],"mapped",[1582]],[[65193,65194],"mapped",[1583]],[[65195,65196],"mapped",[1584]],[[65197,65198],"mapped",[1585]],[[65199,65200],"mapped",[1586]],[[65201,65204],"mapped",[1587]],[[65205,65208],"mapped",[1588]],[[65209,65212],"mapped",[1589]],[[65213,65216],"mapped",[1590]],[[65217,65220],"mapped",[1591]],[[65221,65224],"mapped",[1592]],[[65225,65228],"mapped",[1593]],[[65229,65232],"mapped",[1594]],[[65233,65236],"mapped",[1601]],[[65237,65240],"mapped",[1602]],[[65241,65244],"mapped",[1603]],[[65245,65248],"mapped",[1604]],[[65249,65252],"mapped",[1605]],[[65253,65256],"mapped",[1606]],[[65257,65260],"mapped",[1607]],[[65261,65262],"mapped",[1608]],[[65263,65264],"mapped",[1609]],[[65265,65268],"mapped",[1610]],[[65269,65270],"mapped",[1604,1570]],[[65271,65272],"mapped",[1604,1571]],[[65273,65274],"mapped",[1604,1573]],[[65275,65276],"mapped",[1604,1575]],[[65277,65278],"disallowed"],[[65279,65279],"ignored"],[[65280,65280],"disallowed"],[[65281,65281],"disallowed_STD3_mapped",[33]],[[65282,65282],"disallowed_STD3_mapped",[34]],[[65283,65283],"disallowed_STD3_mapped",[35]],[[65284,65284],"disallowed_STD3_mapped",[36]],[[65285,65285],"disallowed_STD3_mapped",[37]],[[65286,65286],"disallowed_STD3_mapped",[38]],[[65287,65287],"disallowed_STD3_mapped",[39]],[[65288,65288],"disallowed_STD3_mapped",[40]],[[65289,65289],"disallowed_STD3_mapped",[41]],[[65290,65290],"disallowed_STD3_mapped",[42]],[[65291,65291],"disallowed_STD3_mapped",[43]],[[65292,65292],"disallowed_STD3_mapped",[44]],[[65293,65293],"mapped",[45]],[[65294,65294],"mapped",[46]],[[65295,65295],"disallowed_STD3_mapped",[47]],[[65296,65296],"mapped",[48]],[[65297,65297],"mapped",[49]],[[65298,65298],"mapped",[50]],[[65299,65299],"mapped",[51]],[[65300,65300],"mapped",[52]],[[65301,65301],"mapped",[53]],[[65302,65302],"mapped",[54]],[[65303,65303],"mapped",[55]],[[65304,65304],"mapped",[56]],[[65305,65305],"mapped",[57]],[[65306,65306],"disallowed_STD3_mapped",[58]],[[65307,65307],"disallowed_STD3_mapped",[59]],[[65308,65308],"disallowed_STD3_mapped",[60]],[[65309,65309],"disallowed_STD3_mapped",[61]],[[65310,65310],"disallowed_STD3_mapped",[62]],[[65311,65311],"disallowed_STD3_mapped",[63]],[[65312,65312],"disallowed_STD3_mapped",[64]],[[65313,65313],"mapped",[97]],[[65314,65314],"mapped",[98]],[[65315,65315],"mapped",[99]],[[65316,65316],"mapped",[100]],[[65317,65317],"mapped",[101]],[[65318,65318],"mapped",[102]],[[65319,65319],"mapped",[103]],[[65320,65320],"mapped",[104]],[[65321,65321],"mapped",[105]],[[65322,65322],"mapped",[106]],[[65323,65323],"mapped",[107]],[[65324,65324],"mapped",[108]],[[65325,65325],"mapped",[109]],[[65326,65326],"mapped",[110]],[[65327,65327],"mapped",[111]],[[65328,65328],"mapped",[112]],[[65329,65329],"mapped",[113]],[[65330,65330],"mapped",[114]],[[65331,65331],"mapped",[115]],[[65332,65332],"mapped",[116]],[[65333,65333],"mapped",[117]],[[65334,65334],"mapped",[118]],[[65335,65335],"mapped",[119]],[[65336,65336],"mapped",[120]],[[65337,65337],"mapped",[121]],[[65338,65338],"mapped",[122]],[[65339,65339],"disallowed_STD3_mapped",[91]],[[65340,65340],"disallowed_STD3_mapped",[92]],[[65341,65341],"disallowed_STD3_mapped",[93]],[[65342,65342],"disallowed_STD3_mapped",[94]],[[65343,65343],"disallowed_STD3_mapped",[95]],[[65344,65344],"disallowed_STD3_mapped",[96]],[[65345,65345],"mapped",[97]],[[65346,65346],"mapped",[98]],[[65347,65347],"mapped",[99]],[[65348,65348],"mapped",[100]],[[65349,65349],"mapped",[101]],[[65350,65350],"mapped",[102]],[[65351,65351],"mapped",[103]],[[65352,65352],"mapped",[104]],[[65353,65353],"mapped",[105]],[[65354,65354],"mapped",[106]],[[65355,65355],"mapped",[107]],[[65356,65356],"mapped",[108]],[[65357,65357],"mapped",[109]],[[65358,65358],"mapped",[110]],[[65359,65359],"mapped",[111]],[[65360,65360],"mapped",[112]],[[65361,65361],"mapped",[113]],[[65362,65362],"mapped",[114]],[[65363,65363],"mapped",[115]],[[65364,65364],"mapped",[116]],[[65365,65365],"mapped",[117]],[[65366,65366],"mapped",[118]],[[65367,65367],"mapped",[119]],[[65368,65368],"mapped",[120]],[[65369,65369],"mapped",[121]],[[65370,65370],"mapped",[122]],[[65371,65371],"disallowed_STD3_mapped",[123]],[[65372,65372],"disallowed_STD3_mapped",[124]],[[65373,65373],"disallowed_STD3_mapped",[125]],[[65374,65374],"disallowed_STD3_mapped",[126]],[[65375,65375],"mapped",[10629]],[[65376,65376],"mapped",[10630]],[[65377,65377],"mapped",[46]],[[65378,65378],"mapped",[12300]],[[65379,65379],"mapped",[12301]],[[65380,65380],"mapped",[12289]],[[65381,65381],"mapped",[12539]],[[65382,65382],"mapped",[12530]],[[65383,65383],"mapped",[12449]],[[65384,65384],"mapped",[12451]],[[65385,65385],"mapped",[12453]],[[65386,65386],"mapped",[12455]],[[65387,65387],"mapped",[12457]],[[65388,65388],"mapped",[12515]],[[65389,65389],"mapped",[12517]],[[65390,65390],"mapped",[12519]],[[65391,65391],"mapped",[12483]],[[65392,65392],"mapped",[12540]],[[65393,65393],"mapped",[12450]],[[65394,65394],"mapped",[12452]],[[65395,65395],"mapped",[12454]],[[65396,65396],"mapped",[12456]],[[65397,65397],"mapped",[12458]],[[65398,65398],"mapped",[12459]],[[65399,65399],"mapped",[12461]],[[65400,65400],"mapped",[12463]],[[65401,65401],"mapped",[12465]],[[65402,65402],"mapped",[12467]],[[65403,65403],"mapped",[12469]],[[65404,65404],"mapped",[12471]],[[65405,65405],"mapped",[12473]],[[65406,65406],"mapped",[12475]],[[65407,65407],"mapped",[12477]],[[65408,65408],"mapped",[12479]],[[65409,65409],"mapped",[12481]],[[65410,65410],"mapped",[12484]],[[65411,65411],"mapped",[12486]],[[65412,65412],"mapped",[12488]],[[65413,65413],"mapped",[12490]],[[65414,65414],"mapped",[12491]],[[65415,65415],"mapped",[12492]],[[65416,65416],"mapped",[12493]],[[65417,65417],"mapped",[12494]],[[65418,65418],"mapped",[12495]],[[65419,65419],"mapped",[12498]],[[65420,65420],"mapped",[12501]],[[65421,65421],"mapped",[12504]],[[65422,65422],"mapped",[12507]],[[65423,65423],"mapped",[12510]],[[65424,65424],"mapped",[12511]],[[65425,65425],"mapped",[12512]],[[65426,65426],"mapped",[12513]],[[65427,65427],"mapped",[12514]],[[65428,65428],"mapped",[12516]],[[65429,65429],"mapped",[12518]],[[65430,65430],"mapped",[12520]],[[65431,65431],"mapped",[12521]],[[65432,65432],"mapped",[12522]],[[65433,65433],"mapped",[12523]],[[65434,65434],"mapped",[12524]],[[65435,65435],"mapped",[12525]],[[65436,65436],"mapped",[12527]],[[65437,65437],"mapped",[12531]],[[65438,65438],"mapped",[12441]],[[65439,65439],"mapped",[12442]],[[65440,65440],"disallowed"],[[65441,65441],"mapped",[4352]],[[65442,65442],"mapped",[4353]],[[65443,65443],"mapped",[4522]],[[65444,65444],"mapped",[4354]],[[65445,65445],"mapped",[4524]],[[65446,65446],"mapped",[4525]],[[65447,65447],"mapped",[4355]],[[65448,65448],"mapped",[4356]],[[65449,65449],"mapped",[4357]],[[65450,65450],"mapped",[4528]],[[65451,65451],"mapped",[4529]],[[65452,65452],"mapped",[4530]],[[65453,65453],"mapped",[4531]],[[65454,65454],"mapped",[4532]],[[65455,65455],"mapped",[4533]],[[65456,65456],"mapped",[4378]],[[65457,65457],"mapped",[4358]],[[65458,65458],"mapped",[4359]],[[65459,65459],"mapped",[4360]],[[65460,65460],"mapped",[4385]],[[65461,65461],"mapped",[4361]],[[65462,65462],"mapped",[4362]],[[65463,65463],"mapped",[4363]],[[65464,65464],"mapped",[4364]],[[65465,65465],"mapped",[4365]],[[65466,65466],"mapped",[4366]],[[65467,65467],"mapped",[4367]],[[65468,65468],"mapped",[4368]],[[65469,65469],"mapped",[4369]],[[65470,65470],"mapped",[4370]],[[65471,65473],"disallowed"],[[65474,65474],"mapped",[4449]],[[65475,65475],"mapped",[4450]],[[65476,65476],"mapped",[4451]],[[65477,65477],"mapped",[4452]],[[65478,65478],"mapped",[4453]],[[65479,65479],"mapped",[4454]],[[65480,65481],"disallowed"],[[65482,65482],"mapped",[4455]],[[65483,65483],"mapped",[4456]],[[65484,65484],"mapped",[4457]],[[65485,65485],"mapped",[4458]],[[65486,65486],"mapped",[4459]],[[65487,65487],"mapped",[4460]],[[65488,65489],"disallowed"],[[65490,65490],"mapped",[4461]],[[65491,65491],"mapped",[4462]],[[65492,65492],"mapped",[4463]],[[65493,65493],"mapped",[4464]],[[65494,65494],"mapped",[4465]],[[65495,65495],"mapped",[4466]],[[65496,65497],"disallowed"],[[65498,65498],"mapped",[4467]],[[65499,65499],"mapped",[4468]],[[65500,65500],"mapped",[4469]],[[65501,65503],"disallowed"],[[65504,65504],"mapped",[162]],[[65505,65505],"mapped",[163]],[[65506,65506],"mapped",[172]],[[65507,65507],"disallowed_STD3_mapped",[32,772]],[[65508,65508],"mapped",[166]],[[65509,65509],"mapped",[165]],[[65510,65510],"mapped",[8361]],[[65511,65511],"disallowed"],[[65512,65512],"mapped",[9474]],[[65513,65513],"mapped",[8592]],[[65514,65514],"mapped",[8593]],[[65515,65515],"mapped",[8594]],[[65516,65516],"mapped",[8595]],[[65517,65517],"mapped",[9632]],[[65518,65518],"mapped",[9675]],[[65519,65528],"disallowed"],[[65529,65531],"disallowed"],[[65532,65532],"disallowed"],[[65533,65533],"disallowed"],[[65534,65535],"disallowed"],[[65536,65547],"valid"],[[65548,65548],"disallowed"],[[65549,65574],"valid"],[[65575,65575],"disallowed"],[[65576,65594],"valid"],[[65595,65595],"disallowed"],[[65596,65597],"valid"],[[65598,65598],"disallowed"],[[65599,65613],"valid"],[[65614,65615],"disallowed"],[[65616,65629],"valid"],[[65630,65663],"disallowed"],[[65664,65786],"valid"],[[65787,65791],"disallowed"],[[65792,65794],"valid",[],"NV8"],[[65795,65798],"disallowed"],[[65799,65843],"valid",[],"NV8"],[[65844,65846],"disallowed"],[[65847,65855],"valid",[],"NV8"],[[65856,65930],"valid",[],"NV8"],[[65931,65932],"valid",[],"NV8"],[[65933,65935],"disallowed"],[[65936,65947],"valid",[],"NV8"],[[65948,65951],"disallowed"],[[65952,65952],"valid",[],"NV8"],[[65953,65999],"disallowed"],[[66e3,66044],"valid",[],"NV8"],[[66045,66045],"valid"],[[66046,66175],"disallowed"],[[66176,66204],"valid"],[[66205,66207],"disallowed"],[[66208,66256],"valid"],[[66257,66271],"disallowed"],[[66272,66272],"valid"],[[66273,66299],"valid",[],"NV8"],[[66300,66303],"disallowed"],[[66304,66334],"valid"],[[66335,66335],"valid"],[[66336,66339],"valid",[],"NV8"],[[66340,66351],"disallowed"],[[66352,66368],"valid"],[[66369,66369],"valid",[],"NV8"],[[66370,66377],"valid"],[[66378,66378],"valid",[],"NV8"],[[66379,66383],"disallowed"],[[66384,66426],"valid"],[[66427,66431],"disallowed"],[[66432,66461],"valid"],[[66462,66462],"disallowed"],[[66463,66463],"valid",[],"NV8"],[[66464,66499],"valid"],[[66500,66503],"disallowed"],[[66504,66511],"valid"],[[66512,66517],"valid",[],"NV8"],[[66518,66559],"disallowed"],[[66560,66560],"mapped",[66600]],[[66561,66561],"mapped",[66601]],[[66562,66562],"mapped",[66602]],[[66563,66563],"mapped",[66603]],[[66564,66564],"mapped",[66604]],[[66565,66565],"mapped",[66605]],[[66566,66566],"mapped",[66606]],[[66567,66567],"mapped",[66607]],[[66568,66568],"mapped",[66608]],[[66569,66569],"mapped",[66609]],[[66570,66570],"mapped",[66610]],[[66571,66571],"mapped",[66611]],[[66572,66572],"mapped",[66612]],[[66573,66573],"mapped",[66613]],[[66574,66574],"mapped",[66614]],[[66575,66575],"mapped",[66615]],[[66576,66576],"mapped",[66616]],[[66577,66577],"mapped",[66617]],[[66578,66578],"mapped",[66618]],[[66579,66579],"mapped",[66619]],[[66580,66580],"mapped",[66620]],[[66581,66581],"mapped",[66621]],[[66582,66582],"mapped",[66622]],[[66583,66583],"mapped",[66623]],[[66584,66584],"mapped",[66624]],[[66585,66585],"mapped",[66625]],[[66586,66586],"mapped",[66626]],[[66587,66587],"mapped",[66627]],[[66588,66588],"mapped",[66628]],[[66589,66589],"mapped",[66629]],[[66590,66590],"mapped",[66630]],[[66591,66591],"mapped",[66631]],[[66592,66592],"mapped",[66632]],[[66593,66593],"mapped",[66633]],[[66594,66594],"mapped",[66634]],[[66595,66595],"mapped",[66635]],[[66596,66596],"mapped",[66636]],[[66597,66597],"mapped",[66637]],[[66598,66598],"mapped",[66638]],[[66599,66599],"mapped",[66639]],[[66600,66637],"valid"],[[66638,66717],"valid"],[[66718,66719],"disallowed"],[[66720,66729],"valid"],[[66730,66815],"disallowed"],[[66816,66855],"valid"],[[66856,66863],"disallowed"],[[66864,66915],"valid"],[[66916,66926],"disallowed"],[[66927,66927],"valid",[],"NV8"],[[66928,67071],"disallowed"],[[67072,67382],"valid"],[[67383,67391],"disallowed"],[[67392,67413],"valid"],[[67414,67423],"disallowed"],[[67424,67431],"valid"],[[67432,67583],"disallowed"],[[67584,67589],"valid"],[[67590,67591],"disallowed"],[[67592,67592],"valid"],[[67593,67593],"disallowed"],[[67594,67637],"valid"],[[67638,67638],"disallowed"],[[67639,67640],"valid"],[[67641,67643],"disallowed"],[[67644,67644],"valid"],[[67645,67646],"disallowed"],[[67647,67647],"valid"],[[67648,67669],"valid"],[[67670,67670],"disallowed"],[[67671,67679],"valid",[],"NV8"],[[67680,67702],"valid"],[[67703,67711],"valid",[],"NV8"],[[67712,67742],"valid"],[[67743,67750],"disallowed"],[[67751,67759],"valid",[],"NV8"],[[67760,67807],"disallowed"],[[67808,67826],"valid"],[[67827,67827],"disallowed"],[[67828,67829],"valid"],[[67830,67834],"disallowed"],[[67835,67839],"valid",[],"NV8"],[[67840,67861],"valid"],[[67862,67865],"valid",[],"NV8"],[[67866,67867],"valid",[],"NV8"],[[67868,67870],"disallowed"],[[67871,67871],"valid",[],"NV8"],[[67872,67897],"valid"],[[67898,67902],"disallowed"],[[67903,67903],"valid",[],"NV8"],[[67904,67967],"disallowed"],[[67968,68023],"valid"],[[68024,68027],"disallowed"],[[68028,68029],"valid",[],"NV8"],[[68030,68031],"valid"],[[68032,68047],"valid",[],"NV8"],[[68048,68049],"disallowed"],[[68050,68095],"valid",[],"NV8"],[[68096,68099],"valid"],[[68100,68100],"disallowed"],[[68101,68102],"valid"],[[68103,68107],"disallowed"],[[68108,68115],"valid"],[[68116,68116],"disallowed"],[[68117,68119],"valid"],[[68120,68120],"disallowed"],[[68121,68147],"valid"],[[68148,68151],"disallowed"],[[68152,68154],"valid"],[[68155,68158],"disallowed"],[[68159,68159],"valid"],[[68160,68167],"valid",[],"NV8"],[[68168,68175],"disallowed"],[[68176,68184],"valid",[],"NV8"],[[68185,68191],"disallowed"],[[68192,68220],"valid"],[[68221,68223],"valid",[],"NV8"],[[68224,68252],"valid"],[[68253,68255],"valid",[],"NV8"],[[68256,68287],"disallowed"],[[68288,68295],"valid"],[[68296,68296],"valid",[],"NV8"],[[68297,68326],"valid"],[[68327,68330],"disallowed"],[[68331,68342],"valid",[],"NV8"],[[68343,68351],"disallowed"],[[68352,68405],"valid"],[[68406,68408],"disallowed"],[[68409,68415],"valid",[],"NV8"],[[68416,68437],"valid"],[[68438,68439],"disallowed"],[[68440,68447],"valid",[],"NV8"],[[68448,68466],"valid"],[[68467,68471],"disallowed"],[[68472,68479],"valid",[],"NV8"],[[68480,68497],"valid"],[[68498,68504],"disallowed"],[[68505,68508],"valid",[],"NV8"],[[68509,68520],"disallowed"],[[68521,68527],"valid",[],"NV8"],[[68528,68607],"disallowed"],[[68608,68680],"valid"],[[68681,68735],"disallowed"],[[68736,68736],"mapped",[68800]],[[68737,68737],"mapped",[68801]],[[68738,68738],"mapped",[68802]],[[68739,68739],"mapped",[68803]],[[68740,68740],"mapped",[68804]],[[68741,68741],"mapped",[68805]],[[68742,68742],"mapped",[68806]],[[68743,68743],"mapped",[68807]],[[68744,68744],"mapped",[68808]],[[68745,68745],"mapped",[68809]],[[68746,68746],"mapped",[68810]],[[68747,68747],"mapped",[68811]],[[68748,68748],"mapped",[68812]],[[68749,68749],"mapped",[68813]],[[68750,68750],"mapped",[68814]],[[68751,68751],"mapped",[68815]],[[68752,68752],"mapped",[68816]],[[68753,68753],"mapped",[68817]],[[68754,68754],"mapped",[68818]],[[68755,68755],"mapped",[68819]],[[68756,68756],"mapped",[68820]],[[68757,68757],"mapped",[68821]],[[68758,68758],"mapped",[68822]],[[68759,68759],"mapped",[68823]],[[68760,68760],"mapped",[68824]],[[68761,68761],"mapped",[68825]],[[68762,68762],"mapped",[68826]],[[68763,68763],"mapped",[68827]],[[68764,68764],"mapped",[68828]],[[68765,68765],"mapped",[68829]],[[68766,68766],"mapped",[68830]],[[68767,68767],"mapped",[68831]],[[68768,68768],"mapped",[68832]],[[68769,68769],"mapped",[68833]],[[68770,68770],"mapped",[68834]],[[68771,68771],"mapped",[68835]],[[68772,68772],"mapped",[68836]],[[68773,68773],"mapped",[68837]],[[68774,68774],"mapped",[68838]],[[68775,68775],"mapped",[68839]],[[68776,68776],"mapped",[68840]],[[68777,68777],"mapped",[68841]],[[68778,68778],"mapped",[68842]],[[68779,68779],"mapped",[68843]],[[68780,68780],"mapped",[68844]],[[68781,68781],"mapped",[68845]],[[68782,68782],"mapped",[68846]],[[68783,68783],"mapped",[68847]],[[68784,68784],"mapped",[68848]],[[68785,68785],"mapped",[68849]],[[68786,68786],"mapped",[68850]],[[68787,68799],"disallowed"],[[68800,68850],"valid"],[[68851,68857],"disallowed"],[[68858,68863],"valid",[],"NV8"],[[68864,69215],"disallowed"],[[69216,69246],"valid",[],"NV8"],[[69247,69631],"disallowed"],[[69632,69702],"valid"],[[69703,69709],"valid",[],"NV8"],[[69710,69713],"disallowed"],[[69714,69733],"valid",[],"NV8"],[[69734,69743],"valid"],[[69744,69758],"disallowed"],[[69759,69759],"valid"],[[69760,69818],"valid"],[[69819,69820],"valid",[],"NV8"],[[69821,69821],"disallowed"],[[69822,69825],"valid",[],"NV8"],[[69826,69839],"disallowed"],[[69840,69864],"valid"],[[69865,69871],"disallowed"],[[69872,69881],"valid"],[[69882,69887],"disallowed"],[[69888,69940],"valid"],[[69941,69941],"disallowed"],[[69942,69951],"valid"],[[69952,69955],"valid",[],"NV8"],[[69956,69967],"disallowed"],[[69968,70003],"valid"],[[70004,70005],"valid",[],"NV8"],[[70006,70006],"valid"],[[70007,70015],"disallowed"],[[70016,70084],"valid"],[[70085,70088],"valid",[],"NV8"],[[70089,70089],"valid",[],"NV8"],[[70090,70092],"valid"],[[70093,70093],"valid",[],"NV8"],[[70094,70095],"disallowed"],[[70096,70105],"valid"],[[70106,70106],"valid"],[[70107,70107],"valid",[],"NV8"],[[70108,70108],"valid"],[[70109,70111],"valid",[],"NV8"],[[70112,70112],"disallowed"],[[70113,70132],"valid",[],"NV8"],[[70133,70143],"disallowed"],[[70144,70161],"valid"],[[70162,70162],"disallowed"],[[70163,70199],"valid"],[[70200,70205],"valid",[],"NV8"],[[70206,70271],"disallowed"],[[70272,70278],"valid"],[[70279,70279],"disallowed"],[[70280,70280],"valid"],[[70281,70281],"disallowed"],[[70282,70285],"valid"],[[70286,70286],"disallowed"],[[70287,70301],"valid"],[[70302,70302],"disallowed"],[[70303,70312],"valid"],[[70313,70313],"valid",[],"NV8"],[[70314,70319],"disallowed"],[[70320,70378],"valid"],[[70379,70383],"disallowed"],[[70384,70393],"valid"],[[70394,70399],"disallowed"],[[70400,70400],"valid"],[[70401,70403],"valid"],[[70404,70404],"disallowed"],[[70405,70412],"valid"],[[70413,70414],"disallowed"],[[70415,70416],"valid"],[[70417,70418],"disallowed"],[[70419,70440],"valid"],[[70441,70441],"disallowed"],[[70442,70448],"valid"],[[70449,70449],"disallowed"],[[70450,70451],"valid"],[[70452,70452],"disallowed"],[[70453,70457],"valid"],[[70458,70459],"disallowed"],[[70460,70468],"valid"],[[70469,70470],"disallowed"],[[70471,70472],"valid"],[[70473,70474],"disallowed"],[[70475,70477],"valid"],[[70478,70479],"disallowed"],[[70480,70480],"valid"],[[70481,70486],"disallowed"],[[70487,70487],"valid"],[[70488,70492],"disallowed"],[[70493,70499],"valid"],[[70500,70501],"disallowed"],[[70502,70508],"valid"],[[70509,70511],"disallowed"],[[70512,70516],"valid"],[[70517,70783],"disallowed"],[[70784,70853],"valid"],[[70854,70854],"valid",[],"NV8"],[[70855,70855],"valid"],[[70856,70863],"disallowed"],[[70864,70873],"valid"],[[70874,71039],"disallowed"],[[71040,71093],"valid"],[[71094,71095],"disallowed"],[[71096,71104],"valid"],[[71105,71113],"valid",[],"NV8"],[[71114,71127],"valid",[],"NV8"],[[71128,71133],"valid"],[[71134,71167],"disallowed"],[[71168,71232],"valid"],[[71233,71235],"valid",[],"NV8"],[[71236,71236],"valid"],[[71237,71247],"disallowed"],[[71248,71257],"valid"],[[71258,71295],"disallowed"],[[71296,71351],"valid"],[[71352,71359],"disallowed"],[[71360,71369],"valid"],[[71370,71423],"disallowed"],[[71424,71449],"valid"],[[71450,71452],"disallowed"],[[71453,71467],"valid"],[[71468,71471],"disallowed"],[[71472,71481],"valid"],[[71482,71487],"valid",[],"NV8"],[[71488,71839],"disallowed"],[[71840,71840],"mapped",[71872]],[[71841,71841],"mapped",[71873]],[[71842,71842],"mapped",[71874]],[[71843,71843],"mapped",[71875]],[[71844,71844],"mapped",[71876]],[[71845,71845],"mapped",[71877]],[[71846,71846],"mapped",[71878]],[[71847,71847],"mapped",[71879]],[[71848,71848],"mapped",[71880]],[[71849,71849],"mapped",[71881]],[[71850,71850],"mapped",[71882]],[[71851,71851],"mapped",[71883]],[[71852,71852],"mapped",[71884]],[[71853,71853],"mapped",[71885]],[[71854,71854],"mapped",[71886]],[[71855,71855],"mapped",[71887]],[[71856,71856],"mapped",[71888]],[[71857,71857],"mapped",[71889]],[[71858,71858],"mapped",[71890]],[[71859,71859],"mapped",[71891]],[[71860,71860],"mapped",[71892]],[[71861,71861],"mapped",[71893]],[[71862,71862],"mapped",[71894]],[[71863,71863],"mapped",[71895]],[[71864,71864],"mapped",[71896]],[[71865,71865],"mapped",[71897]],[[71866,71866],"mapped",[71898]],[[71867,71867],"mapped",[71899]],[[71868,71868],"mapped",[71900]],[[71869,71869],"mapped",[71901]],[[71870,71870],"mapped",[71902]],[[71871,71871],"mapped",[71903]],[[71872,71913],"valid"],[[71914,71922],"valid",[],"NV8"],[[71923,71934],"disallowed"],[[71935,71935],"valid"],[[71936,72383],"disallowed"],[[72384,72440],"valid"],[[72441,73727],"disallowed"],[[73728,74606],"valid"],[[74607,74648],"valid"],[[74649,74649],"valid"],[[74650,74751],"disallowed"],[[74752,74850],"valid",[],"NV8"],[[74851,74862],"valid",[],"NV8"],[[74863,74863],"disallowed"],[[74864,74867],"valid",[],"NV8"],[[74868,74868],"valid",[],"NV8"],[[74869,74879],"disallowed"],[[74880,75075],"valid"],[[75076,77823],"disallowed"],[[77824,78894],"valid"],[[78895,82943],"disallowed"],[[82944,83526],"valid"],[[83527,92159],"disallowed"],[[92160,92728],"valid"],[[92729,92735],"disallowed"],[[92736,92766],"valid"],[[92767,92767],"disallowed"],[[92768,92777],"valid"],[[92778,92781],"disallowed"],[[92782,92783],"valid",[],"NV8"],[[92784,92879],"disallowed"],[[92880,92909],"valid"],[[92910,92911],"disallowed"],[[92912,92916],"valid"],[[92917,92917],"valid",[],"NV8"],[[92918,92927],"disallowed"],[[92928,92982],"valid"],[[92983,92991],"valid",[],"NV8"],[[92992,92995],"valid"],[[92996,92997],"valid",[],"NV8"],[[92998,93007],"disallowed"],[[93008,93017],"valid"],[[93018,93018],"disallowed"],[[93019,93025],"valid",[],"NV8"],[[93026,93026],"disallowed"],[[93027,93047],"valid"],[[93048,93052],"disallowed"],[[93053,93071],"valid"],[[93072,93951],"disallowed"],[[93952,94020],"valid"],[[94021,94031],"disallowed"],[[94032,94078],"valid"],[[94079,94094],"disallowed"],[[94095,94111],"valid"],[[94112,110591],"disallowed"],[[110592,110593],"valid"],[[110594,113663],"disallowed"],[[113664,113770],"valid"],[[113771,113775],"disallowed"],[[113776,113788],"valid"],[[113789,113791],"disallowed"],[[113792,113800],"valid"],[[113801,113807],"disallowed"],[[113808,113817],"valid"],[[113818,113819],"disallowed"],[[113820,113820],"valid",[],"NV8"],[[113821,113822],"valid"],[[113823,113823],"valid",[],"NV8"],[[113824,113827],"ignored"],[[113828,118783],"disallowed"],[[118784,119029],"valid",[],"NV8"],[[119030,119039],"disallowed"],[[119040,119078],"valid",[],"NV8"],[[119079,119080],"disallowed"],[[119081,119081],"valid",[],"NV8"],[[119082,119133],"valid",[],"NV8"],[[119134,119134],"mapped",[119127,119141]],[[119135,119135],"mapped",[119128,119141]],[[119136,119136],"mapped",[119128,119141,119150]],[[119137,119137],"mapped",[119128,119141,119151]],[[119138,119138],"mapped",[119128,119141,119152]],[[119139,119139],"mapped",[119128,119141,119153]],[[119140,119140],"mapped",[119128,119141,119154]],[[119141,119154],"valid",[],"NV8"],[[119155,119162],"disallowed"],[[119163,119226],"valid",[],"NV8"],[[119227,119227],"mapped",[119225,119141]],[[119228,119228],"mapped",[119226,119141]],[[119229,119229],"mapped",[119225,119141,119150]],[[119230,119230],"mapped",[119226,119141,119150]],[[119231,119231],"mapped",[119225,119141,119151]],[[119232,119232],"mapped",[119226,119141,119151]],[[119233,119261],"valid",[],"NV8"],[[119262,119272],"valid",[],"NV8"],[[119273,119295],"disallowed"],[[119296,119365],"valid",[],"NV8"],[[119366,119551],"disallowed"],[[119552,119638],"valid",[],"NV8"],[[119639,119647],"disallowed"],[[119648,119665],"valid",[],"NV8"],[[119666,119807],"disallowed"],[[119808,119808],"mapped",[97]],[[119809,119809],"mapped",[98]],[[119810,119810],"mapped",[99]],[[119811,119811],"mapped",[100]],[[119812,119812],"mapped",[101]],[[119813,119813],"mapped",[102]],[[119814,119814],"mapped",[103]],[[119815,119815],"mapped",[104]],[[119816,119816],"mapped",[105]],[[119817,119817],"mapped",[106]],[[119818,119818],"mapped",[107]],[[119819,119819],"mapped",[108]],[[119820,119820],"mapped",[109]],[[119821,119821],"mapped",[110]],[[119822,119822],"mapped",[111]],[[119823,119823],"mapped",[112]],[[119824,119824],"mapped",[113]],[[119825,119825],"mapped",[114]],[[119826,119826],"mapped",[115]],[[119827,119827],"mapped",[116]],[[119828,119828],"mapped",[117]],[[119829,119829],"mapped",[118]],[[119830,119830],"mapped",[119]],[[119831,119831],"mapped",[120]],[[119832,119832],"mapped",[121]],[[119833,119833],"mapped",[122]],[[119834,119834],"mapped",[97]],[[119835,119835],"mapped",[98]],[[119836,119836],"mapped",[99]],[[119837,119837],"mapped",[100]],[[119838,119838],"mapped",[101]],[[119839,119839],"mapped",[102]],[[119840,119840],"mapped",[103]],[[119841,119841],"mapped",[104]],[[119842,119842],"mapped",[105]],[[119843,119843],"mapped",[106]],[[119844,119844],"mapped",[107]],[[119845,119845],"mapped",[108]],[[119846,119846],"mapped",[109]],[[119847,119847],"mapped",[110]],[[119848,119848],"mapped",[111]],[[119849,119849],"mapped",[112]],[[119850,119850],"mapped",[113]],[[119851,119851],"mapped",[114]],[[119852,119852],"mapped",[115]],[[119853,119853],"mapped",[116]],[[119854,119854],"mapped",[117]],[[119855,119855],"mapped",[118]],[[119856,119856],"mapped",[119]],[[119857,119857],"mapped",[120]],[[119858,119858],"mapped",[121]],[[119859,119859],"mapped",[122]],[[119860,119860],"mapped",[97]],[[119861,119861],"mapped",[98]],[[119862,119862],"mapped",[99]],[[119863,119863],"mapped",[100]],[[119864,119864],"mapped",[101]],[[119865,119865],"mapped",[102]],[[119866,119866],"mapped",[103]],[[119867,119867],"mapped",[104]],[[119868,119868],"mapped",[105]],[[119869,119869],"mapped",[106]],[[119870,119870],"mapped",[107]],[[119871,119871],"mapped",[108]],[[119872,119872],"mapped",[109]],[[119873,119873],"mapped",[110]],[[119874,119874],"mapped",[111]],[[119875,119875],"mapped",[112]],[[119876,119876],"mapped",[113]],[[119877,119877],"mapped",[114]],[[119878,119878],"mapped",[115]],[[119879,119879],"mapped",[116]],[[119880,119880],"mapped",[117]],[[119881,119881],"mapped",[118]],[[119882,119882],"mapped",[119]],[[119883,119883],"mapped",[120]],[[119884,119884],"mapped",[121]],[[119885,119885],"mapped",[122]],[[119886,119886],"mapped",[97]],[[119887,119887],"mapped",[98]],[[119888,119888],"mapped",[99]],[[119889,119889],"mapped",[100]],[[119890,119890],"mapped",[101]],[[119891,119891],"mapped",[102]],[[119892,119892],"mapped",[103]],[[119893,119893],"disallowed"],[[119894,119894],"mapped",[105]],[[119895,119895],"mapped",[106]],[[119896,119896],"mapped",[107]],[[119897,119897],"mapped",[108]],[[119898,119898],"mapped",[109]],[[119899,119899],"mapped",[110]],[[119900,119900],"mapped",[111]],[[119901,119901],"mapped",[112]],[[119902,119902],"mapped",[113]],[[119903,119903],"mapped",[114]],[[119904,119904],"mapped",[115]],[[119905,119905],"mapped",[116]],[[119906,119906],"mapped",[117]],[[119907,119907],"mapped",[118]],[[119908,119908],"mapped",[119]],[[119909,119909],"mapped",[120]],[[119910,119910],"mapped",[121]],[[119911,119911],"mapped",[122]],[[119912,119912],"mapped",[97]],[[119913,119913],"mapped",[98]],[[119914,119914],"mapped",[99]],[[119915,119915],"mapped",[100]],[[119916,119916],"mapped",[101]],[[119917,119917],"mapped",[102]],[[119918,119918],"mapped",[103]],[[119919,119919],"mapped",[104]],[[119920,119920],"mapped",[105]],[[119921,119921],"mapped",[106]],[[119922,119922],"mapped",[107]],[[119923,119923],"mapped",[108]],[[119924,119924],"mapped",[109]],[[119925,119925],"mapped",[110]],[[119926,119926],"mapped",[111]],[[119927,119927],"mapped",[112]],[[119928,119928],"mapped",[113]],[[119929,119929],"mapped",[114]],[[119930,119930],"mapped",[115]],[[119931,119931],"mapped",[116]],[[119932,119932],"mapped",[117]],[[119933,119933],"mapped",[118]],[[119934,119934],"mapped",[119]],[[119935,119935],"mapped",[120]],[[119936,119936],"mapped",[121]],[[119937,119937],"mapped",[122]],[[119938,119938],"mapped",[97]],[[119939,119939],"mapped",[98]],[[119940,119940],"mapped",[99]],[[119941,119941],"mapped",[100]],[[119942,119942],"mapped",[101]],[[119943,119943],"mapped",[102]],[[119944,119944],"mapped",[103]],[[119945,119945],"mapped",[104]],[[119946,119946],"mapped",[105]],[[119947,119947],"mapped",[106]],[[119948,119948],"mapped",[107]],[[119949,119949],"mapped",[108]],[[119950,119950],"mapped",[109]],[[119951,119951],"mapped",[110]],[[119952,119952],"mapped",[111]],[[119953,119953],"mapped",[112]],[[119954,119954],"mapped",[113]],[[119955,119955],"mapped",[114]],[[119956,119956],"mapped",[115]],[[119957,119957],"mapped",[116]],[[119958,119958],"mapped",[117]],[[119959,119959],"mapped",[118]],[[119960,119960],"mapped",[119]],[[119961,119961],"mapped",[120]],[[119962,119962],"mapped",[121]],[[119963,119963],"mapped",[122]],[[119964,119964],"mapped",[97]],[[119965,119965],"disallowed"],[[119966,119966],"mapped",[99]],[[119967,119967],"mapped",[100]],[[119968,119969],"disallowed"],[[119970,119970],"mapped",[103]],[[119971,119972],"disallowed"],[[119973,119973],"mapped",[106]],[[119974,119974],"mapped",[107]],[[119975,119976],"disallowed"],[[119977,119977],"mapped",[110]],[[119978,119978],"mapped",[111]],[[119979,119979],"mapped",[112]],[[119980,119980],"mapped",[113]],[[119981,119981],"disallowed"],[[119982,119982],"mapped",[115]],[[119983,119983],"mapped",[116]],[[119984,119984],"mapped",[117]],[[119985,119985],"mapped",[118]],[[119986,119986],"mapped",[119]],[[119987,119987],"mapped",[120]],[[119988,119988],"mapped",[121]],[[119989,119989],"mapped",[122]],[[119990,119990],"mapped",[97]],[[119991,119991],"mapped",[98]],[[119992,119992],"mapped",[99]],[[119993,119993],"mapped",[100]],[[119994,119994],"disallowed"],[[119995,119995],"mapped",[102]],[[119996,119996],"disallowed"],[[119997,119997],"mapped",[104]],[[119998,119998],"mapped",[105]],[[119999,119999],"mapped",[106]],[[12e4,12e4],"mapped",[107]],[[120001,120001],"mapped",[108]],[[120002,120002],"mapped",[109]],[[120003,120003],"mapped",[110]],[[120004,120004],"disallowed"],[[120005,120005],"mapped",[112]],[[120006,120006],"mapped",[113]],[[120007,120007],"mapped",[114]],[[120008,120008],"mapped",[115]],[[120009,120009],"mapped",[116]],[[120010,120010],"mapped",[117]],[[120011,120011],"mapped",[118]],[[120012,120012],"mapped",[119]],[[120013,120013],"mapped",[120]],[[120014,120014],"mapped",[121]],[[120015,120015],"mapped",[122]],[[120016,120016],"mapped",[97]],[[120017,120017],"mapped",[98]],[[120018,120018],"mapped",[99]],[[120019,120019],"mapped",[100]],[[120020,120020],"mapped",[101]],[[120021,120021],"mapped",[102]],[[120022,120022],"mapped",[103]],[[120023,120023],"mapped",[104]],[[120024,120024],"mapped",[105]],[[120025,120025],"mapped",[106]],[[120026,120026],"mapped",[107]],[[120027,120027],"mapped",[108]],[[120028,120028],"mapped",[109]],[[120029,120029],"mapped",[110]],[[120030,120030],"mapped",[111]],[[120031,120031],"mapped",[112]],[[120032,120032],"mapped",[113]],[[120033,120033],"mapped",[114]],[[120034,120034],"mapped",[115]],[[120035,120035],"mapped",[116]],[[120036,120036],"mapped",[117]],[[120037,120037],"mapped",[118]],[[120038,120038],"mapped",[119]],[[120039,120039],"mapped",[120]],[[120040,120040],"mapped",[121]],[[120041,120041],"mapped",[122]],[[120042,120042],"mapped",[97]],[[120043,120043],"mapped",[98]],[[120044,120044],"mapped",[99]],[[120045,120045],"mapped",[100]],[[120046,120046],"mapped",[101]],[[120047,120047],"mapped",[102]],[[120048,120048],"mapped",[103]],[[120049,120049],"mapped",[104]],[[120050,120050],"mapped",[105]],[[120051,120051],"mapped",[106]],[[120052,120052],"mapped",[107]],[[120053,120053],"mapped",[108]],[[120054,120054],"mapped",[109]],[[120055,120055],"mapped",[110]],[[120056,120056],"mapped",[111]],[[120057,120057],"mapped",[112]],[[120058,120058],"mapped",[113]],[[120059,120059],"mapped",[114]],[[120060,120060],"mapped",[115]],[[120061,120061],"mapped",[116]],[[120062,120062],"mapped",[117]],[[120063,120063],"mapped",[118]],[[120064,120064],"mapped",[119]],[[120065,120065],"mapped",[120]],[[120066,120066],"mapped",[121]],[[120067,120067],"mapped",[122]],[[120068,120068],"mapped",[97]],[[120069,120069],"mapped",[98]],[[120070,120070],"disallowed"],[[120071,120071],"mapped",[100]],[[120072,120072],"mapped",[101]],[[120073,120073],"mapped",[102]],[[120074,120074],"mapped",[103]],[[120075,120076],"disallowed"],[[120077,120077],"mapped",[106]],[[120078,120078],"mapped",[107]],[[120079,120079],"mapped",[108]],[[120080,120080],"mapped",[109]],[[120081,120081],"mapped",[110]],[[120082,120082],"mapped",[111]],[[120083,120083],"mapped",[112]],[[120084,120084],"mapped",[113]],[[120085,120085],"disallowed"],[[120086,120086],"mapped",[115]],[[120087,120087],"mapped",[116]],[[120088,120088],"mapped",[117]],[[120089,120089],"mapped",[118]],[[120090,120090],"mapped",[119]],[[120091,120091],"mapped",[120]],[[120092,120092],"mapped",[121]],[[120093,120093],"disallowed"],[[120094,120094],"mapped",[97]],[[120095,120095],"mapped",[98]],[[120096,120096],"mapped",[99]],[[120097,120097],"mapped",[100]],[[120098,120098],"mapped",[101]],[[120099,120099],"mapped",[102]],[[120100,120100],"mapped",[103]],[[120101,120101],"mapped",[104]],[[120102,120102],"mapped",[105]],[[120103,120103],"mapped",[106]],[[120104,120104],"mapped",[107]],[[120105,120105],"mapped",[108]],[[120106,120106],"mapped",[109]],[[120107,120107],"mapped",[110]],[[120108,120108],"mapped",[111]],[[120109,120109],"mapped",[112]],[[120110,120110],"mapped",[113]],[[120111,120111],"mapped",[114]],[[120112,120112],"mapped",[115]],[[120113,120113],"mapped",[116]],[[120114,120114],"mapped",[117]],[[120115,120115],"mapped",[118]],[[120116,120116],"mapped",[119]],[[120117,120117],"mapped",[120]],[[120118,120118],"mapped",[121]],[[120119,120119],"mapped",[122]],[[120120,120120],"mapped",[97]],[[120121,120121],"mapped",[98]],[[120122,120122],"disallowed"],[[120123,120123],"mapped",[100]],[[120124,120124],"mapped",[101]],[[120125,120125],"mapped",[102]],[[120126,120126],"mapped",[103]],[[120127,120127],"disallowed"],[[120128,120128],"mapped",[105]],[[120129,120129],"mapped",[106]],[[120130,120130],"mapped",[107]],[[120131,120131],"mapped",[108]],[[120132,120132],"mapped",[109]],[[120133,120133],"disallowed"],[[120134,120134],"mapped",[111]],[[120135,120137],"disallowed"],[[120138,120138],"mapped",[115]],[[120139,120139],"mapped",[116]],[[120140,120140],"mapped",[117]],[[120141,120141],"mapped",[118]],[[120142,120142],"mapped",[119]],[[120143,120143],"mapped",[120]],[[120144,120144],"mapped",[121]],[[120145,120145],"disallowed"],[[120146,120146],"mapped",[97]],[[120147,120147],"mapped",[98]],[[120148,120148],"mapped",[99]],[[120149,120149],"mapped",[100]],[[120150,120150],"mapped",[101]],[[120151,120151],"mapped",[102]],[[120152,120152],"mapped",[103]],[[120153,120153],"mapped",[104]],[[120154,120154],"mapped",[105]],[[120155,120155],"mapped",[106]],[[120156,120156],"mapped",[107]],[[120157,120157],"mapped",[108]],[[120158,120158],"mapped",[109]],[[120159,120159],"mapped",[110]],[[120160,120160],"mapped",[111]],[[120161,120161],"mapped",[112]],[[120162,120162],"mapped",[113]],[[120163,120163],"mapped",[114]],[[120164,120164],"mapped",[115]],[[120165,120165],"mapped",[116]],[[120166,120166],"mapped",[117]],[[120167,120167],"mapped",[118]],[[120168,120168],"mapped",[119]],[[120169,120169],"mapped",[120]],[[120170,120170],"mapped",[121]],[[120171,120171],"mapped",[122]],[[120172,120172],"mapped",[97]],[[120173,120173],"mapped",[98]],[[120174,120174],"mapped",[99]],[[120175,120175],"mapped",[100]],[[120176,120176],"mapped",[101]],[[120177,120177],"mapped",[102]],[[120178,120178],"mapped",[103]],[[120179,120179],"mapped",[104]],[[120180,120180],"mapped",[105]],[[120181,120181],"mapped",[106]],[[120182,120182],"mapped",[107]],[[120183,120183],"mapped",[108]],[[120184,120184],"mapped",[109]],[[120185,120185],"mapped",[110]],[[120186,120186],"mapped",[111]],[[120187,120187],"mapped",[112]],[[120188,120188],"mapped",[113]],[[120189,120189],"mapped",[114]],[[120190,120190],"mapped",[115]],[[120191,120191],"mapped",[116]],[[120192,120192],"mapped",[117]],[[120193,120193],"mapped",[118]],[[120194,120194],"mapped",[119]],[[120195,120195],"mapped",[120]],[[120196,120196],"mapped",[121]],[[120197,120197],"mapped",[122]],[[120198,120198],"mapped",[97]],[[120199,120199],"mapped",[98]],[[120200,120200],"mapped",[99]],[[120201,120201],"mapped",[100]],[[120202,120202],"mapped",[101]],[[120203,120203],"mapped",[102]],[[120204,120204],"mapped",[103]],[[120205,120205],"mapped",[104]],[[120206,120206],"mapped",[105]],[[120207,120207],"mapped",[106]],[[120208,120208],"mapped",[107]],[[120209,120209],"mapped",[108]],[[120210,120210],"mapped",[109]],[[120211,120211],"mapped",[110]],[[120212,120212],"mapped",[111]],[[120213,120213],"mapped",[112]],[[120214,120214],"mapped",[113]],[[120215,120215],"mapped",[114]],[[120216,120216],"mapped",[115]],[[120217,120217],"mapped",[116]],[[120218,120218],"mapped",[117]],[[120219,120219],"mapped",[118]],[[120220,120220],"mapped",[119]],[[120221,120221],"mapped",[120]],[[120222,120222],"mapped",[121]],[[120223,120223],"mapped",[122]],[[120224,120224],"mapped",[97]],[[120225,120225],"mapped",[98]],[[120226,120226],"mapped",[99]],[[120227,120227],"mapped",[100]],[[120228,120228],"mapped",[101]],[[120229,120229],"mapped",[102]],[[120230,120230],"mapped",[103]],[[120231,120231],"mapped",[104]],[[120232,120232],"mapped",[105]],[[120233,120233],"mapped",[106]],[[120234,120234],"mapped",[107]],[[120235,120235],"mapped",[108]],[[120236,120236],"mapped",[109]],[[120237,120237],"mapped",[110]],[[120238,120238],"mapped",[111]],[[120239,120239],"mapped",[112]],[[120240,120240],"mapped",[113]],[[120241,120241],"mapped",[114]],[[120242,120242],"mapped",[115]],[[120243,120243],"mapped",[116]],[[120244,120244],"mapped",[117]],[[120245,120245],"mapped",[118]],[[120246,120246],"mapped",[119]],[[120247,120247],"mapped",[120]],[[120248,120248],"mapped",[121]],[[120249,120249],"mapped",[122]],[[120250,120250],"mapped",[97]],[[120251,120251],"mapped",[98]],[[120252,120252],"mapped",[99]],[[120253,120253],"mapped",[100]],[[120254,120254],"mapped",[101]],[[120255,120255],"mapped",[102]],[[120256,120256],"mapped",[103]],[[120257,120257],"mapped",[104]],[[120258,120258],"mapped",[105]],[[120259,120259],"mapped",[106]],[[120260,120260],"mapped",[107]],[[120261,120261],"mapped",[108]],[[120262,120262],"mapped",[109]],[[120263,120263],"mapped",[110]],[[120264,120264],"mapped",[111]],[[120265,120265],"mapped",[112]],[[120266,120266],"mapped",[113]],[[120267,120267],"mapped",[114]],[[120268,120268],"mapped",[115]],[[120269,120269],"mapped",[116]],[[120270,120270],"mapped",[117]],[[120271,120271],"mapped",[118]],[[120272,120272],"mapped",[119]],[[120273,120273],"mapped",[120]],[[120274,120274],"mapped",[121]],[[120275,120275],"mapped",[122]],[[120276,120276],"mapped",[97]],[[120277,120277],"mapped",[98]],[[120278,120278],"mapped",[99]],[[120279,120279],"mapped",[100]],[[120280,120280],"mapped",[101]],[[120281,120281],"mapped",[102]],[[120282,120282],"mapped",[103]],[[120283,120283],"mapped",[104]],[[120284,120284],"mapped",[105]],[[120285,120285],"mapped",[106]],[[120286,120286],"mapped",[107]],[[120287,120287],"mapped",[108]],[[120288,120288],"mapped",[109]],[[120289,120289],"mapped",[110]],[[120290,120290],"mapped",[111]],[[120291,120291],"mapped",[112]],[[120292,120292],"mapped",[113]],[[120293,120293],"mapped",[114]],[[120294,120294],"mapped",[115]],[[120295,120295],"mapped",[116]],[[120296,120296],"mapped",[117]],[[120297,120297],"mapped",[118]],[[120298,120298],"mapped",[119]],[[120299,120299],"mapped",[120]],[[120300,120300],"mapped",[121]],[[120301,120301],"mapped",[122]],[[120302,120302],"mapped",[97]],[[120303,120303],"mapped",[98]],[[120304,120304],"mapped",[99]],[[120305,120305],"mapped",[100]],[[120306,120306],"mapped",[101]],[[120307,120307],"mapped",[102]],[[120308,120308],"mapped",[103]],[[120309,120309],"mapped",[104]],[[120310,120310],"mapped",[105]],[[120311,120311],"mapped",[106]],[[120312,120312],"mapped",[107]],[[120313,120313],"mapped",[108]],[[120314,120314],"mapped",[109]],[[120315,120315],"mapped",[110]],[[120316,120316],"mapped",[111]],[[120317,120317],"mapped",[112]],[[120318,120318],"mapped",[113]],[[120319,120319],"mapped",[114]],[[120320,120320],"mapped",[115]],[[120321,120321],"mapped",[116]],[[120322,120322],"mapped",[117]],[[120323,120323],"mapped",[118]],[[120324,120324],"mapped",[119]],[[120325,120325],"mapped",[120]],[[120326,120326],"mapped",[121]],[[120327,120327],"mapped",[122]],[[120328,120328],"mapped",[97]],[[120329,120329],"mapped",[98]],[[120330,120330],"mapped",[99]],[[120331,120331],"mapped",[100]],[[120332,120332],"mapped",[101]],[[120333,120333],"mapped",[102]],[[120334,120334],"mapped",[103]],[[120335,120335],"mapped",[104]],[[120336,120336],"mapped",[105]],[[120337,120337],"mapped",[106]],[[120338,120338],"mapped",[107]],[[120339,120339],"mapped",[108]],[[120340,120340],"mapped",[109]],[[120341,120341],"mapped",[110]],[[120342,120342],"mapped",[111]],[[120343,120343],"mapped",[112]],[[120344,120344],"mapped",[113]],[[120345,120345],"mapped",[114]],[[120346,120346],"mapped",[115]],[[120347,120347],"mapped",[116]],[[120348,120348],"mapped",[117]],[[120349,120349],"mapped",[118]],[[120350,120350],"mapped",[119]],[[120351,120351],"mapped",[120]],[[120352,120352],"mapped",[121]],[[120353,120353],"mapped",[122]],[[120354,120354],"mapped",[97]],[[120355,120355],"mapped",[98]],[[120356,120356],"mapped",[99]],[[120357,120357],"mapped",[100]],[[120358,120358],"mapped",[101]],[[120359,120359],"mapped",[102]],[[120360,120360],"mapped",[103]],[[120361,120361],"mapped",[104]],[[120362,120362],"mapped",[105]],[[120363,120363],"mapped",[106]],[[120364,120364],"mapped",[107]],[[120365,120365],"mapped",[108]],[[120366,120366],"mapped",[109]],[[120367,120367],"mapped",[110]],[[120368,120368],"mapped",[111]],[[120369,120369],"mapped",[112]],[[120370,120370],"mapped",[113]],[[120371,120371],"mapped",[114]],[[120372,120372],"mapped",[115]],[[120373,120373],"mapped",[116]],[[120374,120374],"mapped",[117]],[[120375,120375],"mapped",[118]],[[120376,120376],"mapped",[119]],[[120377,120377],"mapped",[120]],[[120378,120378],"mapped",[121]],[[120379,120379],"mapped",[122]],[[120380,120380],"mapped",[97]],[[120381,120381],"mapped",[98]],[[120382,120382],"mapped",[99]],[[120383,120383],"mapped",[100]],[[120384,120384],"mapped",[101]],[[120385,120385],"mapped",[102]],[[120386,120386],"mapped",[103]],[[120387,120387],"mapped",[104]],[[120388,120388],"mapped",[105]],[[120389,120389],"mapped",[106]],[[120390,120390],"mapped",[107]],[[120391,120391],"mapped",[108]],[[120392,120392],"mapped",[109]],[[120393,120393],"mapped",[110]],[[120394,120394],"mapped",[111]],[[120395,120395],"mapped",[112]],[[120396,120396],"mapped",[113]],[[120397,120397],"mapped",[114]],[[120398,120398],"mapped",[115]],[[120399,120399],"mapped",[116]],[[120400,120400],"mapped",[117]],[[120401,120401],"mapped",[118]],[[120402,120402],"mapped",[119]],[[120403,120403],"mapped",[120]],[[120404,120404],"mapped",[121]],[[120405,120405],"mapped",[122]],[[120406,120406],"mapped",[97]],[[120407,120407],"mapped",[98]],[[120408,120408],"mapped",[99]],[[120409,120409],"mapped",[100]],[[120410,120410],"mapped",[101]],[[120411,120411],"mapped",[102]],[[120412,120412],"mapped",[103]],[[120413,120413],"mapped",[104]],[[120414,120414],"mapped",[105]],[[120415,120415],"mapped",[106]],[[120416,120416],"mapped",[107]],[[120417,120417],"mapped",[108]],[[120418,120418],"mapped",[109]],[[120419,120419],"mapped",[110]],[[120420,120420],"mapped",[111]],[[120421,120421],"mapped",[112]],[[120422,120422],"mapped",[113]],[[120423,120423],"mapped",[114]],[[120424,120424],"mapped",[115]],[[120425,120425],"mapped",[116]],[[120426,120426],"mapped",[117]],[[120427,120427],"mapped",[118]],[[120428,120428],"mapped",[119]],[[120429,120429],"mapped",[120]],[[120430,120430],"mapped",[121]],[[120431,120431],"mapped",[122]],[[120432,120432],"mapped",[97]],[[120433,120433],"mapped",[98]],[[120434,120434],"mapped",[99]],[[120435,120435],"mapped",[100]],[[120436,120436],"mapped",[101]],[[120437,120437],"mapped",[102]],[[120438,120438],"mapped",[103]],[[120439,120439],"mapped",[104]],[[120440,120440],"mapped",[105]],[[120441,120441],"mapped",[106]],[[120442,120442],"mapped",[107]],[[120443,120443],"mapped",[108]],[[120444,120444],"mapped",[109]],[[120445,120445],"mapped",[110]],[[120446,120446],"mapped",[111]],[[120447,120447],"mapped",[112]],[[120448,120448],"mapped",[113]],[[120449,120449],"mapped",[114]],[[120450,120450],"mapped",[115]],[[120451,120451],"mapped",[116]],[[120452,120452],"mapped",[117]],[[120453,120453],"mapped",[118]],[[120454,120454],"mapped",[119]],[[120455,120455],"mapped",[120]],[[120456,120456],"mapped",[121]],[[120457,120457],"mapped",[122]],[[120458,120458],"mapped",[97]],[[120459,120459],"mapped",[98]],[[120460,120460],"mapped",[99]],[[120461,120461],"mapped",[100]],[[120462,120462],"mapped",[101]],[[120463,120463],"mapped",[102]],[[120464,120464],"mapped",[103]],[[120465,120465],"mapped",[104]],[[120466,120466],"mapped",[105]],[[120467,120467],"mapped",[106]],[[120468,120468],"mapped",[107]],[[120469,120469],"mapped",[108]],[[120470,120470],"mapped",[109]],[[120471,120471],"mapped",[110]],[[120472,120472],"mapped",[111]],[[120473,120473],"mapped",[112]],[[120474,120474],"mapped",[113]],[[120475,120475],"mapped",[114]],[[120476,120476],"mapped",[115]],[[120477,120477],"mapped",[116]],[[120478,120478],"mapped",[117]],[[120479,120479],"mapped",[118]],[[120480,120480],"mapped",[119]],[[120481,120481],"mapped",[120]],[[120482,120482],"mapped",[121]],[[120483,120483],"mapped",[122]],[[120484,120484],"mapped",[305]],[[120485,120485],"mapped",[567]],[[120486,120487],"disallowed"],[[120488,120488],"mapped",[945]],[[120489,120489],"mapped",[946]],[[120490,120490],"mapped",[947]],[[120491,120491],"mapped",[948]],[[120492,120492],"mapped",[949]],[[120493,120493],"mapped",[950]],[[120494,120494],"mapped",[951]],[[120495,120495],"mapped",[952]],[[120496,120496],"mapped",[953]],[[120497,120497],"mapped",[954]],[[120498,120498],"mapped",[955]],[[120499,120499],"mapped",[956]],[[120500,120500],"mapped",[957]],[[120501,120501],"mapped",[958]],[[120502,120502],"mapped",[959]],[[120503,120503],"mapped",[960]],[[120504,120504],"mapped",[961]],[[120505,120505],"mapped",[952]],[[120506,120506],"mapped",[963]],[[120507,120507],"mapped",[964]],[[120508,120508],"mapped",[965]],[[120509,120509],"mapped",[966]],[[120510,120510],"mapped",[967]],[[120511,120511],"mapped",[968]],[[120512,120512],"mapped",[969]],[[120513,120513],"mapped",[8711]],[[120514,120514],"mapped",[945]],[[120515,120515],"mapped",[946]],[[120516,120516],"mapped",[947]],[[120517,120517],"mapped",[948]],[[120518,120518],"mapped",[949]],[[120519,120519],"mapped",[950]],[[120520,120520],"mapped",[951]],[[120521,120521],"mapped",[952]],[[120522,120522],"mapped",[953]],[[120523,120523],"mapped",[954]],[[120524,120524],"mapped",[955]],[[120525,120525],"mapped",[956]],[[120526,120526],"mapped",[957]],[[120527,120527],"mapped",[958]],[[120528,120528],"mapped",[959]],[[120529,120529],"mapped",[960]],[[120530,120530],"mapped",[961]],[[120531,120532],"mapped",[963]],[[120533,120533],"mapped",[964]],[[120534,120534],"mapped",[965]],[[120535,120535],"mapped",[966]],[[120536,120536],"mapped",[967]],[[120537,120537],"mapped",[968]],[[120538,120538],"mapped",[969]],[[120539,120539],"mapped",[8706]],[[120540,120540],"mapped",[949]],[[120541,120541],"mapped",[952]],[[120542,120542],"mapped",[954]],[[120543,120543],"mapped",[966]],[[120544,120544],"mapped",[961]],[[120545,120545],"mapped",[960]],[[120546,120546],"mapped",[945]],[[120547,120547],"mapped",[946]],[[120548,120548],"mapped",[947]],[[120549,120549],"mapped",[948]],[[120550,120550],"mapped",[949]],[[120551,120551],"mapped",[950]],[[120552,120552],"mapped",[951]],[[120553,120553],"mapped",[952]],[[120554,120554],"mapped",[953]],[[120555,120555],"mapped",[954]],[[120556,120556],"mapped",[955]],[[120557,120557],"mapped",[956]],[[120558,120558],"mapped",[957]],[[120559,120559],"mapped",[958]],[[120560,120560],"mapped",[959]],[[120561,120561],"mapped",[960]],[[120562,120562],"mapped",[961]],[[120563,120563],"mapped",[952]],[[120564,120564],"mapped",[963]],[[120565,120565],"mapped",[964]],[[120566,120566],"mapped",[965]],[[120567,120567],"mapped",[966]],[[120568,120568],"mapped",[967]],[[120569,120569],"mapped",[968]],[[120570,120570],"mapped",[969]],[[120571,120571],"mapped",[8711]],[[120572,120572],"mapped",[945]],[[120573,120573],"mapped",[946]],[[120574,120574],"mapped",[947]],[[120575,120575],"mapped",[948]],[[120576,120576],"mapped",[949]],[[120577,120577],"mapped",[950]],[[120578,120578],"mapped",[951]],[[120579,120579],"mapped",[952]],[[120580,120580],"mapped",[953]],[[120581,120581],"mapped",[954]],[[120582,120582],"mapped",[955]],[[120583,120583],"mapped",[956]],[[120584,120584],"mapped",[957]],[[120585,120585],"mapped",[958]],[[120586,120586],"mapped",[959]],[[120587,120587],"mapped",[960]],[[120588,120588],"mapped",[961]],[[120589,120590],"mapped",[963]],[[120591,120591],"mapped",[964]],[[120592,120592],"mapped",[965]],[[120593,120593],"mapped",[966]],[[120594,120594],"mapped",[967]],[[120595,120595],"mapped",[968]],[[120596,120596],"mapped",[969]],[[120597,120597],"mapped",[8706]],[[120598,120598],"mapped",[949]],[[120599,120599],"mapped",[952]],[[120600,120600],"mapped",[954]],[[120601,120601],"mapped",[966]],[[120602,120602],"mapped",[961]],[[120603,120603],"mapped",[960]],[[120604,120604],"mapped",[945]],[[120605,120605],"mapped",[946]],[[120606,120606],"mapped",[947]],[[120607,120607],"mapped",[948]],[[120608,120608],"mapped",[949]],[[120609,120609],"mapped",[950]],[[120610,120610],"mapped",[951]],[[120611,120611],"mapped",[952]],[[120612,120612],"mapped",[953]],[[120613,120613],"mapped",[954]],[[120614,120614],"mapped",[955]],[[120615,120615],"mapped",[956]],[[120616,120616],"mapped",[957]],[[120617,120617],"mapped",[958]],[[120618,120618],"mapped",[959]],[[120619,120619],"mapped",[960]],[[120620,120620],"mapped",[961]],[[120621,120621],"mapped",[952]],[[120622,120622],"mapped",[963]],[[120623,120623],"mapped",[964]],[[120624,120624],"mapped",[965]],[[120625,120625],"mapped",[966]],[[120626,120626],"mapped",[967]],[[120627,120627],"mapped",[968]],[[120628,120628],"mapped",[969]],[[120629,120629],"mapped",[8711]],[[120630,120630],"mapped",[945]],[[120631,120631],"mapped",[946]],[[120632,120632],"mapped",[947]],[[120633,120633],"mapped",[948]],[[120634,120634],"mapped",[949]],[[120635,120635],"mapped",[950]],[[120636,120636],"mapped",[951]],[[120637,120637],"mapped",[952]],[[120638,120638],"mapped",[953]],[[120639,120639],"mapped",[954]],[[120640,120640],"mapped",[955]],[[120641,120641],"mapped",[956]],[[120642,120642],"mapped",[957]],[[120643,120643],"mapped",[958]],[[120644,120644],"mapped",[959]],[[120645,120645],"mapped",[960]],[[120646,120646],"mapped",[961]],[[120647,120648],"mapped",[963]],[[120649,120649],"mapped",[964]],[[120650,120650],"mapped",[965]],[[120651,120651],"mapped",[966]],[[120652,120652],"mapped",[967]],[[120653,120653],"mapped",[968]],[[120654,120654],"mapped",[969]],[[120655,120655],"mapped",[8706]],[[120656,120656],"mapped",[949]],[[120657,120657],"mapped",[952]],[[120658,120658],"mapped",[954]],[[120659,120659],"mapped",[966]],[[120660,120660],"mapped",[961]],[[120661,120661],"mapped",[960]],[[120662,120662],"mapped",[945]],[[120663,120663],"mapped",[946]],[[120664,120664],"mapped",[947]],[[120665,120665],"mapped",[948]],[[120666,120666],"mapped",[949]],[[120667,120667],"mapped",[950]],[[120668,120668],"mapped",[951]],[[120669,120669],"mapped",[952]],[[120670,120670],"mapped",[953]],[[120671,120671],"mapped",[954]],[[120672,120672],"mapped",[955]],[[120673,120673],"mapped",[956]],[[120674,120674],"mapped",[957]],[[120675,120675],"mapped",[958]],[[120676,120676],"mapped",[959]],[[120677,120677],"mapped",[960]],[[120678,120678],"mapped",[961]],[[120679,120679],"mapped",[952]],[[120680,120680],"mapped",[963]],[[120681,120681],"mapped",[964]],[[120682,120682],"mapped",[965]],[[120683,120683],"mapped",[966]],[[120684,120684],"mapped",[967]],[[120685,120685],"mapped",[968]],[[120686,120686],"mapped",[969]],[[120687,120687],"mapped",[8711]],[[120688,120688],"mapped",[945]],[[120689,120689],"mapped",[946]],[[120690,120690],"mapped",[947]],[[120691,120691],"mapped",[948]],[[120692,120692],"mapped",[949]],[[120693,120693],"mapped",[950]],[[120694,120694],"mapped",[951]],[[120695,120695],"mapped",[952]],[[120696,120696],"mapped",[953]],[[120697,120697],"mapped",[954]],[[120698,120698],"mapped",[955]],[[120699,120699],"mapped",[956]],[[120700,120700],"mapped",[957]],[[120701,120701],"mapped",[958]],[[120702,120702],"mapped",[959]],[[120703,120703],"mapped",[960]],[[120704,120704],"mapped",[961]],[[120705,120706],"mapped",[963]],[[120707,120707],"mapped",[964]],[[120708,120708],"mapped",[965]],[[120709,120709],"mapped",[966]],[[120710,120710],"mapped",[967]],[[120711,120711],"mapped",[968]],[[120712,120712],"mapped",[969]],[[120713,120713],"mapped",[8706]],[[120714,120714],"mapped",[949]],[[120715,120715],"mapped",[952]],[[120716,120716],"mapped",[954]],[[120717,120717],"mapped",[966]],[[120718,120718],"mapped",[961]],[[120719,120719],"mapped",[960]],[[120720,120720],"mapped",[945]],[[120721,120721],"mapped",[946]],[[120722,120722],"mapped",[947]],[[120723,120723],"mapped",[948]],[[120724,120724],"mapped",[949]],[[120725,120725],"mapped",[950]],[[120726,120726],"mapped",[951]],[[120727,120727],"mapped",[952]],[[120728,120728],"mapped",[953]],[[120729,120729],"mapped",[954]],[[120730,120730],"mapped",[955]],[[120731,120731],"mapped",[956]],[[120732,120732],"mapped",[957]],[[120733,120733],"mapped",[958]],[[120734,120734],"mapped",[959]],[[120735,120735],"mapped",[960]],[[120736,120736],"mapped",[961]],[[120737,120737],"mapped",[952]],[[120738,120738],"mapped",[963]],[[120739,120739],"mapped",[964]],[[120740,120740],"mapped",[965]],[[120741,120741],"mapped",[966]],[[120742,120742],"mapped",[967]],[[120743,120743],"mapped",[968]],[[120744,120744],"mapped",[969]],[[120745,120745],"mapped",[8711]],[[120746,120746],"mapped",[945]],[[120747,120747],"mapped",[946]],[[120748,120748],"mapped",[947]],[[120749,120749],"mapped",[948]],[[120750,120750],"mapped",[949]],[[120751,120751],"mapped",[950]],[[120752,120752],"mapped",[951]],[[120753,120753],"mapped",[952]],[[120754,120754],"mapped",[953]],[[120755,120755],"mapped",[954]],[[120756,120756],"mapped",[955]],[[120757,120757],"mapped",[956]],[[120758,120758],"mapped",[957]],[[120759,120759],"mapped",[958]],[[120760,120760],"mapped",[959]],[[120761,120761],"mapped",[960]],[[120762,120762],"mapped",[961]],[[120763,120764],"mapped",[963]],[[120765,120765],"mapped",[964]],[[120766,120766],"mapped",[965]],[[120767,120767],"mapped",[966]],[[120768,120768],"mapped",[967]],[[120769,120769],"mapped",[968]],[[120770,120770],"mapped",[969]],[[120771,120771],"mapped",[8706]],[[120772,120772],"mapped",[949]],[[120773,120773],"mapped",[952]],[[120774,120774],"mapped",[954]],[[120775,120775],"mapped",[966]],[[120776,120776],"mapped",[961]],[[120777,120777],"mapped",[960]],[[120778,120779],"mapped",[989]],[[120780,120781],"disallowed"],[[120782,120782],"mapped",[48]],[[120783,120783],"mapped",[49]],[[120784,120784],"mapped",[50]],[[120785,120785],"mapped",[51]],[[120786,120786],"mapped",[52]],[[120787,120787],"mapped",[53]],[[120788,120788],"mapped",[54]],[[120789,120789],"mapped",[55]],[[120790,120790],"mapped",[56]],[[120791,120791],"mapped",[57]],[[120792,120792],"mapped",[48]],[[120793,120793],"mapped",[49]],[[120794,120794],"mapped",[50]],[[120795,120795],"mapped",[51]],[[120796,120796],"mapped",[52]],[[120797,120797],"mapped",[53]],[[120798,120798],"mapped",[54]],[[120799,120799],"mapped",[55]],[[120800,120800],"mapped",[56]],[[120801,120801],"mapped",[57]],[[120802,120802],"mapped",[48]],[[120803,120803],"mapped",[49]],[[120804,120804],"mapped",[50]],[[120805,120805],"mapped",[51]],[[120806,120806],"mapped",[52]],[[120807,120807],"mapped",[53]],[[120808,120808],"mapped",[54]],[[120809,120809],"mapped",[55]],[[120810,120810],"mapped",[56]],[[120811,120811],"mapped",[57]],[[120812,120812],"mapped",[48]],[[120813,120813],"mapped",[49]],[[120814,120814],"mapped",[50]],[[120815,120815],"mapped",[51]],[[120816,120816],"mapped",[52]],[[120817,120817],"mapped",[53]],[[120818,120818],"mapped",[54]],[[120819,120819],"mapped",[55]],[[120820,120820],"mapped",[56]],[[120821,120821],"mapped",[57]],[[120822,120822],"mapped",[48]],[[120823,120823],"mapped",[49]],[[120824,120824],"mapped",[50]],[[120825,120825],"mapped",[51]],[[120826,120826],"mapped",[52]],[[120827,120827],"mapped",[53]],[[120828,120828],"mapped",[54]],[[120829,120829],"mapped",[55]],[[120830,120830],"mapped",[56]],[[120831,120831],"mapped",[57]],[[120832,121343],"valid",[],"NV8"],[[121344,121398],"valid"],[[121399,121402],"valid",[],"NV8"],[[121403,121452],"valid"],[[121453,121460],"valid",[],"NV8"],[[121461,121461],"valid"],[[121462,121475],"valid",[],"NV8"],[[121476,121476],"valid"],[[121477,121483],"valid",[],"NV8"],[[121484,121498],"disallowed"],[[121499,121503],"valid"],[[121504,121504],"disallowed"],[[121505,121519],"valid"],[[121520,124927],"disallowed"],[[124928,125124],"valid"],[[125125,125126],"disallowed"],[[125127,125135],"valid",[],"NV8"],[[125136,125142],"valid"],[[125143,126463],"disallowed"],[[126464,126464],"mapped",[1575]],[[126465,126465],"mapped",[1576]],[[126466,126466],"mapped",[1580]],[[126467,126467],"mapped",[1583]],[[126468,126468],"disallowed"],[[126469,126469],"mapped",[1608]],[[126470,126470],"mapped",[1586]],[[126471,126471],"mapped",[1581]],[[126472,126472],"mapped",[1591]],[[126473,126473],"mapped",[1610]],[[126474,126474],"mapped",[1603]],[[126475,126475],"mapped",[1604]],[[126476,126476],"mapped",[1605]],[[126477,126477],"mapped",[1606]],[[126478,126478],"mapped",[1587]],[[126479,126479],"mapped",[1593]],[[126480,126480],"mapped",[1601]],[[126481,126481],"mapped",[1589]],[[126482,126482],"mapped",[1602]],[[126483,126483],"mapped",[1585]],[[126484,126484],"mapped",[1588]],[[126485,126485],"mapped",[1578]],[[126486,126486],"mapped",[1579]],[[126487,126487],"mapped",[1582]],[[126488,126488],"mapped",[1584]],[[126489,126489],"mapped",[1590]],[[126490,126490],"mapped",[1592]],[[126491,126491],"mapped",[1594]],[[126492,126492],"mapped",[1646]],[[126493,126493],"mapped",[1722]],[[126494,126494],"mapped",[1697]],[[126495,126495],"mapped",[1647]],[[126496,126496],"disallowed"],[[126497,126497],"mapped",[1576]],[[126498,126498],"mapped",[1580]],[[126499,126499],"disallowed"],[[126500,126500],"mapped",[1607]],[[126501,126502],"disallowed"],[[126503,126503],"mapped",[1581]],[[126504,126504],"disallowed"],[[126505,126505],"mapped",[1610]],[[126506,126506],"mapped",[1603]],[[126507,126507],"mapped",[1604]],[[126508,126508],"mapped",[1605]],[[126509,126509],"mapped",[1606]],[[126510,126510],"mapped",[1587]],[[126511,126511],"mapped",[1593]],[[126512,126512],"mapped",[1601]],[[126513,126513],"mapped",[1589]],[[126514,126514],"mapped",[1602]],[[126515,126515],"disallowed"],[[126516,126516],"mapped",[1588]],[[126517,126517],"mapped",[1578]],[[126518,126518],"mapped",[1579]],[[126519,126519],"mapped",[1582]],[[126520,126520],"disallowed"],[[126521,126521],"mapped",[1590]],[[126522,126522],"disallowed"],[[126523,126523],"mapped",[1594]],[[126524,126529],"disallowed"],[[126530,126530],"mapped",[1580]],[[126531,126534],"disallowed"],[[126535,126535],"mapped",[1581]],[[126536,126536],"disallowed"],[[126537,126537],"mapped",[1610]],[[126538,126538],"disallowed"],[[126539,126539],"mapped",[1604]],[[126540,126540],"disallowed"],[[126541,126541],"mapped",[1606]],[[126542,126542],"mapped",[1587]],[[126543,126543],"mapped",[1593]],[[126544,126544],"disallowed"],[[126545,126545],"mapped",[1589]],[[126546,126546],"mapped",[1602]],[[126547,126547],"disallowed"],[[126548,126548],"mapped",[1588]],[[126549,126550],"disallowed"],[[126551,126551],"mapped",[1582]],[[126552,126552],"disallowed"],[[126553,126553],"mapped",[1590]],[[126554,126554],"disallowed"],[[126555,126555],"mapped",[1594]],[[126556,126556],"disallowed"],[[126557,126557],"mapped",[1722]],[[126558,126558],"disallowed"],[[126559,126559],"mapped",[1647]],[[126560,126560],"disallowed"],[[126561,126561],"mapped",[1576]],[[126562,126562],"mapped",[1580]],[[126563,126563],"disallowed"],[[126564,126564],"mapped",[1607]],[[126565,126566],"disallowed"],[[126567,126567],"mapped",[1581]],[[126568,126568],"mapped",[1591]],[[126569,126569],"mapped",[1610]],[[126570,126570],"mapped",[1603]],[[126571,126571],"disallowed"],[[126572,126572],"mapped",[1605]],[[126573,126573],"mapped",[1606]],[[126574,126574],"mapped",[1587]],[[126575,126575],"mapped",[1593]],[[126576,126576],"mapped",[1601]],[[126577,126577],"mapped",[1589]],[[126578,126578],"mapped",[1602]],[[126579,126579],"disallowed"],[[126580,126580],"mapped",[1588]],[[126581,126581],"mapped",[1578]],[[126582,126582],"mapped",[1579]],[[126583,126583],"mapped",[1582]],[[126584,126584],"disallowed"],[[126585,126585],"mapped",[1590]],[[126586,126586],"mapped",[1592]],[[126587,126587],"mapped",[1594]],[[126588,126588],"mapped",[1646]],[[126589,126589],"disallowed"],[[126590,126590],"mapped",[1697]],[[126591,126591],"disallowed"],[[126592,126592],"mapped",[1575]],[[126593,126593],"mapped",[1576]],[[126594,126594],"mapped",[1580]],[[126595,126595],"mapped",[1583]],[[126596,126596],"mapped",[1607]],[[126597,126597],"mapped",[1608]],[[126598,126598],"mapped",[1586]],[[126599,126599],"mapped",[1581]],[[126600,126600],"mapped",[1591]],[[126601,126601],"mapped",[1610]],[[126602,126602],"disallowed"],[[126603,126603],"mapped",[1604]],[[126604,126604],"mapped",[1605]],[[126605,126605],"mapped",[1606]],[[126606,126606],"mapped",[1587]],[[126607,126607],"mapped",[1593]],[[126608,126608],"mapped",[1601]],[[126609,126609],"mapped",[1589]],[[126610,126610],"mapped",[1602]],[[126611,126611],"mapped",[1585]],[[126612,126612],"mapped",[1588]],[[126613,126613],"mapped",[1578]],[[126614,126614],"mapped",[1579]],[[126615,126615],"mapped",[1582]],[[126616,126616],"mapped",[1584]],[[126617,126617],"mapped",[1590]],[[126618,126618],"mapped",[1592]],[[126619,126619],"mapped",[1594]],[[126620,126624],"disallowed"],[[126625,126625],"mapped",[1576]],[[126626,126626],"mapped",[1580]],[[126627,126627],"mapped",[1583]],[[126628,126628],"disallowed"],[[126629,126629],"mapped",[1608]],[[126630,126630],"mapped",[1586]],[[126631,126631],"mapped",[1581]],[[126632,126632],"mapped",[1591]],[[126633,126633],"mapped",[1610]],[[126634,126634],"disallowed"],[[126635,126635],"mapped",[1604]],[[126636,126636],"mapped",[1605]],[[126637,126637],"mapped",[1606]],[[126638,126638],"mapped",[1587]],[[126639,126639],"mapped",[1593]],[[126640,126640],"mapped",[1601]],[[126641,126641],"mapped",[1589]],[[126642,126642],"mapped",[1602]],[[126643,126643],"mapped",[1585]],[[126644,126644],"mapped",[1588]],[[126645,126645],"mapped",[1578]],[[126646,126646],"mapped",[1579]],[[126647,126647],"mapped",[1582]],[[126648,126648],"mapped",[1584]],[[126649,126649],"mapped",[1590]],[[126650,126650],"mapped",[1592]],[[126651,126651],"mapped",[1594]],[[126652,126703],"disallowed"],[[126704,126705],"valid",[],"NV8"],[[126706,126975],"disallowed"],[[126976,127019],"valid",[],"NV8"],[[127020,127023],"disallowed"],[[127024,127123],"valid",[],"NV8"],[[127124,127135],"disallowed"],[[127136,127150],"valid",[],"NV8"],[[127151,127152],"disallowed"],[[127153,127166],"valid",[],"NV8"],[[127167,127167],"valid",[],"NV8"],[[127168,127168],"disallowed"],[[127169,127183],"valid",[],"NV8"],[[127184,127184],"disallowed"],[[127185,127199],"valid",[],"NV8"],[[127200,127221],"valid",[],"NV8"],[[127222,127231],"disallowed"],[[127232,127232],"disallowed"],[[127233,127233],"disallowed_STD3_mapped",[48,44]],[[127234,127234],"disallowed_STD3_mapped",[49,44]],[[127235,127235],"disallowed_STD3_mapped",[50,44]],[[127236,127236],"disallowed_STD3_mapped",[51,44]],[[127237,127237],"disallowed_STD3_mapped",[52,44]],[[127238,127238],"disallowed_STD3_mapped",[53,44]],[[127239,127239],"disallowed_STD3_mapped",[54,44]],[[127240,127240],"disallowed_STD3_mapped",[55,44]],[[127241,127241],"disallowed_STD3_mapped",[56,44]],[[127242,127242],"disallowed_STD3_mapped",[57,44]],[[127243,127244],"valid",[],"NV8"],[[127245,127247],"disallowed"],[[127248,127248],"disallowed_STD3_mapped",[40,97,41]],[[127249,127249],"disallowed_STD3_mapped",[40,98,41]],[[127250,127250],"disallowed_STD3_mapped",[40,99,41]],[[127251,127251],"disallowed_STD3_mapped",[40,100,41]],[[127252,127252],"disallowed_STD3_mapped",[40,101,41]],[[127253,127253],"disallowed_STD3_mapped",[40,102,41]],[[127254,127254],"disallowed_STD3_mapped",[40,103,41]],[[127255,127255],"disallowed_STD3_mapped",[40,104,41]],[[127256,127256],"disallowed_STD3_mapped",[40,105,41]],[[127257,127257],"disallowed_STD3_mapped",[40,106,41]],[[127258,127258],"disallowed_STD3_mapped",[40,107,41]],[[127259,127259],"disallowed_STD3_mapped",[40,108,41]],[[127260,127260],"disallowed_STD3_mapped",[40,109,41]],[[127261,127261],"disallowed_STD3_mapped",[40,110,41]],[[127262,127262],"disallowed_STD3_mapped",[40,111,41]],[[127263,127263],"disallowed_STD3_mapped",[40,112,41]],[[127264,127264],"disallowed_STD3_mapped",[40,113,41]],[[127265,127265],"disallowed_STD3_mapped",[40,114,41]],[[127266,127266],"disallowed_STD3_mapped",[40,115,41]],[[127267,127267],"disallowed_STD3_mapped",[40,116,41]],[[127268,127268],"disallowed_STD3_mapped",[40,117,41]],[[127269,127269],"disallowed_STD3_mapped",[40,118,41]],[[127270,127270],"disallowed_STD3_mapped",[40,119,41]],[[127271,127271],"disallowed_STD3_mapped",[40,120,41]],[[127272,127272],"disallowed_STD3_mapped",[40,121,41]],[[127273,127273],"disallowed_STD3_mapped",[40,122,41]],[[127274,127274],"mapped",[12308,115,12309]],[[127275,127275],"mapped",[99]],[[127276,127276],"mapped",[114]],[[127277,127277],"mapped",[99,100]],[[127278,127278],"mapped",[119,122]],[[127279,127279],"disallowed"],[[127280,127280],"mapped",[97]],[[127281,127281],"mapped",[98]],[[127282,127282],"mapped",[99]],[[127283,127283],"mapped",[100]],[[127284,127284],"mapped",[101]],[[127285,127285],"mapped",[102]],[[127286,127286],"mapped",[103]],[[127287,127287],"mapped",[104]],[[127288,127288],"mapped",[105]],[[127289,127289],"mapped",[106]],[[127290,127290],"mapped",[107]],[[127291,127291],"mapped",[108]],[[127292,127292],"mapped",[109]],[[127293,127293],"mapped",[110]],[[127294,127294],"mapped",[111]],[[127295,127295],"mapped",[112]],[[127296,127296],"mapped",[113]],[[127297,127297],"mapped",[114]],[[127298,127298],"mapped",[115]],[[127299,127299],"mapped",[116]],[[127300,127300],"mapped",[117]],[[127301,127301],"mapped",[118]],[[127302,127302],"mapped",[119]],[[127303,127303],"mapped",[120]],[[127304,127304],"mapped",[121]],[[127305,127305],"mapped",[122]],[[127306,127306],"mapped",[104,118]],[[127307,127307],"mapped",[109,118]],[[127308,127308],"mapped",[115,100]],[[127309,127309],"mapped",[115,115]],[[127310,127310],"mapped",[112,112,118]],[[127311,127311],"mapped",[119,99]],[[127312,127318],"valid",[],"NV8"],[[127319,127319],"valid",[],"NV8"],[[127320,127326],"valid",[],"NV8"],[[127327,127327],"valid",[],"NV8"],[[127328,127337],"valid",[],"NV8"],[[127338,127338],"mapped",[109,99]],[[127339,127339],"mapped",[109,100]],[[127340,127343],"disallowed"],[[127344,127352],"valid",[],"NV8"],[[127353,127353],"valid",[],"NV8"],[[127354,127354],"valid",[],"NV8"],[[127355,127356],"valid",[],"NV8"],[[127357,127358],"valid",[],"NV8"],[[127359,127359],"valid",[],"NV8"],[[127360,127369],"valid",[],"NV8"],[[127370,127373],"valid",[],"NV8"],[[127374,127375],"valid",[],"NV8"],[[127376,127376],"mapped",[100,106]],[[127377,127386],"valid",[],"NV8"],[[127387,127461],"disallowed"],[[127462,127487],"valid",[],"NV8"],[[127488,127488],"mapped",[12411,12363]],[[127489,127489],"mapped",[12467,12467]],[[127490,127490],"mapped",[12469]],[[127491,127503],"disallowed"],[[127504,127504],"mapped",[25163]],[[127505,127505],"mapped",[23383]],[[127506,127506],"mapped",[21452]],[[127507,127507],"mapped",[12487]],[[127508,127508],"mapped",[20108]],[[127509,127509],"mapped",[22810]],[[127510,127510],"mapped",[35299]],[[127511,127511],"mapped",[22825]],[[127512,127512],"mapped",[20132]],[[127513,127513],"mapped",[26144]],[[127514,127514],"mapped",[28961]],[[127515,127515],"mapped",[26009]],[[127516,127516],"mapped",[21069]],[[127517,127517],"mapped",[24460]],[[127518,127518],"mapped",[20877]],[[127519,127519],"mapped",[26032]],[[127520,127520],"mapped",[21021]],[[127521,127521],"mapped",[32066]],[[127522,127522],"mapped",[29983]],[[127523,127523],"mapped",[36009]],[[127524,127524],"mapped",[22768]],[[127525,127525],"mapped",[21561]],[[127526,127526],"mapped",[28436]],[[127527,127527],"mapped",[25237]],[[127528,127528],"mapped",[25429]],[[127529,127529],"mapped",[19968]],[[127530,127530],"mapped",[19977]],[[127531,127531],"mapped",[36938]],[[127532,127532],"mapped",[24038]],[[127533,127533],"mapped",[20013]],[[127534,127534],"mapped",[21491]],[[127535,127535],"mapped",[25351]],[[127536,127536],"mapped",[36208]],[[127537,127537],"mapped",[25171]],[[127538,127538],"mapped",[31105]],[[127539,127539],"mapped",[31354]],[[127540,127540],"mapped",[21512]],[[127541,127541],"mapped",[28288]],[[127542,127542],"mapped",[26377]],[[127543,127543],"mapped",[26376]],[[127544,127544],"mapped",[30003]],[[127545,127545],"mapped",[21106]],[[127546,127546],"mapped",[21942]],[[127547,127551],"disallowed"],[[127552,127552],"mapped",[12308,26412,12309]],[[127553,127553],"mapped",[12308,19977,12309]],[[127554,127554],"mapped",[12308,20108,12309]],[[127555,127555],"mapped",[12308,23433,12309]],[[127556,127556],"mapped",[12308,28857,12309]],[[127557,127557],"mapped",[12308,25171,12309]],[[127558,127558],"mapped",[12308,30423,12309]],[[127559,127559],"mapped",[12308,21213,12309]],[[127560,127560],"mapped",[12308,25943,12309]],[[127561,127567],"disallowed"],[[127568,127568],"mapped",[24471]],[[127569,127569],"mapped",[21487]],[[127570,127743],"disallowed"],[[127744,127776],"valid",[],"NV8"],[[127777,127788],"valid",[],"NV8"],[[127789,127791],"valid",[],"NV8"],[[127792,127797],"valid",[],"NV8"],[[127798,127798],"valid",[],"NV8"],[[127799,127868],"valid",[],"NV8"],[[127869,127869],"valid",[],"NV8"],[[127870,127871],"valid",[],"NV8"],[[127872,127891],"valid",[],"NV8"],[[127892,127903],"valid",[],"NV8"],[[127904,127940],"valid",[],"NV8"],[[127941,127941],"valid",[],"NV8"],[[127942,127946],"valid",[],"NV8"],[[127947,127950],"valid",[],"NV8"],[[127951,127955],"valid",[],"NV8"],[[127956,127967],"valid",[],"NV8"],[[127968,127984],"valid",[],"NV8"],[[127985,127991],"valid",[],"NV8"],[[127992,127999],"valid",[],"NV8"],[[128e3,128062],"valid",[],"NV8"],[[128063,128063],"valid",[],"NV8"],[[128064,128064],"valid",[],"NV8"],[[128065,128065],"valid",[],"NV8"],[[128066,128247],"valid",[],"NV8"],[[128248,128248],"valid",[],"NV8"],[[128249,128252],"valid",[],"NV8"],[[128253,128254],"valid",[],"NV8"],[[128255,128255],"valid",[],"NV8"],[[128256,128317],"valid",[],"NV8"],[[128318,128319],"valid",[],"NV8"],[[128320,128323],"valid",[],"NV8"],[[128324,128330],"valid",[],"NV8"],[[128331,128335],"valid",[],"NV8"],[[128336,128359],"valid",[],"NV8"],[[128360,128377],"valid",[],"NV8"],[[128378,128378],"disallowed"],[[128379,128419],"valid",[],"NV8"],[[128420,128420],"disallowed"],[[128421,128506],"valid",[],"NV8"],[[128507,128511],"valid",[],"NV8"],[[128512,128512],"valid",[],"NV8"],[[128513,128528],"valid",[],"NV8"],[[128529,128529],"valid",[],"NV8"],[[128530,128532],"valid",[],"NV8"],[[128533,128533],"valid",[],"NV8"],[[128534,128534],"valid",[],"NV8"],[[128535,128535],"valid",[],"NV8"],[[128536,128536],"valid",[],"NV8"],[[128537,128537],"valid",[],"NV8"],[[128538,128538],"valid",[],"NV8"],[[128539,128539],"valid",[],"NV8"],[[128540,128542],"valid",[],"NV8"],[[128543,128543],"valid",[],"NV8"],[[128544,128549],"valid",[],"NV8"],[[128550,128551],"valid",[],"NV8"],[[128552,128555],"valid",[],"NV8"],[[128556,128556],"valid",[],"NV8"],[[128557,128557],"valid",[],"NV8"],[[128558,128559],"valid",[],"NV8"],[[128560,128563],"valid",[],"NV8"],[[128564,128564],"valid",[],"NV8"],[[128565,128576],"valid",[],"NV8"],[[128577,128578],"valid",[],"NV8"],[[128579,128580],"valid",[],"NV8"],[[128581,128591],"valid",[],"NV8"],[[128592,128639],"valid",[],"NV8"],[[128640,128709],"valid",[],"NV8"],[[128710,128719],"valid",[],"NV8"],[[128720,128720],"valid",[],"NV8"],[[128721,128735],"disallowed"],[[128736,128748],"valid",[],"NV8"],[[128749,128751],"disallowed"],[[128752,128755],"valid",[],"NV8"],[[128756,128767],"disallowed"],[[128768,128883],"valid",[],"NV8"],[[128884,128895],"disallowed"],[[128896,128980],"valid",[],"NV8"],[[128981,129023],"disallowed"],[[129024,129035],"valid",[],"NV8"],[[129036,129039],"disallowed"],[[129040,129095],"valid",[],"NV8"],[[129096,129103],"disallowed"],[[129104,129113],"valid",[],"NV8"],[[129114,129119],"disallowed"],[[129120,129159],"valid",[],"NV8"],[[129160,129167],"disallowed"],[[129168,129197],"valid",[],"NV8"],[[129198,129295],"disallowed"],[[129296,129304],"valid",[],"NV8"],[[129305,129407],"disallowed"],[[129408,129412],"valid",[],"NV8"],[[129413,129471],"disallowed"],[[129472,129472],"valid",[],"NV8"],[[129473,131069],"disallowed"],[[131070,131071],"disallowed"],[[131072,173782],"valid"],[[173783,173823],"disallowed"],[[173824,177972],"valid"],[[177973,177983],"disallowed"],[[177984,178205],"valid"],[[178206,178207],"disallowed"],[[178208,183969],"valid"],[[183970,194559],"disallowed"],[[194560,194560],"mapped",[20029]],[[194561,194561],"mapped",[20024]],[[194562,194562],"mapped",[20033]],[[194563,194563],"mapped",[131362]],[[194564,194564],"mapped",[20320]],[[194565,194565],"mapped",[20398]],[[194566,194566],"mapped",[20411]],[[194567,194567],"mapped",[20482]],[[194568,194568],"mapped",[20602]],[[194569,194569],"mapped",[20633]],[[194570,194570],"mapped",[20711]],[[194571,194571],"mapped",[20687]],[[194572,194572],"mapped",[13470]],[[194573,194573],"mapped",[132666]],[[194574,194574],"mapped",[20813]],[[194575,194575],"mapped",[20820]],[[194576,194576],"mapped",[20836]],[[194577,194577],"mapped",[20855]],[[194578,194578],"mapped",[132380]],[[194579,194579],"mapped",[13497]],[[194580,194580],"mapped",[20839]],[[194581,194581],"mapped",[20877]],[[194582,194582],"mapped",[132427]],[[194583,194583],"mapped",[20887]],[[194584,194584],"mapped",[20900]],[[194585,194585],"mapped",[20172]],[[194586,194586],"mapped",[20908]],[[194587,194587],"mapped",[20917]],[[194588,194588],"mapped",[168415]],[[194589,194589],"mapped",[20981]],[[194590,194590],"mapped",[20995]],[[194591,194591],"mapped",[13535]],[[194592,194592],"mapped",[21051]],[[194593,194593],"mapped",[21062]],[[194594,194594],"mapped",[21106]],[[194595,194595],"mapped",[21111]],[[194596,194596],"mapped",[13589]],[[194597,194597],"mapped",[21191]],[[194598,194598],"mapped",[21193]],[[194599,194599],"mapped",[21220]],[[194600,194600],"mapped",[21242]],[[194601,194601],"mapped",[21253]],[[194602,194602],"mapped",[21254]],[[194603,194603],"mapped",[21271]],[[194604,194604],"mapped",[21321]],[[194605,194605],"mapped",[21329]],[[194606,194606],"mapped",[21338]],[[194607,194607],"mapped",[21363]],[[194608,194608],"mapped",[21373]],[[194609,194611],"mapped",[21375]],[[194612,194612],"mapped",[133676]],[[194613,194613],"mapped",[28784]],[[194614,194614],"mapped",[21450]],[[194615,194615],"mapped",[21471]],[[194616,194616],"mapped",[133987]],[[194617,194617],"mapped",[21483]],[[194618,194618],"mapped",[21489]],[[194619,194619],"mapped",[21510]],[[194620,194620],"mapped",[21662]],[[194621,194621],"mapped",[21560]],[[194622,194622],"mapped",[21576]],[[194623,194623],"mapped",[21608]],[[194624,194624],"mapped",[21666]],[[194625,194625],"mapped",[21750]],[[194626,194626],"mapped",[21776]],[[194627,194627],"mapped",[21843]],[[194628,194628],"mapped",[21859]],[[194629,194630],"mapped",[21892]],[[194631,194631],"mapped",[21913]],[[194632,194632],"mapped",[21931]],[[194633,194633],"mapped",[21939]],[[194634,194634],"mapped",[21954]],[[194635,194635],"mapped",[22294]],[[194636,194636],"mapped",[22022]],[[194637,194637],"mapped",[22295]],[[194638,194638],"mapped",[22097]],[[194639,194639],"mapped",[22132]],[[194640,194640],"mapped",[20999]],[[194641,194641],"mapped",[22766]],[[194642,194642],"mapped",[22478]],[[194643,194643],"mapped",[22516]],[[194644,194644],"mapped",[22541]],[[194645,194645],"mapped",[22411]],[[194646,194646],"mapped",[22578]],[[194647,194647],"mapped",[22577]],[[194648,194648],"mapped",[22700]],[[194649,194649],"mapped",[136420]],[[194650,194650],"mapped",[22770]],[[194651,194651],"mapped",[22775]],[[194652,194652],"mapped",[22790]],[[194653,194653],"mapped",[22810]],[[194654,194654],"mapped",[22818]],[[194655,194655],"mapped",[22882]],[[194656,194656],"mapped",[136872]],[[194657,194657],"mapped",[136938]],[[194658,194658],"mapped",[23020]],[[194659,194659],"mapped",[23067]],[[194660,194660],"mapped",[23079]],[[194661,194661],"mapped",[23e3]],[[194662,194662],"mapped",[23142]],[[194663,194663],"mapped",[14062]],[[194664,194664],"disallowed"],[[194665,194665],"mapped",[23304]],[[194666,194667],"mapped",[23358]],[[194668,194668],"mapped",[137672]],[[194669,194669],"mapped",[23491]],[[194670,194670],"mapped",[23512]],[[194671,194671],"mapped",[23527]],[[194672,194672],"mapped",[23539]],[[194673,194673],"mapped",[138008]],[[194674,194674],"mapped",[23551]],[[194675,194675],"mapped",[23558]],[[194676,194676],"disallowed"],[[194677,194677],"mapped",[23586]],[[194678,194678],"mapped",[14209]],[[194679,194679],"mapped",[23648]],[[194680,194680],"mapped",[23662]],[[194681,194681],"mapped",[23744]],[[194682,194682],"mapped",[23693]],[[194683,194683],"mapped",[138724]],[[194684,194684],"mapped",[23875]],[[194685,194685],"mapped",[138726]],[[194686,194686],"mapped",[23918]],[[194687,194687],"mapped",[23915]],[[194688,194688],"mapped",[23932]],[[194689,194689],"mapped",[24033]],[[194690,194690],"mapped",[24034]],[[194691,194691],"mapped",[14383]],[[194692,194692],"mapped",[24061]],[[194693,194693],"mapped",[24104]],[[194694,194694],"mapped",[24125]],[[194695,194695],"mapped",[24169]],[[194696,194696],"mapped",[14434]],[[194697,194697],"mapped",[139651]],[[194698,194698],"mapped",[14460]],[[194699,194699],"mapped",[24240]],[[194700,194700],"mapped",[24243]],[[194701,194701],"mapped",[24246]],[[194702,194702],"mapped",[24266]],[[194703,194703],"mapped",[172946]],[[194704,194704],"mapped",[24318]],[[194705,194706],"mapped",[140081]],[[194707,194707],"mapped",[33281]],[[194708,194709],"mapped",[24354]],[[194710,194710],"mapped",[14535]],[[194711,194711],"mapped",[144056]],[[194712,194712],"mapped",[156122]],[[194713,194713],"mapped",[24418]],[[194714,194714],"mapped",[24427]],[[194715,194715],"mapped",[14563]],[[194716,194716],"mapped",[24474]],[[194717,194717],"mapped",[24525]],[[194718,194718],"mapped",[24535]],[[194719,194719],"mapped",[24569]],[[194720,194720],"mapped",[24705]],[[194721,194721],"mapped",[14650]],[[194722,194722],"mapped",[14620]],[[194723,194723],"mapped",[24724]],[[194724,194724],"mapped",[141012]],[[194725,194725],"mapped",[24775]],[[194726,194726],"mapped",[24904]],[[194727,194727],"mapped",[24908]],[[194728,194728],"mapped",[24910]],[[194729,194729],"mapped",[24908]],[[194730,194730],"mapped",[24954]],[[194731,194731],"mapped",[24974]],[[194732,194732],"mapped",[25010]],[[194733,194733],"mapped",[24996]],[[194734,194734],"mapped",[25007]],[[194735,194735],"mapped",[25054]],[[194736,194736],"mapped",[25074]],[[194737,194737],"mapped",[25078]],[[194738,194738],"mapped",[25104]],[[194739,194739],"mapped",[25115]],[[194740,194740],"mapped",[25181]],[[194741,194741],"mapped",[25265]],[[194742,194742],"mapped",[25300]],[[194743,194743],"mapped",[25424]],[[194744,194744],"mapped",[142092]],[[194745,194745],"mapped",[25405]],[[194746,194746],"mapped",[25340]],[[194747,194747],"mapped",[25448]],[[194748,194748],"mapped",[25475]],[[194749,194749],"mapped",[25572]],[[194750,194750],"mapped",[142321]],[[194751,194751],"mapped",[25634]],[[194752,194752],"mapped",[25541]],[[194753,194753],"mapped",[25513]],[[194754,194754],"mapped",[14894]],[[194755,194755],"mapped",[25705]],[[194756,194756],"mapped",[25726]],[[194757,194757],"mapped",[25757]],[[194758,194758],"mapped",[25719]],[[194759,194759],"mapped",[14956]],[[194760,194760],"mapped",[25935]],[[194761,194761],"mapped",[25964]],[[194762,194762],"mapped",[143370]],[[194763,194763],"mapped",[26083]],[[194764,194764],"mapped",[26360]],[[194765,194765],"mapped",[26185]],[[194766,194766],"mapped",[15129]],[[194767,194767],"mapped",[26257]],[[194768,194768],"mapped",[15112]],[[194769,194769],"mapped",[15076]],[[194770,194770],"mapped",[20882]],[[194771,194771],"mapped",[20885]],[[194772,194772],"mapped",[26368]],[[194773,194773],"mapped",[26268]],[[194774,194774],"mapped",[32941]],[[194775,194775],"mapped",[17369]],[[194776,194776],"mapped",[26391]],[[194777,194777],"mapped",[26395]],[[194778,194778],"mapped",[26401]],[[194779,194779],"mapped",[26462]],[[194780,194780],"mapped",[26451]],[[194781,194781],"mapped",[144323]],[[194782,194782],"mapped",[15177]],[[194783,194783],"mapped",[26618]],[[194784,194784],"mapped",[26501]],[[194785,194785],"mapped",[26706]],[[194786,194786],"mapped",[26757]],[[194787,194787],"mapped",[144493]],[[194788,194788],"mapped",[26766]],[[194789,194789],"mapped",[26655]],[[194790,194790],"mapped",[26900]],[[194791,194791],"mapped",[15261]],[[194792,194792],"mapped",[26946]],[[194793,194793],"mapped",[27043]],[[194794,194794],"mapped",[27114]],[[194795,194795],"mapped",[27304]],[[194796,194796],"mapped",[145059]],[[194797,194797],"mapped",[27355]],[[194798,194798],"mapped",[15384]],[[194799,194799],"mapped",[27425]],[[194800,194800],"mapped",[145575]],[[194801,194801],"mapped",[27476]],[[194802,194802],"mapped",[15438]],[[194803,194803],"mapped",[27506]],[[194804,194804],"mapped",[27551]],[[194805,194805],"mapped",[27578]],[[194806,194806],"mapped",[27579]],[[194807,194807],"mapped",[146061]],[[194808,194808],"mapped",[138507]],[[194809,194809],"mapped",[146170]],[[194810,194810],"mapped",[27726]],[[194811,194811],"mapped",[146620]],[[194812,194812],"mapped",[27839]],[[194813,194813],"mapped",[27853]],[[194814,194814],"mapped",[27751]],[[194815,194815],"mapped",[27926]],[[194816,194816],"mapped",[27966]],[[194817,194817],"mapped",[28023]],[[194818,194818],"mapped",[27969]],[[194819,194819],"mapped",[28009]],[[194820,194820],"mapped",[28024]],[[194821,194821],"mapped",[28037]],[[194822,194822],"mapped",[146718]],[[194823,194823],"mapped",[27956]],[[194824,194824],"mapped",[28207]],[[194825,194825],"mapped",[28270]],[[194826,194826],"mapped",[15667]],[[194827,194827],"mapped",[28363]],[[194828,194828],"mapped",[28359]],[[194829,194829],"mapped",[147153]],[[194830,194830],"mapped",[28153]],[[194831,194831],"mapped",[28526]],[[194832,194832],"mapped",[147294]],[[194833,194833],"mapped",[147342]],[[194834,194834],"mapped",[28614]],[[194835,194835],"mapped",[28729]],[[194836,194836],"mapped",[28702]],[[194837,194837],"mapped",[28699]],[[194838,194838],"mapped",[15766]],[[194839,194839],"mapped",[28746]],[[194840,194840],"mapped",[28797]],[[194841,194841],"mapped",[28791]],[[194842,194842],"mapped",[28845]],[[194843,194843],"mapped",[132389]],[[194844,194844],"mapped",[28997]],[[194845,194845],"mapped",[148067]],[[194846,194846],"mapped",[29084]],[[194847,194847],"disallowed"],[[194848,194848],"mapped",[29224]],[[194849,194849],"mapped",[29237]],[[194850,194850],"mapped",[29264]],[[194851,194851],"mapped",[149e3]],[[194852,194852],"mapped",[29312]],[[194853,194853],"mapped",[29333]],[[194854,194854],"mapped",[149301]],[[194855,194855],"mapped",[149524]],[[194856,194856],"mapped",[29562]],[[194857,194857],"mapped",[29579]],[[194858,194858],"mapped",[16044]],[[194859,194859],"mapped",[29605]],[[194860,194861],"mapped",[16056]],[[194862,194862],"mapped",[29767]],[[194863,194863],"mapped",[29788]],[[194864,194864],"mapped",[29809]],[[194865,194865],"mapped",[29829]],[[194866,194866],"mapped",[29898]],[[194867,194867],"mapped",[16155]],[[194868,194868],"mapped",[29988]],[[194869,194869],"mapped",[150582]],[[194870,194870],"mapped",[30014]],[[194871,194871],"mapped",[150674]],[[194872,194872],"mapped",[30064]],[[194873,194873],"mapped",[139679]],[[194874,194874],"mapped",[30224]],[[194875,194875],"mapped",[151457]],[[194876,194876],"mapped",[151480]],[[194877,194877],"mapped",[151620]],[[194878,194878],"mapped",[16380]],[[194879,194879],"mapped",[16392]],[[194880,194880],"mapped",[30452]],[[194881,194881],"mapped",[151795]],[[194882,194882],"mapped",[151794]],[[194883,194883],"mapped",[151833]],[[194884,194884],"mapped",[151859]],[[194885,194885],"mapped",[30494]],[[194886,194887],"mapped",[30495]],[[194888,194888],"mapped",[30538]],[[194889,194889],"mapped",[16441]],[[194890,194890],"mapped",[30603]],[[194891,194891],"mapped",[16454]],[[194892,194892],"mapped",[16534]],[[194893,194893],"mapped",[152605]],[[194894,194894],"mapped",[30798]],[[194895,194895],"mapped",[30860]],[[194896,194896],"mapped",[30924]],[[194897,194897],"mapped",[16611]],[[194898,194898],"mapped",[153126]],[[194899,194899],"mapped",[31062]],[[194900,194900],"mapped",[153242]],[[194901,194901],"mapped",[153285]],[[194902,194902],"mapped",[31119]],[[194903,194903],"mapped",[31211]],[[194904,194904],"mapped",[16687]],[[194905,194905],"mapped",[31296]],[[194906,194906],"mapped",[31306]],[[194907,194907],"mapped",[31311]],[[194908,194908],"mapped",[153980]],[[194909,194910],"mapped",[154279]],[[194911,194911],"disallowed"],[[194912,194912],"mapped",[16898]],[[194913,194913],"mapped",[154539]],[[194914,194914],"mapped",[31686]],[[194915,194915],"mapped",[31689]],[[194916,194916],"mapped",[16935]],[[194917,194917],"mapped",[154752]],[[194918,194918],"mapped",[31954]],[[194919,194919],"mapped",[17056]],[[194920,194920],"mapped",[31976]],[[194921,194921],"mapped",[31971]],[[194922,194922],"mapped",[32e3]],[[194923,194923],"mapped",[155526]],[[194924,194924],"mapped",[32099]],[[194925,194925],"mapped",[17153]],[[194926,194926],"mapped",[32199]],[[194927,194927],"mapped",[32258]],[[194928,194928],"mapped",[32325]],[[194929,194929],"mapped",[17204]],[[194930,194930],"mapped",[156200]],[[194931,194931],"mapped",[156231]],[[194932,194932],"mapped",[17241]],[[194933,194933],"mapped",[156377]],[[194934,194934],"mapped",[32634]],[[194935,194935],"mapped",[156478]],[[194936,194936],"mapped",[32661]],[[194937,194937],"mapped",[32762]],[[194938,194938],"mapped",[32773]],[[194939,194939],"mapped",[156890]],[[194940,194940],"mapped",[156963]],[[194941,194941],"mapped",[32864]],[[194942,194942],"mapped",[157096]],[[194943,194943],"mapped",[32880]],[[194944,194944],"mapped",[144223]],[[194945,194945],"mapped",[17365]],[[194946,194946],"mapped",[32946]],[[194947,194947],"mapped",[33027]],[[194948,194948],"mapped",[17419]],[[194949,194949],"mapped",[33086]],[[194950,194950],"mapped",[23221]],[[194951,194951],"mapped",[157607]],[[194952,194952],"mapped",[157621]],[[194953,194953],"mapped",[144275]],[[194954,194954],"mapped",[144284]],[[194955,194955],"mapped",[33281]],[[194956,194956],"mapped",[33284]],[[194957,194957],"mapped",[36766]],[[194958,194958],"mapped",[17515]],[[194959,194959],"mapped",[33425]],[[194960,194960],"mapped",[33419]],[[194961,194961],"mapped",[33437]],[[194962,194962],"mapped",[21171]],[[194963,194963],"mapped",[33457]],[[194964,194964],"mapped",[33459]],[[194965,194965],"mapped",[33469]],[[194966,194966],"mapped",[33510]],[[194967,194967],"mapped",[158524]],[[194968,194968],"mapped",[33509]],[[194969,194969],"mapped",[33565]],[[194970,194970],"mapped",[33635]],[[194971,194971],"mapped",[33709]],[[194972,194972],"mapped",[33571]],[[194973,194973],"mapped",[33725]],[[194974,194974],"mapped",[33767]],[[194975,194975],"mapped",[33879]],[[194976,194976],"mapped",[33619]],[[194977,194977],"mapped",[33738]],[[194978,194978],"mapped",[33740]],[[194979,194979],"mapped",[33756]],[[194980,194980],"mapped",[158774]],[[194981,194981],"mapped",[159083]],[[194982,194982],"mapped",[158933]],[[194983,194983],"mapped",[17707]],[[194984,194984],"mapped",[34033]],[[194985,194985],"mapped",[34035]],[[194986,194986],"mapped",[34070]],[[194987,194987],"mapped",[160714]],[[194988,194988],"mapped",[34148]],[[194989,194989],"mapped",[159532]],[[194990,194990],"mapped",[17757]],[[194991,194991],"mapped",[17761]],[[194992,194992],"mapped",[159665]],[[194993,194993],"mapped",[159954]],[[194994,194994],"mapped",[17771]],[[194995,194995],"mapped",[34384]],[[194996,194996],"mapped",[34396]],[[194997,194997],"mapped",[34407]],[[194998,194998],"mapped",[34409]],[[194999,194999],"mapped",[34473]],[[195e3,195e3],"mapped",[34440]],[[195001,195001],"mapped",[34574]],[[195002,195002],"mapped",[34530]],[[195003,195003],"mapped",[34681]],[[195004,195004],"mapped",[34600]],[[195005,195005],"mapped",[34667]],[[195006,195006],"mapped",[34694]],[[195007,195007],"disallowed"],[[195008,195008],"mapped",[34785]],[[195009,195009],"mapped",[34817]],[[195010,195010],"mapped",[17913]],[[195011,195011],"mapped",[34912]],[[195012,195012],"mapped",[34915]],[[195013,195013],"mapped",[161383]],[[195014,195014],"mapped",[35031]],[[195015,195015],"mapped",[35038]],[[195016,195016],"mapped",[17973]],[[195017,195017],"mapped",[35066]],[[195018,195018],"mapped",[13499]],[[195019,195019],"mapped",[161966]],[[195020,195020],"mapped",[162150]],[[195021,195021],"mapped",[18110]],[[195022,195022],"mapped",[18119]],[[195023,195023],"mapped",[35488]],[[195024,195024],"mapped",[35565]],[[195025,195025],"mapped",[35722]],[[195026,195026],"mapped",[35925]],[[195027,195027],"mapped",[162984]],[[195028,195028],"mapped",[36011]],[[195029,195029],"mapped",[36033]],[[195030,195030],"mapped",[36123]],[[195031,195031],"mapped",[36215]],[[195032,195032],"mapped",[163631]],[[195033,195033],"mapped",[133124]],[[195034,195034],"mapped",[36299]],[[195035,195035],"mapped",[36284]],[[195036,195036],"mapped",[36336]],[[195037,195037],"mapped",[133342]],[[195038,195038],"mapped",[36564]],[[195039,195039],"mapped",[36664]],[[195040,195040],"mapped",[165330]],[[195041,195041],"mapped",[165357]],[[195042,195042],"mapped",[37012]],[[195043,195043],"mapped",[37105]],[[195044,195044],"mapped",[37137]],[[195045,195045],"mapped",[165678]],[[195046,195046],"mapped",[37147]],[[195047,195047],"mapped",[37432]],[[195048,195048],"mapped",[37591]],[[195049,195049],"mapped",[37592]],[[195050,195050],"mapped",[37500]],[[195051,195051],"mapped",[37881]],[[195052,195052],"mapped",[37909]],[[195053,195053],"mapped",[166906]],[[195054,195054],"mapped",[38283]],[[195055,195055],"mapped",[18837]],[[195056,195056],"mapped",[38327]],[[195057,195057],"mapped",[167287]],[[195058,195058],"mapped",[18918]],[[195059,195059],"mapped",[38595]],[[195060,195060],"mapped",[23986]],[[195061,195061],"mapped",[38691]],[[195062,195062],"mapped",[168261]],[[195063,195063],"mapped",[168474]],[[195064,195064],"mapped",[19054]],[[195065,195065],"mapped",[19062]],[[195066,195066],"mapped",[38880]],[[195067,195067],"mapped",[168970]],[[195068,195068],"mapped",[19122]],[[195069,195069],"mapped",[169110]],[[195070,195071],"mapped",[38923]],[[195072,195072],"mapped",[38953]],[[195073,195073],"mapped",[169398]],[[195074,195074],"mapped",[39138]],[[195075,195075],"mapped",[19251]],[[195076,195076],"mapped",[39209]],[[195077,195077],"mapped",[39335]],[[195078,195078],"mapped",[39362]],[[195079,195079],"mapped",[39422]],[[195080,195080],"mapped",[19406]],[[195081,195081],"mapped",[170800]],[[195082,195082],"mapped",[39698]],[[195083,195083],"mapped",[4e4]],[[195084,195084],"mapped",[40189]],[[195085,195085],"mapped",[19662]],[[195086,195086],"mapped",[19693]],[[195087,195087],"mapped",[40295]],[[195088,195088],"mapped",[172238]],[[195089,195089],"mapped",[19704]],[[195090,195090],"mapped",[172293]],[[195091,195091],"mapped",[172558]],[[195092,195092],"mapped",[172689]],[[195093,195093],"mapped",[40635]],[[195094,195094],"mapped",[19798]],[[195095,195095],"mapped",[40697]],[[195096,195096],"mapped",[40702]],[[195097,195097],"mapped",[40709]],[[195098,195098],"mapped",[40719]],[[195099,195099],"mapped",[40726]],[[195100,195100],"mapped",[40763]],[[195101,195101],"mapped",[173568]],[[195102,196605],"disallowed"],[[196606,196607],"disallowed"],[[196608,262141],"disallowed"],[[262142,262143],"disallowed"],[[262144,327677],"disallowed"],[[327678,327679],"disallowed"],[[327680,393213],"disallowed"],[[393214,393215],"disallowed"],[[393216,458749],"disallowed"],[[458750,458751],"disallowed"],[[458752,524285],"disallowed"],[[524286,524287],"disallowed"],[[524288,589821],"disallowed"],[[589822,589823],"disallowed"],[[589824,655357],"disallowed"],[[655358,655359],"disallowed"],[[655360,720893],"disallowed"],[[720894,720895],"disallowed"],[[720896,786429],"disallowed"],[[786430,786431],"disallowed"],[[786432,851965],"disallowed"],[[851966,851967],"disallowed"],[[851968,917501],"disallowed"],[[917502,917503],"disallowed"],[[917504,917504],"disallowed"],[[917505,917505],"disallowed"],[[917506,917535],"disallowed"],[[917536,917631],"disallowed"],[[917632,917759],"disallowed"],[[917760,917999],"ignored"],[[918e3,983037],"disallowed"],[[983038,983039],"disallowed"],[[983040,1048573],"disallowed"],[[1048574,1048575],"disallowed"],[[1048576,1114109],"disallowed"],[[1114110,1114111],"disallowed"]]});var tQ=Ze((Eyt,Dy)=>{"use strict";var YJ=dr("punycode"),KJ=qJ(),Z0={TRANSITIONAL:0,NONTRANSITIONAL:1};function JJ(t){return t.split("\0").map(function(e){return e.normalize("NFC")}).join("\0")}function QJ(t){for(var e=0,n=KJ.length-1;e<=n;){var i=Math.floor((e+n)/2),a=KJ[i];if(a[0][0]<=t&&a[0][1]>=t)return a;a[0][0]>t?n=i-1:e=i+1}return null}var KSe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function eQ(t){return t.replace(KSe,"_").length}function YSe(t,e,n){for(var i=!1,a="",o=eQ(t),s=0;s<o;++s){var l=t.codePointAt(s),c=QJ(l);switch(c[1]){case"disallowed":i=!0,a+=String.fromCodePoint(l);break;case"ignored":break;case"mapped":a+=String.fromCodePoint.apply(String,c[2]);break;case"deviation":n===Z0.TRANSITIONAL?a+=String.fromCodePoint.apply(String,c[2]):a+=String.fromCodePoint(l);break;case"valid":a+=String.fromCodePoint(l);break;case"disallowed_STD3_mapped":e?(i=!0,a+=String.fromCodePoint(l)):a+=String.fromCodePoint.apply(String,c[2]);break;case"disallowed_STD3_valid":e&&(i=!0),a+=String.fromCodePoint(l);break}}return{string:a,error:i}}var JSe=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDE2C-\uDE37\uDEDF-\uDEEA\uDF01-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDE30-\uDE40\uDEAB-\uDEB7]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD83A[\uDCD0-\uDCD6]|\uDB40[\uDD00-\uDDEF]/;function QSe(t,e){t.substr(0,4)==="xn--"&&(t=YJ.toUnicode(t),e=Z0.NONTRANSITIONAL);var n=!1;(JJ(t)!==t||t[3]==="-"&&t[4]==="-"||t[0]==="-"||t[t.length-1]==="-"||t.indexOf(".")!==-1||t.search(JSe)===0)&&(n=!0);for(var i=eQ(t),a=0;a<i;++a){var o=QJ(t.codePointAt(a));if(By===Z0.TRANSITIONAL&&o[1]!=="valid"||By===Z0.NONTRANSITIONAL&&o[1]!=="valid"&&o[1]!=="deviation"){n=!0;break}}return{label:t,error:n}}function By(t,e,n){var i=YSe(t,e,n);i.string=JJ(i.string);for(var a=i.string.split("."),o=0;o<a.length;++o)try{var s=QSe(a[o]);a[o]=s.label,i.error=i.error||s.error}catch(l){i.error=!0}return{string:a.join("."),error:i.error}}Dy.exports.toASCII=function(t,e,n,i){var a=By(t,e,n),o=a.string.split(".");if(o=o.map(function(c){try{return YJ.toASCII(c)}catch(u){return a.error=!0,c}}),i){var s=o.slice(0,o.length-1).join(".").length;(s.length>253||s.length===0)&&(a.error=!0);for(var l=0;l<o.length;++l)if(o.length>63||o.length===0){a.error=!0;break}}return a.error?null:o.join(".")};Dy.exports.toUnicode=function(t,e){var n=By(t,e,Z0.NONTRANSITIONAL);return{domain:n.string,error:n.error}};Dy.exports.PROCESSING_OPTIONS=Z0});var Ml=Ze((vyt,Eo)=>{"use strict";var X0=dr("punycode"),rQ=tQ(),oQ={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},Kt=Symbol("failure");function nQ(t){return X0.ucs2.decode(t).length}function iQ(t,e){let n=t[e];return isNaN(n)?void 0:String.fromCodePoint(n)}function HE(t){return t>=48&&t<=57}function WE(t){return t>=65&&t<=90||t>=97&&t<=122}function eNe(t){return WE(t)||HE(t)}function Os(t){return HE(t)||t>=65&&t<=70||t>=97&&t<=102}function aQ(t){return t==="."||t.toLowerCase()==="%2e"}function tNe(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function rNe(t,e){return WE(t)&&(e===58||e===124)}function sQ(t){return t.length===2&&WE(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function nNe(t){return t.length===2&&WE(t.codePointAt(0))&&t[1]===":"}function iNe(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/)!==-1}function aNe(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/)!==-1}function hI(t){return oQ[t]!==void 0}function ei(t){return hI(t.scheme)}function oNe(t){return oQ[t]}function lQ(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e="0"+e),"%"+e}function sNe(t){let e=new Buffer(t),n="";for(let i=0;i<e.length;++i)n+=lQ(e[i]);return n}function lNe(t){let e=new Buffer(t),n=[];for(let i=0;i<e.length;++i)e[i]!==37?n.push(e[i]):e[i]===37&&Os(e[i+1])&&Os(e[i+2])?(n.push(parseInt(e.slice(i+1,i+3).toString(),16)),i+=2):n.push(e[i]);return new Buffer(n).toString()}function Fy(t){return t<=31||t>126}var cNe=new Set([32,34,35,60,62,63,96,123,125]);function cQ(t){return Fy(t)||cNe.has(t)}var uNe=new Set([47,58,59,61,64,91,92,93,94,124]);function gI(t){return cQ(t)||uNe.has(t)}function jp(t,e){let n=String.fromCodePoint(t);return e(t)?sNe(n):n}function dNe(t){let e=10;return t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t===""?0:(e===10?/[^0-9]/:e===16?/[^0-9A-Fa-f]/:/[^0-7]/).test(t)?Kt:parseInt(t,e)}function fNe(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return t;let n=[];for(let o of e){if(o==="")return t;let s=dNe(o);if(s===Kt)return t;n.push(s)}for(let o=0;o<n.length-1;++o)if(n[o]>255)return Kt;if(n[n.length-1]>=Math.pow(256,5-n.length))return Kt;let i=n.pop(),a=0;for(let o of n)i+=o*Math.pow(256,3-a),++a;return i}function pNe(t){let e="",n=t;for(let i=1;i<=4;++i)e=String(n%256)+e,i!==4&&(e="."+e),n=Math.floor(n/256);return e}function hNe(t){let e=[0,0,0,0,0,0,0,0],n=0,i=null,a=0;if(t=X0.ucs2.decode(t),t[a]===58){if(t[a+1]!==58)return Kt;a+=2,++n,i=n}for(;a<t.length;){if(n===8)return Kt;if(t[a]===58){if(i!==null)return Kt;++a,++n,i=n;continue}let o=0,s=0;for(;s<4&&Os(t[a]);)o=o*16+parseInt(iQ(t,a),16),++a,++s;if(t[a]===46){if(s===0||(a-=s,n>6))return Kt;let l=0;for(;t[a]!==void 0;){let c=null;if(l>0)if(t[a]===46&&l<4)++a;else return Kt;if(!HE(t[a]))return Kt;for(;HE(t[a]);){let u=parseInt(iQ(t,a));if(c===null)c=u;else{if(c===0)return Kt;c=c*10+u}if(c>255)return Kt;++a}e[n]=e[n]*256+c,++l,(l===2||l===4)&&++n}if(l!==4)return Kt;break}else if(t[a]===58){if(++a,t[a]===void 0)return Kt}else if(t[a]!==void 0)return Kt;e[n]=o,++n}if(i!==null){let o=n-i;for(n=7;n!==0&&o>0;){let s=e[i+o-1];e[i+o-1]=e[n],e[n]=s,--n,--o}}else if(i===null&&n!==8)return Kt;return e}function mNe(t){let e="",i=_Ne(t).idx,a=!1;for(let o=0;o<=7;++o)if(!(a&&t[o]===0)){if(a&&(a=!1),i===o){e+=o===0?"::":":",a=!0;continue}e+=t[o].toString(16),o!==7&&(e+=":")}return e}function mI(t,e){if(t[0]==="[")return t[t.length-1]!=="]"?Kt:hNe(t.substring(1,t.length-1));if(!e)return gNe(t);let n=lNe(t),i=rQ.toASCII(n,!1,rQ.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(i===null||iNe(i))return Kt;let a=fNe(i);return typeof a=="number"||a===Kt?a:i}function gNe(t){if(aNe(t))return Kt;let e="",n=X0.ucs2.decode(t);for(let i=0;i<n.length;++i)e+=jp(n[i],Fy);return e}function _Ne(t){let e=null,n=1,i=null,a=0;for(let o=0;o<t.length;++o)t[o]!==0?(a>n&&(e=i,n=a),i=null,a=0):(i===null&&(i=o),++a);return a>n&&(e=i,n=a),{idx:e,len:n}}function _I(t){return typeof t=="number"?pNe(t):t instanceof Array?"["+mNe(t)+"]":t}function ENe(t){return t.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"")}function vNe(t){return t.replace(/\u0009|\u000A|\u000D/g,"")}function uQ(t){let e=t.path;e.length!==0&&(t.scheme==="file"&&e.length===1&&xNe(e[0])||e.pop())}function dQ(t){return t.username!==""||t.password!==""}function yNe(t){return t.host===null||t.host===""||t.cannotBeABaseURL||t.scheme==="file"}function xNe(t){return/^[A-Za-z]:$/.test(t)}function fn(t,e,n,i,a){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=n||"utf-8",this.stateOverride=a,this.url=i,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};let s=ENe(this.input);s!==this.input&&(this.parseError=!0),this.input=s}let o=vNe(this.input);for(o!==this.input&&(this.parseError=!0),this.input=o,this.state=a||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=X0.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){let s=this.input[this.pointer],l=isNaN(s)?void 0:String.fromCodePoint(s),c=this["parse "+this.state](s,l);if(c){if(c===Kt){this.failure=!0;break}}else break}}fn.prototype["parse scheme start"]=function(e,n){if(WE(e))this.buffer+=n.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,Kt;return!0};fn.prototype["parse scheme"]=function(e,n){if(eNe(e)||e===43||e===45||e===46)this.buffer+=n.toLowerCase();else if(e===58){if(this.stateOverride&&(ei(this.url)&&!hI(this.buffer)||!ei(this.url)&&hI(this.buffer)||(dQ(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&(this.url.host===""||this.url.host===null))||(this.url.scheme=this.buffer,this.buffer="",this.stateOverride))return!1;this.url.scheme==="file"?((this.input[this.pointer+1]!==47||this.input[this.pointer+2]!==47)&&(this.parseError=!0),this.state="file"):ei(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":ei(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===47?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,Kt;return!0};fn.prototype["parse no scheme"]=function(e){return this.base===null||this.base.cannotBeABaseURL&&e!==35?Kt:(this.base.cannotBeABaseURL&&e===35?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};fn.prototype["parse special relative or authority"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};fn.prototype["parse path or authority"]=function(e){return e===47?this.state="authority":(this.state="path",--this.pointer),!0};fn.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,isNaN(e)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===47?this.state="relative slash":e===63?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):ei(this.url)&&e===92?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0};fn.prototype["parse relative slash"]=function(e){return ei(this.url)&&(e===47||e===92)?(e===92&&(this.parseError=!0),this.state="special authority ignore slashes"):e===47?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};fn.prototype["parse special authority slashes"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};fn.prototype["parse special authority ignore slashes"]=function(e){return e!==47&&e!==92?(this.state="authority",--this.pointer):this.parseError=!0,!0};fn.prototype["parse authority"]=function(e,n){if(e===64){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;let i=nQ(this.buffer);for(let a=0;a<i;++a){let o=this.buffer.codePointAt(a);if(o===58&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let s=jp(o,gI);this.passwordTokenSeenFlag?this.url.password+=s:this.url.username+=s}this.buffer=""}else if(isNaN(e)||e===47||e===63||e===35||ei(this.url)&&e===92){if(this.atFlag&&this.buffer==="")return this.parseError=!0,Kt;this.pointer-=nQ(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=n;return!0};fn.prototype["parse hostname"]=fn.prototype["parse host"]=function(e,n){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===58&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,Kt;let i=mI(this.buffer,ei(this.url));if(i===Kt)return Kt;if(this.url.host=i,this.buffer="",this.state="port",this.stateOverride==="hostname")return!1}else if(isNaN(e)||e===47||e===63||e===35||ei(this.url)&&e===92){if(--this.pointer,ei(this.url)&&this.buffer==="")return this.parseError=!0,Kt;if(this.stateOverride&&this.buffer===""&&(dQ(this.url)||this.url.port!==null))return this.parseError=!0,!1;let i=mI(this.buffer,ei(this.url));if(i===Kt)return Kt;if(this.url.host=i,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===91?this.arrFlag=!0:e===93&&(this.arrFlag=!1),this.buffer+=n;return!0};fn.prototype["parse port"]=function(e,n){if(HE(e))this.buffer+=n;else if(isNaN(e)||e===47||e===63||e===35||ei(this.url)&&e===92||this.stateOverride){if(this.buffer!==""){let i=parseInt(this.buffer);if(i>Math.pow(2,16)-1)return this.parseError=!0,Kt;this.url.port=i===oNe(this.url.scheme)?null:i,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,Kt;return!0};var bNe=new Set([47,92,63,35]);fn.prototype["parse file"]=function(e){return this.url.scheme="file",e===47||e===92?(e===92&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?isNaN(e)?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===63?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):(this.input.length-this.pointer-1===0||!rNe(e,this.input[this.pointer+1])||this.input.length-this.pointer-1>=2&&!bNe.has(this.input[this.pointer+2])?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),uQ(this.url)):this.parseError=!0,this.state="path",--this.pointer):(this.state="path",--this.pointer),!0};fn.prototype["parse file slash"]=function(e){return e===47||e===92?(e===92&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(nNe(this.base.path[0])?this.url.path.push(this.base.path[0]):this.url.host=this.base.host),this.state="path",--this.pointer),!0};fn.prototype["parse file host"]=function(e,n){if(isNaN(e)||e===47||e===92||e===63||e===35)if(--this.pointer,!this.stateOverride&&sQ(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let i=mI(this.buffer,ei(this.url));if(i===Kt)return Kt;if(i==="localhost"&&(i=""),this.url.host=i,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=n;return!0};fn.prototype["parse path start"]=function(e){return ei(this.url)?(e===92&&(this.parseError=!0),this.state="path",e!==47&&e!==92&&--this.pointer):!this.stateOverride&&e===63?(this.url.query="",this.state="query"):!this.stateOverride&&e===35?(this.url.fragment="",this.state="fragment"):e!==void 0&&(this.state="path",e!==47&&--this.pointer),!0};fn.prototype["parse path"]=function(e){if(isNaN(e)||e===47||ei(this.url)&&e===92||!this.stateOverride&&(e===63||e===35)){if(ei(this.url)&&e===92&&(this.parseError=!0),tNe(this.buffer)?(uQ(this.url),e!==47&&!(ei(this.url)&&e===92)&&this.url.path.push("")):aQ(this.buffer)&&e!==47&&!(ei(this.url)&&e===92)?this.url.path.push(""):aQ(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&sQ(this.buffer)&&(this.url.host!==""&&this.url.host!==null&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)),this.buffer="",this.url.scheme==="file"&&(e===void 0||e===63||e===35))for(;this.url.path.length>1&&this.url.path[0]==="";)this.parseError=!0,this.url.path.shift();e===63&&(this.url.query="",this.state="query"),e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!Os(this.input[this.pointer+1])||!Os(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=jp(e,cQ);return!0};fn.prototype["parse cannot-be-a-base-URL path"]=function(e){return e===63?(this.url.query="",this.state="query"):e===35?(this.url.fragment="",this.state="fragment"):(!isNaN(e)&&e!==37&&(this.parseError=!0),e===37&&(!Os(this.input[this.pointer+1])||!Os(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path[0]=this.url.path[0]+jp(e,Fy))),!0};fn.prototype["parse query"]=function(e,n){if(isNaN(e)||!this.stateOverride&&e===35){(!ei(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8");let i=new Buffer(this.buffer);for(let a=0;a<i.length;++a)i[a]<33||i[a]>126||i[a]===34||i[a]===35||i[a]===60||i[a]===62?this.url.query+=lQ(i[a]):this.url.query+=String.fromCodePoint(i[a]);this.buffer="",e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!Os(this.input[this.pointer+1])||!Os(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=n;return!0};fn.prototype["parse fragment"]=function(e){return isNaN(e)||(e===0?this.parseError=!0:(e===37&&(!Os(this.input[this.pointer+1])||!Os(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=jp(e,Fy))),!0};function SNe(t,e){let n=t.scheme+":";if(t.host!==null?(n+="//",(t.username!==""||t.password!=="")&&(n+=t.username,t.password!==""&&(n+=":"+t.password),n+="@"),n+=_I(t.host),t.port!==null&&(n+=":"+t.port)):t.host===null&&t.scheme==="file"&&(n+="//"),t.cannotBeABaseURL)n+=t.path[0];else for(let i of t.path)n+="/"+i;return t.query!==null&&(n+="?"+t.query),!e&&t.fragment!==null&&(n+="#"+t.fragment),n}function NNe(t){let e=t.scheme+"://";return e+=_I(t.host),t.port!==null&&(e+=":"+t.port),e}Eo.exports.serializeURL=SNe;Eo.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":try{return Eo.exports.serializeURLOrigin(Eo.exports.parseURL(t.path[0]))}catch(e){return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return NNe({scheme:t.scheme,host:t.host,port:t.port});case"file":return"file://";default:return"null"}};Eo.exports.basicURLParse=function(t,e){e===void 0&&(e={});let n=new fn(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return n.failure?"failure":n.url};Eo.exports.setTheUsername=function(t,e){t.username="";let n=X0.ucs2.decode(e);for(let i=0;i<n.length;++i)t.username+=jp(n[i],gI)};Eo.exports.setThePassword=function(t,e){t.password="";let n=X0.ucs2.decode(e);for(let i=0;i<n.length;++i)t.password+=jp(n[i],gI)};Eo.exports.serializeHost=_I;Eo.exports.cannotHaveAUsernamePasswordPort=yNe;Eo.exports.serializeInteger=function(t){return String(t)};Eo.exports.parseURL=function(t,e){return e===void 0&&(e={}),Eo.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var pQ=Ze(fQ=>{"use strict";var pn=Ml();fQ.implementation=class{constructor(e){let n=e[0],i=e[1],a=null;if(i!==void 0&&(a=pn.basicURLParse(i),a==="failure"))throw new TypeError("Invalid base URL");let o=pn.basicURLParse(n,{baseURL:a});if(o==="failure")throw new TypeError("Invalid URL");this._url=o}get href(){return pn.serializeURL(this._url)}set href(e){let n=pn.basicURLParse(e);if(n==="failure")throw new TypeError("Invalid URL");this._url=n}get origin(){return pn.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(e){pn.basicURLParse(e+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){pn.cannotHaveAUsernamePasswordPort(this._url)||pn.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){pn.cannotHaveAUsernamePasswordPort(this._url)||pn.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?pn.serializeHost(e.host):pn.serializeHost(e.host)+":"+pn.serializeInteger(e.port)}set host(e){this._url.cannotBeABaseURL||pn.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":pn.serializeHost(this._url.host)}set hostname(e){this._url.cannotBeABaseURL||pn.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":pn.serializeInteger(this._url.port)}set port(e){pn.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:pn.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:this._url.path.length===0?"":"/"+this._url.path.join("/")}set pathname(e){this._url.cannotBeABaseURL||(this._url.path=[],pn.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":"?"+this._url.query}set search(e){let n=this._url;if(e===""){n.query=null;return}let i=e[0]==="?"?e.substring(1):e;n.query="",pn.basicURLParse(i,{url:n,stateOverride:"query"})}get hash(){return this._url.fragment===null||this._url.fragment===""?"":"#"+this._url.fragment}set hash(e){if(e===""){this._url.fragment=null;return}let n=e[0]==="#"?e.substring(1):e;this._url.fragment="",pn.basicURLParse(n,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var gQ=Ze((byt,ZE)=>{"use strict";var Jo=ZJ(),mQ=XJ(),hQ=pQ(),Pr=mQ.implSymbol;function gi(t){if(!this||this[Pr]||!(this instanceof gi))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw new TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");let e=[];for(let n=0;n<arguments.length&&n<2;++n)e[n]=arguments[n];e[0]=Jo.USVString(e[0]),e[1]!==void 0&&(e[1]=Jo.USVString(e[1])),ZE.exports.setup(this,e)}gi.prototype.toJSON=function(){if(!this||!ZE.exports.is(this))throw new TypeError("Illegal invocation");let e=[];for(let n=0;n<arguments.length&&n<0;++n)e[n]=arguments[n];return this[Pr].toJSON.apply(this[Pr],e)};Object.defineProperty(gi.prototype,"href",{get(){return this[Pr].href},set(t){t=Jo.USVString(t),this[Pr].href=t},enumerable:!0,configurable:!0});gi.prototype.toString=function(){if(!this||!ZE.exports.is(this))throw new TypeError("Illegal invocation");return this.href};Object.defineProperty(gi.prototype,"origin",{get(){return this[Pr].origin},enumerable:!0,configurable:!0});Object.defineProperty(gi.prototype,"protocol",{get(){return this[Pr].protocol},set(t){t=Jo.USVString(t),this[Pr].protocol=t},enumerable:!0,configurable:!0});Object.defineProperty(gi.prototype,"username",{get(){return this[Pr].username},set(t){t=Jo.USVString(t),this[Pr].username=t},enumerable:!0,configurable:!0});Object.defineProperty(gi.prototype,"password",{get(){return this[Pr].password},set(t){t=Jo.USVString(t),this[Pr].password=t},enumerable:!0,configurable:!0});Object.defineProperty(gi.prototype,"host",{get(){return this[Pr].host},set(t){t=Jo.USVString(t),this[Pr].host=t},enumerable:!0,configurable:!0});Object.defineProperty(gi.prototype,"hostname",{get(){return this[Pr].hostname},set(t){t=Jo.USVString(t),this[Pr].hostname=t},enumerable:!0,configurable:!0});Object.defineProperty(gi.prototype,"port",{get(){return this[Pr].port},set(t){t=Jo.USVString(t),this[Pr].port=t},enumerable:!0,configurable:!0});Object.defineProperty(gi.prototype,"pathname",{get(){return this[Pr].pathname},set(t){t=Jo.USVString(t),this[Pr].pathname=t},enumerable:!0,configurable:!0});Object.defineProperty(gi.prototype,"search",{get(){return this[Pr].search},set(t){t=Jo.USVString(t),this[Pr].search=t},enumerable:!0,configurable:!0});Object.defineProperty(gi.prototype,"hash",{get(){return this[Pr].hash},set(t){t=Jo.USVString(t),this[Pr].hash=t},enumerable:!0,configurable:!0});ZE.exports={is(t){return!!t&&t[Pr]instanceof hQ.implementation},create(t,e){let n=Object.create(gi.prototype);return this.setup(n,t,e),n},setup(t,e,n){n||(n={}),n.wrapper=t,t[Pr]=new hQ.implementation(e,n),t[Pr][mQ.wrapperSymbol]=t},interface:gi,expose:{Window:{URL:gi},Worker:{URL:gi}}}});var _Q=Ze(Ll=>{"use strict";Ll.URL=gQ().interface;Ll.serializeURL=Ml().serializeURL;Ll.serializeURLOrigin=Ml().serializeURLOrigin;Ll.basicURLParse=Ml().basicURLParse;Ll.setTheUsername=Ml().setTheUsername;Ll.setThePassword=Ml().setThePassword;Ll.serializeHost=Ml().serializeHost;Ll.serializeInteger=Ml().serializeInteger;Ll.parseURL=Ml().parseURL});var CQ={};mr(CQ,{AbortError:()=>Y0,FetchError:()=>Oi,Headers:()=>za,Request:()=>Ol,Response:()=>$a,default:()=>UNe});function Oi(t,e,n){Error.call(this,t),this.message=t,this.type=e,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}function _i(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.size;let a=i===void 0?0:i;var o=n.timeout;let s=o===void 0?0:o;t==null?t=null:bQ(t)?t=Buffer.from(t.toString()):YE(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof Qo.default||(t=Buffer.from(String(t)))),this[Vc]={body:t,disturbed:!1,error:null},this.size=a,this.timeout=s,t instanceof Qo.default&&t.on("error",function(l){let c=l.name==="AbortError"?l:new Oi(`Invalid response body while trying to fetch ${e.url}: ${l.message}`,"system",l);e[Vc].error=c})}function q0(){var t=this;if(this[Vc].disturbed)return _i.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[Vc].disturbed=!0,this[Vc].error)return _i.Promise.reject(this[Vc].error);let e=this.body;if(e===null)return _i.Promise.resolve(Buffer.alloc(0));if(YE(e)&&(e=e.stream()),Buffer.isBuffer(e))return _i.Promise.resolve(e);if(!(e instanceof Qo.default))return _i.Promise.resolve(Buffer.alloc(0));let n=[],i=0,a=!1;return new _i.Promise(function(o,s){let l;t.timeout&&(l=setTimeout(function(){a=!0,s(new Oi(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(c){c.name==="AbortError"?(a=!0,s(c)):s(new Oi(`Invalid response body while trying to fetch ${t.url}: ${c.message}`,"system",c))}),e.on("data",function(c){if(!(a||c===null)){if(t.size&&i+c.length>t.size){a=!0,s(new Oi(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}i+=c.length,n.push(c)}}),e.on("end",function(){if(!a){clearTimeout(l);try{o(Buffer.concat(n,i))}catch(c){s(new Oi(`Could not create Buffer from response body for ${t.url}: ${c.message}`,"system",c))}}})})}function TNe(t,e){if(typeof bI!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");let n=e.get("content-type"),i="utf-8",a,o;return n&&(a=/charset=([^;]*)/i.exec(n)),o=t.slice(0,1024).toString(),!a&&o&&(a=/<meta.+?charset=(['"])(.+?)\1/i.exec(o)),!a&&o&&(a=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),a||(a=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(o),a&&a.pop()),a&&(a=/charset=(.*)/i.exec(a.pop()))),!a&&o&&(a=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o)),a&&(i=a.pop(),(i==="gb2312"||i==="gbk")&&(i="gb18030")),bI(t,"UTF-8",i).toString()}function bQ(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function YE(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function SQ(t){let e,n,i=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Qo.default&&typeof i.getBoundary!="function"&&(e=new EQ,n=new EQ,i.pipe(e),i.pipe(n),t[Vc].body=e,i=n),i}function NQ(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":bQ(t)?"application/x-www-form-urlencoded;charset=UTF-8":YE(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof Qo.default?null:"text/plain;charset=UTF-8"}function AQ(t){let e=t.body;return e===null?0:YE(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function CNe(t,e){let n=e.body;n===null?t.end():YE(n)?n.stream().pipe(t):Buffer.isBuffer(n)?(t.write(n),t.end()):n.pipe(t)}function XE(t){if(t=`${t}`,TQ.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function vQ(t){if(t=`${t}`,SI.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function K0(t,e){e=e.toLowerCase();for(let n in t)if(n.toLowerCase()===e)return n}function NI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[Cn]).sort().map(e==="key"?function(i){return i.toLowerCase()}:e==="value"?function(i){return t[Cn][i].join(", ")}:function(i){return[i.toLowerCase(),t[Cn][i].join(", ")]})}function vI(t,e){let n=Object.create(wI);return n[AI]={target:t,kind:e,index:0},n}function wNe(t){let e=Object.assign({__proto__:null},t[Cn]),n=K0(t[Cn],"Host");return n!==void 0&&(e[n]=e[n][0]),e}function INe(t){let e=new za;for(let n of Object.keys(t))if(!TQ.test(n))if(Array.isArray(t[n]))for(let i of t[n])SI.test(i)||(e[Cn][n]===void 0?e[Cn][n]=[i]:e[Cn][n].push(i));else SI.test(t[n])||(e[Cn][n]=[t[n]]);return e}function yI(t){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(t)&&(t=new PNe(t).toString()),MNe(t)}function ky(t){return typeof t=="object"&&typeof t[Uc]=="object"}function BNe(t){let e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}function DNe(t){let e=t[Uc].parsedURL,n=new za(t[Uc].headers);if(n.has("Accept")||n.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof Qo.default.Readable&&!ONe)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let i=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(i="0"),t.body!=null){let o=AQ(t);typeof o=="number"&&(i=String(o))}i&&n.set("Content-Length",i),n.has("User-Agent")||n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate");let a=t.agent;return typeof a=="function"&&(a=a(e)),Object.assign({},e,{method:t.method,headers:wNe(n),agent:a})}function Y0(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}function gd(t,e){if(!gd.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return _i.Promise=gd.Promise,new gd.Promise(function(n,i){let a=new Ol(t,e),o=DNe(a),s=(o.protocol==="https:"?xQ.default:TI.default).request,l=a.signal,c=null,u=function(){let _=new Y0("The user aborted a request.");i(_),a.body&&a.body instanceof Qo.default.Readable&&xI(a.body,_),!(!c||!c.body)&&c.body.emit("error",_)};if(l&&l.aborted){u();return}let d=function(){u(),h()},f=s(o),p;l&&l.addEventListener("abort",d);function h(){f.abort(),l&&l.removeEventListener("abort",d),clearTimeout(p)}a.timeout&&f.once("socket",function(m){p=setTimeout(function(){i(new Oi(`network timeout at: ${a.url}`,"request-timeout")),h()},a.timeout)}),f.on("error",function(m){i(new Oi(`request to ${a.url} failed, reason: ${m.message}`,"system",m)),c&&c.body&&xI(c.body,m),h()}),GNe(f,function(m){l&&l.aborted||c&&c.body&&xI(c.body,m)}),parseInt(process.version.substring(1))<14&&f.on("socket",function(m){m.addListener("close",function(_){let E=m.listenerCount("data")>0;if(c&&E&&!_&&!(l&&l.aborted)){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",v)}})}),f.on("response",function(m){clearTimeout(p);let _=INe(m.headers);if(gd.isRedirect(m.statusCode)){let S=_.get("Location"),N=null;try{N=S===null?null:new qE(S,a.url).toString()}catch(w){if(a.redirect!=="manual"){i(new Oi(`uri requested responds with an invalid redirect URL: ${S}`,"invalid-redirect")),h();return}}switch(a.redirect){case"error":i(new Oi(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),h();return;case"manual":if(N!==null)try{_.set("Location",N)}catch(T){i(T)}break;case"follow":if(N===null)break;if(a.counter>=a.follow){i(new Oi(`maximum redirect reached at: ${a.url}`,"max-redirect")),h();return}let w={headers:new za(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:a.body,signal:a.signal,timeout:a.timeout,size:a.size};if(!FNe(a.url,N)||!kNe(a.url,N))for(let T of["authorization","www-authenticate","cookie","cookie2"])w.headers.delete(T);if(m.statusCode!==303&&a.body&&AQ(a)===null){i(new Oi("Cannot follow redirect with body being a readable stream","unsupported-redirect")),h();return}(m.statusCode===303||(m.statusCode===301||m.statusCode===302)&&a.method==="POST")&&(w.method="GET",w.body=void 0,w.headers.delete("content-length")),n(gd(new Ol(N,w))),h();return}}m.once("end",function(){l&&l.removeEventListener("abort",d)});let E=m.pipe(new yQ),v={url:a.url,status:m.statusCode,statusText:m.statusMessage,headers:_,size:a.size,timeout:a.timeout,counter:a.counter},y=_.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||y===null||m.statusCode===204||m.statusCode===304){c=new $a(E,v),n(c);return}let x={flush:md.default.Z_SYNC_FLUSH,finishFlush:md.default.Z_SYNC_FLUSH};if(y=="gzip"||y=="x-gzip"){E=E.pipe(md.default.createGunzip(x)),c=new $a(E,v),n(c);return}if(y=="deflate"||y=="x-deflate"){let S=m.pipe(new yQ);S.once("data",function(N){(N[0]&15)===8?E=E.pipe(md.default.createInflate()):E=E.pipe(md.default.createInflateRaw()),c=new $a(E,v),n(c)}),S.on("end",function(){c||(c=new $a(E,v),n(c))});return}if(y=="br"&&typeof md.default.createBrotliDecompress=="function"){E=E.pipe(md.default.createBrotliDecompress()),c=new $a(E,v),n(c);return}c=new $a(E,v),n(c)}),CNe(f,a)})}function GNe(t,e){let n;t.on("socket",function(i){n=i}),t.on("response",function(i){let a=i.headers;a["transfer-encoding"]==="chunked"&&!a["content-length"]&&i.once("close",function(o){if(n&&n.listenerCount("data")>0&&!o){let l=new Error("Premature close");l.code="ERR_STREAM_PREMATURE_CLOSE",e(l)}})})}function xI(t,e){t.destroy?t.destroy(e):(t.emit("error",e),t.end())}var Qo,TI,KE,CI,xQ,md,ANe,Gc,EI,_d,bI,Vc,EQ,TQ,SI,Cn,za,AI,wI,hd,RNe,$a,Uc,PNe,MNe,LNe,ONe,Ol,qE,yQ,FNe,kNe,UNe,wQ=Vg(()=>{Qo=Ma(dr("stream"),1),TI=Ma(dr("http"),1),KE=Ma(dr("url"),1),CI=Ma(_Q(),1),xQ=Ma(dr("https"),1),md=Ma(dr("zlib"),1),ANe=Qo.default.Readable,Gc=Symbol("buffer"),EI=Symbol("type"),_d=class{constructor(){this[EI]="";let e=arguments[0],n=arguments[1],i=[],a=0;if(e){let s=e,l=Number(s.length);for(let c=0;c<l;c++){let u=s[c],d;u instanceof Buffer?d=u:ArrayBuffer.isView(u)?d=Buffer.from(u.buffer,u.byteOffset,u.byteLength):u instanceof ArrayBuffer?d=Buffer.from(u):u instanceof _d?d=u[Gc]:d=Buffer.from(typeof u=="string"?u:String(u)),a+=d.length,i.push(d)}}this[Gc]=Buffer.concat(i);let o=n&&n.type!==void 0&&String(n.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[EI]=o)}get size(){return this[Gc].length}get type(){return this[EI]}text(){return Promise.resolve(this[Gc].toString())}arrayBuffer(){let e=this[Gc],n=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(n)}stream(){let e=new ANe;return e._read=function(){},e.push(this[Gc]),e.push(null),e}toString(){return"[object Blob]"}slice(){let e=this.size,n=arguments[0],i=arguments[1],a,o;n===void 0?a=0:n<0?a=Math.max(e+n,0):a=Math.min(n,e),i===void 0?o=e:i<0?o=Math.max(e+i,0):o=Math.min(i,e);let s=Math.max(o-a,0),c=this[Gc].slice(a,a+s),u=new _d([],{type:arguments[2]});return u[Gc]=c,u}};Object.defineProperties(_d.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Object.defineProperty(_d.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});Oi.prototype=Object.create(Error.prototype);Oi.prototype.constructor=Oi;Oi.prototype.name="FetchError";try{bI=dr("encoding").convert}catch(t){}Vc=Symbol("Body internals"),EQ=Qo.default.PassThrough;_i.prototype={get body(){return this[Vc].body},get bodyUsed(){return this[Vc].disturbed},arrayBuffer(){return q0.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return q0.call(this).then(function(e){return Object.assign(new _d([],{type:t.toLowerCase()}),{[Gc]:e})})},json(){var t=this;return q0.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(n){return _i.Promise.reject(new Oi(`invalid json response body at ${t.url} reason: ${n.message}`,"invalid-json"))}})},text(){return q0.call(this).then(function(t){return t.toString()})},buffer(){return q0.call(this)},textConverted(){var t=this;return q0.call(this).then(function(e){return TNe(e,t.headers)})}};Object.defineProperties(_i.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});_i.mixIn=function(t){for(let e of Object.getOwnPropertyNames(_i.prototype))if(!(e in t)){let n=Object.getOwnPropertyDescriptor(_i.prototype,e);Object.defineProperty(t,e,n)}};_i.Promise=global.Promise;TQ=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,SI=/[^\t\x20-\x7e\x80-\xff]/;Cn=Symbol("map"),za=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[Cn]=Object.create(null),e instanceof za){let n=e.raw(),i=Object.keys(n);for(let a of i)for(let o of n[a])this.append(a,o);return}if(e!=null)if(typeof e=="object"){let n=e[Symbol.iterator];if(n!=null){if(typeof n!="function")throw new TypeError("Header pairs must be iterable");let i=[];for(let a of e){if(typeof a!="object"||typeof a[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");i.push(Array.from(a))}for(let a of i){if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(a[0],a[1])}}else for(let i of Object.keys(e)){let a=e[i];this.append(i,a)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,XE(e);let n=K0(this[Cn],e);return n===void 0?null:this[Cn][n].join(", ")}forEach(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=NI(this),a=0;for(;a<i.length;){var o=i[a];let s=o[0],l=o[1];e.call(n,l,s,this),i=NI(this),a++}}set(e,n){e=`${e}`,n=`${n}`,XE(e),vQ(n);let i=K0(this[Cn],e);this[Cn][i!==void 0?i:e]=[n]}append(e,n){e=`${e}`,n=`${n}`,XE(e),vQ(n);let i=K0(this[Cn],e);i!==void 0?this[Cn][i].push(n):this[Cn][e]=[n]}has(e){return e=`${e}`,XE(e),K0(this[Cn],e)!==void 0}delete(e){e=`${e}`,XE(e);let n=K0(this[Cn],e);n!==void 0&&delete this[Cn][n]}raw(){return this[Cn]}keys(){return vI(this,"key")}values(){return vI(this,"value")}[Symbol.iterator](){return vI(this,"key+value")}};za.prototype.entries=za.prototype[Symbol.iterator];Object.defineProperty(za.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(za.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});AI=Symbol("internal");wI=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==wI)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[AI];let e=t.target,n=t.kind,i=t.index,a=NI(e,n),o=a.length;return i>=o?{value:void 0,done:!0}:(this[AI].index=i+1,{value:a[i],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(wI,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});hd=Symbol("Response internals"),RNe=TI.default.STATUS_CODES,$a=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_i.call(this,e,n);let i=n.status||200,a=new za(n.headers);if(e!=null&&!a.has("Content-Type")){let o=NQ(e);o&&a.append("Content-Type",o)}this[hd]={url:n.url,status:i,statusText:n.statusText||RNe[i],headers:a,counter:n.counter}}get url(){return this[hd].url||""}get status(){return this[hd].status}get ok(){return this[hd].status>=200&&this[hd].status<300}get redirected(){return this[hd].counter>0}get statusText(){return this[hd].statusText}get headers(){return this[hd].headers}clone(){return new $a(SQ(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}};_i.mixIn($a.prototype);Object.defineProperties($a.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Object.defineProperty($a.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});Uc=Symbol("Request internals"),PNe=KE.default.URL||CI.default.URL,MNe=KE.default.parse,LNe=KE.default.format;ONe="destroy"in Qo.default.Readable.prototype;Ol=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i;ky(e)?i=yI(e.url):(e&&e.href?i=yI(e.href):i=yI(`${e}`),e={});let a=n.method||e.method||"GET";if(a=a.toUpperCase(),(n.body!=null||ky(e)&&e.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let o=n.body!=null?n.body:ky(e)&&e.body!==null?SQ(e):null;_i.call(this,o,{timeout:n.timeout||e.timeout||0,size:n.size||e.size||0});let s=new za(n.headers||e.headers||{});if(o!=null&&!s.has("Content-Type")){let c=NQ(o);c&&s.append("Content-Type",c)}let l=ky(e)?e.signal:null;if("signal"in n&&(l=n.signal),l!=null&&!BNe(l))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Uc]={method:a,redirect:n.redirect||e.redirect||"follow",headers:s,parsedURL:i,signal:l},this.follow=n.follow!==void 0?n.follow:e.follow!==void 0?e.follow:20,this.compress=n.compress!==void 0?n.compress:e.compress!==void 0?e.compress:!0,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent}get method(){return this[Uc].method}get url(){return LNe(this[Uc].parsedURL)}get headers(){return this[Uc].headers}get redirect(){return this[Uc].redirect}get signal(){return this[Uc].signal}clone(){return new Ol(this)}};_i.mixIn(Ol.prototype);Object.defineProperty(Ol.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(Ol.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});Y0.prototype=Object.create(Error.prototype);Y0.prototype.constructor=Y0;Y0.prototype.name="AbortError";qE=KE.default.URL||CI.default.URL,yQ=Qo.default.PassThrough,FNe=function(e,n){let i=new qE(n).hostname,a=new qE(e).hostname;return i===a||i[i.length-a.length-1]==="."&&i.endsWith(a)},kNe=function(e,n){let i=new qE(n).protocol,a=new qE(e).protocol;return i===a};gd.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308};gd.Promise=global.Promise;UNe=gd});var ite,nte=Vg(()=>{ite="./canvas-ZSQ7W6R4.node"});var ote=Ze((yxt,ate)=>{nte();try{ate.exports=dr(ite)}catch(t){}});var nm=Ze((bxt,ste)=>{"use strict";var JR=ote();ste.exports=JR;JR.ImageData.prototype.toString=function(){return"[object ImageData]"};JR.CanvasGradient.prototype.toString=function(){return"[object CanvasGradient]"}});var eP=Ze((Sxt,cte)=>{"use strict";var X7e="bold|bolder|lighter|[1-9]00",q7e="italic|oblique",K7e="small-caps",Y7e="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",J7e="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",lte=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,Q7e=new RegExp(`(${X7e}) +`,"i"),eTe=new RegExp(`(${q7e}) +`,"i"),tTe=new RegExp(`(${K7e}) +`,"i"),rTe=new RegExp(`(${Y7e}) +`,"i"),nTe=new RegExp(`([\\d\\.]+)(${J7e}) *((?:${lte})( *, *(?:${lte}))*)`),QR={},iTe=16;cte.exports=t=>{if(QR[t])return QR[t];let e=nTe.exec(t);if(!e)return;let n={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(e[1]),unit:e[2],family:e[3].replace(/["']/g,"").replace(/ *, */g,",")},i,a,o,s,l=t.substring(0,e.index);switch((i=Q7e.exec(l))&&(n.weight=i[1]),(a=eTe.exec(l))&&(n.style=a[1]),(o=tTe.exec(l))&&(n.variant=o[1]),(s=rTe.exec(l))&&(n.stretch=s[1]),n.unit){case"pt":n.size/=.75;break;case"pc":n.size*=16;break;case"in":n.size*=96;break;case"cm":n.size*=96/2.54;break;case"mm":n.size*=96/25.4;break;case"%":break;case"em":case"rem":n.size*=iTe/.75;break;case"q":n.size*=96/25.4/4;break}return QR[t]=n}});var f8=Ze((Nxt,ute)=>{"use strict";var aTe=dr("util"),N3=class{constructor(e,n,i,a){typeof e=="object"&&e!==null&&(a=e.w,i=e.z,n=e.y,e=e.x),this.x=typeof e=="number"?e:0,this.y=typeof n=="number"?n:0,this.z=typeof i=="number"?i:0,this.w=typeof a=="number"?a:1}},am=0,om=1,g3=2,_3=3,sm=4,lm=5,E3=6,v3=7,y3=8,x3=9,cm=10,b3=11,um=12,dm=13,S3=14,fm=15,oTe=180/Math.PI,im=Math.PI/180;function sTe(t){let e=t.replace("matrix(","");if(e=e.split(",",7),e.length!==6)throw new Error(`Failed to parse ${t}`);return e=e.map(parseFloat),[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}function lTe(t){let e=t.replace("matrix3d(","");if(e=e.split(",",17),e.length!==16)throw new Error(`Failed to parse ${t}`);return e.map(parseFloat)}function cTe(t){let e=t.split("(",1)[0];switch(e){case"matrix":return sTe(t);case"matrix3d":return lTe(t);default:throw new Error(`${e} parsing not implemented`)}}var ns=class{constructor(e){this._is2D=!0,this._values=new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);let n;if(typeof e=="string"){if(e==="")return;let i=e.split(/\)\s+/,20).map(cTe);if(i.length===0)return;for(e=i[0],n=1;n<i.length;n++)e=vo(i[n],e)}if(n=0,e&&e.length===6)vi(this,am,e[n++]),vi(this,om,e[n++]),vi(this,sm,e[n++]),vi(this,lm,e[n++]),vi(this,um,e[n++]),vi(this,dm,e[n++]);else if(e&&e.length===16)vi(this,am,e[n++]),vi(this,om,e[n++]),Gn(this,g3,e[n++]),Gn(this,_3,e[n++]),vi(this,sm,e[n++]),vi(this,lm,e[n++]),Gn(this,E3,e[n++]),Gn(this,v3,e[n++]),Gn(this,y3,e[n++]),Gn(this,x3,e[n++]),Gn(this,cm,e[n++]),Gn(this,b3,e[n++]),vi(this,um,e[n++]),vi(this,dm,e[n++]),Gn(this,S3,e[n++]),Gn(this,fm,e[n]);else if(e!==void 0)throw new TypeError("Expected string or array.")}toString(){return this.is2D?`matrix(${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e}, ${this.f})`:`matrix3d(${this._values.join(", ")})`}multiply(e){return rs(this._values).multiplySelf(e)}multiplySelf(e){return this._values=vo(e._values,this._values),e.is2D||(this._is2D=!1),this}preMultiplySelf(e){return this._values=vo(this._values,e._values),e.is2D||(this._is2D=!1),this}translate(e,n,i){return rs(this._values).translateSelf(e,n,i)}translateSelf(e,n,i){return typeof e!="number"&&(e=0),typeof n!="number"&&(n=0),typeof i!="number"&&(i=0),this._values=vo([1,0,0,0,0,1,0,0,0,0,1,0,e,n,i,1],this._values),i!==0&&(this._is2D=!1),this}scale(e,n,i,a,o,s){return rs(this._values).scaleSelf(e,n,i,a,o,s)}scale3d(e,n,i,a){return rs(this._values).scale3dSelf(e,n,i,a)}scale3dSelf(e,n,i,a){return this.scaleSelf(e,e,e,n,i,a)}scaleSelf(e,n,i,a,o,s){return typeof a!="number"&&(a=0),typeof o!="number"&&(o=0),typeof s!="number"&&(s=0),this.translateSelf(a,o,s),typeof e!="number"&&(e=1),typeof n!="number"&&(n=e),typeof i!="number"&&(i=1),this._values=vo([e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1],this._values),this.translateSelf(-a,-o,-s),(i!==1||s!==0)&&(this._is2D=!1),this}rotateFromVector(e,n){return rs(this._values).rotateFromVectorSelf(e,n)}rotateFromVectorSelf(e,n){typeof e!="number"&&(e=0),typeof n!="number"&&(n=0);let i=e===0&&n===0?0:Math.atan2(n,e)*oTe;return this.rotateSelf(i)}rotate(e,n,i){return rs(this._values).rotateSelf(e,n,i)}rotateSelf(e,n,i){n===void 0&&i===void 0&&(i=e,e=n=0),typeof n!="number"&&(n=0),typeof i!="number"&&(i=0),(e!==0||n!==0)&&(this._is2D=!1),e*=im,n*=im,i*=im;let a,o;return a=Math.cos(i),o=Math.sin(i),this._values=vo([a,o,0,0,-o,a,0,0,0,0,1,0,0,0,0,1],this._values),a=Math.cos(n),o=Math.sin(n),this._values=vo([a,0,-o,0,0,1,0,0,o,0,a,0,0,0,0,1],this._values),a=Math.cos(e),o=Math.sin(e),this._values=vo([1,0,0,0,0,a,o,0,0,-o,a,0,0,0,0,1],this._values),this}rotateAxisAngle(e,n,i,a){return rs(this._values).rotateAxisAngleSelf(e,n,i,a)}rotateAxisAngleSelf(e,n,i,a){typeof e!="number"&&(e=0),typeof n!="number"&&(n=0),typeof i!="number"&&(i=0);let o=Math.sqrt(e*e+n*n+i*i);if(o===0)return this;o!==1&&(e/=o,n/=o,i/=o),a*=im;let s=Math.cos(a),l=Math.sin(a),c=1-s,u=c*e,d=c*n;return this._values=vo([u*e+s,u*n+l*i,u*i-l*n,0,u*n-l*i,d*n+s,d*i+l*e,0,u*i+l*n,d*i-l*e,c*i*i+s,0,0,0,0,1],this._values),(e!==0||n!==0)&&(this._is2D=!1),this}skewX(e){return rs(this._values).skewXSelf(e)}skewXSelf(e){if(typeof e!="number")return this;let n=Math.tan(e*im);return this._values=vo([1,0,0,0,n,1,0,0,0,0,1,0,0,0,0,1],this._values),this}skewY(e){return rs(this._values).skewYSelf(e)}skewYSelf(e){if(typeof e!="number")return this;let n=Math.tan(e*im);return this._values=vo([1,n,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this._values),this}flipX(){return rs(vo([-1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this._values))}flipY(){return rs(vo([1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],this._values))}inverse(){return rs(this._values).invertSelf()}invertSelf(){let e=this._values,n=e.map(a=>0);n[0]=e[5]*e[10]*e[15]-e[5]*e[11]*e[14]-e[9]*e[6]*e[15]+e[9]*e[7]*e[14]+e[13]*e[6]*e[11]-e[13]*e[7]*e[10],n[4]=-e[4]*e[10]*e[15]+e[4]*e[11]*e[14]+e[8]*e[6]*e[15]-e[8]*e[7]*e[14]-e[12]*e[6]*e[11]+e[12]*e[7]*e[10],n[8]=e[4]*e[9]*e[15]-e[4]*e[11]*e[13]-e[8]*e[5]*e[15]+e[8]*e[7]*e[13]+e[12]*e[5]*e[11]-e[12]*e[7]*e[9],n[12]=-e[4]*e[9]*e[14]+e[4]*e[10]*e[13]+e[8]*e[5]*e[14]-e[8]*e[6]*e[13]-e[12]*e[5]*e[10]+e[12]*e[6]*e[9];let i=e[0]*n[0]+e[1]*n[4]+e[2]*n[8]+e[3]*n[12];return i===0?(this._values=e.map(a=>NaN),this._is2D=!1,this):(n[1]=-e[1]*e[10]*e[15]+e[1]*e[11]*e[14]+e[9]*e[2]*e[15]-e[9]*e[3]*e[14]-e[13]*e[2]*e[11]+e[13]*e[3]*e[10],n[5]=e[0]*e[10]*e[15]-e[0]*e[11]*e[14]-e[8]*e[2]*e[15]+e[8]*e[3]*e[14]+e[12]*e[2]*e[11]-e[12]*e[3]*e[10],n[9]=-e[0]*e[9]*e[15]+e[0]*e[11]*e[13]+e[8]*e[1]*e[15]-e[8]*e[3]*e[13]-e[12]*e[1]*e[11]+e[12]*e[3]*e[9],n[13]=e[0]*e[9]*e[14]-e[0]*e[10]*e[13]-e[8]*e[1]*e[14]+e[8]*e[2]*e[13]+e[12]*e[1]*e[10]-e[12]*e[2]*e[9],n[2]=e[1]*e[6]*e[15]-e[1]*e[7]*e[14]-e[5]*e[2]*e[15]+e[5]*e[3]*e[14]+e[13]*e[2]*e[7]-e[13]*e[3]*e[6],n[6]=-e[0]*e[6]*e[15]+e[0]*e[7]*e[14]+e[4]*e[2]*e[15]-e[4]*e[3]*e[14]-e[12]*e[2]*e[7]+e[12]*e[3]*e[6],n[10]=e[0]*e[5]*e[15]-e[0]*e[7]*e[13]-e[4]*e[1]*e[15]+e[4]*e[3]*e[13]+e[12]*e[1]*e[7]-e[12]*e[3]*e[5],n[14]=-e[0]*e[5]*e[14]+e[0]*e[6]*e[13]+e[4]*e[1]*e[14]-e[4]*e[2]*e[13]-e[12]*e[1]*e[6]+e[12]*e[2]*e[5],n[3]=-e[1]*e[6]*e[11]+e[1]*e[7]*e[10]+e[5]*e[2]*e[11]-e[5]*e[3]*e[10]-e[9]*e[2]*e[7]+e[9]*e[3]*e[6],n[7]=e[0]*e[6]*e[11]-e[0]*e[7]*e[10]-e[4]*e[2]*e[11]+e[4]*e[3]*e[10]+e[8]*e[2]*e[7]-e[8]*e[3]*e[6],n[11]=-e[0]*e[5]*e[11]+e[0]*e[7]*e[9]+e[4]*e[1]*e[11]-e[4]*e[3]*e[9]-e[8]*e[1]*e[7]+e[8]*e[3]*e[5],n[15]=e[0]*e[5]*e[10]-e[0]*e[6]*e[9]-e[4]*e[1]*e[10]+e[4]*e[2]*e[9]+e[8]*e[1]*e[6]-e[8]*e[2]*e[5],n.forEach((a,o)=>{n[o]=a/i}),this._values=n,this)}setMatrixValue(e){let n=new ns(e);return this._values=n._values,this._is2D=n._is2D,this}transformPoint(e){e=new N3(e);let n=e.x,i=e.y,a=e.z,o=e.w,s=this._values,l=s[am]*n+s[sm]*i+s[y3]*a+s[um]*o,c=s[om]*n+s[lm]*i+s[x3]*a+s[dm]*o,u=s[g3]*n+s[E3]*i+s[cm]*a+s[S3]*o,d=s[_3]*n+s[v3]*i+s[b3]*a+s[fm]*o;return new N3(l,c,u,d)}toFloat32Array(){return Float32Array.from(this._values)}toFloat64Array(){return this._values.slice(0)}static fromMatrix(e){if(!(e instanceof ns))throw new TypeError("Expected DOMMatrix");return new ns(e._values)}static fromFloat32Array(e){if(!(e instanceof Float32Array))throw new TypeError("Expected Float32Array");return new ns(e)}static fromFloat64Array(e){if(!(e instanceof Float64Array))throw new TypeError("Expected Float64Array");return new ns(e)}[aTe.inspect.custom||"inspect"](e,n){return e<0?"[DOMMatrix]":`DOMMatrix [
      a: ${this.a}
      b: ${this.b}
      c: ${this.c}
      d: ${this.d}
      e: ${this.e}
      f: ${this.f}
      m11: ${this.m11}
      m12: ${this.m12}
      m13: ${this.m13}
      m14: ${this.m14}
      m21: ${this.m21}
      m22: ${this.m22}
      m23: ${this.m23}
      m23: ${this.m23}
      m31: ${this.m31}
      m32: ${this.m32}
      m33: ${this.m33}
      m34: ${this.m34}
      m41: ${this.m41}
      m42: ${this.m42}
      m43: ${this.m43}
      m44: ${this.m44}
      is2D: ${this.is2D}
      isIdentity: ${this.isIdentity} ]`}};function vi(t,e,n){if(typeof n!="number")throw new TypeError("Expected number");return t._values[e]=n}function Gn(t,e,n){if(typeof n!="number")throw new TypeError("Expected number");return e===cm||e===fm?n!==1&&(t._is2D=!1):n!==0&&(t._is2D=!1),t._values[e]=n}Object.defineProperties(ns.prototype,{m11:{get(){return this._values[am]},set(t){return vi(this,am,t)}},m12:{get(){return this._values[om]},set(t){return vi(this,om,t)}},m13:{get(){return this._values[g3]},set(t){return Gn(this,g3,t)}},m14:{get(){return this._values[_3]},set(t){return Gn(this,_3,t)}},m21:{get(){return this._values[sm]},set(t){return vi(this,sm,t)}},m22:{get(){return this._values[lm]},set(t){return vi(this,lm,t)}},m23:{get(){return this._values[E3]},set(t){return Gn(this,E3,t)}},m24:{get(){return this._values[v3]},set(t){return Gn(this,v3,t)}},m31:{get(){return this._values[y3]},set(t){return Gn(this,y3,t)}},m32:{get(){return this._values[x3]},set(t){return Gn(this,x3,t)}},m33:{get(){return this._values[cm]},set(t){return Gn(this,cm,t)}},m34:{get(){return this._values[b3]},set(t){return Gn(this,b3,t)}},m41:{get(){return this._values[um]},set(t){return vi(this,um,t)}},m42:{get(){return this._values[dm]},set(t){return vi(this,dm,t)}},m43:{get(){return this._values[S3]},set(t){return Gn(this,S3,t)}},m44:{get(){return this._values[fm]},set(t){return Gn(this,fm,t)}},a:{get(){return this.m11},set(t){return this.m11=t}},b:{get(){return this.m12},set(t){return this.m12=t}},c:{get(){return this.m21},set(t){return this.m21=t}},d:{get(){return this.m22},set(t){return this.m22=t}},e:{get(){return this.m41},set(t){return this.m41=t}},f:{get(){return this.m42},set(t){return this.m42=t}},is2D:{get(){return this._is2D}},isIdentity:{get(){let t=this._values;return t[am]===1&&t[om]===0&&t[g3]===0&&t[_3]===0&&t[sm]===0&&t[lm]===1&&t[E3]===0&&t[v3]===0&&t[y3]===0&&t[x3]===0&&t[cm]===1&&t[b3]===0&&t[um]===0&&t[dm]===0&&t[S3]===0&&t[fm]===1}}});function rs(t){let e=Object.create(ns.prototype);return e.constructor=ns,e._is2D=!0,e._values=t,e}function vo(t,e){let n=new Float64Array(16);for(let i=0;i<4;i++)for(let a=0;a<4;a++){let o=0;for(let s=0;s<4;s++)o+=t[i*4+s]*e[s*4+a];n[i*4+a]=o}return n}ute.exports={DOMMatrix:ns,DOMPoint:N3}});var tP=Ze((Axt,fte)=>{"use strict";var dte=nm(),uTe=eP(),{DOMMatrix:dTe}=f8();dte.CanvasRenderingContext2dInit(dTe,uTe);fte.exports=dte.CanvasRenderingContext2d});var nP=Ze((Txt,pte)=>{"use strict";var{Readable:fTe}=dr("stream");function pTe(){}var rP=class extends fTe{constructor(e,n){if(super(),n&&n.palette instanceof Uint8ClampedArray&&n.palette.length%4!==0)throw new Error("Palette length must be a multiple of 4.");this.canvas=e,this.options=n||{}}_read(){this._read=pTe,this.canvas.streamPNGSync((e,n,i)=>{e?this.emit("error",e):i?this.push(n):this.push(null)},this.options)}};pte.exports=rP});var aP=Ze((Cxt,hte)=>{"use strict";var{Readable:hTe}=dr("stream");function mTe(){}var iP=class extends hTe{constructor(e,n){super(),this.canvas=e,this.options=n}_read(){this._read=mTe,this.canvas.streamPDFSync((e,n,i)=>{e?this.emit("error",e):i?this.push(n):this.push(null)},this.options)}};hte.exports=iP});var sP=Ze((wxt,mte)=>{"use strict";var{Readable:gTe}=dr("stream");function _Te(){}var oP=class extends gTe{constructor(e,n){if(super(),e.streamJPEGSync===void 0)throw new Error("node-canvas was built without JPEG support.");this.options=n,this.canvas=e}_read(){this._read=_Te,this.canvas.streamJPEGSync(this.options,(e,n)=>{e?this.emit("error",e):n?this.push(n):this.push(null)})}};mte.exports=oP});var _te=Ze((Ixt,gte)=>{"use strict";var ETe=nm(),jc=gte.exports=ETe.Canvas,vTe=tP(),yTe=nP(),xTe=aP(),bTe=sP(),STe=["image/png","image/jpeg"],NTe=dr("util");jc.prototype[NTe.inspect.custom||"inspect"]=function(){return`[Canvas ${this.width}x${this.height}]`};jc.prototype.getContext=function(t,e){if(t=="2d"){let n=this._context2d||(this._context2d=new vTe(this,e));return this.context=n,n.canvas=this,n}};jc.prototype.pngStream=jc.prototype.createPNGStream=function(t){return new yTe(this,t)};jc.prototype.pdfStream=jc.prototype.createPDFStream=function(t){return new xTe(this,t)};jc.prototype.jpegStream=jc.prototype.createJPEGStream=function(t){return new bTe(this,t)};jc.prototype.toDataURL=function(t,e,n){let i="image/png",a={},o;if(typeof t=="function")o=t;else if(typeof t=="string"&&STe.includes(t.toLowerCase())&&(i=t.toLowerCase()),typeof e=="function")o=e;else if(typeof e=="object"?a=e:typeof e=="number"&&(a={quality:Math.max(0,Math.min(1,e))}),typeof n=="function")o=n;else if(n!==void 0)throw new TypeError(`${typeof n} is not a function`);if(this.width===0||this.height===0){let s="data:,";if(o){setTimeout(()=>o(null,s));return}else return s}if(o)this.toBuffer((s,l)=>{if(s)return o(s);o(null,`data:${i};base64,${l.toString("base64")}`)},i,a);else return`data:${i};base64,${this.toBuffer(i,a).toString("base64")}`}});var vte=Ze((Rxt,Ete)=>{Ete.exports=function(t,e){var n=[];t.on("data",function(i){n.push(i)}),t.once("end",function(){e&&e(null,Buffer.concat(n)),e=null}),t.once("error",function(i){e&&e(i),e=null})}});var xte=Ze((Pxt,yte)=>{"use strict";var ATe=["aborted","complete","destroy","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];yte.exports=(t,e)=>{let n=new Set(Object.keys(t).concat(ATe));for(let i of n)i in e||(e[i]=typeof t[i]=="function"?t[i].bind(t):t[i]);return e}});var Ste=Ze((Mxt,cP)=>{"use strict";var{PassThrough:TTe}=dr("stream"),lP=dr("zlib"),CTe=xte(),bte=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let n=e==="br";if(n&&typeof lP.createBrotliDecompress!="function")return t;let i=n?lP.createBrotliDecompress():lP.createUnzip(),a=new TTe;return CTe(t,a),i.on("error",o=>{if(o.code==="Z_BUF_ERROR"){a.end();return}a.emit("error",o)}),t.pipe(i).pipe(a),a};cP.exports=bte;cP.exports.default=bte});var Tte=Ze((Lxt,Ate)=>{Ate.exports=Nte;function Nte(t,e){if(t&&e)return Nte(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(i){n[i]=t[i]}),n;function n(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];var o=t.apply(this,i),s=i[i.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(l){o[l]=s[l]}),o}}});var Ite=Ze((Oxt,uP)=>{var Cte=Tte();uP.exports=Cte(p8);uP.exports.strict=Cte(wte);p8.proto=p8(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return p8(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return wte(this)},configurable:!0})});function p8(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function wte(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}});var Lte=Ze((Bxt,Mte)=>{Mte.exports=pm;var wTe=vte(),Rte=Ste(),ITe=dr("http"),RTe=dr("https"),PTe=Ite(),MTe=dr("querystring"),Pte=dr("url"),dP=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";function pm(t,e){if(t=Object.assign({maxRedirects:10},typeof t=="string"?{url:t}:t),e=PTe(e),t.url){let{hostname:l,port:c,protocol:u,auth:d,path:f}=Pte.parse(t.url);delete t.url,!l&&!c&&!u&&!d?t.path=f:Object.assign(t,{hostname:l,port:c,protocol:u,auth:d,path:f})}let n={"accept-encoding":"gzip, deflate"};t.headers&&Object.keys(t.headers).forEach(l=>n[l.toLowerCase()]=t.headers[l]),t.headers=n;let i;t.body?i=t.json&&!dP(t.body)?JSON.stringify(t.body):t.body:t.form&&(i=typeof t.form=="string"?t.form:MTe.stringify(t.form),t.headers["content-type"]="application/x-www-form-urlencoded"),i&&(t.method||(t.method="POST"),dP(i)||(t.headers["content-length"]=Buffer.byteLength(i)),t.json&&!t.form&&(t.headers["content-type"]="application/json")),delete t.body,delete t.form,t.json&&(t.headers.accept="application/json"),t.method&&(t.method=t.method.toUpperCase());let a=t.hostname,s=(t.protocol==="https:"?RTe:ITe).request(t,l=>{if(t.followRedirects!==!1&&l.statusCode>=300&&l.statusCode<400&&l.headers.location){t.url=l.headers.location,delete t.headers.host,l.resume();let u=Pte.parse(t.url).hostname;return u!==null&&u!==a&&(delete t.headers.cookie,delete t.headers.authorization),t.method==="POST"&&[301,302].includes(l.statusCode)&&(t.method="GET",delete t.headers["content-length"],delete t.headers["content-type"]),t.maxRedirects--===0?e(new Error("too many redirects")):pm(t,e)}let c=typeof Rte=="function"&&t.method!=="HEAD";e(null,c?Rte(l):l)});return s.on("timeout",()=>{s.abort(),e(new Error("Request timed out"))}),s.on("error",e),dP(i)?i.on("error",e).pipe(s):s.end(i),s}pm.concat=(t,e)=>pm(t,(n,i)=>{if(n)return e(n);wTe(i,(a,o)=>{if(a)return e(a);if(t.json)try{o=JSON.parse(o.toString())}catch(s){return e(s,i,o)}e(null,i,o)})});["get","post","put","patch","head","delete"].forEach(t=>{pm[t]=(e,n)=>(typeof e=="string"&&(e={url:e}),pm(Object.assign({method:t.toUpperCase()},e),n))})});var Fte=Ze((Dxt,Dte)=>{"use strict";var Ote=nm(),Bte=Dte.exports=Ote.Image,LTe=dr("util"),fP,{GetSource:OTe,SetSource:BTe}=Ote;Object.defineProperty(Bte.prototype,"src",{set(t){if(typeof t=="string")if(/^\s*data:/.test(t)){let e=t.indexOf(","),n=t.lastIndexOf("base64",e)!==-1,i=t.slice(e+1);h8(this,Buffer.from(i,n?"base64":"utf8"),t)}else if(/^\s*https?:\/\//.test(t)){let e=n=>{if(typeof this.onerror=="function")this.onerror(n);else throw n};fP||(fP=Lte()),fP.concat({url:t,headers:{"User-Agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36"}},(n,i,a)=>{if(n)return e(n);if(i.statusCode<200||i.statusCode>=300)return e(new Error(`Server responded with ${i.statusCode}`));h8(this,a)})}else h8(this,t);else Buffer.isBuffer(t)&&h8(this,t)},get(){return DTe(this)},configurable:!0});Bte.prototype[LTe.inspect.custom||"inspect"]=function(){return"[Image"+(this.complete?":"+this.width+"x"+this.height:"")+(this.src?" "+this.src:"")+(this.complete?" complete":"")+"]"};function DTe(t){return t._originalSource||OTe.call(t)}function h8(t,e,n){BTe.call(t,e),t._originalSource=n}});var Gte=Ze((Fxt,kte)=>{"use strict";var pP=nm(),{DOMMatrix:FTe}=f8();pP.CanvasPatternInit(FTe);kte.exports=pP.CanvasPattern;pP.CanvasPattern.prototype.toString=function(){return"[object CanvasPattern]"}});var Ute=Ze((kxt,kTe)=>{kTe.exports={name:"canvas",description:"Canvas graphics API backed by Cairo",version:"2.11.2",author:"TJ Holowaychuk <tj@learnboost.com>",main:"index.js",browser:"browser.js",contributors:["Nathan Rajlich <nathan@tootallnate.net>","Rod Vagg <r@va.gg>","Juriy Zaytsev <kangax@gmail.com>"],keywords:["canvas","graphic","graphics","pixman","cairo","image","images","pdf"],homepage:"https://github.com/Automattic/node-canvas",repository:"git://github.com/Automattic/node-canvas.git",scripts:{prebenchmark:"node-gyp build",benchmark:"node benchmarks/run.js",lint:"standard examples/*.js test/server.js test/public/*.js benchmarks/run.js lib/context2d.js util/has_lib.js browser.js index.js",test:"mocha test/*.test.js","pretest-server":"node-gyp build","test-server":"node test/server.js","generate-wpt":"node ./test/wpt/generate.js","test-wpt":"mocha test/wpt/generated/*.js",install:"node-pre-gyp install --fallback-to-build --update-binary",dtslint:"dtslint types"},binary:{module_name:"canvas",module_path:"build/Release",host:"https://github.com/Automattic/node-canvas/releases/download/",remote_path:"v{version}",package_name:"{module_name}-v{version}-{node_abi}-{platform}-{libc}-{arch}.tar.gz"},files:["binding.gyp","lib/","src/","util/","types/index.d.ts"],types:"types/index.d.ts",dependencies:{"@mapbox/node-pre-gyp":"^1.0.0",nan:"^2.17.0","simple-get":"^3.0.3"},devDependencies:{"@types/node":"^10.12.18","assert-rejects":"^1.0.0",dtslint:"^4.0.7",express:"^4.16.3","js-yaml":"^4.1.0",mocha:"^5.2.0",pixelmatch:"^4.0.2",standard:"^12.0.1",typescript:"^4.2.2"},engines:{node:">=6"},license:"MIT"}});var zte=Ze(Mr=>{var m8=_te(),Vte=Fte(),$te=tP(),GTe=Gte(),UTe=eP(),VTe=Ute(),Ds=nm(),$Te=dr("fs"),zTe=nP(),jTe=aP(),HTe=sP(),{DOMPoint:WTe,DOMMatrix:ZTe}=f8();function XTe(t,e,n){return new m8(t,e,n)}function qTe(t,e,n){return new Ds.ImageData(t,e,n)}function KTe(t){return new Promise((e,n)=>{let i=new Vte;function a(){i.onload=null,i.onerror=null}i.onload=()=>{a(),e(i)},i.onerror=o=>{a(),n(o)},i.src=t})}function YTe(t,e){return m8._registerFont($Te.realpathSync(t),e)}function JTe(){return m8._deregisterAllFonts()}Mr.Canvas=m8;Mr.Context2d=$te;Mr.CanvasRenderingContext2D=$te;Mr.CanvasGradient=Ds.CanvasGradient;Mr.CanvasPattern=GTe;Mr.Image=Vte;Mr.ImageData=Ds.ImageData;Mr.PNGStream=zTe;Mr.PDFStream=jTe;Mr.JPEGStream=HTe;Mr.DOMMatrix=ZTe;Mr.DOMPoint=WTe;Mr.registerFont=YTe;Mr.deregisterAllFonts=JTe;Mr.parseFont=UTe;Mr.createCanvas=XTe;Mr.createImageData=qTe;Mr.loadImage=KTe;Mr.backends=Ds.Backends;Mr.version=VTe.version;Mr.cairoVersion=Ds.cairoVersion;Mr.jpegVersion=Ds.jpegVersion;Mr.gifVersion=Ds.gifVersion?Ds.gifVersion.replace(/[^.\d]/g,""):void 0;Mr.freetypeVersion=Ds.freetypeVersion;Mr.rsvgVersion=Ds.rsvgVersion;Mr.pangoVersion=Ds.pangoVersion});var Xce=Ze((WDt,Zce)=>{"use strict";Zce.exports=n$e;function n$e(t){for(var e=t.length,n=new Array(e),i=new Array(e),a=new Array(e),o=new Array(e),s=new Array(e),l=new Array(e),c=0;c<e;++c)n[c]=-1,i[c]=0,a[c]=!1,o[c]=0,s[c]=-1,l[c]=[];var u=0,d=[],f=[];function p(E){var v=[E],y=[E];for(n[E]=i[E]=u,a[E]=!0,u+=1;y.length>0;){E=y[y.length-1];var x=t[E];if(o[E]<x.length){for(var S=o[E];S<x.length;++S){var N=x[S];if(n[N]<0){n[N]=i[N]=u,a[N]=!0,u+=1,v.push(N),y.push(N);break}else a[N]&&(i[E]=Math.min(i[E],i[N])|0);s[N]>=0&&l[E].push(s[N])}o[E]=S}else{if(i[E]===n[E]){for(var w=[],T=[],I=0,S=v.length-1;S>=0;--S){var R=v[S];if(a[R]=!1,w.push(R),T.push(l[R]),I+=l[R].length,s[R]=d.length,R===E){v.length=S;break}}d.push(w);for(var L=new Array(I),S=0;S<T.length;S++)for(var O=0;O<T[S].length;O++)L[--I]=T[S][O];f.push(L)}y.pop()}}}for(var c=0;c<e;++c)n[c]<0&&p(c);for(var h,c=0;c<f.length;c++){var m=f[c];if(m.length!==0){m.sort(function(v,y){return v-y}),h=[m[0]];for(var _=1;_<m.length;_++)m[_]!==m[_-1]&&h.push(m[_]);f[c]=h}}return{components:d,adjacencyList:f}}});var Kce=Ze((ZDt,qce)=>{var i$e=Xce();qce.exports=function(e,n){var i=[],a=[],o=[],s={},l=[],c;function u(x){o[x]=!1,s.hasOwnProperty(x)&&Object.keys(s[x]).forEach(function(S){delete s[x][S],o[S]&&u(S)})}function d(x){var S=!1;a.push(x),o[x]=!0;var N,w;for(N=0;N<l[x].length;N++)w=l[x][N],w===c?(f(c,a),S=!0):o[w]||(S=d(w));if(S)u(x);else for(N=0;N<l[x].length;N++){w=l[x][N];var T=s[w];T||(T={},s[w]=T),T[w]=!0}return a.pop(),S}function f(x,S){var N=[].concat(S).concat(x);n?n(N):i.push(N)}function p(x){for(var S=0;S<e.length;S++)(S<x||!e[S])&&(e[S]=[]),e[S]=e[S].filter(function(N){return N>=x})}function h(x){p(x);for(var S=e,N=i$e(S),w=N.components.filter(function(U){return U.length>1}),T=1/0,I,R=0;R<w.length;R++)for(var L=0;L<w[R].length;L++)w[R][L]<T&&(T=w[R][L],I=R);var O=w[I];if(!O)return!1;var H=e.map(function(U,X){return O.indexOf(X)===-1?[]:U.filter(function(W){return O.indexOf(W)!==-1})});return{leastVertex:T,adjList:H}}c=0;for(var m=e.length;c<m;){var _=h(c);if(c=_.leastVertex,l=_.adjList,l){for(var E=0;E<l.length;E++)for(var v=0;v<l[E].length;v++){var y=l[E][v];o[+y]=!1,s[y]={}}d(c),c=c+1}else c=m}if(!n)return i}});var Qje={};mr(Qje,{Viewport:()=>RS});function sa(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var al={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document},Kpe=al.self||al.window||al.global||{},Ype=al.window||al.self||al.global||{},Jpe=al.global||al.self||al.window||{},Qpe=al.document||{};var ic=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser);var cG=typeof process!="undefined"&&process.version&&/v([0-9]*)/.exec(process.version),e1e=cG&&parseFloat(cG[1])||0;var uG="3.4.13";function si(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}var ol={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document},aHe=ol.self||ol.window||ol.global||{},oHe=ol.window||ol.self||ol.global||{},fG=ol.global||ol.self||ol.window||{},sHe=ol.document||{};var la=typeof process!="object"||String(process)!=="[object process]"||process.browser,$g=typeof importScripts=="function",pG=typeof window!="undefined"&&typeof window.orientation!="undefined",dG=typeof process!="undefined"&&process.version&&/v([0-9]*)/.exec(process.version),lHe=dG&&parseFloat(dG[1])||0;function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function hG(t,e){if(Af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(Af(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mG(t){var e=hG(t,"string");return Af(e)=="symbol"?e:e+""}function A(t,e,n){return(e=mG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zg=class{constructor(e,n){A(this,"name",void 0),A(this,"workerThread",void 0),A(this,"isRunning",!0),A(this,"result",void 0),A(this,"_resolve",()=>{}),A(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,a)=>{this._resolve=i,this._reject=a})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){si(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){si(this.isRunning),this.isRunning=!1,this._reject(e)}};var lh={};mr(lh,{NodeWorker:()=>jg});var gG=Ma(dr("worker_threads"));t4(lh,dr("worker_threads"));var jg=gG.Worker;var TN=new Map;function _G(t){si(t.source&&!t.url||!t.source&&t.url);let e=TN.get(t.source||t.url);return e||(t.url&&(e=t1e(t.url),TN.set(t.url,e)),t.source&&(e=EG(t.source),TN.set(t.source,e))),si(e),e}function t1e(t){if(!t.startsWith("http"))return t;let e=r1e(t);return EG(e)}function EG(t){let e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function r1e(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function CN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0,i=n||new Set;if(t){if(vG(t))i.add(t);else if(vG(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(let a in t)CN(t[a],e,i)}}return n===void 0?Array.from(i):[]}function vG(t){return t?t instanceof ArrayBuffer||typeof MessagePort!="undefined"&&t instanceof MessagePort||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas:!1}var wN=()=>{},Eu=class{static isSupported(){return typeof Worker!="undefined"&&la||typeof jg!="undefined"&&!la}constructor(e){A(this,"name",void 0),A(this,"source",void 0),A(this,"url",void 0),A(this,"terminated",!1),A(this,"worker",void 0),A(this,"onMessage",void 0),A(this,"onError",void 0),A(this,"_loadableURL","");let{name:n,source:i,url:a}=e;si(i||a),this.name=n,this.source=i,this.url=a,this.onMessage=wN,this.onError=o=>console.log(o),this.worker=la?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=wN,this.onError=wN,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||CN(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=_G({source:this.source,url:this.url});let e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){let i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new jg(i,{eval:!1})}else if(this.source)e=new jg(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}};var Hg=class{static isSupported(){return Eu.isSupported()}constructor(e){A(this,"name","unnamed"),A(this,"source",void 0),A(this,"url",void 0),A(this,"maxConcurrency",1),A(this,"maxMobileConcurrency",1),A(this,"onDebug",()=>{}),A(this,"reuseWorkers",!0),A(this,"props",{}),A(this,"jobQueue",[]),A(this,"idleQueue",[]),A(this,"count",0),A(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(o,s,l)=>o.done(l),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(o,s)=>o.error(s),a=new Promise(o=>(this.jobQueue.push({name:e,onMessage:n,onError:i,onStart:o}),this));return this._startQueuedJob(),await a}async _startQueuedJob(){if(!this.jobQueue.length)return;let e=this._getAvailableWorker();if(!e)return;let n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});let i=new zg(n.name,e);e.onMessage=a=>n.onMessage(i,a.type,a.payload),e.onError=a=>n.onError(i,a),n.onStart(i);try{await i.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;let e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Eu({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return pG?this.maxMobileConcurrency:this.maxConcurrency}};var n1e={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},La=class{static isSupported(){return Eu.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return La._workerFarm=La._workerFarm||new La({}),La._workerFarm.setProps(e),La._workerFarm}constructor(e){A(this,"props",void 0),A(this,"workerPools",new Map),this.props={...n1e},this.setProps(e),this.workerPools=new Map}destroy(){for(let e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(let n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){let{name:n,source:i,url:a}=e,o=this.workerPools.get(n);return o||(o=new Hg({name:n,source:i,url:a}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};A(La,"_workerFarm",void 0);var i1e="latest";function IN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e[t.id]||{},i="".concat(t.id,"-worker.js"),a=n.workerUrl;if(!a&&t.id==="compression"&&(a=e.workerUrl),e._workerType==="test"&&(a="modules/".concat(t.module,"/dist/").concat(i)),!a){let o=t.version;o==="latest"&&(o=i1e);let s=o?"@".concat(o):"";a="https://unpkg.com/@loaders.gl/".concat(t.module).concat(s,"/dist/").concat(i)}return si(a),a}function RN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uG;si(t,"no worker provided");let n=t.version;return!(!e||!n)}var MN={};mr(MN,{requireFromFile:()=>n4,requireFromString:()=>Wg});var PN=Ma(dr("module")),yG=Ma(dr("path"));async function n4(t){if(t.startsWith("http")){let n=await(await fetch(t)).text();return Wg(n)}return t.startsWith("/")||(t="".concat(process.cwd(),"/").concat(t)),dr(t)}function Wg(t){var e,n;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;if(typeof i=="object"&&(a=i,i=""),typeof t!="string")throw new Error("code must be a string, not ".concat(typeof t));let o=PN.default._nodeModulePaths(yG.default.dirname(i)),s=module.parent,l=new PN.default(i,s);return l.filename=i,l.paths=[].concat(((e=a)===null||e===void 0?void 0:e.prependPaths)||[]).concat(o).concat(((n=a)===null||n===void 0?void 0:n.appendPaths)||[]),l._compile(t,i),s&&s.children&&s.children.splice(s.children.indexOf(l),1),l.exports}var a1e="3.4.13",LN={};async function sl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e&&(t=xG(t,e,n)),LN[t]=LN[t]||o1e(t),await LN[t]}function xG(t,e,n){if(t.startsWith("http"))return t;let i=n.modules||{};return i[t]?i[t]:la?n.CDN?(si(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(a1e,"/dist/libs/").concat(t)):$g?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}async function o1e(t){if(t.endsWith("wasm"))return await(await fetch(t)).arrayBuffer();if(!la)try{return MN&&n4&&await n4(t)}catch(i){return null}if($g)return importScripts(t);let n=await(await fetch(t)).text();return s1e(n,t)}function s1e(t,e){if(!la)return Wg&&Wg(t,e);if($g)return eval.call(fG,t),null;let n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch(i){n.text=t}return document.body.appendChild(n),null}function ON(t,e){return!La.isSupported()||!la&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function BN(t,e,n,i,a){let o=t.id,s=IN(t,n),c=La.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));let u=await c.startJob("process-on-worker",l1e.bind(null,a));return u.postMessage("process",{input:e,options:n,context:i}),await(await u.result).result}async function l1e(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":let{id:a,input:o,options:s}=i;try{let l=await t(o,s);e.postMessage("done",{id:a,result:l})}catch(l){let c=l instanceof Error?l.message:"unknown error";e.postMessage("error",{id:a,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function SG(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?bG(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?bG(t,0,e):""}function bG(t,e,n){if(t.byteLength<=e+n)return"";let i=new DataView(t),a="";for(let o=0;o<n;o++)a+=String.fromCharCode(i.getUint8(e+o));return a}function DN(t){try{return JSON.parse(t)}catch(e){throw new Error('Failed to parse JSON from data starting with "'.concat(SG(t),'"'))}}function FN(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;let i=new Uint8Array(t),a=new Uint8Array(e);for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}function kN(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let i=e.map(l=>l instanceof ArrayBuffer?new Uint8Array(l):l),a=i.reduce((l,c)=>l+c.byteLength,0),o=new Uint8Array(a),s=0;for(let l of i)o.set(l,s),s+=l.byteLength;return o.buffer}function Zg(t,e,n){let i=n!==void 0?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function vu(t,e){return sa(t>=0),sa(e>0),t+(e-1)&~(e-1)}function GN(t,e,n){let i;if(t instanceof ArrayBuffer)i=new Uint8Array(t);else{let a=t.byteOffset,o=t.byteLength;i=new Uint8Array(t.buffer||t.arrayBuffer,a,o)}return e.set(i,n),n+vu(i.byteLength,4)}async function UN(t){let e=[];for await(let n of t)e.push(n);return kN(...e)}var c1e="",NG={};function VN(t){for(let e in NG)if(t.startsWith(e)){let n=NG[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(c1e).concat(t)),t}function AG(t){return Buffer.isBuffer(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function TG(t){return t&&typeof t=="object"&&t.isBuffer}function i4(t){if(TG(t))return AG(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){let e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}var Tf={};mr(Tf,{dirname:()=>f1e,filename:()=>d1e,join:()=>p1e,resolve:()=>h1e});function CG(){var t;if(typeof process!="undefined"&&typeof process.cwd!="undefined")return process.cwd();let e=(t=window.location)===null||t===void 0?void 0:t.pathname;return(e==null?void 0:e.slice(0,e.lastIndexOf("/")+1))||""}function d1e(t){let e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function f1e(t){let e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}function p1e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let i="/";return e=e.map((a,o)=>(o&&(a=a.replace(new RegExp("^".concat(i)),"")),o!==e.length-1&&(a=a.replace(new RegExp("".concat(i,"$")),"")),a)),e.join(i)}function h1e(){let t=[];for(let a=0;a<arguments.length;a++)t[a]=a<0||arguments.length<=a?void 0:arguments[a];let e="",n=!1,i;for(let a=t.length-1;a>=-1&&!n;a--){let o;a>=0?o=t[a]:(i===void 0&&(i=CG()),o=i),o.length!==0&&(e="".concat(o,"/").concat(e),n=o.charCodeAt(0)===Xg)}return e=m1e(e,!n),n?"/".concat(e):e.length>0?e:"."}var Xg=47,$N=46;function m1e(t,e){let n="",i=-1,a=0,o,s=!1;for(let l=0;l<=t.length;++l){if(l<t.length)o=t.charCodeAt(l);else{if(o===Xg)break;o=Xg}if(o===Xg){if(!(i===l-1||a===1))if(i!==l-1&&a===2){if(n.length<2||!s||n.charCodeAt(n.length-1)!==$N||n.charCodeAt(n.length-2)!==$N){if(n.length>2){let c=n.length-1,u=c;for(;u>=0&&n.charCodeAt(u)!==Xg;--u);if(u!==c){n=u===-1?"":n.slice(0,u),i=l,a=0,s=!1;continue}}else if(n.length===2||n.length===1){n="",i=l,a=0,s=!1;continue}}e&&(n.length>0?n+="/..":n="..",s=!0)}else{let c=t.slice(i+1,l);n.length>0?n+="/".concat(c):n=c,s=!1}i=l,a=0}else o===$N&&a!==-1?++a:a=-1}return n}var g1e=t=>typeof t=="boolean",qg=t=>typeof t=="function",Cf=t=>t!==null&&typeof t=="object",zN=t=>Cf(t)&&t.constructor==={}.constructor;var wG=t=>t&&typeof t[Symbol.iterator]=="function",IG=t=>t&&typeof t[Symbol.asyncIterator]=="function";var Io=t=>typeof Response!="undefined"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json;var Ro=t=>typeof Blob!="undefined"&&t instanceof Blob,RG=t=>t&&typeof t=="object"&&t.isBuffer;var _1e=t=>typeof ReadableStream!="undefined"&&t instanceof ReadableStream||Cf(t)&&qg(t.tee)&&qg(t.cancel)&&qg(t.getReader);var E1e=t=>Cf(t)&&qg(t.read)&&qg(t.pipe)&&g1e(t.readable),a4=t=>_1e(t)||E1e(t);var v1e=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,y1e=/^([-\w.]+\/[-\w.+]+)/;function PG(t){let e=y1e.exec(t);return e?e[1]:t}function jN(t){let e=v1e.exec(t);return e?e[1]:""}var MG=/\?.*/;function LG(t){let e=t.match(MG);return e&&e[0]}function ch(t){return t.replace(MG,"")}function wf(t){return Io(t)?t.url:Ro(t)?t.name||"":typeof t=="string"?t:""}function Kg(t){if(Io(t)){let e=t,n=e.headers.get("content-type")||"",i=ch(e.url);return PG(n)||jN(i)}return Ro(t)?t.type||"":typeof t=="string"?jN(t):""}function OG(t){return Io(t)?t.headers["content-length"]||-1:Ro(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function o4(t){if(Io(t))return t;let e={},n=OG(t);n>=0&&(e["content-length"]=String(n));let i=wf(t),a=Kg(t);a&&(e["content-type"]=a);let o=await b1e(t);o&&(e["x-first-bytes"]=o),typeof t=="string"&&(t=new TextEncoder().encode(t));let s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}async function BG(t){if(!t.ok){let e=await x1e(t);throw new Error(e)}}async function x1e(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{let n=t.headers.get("Content-Type"),i=t.statusText;n.includes("application/json")&&(i+=" ".concat(await t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch(n){}return e}async function b1e(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){let n=t.slice(0,5);return await new Promise(i=>{let a=new FileReader;a.onload=o=>{var s;return i(o==null||(s=o.target)===null||s===void 0?void 0:s.result)},a.readAsDataURL(n)})}if(t instanceof ArrayBuffer){let n=t.slice(0,5),i=S1e(n);return"data:base64,".concat(i)}return null}function S1e(t){let e="",n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}async function HN(t,e){if(typeof t=="string"){t=VN(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await o4(t)}var s4=globalThis,N1e=globalThis.document||{},l4=globalThis.process||{},A1e=globalThis.console,qWe=globalThis.navigator||{};function DG(t){var i,a;if(typeof window!="undefined"&&((i=window.process)==null?void 0:i.type)==="renderer"||typeof process!="undefined"&&((a=process.versions)!=null&&a.electron))return!0;let e=typeof navigator!="undefined"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function If(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||DG()}var WN="4.0.7";function C1e(t){try{let e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(e){return null}}var c4=class{constructor(e,n,i="sessionStorage"){this.storage=C1e(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){let n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){let n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function FG(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function kG(t,e=8){let n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}var u4;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(u4||(u4={}));var w1e=10;function GG(t){return typeof t!="string"?t:(t=t.toUpperCase(),u4[t]||u4.WHITE)}function UG(t,e,n){return!If&&typeof t=="string"&&(e&&(t=`\x1B[${GG(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${GG(n)+w1e}m${t}\x1B[49m`)),t}function VG(t,e=["constructor"]){let n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),a=t;for(let o of i){let s=a[o];typeof s=="function"&&(e.find(l=>o===l)||(a[o]=s.bind(t)))}}function Yg(t,e){if(!t)throw new Error(e||"Assertion failed")}function Rf(){var e,n,i,a,o;let t;if(If()&&s4.performance)t=(i=(n=(e=s4)==null?void 0:e.performance)==null?void 0:n.now)==null?void 0:i.call(n);else if("hrtime"in l4){let s=(o=(a=l4)==null?void 0:a.hrtime)==null?void 0:o.call(a);t=s[0]*1e3+s[1]/1e6}else t=Date.now();return t}var uh={debug:If()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},I1e={enabled:!0,level:0};function dh(){}var $G={},zG={once:!0},ll=class{constructor({id:e}={id:""}){this.VERSION=WN,this._startTs=Rf(),this._deltaTs=Rf(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new c4(`__probe-${this.id}__`,I1e),this.timeStamp(`${this.id} started`),VG(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Rf()-this._startTs).toPrecision(10))}getDelta(){return Number((Rf()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){if(!e)throw new Error(n||"Assertion failed")}warn(e){return this._getLogFunction(0,e,uh.warn,arguments,zG)}error(e){return this._getLogFunction(0,e,uh.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,uh.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,uh.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,uh.debug||uh.info,arguments,zG)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||dh,i&&[i],{tag:P1e(n)}):dh}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||dh)}group(e,n,i={collapsed:!1}){let a=jG({logLevel:e,message:n,opts:i}),{collapsed:o}=i;return a.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(a)}groupCollapsed(e,n,i={}){return this.group(e,n,Object.assign({},i,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||dh)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=HG(e)}_getLogFunction(e,n,i,a,o){if(this._shouldLog(e)){o=jG({logLevel:e,message:n,args:a,opts:o}),i=i||o.method,Yg(i),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Rf();let s=o.tag||o.message;if(o.once&&s)if(!$G[s])$G[s]=Rf();else return dh;return n=R1e(this.id,o.message,o),i.bind(console,n,...o.args)}return dh}};ll.VERSION=WN;function HG(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Yg(Number.isFinite(e)&&e>=0),e}function jG(t){let{logLevel:e,message:n}=t;t.logLevel=HG(e);let i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break;default:}typeof t.message=="function"&&(t.message=t.message());let a=typeof t.message;return Yg(a==="string"||a==="object"),Object.assign(t,{args:i},t.opts)}function R1e(t,e,n){if(typeof e=="string"){let i=n.time?kG(FG(n.total)):"";e=n.time?`${t}: ${i}  ${e}`:`${t}: ${e}`,e=UG(e,n.color,n.background)}return e}function P1e(t){for(let e in t)for(let n in t[e])return n||"untitled";return"empty"}globalThis.probe={};var yZe=new ll({id:"@probe.gl/log"});var ZN=new ll({id:"loaders.gl"}),d4=class{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}},f4=class{constructor(){A(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.console.error.bind(this.console,...n)}};var XN={fetch:null,mimeType:void 0,nothrow:!1,log:new f4,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:ic,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},WG={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function qN(){globalThis.loaders=globalThis.loaders||{};let{loaders:t}=globalThis;return t._state=t._state||{},t._state}var KN=()=>{let t=qN();return t.globalOptions=t.globalOptions||{...XN},t.globalOptions};function qG(t,e,n,i){return n=n||[],n=Array.isArray(n)?n:[n],M1e(t,n),O1e(e,t,i)}function M1e(t,e){ZG(t,null,XN,WG,e);for(let n of e){let i=t&&t[n.id]||{},a=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};ZG(i,n.id,a,o,e)}}function ZG(t,e,n,i,a){let o=e||"Top level",s=e?"".concat(e,"."):"";for(let l in t){let c=!e&&Cf(t[l]),u=l==="baseUri"&&!e,d=l==="workerUrl"&&e;if(!(l in n)&&!u&&!d){if(l in i)ZN.warn("".concat(o," loader option '").concat(s).concat(l,"' no longer supported, use '").concat(i[l],"'"))();else if(!c){let f=L1e(l,a);ZN.warn("".concat(o," loader option '").concat(s).concat(l,"' not recognized. ").concat(f))()}}}}function L1e(t,e){let n=t.toLowerCase(),i="";for(let a of e)for(let o in a.options){if(t===o)return"Did you mean '".concat(a.id,".").concat(o,"'?");let s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(i=i||"Did you mean '".concat(a.id,".").concat(o,"'?"))}return i}function O1e(t,e,n){let a={...t.options||{}};return B1e(a,n),a.log===null&&(a.log=new d4),XG(a,KN()),XG(a,e),a}function XG(t,e){for(let n in e)if(n in e){let i=e[n];zN(i)&&zN(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function B1e(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Jg(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function Qg(t){var e,n;sa(t,"null loader"),sa(Jg(t),"invalid loader");let i;return Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}var KG=()=>{let t=qN();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function YN(t){let e=KG();t=Array.isArray(t)?t:[t];for(let n of t){let i=Qg(n);e.find(a=>i===a)||e.unshift(i)}}function YG(){return KG()}var JG=new ll({id:"loaders.gl"});var D1e=/\.([^.]+)$/;async function tU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!rU(t))return null;let a=QG(t,e,{...n,nothrow:!0},i);if(a)return a;if(Ro(t)&&(t=await t.slice(0,10).arrayBuffer(),a=QG(t,e,n,i)),!a&&!(n!=null&&n.nothrow))throw new Error(nU(t));return a}function QG(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!rU(t))return null;if(e&&!Array.isArray(e))return Qg(e);let a=[];e&&(a=a.concat(e)),n!=null&&n.ignoreRegisteredLoaders||a.push(...YG()),k1e(a);let o=F1e(t,a,n,i);if(!o&&!(n!=null&&n.nothrow))throw new Error(nU(t));return o}function F1e(t,e,n,i){let a=wf(t),o=Kg(t),s=ch(a)||(i==null?void 0:i.url),l=null,c="";if(n!=null&&n.mimeType&&(l=JN(e,n==null?void 0:n.mimeType),c="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),l=l||G1e(e,s),c=c||(l?"matched url ".concat(s):""),l=l||JN(e,o),c=c||(l?"matched MIME type ".concat(o):""),l=l||V1e(e,t),c=c||(l?"matched initial data ".concat(iU(t)):""),l=l||JN(e,n==null?void 0:n.fallbackMimeType),c=c||(l?"matched fallback MIME type ".concat(o):""),c){var u;JG.log(1,"selectLoader selected ".concat((u=l)===null||u===void 0?void 0:u.name,": ").concat(c,"."))}return l}function rU(t){return!(t instanceof Response&&t.status===204)}function nU(t){let e=wf(t),n=Kg(t),i="No valid loader found (";i+=e?"".concat(Tf.filename(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");let a=t?iU(t):"";return i+=a?' first bytes: "'.concat(a,'"'):"first bytes: not available",i+=")",i}function k1e(t){for(let e of t)Qg(e)}function G1e(t,e){let n=e&&D1e.exec(e),i=n&&n[1];return i?U1e(t,i):null}function U1e(t,e){e=e.toLowerCase();for(let n of t)for(let i of n.extensions)if(i.toLowerCase()===e)return n;return null}function JN(t,e){for(let n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function V1e(t,e){if(!e)return null;for(let n of t)if(typeof e=="string"){if($1e(e,n))return n}else if(ArrayBuffer.isView(e)){if(eU(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&eU(e,0,n))return n;return null}function $1e(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function eU(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(a=>z1e(t,e,n,a))}function z1e(t,e,n,i){if(i instanceof ArrayBuffer)return FN(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":let a=QN(t,e,i.length);return i===a;default:return!1}}function iU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?QN(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?QN(t,0,e):""}function QN(t,e,n){if(t.byteLength<e+n)return"";let i=new DataView(t),a="";for(let o=0;o<n;o++)a+=String.fromCharCode(i.getUint8(e+o));return a}function*aU(t,e){let n=(e==null?void 0:e.chunkSize)||262144,i=0,a=new TextEncoder;for(;i<t.length;){let o=Math.min(t.length-i,n),s=t.slice(i,i+o);i+=o,yield a.encode(s)}}function oU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){let{chunkSize:n=262144}=e,i=0;for(;i<t.byteLength;){let a=Math.min(t.byteLength-i,n),o=new ArrayBuffer(a),s=new Uint8Array(t,i,a);new Uint8Array(o).set(s),i+=a,yield o}}()}async function*sU(t,e){let n=(e==null?void 0:e.chunkSize)||1048576,i=0;for(;i<t.size;){let a=i+n,o=await t.slice(i,a).arrayBuffer();i=a,yield o}}function eA(t,e){return ic?j1e(t,e):H1e(t,e)}async function*j1e(t,e){let n=t.getReader(),i;try{for(;;){let a=i||n.read();e!=null&&e._streamReadAhead&&(i=n.read());let{done:o,value:s}=await a;if(o)return;yield i4(s)}}catch(a){n.releaseLock()}}async function*H1e(t,e){for await(let n of t)yield i4(n)}function lU(t,e){if(typeof t=="string")return aU(t,e);if(t instanceof ArrayBuffer)return oU(t,e);if(Ro(t))return sU(t,e);if(a4(t))return eA(t,e);if(Io(t))return eA(t.body,e);throw new Error("makeIterator")}var cU="Cannot convert supplied data type";function W1e(t,e,n){if(e.text&&typeof t=="string")return t;if(RG(t)&&(t=t.buffer),t instanceof ArrayBuffer){let i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer,a=t.byteLength||t.length;return(t.byteOffset!==0||a!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+a)),i}throw new Error(cU)}async function uU(t,e,n){let i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||i)return W1e(t,e,n);if(Ro(t)&&(t=await o4(t)),Io(t)){let a=t;return await BG(a),e.binary?await a.arrayBuffer():await a.text()}if(a4(t)&&(t=lU(t,n)),wG(t)||IG(t))return UN(t);throw new Error(cU)}function p4(t,e){let n=KN(),i=t||n;return typeof i.fetch=="function"?i.fetch:Cf(i.fetch)?a=>HN(a,i):e!=null&&e.fetch?e==null?void 0:e.fetch:HN}function dU(t,e,n){if(n)return n;let i={fetch:p4(e,t),...t};if(i.url){let a=ch(i.url);i.baseUrl=a,i.queryString=LG(i.url),i.filename=Tf.filename(a),i.baseUrl=Tf.dirname(a)}return Array.isArray(i.loaders)||(i.loaders=null),i}function fU(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){let i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}async function h4(t,e,n,i){si(!i||typeof i=="object"),e&&!Array.isArray(e)&&!Jg(e)&&(i=void 0,n=e,e=void 0),t=await t,n=n||{};let a=wf(t),s=fU(e,i),l=await tU(t,s,n);return l?(n=qG(n,l,s,a),i=dU({url:a,parse:h4,loaders:s},n,i||null),await Z1e(l,t,n,i)):null}async function Z1e(t,e,n,i){if(RN(t),Io(e)){let a=e,{ok:o,redirected:s,status:l,statusText:c,type:u,url:d}=a,f=Object.fromEntries(a.headers.entries());i.response={headers:f,ok:o,redirected:s,status:l,statusText:c,type:u,url:d}}if(e=await uU(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,i,t);if(ON(t,n))return await BN(t,e,n,i,h4);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,i,t);if(t.parse)return await t.parse(e,n,i,t);throw si(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function cl(t,e,n,i){!Array.isArray(e)&&!Jg(e)&&(i=void 0,n=e,e=void 0);let a=p4(n),o=t;return typeof t=="string"&&(o=await a(t)),Ro(t)&&(o=await a(t)),await h4(o,e,n)}var pU="3.4.13";var{_parseImageNode:X1e}=globalThis,tA=typeof Image!="undefined",rA=typeof ImageBitmap!="undefined",q1e=!!X1e,nA=ic?!0:q1e;function hU(t){switch(t){case"auto":return rA||tA||nA;case"imagebitmap":return rA;case"image":return tA;case"data":return nA;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function mU(){if(rA)return"imagebitmap";if(tA)return"image";if(nA)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function K1e(t){let e=Y1e(t);if(!e)throw new Error("Not an image");return e}function gU(t){switch(K1e(t)){case"data":return t;case"image":case"imagebitmap":let e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function Y1e(t){return typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap?"imagebitmap":typeof Image!="undefined"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}var J1e=/^data:image\/svg\+xml/,Q1e=/\.svg((\?|#).*)?$/;function m4(t){return t&&(J1e.test(t)||Q1e.test(t))}function _U(t,e){if(m4(e)){let i=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(i=unescape(encodeURIComponent(i)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return iA(t,e)}function iA(t,e){if(m4(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function e_(t,e,n){let i=_U(t,n),a=self.URL||self.webkitURL,o=typeof i!="string"&&a.createObjectURL(i);try{return await ehe(o||i,e)}finally{o&&a.revokeObjectURL(o)}}async function ehe(t,e){let n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((i,a)=>{try{n.onload=()=>i(n),n.onerror=o=>a(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){a(o)}})}var the={},EU=!0;async function aA(t,e,n){let i;m4(n)?i=await e_(t,e,n):i=iA(t,n);let a=e&&e.imagebitmap;return await rhe(i,a)}async function rhe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((nhe(e)||!EU)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),EU=!1}return await createImageBitmap(t)}function nhe(t){for(let e in t||the)return!1;return!0}function vU(t){return!she(t,"ftyp",4)||!(t[8]&96)?null:ihe(t)}function ihe(t){switch(ahe(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function ahe(t,e,n){return String.fromCharCode(...t.slice(e,n))}function ohe(t){return[...t].map(e=>e.charCodeAt(0))}function she(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=ohe(e);for(let a=0;a<i.length;++a)if(i[a]!==t[a+n])return!1;return!0}var ul=!1,t_=!0;function Pf(t){let e=r_(t);return che(e)||fhe(e)||uhe(e)||dhe(e)||lhe(e)}function lhe(t){let e=new Uint8Array(t instanceof DataView?t.buffer:t),n=vU(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function che(t){let e=r_(t);return e.byteLength>=24&&e.getUint32(0,ul)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ul),height:e.getUint32(20,ul)}:null}function uhe(t){let e=r_(t);return e.byteLength>=10&&e.getUint32(0,ul)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,t_),height:e.getUint16(8,t_)}:null}function dhe(t){let e=r_(t);return e.byteLength>=14&&e.getUint16(0,ul)===16973&&e.getUint32(2,t_)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,t_),height:e.getUint32(22,t_)}:null}function fhe(t){let e=r_(t);if(!(e.byteLength>=3&&e.getUint16(0,ul)===65496&&e.getUint8(2)===255))return null;let{tableMarkers:i,sofMarkers:a}=phe(),o=2;for(;o+9<e.byteLength;){let s=e.getUint16(o,ul);if(a.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,ul),width:e.getUint16(o+7,ul)};if(!i.has(s))return null;o+=2,o+=e.getUint16(o,ul)}return null}function phe(){let t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function r_(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function oA(t,e){let{mimeType:n}=Pf(t)||{},i=globalThis._parseImageNode;return sa(i),await i(t,n)}async function sA(t,e,n){e=e||{};let a=(e.image||{}).type||"auto",{url:o}=n||{},s=hhe(a),l;switch(s){case"imagebitmap":l=await aA(t,e,o);break;case"image":l=await e_(t,e,o);break;case"data":l=await oA(t,e);break;default:sa(!1)}return a==="data"&&(l=gU(l)),l}function hhe(t){switch(t){case"auto":case"data":return mU();default:return hU(t),t}}var mhe=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],ghe=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],_he={image:{type:"auto",decode:!0}},Mf={id:"image",module:"images",name:"Images",version:pU,mimeTypes:ghe,extensions:mhe,parse:sA,tests:[t=>!!Pf(new DataView(t))],options:_he};var lA={};function cA(t){if(lA[t]===void 0){let e=ic?vhe(t):Ehe(t);lA[t]=e}return lA[t]}function Ehe(t){let e=["image/png","image/jpeg","image/gif"],{_parseImageNode:n,_imageFormatsNode:i=e}=globalThis;return!!n&&i.includes(t)}function vhe(t){switch(t){case"image/avif":case"image/webp":return yhe(t);default:return!0}}function yhe(t){try{return document.createElement("canvas").toDataURL(t).indexOf("data:".concat(t))===0}catch(e){return!1}}function uA(t){if(typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&process.versions.electron)return!0;let e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function vs(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||uA()}var yu={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document,process:typeof process=="object"&&process};var xhe=yu.self||yu.window||yu.global,fh=yu.window||yu.self||yu.global,bhe=yu.document||{},Lf=yu.process||{};var g4=typeof __VERSION__!="undefined"?__VERSION__:"untranspiled source",bqe=vs();function She(t){try{let e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(e){return null}}var _4=class{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";A(this,"storage",void 0),A(this,"id",void 0),A(this,"config",void 0),this.storage=She(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){let n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){let n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function yU(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function xU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function E4(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,a=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));let o=t.width*n,s=t.height*n,l=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(a,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),l]}var v4;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(v4||(v4={}));function bU(t){return typeof t=="string"?v4[t.toUpperCase()]||v4.WHITE:t}function SU(t,e,n){return!vs&&typeof t=="string"&&(e&&(e=bU(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=bU(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function NU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(let a of i)typeof t[a]=="function"&&(e.find(o=>a===o)||(t[a]=t[a].bind(t)))}function ph(t,e){if(!t)throw new Error(e||"Assertion failed")}function Of(){let t;if(vs&&"performance"in fh){var e,n;t=fh===null||fh===void 0||(e=fh.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Lf){var i;let a=Lf===null||Lf===void 0||(i=Lf.hrtime)===null||i===void 0?void 0:i.call(Lf);t=a[0]*1e3+a[1]/1e6}else t=Date.now();return t}var hh={debug:vs&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Nhe={enabled:!0,level:0};function Po(){}var AU={},TU={once:!0},dl=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};A(this,"id",void 0),A(this,"VERSION",g4),A(this,"_startTs",Of()),A(this,"_deltaTs",Of()),A(this,"_storage",void 0),A(this,"userData",{}),A(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new _4("__probe-".concat(this.id,"__"),Nhe),this.timeStamp("".concat(this.id," started")),NU(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Of()-this._startTs).toPrecision(10))}getDelta(){return Number((Of()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){ph(e,n)}warn(e){return this._getLogFunction(0,e,hh.warn,arguments,TU)}error(e){return this._getLogFunction(0,e,hh.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,hh.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,hh.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];return this._getLogFunction(e,n,hh.debug||hh.info,arguments,TU)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||Po,i&&[i],{tag:whe(n)}):Po}image(e){let{logLevel:n,priority:i,image:a,message:o="",scale:s=1}=e;return this._shouldLog(n||i)?vs?Che({image:a,message:o,scale:s}):The({image:a,message:o,scale:s}):Po}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Po)}group(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},a=CU({logLevel:e,message:n,opts:i}),{collapsed:o}=i;return a.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(a)}groupCollapsed(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},i,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Po)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=wU(e)}_getLogFunction(e,n,i,a,o){if(this._shouldLog(e)){o=CU({logLevel:e,message:n,args:a,opts:o}),i=i||o.method,ph(i),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Of();let s=o.tag||o.message;if(o.once)if(!AU[s])AU[s]=Of();else return Po;return n=Ahe(this.id,o.message,o),i.bind(console,n,...o.args)}return Po}};A(dl,"VERSION",g4);function wU(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return ph(Number.isFinite(e)&&e>=0),e}function CU(t){let{logLevel:e,message:n}=t;t.logLevel=wU(e);let i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break;default:}typeof t.message=="function"&&(t.message=t.message());let a=typeof t.message;return ph(a==="string"||a==="object"),Object.assign(t,{args:i},t.opts)}function Ahe(t,e,n){if(typeof e=="string"){let i=n.time?xU(yU(n.total)):"";e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),e=SU(e,n.color,n.background)}return e}function The(t){let{image:e,message:n="",scale:i=1}=t;return console.warn("removed"),Po}function Che(t){let{image:e,message:n="",scale:i=1}=t;if(typeof e=="string"){let o=new Image;return o.onload=()=>{let s=E4(o,n,i);console.log(...s)},o.src=e,Po}let a=e.nodeName||"";if(a.toLowerCase()==="img")return console.log(...E4(e,n,i)),Po;if(a.toLowerCase()==="canvas"){let o=new Image;return o.onload=()=>console.log(...E4(o,n,i)),o.src=e.toDataURL(),Po}return Po}function whe(t){for(let e in t)for(let n in t[e])return n||"untitled";return"empty"}var Kqe=new dl({id:"@probe.gl/log"});var at=new dl({id:"deck"});var xu={attributeUpdateStart:-1,attributeManagerUpdateStart:-1,attributeUpdateMessages:[]},dA=1,n_=2,fA=3,pA=4,Ihe=2,IU=t=>({"layer.changeFlag":(e,n,i)=>{t.log(fA,"".concat(e.id," ").concat(n,": "),i[n])()},"layer.initialize":e=>{t.log(dA,"Initializing ".concat(e))()},"layer.update":(e,n)=>{if(n){let i=e.getChangeFlags();t.log(n_,"Updating ".concat(e," because: ").concat(Object.keys(i).filter(a=>i[a]).join(", ")))()}else t.log(pA,"".concat(e," does not need update"))()},"layer.matched":(e,n)=>{n&&t.log(pA,"Matched ".concat(e,", state transfered"))()},"layer.finalize":e=>{t.log(dA,"Finalizing ".concat(e))()},"compositeLayer.renderLayers":(e,n,i)=>{n?t.log(n_,"Composite layer rendered new subLayers ".concat(e),i)():t.log(pA,"Composite layer reused subLayers ".concat(e),i)()},"layerManager.setLayers":(e,n,i)=>{n&&t.log(n_,"Updating ".concat(i.length," deck layers"))()},"layerManager.activateViewport":(e,n)=>{t.log(fA,"Viewport changed",n)()},"attributeManager.invalidate":(e,n,i)=>{t.log(dA,i?"invalidated attributes ".concat(i," (").concat(n,") for ").concat(e.id):"invalidated all attributes for ".concat(e.id))()},"attributeManager.updateStart":e=>{xu.attributeUpdateMessages.length=0,xu.attributeManagerUpdateStart=Date.now()},"attributeManager.updateEnd":(e,n)=>{let i=Math.round(Date.now()-xu.attributeManagerUpdateStart);t.groupCollapsed(n_,"Updated attributes for ".concat(n," instances in ").concat(e.id," in ").concat(i,"ms"))();for(let a of xu.attributeUpdateMessages)t.log(fA,a)();t.groupEnd(n_)()},"attribute.updateStart":e=>{xu.attributeUpdateStart=Date.now()},"attribute.allocate":(e,n)=>{let i="".concat(e.id," allocated ").concat(n);xu.attributeUpdateMessages.push(i)},"attribute.updateEnd":(e,n)=>{let i=Math.round(Date.now()-xu.attributeUpdateStart),a="".concat(e.id," updated ").concat(n," in ").concat(i,"ms");xu.attributeUpdateMessages.push(a)},"deckRenderer.renderLayers":(e,n,i)=>{let{pass:a,redrawReason:o,stats:s}=i;for(let l of n){let{totalCount:c,visibleCount:u,compositeCount:d,pickableCount:f}=l,h=c-d-u;t.log(Ihe,"RENDER #".concat(e.renderCount,"   ").concat(u," (of ").concat(c," layers) to ").concat(a," because ").concat(o,"   (").concat(h," hidden, ").concat(d," composite ").concat(f," pickable)"))(),s&&s.get("Redraw Layers").add(u)}}});var y4={};process.env.NODE_ENV!=="production"&&(y4=IU(at));function RU(t){y4=t}function ln(t,e,n,i){at.level>0&&y4[t]&&y4[t].call(null,e,n,i)}function Rhe(t){let e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}var PU={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:Rhe,parseTextSync:JSON.parse};function Phe(){let t="8.9.31",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(at.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:at,_registerLoggers:RU},YN([PU,[Mf,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}var MU=Phe();var _t={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(_t,"IDENTITY",{get:()=>(at.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});var Ui={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},wi={common:0,meters:1,pixels:2},hA={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};var We=new dl({id:"luma.gl"});function yn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}var Mhe="Invalid WebGLRenderingContext";var Lhe="Requires WebGL2";function ac(t){return typeof WebGLRenderingContext!="undefined"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function pt(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function mA(t){return pt(t)?t:null}function oc(t){return yn(ac(t),Mhe),t}function Gr(t){return yn(pt(t),Lhe),t}var i_={};function Ohe(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function Bhe(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function Dhe(t,e){i_[t]=!0,e!==void 0&&Ohe(e)}function Fhe(t){let e=t.getError;t.getError=function(){let i;do i=e.apply(t),i!==0&&(i_[i]=!0);while(i!==0);for(i in i_)if(i_[i])return delete i_[i],parseInt(i,10);return 0}}var a_=function t(e){let n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){let a=new t.VertexAttrib(n);this.attribs[i]=a}this.maxAttrib=0};a_.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};a_.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var Bf=function(e){let n=this;this.gl=e,Fhe(e);let i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){let s=n.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);let l=s.attribs[o];return l.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){let s=n.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);let l=s.attribs[o];return l.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:n.currentArrayBuffer=s;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=s;break;default:}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){let c=n.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,l,c,u,d){let f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);let p=f.attribs[o];return p.buffer=n.currentArrayBuffer,p.size=s,p.type=l,p.normalized=c,p.stride=u,p.offset=d,p.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{Bhe("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Bf.prototype.VERTEX_ARRAY_BINDING_OES=34229;Bf.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;let n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new a_(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Bf.prototype.createVertexArrayOES=function(){let e=new a_(this);return this.vertexArrayObjects.push(e),e};Bf.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Bf.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof a_&&e.hasBeenBound&&e.ext===this)};Bf.prototype.bindVertexArrayOES=function(e){let n=this.gl;if(e&&!e.isAlive){Dhe(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}let i=this.original,a=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;let o=this.currentVertexArrayObject;if(a===o)return;(!a||o.elementArrayBuffer!==a.elementArrayBuffer)&&i.bindBuffer.call(n,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer,l=Math.max(a?a.maxAttrib:0,o.maxAttrib);for(let c=0;c<=l;c++){let u=o.attribs[c],d=a?a.attribs[c]:null;if((!a||u.enabled!==d.enabled)&&(u.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),u.enabled){let f=!1;(!a||u.buffer!==d.buffer)&&(s!==u.buffer&&(i.bindBuffer.call(n,34962,u.buffer),s=u.buffer),f=!0),(f||u.cached!==d.cached)&&i.vertexAttribPointer.call(n,c,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==s&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};function LU(t){if(typeof t.createVertexArray=="function")return;let e=t.getSupportedExtensions;t.getSupportedExtensions=function(){let a=e.call(this)||[];return a.indexOf("OES_vertex_array_object")<0&&a.push("OES_vertex_array_object"),a};let n=t.getExtension;t.getExtension=function(a){let o=n.call(this,a);return o||(a!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Bf(this)),this.__OESVertexArrayObject))}}var OU="OES_element_index",BU="WEBGL_draw_buffers",khe="EXT_disjoint_timer_query",Ghe="EXT_disjoint_timer_query_webgl2",Uhe="EXT_texture_filter_anisotropic",DU="WEBGL_debug_renderer_info",Vhe=35723,$he=4352,zhe=36795,jhe=34047,Hhe=37445,Whe=37446,Lr=t=>pt(t)?void 0:0,Zhe={[3074]:t=>pt(t)?void 0:36064,[Vhe]:t=>pt(t)?void 0:$he,[35977]:Lr,[32937]:Lr,[zhe]:(t,e)=>{let n=pt(t)?t.getExtension(Ghe):t.getExtension(khe);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[Hhe]:(t,e)=>{let n=t.getExtension(DU);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[Whe]:(t,e)=>{let n=t.getExtension(DU);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[jhe]:(t,e)=>{let n=t.luma.extensions[Uhe];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:Lr,[35071]:Lr,[37447]:Lr,[36063]:(t,e)=>{if(!pt(t)){let n=t.getExtension(BU);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:Lr,[35374]:Lr,[35377]:Lr,[34852]:t=>{if(!pt(t)){let e=t.getExtension(BU);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:t=>t.getExtension(OU)?2147483647:65535,[33001]:t=>t.getExtension(OU)?16777216:65535,[33e3]:t=>16777216,[37157]:Lr,[35373]:Lr,[35657]:Lr,[36183]:Lr,[37137]:Lr,[34045]:Lr,[35978]:Lr,[35979]:Lr,[35968]:Lr,[35376]:Lr,[35375]:Lr,[35659]:Lr,[37154]:Lr,[35371]:Lr,[35658]:Lr,[35076]:Lr,[35077]:Lr,[35380]:Lr};function FU(t,e,n){let i=Zhe[n],a=typeof i=="function"?i(t,e,n):i;return a!==void 0?a:e(n)}var Xhe="OES_vertex_array_object",kU="ANGLE_instanced_arrays",qhe="WEBGL_draw_buffers",Khe="EXT_disjoint_timer_query",Yhe="EXT_texture_filter_anisotropic",Jhe="VertexArray requires WebGL2 or OES_vertex_array_object extension";function Qhe(t,e){return{webgl2:pt(t),ext:t.getExtension(e)}}var gA={[Xhe]:{meta:{suffix:"OES"},createVertexArray:()=>{yn(!1,Jhe)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[kU]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){yn(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[qhe]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{yn(!1)}},[Khe]:{meta:{suffix:"EXT"},createQuery:()=>{yn(!1)},deleteQuery:()=>{yn(!1)},beginQuery:()=>{yn(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},x4={readBuffer:(t,e,n)=>{pt(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{let{webgl2:a,ext:o}=Qhe(t,kU),s;switch(i){case 35069:s=a?void 0:!1;break;case 35070:s=!a&&!o?0:void 0;break;default:}return s!==void 0?s:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!pt(t))switch(i){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return e(n,i)},getInternalformatParameter:(t,e,n,i,a)=>{if(!pt(t))switch(a){case 32937:return new Int32Array([0]);default:}return t.getInternalformatParameter(n,i,a)},getTexParameter(t,e,n,i){switch(i){case 34046:let{extensions:a}=t.luma,o=a[Yhe];i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return e(n,i)},getParameter:FU,hint(t,e,n,i){return e(n,i)}};function GU(t){t.luma=t.luma||{};let{luma:e}=t;return e.polyfilled||(LU(t),e0e(t),r0e(t,gA),t0e(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=GU;function e0e(t){t.luma.extensions={};let e=t.getSupportedExtensions()||[];for(let n of e)t.luma[n]=t.getExtension(n)}function t0e(t,e){let{target:n,target2:i}=e;Object.keys(x4).forEach(a=>{if(typeof x4[a]=="function"){let o=t[a]?t[a].bind(t):()=>{},s=x4[a].bind(null,t,o);n[a]=s,i[a]=s}})}function r0e(t,e){for(let n of Object.getOwnPropertyNames(e))n!=="overrides"&&n0e(t,{extension:n,target:t.luma,target2:t})}function n0e(t,e){let{extension:n,target:i,target2:a}=e,o=gA[n];yn(o);let{meta:s={}}=o,{suffix:l=""}=s,c=t.getExtension(n);for(let u of Object.keys(o)){let d="".concat(u).concat(l),f=null;u==="meta"||typeof t[u]=="function"||(c&&typeof c[d]=="function"?f=function(){return c[d](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(i))),f&&(i[u]=f,a[u]=f)}}var s_={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},bu=(t,e,n)=>e?t.enable(n):t.disable(n),UU=(t,e,n)=>t.hint(n,e),to=(t,e,n)=>t.pixelStorei(n,e),i0e=(t,e)=>{let n=pt(t)?36009:36160;return t.bindFramebuffer(n,e)},a0e=(t,e)=>t.bindFramebuffer(36008,e);function o_(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var VU={[3042]:bu,[32773]:(t,e)=>t.blendColor(...e),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(t,e)=>t.clearColor(...e),[3107]:(t,e)=>t.colorMask(...e),[2884]:bu,[2885]:(t,e)=>t.cullFace(e),[2929]:bu,[2931]:(t,e)=>t.clearDepth(e),[2932]:(t,e)=>t.depthFunc(e),[2928]:(t,e)=>t.depthRange(...e),[2930]:(t,e)=>t.depthMask(e),[3024]:bu,[35723]:UU,[36006]:i0e,[2886]:(t,e)=>t.frontFace(e),[33170]:UU,[2849]:(t,e)=>t.lineWidth(e),[32823]:bu,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:bu,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:bu,[3088]:(t,e)=>t.scissor(...e),[2960]:bu,[2961]:(t,e)=>t.clearStencil(e),[2968]:(t,e)=>t.stencilMaskSeparate(1028,e),[36005]:(t,e)=>t.stencilMaskSeparate(1029,e),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(t,e)=>t.viewport(...e),[3333]:to,[3317]:to,[37440]:to,[37441]:to,[37443]:to,[3330]:to,[3332]:to,[3331]:to,[36010]:a0e,[3314]:to,[32878]:to,[3316]:to,[3315]:to,[32877]:to,framebuffer:(t,e)=>{let n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=o_(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=o_(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=o_(e)?e:[e,e];let[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=o_(e)&&e.length===3?[...e,...e]:e;let[n,i,a,o,s,l]=e;t.stencilFuncSeparate(1028,n,i,a),t.stencilFuncSeparate(1029,o,s,l)},stencilOp:(t,e)=>{e=o_(e)&&e.length===3?[...e,...e]:e;let[n,i,a,o,s,l]=e;t.stencilOpSeparate(1028,n,i,a),t.stencilOpSeparate(1029,o,s,l)},viewport:(t,e)=>t.viewport(...e)};function cn(t,e,n){return e[t]!==void 0?e[t]:n[t]}var $U={blendEquation:(t,e,n)=>t.blendEquationSeparate(cn(32777,e,n),cn(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(cn(32969,e,n),cn(32968,e,n),cn(32971,e,n),cn(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(cn(32824,e,n),cn(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(cn(32938,e,n),cn(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,cn(2962,e,n),cn(2967,e,n),cn(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,cn(34816,e,n),cn(36003,e,n),cn(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,cn(2964,e,n),cn(2965,e,n),cn(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,cn(34817,e,n),cn(34818,e,n),cn(34819,e,n))},_A={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({[36006]:n,[36010]:n});case 36009:return t({[36006]:n});case 36008:return t({[36010]:n});default:return null}},blendColor:(t,e,n,i,a)=>t({[32773]:new Float32Array([e,n,i,a])}),blendEquation:(t,e)=>t({[32777]:e,[34877]:e}),blendEquationSeparate:(t,e,n)=>t({[32777]:e,[34877]:n}),blendFunc:(t,e,n)=>t({[32969]:e,[32968]:n,[32971]:e,[32970]:n}),blendFuncSeparate:(t,e,n,i,a)=>t({[32969]:e,[32968]:n,[32971]:i,[32970]:a}),clearColor:(t,e,n,i,a)=>t({[3106]:new Float32Array([e,n,i,a])}),clearDepth:(t,e)=>t({[2931]:e}),clearStencil:(t,e)=>t({[2961]:e}),colorMask:(t,e,n,i,a)=>t({[3107]:[e,n,i,a]}),cullFace:(t,e)=>t({[2885]:e}),depthFunc:(t,e)=>t({[2932]:e}),depthRange:(t,e,n)=>t({[2928]:new Float32Array([e,n])}),depthMask:(t,e)=>t({[2930]:e}),frontFace:(t,e)=>t({[2886]:e}),lineWidth:(t,e)=>t({[2849]:e}),polygonOffset:(t,e,n)=>t({[32824]:e,[10752]:n}),sampleCoverage:(t,e,n)=>t({[32938]:e,[32939]:n}),scissor:(t,e,n,i,a)=>t({[3088]:new Int32Array([e,n,i,a])}),stencilMask:(t,e)=>t({[2968]:e,[36005]:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({[2962]:e,[2967]:n,[2963]:i,[34816]:e,[36003]:n,[36004]:i}),stencilFuncSeparate:(t,e,n,i,a)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:i,[e===1028?2963:36004]:a}),stencilOp:(t,e,n,i)=>t({[2964]:e,[2965]:n,[2966]:i,[34817]:e,[34818]:n,[34819]:i}),stencilOpSeparate:(t,e,n,i,a)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:i,[e===1028?2966:34819]:a}),viewport:(t,e,n,i,a)=>t({[2978]:[e,n,i,a]})},fl=(t,e)=>t.isEnabled(e),EA={[3042]:fl,[2884]:fl,[2929]:fl,[3024]:fl,[32823]:fl,[32926]:fl,[32928]:fl,[3089]:fl,[2960]:fl,[35977]:fl};function vA(t){for(let e in t)return!1;return!0}function zU(t,e){if(t===e)return!0;let n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let a=0;a<t.length;++a)if(t[a]!==e[a])return!1;return!0}return!1}function jU(t,e){let n=t[e].bind(t);t[e]=function(){let a=arguments.length<=0?void 0:arguments[0];return a in t.state.cache?t.state.enable?t.state.cache[a]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function o0e(t,e,n){let i=t[e].bind(t);t[e]=function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];let{valueChanged:c,oldValue:u}=n(t.state._updateCache,...s);return c&&i(...s),u},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function s0e(t){let e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}var yA=class{constructor(e){let{copyState:n=!1,log:i=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?N4(e):Object.assign({},s_),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.stateStack.push({})}pop(){yn(this.stateStack.length>0);let e=this.stateStack[this.stateStack.length-1];ca(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,i,a=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(let o in e){yn(o!==void 0);let s=e[o],l=this.cache[o];zU(s,l)||(n=!0,i=l,a&&!(o in a)&&(a[o]=l),this.cache[o]=s)}return{valueChanged:n,oldValue:i}}};function b4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{enable:n=!0,copyState:i}=e;if(yn(i!==void 0),!t.state){let{polyfillContext:a}=globalThis;a&&a(t),t.state=new yA(t,{copyState:i}),s0e(t);for(let o in _A){let s=_A[o];o0e(t,o,s)}jU(t,"getParameter"),jU(t,"isEnabled")}return t.state.enable=n,t}function xA(t){t.state||b4(t,{copyState:!1}),t.state.push()}function S4(t){yn(t.state),t.state.pop()}function ca(t,e){if(yn(ac(t),"setParameters requires a WebGL context"),vA(e))return;let n={};for(let a in e){let o=Number(a),s=VU[a];s&&(typeof s=="string"?n[s]=!0:s(t,e[a],o))}let i=t.state&&t.state.cache;if(i)for(let a in n){let o=$U[a];o(t,e,i)}}function N4(t,e){if(e=e||s_,typeof e=="number"){let a=e,o=EA[a];return o?o(t,a):t.getParameter(a)}let n=Array.isArray(e)?e:Object.keys(e),i={};for(let a of n){let o=EA[a];i[a]=o?o(t,Number(a)):t.getParameter(Number(a))}return i}function A4(t){ca(t,s_)}function Or(t,e,n){if(vA(e))return n(t);let{nocatch:i=!0}=e;xA(t),ca(t,e);let a;if(i)a=n(t),S4(t);else try{a=n(t)}finally{S4(t)}return a}function l_(t){if(typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&process.versions.electron)return!0;let e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function pl(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||l_()}var bA=globalThis;function mh(t){if(!t&&!pl())return"Node";if(l_(t))return"Electron";let n=t||(typeof navigator!="undefined"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";let i=n.indexOf("MSIE ")!==-1,a=n.indexOf("Trident/")!==-1;return i||a?"IE":bA.chrome?"Chrome":bA.safari?"Safari":bA.mozInnerScreenX?"Firefox":"Unknown"}function ro(t){let{luma:e}=t;if(t.canvas&&e){let n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function gh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=ro(t),a=t.drawingBufferWidth,o=t.drawingBufferHeight;return l0e(e,i,a,o,n)}function ZU(t){let e=typeof window=="undefined"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function l0e(t,e,n,i,a){let o=HU(t[0],e,n),s=WU(t[1],e,i,a),l=HU(t[0]+1,e,n),c=l===n-1?l:l-1;l=WU(t[1]+1,e,i,a);let u;return a?(l=l===0?l:l+1,u=s,s=l):u=l===i-1?l:l-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(u-s+1,1)}}function HU(t,e,n){return Math.min(Math.round(t*e),n-1)}function WU(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}var SA=pl(),c0e=SA&&typeof document!="undefined",XU={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function _h(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yn(SA,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},XU,t);let{width:e,height:n}=t;function i(l){if(t.throwOnError)throw new Error(l);return console.error(l),null}t.onError=i;let a,{canvas:o}=t,s=d0e({canvas:o,width:e,height:n,onError:i});return a=u0e(s,t),a?(a=Df(a,t),f0e(a),a):null}function Df(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||p0e(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},XU,e);let{manageState:n,debug:i}=e;return n&&b4(t,{copyState:!1,log:function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return We.log(1,...o)()}}),SA&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),We.level=Math.max(We.level,1)):We.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function qU(t){let e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info"),a=i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936),o=i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937);return{vendor:a||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function NA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){let i=ZU(e.useDevicePixels);h0e(t,i,e);return}let n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function u0e(t,e){let{onError:n}=e,i=null,a=c=>i=c.statusMessage||i;t.addEventListener("webglcontextcreationerror",a,!1);let{webgl1:o=!0,webgl2:s=!0}=e,l=null;return s&&(l=l||t.getContext("webgl2",e),l=l||t.getContext("experimental-webgl2",e)),o&&(l=l||t.getContext("webgl",e),l=l||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",a,!1),l?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),l):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}function d0e(t){let{canvas:e,width:n=800,height:i=600,onError:a}=t,o;return typeof e=="string"?(c0e&&document.readyState==="complete"||a("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",o.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function f0e(t){let e=pt(t)?"WebGL2":"WebGL1",n=qU(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",a=t.debug?" debug":"";We.info(1,"".concat(e).concat(a," context ").concat(i))()}function p0e(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?2:1}function h0e(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,a="height"in n?n.height:t.canvas.clientHeight;(!i||!a)&&(We.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,a=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};let o=t.luma.canvasSizeInfo;if(o.clientWidth!==i||o.clientHeight!==a||o.devicePixelRatio!==e){let s=e,l=Math.floor(i*s),c=Math.floor(a*s);t.canvas.width=l,t.canvas.height=c,(t.drawingBufferWidth!==l||t.drawingBufferHeight!==c)&&(We.warn("Device pixel ratio clamped")(),s=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/a),t.canvas.width=Math.floor(i*s),t.canvas.height=Math.floor(a*s)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:a,devicePixelRatio:e})}}function c_(){let t;if(typeof window!="undefined"&&window.performance)t=window.performance.now();else if(typeof process!="undefined"&&process.hrtime){let e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}var Ff=class{constructor(e,n){A(this,"name",void 0),A(this,"type",void 0),A(this,"sampleSize",1),A(this,"time",void 0),A(this,"count",void 0),A(this,"samples",void 0),A(this,"lastTiming",void 0),A(this,"lastSampleTime",void 0),A(this,"lastSampleCount",void 0),A(this,"_count",0),A(this,"_time",0),A(this,"_samples",0),A(this,"_startTime",0),A(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=c_(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(c_()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}};var Mo=class{constructor(e){A(this,"id",void 0),A(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(let e in this.stats)this.stats[e].reset();return this}forEach(e){for(let n in this.stats)e(this.stats[n])}getTable(){let e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;let{name:n,type:i}=e;return this.stats[n]||(e instanceof Ff?this.stats[n]=e:this.stats[n]=new Ff(n,i)),this.stats[n]}};var u_="8.5.21",m0e="set luma.log.level=1 (or higher) to trace rendering",AA=class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new Mo({id:e})),this.stats.get(e)}},Lo=new AA;if(globalThis.luma&&globalThis.luma.VERSION!==u_)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(u_));globalThis.luma||(pl()&&We.log(1,"luma.gl ".concat(u_," - ").concat(m0e))(),globalThis.luma=globalThis.luma||{VERSION:u_,version:u_,log:We,stats:Lo,globals:{modules:{},nodeIO:{}}});var PYe=globalThis.luma;function TA(t){return typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function CA(t){return typeof window!="undefined"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function Oe(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function T4(t,e){if(typeof e!="string")return e;let n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");let i=t[e];return Oe(i!==void 0,"Accessing undefined constant GL.".concat(e)),i}function Oo(t,e){e=Number(e);for(let n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}var wA={};function Xn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";wA[t]=wA[t]||1;let e=wA[t]++;return"".concat(t,"-").concat(e)}function IA(t){return Oe(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function hl(t){let e=!0;for(let n in t){e=!1;break}return e}function C4(t,e,n,i){let a="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);i.forEach(s=>{o.methodName||(o[s]=()=>{throw We.removed("Calling removed method ".concat(e,".").concat(s,": "),a)(),new Error(s)})})}var Eh="Resource subclass must define virtual methods",xn=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};oc(e);let{id:i,userData:a={}}=n;this.gl=e,this.gl2=e,this.id=i||Xn(this[Symbol.toStringTag]),this.userData=a,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=T4(this.gl,e),Oe(e);let a=(this.constructor.PARAMETERS||{})[e];if(a){let o=pt(this.gl);if(!((!("webgl2"in a)||o)&&(!("extension"in a)||this.gl.getExtension(a.extension)))){let l=a.webgl1,c="webgl2"in a?a.webgl2:a.webgl1;return o?c:l}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{parameters:n,keys:i}=e,a=this.constructor.PARAMETERS||{},o=pt(this.gl),s={},l=n||Object.keys(a);for(let c of l){let u=a[c];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){let f=i?Oo(this.gl,c):c;s[f]=this.getParameter(c,e),i&&u.type==="GLenum"&&(s[f]=Oo(this.gl,s[f]))}}return s}setParameter(e,n){e=T4(this.gl,e),Oe(e);let a=(this.constructor.PARAMETERS||{})[e];if(a){let o=pt(this.gl);if(!((!("webgl2"in a)||o)&&(!("extension"in a)||this.gl.getExtension(a.extension))))throw new Error("Parameter not available on this platform");a.type==="GLenum"&&(n=T4(n))}return this._setParameter(e,n),this}setParameters(e){for(let n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return C4(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(Eh)}_deleteHandle(){throw new Error(Eh)}_bindHandle(e){throw new Error(Eh)}_getOptsFromHandle(){throw new Error(Eh)}_getParameter(e,n){throw new Error(Eh)}_setParameter(e,n){throw new Error(Eh)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){let e=this[Symbol.toStringTag],n=Lo.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){let e=this[Symbol.toStringTag];Lo.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",a=Lo.get("Memory Usage".concat(i));a.get("GPU Memory").addCount(e),a.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=Lo.get("Memory Usage".concat(n));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}};var g0e="Failed to deduce GL constant from typed array";function d_(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(g0e)}}function Su(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function KU(t){let{data:e,width:n,height:i,bytesPerPixel:a=4,temp:o}=t,s=n*a;o=o||new Uint8Array(s);for(let l=0;l<i/2;++l){let c=l*s,u=(i-l-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,u,u+s),e.set(o,u)}}function YU(t){let{data:e,width:n,height:i}=t,a=Math.round(n/2),o=Math.round(i/2),s=new Uint8Array(a*o*4);for(let l=0;l<o;l++)for(let c=0;c<a;c++)for(let u=0;u<4;u++)s[(l*a+c)*4+u]=e[(l*2*n+c*2)*4+u];return{data:s,width:a,height:o}}function f_(t,e,n){let{removedProps:i={},deprecatedProps:a={},replacedProps:o={}}=n;for(let l in i)if(l in e){let u=i[l]?"".concat(t,".").concat(i[l]):"N/A";We.removed("".concat(t,".").concat(l),u)()}for(let l in a)if(l in e){let c=a[l];We.deprecated("".concat(t,".").concat(l),"".concat(t,".").concat(c))()}let s=null;for(let l in o)if(l in e){let c=o[l];We.deprecated("".concat(t,".").concat(l),"".concat(t,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[l],delete s[l]}return s||e}var _0e={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},E0e={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},un=class{static getBytesPerElement(e){return Su(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Oe(e.size),Su(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new un(_0e,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(a=>this._assign(a)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return un.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return un.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=f_("Accessor",e,E0e),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}};var JU=10,QU={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},v0e={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:QU},y0e={removedProps:QU},Rt=class extends xn{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/un.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/un.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=f_("Buffer",e,v0e),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=f_("Buffer",e,y0e),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new un(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});let{data:n,offset:i=0,srcOffset:a=0}=e,o=e.byteLength||e.length;Oe(n);let s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),a!==0||o!==void 0?(Gr(this.gl),this.gl.bufferSubData(this.target,i,n,a,o)):this.gl.bufferSubData(s,i,n),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:a=0,size:o}=e,{gl:s}=this;return Gr(s),s.bindBuffer(36662,n.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,i,a,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:a=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Gr(this.gl);let o=Su(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(n),l=i,c,u;e?(u=e.length,c=u-l):(c=Math.min(s,a||s),u=l+c);let d=Math.min(s,c);return a=a||d,Oe(a<=d),e=e||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,a),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?a!==void 0?this.gl.bindBufferRange(e,n,this.handle,i,a):(Oe(i===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(JU,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;Oe(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();let a=this._getTarget();this.gl.bindBuffer(a,this.handle),this.gl.bufferData(a,i,this.usage),this.gl.bufferSubData(a,n,e),this.gl.bindBuffer(a,null),this.debugData=e.slice(0,JU),this.bytesUsed=i,this._trackAllocatedMemory(i);let o=d_(e);return Oe(o),this.setAccessor(new un(this.accessor,{type:o})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;Oe(e>=0),this._trackDeallocatedMemory();let i=e;e===0&&(i=new Float32Array(0));let a=this._getTarget();return this.gl.bindBuffer(a,this.handle),this.gl.bufferData(a,i,n),this.gl.bindBuffer(a,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){let n=Su(this.accessor.type||5126,{clamped:!1}),i=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new un(this.accessor,{type:d_(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);let n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return We.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return We.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return We.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return We.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new un(this.accessor,e),this}};var w4={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},I4={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},R4={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function eV(t,e){let n=w4[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;let i=pt(t)&&n.gl2||n.gl1;return typeof i=="string"?t.getExtension(i):i}function tV(t,e){let n=w4[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}var x0e=[9729,9728],rV=globalThis.WebGLBuffer||function(){},Vi=class extends xn{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{format:i,linearFiltering:a}=n,o=!0;return i&&(o=o&&eV(e,i),o=o&&(!a||tV(e,i))),o}constructor(e,n){let{id:i=Xn("texture"),handle:a,target:o}=n;super(e,{id:i,handle:a}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(y=>this.initialize(Object.assign({},e,{pixels:y,data:y}))),this;let i=typeof HTMLVideoElement!="undefined"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;let{pixels:a=null,format:o=6408,border:s=0,recreate:l=!1,parameters:c={},pixelStore:u={},textureUnit:d=void 0}=e;n||(n=a);let{width:f,height:p,dataFormat:h,type:m,compressed:_=!1,mipmaps:E=!0}=e,{depth:v=0}=e;return{width:f,height:p,compressed:_,dataFormat:h,type:m}=this._deduceParameters({format:o,type:m,dataFormat:h,compressed:_,data:n,width:f,height:p}),this.width=f,this.height=p,this.depth=v,this.format=o,this.type=m,this.dataFormat=h,this.border=s,this.textureUnit=d,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),E&&this._isNPOT()&&(We.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),E=!1,this._updateForNPOT(c)),this.mipmaps=E,this.setImageData({data:n,width:f,height:p,depth:v,format:o,type:m,dataFormat:h,border:s,mipmaps:E,parameters:u,compressed:_}),E&&this.generateMipmap(),this.setParameters(c),l&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){let{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:a=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:a}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(We.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Or(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");let{target:n=this.target,pixels:i=null,level:a=0,format:o=this.format,border:s=this.border,offset:l=0,parameters:c={}}=e,{data:u=null,type:d=this.type,width:f=this.width,height:p=this.height,dataFormat:h=this.dataFormat,compressed:m=!1}=e;u||(u=i),{type:d,dataFormat:h,compressed:m,width:f,height:p}=this._deduceParameters({format:o,type:d,dataFormat:h,compressed:m,data:u,width:f,height:p});let{gl:_}=this;_.bindTexture(this.target,this.handle);let E=null;({data:u,dataType:E}=this._getDataType({data:u,compressed:m}));let v,y=0;if(Or(this.gl,c,()=>{switch(E){case"null":_.texImage2D(n,a,o,f,p,s,h,d,u);break;case"typed-array":_.texImage2D(n,a,o,f,p,s,h,d,u,l);break;case"buffer":v=Gr(_),v.bindBuffer(35052,u.handle||u),v.texImage2D(n,a,o,f,p,s,h,d,l),v.bindBuffer(35052,null);break;case"browser-object":pt(_)?_.texImage2D(n,a,o,f,p,s,h,d,u):_.texImage2D(n,a,o,h,d,u);break;case"compressed":for(let[x,S]of u.entries())_.compressedTexImage2D(n,x,S.format,S.width,S.height,s,S.data),y+=S.levelSize;break;default:Oe(!1,"Unknown image data type")}}),E==="compressed")this._trackAllocatedMemory(y,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{let x=I4[this.dataFormat]||4,S=R4[this.type]||1;this._trackAllocatedMemory(this.width*this.height*x*S,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:a=null,x:o=0,y:s=0,width:l=this.width,height:c=this.height,level:u=0,format:d=this.format,type:f=this.type,dataFormat:p=this.dataFormat,compressed:h=!1,offset:m=0,border:_=this.border,parameters:E={}}=e;if({type:f,dataFormat:p,compressed:h,width:l,height:c}=this._deduceParameters({format:d,type:f,dataFormat:p,compressed:h,data:a,width:l,height:c}),Oe(this.depth===0,"texSubImage not supported for 3D textures"),a||(a=i),a&&a.data){let v=a;a=v.data,l=v.shape[0],c=v.shape[1]}a instanceof Rt&&(a=a.handle),this.gl.bindTexture(this.target,this.handle),Or(this.gl,E,()=>{if(h)this.gl.compressedTexSubImage2D(n,u,o,s,l,c,d,a);else if(a===null)this.gl.texSubImage2D(n,u,o,s,l,c,p,f,null);else if(ArrayBuffer.isView(a))this.gl.texSubImage2D(n,u,o,s,l,c,p,f,a,m);else if(a instanceof rV){let v=Gr(this.gl);v.bindBuffer(35052,a),v.texSubImage2D(n,u,o,s,l,c,p,f,m),v.bindBuffer(35052,null)}else pt(this.gl)?Gr(this.gl).texSubImage2D(n,u,o,s,l,c,p,f,a):this.gl.texSubImage2D(n,u,o,s,p,f,a)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return We.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Rt?{data:n.handle,dataType:"buffer"}:n instanceof rV?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){let{format:n,data:i}=e,{width:a,height:o,dataFormat:s,type:l,compressed:c}=e,u=w4[n];return s=s||u&&u.dataFormat,l=l||u&&u.types[0],c=c||u&&u.compressed,{width:a,height:o}=this._deduceImageSize(i,a,o),{dataFormat:s,type:l,compressed:c,width:a,height:o,format:n,data:i}}_deduceImageSize(e,n,i){let a;return typeof ImageData!="undefined"&&e instanceof ImageData?a={width:e.width,height:e.height}:typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement?a={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement?a={width:e.width,height:e.height}:typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap?a={width:e.width,height:e.height}:typeof HTMLVideoElement!="undefined"&&e instanceof HTMLVideoElement?a={width:e.videoWidth,height:e.videoHeight}:e?a={width:n,height:i}:a={width:n>=0?n:1,height:i>=0?i:1},Oe(a,"Could not deduced texture size"),Oe(n===void 0||a.width===n,"Deduced texture width does not match supplied width"),Oe(i===void 0||a.height===i,"Deduced texture height does not match supplied height"),a}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);let n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Oe(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return pt(this.gl)||!this.width||!this.height?!1:!IA(this.width)||!IA(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:x0e.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break;default:break}return n}};var b0e="";function nV(t,e){return Oe(typeof t=="string"),t=b0e+t,new Promise((n,i)=>{try{let a=new Image;a.onload=()=>n(a),a.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),a.crossOrigin=e&&e.crossOrigin||"anonymous",a.src=t}catch(a){i(a)}})}var jt=class extends Vi{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Vi.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};oc(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:nV(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}};var RA=[34069,34070,34071,34072,34073,34074],kf=class extends Vi{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};oc(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{mipmaps:n=!0,parameters:i={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(i)}),this}subImage(e){let{face:n,data:i,x:a=0,y:o=0,mipmapLevel:s=0}=e;return this._subImage({target:n,data:i,x:a,y:o,mipmapLevel:s})}async setCubeMapImageData(e){let{width:n,height:i,pixels:a,data:o,border:s=0,format:l=6408,type:c=5121}=e,{gl:u}=this,d=a||o,f=await Promise.all(RA.map(p=>{let h=d[p];return Promise.all(Array.isArray(h)?h:[h])}));this.bind(),RA.forEach((p,h)=>{f[h].length>1&&this.opts.mipmaps!==!1&&We.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[h].forEach((m,_)=>{n&&i?u.texImage2D(p,_,l,n,i,s,l,c,m):u.texImage2D(p,_,l,l,c,m)})}),this.unbind()}setImageDataForFace(e){let{face:n,width:i,height:a,pixels:o,data:s,border:l=0,format:c=6408,type:u=5121}=e,{gl:d}=this,f=o||s;return this.bind(),f instanceof Promise?f.then(p=>this.setImageDataForFace(Object.assign({},e,{face:n,data:p,pixels:p}))):this.width||this.height?d.texImage2D(n,0,c,i,a,l,c,u,f):d.texImage2D(n,0,c,c,u,f),this}};kf.FACES=RA;var vh=class extends Vi{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return pt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gr(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:a,height:o,depth:s=1,border:l=0,format:c,type:u=5121,offset:d=0,data:f,parameters:p={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Or(this.gl,p,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,n,i,a,o,s,l,c,u,f),f instanceof Rt&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,n,i,a,o,s,l,c,u,d))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{let h=I4[this.dataFormat]||4,m=R4[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*h*m,"Texture")}return this.loaded=!0,this}};var Gf="EXT_color_buffer_float",PA={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:Gf,bpp:2},[33327]:{gl2:Gf,bpp:4},[34842]:{gl2:Gf,bpp:8},[33326]:{gl2:Gf,bpp:4},[33328]:{gl2:Gf,bpp:8},[34836]:{gl2:Gf,bpp:16},[35898]:{gl2:Gf,bpp:4}};function S0e(t,e,n){let i=n[e];if(!i)return!1;let a=pt(t)&&i.gl2||i.gl1;return typeof a=="string"?t.getExtension(a):a}var $i=class extends xn{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||S0e(e,n,PA)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:a=1,samples:o=0}=e;return Oe(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&pt(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,n,i,a):this.gl.renderbufferStorage(36161,n,i,a),this.format=n,this.width=i,this.height=a,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*PA[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}};var N0e=256,A0e=1024,T0e=16384,iV=6144,aV=6145,oV=6146,sV=34041,lV="clear: bad arguments";function Nu(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:a=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o={};e&&(o.framebuffer=e);let s=0;n&&(s|=T0e,n!==!0&&(o.clearColor=n)),i&&(s|=N0e,i!==!0&&(o.clearDepth=i)),a&&(s|=A0e,i!==!0&&(o.clearStencil=i)),Oe(s!==0,lV),Or(t,o,()=>{t.clear(s)})}function MA(t){let{framebuffer:e=null,buffer:n=iV,drawBuffer:i=0,value:a=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gr(t),Or(t,{framebuffer:e},()=>{switch(n){case iV:switch(a.constructor){case Int32Array:t.clearBufferiv(n,i,a);break;case Uint32Array:t.clearBufferuiv(n,i,a);break;case Float32Array:default:t.clearBufferfv(n,i,a)}break;case aV:t.clearBufferfv(aV,0,[a]);break;case oV:t.clearBufferiv(oV,0,[a]);break;case sV:let[o,s]=a;t.clearBufferfi(sV,0,o,s);break;default:Oe(!1,lV)}})}function cV(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Oe(!1),0}}function sc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{sourceX:n=0,sourceY:i=0,sourceFormat:a=6408}=e,{sourceAttachment:o=36064,target:s=null,sourceWidth:l,sourceHeight:c,sourceType:u}=e,{framebuffer:d,deleteFramebuffer:f}=uV(t);Oe(d);let{gl:p,handle:h,attachments:m}=d;l=l||d.width,c=c||d.height,o===36064&&h===null&&(o=1028),Oe(m[o]),u=u||m[o].type,s=C0e(s,u,a,l,c),u=u||d_(s);let _=p.bindFramebuffer(36160,h);return p.readPixels(n,i,l,c,a,u,s),p.bindFramebuffer(36160,_||null),f&&d.delete(),s}function P4(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=sc(t,{sourceAttachment:e}),{width:a,height:o}=t;for(;o>n;)({data:i,width:a,height:o}=YU({data:i,width:a,height:o}));KU({data:i,width:a,height:o});let s=document.createElement("canvas");s.width=a,s.height=o;let l=s.getContext("2d"),c=l.createImageData(a,o);return c.data.set(i),l.putImageData(c,0,0),s.toDataURL()}function M4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{sourceX:i=0,sourceY:a=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n,{targetX:l,targetY:c,targetZ:u,width:d,height:f}=n,{framebuffer:p,deleteFramebuffer:h}=uV(t);Oe(p);let{gl:m,handle:_}=p,E=typeof l!="undefined"||typeof c!="undefined"||typeof u!="undefined";l=l||0,c=c||0,u=u||0;let v=m.bindFramebuffer(36160,_);Oe(e);let y=null;if(e instanceof Vi&&(y=e,d=Number.isFinite(d)?d:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),e=y.target),!E)m.copyTexImage2D(e,o,s,i,a,d,f,0);else switch(e){case 3553:case 34067:m.copyTexSubImage2D(e,o,l,c,i,a,d,f);break;case 35866:case 32879:Gr(m).copyTexSubImage3D(e,o,l,c,u,i,a,d,f);break;default:}return y&&y.unbind(),m.bindFramebuffer(36160,v||null),h&&p.delete(),y}function uV(t){return t instanceof Ht?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:dV(t),deleteFramebuffer:!0}}function C0e(t,e,n,i,a){if(t)return t;e=e||5121;let o=Su(e,{clamped:!1}),s=cV(n);return new o(i*a*s)}var or={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function w0e(t){let e=new jt(t,{format:6408,type:5126,dataFormat:6408}),n=new Ht(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),i=n.getStatus();return e.delete(),n.delete(),i===36053}var LA={[or.WEBGL2]:[!1,!0],[or.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[or.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[or.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[or.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[or.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[or.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[or.FLOAT_BLEND]:["EXT_float_blend"],[or.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[or.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[or.TEXTURE_FLOAT]:["OES_texture_float",!0],[or.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[or.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[or.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[or.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[or.COLOR_ATTACHMENT_RGBA32F]:[w0e,"EXT_color_buffer_float"],[or.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[or.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[or.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[or.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[or.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[or.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]};var I0e=2;function Uf(t,e){return Au(t,e)}function Au(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>fV(t,n))}function L4(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(let e in LA)t.luma.caps[e]===void 0&&(t.luma.caps[e]=fV(t,e));return t.luma.caps}function fV(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=R0e(t,e)),t.luma.caps[e]||We.log(I0e,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function R0e(t,e){let n=LA[e];Oe(n,e);let i,a=pt(t)&&n[1]||n[0];if(typeof a=="function")i=a(t);else if(Array.isArray(a)){i=!0;for(let o of a)i=i&&!!t.getExtension(o)}else typeof a=="string"?i=!!t.getExtension(a):typeof a=="boolean"?i=a:Oe(!1);return i}var pV="Multiple render targets not supported",Ht=class extends xn{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{colorBufferFloat:i,colorBufferHalfFloat:a}=n,o=!0;return i&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),a&&(o=o&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Ht(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){let e=Gr(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){let e=Gr(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:a=null,color:o=!0,depth:s=!0,stencil:l=!1,check:c=!0,readBuffer:u=void 0,drawBuffers:d=void 0}=e;if(Oe(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,a)for(let f in a){let p=a[f];(Array.isArray(p)?p[0]:p).resize({width:n,height:i})}else a=this._createDefaultAttachments(o,s,l,n,i);this.update({clearAttachments:!0,attachments:a,readBuffer:u,drawBuffers:d}),a&&c&&this.checkStatus()}delete(){for(let e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:a,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(n,{clearAttachments:o,resizeAttachments:s});let{gl:l}=this,c=l.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),a&&this._setDrawBuffers(a),l.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:i}=e;if(this.handle===null)return Oe(n===void 0&&i===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),i===void 0&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&We.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(let a in this.attachments)this.attachments[a].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a={};n&&Object.keys(this.attachments).forEach(s=>{a[s]=null}),Object.assign(a,e);let o=this.gl.bindFramebuffer(36160,this.handle);for(let s in a){Oe(s!==void 0,"Misspelled framebuffer binding point?");let l=Number(s),c=a[l],u=c;if(!u)this._unattach(l);else if(u instanceof $i)this._attachRenderbuffer({attachment:l,renderbuffer:u});else if(Array.isArray(c)){let[d,f=0,p=0]=c;u=d,this._attachTexture({attachment:l,texture:d,layer:f,level:p})}else this._attachTexture({attachment:l,texture:u,layer:0,level:0});i&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){let{gl:e}=this,n=this.getStatus();if(n!==36053)throw new Error(M0e(n));return this}getStatus(){let{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{color:n,depth:i,stencil:a,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(n||i||a)&&Nu(this.gl,{color:n,depth:i,stencil:a}),o.forEach((l,c)=>{MA(this.gl,{drawBuffer:c,value:l})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return We.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return We.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return We.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return We.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return We.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return We.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:a=0,width:o,height:s}=e,l=Gr(this.gl),c=l.bindFramebuffer(36008,this.handle);return i===0&&a===0&&o===void 0&&s===void 0?l.invalidateFramebuffer(36008,n):l.invalidateFramebuffer(36008,n,i,a,o,s),l.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let a=this._getAttachmentParameterFallback(n);return a===null&&(this.gl.bindFramebuffer(36160,this.handle),a=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&a>1e3&&(a=Oo(this.gl,a)),a}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],a={};for(let o of i){let s=n?Oo(this.gl,o):o;a[s]=this.getAttachmentParameter(e,o,n)}return a}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=Object.keys(this.attachments),i={};for(let a of n){let o=Number(a),s=e?Oo(this.gl,o):o;i[s]=this.getAttachmentParameters(o,e)}return i}show(){return typeof window!="undefined"&&window.open(P4(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>We.level||typeof window=="undefined")return this;n=n||"Framebuffer ".concat(this.id);let i=P4(this,{targetMaxHeight:100});return We.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,a,o){let s=null;return e&&(s=s||{},s[36064]=new jt(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:a,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(s[36064])),n&&i?(s=s||{},s[33306]=new $i(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:a,height:111}),this.ownResources.push(s[33306])):n?(s=s||{},s[36096]=new $i(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:a,height:o}),this.ownResources.push(s[36096])):i&&Oe(!1),s}_unattach(e){let n=this.attachments[e];n&&(n instanceof $i?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e,{gl:a}=this;a.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:a,level:o}=e,{gl:s}=this;switch(s.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:Gr(s).framebufferTextureLayer(36160,n,i.target,o,a);break;case 34067:let c=P0e(a);s.framebufferTexture2D(36160,n,c,i.handle,o);break;case 3553:s.framebufferTexture2D(36160,n,3553,i.handle,o);break;default:Oe(!1,"Illegal texture type")}s.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){let n=mA(this.gl);n?n.readBuffer(e):Oe(e===36064||e===1029,pV),this.readBuffer=e}_setDrawBuffers(e){let{gl:n}=this,i=Gr(n);if(i)i.drawBuffers(e);else{let a=n.getExtension("WEBGL_draw_buffers");a?a.drawBuffersWEBGL(e):Oe(e.length===1&&(e[0]===36064||e[0]===1029),pV)}this.drawBuffers=e}_getAttachmentParameterFallback(e){let n=L4(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}};function P0e(t){return t<34069?t+34069:t}function M0e(t){return(Ht.STATUS||{})[t]||"Framebuffer error ".concat(t)}var L0e=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Ht.ATTACHMENT_PARAMETERS=L0e;function O4(t,e){Oe(t instanceof jt||t instanceof kf||t instanceof vh);let n=t.constructor,{gl:i,width:a,height:o,format:s,type:l,dataFormat:c,border:u,mipmaps:d}=t,f=Object.assign({width:a,height:o,format:s,type:l,dataFormat:c,border:u,mipmaps:d},e);return new n(i,f)}function dV(t,e){let{gl:n,width:i,height:a,id:o}=t;return new Ht(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:i,height:a,attachments:{[36064]:t}}))}function Tu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,i=t.match(n);return i?i[1]:e}function OA(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}function BA(t,e,n,i){let a=t.split(/\r?\n/),o={},s={},l=i||Tu(e)||"(unnamed)",c="".concat(OA(n)," shader ").concat(l);for(let d=0;d<a.length;d++){let f=a[d];if(f.length<=1)continue;let p=f.split(":"),h=p[0],m=parseInt(p[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));h!=="WARNING"?o[m]=f:s[m]=f}let u=O0e(e);return{shaderName:c,errors:hV(o,u),warnings:hV(s,u)}}function hV(t,e){let n="";for(let i=0;i<e.length;i++){let a=e[i];if(!(!t[i+3]&&!t[i+2]&&!t[i+1])&&(n+="".concat(a,`
`),t[i+1])){let o=t[i+1],s=o.split(":",3),l=s[0],c=parseInt(s[1],10)||0,u=o.substring(s.join(":").length+1).trim();n+=mV("^^^ ".concat(l,": ").concat(u,`

`),c)}}return n}function O0e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ",i=t.split(/\r?\n/),a=String(i.length+e-1).length;return i.map((o,s)=>{let l=String(s+e),c=l.length;return mV(l,a-c)+n+o})}function mV(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}function yh(t){let e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){let i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}var B0e="Shader: GLSL source code must be a JavaScript string",Vf=class extends xn{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Oe(!1),"unknown"}}constructor(e,n){oc(e),Oe(typeof n.source=="string",B0e);let i=Tu(n.source,null)||n.id||Xn("unnamed ".concat(Vf.getTypeName(n.shaderType)));super(e,{id:i}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e,i=Tu(n,null);i&&(this.id=Xn(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Vf.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Tu(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){let e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){let i=this.gl.getShaderInfoLog(this.handle),{shaderName:a,errors:o,warnings:s}=BA(i,this.source,this.shaderType,this.id);throw We.error("GLSL compilation errors in ".concat(a,`
`).concat(o))(),We.warn("GLSL compilation warnings in ".concat(a,`
`).concat(s))(),new Error("GLSL compilation errors in ".concat(a))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}},$f=class extends Vf{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}},zf=class extends Vf{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}};var D0e={[5126]:Ur.bind(null,"uniform1fv",no,1,zi),[35664]:Ur.bind(null,"uniform2fv",no,2,zi),[35665]:Ur.bind(null,"uniform3fv",no,3,zi),[35666]:Ur.bind(null,"uniform4fv",no,4,zi),[5124]:Ur.bind(null,"uniform1iv",Cu,1,zi),[35667]:Ur.bind(null,"uniform2iv",Cu,2,zi),[35668]:Ur.bind(null,"uniform3iv",Cu,3,zi),[35669]:Ur.bind(null,"uniform4iv",Cu,4,zi),[35670]:Ur.bind(null,"uniform1iv",Cu,1,zi),[35671]:Ur.bind(null,"uniform2iv",Cu,2,zi),[35672]:Ur.bind(null,"uniform3iv",Cu,3,zi),[35673]:Ur.bind(null,"uniform4iv",Cu,4,zi),[35674]:Ur.bind(null,"uniformMatrix2fv",no,4,lc),[35675]:Ur.bind(null,"uniformMatrix3fv",no,9,lc),[35676]:Ur.bind(null,"uniformMatrix4fv",no,16,lc),[35678]:Ii,[35680]:Ii,[5125]:Ur.bind(null,"uniform1uiv",B4,1,zi),[36294]:Ur.bind(null,"uniform2uiv",B4,2,zi),[36295]:Ur.bind(null,"uniform3uiv",B4,3,zi),[36296]:Ur.bind(null,"uniform4uiv",B4,4,zi),[35685]:Ur.bind(null,"uniformMatrix2x3fv",no,6,lc),[35686]:Ur.bind(null,"uniformMatrix2x4fv",no,8,lc),[35687]:Ur.bind(null,"uniformMatrix3x2fv",no,6,lc),[35688]:Ur.bind(null,"uniformMatrix3x4fv",no,12,lc),[35689]:Ur.bind(null,"uniformMatrix4x2fv",no,8,lc),[35690]:Ur.bind(null,"uniformMatrix4x3fv",no,12,lc),[35678]:Ii,[35680]:Ii,[35679]:Ii,[35682]:Ii,[36289]:Ii,[36292]:Ii,[36293]:Ii,[36298]:Ii,[36299]:Ii,[36300]:Ii,[36303]:Ii,[36306]:Ii,[36307]:Ii,[36308]:Ii,[36311]:Ii},F0e={},k0e={},G0e={},gV=[0];function DA(t,e,n,i){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(gV[0]=t,t=gV);let a=t.length;if(a%e&&We.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=i[a];o||(o=new n(a),i[a]=o);for(let s=0;s<a;s++)o[s]=t[s];return o}function no(t,e){return DA(t,e,Float32Array,F0e)}function Cu(t,e){return DA(t,e,Int32Array,k0e)}function B4(t,e){return DA(t,e,Uint32Array,G0e)}function FA(t,e,n){let i=D0e[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function _V(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};let e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function EV(t,e,n){for(let i in t){let a=t[i];if((!n||!!n[i])&&!U0e(a))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),a),new Error("".concat(e," Bad uniform ").concat(i))}return!0}function U0e(t){return Array.isArray(t)||ArrayBuffer.isView(t)?V0e(t):isFinite(t)||t===!0||t===!1||t instanceof Vi||t instanceof $i?!0:t instanceof Ht?!!t.texture:!1}function vV(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){let i=t[e];for(let a=0,o=n.length;a<o;++a)i[a]=n[a]}else t[e]=n.slice();else t[e]=n}function V0e(t){if(t.length===0)return!1;let e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Ii(){let t=null;return(e,n,i)=>{let a=t!==i;return a&&(e.uniform1i(n,i),t=i),a}}function Ur(t,e,n,i){let a=null,o=null;return(s,l,c)=>{let u=e(c,n),d=u.length,f=!1;if(a===null)a=new Float32Array(d),o=d,f=!0;else{Oe(o===d,"Uniform length cannot change.");for(let p=0;p<d;++p)if(u[p]!==a[p]){f=!0;break}}return f&&(i(s,t,l,u),a.set(u)),f}}function zi(t,e,n,i){t[e](n,i)}function lc(t,e,n,i){t[e](n,!1,i)}var $0e=5120,z0e=5121,j0e=5122,H0e=5123,yV=0,D4=1,W0e=2,Z0e=3,F4=4,X0e=5,q0e=6,qn=5126,K0e=35664,Y0e=35665,J0e=35666,p_=5124,Q0e=35667,eme=35668,tme=35669,h_=5125,rme=36294,nme=36295,ime=36296,ame=35670,ome=35671,sme=35672,lme=35673,cme=35674,ume=35675,dme=35676,fme=35685,pme=35686,hme=35687,mme=35688,gme=35689,_me=35690,kA={[qn]:[qn,1,"float"],[K0e]:[qn,2,"vec2"],[Y0e]:[qn,3,"vec3"],[J0e]:[qn,4,"vec4"],[p_]:[p_,1,"int"],[Q0e]:[p_,2,"ivec2"],[eme]:[p_,3,"ivec3"],[tme]:[p_,4,"ivec4"],[h_]:[h_,1,"uint"],[rme]:[h_,2,"uvec2"],[nme]:[h_,3,"uvec3"],[ime]:[h_,4,"uvec4"],[ame]:[qn,1,"bool"],[ome]:[qn,2,"bvec2"],[sme]:[qn,3,"bvec3"],[lme]:[qn,4,"bvec4"],[cme]:[qn,8,"mat2"],[fme]:[qn,8,"mat2x3"],[pme]:[qn,8,"mat2x4"],[ume]:[qn,12,"mat3"],[hme]:[qn,12,"mat3x2"],[mme]:[qn,12,"mat3x4"],[dme]:[qn,16,"mat4"],[gme]:[qn,16,"mat4x2"],[_me]:[qn,16,"mat4x3"]};function xV(t){switch(t){case yV:return yV;case D4:return D4;case Z0e:return D4;case W0e:return D4;case F4:return F4;case X0e:return F4;case q0e:return F4;default:return Oe(!1),0}}function GA(t){let e=kA[t];if(!e)return null;let[n,i]=e;return{type:n,components:i}}function k4(t,e){switch(t){case $0e:case z0e:case j0e:case H0e:t=qn;break;default:}for(let n in kA){let[i,a,o]=kA[n];if(i===t&&a===e)return{glType:n,name:o}}return null}var m_=class{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){let n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){let n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){let n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){let n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){let n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){let n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){let{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let a=0;a<i;a++){let{name:o,type:s,size:l}=n.getActiveAttrib(e.handle,a),c=n.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,l)}this.attributeInfos.sort((a,o)=>a.location-o.location)}_readVaryingsFromProgram(e){let{gl:n}=e;if(!pt(n))return;let i=n.getProgramParameter(e.handle,35971);for(let a=0;a<i;a++){let{name:o,type:s,size:l}=n.getTransformFeedbackVarying(e.handle,a);this._addVarying(a,o,s,l)}this.varyingInfos.sort((a,o)=>a.location-o.location)}_addAttribute(e,n,i,a){let{type:o,components:s}=GA(i),l={type:o,size:a*s};this._inferProperties(e,n,l);let c={location:e,name:n,accessor:new un(l)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,a){let{type:o,components:s}=GA(i),l=new un({type:o,size:a*s}),c={location:e,name:n,accessor:l};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}};var bV=4,Eme=35981,vme=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],cc=class extends xn{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",vme),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{hash:n,vs:i,fs:a,varyings:o,bufferMode:s=Eme}=e;return this.hash=n||"",this.vs=typeof i=="string"?new $f(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs=typeof a=="string"?new zf(this.gl,{id:"".concat(e.id,"-fs"),source:a}):a,Oe(this.vs instanceof $f),Oe(this.fs instanceof zf),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Gr(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new m_(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:a,offset:o=0,start:s,end:l,isIndexed:c=!1,indexType:u=5123,instanceCount:d=0,isInstanced:f=d>0,vertexArray:p=null,transformFeedback:h,framebuffer:m,parameters:_={},uniforms:E,samplers:v}=e;if((E||v)&&(We.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(E||{})),We.priority>=n){let y=m?m.id:"default",x="mode=".concat(Oo(this.gl,i)," verts=").concat(a," ")+"instances=".concat(d," indexType=").concat(Oo(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(c," ")+"Framebuffer=".concat(y);We.log(n,x)()}return Oe(p),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||a===0||f&&d===0?!1:(p.bindForDraw(a,d,()=>{if(m!==void 0&&(_=Object.assign({},_,{framebuffer:m})),h){let y=xV(i);h.begin(y)}this._bindTextures(),Or(this.gl,_,()=>{c&&f?this.gl2.drawElementsInstanced(i,a,u,o,d):c&&pt(this.gl)&&!isNaN(s)&&!isNaN(l)?this.gl2.drawRangeElements(i,s,l,a,u,o):c?this.gl.drawElements(i,a,u,o):f?this.gl2.drawArraysInstanced(i,o,a,d):this.gl.drawArrays(i,o,a)}),h&&h.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};We.priority>=2&&EV(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(let n in e){let i=e[n],a=this._uniformSetters[n];if(a){let o=i,s=!1;if(o instanceof Ht&&(o=o.texture),o instanceof Vi)if(s=this.uniforms[n]!==i,s){a.textureIndex===void 0&&(a.textureIndex=this._textureIndexCounter++);let l=o,{textureIndex:c}=a;l.bind(c),o=c,this._textureUniforms[n]=l}else o=a.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(a(o)||s)&&vV(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(let n in this._textureUniforms){let i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(let e in this._textureUniforms){let n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){let n=this.gl.getAttachedShaders(e),i={};for(let a of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new $f({handle:a});break;case 35632:i.fs=new zf({handle:a});break;default:}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){let n=this._getName();this.id=Xn(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){let{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),We.time(bV,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),We.timeEnd(bV,"linkProgram for ".concat(this._getName()))(),e.debug||We.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){let{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){let i=this.gl.getActiveUniform(this.handle,n),{name:a}=_V(i.name),o=e.getUniformLocation(this.handle,a);if(this._uniformSetters[a]=FA(e,o,i),i.size>1)for(let s=0;s<i.size;s++)o=e.getUniformLocation(this.handle,"".concat(a,"[").concat(s,"]")),this._uniformSetters["".concat(a,"[").concat(s,"]")]=FA(e,o,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}};var yme=34918,xme=34919,bme=35007,Sme=36795,Nme=35976,Ame=35887,Tme=36202,uc=class extends xn{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=pt(e),a=Au(e,or.TIMER_QUERY),o=i||a;for(let s of n)switch(s){case"queries":o=o&&i;break;case"timers":o=o&&a;break;default:Oe(!1)}return o}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(bme)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?Tme:Ame)}beginTransformFeedbackQuery(){return this.begin(Nme)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;let e=this.gl2.getQueryParameter(this.handle,xme);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(Sme)}getResult(){return this.gl2.getQueryParameter(this.handle,yme)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,a)=>{let o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(a("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return uc.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}};var dc=class extends xn{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return pt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gr(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,hl(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(let n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){let i=this._getVaryingIndex(e),{buffer:a,byteSize:o,byteOffset:s}=this._getBufferParams(n);return i<0?(this.unused[e]=a,We.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,a,s,o),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,a;return e instanceof Rt?a=e:(a=e.buffer,i=e.byteSize,n=e.byteOffset),(n!==void 0||i!==void 0)&&(n=n||0,i=i||a.byteLength-n),{buffer:a,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;let n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(let e in this.buffers){let{buffer:n,byteSize:i,byteOffset:a}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,a,i)}}_unbindBuffers(){if(this.bindOnUse)for(let e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,o=n&&n.handle;return!o||a===void 0?this.gl.bindBufferBase(35982,e,o):this.gl.bindBufferRange(35982,e,o,i,a),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}};var G4=null;function Cme(t){return(!G4||G4.byteLength<t)&&(G4=new ArrayBuffer(t)),G4}function SV(t,e){let n=Cme(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function NV(t){let{target:e,source:n,start:i=0,count:a=1}=t,o=n.length,s=a*o,l=0;for(let c=i;l<o;l++)e[c++]=n[l];for(;l<s;)l<s-l?(e.copyWithin(i+l,i,i+l),l*=2):(e.copyWithin(i+l,i,i+s-l),l=s);return e}var wme="elements must be GL.ELEMENT_ARRAY_BUFFER",Ri=class extends xn{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?pt(e)||mh()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ri(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ri.MAX_ATTRIBUTES=Ri.MAX_ATTRIBUTES||e.getParameter(34921),Ri.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Ri._setConstantFloatArray(e,n,i);break;case Int32Array:Ri._setConstantIntArray(e,n,i);break;case Uint32Array:Ri._setConstantUintArray(e,n,i);break;default:Oe(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:i})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ri.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Oe(!e||e.target===34963,wme),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(n.target===34963)return this.setElementBuffer(n,i);let{size:a,type:o,stride:s,offset:l,normalized:c,integer:u,divisor:d}=i,{gl:f,gl2:p}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,n.handle),u?(Oe(pt(f)),p.vertexAttribIPointer(e,a,o,s,l)):f.vertexAttribPointer(e,a,o,c,s,l),f.enableVertexAttribArray(e),p.vertexAttribDivisor(e,d||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!Ri.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){let i=this._normalizeConstantArrayValue(n),a=i.byteLength*e,o=i.length*e,s=!this.buffer;if(this.buffer=this.buffer||new Rt(this.gl,a),s=s||this.buffer.reallocate(a),s=s||!this._compareConstantArrayValues(i,this.bufferValue),s){let l=SV(n.constructor,o);NV({target:l,source:i,start:0,count:o}),this.buffer.subData(l),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:Oe(!1)}}static _setConstantIntArray(e,n,i){switch(Oe(pt(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:Oe(!1)}}static _setConstantUintArray(e,n,i){switch(Oe(pt(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:Oe(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return Oe(Number.isFinite(i)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(i,e);default:return this.gl.getVertexAttrib(i,e)}})}};var Ime="VertexArray: attributes must be Buffers or constants (i.e. typed array)",Rme=/^(.+)__LOCATION_([0-9]+)$/,Pme=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],xh=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.id||n.program&&n.program.id;this.id=i,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ri(e),C4(this,"VertexArray","v6.0",Pme),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;let{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(let n in e){let i=e[n];this._setAttribute(n,i)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,i);let{location:a,accessor:o}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return a>=0&&(this.values[a]=n,this.accessors[a]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(a,n,o)),this}setConstant(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{location:a,accessor:o}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return a>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[a]=n,this.accessors[a]=o,this.clearDrawParams(),this.vertexArrayObject.enable(a,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Rt(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Rt&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){let n=this.values[e];n instanceof Rt&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let a;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),a=i()}),a}_resolveLocationAndAccessor(e,n,i,a){let o={location:-1,accessor:null},{location:s,name:l}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=n,We.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;let c=this._getAttributeInfo(l||s);if(!c)return o;let u=this.accessors[s]||{},d=un.resolve(c.accessor,u,i,a),{size:f,type:p}=d;return Oe(Number.isFinite(f)&&Number.isFinite(p)),{location:s,accessor:d}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){let n=Number(e);if(Number.isFinite(n))return{location:n};let i=Rme.exec(e),a=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(a)+o,name:a}:{location:-1}}_setAttribute(e,n){if(n instanceof Rt)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Rt){let i=n[0],a=n[1];this.setBuffer(e,i,a)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){let i=n;this.setConstant(e,i)}else if(n.buffer instanceof Rt){let i=n;this.setBuffer(e,i.buffer,i)}else throw new Error(Ime)}_setConstantAttributes(e,n){let i=Math.max(e|0,n|0),a=this.values[0];ArrayBuffer.isView(a)&&this._setConstantAttributeZero(a,i);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)a=this.values[o],ArrayBuffer.isView(a)&&this._setConstantAttribute(o,a)}_setConstantAttributeZero(e,n){if(Ri.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}let i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Ri.setConstant(this.gl,e,n)}_updateDrawParams(){let e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){let i=this.values[n],a=this.accessors[n];if(!i)return;let{divisor:o}=a,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof Rt){let l=i;if(s){let c=l.getVertexCount(a);e.instanceCount=Math.min(e.instanceCount,c)}else{let c=l.getVertexCount(a);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return We.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}};function Mme(t,e){let{maxElts:n=16,size:i=1}=e,a="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(a+=",".concat(s%i===0?" ":"")),a+=jf(t[s],e);let o=t.length>n?"...":"]";return"".concat(a).concat(o)}function jf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=1e-16,{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return Mme(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);let a=t.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}function U4(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:a=!1}=t;Oe(n);let o=".*_.*",s=".*Matrix",l=n._uniformSetters,c={},u=Object.keys(l).sort(),d=0;for(let h of u)!h.match(o)&&!h.match(s)&&UA({table:c,header:e,uniforms:i,uniformName:h,undefinedOnly:a})&&d++;for(let h of u)h.match(s)&&UA({table:c,header:e,uniforms:i,uniformName:h,undefinedOnly:a})&&d++;for(let h of u)c[h]||UA({table:c,header:e,uniforms:i,uniformName:h,undefinedOnly:a})&&d++;let f=0,p={};if(!a)for(let h in i){let m=i[h];c[h]||(f++,p[h]={Type:"NOT USED: ".concat(m),[e]:jf(m)})}return{table:c,count:d,unusedTable:p,unusedCount:f}}function UA(t){let{table:e,header:n,uniforms:i,uniformName:a,undefinedOnly:o}=t,s=i[a],l=Lme(s);return!o||!l?(e[a]={[n]:l?jf(s):"N/A","Uniform Type":l?s:"NOT PROVIDED"},!0):!1}function Lme(t){return t!=null}function VA(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};let i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=AV(e,e.elements,null,n));let a=e.values;for(let o in a){let s=e._getAttributeInfo(o);if(s){let l="".concat(o,": ").concat(s.name),c=e.accessors[s.location];c&&(l="".concat(o,": ").concat(Ome(s.name,c))),i[l]=AV(e,a[o],c,n)}}return i}function AV(t,e,n,i){let{gl:a}=t;if(!e)return{[i]:"null","Format ":"N/A"};let o="NOT PROVIDED",s=1,l=0,c=0,u,d,f;if(n&&(o=n.type,s=n.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),e instanceof Rt){let p=e,{data:h,changed:m}=p.getDebugData();d=m?"*":"",f=h,c=p.byteLength,l=c/h.BYTES_PER_ELEMENT/s;let _;if(n){let E=n.divisor>0;_="".concat(E?"I ":"P "," ").concat(l," (x").concat(s,"=").concat(c," bytes ").concat(Oo(a,o),")")}else u=!0,_="".concat(c," bytes");return{[i]:"".concat(d).concat(jf(f,{size:s,isInteger:u})),"Format ":_}}return f=e,s=e.length,o=String(e.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[i]:"".concat(jf(f,{size:s,isInteger:u})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function Ome(t,e){let{type:n,size:i}=e,a=k4(n,i);return a?"".concat(t," (").concat(a.name,")"):t}function $A(t){let e={},n="Accessors for ".concat(t.id);for(let i of t.attributeInfos)if(i){let a=TV(i);e["in ".concat(a)]={[n]:JSON.stringify(i.accessor)}}for(let i of t.varyingInfos)if(i){let a=TV(i);e["out ".concat(a)]={[n]:JSON.stringify(i.accessor)}}return e}function TV(t){let{type:e,size:n}=t.accessor,i=k4(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}var CV=pl()&&typeof document!="undefined",Dme=0,Hf=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{onCreateContext:n=E=>_h(E),onAddHTML:i=null,onInitialize:a=()=>{},onRender:o=()=>{},onFinalize:s=()=>{},onError:l,gl:c=null,glOptions:u={},debug:d=!1,createFramebuffer:f=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:h=!0,stats:m=Lo.get("animation-loop-".concat(Dme++))}=e,{useDevicePixels:_=!0}=e;"useDevicePixelRatio"in e&&(We.deprecated("useDevicePixelRatio","useDevicePixels")(),_=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:a,onRender:o,onFinalize:s,onError:l,gl:c,glOptions:u,debug:d,createFramebuffer:f},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:h,useDevicePixels:_}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Oe(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;let n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=uc.isSupported(this.gl,["timers"])?new uc(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),i!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return We.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){let e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=CV?new Promise((e,n)=>{if(CV&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):CA(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):TA(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){let{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas!="undefined"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Df(this.props.gl,e):this.onCreateContext(e),!ac(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");A4(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){let e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";let n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);let i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){let e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight,i=1,{canvas:a}=this.gl;return a&&a.clientHeight?i=a.clientWidth/a.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&NA(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Ht(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){let{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}};var Wf="vs",g_="fs";function bn(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}var zA={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function IV(t){let e={};for(let n in t){let i=t[n],a=Fme(i);e[n]=a}return e}function Fme(t){let e=wV(t);return e==="object"?t?"type"in t?Object.assign({},t,zA[t.type]):"value"in t?(e=wV(t.value),Object.assign({type:e},t,zA[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},zA[e])}function wV(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}var kme="vs",Gme="fs",bh=class{constructor(e){let{name:n,vs:i,fs:a,dependencies:o=[],uniforms:s,getUniforms:l,deprecations:c=[],defines:u={},inject:d={},vertexShader:f,fragmentShader:p}=e;bn(typeof n=="string"),this.name=n,this.vs=i||f,this.fs=a||p,this.getModuleUniforms=l,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=u,this.injections=Ume(d),s&&(this.uniforms=IV(s))}getModuleSource(e){let n;switch(e){case kme:n=this.vs||"";break;case Gme:n=this.fs||"";break;default:bn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={},i=this.uniforms;for(let a in i){let o=i[a];a in e&&!o.private?(o.validate&&bn(o.validate(e[a],o),"".concat(this.name,": invalid ").concat(a)),n[a]=e[a]):n[a]=o.value}return n}};function Ume(t){let e={vs:{},fs:{}};for(let n in t){let i=t[n],a=n.slice(0,2);typeof i=="string"&&(i={order:0,injection:i}),e[a][n]=i}return e}function RV(t){return Vme(MV(t))}function Vme(t){let e={},n={};return PV({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,a)=>n[a]-n[i]).map(i=>e[i])}function PV(t){let{modules:e,level:n,moduleMap:i,moduleDepth:a}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(let o of e)i[o.name]=o,(a[o.name]===void 0||a[o.name]<n)&&(a[o.name]=n);for(let o of e)o.dependencies&&PV({modules:o.dependencies,level:n+1,moduleMap:i,moduleDepth:a})}function MV(t,e){return t.map(n=>(n instanceof bh||(bn(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),bn(n.name,"shader module has no name"),n=new bh(n),n.dependencies=MV(n.dependencies)),n))}function jA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=typeof window!="undefined"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",i=n.indexOf("MSIE ")!==-1,a=n.indexOf("Trident/")!==-1;return i||a}var $me=7936,zme=7937,jme=7938,Hme=35724,WA={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},wu={};Object.keys(WA).forEach(t=>{wu[t]=t});function Wme(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function LV(t){let e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||$me),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||zme);return{gpuVendor:Zme(n,i),vendor:n,renderer:i,version:t.getParameter(jme),shadingLanguageVersion:t.getParameter(Hme)}}function Zme(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}var HA={};function ZA(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=WA[e];if(bn(i,e),!jA(n))return!0;if(e in HA)return HA[e];let a=i[0],o=n.behavior||"enable",s="#extension GL_".concat(a," : ").concat(o,`
void main(void) {}`),l=t.createShader(35633);t.shaderSource(l,s),t.compileShader(l);let c=t.getShaderParameter(l,35713);return t.deleteShader(l),HA[e]=c,c}function Xme(t,e){let n=WA[e];bn(n,e);let i=Wme(t)&&n[1]||n[0],a=typeof i=="string"?!!t.getExtension(i):i;return bn(a===!1||a===!0),a}function __(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>Xme(t,n))}function OV(t){switch(LV(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function BV(t,e,n){let i=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return __(t,wu.GLSL_FRAG_DEPTH)&&(i+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),__(t,wu.GLSL_DERIVATIVES)&&ZA(t,wu.GLSL_DERIVATIVES)&&(i+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),__(t,wu.GLSL_FRAG_DATA)&&ZA(t,wu.GLSL_FRAG_DATA,{behavior:"require"})&&(i+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),__(t,wu.GLSL_TEXTURE_LOD)&&(i+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),i}var DV=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,FV=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`;var qme={[Wf]:DV,[g_]:FV},E_="__LUMA_INJECT_DECLARATIONS__",kV=/void\s+main\s*\([^)]*\)\s*\{\n?/,GV=/}\n?[^{}]*$/,XA=[];function V4(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=e===Wf;for(let o in n){let s=n[o];s.sort((c,u)=>c.order-u.order),XA.length=s.length;for(let c=0,u=s.length;c<u;++c)XA[c]=s[c].injection;let l="".concat(XA.join(`
`),`
`);switch(o){case"vs:#decl":a&&(t=t.replace(E_,l));break;case"vs:#main-start":a&&(t=t.replace(kV,c=>c+l));break;case"vs:#main-end":a&&(t=t.replace(GV,c=>l+c));break;case"fs:#decl":a||(t=t.replace(E_,l));break;case"fs:#main-start":a||(t=t.replace(kV,c=>c+l));break;case"fs:#main-end":a||(t=t.replace(GV,c=>l+c));break;default:t=t.replace(o,c=>c+l)}}return t=t.replace(E_,""),i&&(t=t.replace(/\}\s*$/,o=>o+qme[e])),t}function Sh(t){let e={};return bn(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(let i in n)e[i]=e[i]?"".concat(e[i],`
`).concat(n[i]):n[i]}),e}function Nh(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}var UV=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Kme=[...UV,[Nh("attribute"),"in $1"],[Nh("varying"),"out $1"]],Yme=[...UV,[Nh("varying"),"in $1"]],VV=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Jme=[...VV,[Nh("in"),"attribute $1"],[Nh("out"),"varying $1"]],Qme=[...VV,[Nh("in"),"varying $1"]],qA="gl_FragColor",KA=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,ege=/void\s+main\s*\([^)]*\)\s*\{\n?/;function YA(t,e,n){switch(e){case 300:return n?$4(t,Kme):tge(t);case 100:return n?$4(t,Jme):rge(t);default:throw new Error("unknown GLSL version ".concat(e))}}function $4(t,e){for(let[n,i]of e)t=t.replace(n,i);return t}function tge(t){t=$4(t,Yme);let e=t.match(KA);if(e){let n=e[1];t=t.replace(new RegExp("\\b".concat(qA,"\\b"),"g"),n)}else{let n="fragmentColor";t=t.replace(ege,i=>"out vec4 ".concat(n,`;
`).concat(i)).replace(new RegExp("\\b".concat(qA,"\\b"),"g"),n)}return t}function rge(t){t=$4(t,Qme);let e=t.match(KA);if(e){let n=e[1];t=t.replace(KA,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),qA)}return t}var nge=`

`.concat(E_,`

`),zV={[Wf]:"vertex",[g_]:"fragment"},ige=`precision highp float;

`;function JA(t,e){let{vs:n,fs:i}=e,a=RV(e.modules||[]);return{gl:t,vs:$V(t,Object.assign({},e,{source:n,type:Wf,modules:a})),fs:$V(t,Object.assign({},e,{source:i,type:g_,modules:a})),getUniforms:age(a)}}function $V(t,e){let{id:n,source:i,type:a,modules:o,defines:s={},hookFunctions:l=[],inject:c={},transpileToGLSL100:u=!1,prologue:d=!0,log:f}=e;bn(typeof i=="string","shader source must be a string");let p=a===Wf,h=i.split(`
`),m=100,_="",E=i;h[0].indexOf("#version ")===0?(m=300,_=h[0],E=h.slice(1).join(`
`)):_="#version ".concat(m);let v={};o.forEach(T=>{Object.assign(v,T.getDefines())}),Object.assign(v,s);let y=d?"".concat(_,`
`).concat(sge({id:n,source:i,type:a}),`
`).concat(oge({type:a}),`
`).concat(OV(t),`
`).concat(BV(t,m,!p),`
`).concat(lge(v),`
`).concat(p?"":ige,`
`):"".concat(_,`
`),x=uge(l),S={},N={},w={};for(let T in c){let I=typeof c[T]=="string"?{injection:c[T],order:0}:c[T],R=T.match(/^(v|f)s:(#)?([\w-]+)$/);if(R){let L=R[2],O=R[3];L?O==="decl"?N[T]=[I]:w[T]=[I]:S[T]=[I]}else w[T]=[I]}for(let T of o){f&&T.checkDeprecations(E,f);let I=T.getModuleSource(a,m);y+=I;let R=T.injections[a];for(let L in R){let O=L.match(/^(v|f)s:#([\w-]+)$/);if(O){let U=O[2]==="decl"?N:w;U[L]=U[L]||[],U[L].push(R[L])}else S[L]=S[L]||[],S[L].push(R[L])}}return y+=nge,y=V4(y,a,N),y+=cge(x[a],S),y+=E,y=V4(y,a,w),y=YA(y,u?100:m,p),y}function age(t){return function(n){let i={};for(let a of t){let o=a.getUniforms(n,i);Object.assign(i,o)}return i}}function oge(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(zV[e].toUpperCase(),`
`)}function sge(t){let{id:e,source:n,type:i}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(zV[i],`

`):""}function lge(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(let i in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;let a=t[i];(a||Number.isFinite(a))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],`
`))}return e===0&&(n+=`
`),n}function cge(t,e){let n="";for(let i in t){let a=t[i];if(n+="void ".concat(a.signature,` {
`),a.header&&(n+="  ".concat(a.header)),e[i]){let o=e[i];o.sort((s,l)=>s.order-l.order);for(let s of o)n+="  ".concat(s.injection,`
`)}a.footer&&(n+="  ".concat(a.footer)),n+=`}
`}return n}function uge(t){let e={vs:{},fs:{}};return t.forEach(n=>{let i;typeof n!="string"?(i=n,n=i.hook):i={},n=n.trim();let[a,o]=n.split(":"),s=n.replace(/\(.+/,"");e[a][s]=Object.assign(i,{signature:o})}),e}var dge="void main() {gl_FragColor = vec4(0);}",jV=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,fge=`#version 300 es
`.concat(jV);function z4(t,e){e=Array.isArray(e)?e:[e];let n=t.replace(/^\s+/,"").split(/\s+/),[i,a,o]=n;if(!e.includes(i)||!a||!o)return null;let s=o.split(";")[0];return{qualifier:i,type:a,name:s}}function v_(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{version:e=100,input:n,inputType:i,output:a}=t;if(!n)return e===300?fge:e>300?"#version ".concat(e,`
`).concat(jV):dge;let o=HV(n,i);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(i," ").concat(n,`;
out vec4 `).concat(a,`;
void main() {
  `).concat(a," = ").concat(o,`;
}`):"varying ".concat(i," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function QA(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return bn(!1),null}}function e7(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return bn(!1),null}}function HV(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return bn(!1),null}}var pge=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,j4={name:"fp32",vs:pge,fs:null};function ys(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}var art=1/Math.PI*180,ort=1/180*Math.PI,Sn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function t7(t,{precision:e=Sn.precision}={}){return t=hge(t),"".concat(parseFloat(t.toPrecision(e)))}function xs(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vr(t,e,n){return gge(t,i=>Math.max(e,Math.min(n,i)))}function Zf(t,e,n){return xs(t)?t.map((i,a)=>Zf(i,e[a],n)):n*e+(1-n)*t}function Kn(t,e,n){let i=Sn.EPSILON;n&&(Sn.EPSILON=n);try{if(t===e)return!0;if(xs(t)&&xs(e)){if(t.length!==e.length)return!1;for(let a=0;a<t.length;++a)if(!Kn(t[a],e[a]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Sn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Sn.EPSILON=i}}function hge(t){return Math.round(t/Sn.EPSILON)*Sn.EPSILON}function mge(t){return t.clone?t.clone():new Array(t.length)}function gge(t,e,n){if(xs(t)){let i=t;n=n||mge(i);for(let a=0;a<n.length&&a<i.length;++a)n[a]=e(t[a],a,n);return n}return e(t)}function _ge(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}var fc=class extends _ge(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:xs(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Sn)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+t7(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Kn(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(i===void 0)return this.lerp(this,e,n);for(let a=0;a<this.ELEMENTS;++a){let o=e[a];this[a]=o+i*(n[a]-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(let n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(let n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Sn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}};function Ege(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function sr(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Iu(t,e,n=""){if(Sn.debug&&!Ege(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}var Xf=class extends fc{get x(){return this[0]}set x(e){this[0]=sr(e)}get y(){return this[1]}set y(e){this[1]=sr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){let a=this[i]-e[i];n+=a*a}return sr(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return sr(n)}normalize(){let e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(let n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(let n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return ys(e>=0&&e<this.ELEMENTS,"index is out of range"),sr(this[e])}setComponent(e,n){return ys(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}};var Oa=1e-6,li=typeof Float32Array!="undefined"?Float32Array:Array,Ah=Math.random;var grt=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function vge(){var t=new li(2);return li!=Float32Array&&(t[0]=0,t[1]=0),t}function Ch(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function H4(t,e){return t[0]=-e[0],t[1]=-e[1],t}function W4(t,e,n,i){var a=e[0],o=e[1];return t[0]=a+i*(n[0]-a),t[1]=o+i*(n[1]-o),t}function WV(t,e,n){var i=e[0],a=e[1];return t[0]=n[0]*i+n[3]*a+n[6],t[1]=n[1]*i+n[4]*a+n[7],t}function ZV(t,e,n){var i=e[0],a=e[1];return t[0]=n[0]*i+n[4]*a+n[12],t[1]=n[1]*i+n[5]*a+n[13],t}var _rt=function(){var t=vge();return function(e,n,i,a,o,s){var l,c;for(n||(n=2),i||(i=0),a?c=Math.min(a*n+i,e.length):c=e.length,l=i;l<c;l+=n)t[0]=e[l],t[1]=e[l+1],o(t,t,s),e[l]=t[0],e[l+1]=t[1];return e}}();function XV(t,e,n){let i=e[0],a=e[1],o=n[3]*i+n[7]*a||1;return t[0]=(n[0]*i+n[4]*a)/o,t[1]=(n[1]*i+n[5]*a)/o,t}function Z4(t,e,n){let i=e[0],a=e[1],o=e[2],s=n[3]*i+n[7]*a+n[11]*o||1;return t[0]=(n[0]*i+n[4]*a+n[8]*o)/s,t[1]=(n[1]*i+n[5]*a+n[9]*o)/s,t[2]=(n[2]*i+n[6]*a+n[10]*o)/s,t}function qV(t,e,n){let i=e[0],a=e[1];return t[0]=n[0]*i+n[2]*a,t[1]=n[1]*i+n[3]*a,t[2]=e[2],t}function KV(t,e,n){let i=e[0],a=e[1];return t[0]=n[0]*i+n[2]*a,t[1]=n[1]*i+n[3]*a,t[2]=e[2],t[3]=e[3],t}function X4(t,e,n){let i=e[0],a=e[1],o=e[2];return t[0]=n[0]*i+n[3]*a+n[6]*o,t[1]=n[1]*i+n[4]*a+n[7]*o,t[2]=n[2]*i+n[5]*a+n[8]*o,t[3]=e[3],t}var pr={};mr(pr,{add:()=>Sge,angle:()=>l7,bezier:()=>Lge,ceil:()=>Nge,clone:()=>yge,copy:()=>xge,create:()=>q4,cross:()=>qf,dist:()=>c7,distance:()=>t$,div:()=>Uge,divide:()=>e$,dot:()=>Y4,equals:()=>kge,exactEquals:()=>Fge,floor:()=>Age,forEach:()=>$ge,fromValues:()=>K4,hermite:()=>Mge,inverse:()=>Pge,len:()=>S_,length:()=>YV,lerp:()=>i7,max:()=>Cge,min:()=>Tge,mul:()=>Gge,multiply:()=>QV,negate:()=>r7,normalize:()=>n7,random:()=>Oge,rotateX:()=>a7,rotateY:()=>o7,rotateZ:()=>s7,round:()=>wge,scale:()=>Ige,scaleAndAdd:()=>Rge,set:()=>bge,sqrDist:()=>Vge,sqrLen:()=>N_,squaredDistance:()=>r$,squaredLength:()=>n$,str:()=>Dge,sub:()=>b_,subtract:()=>JV,transformMat3:()=>y_,transformMat4:()=>Kf,transformQuat:()=>x_,zero:()=>Bge});function q4(){var t=new li(3);return li!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function yge(t){var e=new li(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function YV(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function K4(t,e,n){var i=new li(3);return i[0]=t,i[1]=e,i[2]=n,i}function xge(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function bge(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function Sge(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function JV(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function QV(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function e$(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Nge(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Age(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Tge(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Cge(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function wge(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Ige(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Rge(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function t$(t,e){var n=e[0]-t[0],i=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,i,a)}function r$(t,e){var n=e[0]-t[0],i=e[1]-t[1],a=e[2]-t[2];return n*n+i*i+a*a}function n$(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function r7(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Pge(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function n7(t,e){var n=e[0],i=e[1],a=e[2],o=n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Y4(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qf(t,e,n){var i=e[0],a=e[1],o=e[2],s=n[0],l=n[1],c=n[2];return t[0]=a*c-o*l,t[1]=o*s-i*c,t[2]=i*l-a*s,t}function i7(t,e,n,i){var a=e[0],o=e[1],s=e[2];return t[0]=a+i*(n[0]-a),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t}function Mge(t,e,n,i,a,o){var s=o*o,l=s*(2*o-3)+1,c=s*(o-2)+o,u=s*(o-1),d=s*(3-2*o);return t[0]=e[0]*l+n[0]*c+i[0]*u+a[0]*d,t[1]=e[1]*l+n[1]*c+i[1]*u+a[1]*d,t[2]=e[2]*l+n[2]*c+i[2]*u+a[2]*d,t}function Lge(t,e,n,i,a,o){var s=1-o,l=s*s,c=o*o,u=l*s,d=3*o*l,f=3*c*s,p=c*o;return t[0]=e[0]*u+n[0]*d+i[0]*f+a[0]*p,t[1]=e[1]*u+n[1]*d+i[1]*f+a[1]*p,t[2]=e[2]*u+n[2]*d+i[2]*f+a[2]*p,t}function Oge(t,e){e=e||1;var n=Ah()*2*Math.PI,i=Ah()*2-1,a=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=i*e,t}function Kf(t,e,n){var i=e[0],a=e[1],o=e[2],s=n[3]*i+n[7]*a+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*i+n[4]*a+n[8]*o+n[12])/s,t[1]=(n[1]*i+n[5]*a+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*a+n[10]*o+n[14])/s,t}function y_(t,e,n){var i=e[0],a=e[1],o=e[2];return t[0]=i*n[0]+a*n[3]+o*n[6],t[1]=i*n[1]+a*n[4]+o*n[7],t[2]=i*n[2]+a*n[5]+o*n[8],t}function x_(t,e,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=e[0],c=e[1],u=e[2],d=a*u-o*c,f=o*l-i*u,p=i*c-a*l,h=a*p-o*f,m=o*d-i*p,_=i*f-a*d,E=s*2;return d*=E,f*=E,p*=E,h*=2,m*=2,_*=2,t[0]=l+d+h,t[1]=c+f+m,t[2]=u+p+_,t}function a7(t,e,n,i){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(i)-a[2]*Math.sin(i),o[2]=a[1]*Math.sin(i)+a[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function o7(t,e,n,i){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(i)+a[0]*Math.cos(i),o[1]=a[1],o[2]=a[2]*Math.cos(i)-a[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function s7(t,e,n,i){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(i)-a[1]*Math.sin(i),o[1]=a[0]*Math.sin(i)+a[1]*Math.cos(i),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function l7(t,e){var n=t[0],i=t[1],a=t[2],o=e[0],s=e[1],l=e[2],c=Math.sqrt(n*n+i*i+a*a),u=Math.sqrt(o*o+s*s+l*l),d=c*u,f=d&&Y4(t,e)/d;return Math.acos(Math.min(Math.max(f,-1),1))}function Bge(t){return t[0]=0,t[1]=0,t[2]=0,t}function Dge(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Fge(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function kge(t,e){var n=t[0],i=t[1],a=t[2],o=e[0],s=e[1],l=e[2];return Math.abs(n-o)<=Oa*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=Oa*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-l)<=Oa*Math.max(1,Math.abs(a),Math.abs(l))}var b_=JV,Gge=QV,Uge=e$,c7=t$,Vge=r$,S_=YV,N_=n$,$ge=function(){var t=q4();return function(e,n,i,a,o,s){var l,c;for(n||(n=3),i||(i=0),a?c=Math.min(a*n+i,e.length):c=e.length,l=i;l<c;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],o(t,t,s),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}}();var u7=[0,0,0],J4,je=class extends Xf{static get ZERO(){return J4||(J4=new je(0,0,0),Object.freeze(J4)),J4}constructor(e=0,n=0,i=0){super(-0,-0,-0),arguments.length===1&&xs(e)?this.copy(e):(Sn.debug&&(sr(e),sr(n),sr(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Sn.debug&&(sr(e.x),sr(e.y),sr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=sr(e)}angle(e){return l7(this,e)}cross(e){return qf(this,this,e),this.check()}rotateX({radians:e,origin:n=u7}){return a7(this,this,n,e),this.check()}rotateY({radians:e,origin:n=u7}){return o7(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=u7}){return s7(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Kf(this,this,e),this.check()}transformAsVector(e){return Z4(this,this,e),this.check()}transformByMatrix3(e){return y_(this,this,e),this.check()}transformByMatrix2(e){return qV(this,this,e),this.check()}transformByQuaternion(e){return x_(this,this,e),this.check()}};var Q4,Yf=class extends Xf{static get ZERO(){return Q4||(Q4=new Yf(0,0,0,0),Object.freeze(Q4)),Q4}constructor(e=0,n=0,i=0,a=0){super(-0,-0,-0,-0),xs(e)&&arguments.length===1?this.copy(e):(Sn.debug&&(sr(e),sr(n),sr(i),sr(a)),this[0]=e,this[1]=n,this[2]=i,this[3]=a)}set(e,n,i,a){return this[0]=e,this[1]=n,this[2]=i,this[3]=a,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Sn.debug&&(sr(e.x),sr(e.y),sr(e.z),sr(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=sr(e)}get w(){return this[3]}set w(e){this[3]=sr(e)}transform(e){return Kf(this,this,e),this.check()}transformByMatrix3(e){return X4(this,this,e),this.check()}transformByMatrix2(e){return KV(this,this,e),this.check()}transformByQuaternion(e){return x_(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}};var Jf=class extends fc{toString(){let e="[";if(Sn.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=sr(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){let i=e*this.RANK;for(let a=0;a<this.RANK;++a)n[a]=this[i+a];return n}setColumn(e,n){let i=e*this.RANK;for(let a=0;a<this.RANK;++a)this[i+a]=n[a];return this}};function i$(){var t=new li(9);return li!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function a$(t,e){if(t===e){var n=e[1],i=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function o$(t,e){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=d*s-l*u,p=-d*o+l*c,h=u*o-s*c,m=n*f+i*p+a*h;return m?(m=1/m,t[0]=f*m,t[1]=(-d*i+a*u)*m,t[2]=(l*i-a*s)*m,t[3]=p*m,t[4]=(d*n-a*c)*m,t[5]=(-l*n+a*o)*m,t[6]=h*m,t[7]=(-u*n+i*c)*m,t[8]=(s*n-i*o)*m,t):null}function s$(t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e*(u*o-s*c)+n*(-u*a+s*l)+i*(c*a-o*l)}function d7(t,e,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=e[4],c=e[5],u=e[6],d=e[7],f=e[8],p=n[0],h=n[1],m=n[2],_=n[3],E=n[4],v=n[5],y=n[6],x=n[7],S=n[8];return t[0]=p*i+h*s+m*u,t[1]=p*a+h*l+m*d,t[2]=p*o+h*c+m*f,t[3]=_*i+E*s+v*u,t[4]=_*a+E*l+v*d,t[5]=_*o+E*c+v*f,t[6]=y*i+x*s+S*u,t[7]=y*a+x*l+S*d,t[8]=y*o+x*c+S*f,t}function l$(t,e,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=e[4],c=e[5],u=e[6],d=e[7],f=e[8],p=n[0],h=n[1];return t[0]=i,t[1]=a,t[2]=o,t[3]=s,t[4]=l,t[5]=c,t[6]=p*i+h*s+u,t[7]=p*a+h*l+d,t[8]=p*o+h*c+f,t}function c$(t,e,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=e[4],c=e[5],u=e[6],d=e[7],f=e[8],p=Math.sin(n),h=Math.cos(n);return t[0]=h*i+p*s,t[1]=h*a+p*l,t[2]=h*o+p*c,t[3]=h*s-p*i,t[4]=h*l-p*a,t[5]=h*c-p*o,t[6]=u,t[7]=d,t[8]=f,t}function f7(t,e,n){var i=n[0],a=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u$(t,e){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,c=a+a,u=n*s,d=i*s,f=i*l,p=a*s,h=a*l,m=a*c,_=o*s,E=o*l,v=o*c;return t[0]=1-f-m,t[3]=d-v,t[6]=p+E,t[1]=d+v,t[4]=1-u-m,t[7]=h-_,t[2]=p-E,t[5]=h+_,t[8]=1-u-f,t}var p7;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(p7||(p7={}));var zge=Object.freeze([1,0,0,0,1,0,0,0,1]),yr=class extends Jf{static get IDENTITY(){return Hge()}static get ZERO(){return jge()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return p7}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(zge)}fromObject(e){return this.check()}fromQuaternion(e){return u$(this,e),this.check()}set(e,n,i,a,o,s,l,c,u){return this[0]=e,this[1]=n,this[2]=i,this[3]=a,this[4]=o,this[5]=s,this[6]=l,this[7]=c,this[8]=u,this.check()}setRowMajor(e,n,i,a,o,s,l,c,u){return this[0]=e,this[1]=a,this[2]=l,this[3]=n,this[4]=o,this[5]=c,this[6]=i,this[7]=s,this[8]=u,this.check()}determinant(){return s$(this)}transpose(){return a$(this,this),this.check()}invert(){return o$(this,this),this.check()}multiplyLeft(e){return d7(this,e,this),this.check()}multiplyRight(e){return d7(this,this,e),this.check()}rotate(e){return c$(this,this,e),this.check()}scale(e){return Array.isArray(e)?f7(this,this,e):f7(this,this,[e,e]),this.check()}translate(e){return l$(this,this,e),this.check()}transform(e,n){let i;switch(e.length){case 2:i=WV(n||[-0,-0],e,this);break;case 3:i=y_(n||[-0,-0,-0],e,this);break;case 4:i=X4(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Iu(i,e.length),i}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}},e5,t5;function jge(){return e5||(e5=new yr([0,0,0,0,0,0,0,0,0]),Object.freeze(e5)),e5}function Hge(){return t5||(t5=new yr,Object.freeze(t5)),t5}function Wge(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f$(t,e){if(t===e){var n=e[1],i=e[2],a=e[3],o=e[6],s=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=a,t[13]=s,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function A_(t,e){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],p=e[10],h=e[11],m=e[12],_=e[13],E=e[14],v=e[15],y=n*l-i*s,x=n*c-a*s,S=n*u-o*s,N=i*c-a*l,w=i*u-o*l,T=a*u-o*c,I=d*_-f*m,R=d*E-p*m,L=d*v-h*m,O=f*E-p*_,H=f*v-h*_,U=p*v-h*E,X=y*U-x*H+S*O+N*L-w*R+T*I;return X?(X=1/X,t[0]=(l*U-c*H+u*O)*X,t[1]=(a*H-i*U-o*O)*X,t[2]=(_*T-E*w+v*N)*X,t[3]=(p*w-f*T-h*N)*X,t[4]=(c*L-s*U-u*R)*X,t[5]=(n*U-a*L+o*R)*X,t[6]=(E*S-m*T-v*x)*X,t[7]=(d*T-p*S+h*x)*X,t[8]=(s*H-l*L+u*I)*X,t[9]=(i*L-n*H-o*I)*X,t[10]=(m*w-_*S+v*y)*X,t[11]=(f*S-d*w-h*y)*X,t[12]=(l*R-s*O-c*I)*X,t[13]=(n*O-i*R+a*I)*X,t[14]=(_*x-m*N-E*y)*X,t[15]=(d*N-f*x+p*y)*X,t):null}function p$(t){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],_=t[14],E=t[15],v=e*s-n*o,y=e*l-i*o,x=e*c-a*o,S=n*l-i*s,N=n*c-a*s,w=i*c-a*l,T=u*m-d*h,I=u*_-f*h,R=u*E-p*h,L=d*_-f*m,O=d*E-p*m,H=f*E-p*_;return v*H-y*O+x*L+S*R-N*I+w*T}function ml(t,e,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=e[4],c=e[5],u=e[6],d=e[7],f=e[8],p=e[9],h=e[10],m=e[11],_=e[12],E=e[13],v=e[14],y=e[15],x=n[0],S=n[1],N=n[2],w=n[3];return t[0]=x*i+S*l+N*f+w*_,t[1]=x*a+S*c+N*p+w*E,t[2]=x*o+S*u+N*h+w*v,t[3]=x*s+S*d+N*m+w*y,x=n[4],S=n[5],N=n[6],w=n[7],t[4]=x*i+S*l+N*f+w*_,t[5]=x*a+S*c+N*p+w*E,t[6]=x*o+S*u+N*h+w*v,t[7]=x*s+S*d+N*m+w*y,x=n[8],S=n[9],N=n[10],w=n[11],t[8]=x*i+S*l+N*f+w*_,t[9]=x*a+S*c+N*p+w*E,t[10]=x*o+S*u+N*h+w*v,t[11]=x*s+S*d+N*m+w*y,x=n[12],S=n[13],N=n[14],w=n[15],t[12]=x*i+S*l+N*f+w*_,t[13]=x*a+S*c+N*p+w*E,t[14]=x*o+S*u+N*h+w*v,t[15]=x*s+S*d+N*m+w*y,t}function Qf(t,e,n){var i=n[0],a=n[1],o=n[2],s,l,c,u,d,f,p,h,m,_,E,v;return e===t?(t[12]=e[0]*i+e[4]*a+e[8]*o+e[12],t[13]=e[1]*i+e[5]*a+e[9]*o+e[13],t[14]=e[2]*i+e[6]*a+e[10]*o+e[14],t[15]=e[3]*i+e[7]*a+e[11]*o+e[15]):(s=e[0],l=e[1],c=e[2],u=e[3],d=e[4],f=e[5],p=e[6],h=e[7],m=e[8],_=e[9],E=e[10],v=e[11],t[0]=s,t[1]=l,t[2]=c,t[3]=u,t[4]=d,t[5]=f,t[6]=p,t[7]=h,t[8]=m,t[9]=_,t[10]=E,t[11]=v,t[12]=s*i+d*a+m*o+e[12],t[13]=l*i+f*a+_*o+e[13],t[14]=c*i+p*a+E*o+e[14],t[15]=u*i+h*a+v*o+e[15]),t}function Ih(t,e,n){var i=n[0],a=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h$(t,e,n,i){var a=i[0],o=i[1],s=i[2],l=Math.hypot(a,o,s),c,u,d,f,p,h,m,_,E,v,y,x,S,N,w,T,I,R,L,O,H,U,X,W;return l<Oa?null:(l=1/l,a*=l,o*=l,s*=l,c=Math.sin(n),u=Math.cos(n),d=1-u,f=e[0],p=e[1],h=e[2],m=e[3],_=e[4],E=e[5],v=e[6],y=e[7],x=e[8],S=e[9],N=e[10],w=e[11],T=a*a*d+u,I=o*a*d+s*c,R=s*a*d-o*c,L=a*o*d-s*c,O=o*o*d+u,H=s*o*d+a*c,U=a*s*d+o*c,X=o*s*d-a*c,W=s*s*d+u,t[0]=f*T+_*I+x*R,t[1]=p*T+E*I+S*R,t[2]=h*T+v*I+N*R,t[3]=m*T+y*I+w*R,t[4]=f*L+_*O+x*H,t[5]=p*L+E*O+S*H,t[6]=h*L+v*O+N*H,t[7]=m*L+y*O+w*H,t[8]=f*U+_*X+x*W,t[9]=p*U+E*X+S*W,t[10]=h*U+v*X+N*W,t[11]=m*U+y*X+w*W,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function r5(t,e,n){var i=Math.sin(n),a=Math.cos(n),o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+u*i,t[5]=s*a+d*i,t[6]=l*a+f*i,t[7]=c*a+p*i,t[8]=u*a-o*i,t[9]=d*a-s*i,t[10]=f*a-l*i,t[11]=p*a-c*i,t}function m$(t,e,n){var i=Math.sin(n),a=Math.cos(n),o=e[0],s=e[1],l=e[2],c=e[3],u=e[8],d=e[9],f=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-u*i,t[1]=s*a-d*i,t[2]=l*a-f*i,t[3]=c*a-p*i,t[8]=o*i+u*a,t[9]=s*i+d*a,t[10]=l*i+f*a,t[11]=c*i+p*a,t}function n5(t,e,n){var i=Math.sin(n),a=Math.cos(n),o=e[0],s=e[1],l=e[2],c=e[3],u=e[4],d=e[5],f=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+u*i,t[1]=s*a+d*i,t[2]=l*a+f*i,t[3]=c*a+p*i,t[4]=u*a-o*i,t[5]=d*a-s*i,t[6]=f*a-l*i,t[7]=p*a-c*i,t}function g$(t,e){var n=e[0],i=e[1],a=e[2],o=e[4],s=e[5],l=e[6],c=e[8],u=e[9],d=e[10];return t[0]=Math.hypot(n,i,a),t[1]=Math.hypot(o,s,l),t[2]=Math.hypot(c,u,d),t}function _$(t,e){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,c=a+a,u=n*s,d=i*s,f=i*l,p=a*s,h=a*l,m=a*c,_=o*s,E=o*l,v=o*c;return t[0]=1-f-m,t[1]=d+v,t[2]=p-E,t[3]=0,t[4]=d-v,t[5]=1-u-m,t[6]=h+_,t[7]=0,t[8]=p+E,t[9]=h-_,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E$(t,e,n,i,a,o,s){var l=1/(n-e),c=1/(a-i),u=1/(o-s);return t[0]=o*2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*c,t[6]=0,t[7]=0,t[8]=(n+e)*l,t[9]=(a+i)*c,t[10]=(s+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*u,t[15]=0,t}function Zge(t,e,n,i,a){var o=1/Math.tan(e/2),s;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(s=1/(i-a),t[10]=(a+i)*s,t[14]=2*a*i*s):(t[10]=-1,t[14]=-2*i),t}var h7=Zge;function Xge(t,e,n,i,a,o,s){var l=1/(e-n),c=1/(i-a),u=1/(o-s);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*l,t[13]=(a+i)*c,t[14]=(s+o)*u,t[15]=1,t}var v$=Xge;function y$(t,e,n,i){var a,o,s,l,c,u,d,f,p,h,m=e[0],_=e[1],E=e[2],v=i[0],y=i[1],x=i[2],S=n[0],N=n[1],w=n[2];return Math.abs(m-S)<Oa&&Math.abs(_-N)<Oa&&Math.abs(E-w)<Oa?Wge(t):(d=m-S,f=_-N,p=E-w,h=1/Math.hypot(d,f,p),d*=h,f*=h,p*=h,a=y*p-x*f,o=x*d-v*p,s=v*f-y*d,h=Math.hypot(a,o,s),h?(h=1/h,a*=h,o*=h,s*=h):(a=0,o=0,s=0),l=f*s-p*o,c=p*a-d*s,u=d*o-f*a,h=Math.hypot(l,c,u),h?(h=1/h,l*=h,c*=h,u*=h):(l=0,c=0,u=0),t[0]=a,t[1]=l,t[2]=d,t[3]=0,t[4]=o,t[5]=c,t[6]=f,t[7]=0,t[8]=s,t[9]=u,t[10]=p,t[11]=0,t[12]=-(a*m+o*_+s*E),t[13]=-(l*m+c*_+u*E),t[14]=-(d*m+f*_+p*E),t[15]=1,t)}function qge(){var t=new li(4);return li!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function x$(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Rh(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function b$(t){var e=t[0],n=t[1],i=t[2],a=t[3];return Math.hypot(e,n,i,a)}function S$(t){var e=t[0],n=t[1],i=t[2],a=t[3];return e*e+n*n+i*i+a*a}function N$(t,e){var n=e[0],i=e[1],a=e[2],o=e[3],s=n*n+i*i+a*a+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=i*s,t[2]=a*s,t[3]=o*s,t}function A$(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function T$(t,e,n,i){var a=e[0],o=e[1],s=e[2],l=e[3];return t[0]=a+i*(n[0]-a),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t[3]=l+i*(n[3]-l),t}function bs(t,e,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*a+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*a+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*a+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*a+n[11]*o+n[15]*s,t}function C$(t,e,n){var i=e[0],a=e[1],o=e[2],s=n[0],l=n[1],c=n[2],u=n[3],d=u*i+l*o-c*a,f=u*a+c*i-s*o,p=u*o+s*a-l*i,h=-s*i-l*a-c*o;return t[0]=d*u+h*-s+f*-c-p*-l,t[1]=f*u+h*-l+p*-s-d*-c,t[2]=p*u+h*-c+d*-l-f*-s,t[3]=e[3],t}var Frt=function(){var t=qge();return function(e,n,i,a,o,s){var l,c;for(n||(n=4),i||(i=0),a?c=Math.min(a*n+i,e.length):c=e.length,l=i;l<c;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],o(t,t,s),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}}();var _7;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(_7||(_7={}));var Kge=45*Math.PI/180,Yge=1,m7=.1,g7=500,Jge=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),zt=class extends Jf{static get IDENTITY(){return e_e()}static get ZERO(){return Qge()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return _7}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,a,o,s,l,c,u,d,f,p,h,m,_,E){return this[0]=e,this[1]=n,this[2]=i,this[3]=a,this[4]=o,this[5]=s,this[6]=l,this[7]=c,this[8]=u,this[9]=d,this[10]=f,this[11]=p,this[12]=h,this[13]=m,this[14]=_,this[15]=E,this.check()}setRowMajor(e,n,i,a,o,s,l,c,u,d,f,p,h,m,_,E){return this[0]=e,this[1]=o,this[2]=u,this[3]=h,this[4]=n,this[5]=s,this[6]=d,this[7]=m,this[8]=i,this[9]=l,this[10]=f,this[11]=_,this[12]=a,this[13]=c,this[14]=p,this[15]=E,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Jge)}fromObject(e){return this.check()}fromQuaternion(e){return _$(this,e),this.check()}frustum(e){let{left:n,right:i,bottom:a,top:o,near:s=m7,far:l=g7}=e;return l===1/0?t_e(this,n,i,a,o,s):E$(this,n,i,a,o,s,l),this.check()}lookAt(e){let{eye:n,center:i=[0,0,0],up:a=[0,1,0]}=e;return y$(this,n,i,a),this.check()}ortho(e){let{left:n,right:i,bottom:a,top:o,near:s=m7,far:l=g7}=e;return v$(this,n,i,a,o,s,l),this.check()}orthographic(e){let{fovy:n=Kge,aspect:i=Yge,focalDistance:a=1,near:o=m7,far:s=g7}=e;w$(n);let l=n/2,c=a*Math.tan(l),u=c*i;return this.ortho({left:-u,right:u,bottom:-c,top:c,near:o,far:s})}perspective(e){let{fovy:n=45*Math.PI/180,aspect:i=1,near:a=.1,far:o=500}=e;return w$(n),h7(this,n,i,a,o),this.check()}determinant(){return p$(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];let i=this.getScale(n),a=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*a,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*a,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*a,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];let i=this.getScale(n),a=1/i[0],o=1/i[1],s=1/i[2];return e[0]=this[0]*a,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*a,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*a,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return f$(this,this),this.check()}invert(){return A_(this,this),this.check()}multiplyLeft(e){return ml(this,e,this),this.check()}multiplyRight(e){return ml(this,this,e),this.check()}rotateX(e){return r5(this,this,e),this.check()}rotateY(e){return m$(this,this,e),this.check()}rotateZ(e){return n5(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return h$(this,this,e,n),this.check()}scale(e){return Ih(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Qf(this,this,e),this.check()}transform(e,n){return e.length===4?(n=bs(n||[-0,-0,-0,-0],e,this),Iu(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){let{length:i}=e,a;switch(i){case 2:a=ZV(n||[-0,-0],e,this);break;case 3:a=Kf(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Iu(a,e.length),a}transformAsVector(e,n){let i;switch(e.length){case 2:i=XV(n||[-0,-0],e,this);break;case 3:i=Z4(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Iu(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}},i5,a5;function Qge(){return i5||(i5=new zt([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(i5)),i5}function e_e(){return a5||(a5=new zt,Object.freeze(a5)),a5}function w$(t){if(t>Math.PI*2)throw Error("expected radians")}function t_e(t,e,n,i,a,o){let s=2*o/(n-e),l=2*o/(a-i),c=(n+e)/(n-e),u=(a+i)/(a-i),d=-1,f=-1,p=-2*o;return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=c,t[9]=u,t[10]=d,t[11]=f,t[12]=0,t[13]=0,t[14]=p,t[15]=0,t}function I$(){var t=new li(4);return li!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function R$(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function E7(t,e,n){n=n*.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function v7(t,e,n){var i=e[0],a=e[1],o=e[2],s=e[3],l=n[0],c=n[1],u=n[2],d=n[3];return t[0]=i*d+s*l+a*u-o*c,t[1]=a*d+s*c+o*l-i*u,t[2]=o*d+s*u+i*c-a*l,t[3]=s*d-i*l-a*c-o*u,t}function P$(t,e,n){n*=.5;var i=e[0],a=e[1],o=e[2],s=e[3],l=Math.sin(n),c=Math.cos(n);return t[0]=i*c+s*l,t[1]=a*c+o*l,t[2]=o*c-a*l,t[3]=s*c-i*l,t}function M$(t,e,n){n*=.5;var i=e[0],a=e[1],o=e[2],s=e[3],l=Math.sin(n),c=Math.cos(n);return t[0]=i*c-o*l,t[1]=a*c+s*l,t[2]=o*c+i*l,t[3]=s*c-a*l,t}function L$(t,e,n){n*=.5;var i=e[0],a=e[1],o=e[2],s=e[3],l=Math.sin(n),c=Math.cos(n);return t[0]=i*c+a*l,t[1]=a*c-i*l,t[2]=o*c+s*l,t[3]=s*c-o*l,t}function O$(t,e){var n=e[0],i=e[1],a=e[2];return t[0]=n,t[1]=i,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-a*a)),t}function C_(t,e,n,i){var a=e[0],o=e[1],s=e[2],l=e[3],c=n[0],u=n[1],d=n[2],f=n[3],p,h,m,_,E;return h=a*c+o*u+s*d+l*f,h<0&&(h=-h,c=-c,u=-u,d=-d,f=-f),1-h>Oa?(p=Math.acos(h),m=Math.sin(p),_=Math.sin((1-i)*p)/m,E=Math.sin(i*p)/m):(_=1-i,E=i),t[0]=_*a+E*c,t[1]=_*o+E*u,t[2]=_*s+E*d,t[3]=_*l+E*f,t}function B$(t,e){var n=e[0],i=e[1],a=e[2],o=e[3],s=n*n+i*i+a*a+o*o,l=s?1/s:0;return t[0]=-n*l,t[1]=-i*l,t[2]=-a*l,t[3]=o*l,t}function D$(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function y7(t,e){var n=e[0]+e[4]+e[8],i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);var o=(a+1)%3,s=(a+2)%3;i=Math.sqrt(e[a*3+a]-e[o*3+o]-e[s*3+s]+1),t[a]=.5*i,i=.5/i,t[3]=(e[o*3+s]-e[s*3+o])*i,t[o]=(e[o*3+a]+e[a*3+o])*i,t[s]=(e[s*3+a]+e[a*3+s])*i}return t}var F$=x$;var k$=Rh,G$=A$,U$=T$,V$=b$;var $$=S$;var z$=N$;var j$=function(){var t=q4(),e=K4(1,0,0),n=K4(0,1,0);return function(i,a,o){var s=Y4(a,o);return s<-.999999?(qf(t,e,a),S_(t)<1e-6&&qf(t,n,a),n7(t,t),E7(i,t,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(qf(t,a,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+s,z$(i,i))}}(),Xrt=function(){var t=I$(),e=I$();return function(n,i,a,o,s,l){return C_(t,i,s,l),C_(e,a,o,l),C_(n,t,e,2*l*(1-l)),n}}(),qrt=function(){var t=i$();return function(e,n,i,a){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],z$(e,y7(e,t))}}();var n_e=[0,0,0,1],pc=class extends fc{constructor(e=0,n=0,i=0,a=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,n,i,a)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,a){return this[0]=e,this[1]=n,this[2]=i,this[3]=a,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return y7(this,e),this.check()}fromAxisRotation(e,n){return E7(this,e,n),this.check()}identity(){return R$(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=sr(e)}get y(){return this[1]}set y(e){this[1]=sr(e)}get z(){return this[2]}set z(e){this[2]=sr(e)}get w(){return this[3]}set w(e){this[3]=sr(e)}len(){return V$(this)}lengthSquared(){return $$(this)}dot(e){return G$(this,e)}rotationTo(e,n){return j$(this,e,n),this.check()}add(e){return F$(this,this,e),this.check()}calculateW(){return O$(this,this),this.check()}conjugate(){return D$(this,this),this.check()}invert(){return B$(this,this),this.check()}lerp(e,n,i){return i===void 0?this.lerp(this,e,n):(U$(this,e,n,i),this.check())}multiplyRight(e){return v7(this,this,e),this.check()}multiplyLeft(e){return v7(this,e,this),this.check()}normalize(){let e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,e===0&&(this[3]=1),this.check()}rotateX(e){return P$(this,this,e),this.check()}rotateY(e){return M$(this,this,e),this.check()}rotateZ(e){return L$(this,this,e),this.check()}scale(e){return k$(this,this,e),this.check()}slerp(e,n,i){let a,o,s;switch(arguments.length){case 1:({start:a=n_e,target:o,ratio:s}=e);break;case 2:a=this,o=e,s=n;break;default:a=e,o=n,s=i}return C_(this,a,o,s),this.check()}transformVector4(e,n=new Yf){return C$(n,e,this),Iu(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}};var o5={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2};var x7=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`;var i_e={lightSources:{}};function b7(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function a_e(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t,a={};return e?a["lighting_uAmbientLight.color"]=b7(e):a["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((o,s)=>{a["lighting_uPointLight[".concat(s,"].color")]=b7(o),a["lighting_uPointLight[".concat(s,"].position")]=o.position,a["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),a.lighting_uPointLightCount=n.length,i.forEach((o,s)=>{a["lighting_uDirectionalLight[".concat(s,"].color")]=b7(o),a["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),a.lighting_uDirectionalLightCount=i.length,a}function H$(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i_e;if("lightSources"in t){let{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},a_e({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){let e={pointLights:[],directionalLights:[]};for(let n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break;default:}return H$({lightSources:e})}return{}}var s5={name:"lights",vs:x7,fs:x7,getUniforms:H$,defines:{MAX_LIGHTS:3}};var o_e=new Uint8Array([0,255,255,255]),s_e={pickingSelectedColor:null,pickingHighlightColor:o_e,pickingActive:!1,pickingAttribute:!1};function l_e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s_e,e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{let n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){let n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}var c_e=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,u_e=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,l5={name:"picking",vs:c_e,fs:u_e,getUniforms:l_e};var W$=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`;var d_e={};function f_e(t){let{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:a=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:a.map(o=>o/255)}}function p_e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d_e;if(!("material"in t))return{};let{material:e}=t;return e?f_e(e):{lighting_uEnabled:!1}}var Ru={name:"gouraud-lighting",dependencies:[s5],vs:W$,defines:{LIGHTING_VERTEX:1},getUniforms:p_e};var Z$=`uniform mat4 u_MVPMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_NormalMatrix;

varying vec3 pbr_vPosition;
varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
# ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
# else
varying vec3 pbr_vNormal;
# endif
#endif

void pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)
{
  vec4 pos = u_ModelMatrix * position;
  pbr_vPosition = vec3(pos.xyz) / pos.w;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));
  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));
  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;
  pbr_vTBN = mat3(tangentW, bitangentW, normalW);
#else
  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));
#endif
#endif

#ifdef HAS_UV
  pbr_vUV = uv;
#else
  pbr_vUV = vec2(0.,0.);
#endif
}
`;var X$=`#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)
# error PBR fragment shader: Texture LOD is not available
#endif

#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)
# error PBR fragment shader: Derivatives are not available
#endif


#if (__VERSION__ < 300)
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)
#else
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)
#endif

precision highp float;

uniform bool pbr_uUnlit;

#ifdef USE_IBL
uniform samplerCube u_DiffuseEnvSampler;
uniform samplerCube u_SpecularEnvSampler;
uniform sampler2D u_brdfLUT;
uniform vec2 u_ScaleIBLAmbient;
#endif

#ifdef HAS_BASECOLORMAP
uniform sampler2D u_BaseColorSampler;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_NormalSampler;
uniform float u_NormalScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_EmissiveSampler;
uniform vec3 u_EmissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_MetallicRoughnessSampler;
#endif
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_OcclusionSampler;
uniform float u_OcclusionStrength;
#endif

#ifdef ALPHA_CUTOFF
uniform float u_AlphaCutoff;
#endif

uniform vec2 u_MetallicRoughnessValues;
uniform vec4 u_BaseColorFactor;

uniform vec3 u_Camera;
#ifdef PBR_DEBUG
uniform vec4 u_ScaleDiffBaseMR;
uniform vec4 u_ScaleFGDSpec;
#endif

varying vec3 pbr_vPosition;

varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
#else
varying vec3 pbr_vNormal;
#endif
#endif


struct PBRInfo
{
  float NdotL;
  float NdotV;
  float NdotH;
  float LdotH;
  float VdotH;
  float perceptualRoughness;
  float metalness;
  vec3 reflectance0;
  vec3 reflectance90;
  float alphaRoughness;
  vec3 diffuseColor;
  vec3 specularColor;
  vec3 n;
  vec3 v;
};

const float M_PI = 3.141592653589793;
const float c_MinRoughness = 0.04;

vec4 SRGBtoLINEAR(vec4 srgbIn)
{
#ifdef MANUAL_SRGB
#ifdef SRGB_FAST_APPROXIMATION
  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));
#else
  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);
  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );
#endif
  return vec4(linOut,srgbIn.w);;
#else
  return srgbIn;
#endif
}

vec3 getNormal()
{
#ifndef HAS_TANGENTS
  vec3 pos_dx = dFdx(pbr_vPosition);
  vec3 pos_dy = dFdy(pbr_vPosition);
  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));
  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));
  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);

#ifdef HAS_NORMALS
  vec3 ng = normalize(pbr_vNormal);
#else
  vec3 ng = cross(pos_dx, pos_dy);
#endif

  t = normalize(t - ng * dot(ng, t));
  vec3 b = normalize(cross(ng, t));
  mat3 tbn = mat3(t, b, ng);
#else
  mat3 tbn = pbr_vTBN;
#endif

#ifdef HAS_NORMALMAP
  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;
  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));
#else
  vec3 n = normalize(tbn[2].xyz);
#endif

  return n;
}


#ifdef USE_IBL
vec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)
{
  float mipCount = 9.0;
  float lod = (pbrInputs.perceptualRoughness * mipCount);
  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,
    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;
  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;

#ifdef USE_TEX_LOD
  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;
#else
  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;
#endif

  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;
  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);
  diffuse *= u_ScaleIBLAmbient.x;
  specular *= u_ScaleIBLAmbient.y;

  return diffuse + specular;
}
#endif


vec3 diffuse(PBRInfo pbrInputs)
{
  return pbrInputs.diffuseColor / M_PI;
}

vec3 specularReflection(PBRInfo pbrInputs)
{
  return pbrInputs.reflectance0 +
    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *
    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);
}



float geometricOcclusion(PBRInfo pbrInputs)
{
  float NdotL = pbrInputs.NdotL;
  float NdotV = pbrInputs.NdotV;
  float r = pbrInputs.alphaRoughness;

  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));
  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));
  return attenuationL * attenuationV;
}





float microfacetDistribution(PBRInfo pbrInputs)
{
  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;
  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;
  return roughnessSq / (M_PI * f * f);
}

void PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {
  pbrInputs.NdotL = 1.0;
  pbrInputs.NdotH = 0.0;
  pbrInputs.LdotH = 0.0;
  pbrInputs.VdotH = 1.0;
}

void PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {
  vec3 n = pbrInputs.n;
  vec3 v = pbrInputs.v;
  vec3 l = normalize(lightDirection);
  vec3 h = normalize(l+v);

  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);
  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);
  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);
  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);
}

void PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {
  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);
  PBRInfo_setDirectionalLight(pbrInputs, light_direction);
}

vec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {
  vec3 F = specularReflection(pbrInputs);
  float G = geometricOcclusion(pbrInputs);
  float D = microfacetDistribution(pbrInputs);
  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);
  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);
  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);
}

vec4 pbr_filterColor(vec4 colorUnused)
{
#ifdef HAS_BASECOLORMAP
  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;
#else
  vec4 baseColor = u_BaseColorFactor;
#endif

#ifdef ALPHA_CUTOFF
  if (baseColor.a < u_AlphaCutoff) {
    discard;
  }
#endif

  vec3 color = vec3(0, 0, 0);

  if(pbr_uUnlit){
    color.rgb = baseColor.rgb;
  }
  else{


    float perceptualRoughness = u_MetallicRoughnessValues.y;
    float metallic = u_MetallicRoughnessValues.x;
#ifdef HAS_METALROUGHNESSMAP

    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);
    perceptualRoughness = mrSample.g * perceptualRoughness;
    metallic = mrSample.b * metallic;
#endif
    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);
    metallic = clamp(metallic, 0.0, 1.0);

    float alphaRoughness = perceptualRoughness * perceptualRoughness;

    vec3 f0 = vec3(0.04);
    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);
    diffuseColor *= 1.0 - metallic;
    vec3 specularColor = mix(f0, baseColor.rgb, metallic);
    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);



    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);
    vec3 specularEnvironmentR0 = specularColor.rgb;
    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;

    vec3 n = getNormal();
    vec3 v = normalize(u_Camera - pbr_vPosition);

    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);
    vec3 reflection = -normalize(reflect(v, n));

    PBRInfo pbrInputs = PBRInfo(
      0.0,
      NdotV,
      0.0,
      0.0,
      0.0,
      perceptualRoughness,
      metallic,
      specularEnvironmentR0,
      specularEnvironmentR90,
      alphaRoughness,
      diffuseColor,
      specularColor,
      n,
      v
    );

#ifdef USE_LIGHTS
    PBRInfo_setAmbientLight(pbrInputs);
    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {
      if (i < lighting_uDirectionalLightCount) {
        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);
        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);
      }
    }
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {
      if (i < lighting_uPointLightCount) {
        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);
        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));
        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);
      }
    }
#endif
#ifdef USE_IBL
    color += getIBLContribution(pbrInputs, n, reflection);
#endif
#ifdef HAS_OCCLUSIONMAP
    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;
    color = mix(color, color * ao, u_OcclusionStrength);
#endif

#ifdef HAS_EMISSIVEMAP
    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;
    color += emissive;
#endif

#ifdef PBR_DEBUG





    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);
    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);
    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);
#endif

  }

  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);
}
`;var Mh={name:"pbr",vs:Z$,fs:X$,defines:{LIGHTING_FRAGMENT:1},dependencies:[s5]};var h_e=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,S7={name:"transform",vs:h_e,fs:null};var io=class{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new io(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){let n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{vs:n="",fs:i="",defines:a={},inject:o={},varyings:s=[],bufferMode:l=35981,transpileToGLSL100:c=!1}=e,u=this._getModuleList(e.modules),d=this._getHash(n),f=this._getHash(i),p=u.map(x=>this._getHash(x.name)).sort(),h=s.map(x=>this._getHash(x)),m=Object.keys(a).sort(),_=Object.keys(o).sort(),E=[],v=[];for(let x of m)E.push(this._getHash(x)),E.push(this._getHash(a[x]));for(let x of _)v.push(this._getHash(x)),v.push(this._getHash(o[x]));let y="".concat(d,"/").concat(f,"D").concat(E.join("/"),"M").concat(p.join("/"),"I").concat(v.join("/"),"V").concat(h.join("/"),"H").concat(this.stateHash,"B").concat(l).concat(c?"T":"");if(!this._programCache[y]){let x=JA(this.gl,{vs:n,fs:i,modules:u,inject:o,defines:a,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[y]=new cc(this.gl,{hash:y,vs:x.vs,fs:x.fs,varyings:s,bufferMode:l}),this._getUniforms[y]=x.getUniforms||(S=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){let n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=new Array(this._defaultModules.length+e.length),i={},a=0;for(let o=0,s=this._defaultModules.length;o<s;++o){let l=this._defaultModules[o],c=l.name;n[a++]=l,i[c]=!0}for(let o=0,s=e.length;o<s;++o){let l=e[o],c=l.name;i[c]||(n[a++]=l,i[c]=!0)}return n.length=a,n}};var m_e={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function q$(t,e,n){let i={},a=e.indices;for(let o in e.attributes){let s=e.attributes[o],l=g_e(o,n);if(o==="indices")a=s;else if(s.constant)i[l]=s.value;else{let c=s.value,u={...s};delete u.value,i[l]=[new Rt(t,c),u],__e(o,u)}}if(a){let o=a.value||a;Oe(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');let s={size:1,isIndexed:a.isIndexed===void 0?!0:a.isIndexed};i.indices=[new Rt(t,{data:o,target:34963}),s]}return i}function g_e(t,e){let{attributeMap:n=m_e}=e||{};return n&&n[t]||t}function __e(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break;default:}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;default:}Oe(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}var Lh=2,E_e=1e4,v_e="Model needs drawMode and vertexCount",K$=()=>{},y_e={},wr=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{id:i=Xn("model")}=n;Oe(ac(e)),this.id=i,this.gl=e,this.id=n.id||Xn("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||io.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;let{program:n=null,vs:i,fs:a,modules:o,defines:s,inject:l,varyings:c,bufferMode:u,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:a,modules:o,defines:s,inject:l,varyings:c,bufferMode:u,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Oe(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),v_e)}setProps(e){this._setModelProps(e)}delete(){for(let e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){let{program:n,vs:i,fs:a,modules:o,defines:s,inject:l,varyings:c,bufferMode:u,transpileToGLSL100:d}=e;this.programProps={program:n,vs:i,fs:a,modules:o,defines:s,inject:l,varyings:c,bufferMode:u,transpileToGLSL100:d},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Oe(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Oe(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=q$(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(hl(e))return this;let n={};for(let i in e){let a=e[i];n[i]=a.getValue?a.getValue():a}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();let n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){let n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return Nu(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();let{moduleSettings:n=null,framebuffer:i,uniforms:a={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:l={},vertexArray:c=this.vertexArray}=e;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(a);let u;We.priority>=Lh&&(u=this._logDrawCallStart(Lh));let d=this.vertexArray.getDrawParams(),{isIndexed:f=d.isIndexed,indexType:p=d.indexType,indexOffset:h=d.indexOffset,vertexArrayInstanced:m=d.isInstanced}=this.props;m&&!this.isInstanced&&We.warn("Found instanced attributes on non-instanced model",this.id)();let{isInstanced:_,instanceCount:E}=this,{onBeforeRender:v=K$,onAfterRender:y=K$}=this.props;v(),this.program.setUniforms(this.uniforms);let x=this.program.draw(Object.assign(y_e,e,{logPriority:u,uniforms:null,framebuffer:i,parameters:l,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:f,indexType:p,isInstanced:_,instanceCount:E,offset:f?h:0}));return y(),We.priority>=Lh&&this._logDrawCallEnd(u,c,i),x}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{discard:n=!0,feedbackBuffers:i,unbindModels:a=[]}=e,{parameters:o}=e;i&&this._setFeedbackBuffers(i),n&&(o=Object.assign({},o,{[35977]:n})),a.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{a.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return We.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{let{vs:i,fs:a,modules:o,inject:s,defines:l,varyings:c,bufferMode:u,transpileToGLSL100:d}=this.programProps;n=this.programManager.get({vs:i,fs:a,modules:o,inject:s,defines:l,varyings:c,bufferMode:u,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Oe(n instanceof cc,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new xh(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(let e in this.geometryBuffers){let n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Rt&&n.delete()}}_setAnimationProps(e){this.animated&&Oe(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(hl(e))return this;let{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new dc(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){let n=e>3?0:E_e;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),We.group(Lh,">>> DRAWING MODEL ".concat(this.id),{collapsed:We.level<=2})(),e}_logDrawCallEnd(e,n,i,a){if(e===void 0)return;let o=VA({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:l,unusedCount:c}=U4({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:u,count:d}=U4({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});d>0&&We.log("MISSING UNIFORMS",Object.keys(u))(),c>0&&We.log("UNUSED UNIFORMS",Object.keys(l))();let f=$A(this.vertexArray.configuration);We.table(e,o)(),We.table(e,s)(),We.table(e+1,f)(),a&&a.log({logLevel:Lh,message:"Rendered to ".concat(a.id)}),We.groupEnd(Lh)()}};var w_=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(let n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:a}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:a}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){let{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof Rt?i:i.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(let e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Oe(pt(this.gl))}_getFeedbackBuffers(e){let{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(let a in this.feedbackMap){let o=this.feedbackMap[a];a in n&&(i[o]=a)}Object.assign(i,e.feedbackBuffers);for(let a in i){let o=i[a];if(typeof o=="string"){let s=n[o],{byteLength:l,usage:c,accessor:u}=s;i[a]=this._createNewBuffer(a,{byteLength:l,usage:c,accessor:u})}}return i}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);let i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n,{program:a}=i;e.transformFeedback=new dc(this.gl,{program:a,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){let{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),a=this._getNextIndex();this.bindings[a]=this._updateBinding(this.bindings[a],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;let n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(let a in this.feedbackMap){let o=this.feedbackMap[a];n[a]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[a],Oe(i[o]instanceof Rt)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){let i=new Rt(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}};var x_e="transform_uSampler_",c5="transform_uSize_",Y$="transform_position";function J$(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:a}=t,s=Object.keys(n).length,l=null,c={},u=e,d={};if(s>0||i){let f=u.split(`
`),p=f.slice();if(f.forEach((h,m,_)=>{if(s>0){let E=A_e(h,n);if(E){let{updatedLine:v,inject:y}=E;p[m]=v,d=Sh([d,y]),Object.assign(c,E.samplerTextureMap),s--}}i&&!l&&(l=N_e(h,i))}),i){Oe(a);let h="".concat(c5).concat(i),m="uniform vec2 ".concat(h,`;
`),_="     vec2 ".concat(Y$," = transform_getPos(").concat(h,`);
     gl_Position = vec4(`).concat(Y$,`, 0, 1.);
`);d=Sh([d,{"vs:#decl":m,"vs:#main-start":_}])}u=p.join(`
`)}return{vs:u,targetTextureType:l,inject:d,samplerTextureMap:c}}function Q$(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t,a={},o,s;n&&({width:o,height:s}=i,a["".concat(c5).concat(n)]=[o,s]);for(let l in e)({width:o,height:s}=e[l]),a["".concat(c5).concat(l)]=[o,s];return a}function b_e(t){return z4(t,["attribute","in"])}function S_e(t){let e="".concat(x_e).concat(t),n="".concat(c5).concat(t),i="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:i}}function N_e(t,e){let n=z4(t,["varying","out"]);return n&&n.name===e?n.type:null}function A_e(t,e){let n={},i=b_e(t);if(!i)return null;let{type:a,name:o}=i;if(o&&e[o]){let s="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:l,sizeName:c,uniformDeclerations:u}=S_e(o),d=QA(a),f="  ".concat(a," ").concat(o," = transform_getInput(").concat(l,", ").concat(c,").").concat(d,`;
`);return n[l]=o,{updatedLine:s,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:n}}return null}var T_e={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},C_e="transform_output",I_=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceBuffers:n,sourceTextures:i,framebuffer:a,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},n,e.attributes),l=Object.assign({},e.uniforms),c=Object.assign({},e.parameters),u=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(let f in this.samplerTextureMap){let p=this.samplerTextureMap[f];l[f]=i[p]}this._setSourceTextureParameters();let d=Q$({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(l,d)}return this.hasTargetTexture&&(u=!1,c.viewport=[0,0,a.width,a.height]),{attributes:s,framebuffer:a,uniforms:l,discard:u,parameters:c}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){let{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{framebuffer:n}=this.bindings[this.currentIndex],i=sc(n);if(!e)return i;let a=i.constructor,o=e7(this.targetTextureType),s=new a(i.length*o/4),l=0;for(let c=0;c<i.length;c+=4)for(let u=0;u<o;u++)s[l++]=i[c+u];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){let{sourceTextures:n,textureOrReference:i}=e;if(i instanceof jt)return i;let a=n[i];return a?(this._targetRefTexName=i,this._createNewTexture(a)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceBuffers:n,_sourceTextures:i={},_targetTexture:a}=e,o=this._createTargetTexture({sourceTextures:i,textureOrReference:a});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;let n=new Float32Array(e);n.forEach((i,a,o)=>{o[a]=a}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Rt(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){let{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),a=this._getNextIndex();this.bindings[a]=this._updateBinding(this.bindings[a],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){let{sourceBuffers:i,sourceTextures:a,targetTexture:o}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,a),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;let{width:s,height:l}=o,{framebuffer:c}=e;c?(c.update({attachments:{[36064]:o},resizeAttachments:!1}),c.resize({width:s,height:l})):e.framebuffer=new Ht(this.gl,{id:"transform-framebuffer",width:s,height:l,attachments:{[36064]:o}})}return e}_setSourceTextureParameters(){let e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(let i in n)n[i].setParameters(T_e)}_swapTextures(e){if(!this._swapTexture)return null;let n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;let i=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:i}}_createNewTexture(e){let n=O4(e,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:a,uniforms:o,targetTextureType:s,inject:l,samplerTextureMap:c}=J$({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),u=Sh([e.inject||{},l]);this.targetTextureType=s,this.samplerTextureMap=c;let d=e._fs||v_({version:yh(a),input:this.targetTextureVarying,inputType:s,output:C_e}),f=this.hasSourceTextures||this.targetTextureVarying?[S7].concat(e.modules||[]):e.modules;return{vs:a,fs:d,modules:f,uniforms:o,inject:u}}};var Ss=class{static isSupported(e){return pt(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){let{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1,n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of n)e=e||i.swap();Oe(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of n){let a=i.getData(e);if(a)return a}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);let n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of n)i.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new wr(n,Object.assign({},e,{fs:e.fs||v_({version:yh(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e),i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let a of i)n=a.updateModelProps(n);return n}_buildResourceTransforms(e,n){w_e(n)&&(this.bufferTransform=new w_(e,n)),I_e(n)&&(this.textureTransform=new I_(e,n)),Oe(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e),i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let a of i)n=Object.assign(n,a.getDrawOptions(n));return n}};function w_e(t){return!!(!hl(t.feedbackBuffers)||!hl(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function I_e(t){return!!(!hl(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}var ez={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Nn=class{static get DRAW_MODE(){return ez}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n=Xn("geometry"),drawMode:i=ez.TRIANGLES,attributes:a={},indices:o=null,vertexCount:s=null}=e;this.id=n,this.drawMode=i|0,this.attributes={},this.userData={},this._setAttributes(a,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(let i in e){let a=e[i];a=ArrayBuffer.isView(a)?{value:a}:a,Oe(ArrayBuffer.isView(a.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),(i==="POSITION"||i==="positions")&&!a.size&&(a.size=3),i==="indices"?(Oe(!this.indices),this.indices=a):this.attributes[i]=a}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(let a in e){let o=e[a],{value:s,size:l,constant:c}=o;!c&&s&&l>=1&&(i=Math.min(i,s.length/l))}return Oe(Number.isFinite(i)),i}};var R_e=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),P_e=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),M_e=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),L_e=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),O_e={POSITION:{size:3,value:new Float32Array(P_e)},NORMAL:{size:3,value:new Float32Array(M_e)},TEXCOORD_0:{size:2,value:new Float32Array(L_e)}},ep=class extends Nn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n=Xn("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(R_e)},attributes:{...O_e,...e.attributes}})}};var B_e=1,D_e=1,Pu=class{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){let{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:a=1,repeat:o=1}=e,s=B_e++,l={time:0,delay:n,duration:i,rate:a,repeat:o};return this._setChannelTime(l,this.time),this.channels.set(s,l),s}removeChannel(e){this.channels.delete(e);for(let[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){let n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;let n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);let n=this.channels.values();for(let a of n)this._setChannelTime(a,this.time);let i=this.animations.values();for(let a of i){let{animation:o,channel:s}=a;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){let i=D_e++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){let i=n-e.delay,a=e.duration*e.repeat;i>=a?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}};var F_e=[255,255,255],k_e=1,G_e=0,u5=class{constructor(e={}){A(this,"id",void 0),A(this,"color",void 0),A(this,"intensity",void 0),A(this,"type","ambient");let{color:n=F_e}=e,{intensity:i=k_e}=e;this.id=e.id||"ambient-".concat(G_e++),this.color=n,this.intensity=i}};var U_e=[255,255,255],V_e=1,$_e=[0,0,-1],z_e=0,R_=class{constructor(e={}){A(this,"id",void 0),A(this,"color",void 0),A(this,"intensity",void 0),A(this,"type","directional"),A(this,"direction",void 0),A(this,"shadow",void 0);let{color:n=U_e}=e,{intensity:i=V_e}=e,{direction:a=$_e}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(z_e++),this.color=n,this.intensity=i,this.type="directional",this.direction=new je(a).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}};var P_=class{constructor(e,n={id:"pass"}){A(this,"id",void 0),A(this,"gl",void 0),A(this,"props",void 0);let{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}};var Ba=class extends P_{constructor(...e){super(...e),A(this,"_lastRenderIndex",-1)}render(e){let n=this.gl;return ca(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){let{target:n,moduleParameters:i,viewports:a,views:o,onViewportActive:s,clearStack:l=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";let u=this.gl;c&&H_e(u,n),l&&(this._lastRenderIndex=-1);let d=[];for(let f of a){let p=o&&o[f.id];s==null||s(f);let h=this._getDrawLayerParams(f,e),m=f.subViewports||[f];for(let _ of m){let E=this._drawLayersInViewport(u,{target:n,moduleParameters:i,viewport:_,view:p,pass:e.pass,layers:e.layers},h);d.push(E)}}return d}_getDrawLayerParams(e,{layers:n,pass:i,isPicking:a=!1,layerFilter:o,cullRect:s,effects:l,moduleParameters:c},u=!1){let d=[],f=tz(this._lastRenderIndex+1),p={layer:n[0],viewport:e,isPicking:a,renderPass:i,cullRect:s},h={};for(let m=0;m<n.length;m++){let _=n[m],E=this._shouldDrawLayer(_,p,o,h),v={shouldDrawLayer:E};E&&!u&&(v.layerRenderIndex=f(_,E),v.moduleParameters=this._getModuleParameters(_,l,i,c),v.layerParameters=this.getLayerParameters(_,m,e)),d[m]=v}return d}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:a,target:o,viewport:s,view:l},c){let u=j_e(e,{moduleParameters:i,target:o,viewport:s});if(l&&l.props.clear){let f=l.props.clear===!0?{color:!0,depth:!0}:l.props.clear;Or(e,{scissorTest:!0,scissor:u},()=>Nu(e,f))}let d={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};ca(e,{viewport:u});for(let f=0;f<n.length;f++){let p=n[f],{shouldDrawLayer:h,layerRenderIndex:m,moduleParameters:_,layerParameters:E}=c[f];if(h&&p.props.pickable&&d.pickableCount++,p.isComposite)d.compositeCount++;else if(h){d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,m),_.viewport=s;try{p._drawLayer({moduleParameters:_,uniforms:{layerIndex:m},parameters:E})}catch(v){p.raiseError(v,"drawing ".concat(p," to ").concat(a))}}}return d}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,a){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(n))return!1;n.layer=s,s=s.parent}if(i){let l=n.layer.id;if(l in a||(a[l]=i(n)),!a[l])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,a){var o;let s=Object.assign(Object.create(((o=e.internalState)===null||o===void 0?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:ro(this.gl)});if(n)for(let c of n){var l;Object.assign(s,(l=c.getModuleParameters)===null||l===void 0?void 0:l.call(c,e))}return Object.assign(s,this.getModuleParameters(e,n),a)}};function tz(t=0,e={}){let n={},i=(a,o)=>{let s=a.props._offset,l=a.id,c=a.parent&&a.parent.id,u;if(c&&!(c in e)&&i(a.parent,!1),c in n){let d=n[c]=n[c]||tz(e[c],e);u=d(a,o),n[l]=d}else Number.isFinite(s)?(u=s+(e[c]||0),n[l]=null):u=t;return o&&u>=t&&(t=u+1),e[l]=u,u};return i}function j_e(t,{moduleParameters:e,target:n,viewport:i}){let a=n&&n.id!=="default-framebuffer",o=e&&e.devicePixelRatio||ro(t),s=a?n.height:t.drawingBufferHeight,l=i;return[l.x*o,s-(l.y+l.height)*o,l.width*o,l.height*o]}function H_e(t,e){let n=e?e.width:t.drawingBufferWidth,i=e?e.height:t.drawingBufferHeight;ca(t,{viewport:[0,0,n,i]}),t.clear(16640)}var M_=class extends Ba{constructor(e,n){super(e,n),A(this,"shadowMap",void 0),A(this,"depthBuffer",void 0),A(this,"fbo",void 0),this.shadowMap=new jt(e,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new $i(e,{format:33189,width:1,height:1}),this.fbo=new Ht(e,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(e){let n=this.fbo;Or(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{let i=e.viewports[0],a=ro(this.gl),o=i.width*a,s=i.height*a;(o!==n.width||s!==n.height)&&n.resize({width:o,height:s}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}};var rz="#define SMOOTH_EDGE_RADIUS 0.5",W_e=`
`.concat(rz,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),Z_e=`
`.concat(rz,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),nz={name:"geometry",vs:W_e,fs:Z_e};var X_e=Object.keys(_t).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(_t[t],";")).join(""),q_e=Object.keys(Ui).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Ui[t],";")).join(""),K_e=Object.keys(wi).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(wi[t],";")).join(""),iz="".concat(X_e,`
`).concat(q_e,`
`).concat(K_e,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function Y_e(t,e){if(t===e)return!0;if(Array.isArray(t)){let n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function gl(t){let e={},n;return i=>{for(let a in i)if(!Y_e(i[a],e[a])){n=t(i),e=i;break}return n}}var az=[0,0,0,0],J_e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],oz=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Q_e=[0,0,0],sz=[0,0,0],e2e=gl(r2e);function A7(t,e,n=sz){n.length<3&&(n=[n[0],n[1],0]);let i=n,a,o=!0;switch(e===_t.LNGLAT_OFFSETS||e===_t.METER_OFFSETS?a=n:a=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Ui.WEB_MERCATOR:(e===_t.LNGLAT||e===_t.CARTESIAN)&&(a=[0,0,0],o=!1);break;case Ui.WEB_MERCATOR_AUTO_OFFSET:e===_t.LNGLAT?i=a:e===_t.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],a=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Ui.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Ui.GLOBE:o=!1,a=null;break;default:o=!1}return{geospatialOrigin:a,shaderCoordinateOrigin:i,offsetMode:o}}function t2e(t,e,n){let{viewMatrixUncentered:i,projectionMatrix:a}=t,{viewMatrix:o,viewProjectionMatrix:s}=t,l=az,c=az,u=t.cameraPosition,{geospatialOrigin:d,shaderCoordinateOrigin:f,offsetMode:p}=A7(t,e,n);return p&&(c=t.projectPosition(d||f),u=[u[0]-c[0],u[1]-c[1],u[2]-c[2]],c[3]=1,l=bs([],c,s),o=i||o,s=ml([],a,o),s=ml([],s,J_e)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:l,originCommon:c,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:d}}function lz({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=_t.DEFAULT,coordinateOrigin:a=sz,autoWrapLongitude:o=!1}){i===_t.DEFAULT&&(i=t.isGeospatial?_t.LNGLAT:_t.CARTESIAN);let s=e2e({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:a});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||oz,s}function r2e({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){let{projectionCenter:a,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:l,shaderCoordinateOrigin:c,geospatialOrigin:u}=t2e(t,n,i),d=t.getDistanceScales(),f=[t.width*e,t.height*e],p=bs([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,h={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:a,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:p,project_uCommonUnitsPerMeter:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit:d.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Q_e,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:oz,project_uCameraPosition:l};if(u){let m=t.getDistanceScales(u);switch(n){case _t.METER_OFFSETS:h.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,h.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case _t.LNGLAT:case _t.LNGLAT_OFFSETS:t._pseudoMeters||(h.project_uCommonUnitsPerMeter=m.unitsPerMeter),h.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,h.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case _t.CARTESIAN:h.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],h.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]];break;default:break}}return h}var n2e={};function i2e(t=n2e){return"viewport"in t?lz(t):{}}var hc={name:"project",dependencies:[j4,nz],vs:iz,getUniforms:i2e};function T7(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Mu(t,e){let n=bs([],e,t);return Rh(n,n,1/n[3]),n}function C7(t,e){let n=t%e;return n<0?e+n:n}function L_(t,e,n){return t<e?e:t>n?n:t}function a2e(t){return Math.log(t)*Math.LOG2E}var Oh=Math.log2||a2e;function Bo(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var Ns=Math.PI,cz=Ns/4,Do=Ns/180,w7=180/Ns,Bh=512,d5=4003e4,Dh=85.051129,uz=1.5;function I7(t){return Oh(t)}function Fo(t){let[e,n]=t;Bo(Number.isFinite(e)),Bo(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");let i=e*Do,a=n*Do,o=Bh*(i+Ns)/(2*Ns),s=Bh*(Ns+Math.log(Math.tan(cz+a*.5)))/(2*Ns);return[o,s]}function ao(t){let[e,n]=t,i=e/Bh*(2*Ns)-Ns,a=2*(Math.atan(Math.exp(n/Bh*(2*Ns)-Ns))-cz);return[i*w7,a*w7]}function R7(t){let{latitude:e}=t;Bo(Number.isFinite(e));let n=Math.cos(e*Do);return I7(d5*n)-9}function O_(t){let e=Math.cos(t*Do);return Bh/d5/e}function Fh(t){let{latitude:e,longitude:n,highPrecision:i=!1}=t;Bo(Number.isFinite(e)&&Number.isFinite(n));let a=Bh,o=Math.cos(e*Do),s=a/360,l=s/o,c=a/d5/o,u={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,l,c],degreesPerUnit:[1/s,1/l,1/c]};if(i){let d=Do*Math.tan(e*Do)/o,f=s*d/2,p=a/d5*d,h=p/l*c;u.unitsPerDegree2=[0,f,p],u.unitsPerMeter2=[h,0,h]}return u}function B_(t,e){let[n,i,a]=t,[o,s,l]=e,{unitsPerMeter:c,unitsPerMeter2:u}=Fh({longitude:n,latitude:i,highPrecision:!0}),d=Fo(t);d[0]+=o*(c[0]+u[0]*s),d[1]+=s*(c[1]+u[1]*s);let f=ao(d),p=(a||0)+(l||0);return Number.isFinite(a)||Number.isFinite(l)?[f[0],f[1],p]:f}function f5(t){let{height:e,pitch:n,bearing:i,altitude:a,scale:o,center:s}=t,l=T7();Qf(l,l,[0,0,-a]),r5(l,l,-n*Do),n5(l,l,i*Do);let c=o/e;return Ih(l,l,[c,c,c]),s&&Qf(l,l,r7([],s)),l}function P7(t){let{width:e,height:n,altitude:i,pitch:a=0,offset:o,center:s,scale:l,nearZMultiplier:c=1,farZMultiplier:u=1}=t,{fovy:d=tp(uz)}=t;i!==void 0&&(d=tp(i));let f=d*Do,p=a*Do,h=rp(d),m=h;s&&(m+=s[2]*l/Math.cos(p)/n);let _=f*(.5+(o?o[1]:0)/n),E=Math.sin(_)*m/Math.sin(L_(Math.PI/2-p-_,.01,Math.PI-.01)),v=Math.sin(p)*E+m,y=m*10,x=Math.min(v*u,y);return{fov:f,aspect:e/n,focalDistance:h,near:c,far:x}}function tp(t){return 2*Math.atan(.5/t)*w7}function rp(t){return .5/Math.tan(.5*t*Do)}function kh(t,e){let[n,i,a=0]=t;return Bo(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(a)),Mu(e,[n,i,a,1])}function ko(t,e,n=0){let[i,a,o]=t;if(Bo(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o))return Mu(e,[i,a,o,1]);let s=Mu(e,[i,a,0,1]),l=Mu(e,[i,a,1,1]),c=s[2],u=l[2],d=c===u?0:((n||0)-c)/(u-c);return W4([],s,l,d)}function D_(t){let{width:e,height:n,bounds:i,minExtent:a=0,maxZoom:o=24,offset:s=[0,0]}=t,[[l,c],[u,d]]=i,f=o2e(t.padding),p=Fo([l,L_(d,-Dh,Dh)]),h=Fo([u,L_(c,-Dh,Dh)]),m=[Math.max(Math.abs(h[0]-p[0]),a),Math.max(Math.abs(h[1]-p[1]),a)],_=[e-f.left-f.right-Math.abs(s[0])*2,n-f.top-f.bottom-Math.abs(s[1])*2];Bo(_[0]>0&&_[1]>0);let E=_[0]/m[0],v=_[1]/m[1],y=(f.right-f.left)/2/E,x=(f.top-f.bottom)/2/v,S=[(h[0]+p[0])/2+y,(h[1]+p[1])/2+x],N=ao(S),w=Math.min(o,Oh(Math.abs(Math.min(E,v))));return Bo(Number.isFinite(w)),{longitude:N[0],latitude:N[1],zoom:w}}function o2e(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Bo(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}var dz=Math.PI/180;function F_(t,e=0){let{width:n,height:i,unproject:a}=t,o={targetZ:e},s=a([0,i],o),l=a([n,i],o),c,u,d=t.fovy?.5*t.fovy*dz:Math.atan(.5/t.altitude),f=(90-t.pitch)*dz;return d>f-.01?(c=fz(t,0,e),u=fz(t,n,e)):(c=a([0,0],o),u=a([n,0],o)),[s,l,u,c]}function fz(t,e,n){let{pixelUnprojectionMatrix:i}=t,a=Mu(i,[e,0,1,1]),o=Mu(i,[e,t.height,1,1]),l=(n*t.distanceScales.unitsPerMeter[2]-a[2])/(o[2]-a[2]),c=W4([],a,o,l),u=ao(c);return u.push(n),u}var hz=512;function p5(t){let{width:e,height:n,pitch:i=0}=t,{longitude:a,latitude:o,zoom:s,bearing:l=0}=t;(a<-180||a>180)&&(a=C7(a+180,360)-180),(l<-180||l>180)&&(l=C7(l+180,360)-180);let c=Oh(n/hz);if(s<=c)s=c,o=0;else{let u=n/2/Math.pow(2,s),d=ao([0,u])[1];if(o<d)o=d;else{let f=ao([0,hz-u])[1];o>f&&(o=f)}}return{width:e,height:n,longitude:a,latitude:o,zoom:s,pitch:i,bearing:l}}var c2e=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,u2e=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,d2e=gl(g2e),f2e=gl(_2e),p2e=[0,0,0,1],h2e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function m2e(t,e){let[n,i,a]=t,o=ko([n,i,a],e);return Number.isFinite(a)?o:[o[0],o[1],0]}function g2e({viewport:t,center:e}){return new zt(t.viewProjectionMatrix).invert().transform(e)}function _2e({viewport:t,shadowMatrices:e}){let n=[],i=t.pixelUnprojectionMatrix,a=t.isGeospatial?void 0:1,o=[[0,0,a],[t.width,0,a],[0,t.height,a],[t.width,t.height,a],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(s=>m2e(s,i));for(let s of e){let l=s.clone().translate(new je(t.center).negate()),c=o.map(d=>l.transform(d)),u=new zt().ortho({left:Math.min(...c.map(d=>d[0])),right:Math.max(...c.map(d=>d[0])),bottom:Math.min(...c.map(d=>d[1])),top:Math.max(...c.map(d=>d[1])),near:Math.min(...c.map(d=>-d[2])),far:Math.max(...c.map(d=>-d[2]))});n.push(u.multiplyRight(s))}return n}function E2e(t,e){let{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};let i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||p2e,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},a=d2e({viewport:t.viewport,center:e.project_uCenter}),o=[],s=f2e({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let l=0;l<t.shadowMatrices.length;l++){let c=s[l],u=c.clone().translate(new je(t.viewport.center).negate());e.project_uCoordinateSystem===_t.LNGLAT&&e.project_uProjectionMode===Ui.WEB_MERCATOR?(s[l]=u,o[l]=a):(s[l]=c.clone().multiplyRight(h2e),o[l]=u.transform(a))}for(let l=0;l<s.length;l++)i["shadow_uViewProjectionMatrices[".concat(l,"]")]=s[l],i["shadow_uProjectCenters[".concat(l,"]")]=o[l],t.shadowMaps&&t.shadowMaps.length>0?i["shadow_uShadowMap".concat(l)]=t.shadowMaps[l]:i["shadow_uShadowMap".concat(l)]=t.dummyShadowMap;return i}var k_={name:"shadow",dependencies:[hc],vs:c2e,fs:u2e,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?E2e(t,e):{}};var v2e={color:[255,255,255],intensity:1},mz=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],y2e=[0,0,0,200/255],Gh=class{constructor(e={}){A(this,"id","lighting-effect"),A(this,"props",void 0),A(this,"shadowColor",y2e),A(this,"shadow",void 0),A(this,"ambientLight",void 0),A(this,"directionalLights",void 0),A(this,"pointLights",void 0),A(this,"shadowPasses",[]),A(this,"shadowMaps",[]),A(this,"dummyShadowMap",null),A(this,"programManager",void 0),A(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(let n in e){let i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i);break;default:}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:i,viewports:a,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=io.getDefaultProgramManager(e),k_&&this.programManager.addDefaultModule(k_)),this.dummyShadowMap||(this.dummyShadowMap=new jt(e,{width:1,height:1}));for(let l=0;l<this.shadowPasses.length;l++)this.shadowPasses[l].render({layers:n,layerFilter:i,viewports:a,onViewportActive:o,views:s,moduleParameters:{shadowLightId:l,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){let n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(let e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(k_),this.programManager=null)}_calculateMatrices(){let e=[];for(let n of this.directionalLights){let i=new zt().lookAt({eye:new je(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){let i=new M_(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){let{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&n.length===0&&i.length===0&&(this.ambientLight=new u5(v2e),this.directionalLights.push(new R_(mz[0]),new R_(mz[1])))}};var M7=class{constructor(e={}){A(this,"_pool",[]),A(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:a,padding:o=0,copy:s=!1,initialize:l=!1,maxCount:c}){let u=a||e&&e.constructor||Float32Array,d=n*i+o;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new u(e.buffer,0,d)}let f=1/0;c&&(f=c*i+o);let p=this._allocate(u,d,l,f);return e&&s?p.set(e):l||p.fill(0,0,4),this._release(e),p}release(e){this._release(e)}_allocate(e,n,i,a){let o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>a&&(o=a);let s=this._pool,l=e.BYTES_PER_ELEMENT*o,c=s.findIndex(u=>u.byteLength>=l);if(c>=0){let u=new e(s.splice(c,1)[0],0,o);return i&&u.fill(0),u}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;let n=this._pool,{buffer:i}=e,{byteLength:a}=i,o=n.findIndex(s=>s.byteLength>=a);o<0?n.push(i):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,i),n.length>this.opts.poolSize&&n.shift()}},As=new M7;function Vh(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function _z(t,e){let n=t%e;return n<0?e+n:n}function Ez(t){return[t[12],t[13],t[14]]}function vz(t){return{left:Uh(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Uh(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Uh(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Uh(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Uh(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Uh(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}var gz=new je;function Uh(t,e,n,i){gz.set(t,e,n);let a=gz.len();return{distance:i/a,normal:new je(-t/a,-e/a,-n/a)}}function x2e(t){return t-Math.fround(t)}var G_;function h5(t,e){let{size:n=1,startIndex:i=0}=e,a=e.endIndex!==void 0?e.endIndex:t.length,o=(a-i)/n;G_=As.allocate(G_,o,{type:Float32Array,size:n*2});let s=i,l=0;for(;s<a;){for(let c=0;c<n;c++){let u=t[s++];G_[l+c]=u,G_[l+c+n]=x2e(u)}l+=n*2}return G_.subarray(0,o*n*2)}function yz(t){let e=null,n=!1;for(let i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}var b2e=Math.PI/180,S2e=Vh(),xz=[0,0,0],N2e={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function A2e({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:a,padding:o,near:s,far:l}){let c=t/e,u=n?new zt().orthographic({fovy:i,aspect:c,focalDistance:a,near:s,far:l}):new zt().perspective({fovy:i,aspect:c,near:s,far:l});if(o){let{left:d=0,right:f=0,top:p=0,bottom:h=0}=o,m=vr((d+t-f)/2,0,t)-t/2,_=vr((p+e-h)/2,0,e)-e/2;u[8]-=m*2/t,u[9]+=_*2/e}return u}var ci=class{constructor(e={}){A(this,"id",void 0),A(this,"x",void 0),A(this,"y",void 0),A(this,"width",void 0),A(this,"height",void 0),A(this,"padding",void 0),A(this,"isGeospatial",void 0),A(this,"zoom",void 0),A(this,"focalDistance",void 0),A(this,"position",void 0),A(this,"modelMatrix",void 0),A(this,"distanceScales",void 0),A(this,"scale",void 0),A(this,"center",void 0),A(this,"cameraPosition",void 0),A(this,"projectionMatrix",void 0),A(this,"viewMatrix",void 0),A(this,"viewMatrixUncentered",void 0),A(this,"viewMatrixInverse",void 0),A(this,"viewProjectionMatrix",void 0),A(this,"pixelProjectionMatrix",void 0),A(this,"pixelUnprojectionMatrix",void 0),A(this,"resolution",void 0),A(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||N2e,this.focalDistance=e.focalDistance||1,this.position=e.position||xz,this.modelMatrix=e.modelMatrix||null;let{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ui.WEB_MERCATOR:Ui.WEB_MERCATOR_AUTO_OFFSET:Ui.IDENTITY}equals(e){return e instanceof ci?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Kn(e.projectionMatrix,this.projectionMatrix)&&Kn(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){let i=this.projectPosition(e),a=kh(i,this.pixelProjectionMatrix),[o,s]=a,l=n?s:this.height-s;return e.length===2?[o,l]:[o,l,a[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){let[a,o,s]=e,l=n?o:this.height-o,c=i&&i*this.distanceScales.unitsPerMeter[2],u=ko([a,l,s],this.pixelUnprojectionMatrix,c),[d,f,p]=this.unprojectPosition(u);return Number.isFinite(s)?[d,f,p]:Number.isFinite(i)?[d,f,i]:[d,f]}projectPosition(e){let[n,i]=this.projectFlat(e),a=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,i,a]}unprojectPosition(e){let[n,i]=this.unprojectFlat(e),a=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,i,a]}projectFlat(e){if(this.isGeospatial){let n=Fo(e);return n[1]=vr(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?ao(e):e}getBounds(e={}){let n={targetZ:e.z||0},i=this.unproject([0,0],n),a=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),s=this.unproject([this.width,this.height],n);return[Math.min(i[0],a[0],o[0],s[0]),Math.min(i[1],a[1],o[1],s[1]),Math.max(i[0],a[0],o[0],s[0]),Math.max(i[1],a[1],o[1],s[1])]}getDistanceScales(e){return e?Fh({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:a=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+a}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,vz(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){let n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=R7({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Fh({latitude:i,longitude:n}));let a=Math.pow(2,this.zoom);this.scale=a;let{position:o,modelMatrix:s}=e,l=xz;if(o&&(l=s?new zt(s).transformAsVector(o,[]):o),this.isGeospatial){let c=this.projectPosition([n,i,0]);this.center=new je(l).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(l)}_initMatrices(e){let{viewMatrix:n=S2e,projectionMatrix:i=null,orthographic:a=!1,fovyRadians:o,fovy:s=75,near:l=.1,far:c=1e3,padding:u=null,focalDistance:d=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new zt().multiplyRight(n).translate(new je(this.center).negate()),this.projectionMatrix=i||A2e({width:this.width,height:this.height,orthographic:a,fovyRadians:o||s*b2e,focalDistance:d,padding:u,near:l,far:c});let f=Vh();ml(f,f,this.projectionMatrix),ml(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=A_([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=Ez(this.viewMatrixInverse);let p=Vh(),h=Vh();Ih(p,p,[this.width/2,-this.height/2,1]),Qf(p,p,[1,-1,0]),ml(h,p,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=A_(Vh(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||at.warn("Pixel project matrix not invertible")()}};A(ci,"displayName","Viewport");var Pi=class extends ci{constructor(e={}){let{latitude:n=0,longitude:i=0,zoom:a=0,pitch:o=0,bearing:s=0,nearZMultiplier:l=.1,farZMultiplier:c=1.01,nearZ:u,farZ:d,orthographic:f=!1,projectionMatrix:p,repeat:h=!1,worldOffset:m=0,position:_,padding:E,legacyMeterSizes:v=!1}=e,{width:y,height:x,altitude:S=1.5}=e,N=Math.pow(2,a);y=y||1,x=x||1;let w,T=null;if(p)S=p[5]/2,w=tp(S);else{e.fovy?(w=e.fovy,S=rp(w)):w=tp(S);let R;if(E){let{top:L=0,bottom:O=0}=E;R=[0,vr((L+x-O)/2,0,x)-x/2]}T=P7({width:y,height:x,scale:N,center:_&&[0,0,_[2]*O_(n)],offset:R,pitch:o,fovy:w,nearZMultiplier:l,farZMultiplier:c}),Number.isFinite(u)&&(T.near=u),Number.isFinite(d)&&(T.far=d)}let I=f5({height:x,pitch:o,bearing:s,scale:N,altitude:S});m&&(I=new zt().translate([512*m,0,0]).multiplyLeft(I)),super({...e,width:y,height:x,viewMatrix:I,longitude:i,latitude:n,zoom:a,...T,fovy:w,focalDistance:S}),A(this,"longitude",void 0),A(this,"latitude",void 0),A(this,"pitch",void 0),A(this,"bearing",void 0),A(this,"altitude",void 0),A(this,"fovy",void 0),A(this,"orthographic",void 0),A(this,"_subViewports",void 0),A(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=a,this.pitch=o,this.bearing=s,this.altitude=S,this.fovy=w,this.orthographic=f,this._subViewports=h?[]:null,this._pseudoMeters=v,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){let e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let a=n;a<=i;a++){let o=a?new Pi({...this,worldOffset:a}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);let[n,i]=this.projectFlat(e),a=(e[2]||0)*O_(e[1]);return[n,i,a]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);let[n,i]=this.unprojectFlat(e),a=(e[2]||0)/O_(i);return[n,i,a]}addMetersToLngLat(e,n){return B_(e,n)}panByPosition(e,n){let i=ko(n,this.pixelUnprojectionMatrix),a=this.projectFlat(e),o=Ch([],a,H4([],i)),s=Ch([],this.center,o),[l,c]=this.unprojectFlat(s);return{longitude:l,latitude:c}}getBounds(e={}){let n=F_(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){let{width:i,height:a}=this,{longitude:o,latitude:s,zoom:l}=D_({width:i,height:a,bounds:e,...n});return new Pi({width:i,height:a,longitude:o,latitude:s,zoom:l})}};A(Pi,"displayName","WebMercatorViewport");var bz=[0,0,0];function L7(t,e,n=!1){let i=e.projectPosition(t);if(n&&e instanceof Pi){let[a,o,s=0]=t,l=e.getDistanceScales([a,o]);i[2]=s*l.unitsPerMeter[2]}return i}function T2e(t){let{viewport:e,modelMatrix:n,coordinateOrigin:i}=t,{coordinateSystem:a,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return a===_t.DEFAULT&&(a=e.isGeospatial?_t.LNGLAT:_t.CARTESIAN),o===void 0&&(o=a),s===void 0&&(s=i),{viewport:e,coordinateSystem:a,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}function O7(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:a,offsetMode:o}){let[s,l,c=0]=t;switch(n&&([s,l,c]=bs([],[s,l,c,1],n)),i){case _t.LNGLAT:return L7([s,l,c],e,o);case _t.LNGLAT_OFFSETS:return L7([s+a[0],l+a[1],c+(a[2]||0)],e,o);case _t.METER_OFFSETS:return L7(B_(a,[s,l,c]),e,o);case _t.CARTESIAN:default:return e.isGeospatial?[s+a[0],l+a[1],c+a[2]]:e.projectPosition([s,l,c])}}function Sz(t,e){let{viewport:n,coordinateSystem:i,coordinateOrigin:a,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:l}=T2e(e),{autoOffset:c=!0}=e,{geospatialOrigin:u=bz,shaderCoordinateOrigin:d=bz,offsetMode:f=!1}=c?A7(n,i,a):{},p=O7(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:l,offsetMode:f});if(f){let h=n.projectPosition(u||d);b_(p,p,h)}return p}var Nz={blendFunc:[1,0,32771,0],blendEquation:32774},np=class extends Ba{constructor(...e){super(...e),A(this,"pickZ",void 0),A(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:a,onViewportActive:o,pickingFBO:s,deviceRect:{x:l,y:c,width:u,height:d},cullRect:f,effects:p,pass:h="picking",pickZ:m,moduleParameters:_}){let E=this.gl;this.pickZ=m;let v=this._resetColorEncoder(m),y=Or(E,{scissorTest:!0,scissor:[l,c,u,d],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Nz,blend:!m},()=>super.render({target:s,layers:e,layerFilter:n,views:i,viewports:a,onViewportActive:o,cullRect:f,effects:p==null?void 0:p.filter(S=>S.useInPicking),pass:h,isPicking:!0,moduleParameters:_}));return this._colorEncoderState=null,{decodePickingColor:v&&w2e.bind(null,v),stats:y}}shouldDrawLayer(e){let{pickable:n,operation:i}=e.props;return n&&i.includes("draw")||i.includes("terrain")||i.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){let a={...e.props.parameters},{pickable:o,operation:s}=e.props;return this._colorEncoderState?o&&s.includes("draw")&&(Object.assign(a,Nz),a.blend=!0,a.blendColor=C2e(this._colorEncoderState,e,i)):a.blend=!1,s.includes("terrain")&&(a.blend=!1),a}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}};function C2e(t,e,n){let{byLayer:i,byAlpha:a}=t,o,s=i.get(e);return s?(s.viewports.push(n),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},i.set(e,s),a[o]=s):(at.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function w2e(t,e){let n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}var Lu={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},$h=Symbol.for("component"),Go=Symbol.for("propTypes"),m5=Symbol.for("deprecatedProps"),mc=Symbol.for("asyncPropDefaults"),_l=Symbol.for("asyncPropOriginal"),Ts=Symbol.for("asyncPropResolved");function gc(t,e=()=>!0){return Array.isArray(t)?Az(t,e,[]):e(t)?[t]:[]}function Az(t,e,n){let i=-1;for(;++i<t.length;){let a=t[i];Array.isArray(a)?Az(a,e,n):e(a)&&n.push(a)}return n}function B7({target:t,source:e,start:n=0,count:i=1}){let a=e.length,o=i*a,s=0;for(let l=n;s<a;s++)t[l++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}var U_=class{constructor(e,n,i){A(this,"id",void 0),A(this,"context",void 0),A(this,"isLoaded",void 0),A(this,"persistent",void 0),A(this,"_loadCount",0),A(this,"_subscribers",new Set),A(this,"_data",void 0),A(this,"_loader",void 0),A(this,"_error",void 0),A(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;let i=++this._loadCount,a=e;typeof e=="string"&&(a=cl(e)),a instanceof Promise?(this.isLoaded=!1,this._loader=a.then(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===i&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(let o of this._subscribers)o.onChange(this.getData())}};var V_=class{constructor({gl:e,protocol:n}){A(this,"protocol",void 0),A(this,"_context",void 0),A(this,"_resources",void 0),A(this,"_consumers",void 0),A(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:a=!0}){let o=this._resources[e];o?o.setData(n,i):(o=new U_(e,n,this._context),this._resources[e]=o),o.persistent=a}remove(e){let n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){let n=this._consumers[e];if(n){for(let i in n){let a=n[i],o=this._resources[a.resourceId];o&&o.unsubscribe(a)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:a="default"}){let{_resources:o,protocol:s}=this;e.startsWith(s)&&(e=e.replace(s,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));let l=o[e];if(this._track(i,a,l,n),l)return l.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(let e in this._resources)this._resources[e].delete()}_track(e,n,i,a){let o=this._consumers,s=o[e]=o[e]||{},l=s[n]||{},c=l.resourceId&&this._resources[l.resourceId];c&&(c.unsubscribe(l),this.prune()),i&&(s[n]=l,l.onChange=a,l.resourceId=i.id,i.subscribe(l))}_prune(){this._pruneRequest=null;for(let e of Object.keys(this._resources)){let n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}};var I2e=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,On={name:"project32",dependencies:[hc],vs:I2e};var Bn={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...l5};var R2e=[hc],P2e=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Tz(t){let e=io.getDefaultProgramManager(t);for(let n of R2e)e.addDefaultModule(n);for(let n of P2e)e.addShaderHook(n);return e}var M2e="layerManager.setLayers",L2e="layerManager.activateViewport",$_=class{constructor(e,{deck:n,stats:i,viewport:a,timeline:o}={}){A(this,"layers",void 0),A(this,"context",void 0),A(this,"resourceManager",void 0),A(this,"_lastRenderedLayers",[]),A(this,"_needsRedraw",!1),A(this,"_needsUpdate",!1),A(this,"_nextLayers",null),A(this,"_debug",!1),A(this,"activateViewport",s=>{ln(L2e,this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new V_({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&Tz(e),stats:i||new Mo({id:"deck.gl"}),viewport:a||new ci({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new Pu,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(let e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(let i of this.layers){let a=i.getNeedsRedraw(e);n=n||a}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>n.id.indexOf(i)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){ln(M2e,this,n,e),this._lastRenderedLayers=e;let i=gc(e,Boolean);for(let a of i)a.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){let e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){let i={};for(let s of e)i[s.id]?at.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s;let a=[];this._updateSublayersRecursively(n,i,a),this._finalizeOldLayers(i);let o=!1;for(let s of a)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=a}_updateSublayersRecursively(e,n,i){for(let a of e){a.context=this.context;let o=n[a.id];o===null&&at.warn("Multiple new layers with same id ".concat(a.id))(),n[a.id]=null;let s=null;try{this._debug&&o!==a&&a.validateProps(),o?(this._transferLayerState(o,a),this._updateLayer(a)):this._initializeLayer(a),i.push(a),s=a.isComposite?a.getSubLayers():null}catch(l){this._handleError("matching",l,a)}s&&this._updateSublayersRecursively(s,n,i)}}_finalizeOldLayers(e){for(let n in e){let i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Lu.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Lu.MATCHED,n!==e&&(e.lifecycle=Lu.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Lu.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Lu.FINALIZED}catch(n){this._handleError("finalization",n,e)}}};function Dn(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!Dn(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){let i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(let o of i)if(!e.hasOwnProperty(o)||!Dn(t[o],e[o],n-1))return!1;return!0}return!1}var z_=class{constructor(e){A(this,"width",void 0),A(this,"height",void 0),A(this,"views",void 0),A(this,"viewState",void 0),A(this,"controllers",void 0),A(this,"timeline",void 0),A(this,"_viewports",void 0),A(this,"_viewportMap",void 0),A(this,"_isUpdating",void 0),A(this,"_needsRedraw",void 0),A(this,"_needsUpdate",void 0),A(this,"_eventManager",void 0),A(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(let e in this.controllers){let n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(let e in this.controllers){let n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){let e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){let n=typeof e=="string"?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){let i=this.getViewports(),a={x:e[0],y:e[1]};for(let o=i.length-1;o>=0;--o){let s=i[o];if(s.containsPixel(a)){let l=e.slice();return l[0]-=s.x,l[1]-=s.y,s.unproject(l,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=gc(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Dn(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):at.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){let i=n.type;return new i({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return(s=this.getView(e.id))===null||s===void 0?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,n,i,a){let o=e.controller;if(o&&i){let s={...n,...o,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!a||a.constructor!==o.type)&&(a=this._createController(e,s)),a&&a.setProps(s),a}return null}_rebuildViewports(){let{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let a=e.length;a--;){let o=e[a],s=this.getViewState(o),l=o.makeViewport({viewState:s,width:this.width,height:this.height}),c=n[o.id],u=!!o.controller;u&&!c&&(i=!0),(i||!u)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,l,c),l&&this._viewports.unshift(l)}for(let a in n){let o=n[a];o&&!this.controllers[a]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((i,a)=>!e[a].equals(n[a]))}};var O2e=/([0-9]+\.?[0-9]*)(%|px)/;function _c(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":let e=O2e.exec(t);if(e&&e.length>=3){let n=e[2]==="%",i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Ec(t,e){return t.relative?Math.round(t.position*e):t.position}function Br(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}var ip=class{constructor(e){A(this,"id",void 0),A(this,"viewportInstance",void 0),A(this,"_x",void 0),A(this,"_y",void 0),A(this,"_width",void 0),A(this,"_height",void 0),A(this,"_padding",void 0),A(this,"props",void 0);let{id:n,x:i=0,y:a=0,width:o="100%",height:s="100%",padding:l=null,viewportInstance:c}=e||{};Br(!c||c instanceof ci),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=_c(i),this._y=_c(a),this._width=_c(o),this._height=_c(s),this._padding=l&&{left:_c(l.left||0),right:_c(l.right||0),top:_c(l.top||0),bottom:_c(l.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&Dn(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);let a=this.getDimensions({width:e,height:n});return!a.height||!a.width?null:new this.ViewportType({...i,...this.props,...a})}getViewStateId(){let{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;let n={...e};for(let i in this.props.viewState)i!=="id"&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){let i={x:Ec(this._x,e),y:Ec(this._y,n),width:Ec(this._width,e),height:Ec(this._height,n)};return this._padding&&(i.padding={left:Ec(this._padding.left,e),top:Ec(this._padding.top,n),right:Ec(this._padding.right,e),bottom:Ec(this._padding.bottom,n)}),i}get controller(){let e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}};var oo=class{constructor(e){A(this,"_inProgress",void 0),A(this,"_handle",void 0),A(this,"_timeline",void 0),A(this,"time",void 0),A(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,(n=(i=this.settings).onStart)===null||n===void 0||n.call(i,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){let{_timeline:i,settings:a}=this;this._handle=i.addChannel({delay:i.getTime(),duration:a.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}};var Cz=()=>{},D7={BREAK:1,SNAP_TO_END:2,IGNORE:3},B2e=t=>t,D2e=D7.BREAK,j_=class{constructor(e){A(this,"getControllerState",void 0),A(this,"props",void 0),A(this,"propsInTransition",void 0),A(this,"transition",void 0),A(this,"onViewStateChange",void 0),A(this,"onStateChange",void 0),A(this,"_onTransitionUpdate",n=>{let{time:i,settings:{interpolator:a,startProps:o,endProps:s,duration:l,easing:c}}=n,u=c(i/l),d=a.interpolateProps(o,s,u);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new oo(e.timeline),this.onViewStateChange=e.onViewStateChange||Cz,this.onStateChange=e.onStateChange||Cz}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1,i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let a=i;if(this.transition.inProgress){let{interruption:o,endProps:s}=this.transition.settings;a={...i,...o===D7.SNAP_TO_END?s:this.propsInTransition||i}}this._triggerTransition(a,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){let{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||n==="auto")&&!!i}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===D7.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){let i=this.getControllerState(e),a=this.getControllerState(n).shortestPathFrom(i),o=n.transitionInterpolator,s=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(s===0)return;let l=o.initializeProps(e,a);this.propsInTransition={};let c={duration:s,easing:n.transitionEasing||B2e,interpolator:o,interruption:n.transitionInterruption||D2e,startProps:l.start,endProps:l.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}};var H_=class{constructor(e){A(this,"_propsToCompare",void 0),A(this,"_propsToExtract",void 0),A(this,"_requiredProps",void 0);let{compare:n,extract:i,required:a}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=a}arePropsEqual(e,n){for(let i of this._propsToCompare)if(!(i in e)||!(i in n)||!Kn(e[i],n[i]))return!1;return!0}initializeProps(e,n){let i={},a={};for(let o of this._propsToExtract)(o in e||o in n)&&(i[o]=e[o],a[o]=n[o]);return this._checkRequiredProps(i),this._checkRequiredProps(a),{start:i,end:a}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{let i=e[n];Br(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}};var F2e=["longitude","latitude","zoom","bearing","pitch"],k2e=["longitude","latitude","zoom"],vc=class extends H_{constructor(e={}){let n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:F2e,required:k2e},super(i.transitionProps),A(this,"opts",void 0),this.opts=i}initializeProps(e,n){let i=super.initializeProps(e,n),{makeViewport:a,around:o}=this.opts;if(a&&o){let s=a(e),l=a(n),c=s.unproject(o);i.start.around=o,Object.assign(i.end,{around:l.project(c),aroundPosition:c,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){let a={};for(let o of this._propsToExtract)a[o]=Zf(e[o]||0,n[o]||0,i);if(n.aroundPosition&&this.opts.makeViewport){let o=this.opts.makeViewport({...n,...a});Object.assign(a,o.panByPosition(n.aroundPosition,Zf(e.around,n.around,i)))}return a}};var Ou={transitionDuration:0},G2e=300,g5=t=>1-(1-t)*(1-t),zh={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},ap={},op=class{constructor(e){A(this,"props",void 0),A(this,"state",{}),A(this,"transitionManager",void 0),A(this,"eventManager",void 0),A(this,"onViewStateChange",void 0),A(this,"onStateChange",void 0),A(this,"makeViewport",void 0),A(this,"_controllerState",void 0),A(this,"_events",{}),A(this,"_interactionState",{isDragging:!1}),A(this,"_customEvents",[]),A(this,"_eventStartBlocked",null),A(this,"_panMove",!1),A(this,"invertPan",!1),A(this,"dragMode","rotate"),A(this,"inertia",0),A(this,"scrollZoom",!0),A(this,"dragPan",!0),A(this,"dragRotate",!0),A(this,"doubleClickZoom",!0),A(this,"touchZoom",!0),A(this,"touchRotate",!1),A(this,"keyboard",!0),this.transitionManager=new j_({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(let n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;let n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){let{x:n,y:i}=this.props,{offsetCenter:a}=e;return[a.x-n,a.y-i]}isPointInBounds(e,n){let{width:i,height:a}=this.props;if(n&&n.handled)return!1;let o=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=a;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(e){let{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){let n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?G2e:0;let{scrollZoom:i=!0,dragPan:a=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:l=!0,touchRotate:c=!1,keyboard:u=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(zh.WHEEL,d&&i),this.toggleEvents(zh.PAN,d),this.toggleEvents(zh.PINCH,d&&(l||c)),this.toggleEvents(zh.TRIPLE_PAN,d&&c),this.toggleEvents(zh.DOUBLE_TAP,d&&s),this.toggleEvents(zh.KEYBOARD,d&&u),this.scrollZoom=i,this.dragPan=a,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=l,this.touchRotate=c,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){let a={...e.getViewportProps(),...n},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){let s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:a,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(i=!i);let a=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(a,Ou,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;let n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Ou,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){let{inertia:n}=this;if(this.dragPan&&n&&e.velocity){let i=this.getCenter(e),a=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],o=this.controllerState.pan({pos:a}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:g5},{isDragging:!1,isPanning:!0})}else{let i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;let n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Ou,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){let{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){let i=this.getCenter(e),a=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],o=this.controllerState.rotate({pos:a}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:g5},{isDragging:!1,isRotating:!0})}else{let i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();let{speed:i=.01,smooth:a=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=e,s=2/(1+Math.exp(-Math.abs(o*i)));o<0&&s!==0&&(s=1/s);let l=this.controllerState.zoom({pos:n,scale:s});return this.updateViewport(l,{...this._getTransitionProps({around:n}),transitionDuration:a?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Ou,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;let n=this.getCenter(e);n[0]-=e.deltaX;let i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Ou,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;let{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){let i=this.getCenter(e),a=[i[0],i[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:a});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:g5},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{let i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return ap._startPinchRotation=e.rotation,ap._lastPinchEvent=e,this.updateViewport(i,Ou,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){let{scale:i}=e,a=this.getCenter(e);n=n.zoom({pos:a,scale:i})}if(this.touchRotate){let{rotation:i}=e;n=n.rotate({deltaAngleX:ap._startPinchRotation-i})}return this.updateViewport(n,Ou,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ap._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;let{inertia:n}=this,{_lastPinchEvent:i}=ap;if(this.touchZoom&&n&&i&&e.scale!==i.scale){let a=this.getCenter(e),o=this.controllerState.rotateEnd(),s=Math.log2(e.scale),l=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+l*n/2);o=o.zoom({pos:a,scale:c}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:a}),transitionDuration:n,transitionEasing:g5},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{let a=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(a,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ap._startPinchRotation=null,ap._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e),a=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(a,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;let n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:a,rotateSpeedX:o,rotateSpeedY:s}=this.keyboard===!0?{}:this.keyboard,{controllerState:l}=this,c,u={};switch(e.srcEvent.code){case"Minus":c=n?l.zoomOut(i).zoomOut(i):l.zoomOut(i),u.isZooming=!0;break;case"Equal":c=n?l.zoomIn(i).zoomIn(i):l.zoomIn(i),u.isZooming=!0;break;case"ArrowLeft":n?(c=l.rotateLeft(o),u.isRotating=!0):(c=l.moveLeft(a),u.isPanning=!0);break;case"ArrowRight":n?(c=l.rotateRight(o),u.isRotating=!0):(c=l.moveRight(a),u.isPanning=!0);break;case"ArrowUp":n?(c=l.rotateUp(s),u.isRotating=!0):(c=l.moveUp(a),u.isPanning=!0);break;case"ArrowDown":n?(c=l.rotateDown(s),u.isRotating=!0):(c=l.moveDown(a),u.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),u),!0}_getTransitionProps(e){let{transition:n}=this;return!n||!n.transitionInterpolator?Ou:e?{...n,transitionInterpolator:new vc({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}};var sp=class{constructor(e,n){A(this,"_viewportProps",void 0),A(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}};var wz=5,U2e=1.2,F7=class extends sp{constructor(e){let{width:n,height:i,latitude:a,longitude:o,zoom:s,bearing:l=0,pitch:c=0,altitude:u=1.5,position:d=[0,0,0],maxZoom:f=20,minZoom:p=0,maxPitch:h=60,minPitch:m=0,startPanLngLat:_,startZoomLngLat:E,startRotatePos:v,startBearing:y,startPitch:x,startZoom:S,normalize:N=!0}=e;Br(Number.isFinite(o)),Br(Number.isFinite(a)),Br(Number.isFinite(s)),super({width:n,height:i,latitude:a,longitude:o,zoom:s,bearing:l,pitch:c,altitude:u,maxZoom:f,minZoom:p,maxPitch:h,minPitch:m,normalize:N,position:d},{startPanLngLat:_,startZoomLngLat:E,startRotatePos:v,startBearing:y,startPitch:x,startZoom:S}),A(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){let i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;let o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){let{startRotatePos:a,startBearing:o,startPitch:s}=this.getState();if(!a||o===void 0||s===void 0)return this;let l;return e?l=this._getNewRotation(e,a,s,o):l={bearing:o+n,pitch:s+i},this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:a,startZoomLngLat:o}=this.getState();if(o||(a=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;let{maxZoom:s,minZoom:l}=this.getViewportProps(),c=a+Math.log2(i);c=vr(c,l,s);let u=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...u.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){let n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:a,longitude:o}=i;return Math.abs(a-n.bearing)>180&&(i.bearing=a<0?a+360:a-360),Math.abs(o-n.longitude)>180&&(i.longitude=o<0?o+360:o-360),i}applyConstraints(e){let{maxZoom:n,minZoom:i,zoom:a}=e;e.zoom=vr(a,i,n);let{maxPitch:o,minPitch:s,pitch:l}=e;e.pitch=vr(l,s,o);let{normalize:c=!0}=e;return c&&Object.assign(e,p5(e)),e}_zoomFromCenter(e){let{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){let{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){let n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,a){let o=e[0]-n[0],s=e[1]-n[1],l=e[1],c=n[1],{width:u,height:d}=this.getViewportProps(),f=o/u,p=0;s>0?Math.abs(d-c)>wz&&(p=s/(c-d)*U2e):s<0&&c>wz&&(p=1-l/c),p=vr(p,-1,1);let{minPitch:h,maxPitch:m}=this.getViewportProps(),_=a+180*f,E=i;return p>0?E=i+p*(m-i):p<0&&(E=i-p*(h-i)),{pitch:E,bearing:_}}},W_=class extends op{constructor(...e){super(...e),A(this,"ControllerState",F7),A(this,"transition",{transitionDuration:300,transitionInterpolator:new vc({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),A(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];let n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}};var jh=class extends ip{get ViewportType(){return Pi}get ControllerType(){return W_}};A(jh,"displayName","MapView");var V2e=new Gh;function $2e(t,e){var n,i;let a=(n=t.order)!==null&&n!==void 0?n:1/0,o=(i=e.order)!==null&&i!==void 0?i:1/0;return a-o}var Z_=class{constructor(){A(this,"effects",void 0),A(this,"_resolvedEffects",[]),A(this,"_defaultEffects",[]),A(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){let n=this._defaultEffects;if(!n.find(i=>i.id===e.id)){let i=n.findIndex(a=>$2e(a,e)>0);i<0?n.push(e):n.splice(i,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(Dn(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){let n={};for(let a of this.effects)n[a.id]=a;let i=[];for(let a of e){let o=n[a.id];o&&o!==a?o.setProps?(o.setProps(a.props),i.push(o)):(o.cleanup(),i.push(a)):i.push(a),delete n[a.id]}for(let a in n)n[a].cleanup();this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),e.some(a=>a instanceof Gh)||this._resolvedEffects.push(V2e),this._needsRedraw="effects changed"}finalize(){for(let e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}};var X_=class extends Ba{shouldDrawLayer(e){let{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}};var z2e="deckRenderer.renderLayers",q_=class{constructor(e){A(this,"gl",void 0),A(this,"layerFilter",void 0),A(this,"drawPickingColors",void 0),A(this,"drawLayersPass",void 0),A(this,"pickLayersPass",void 0),A(this,"renderCount",void 0),A(this,"_needsRedraw",void 0),A(this,"renderBuffers",void 0),A(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new X_(e),this.pickLayersPass=new np(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;let n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||Ht.getDefaultFramebuffer(this.gl)};i.effects&&this._preRender(i.effects,i);let a=this.lastPostProcessEffect?this.renderBuffers[0]:i.target,o=n.render({...i,target:a});i.effects&&this._postRender(i.effects,i),this.renderCount++,ln(z2e,this,o,e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){let{renderBuffers:e}=this;for(let n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(let i of e)n.preRenderStats[i.id]=i.preRender(this.gl,n),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){let{renderBuffers:e}=this;e.length===0&&e.push(new Ht(this.gl),new Ht(this.gl));for(let n of e)n.resize()}_postRender(e,n){let{renderBuffers:i}=this,a={...n,inputBuffer:i[0],swapBuffer:i[1],target:null};for(let o of e)if(o.postRender){if(o.id===this.lastPostProcessEffect){a.target=n.target,o.postRender(this.gl,a);break}let s=o.postRender(this.gl,a);a.inputBuffer=s,a.swapBuffer=s===i[0]?i[1]:i[0]}}};var j2e={pickedColor:null,pickedObjectIndex:-1};function Iz({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:a,deviceRect:o}){let{x:s,y:l,width:c,height:u}=o,d=a*a,f=-1,p=0;for(let h=0;h<u;h++){let m=h+l-i,_=m*m;if(_>d)p+=4*c;else for(let E=0;E<c;E++){if(t[p+3]-1>=0){let y=E+s-n,x=y*y+_;x<=d&&(d=x,f=p)}p+=4}}if(f>=0){let h=t.slice(f,f+4),m=e(h);if(m){let _=Math.floor(f/4/c),E=f/4-_*c;return{...m,pickedColor:h,pickedX:s+E,pickedY:l+_}}at.error("Picked non-existent layer. Is picking buffer corrupt?")()}return j2e}function Rz({pickedColors:t,decodePickingColor:e}){let n=new Map;if(t){for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){let o=t.slice(i,i+4),s=o.join(",");if(!n.has(s)){let l=e(o);l?n.set(s,{...l,color:o}):at.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function k7({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:a,z:o}){let s=e[0];e.length>1&&(s=H2e((t==null?void 0:t.pickedViewports)||e,{x:i,y:a}));let l;if(s){let c=[i-s.x,a-s.y];o!==void 0&&(c[2]=o),l=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:a,pixel:[i,a],coordinate:l,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function Pz(t){let{pickInfo:e,lastPickedInfo:n,mode:i,layers:a}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:l}=e,c=s?[s]:[];if(i==="hover"){let f=n.index,p=n.layerId,h=s?s.props.id:null;if(h!==p||l!==f){if(h!==p){let m=a.find(_=>_.props.id===p);m&&c.unshift(m)}n.layerId=h,n.index=l,n.info=null}}let u=k7(t),d=new Map;return d.set(null,u),c.forEach(f=>{let p={...u};f===s&&(p.color=o,p.index=l,p.picked=!0),p=G7({layer:f,info:p,mode:i});let h=p.layer;f===s&&i==="hover"&&(n.info=p),d.set(h.id,p),i==="hover"&&h.updateAutoHighlight(p)}),d}function G7({layer:t,info:e,mode:n}){for(;t&&e;){let i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}function H2e(t,e){for(let n=t.length-1;n>=0;n--){let i=t[n];if(i.containsPixel(e))return i}return t[0]}var K_=class{constructor(e){A(this,"gl",void 0),A(this,"pickingFBO",void 0),A(this,"depthFBO",void 0),A(this,"pickLayersPass",void 0),A(this,"layerFilter",void 0),A(this,"lastPickedInfo",void 0),A(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new np(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:a},o=this.lastPickedInfo.info){let s=o&&o.layer&&o.layer.id,l=o&&o.viewport&&o.viewport.id,c=s?i.find(p=>p.id===s):null,u=l&&a.find(p=>p.id===l)||a[0],d=u&&u.unproject([e-u.x,n-u.y]);return{...o,...{x:e,y:n,viewport:u,coordinate:d,layer:c}}}_resizeBuffer(){var e,n;let{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new Ht(i),Ht.isSupported(i,{colorBufferFloat:!0}))){let a=new Ht(i);a.attach({[36064]:new jt(i,{format:pt(i)?34836:6408,type:5126})}),this.depthFBO=a}(e=this.pickingFBO)===null||e===void 0||e.resize({width:i.canvas.width,height:i.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;let n=e.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:a,y:o,radius:s=0,depth:l=1,mode:c="query",unproject3D:u,onViewportActive:d,effects:f}){let p=this._getPickable(e),h=ro(this.gl);if(!p)return{result:[],emptyInfo:k7({viewports:i,x:a,y:o,pixelRatio:h})};this._resizeBuffer();let m=gh(this.gl,[a,o],!0),_=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],E=Math.round(s*h),{width:v,height:y}=this.pickingFBO,x=this._getPickingRect({deviceX:_[0],deviceY:_[1],deviceRadius:E,deviceWidth:v,deviceHeight:y}),S={x:a-s,y:o-s,width:s*2+1,height:s*2+1},N,w=[],T=new Set;for(let I=0;I<l;I++){let R;if(x){let O=this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:x,cullRect:S,effects:f,pass:"picking:".concat(c)});R=Iz({...O,deviceX:_[0],deviceY:_[1],deviceRadius:E,deviceRect:x})}else R={pickedColor:null,pickedObjectIndex:-1};let L;if(R.pickedLayer&&u&&this.depthFBO){let{pickedColors:O}=this._drawAndSample({layers:[R.pickedLayer],views:n,viewports:i,onViewportActive:d,deviceRect:{x:R.pickedX,y:R.pickedY,width:1,height:1},cullRect:S,effects:f,pass:"picking:".concat(c,":z")},!0);O[3]&&(L=O[0])}R.pickedLayer&&I+1<l&&(T.add(R.pickedLayer),R.pickedLayer.disablePickingIndex(R.pickedObjectIndex)),N=Pz({pickInfo:R,lastPickedInfo:this.lastPickedInfo,mode:c,layers:p,viewports:i,x:a,y:o,z:L,pixelRatio:h});for(let O of N.values())O.layer&&w.push(O);if(!R.pickedColor)break}for(let I of T)I.restorePickingColors();return{result:w,emptyInfo:N.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:a,y:o,width:s=1,height:l=1,mode:c="query",maxObjects:u=null,onViewportActive:d,effects:f}){let p=this._getPickable(e);if(!p)return[];this._resizeBuffer();let h=ro(this.gl),m=gh(this.gl,[a,o],!0),_=m.x,E=m.y+m.height,v=gh(this.gl,[a+s,o+l],!0),y=v.x+v.width,x=v.y,S={x:_,y:x,width:y-_,height:E-x},N=this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:d,deviceRect:S,cullRect:{x:a,y:o,width:s,height:l},effects:f,pass:"picking:".concat(c)}),w=Rz(N),T=new Map,I=Number.isFinite(u);for(let R=0;R<w.length&&!(I&&u&&T.size>=u);R++){let L=w[R],O={color:L.pickedColor,layer:null,index:L.pickedObjectIndex,picked:!0,x:a,y:o,pixelRatio:h};O=G7({layer:L.pickedLayer,info:O,mode:c}),T.has(O.object)||T.set(O.object,O)}return Array.from(T.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:a,deviceRect:o,cullRect:s,effects:l,pass:c},u=!1){let d=u?this.depthFBO:this.pickingFBO,f={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:a,pickingFBO:d,deviceRect:o,cullRect:s,effects:l,pass:c,pickZ:u,preRenderStats:{}};for(let y of l)y.useInPicking&&(f.preRenderStats[y.id]=y.preRender(this.gl,f));let{decodePickingColor:p}=this.pickLayersPass.render(f),{x:h,y:m,width:_,height:E}=o,v=new(u?Float32Array:Uint8Array)(_*E*4);return sc(d,{sourceX:h,sourceY:m,sourceWidth:_,sourceHeight:E,target:v}),{pickedColors:v,decodePickingColor:p}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:a,deviceHeight:o}){let s=Math.max(0,e-i),l=Math.max(0,n-i),c=Math.min(a,e+i+1)-s,u=Math.min(o,n+i+1)-l;return c<=0||u<=0?null:{x:s,y:l,width:c,height:u}}};var W2e={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"},Y_=class{constructor(e){A(this,"el",null),A(this,"isVisible",!1);let n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,W2e),n.appendChild(this.el))}setTooltip(e,n,i){let a=this.el;if(a){if(typeof e=="string")a.innerText=e;else if(e)e.text&&(a.innerText=e.text),e.html&&(a.innerHTML=e.html),e.className&&(a.className=e.className);else{this.isVisible=!1,a.style.display="none";return}this.isVisible=!0,a.style.display="block",a.style.transform="translate(".concat(n,"px, ").concat(i,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(a.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}};var U7=class{constructor(){this.get=()=>null,this.set=()=>this,this.on=()=>this,this.off=()=>this,this.destroy=()=>this,this.emit=()=>this}},Mz=U7,Cs=null;var ws=class{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}};var Lz=Cs?[[Cs.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Cs.Rotate,{enable:!1}],[Cs.Pinch,{enable:!1}],[Cs.Swipe,{enable:!1}],[Cs.Pan,{threshold:0,enable:!1}],[Cs.Press,{enable:!1}],[Cs.Tap,{event:"doubletap",taps:2,enable:!1}],[Cs.Tap,{event:"anytap",enable:!1}],[Cs.Tap,{enable:!1}]]:null,V7={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Oz={doubletap:["tap"]},Bz={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Hh={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Dz={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},$7={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"};var Fz=typeof navigator!="undefined"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",lp=typeof window!="undefined"?window:global;var _5=!1;try{let t={get passive(){return _5=!0,!0}};lp.addEventListener("test",null,t),lp.removeEventListener("test",null)}catch(t){_5=!1}var Z2e=Fz.indexOf("firefox")!==-1,{WHEEL_EVENTS:X2e}=Hh,kz="wheel",Gz=4.000244140625,q2e=40,K2e=.25,J_=class extends ws{constructor(e,n,i){super(e,n,i),this.handleEvent=a=>{if(!this.options.enable)return;let o=a.deltaY;lp.WheelEvent&&(Z2e&&a.deltaMode===lp.WheelEvent.DOM_DELTA_PIXEL&&(o/=lp.devicePixelRatio),a.deltaMode===lp.WheelEvent.DOM_DELTA_LINE&&(o*=q2e)),o!==0&&o%Gz===0&&(o=Math.floor(o/Gz)),a.shiftKey&&o&&(o=o*K2e),this.callback({type:kz,center:{x:a.clientX,y:a.clientY},delta:-o,srcEvent:a,pointerType:"mouse",target:a.target})},this.events=(this.options.events||[]).concat(X2e),this.events.forEach(a=>e.addEventListener(a,this.handleEvent,_5?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===kz&&(this.options.enable=n)}};var{MOUSE_EVENTS:Y2e}=Hh,Uz="pointermove",Vz="pointerover",$z="pointerout",zz="pointerenter",jz="pointerleave",Q_=class extends ws{constructor(e,n,i){super(e,n,i),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;let{enable:a}=this.options;this.enableMoveEvent=a,this.enableLeaveEvent=a,this.enableEnterEvent=a,this.enableOutEvent=a,this.enableOverEvent=a,this.events=(this.options.events||[]).concat(Y2e),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Uz&&(this.enableMoveEvent=n),e===Vz&&(this.enableOverEvent=n),e===$z&&(this.enableOutEvent=n),e===zz&&(this.enableEnterEvent=n),e===jz&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(Vz,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit($z,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(zz,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(jz,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit(Uz,e);break;case"mouseup":this.pressed=!1;break;default:}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}};var{KEY_EVENTS:J2e}=Hh,Hz="keydown",Wz="keyup",e2=class extends ws{constructor(e,n,i){super(e,n,i),this.handleEvent=a=>{let o=a.target||a.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&a.type==="keydown"&&this.callback({type:Hz,srcEvent:a,key:a.key,target:a.target}),this.enableUpEvent&&a.type==="keyup"&&this.callback({type:Wz,srcEvent:a,key:a.key,target:a.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(J2e),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(a=>e.addEventListener(a,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Hz&&(this.enableDownEvent=n),e===Wz&&(this.enableUpEvent=n)}};var Zz="contextmenu",t2=class extends ws{constructor(e,n,i){super(e,n,i),this.handleEvent=a=>{this.options.enable&&this.callback({type:Zz,center:{x:a.clientX,y:a.clientY},srcEvent:a,pointerType:"mouse",target:a.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===Zz&&(this.options.enable=n)}};var Q2e={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},eEe=0,tEe=1,rEe=2,nEe=1,iEe=2,aEe=4;function Xz(t){let e=Q2e[t.srcEvent.type];if(!e)return null;let{buttons:n,button:i}=t.srcEvent,a=!1,o=!1,s=!1;return e===2?(a=!!(n&nEe),o=!!(n&aEe),s=!!(n&iEe)):(a=i===eEe,o=i===tEe,s=i===rEe),{leftButton:a,middleButton:o,rightButton:s}}function qz(t,e){let n=t.center;if(!n)return null;let i=e.getBoundingClientRect(),a=i.width/e.offsetWidth||1,o=i.height/e.offsetHeight||1,s={x:(n.x-i.left-e.clientLeft)/a,y:(n.y-i.top-e.clientTop)/o};return{center:n,offsetCenter:s}}var z7={srcElement:"root",priority:0},r2=class{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;let i=this._normalizeEvent(n),a=n.srcEvent.target;for(;a&&a!==i.rootElement;){if(this._emit(i,a),i.handled)return;a=a.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,a=!1,o=!1){let{handlers:s,handlersByElement:l}=this,c=z7;typeof i=="string"||i&&i.addEventListener?c={...z7,srcElement:i}:i&&(c={...z7,...i});let u=l.get(c.srcElement);u||(u=[],l.set(c.srcElement,u));let d={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};a&&(d.once=!0),o&&(d.passive=!0),s.push(d),this._active=this._active||!d.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=d.priority);)f--;u.splice(f+1,0,d)}remove(e,n){let{handlers:i,handlersByElement:a}=this;for(let o=i.length-1;o>=0;o--){let s=i[o];if(s.type===e&&s.handler===n){i.splice(o,1);let l=a.get(s.srcElement);l.splice(l.indexOf(s),1),l.length===0&&a.delete(s.srcElement)}}this._active=i.some(o=>!o.passive)}_emit(e,n){let i=this.handlersByElement.get(n);if(i){let a=!1,o=()=>{e.handled=!0},s=()=>{e.handled=!0,a=!0},l=[];for(let c=0;c<i.length;c++){let{type:u,handler:d,once:f}=i[c];if(d({...e,type:u,stopPropagation:o,stopImmediatePropagation:s}),f&&l.push(i[c]),a)break}for(let c=0;c<l.length;c++){let{type:u,handler:d}=l[c];this.remove(u,d)}}}_normalizeEvent(e){let n=this.eventManager.getElement();return{...e,...Xz(e),...qz(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}};var oEe={events:null,recognizers:null,recognizerOptions:{},Manager:Mz,touchAction:"none",tabIndex:0},Wh=class{constructor(e=null,n){this._onBasicInput=a=>{let{srcEvent:o}=a,s=Bz[o.type];s&&this.manager.emit(s,a)},this._onOtherEvent=a=>{this.manager.emit(a.type,a)},this.options={...oEe,...n},this.events=new Map,this.setElement(e);let{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;let{options:n}=this,i=n.Manager;this.manager=new i(e,{touchAction:n.touchAction,recognizers:n.recognizers||Lz}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(V7).forEach(a=>{let o=this.manager.get(a);o&&V7[a].forEach(s=>{o.recognizeWith(s)})});for(let a in n.recognizerOptions){let o=this.manager.get(a);if(o){let s=n.recognizerOptions[a];delete s.enable,o.set(s)}}this.wheelInput=new J_(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Q_(e,this._onOtherEvent,{enable:!1}),this.keyInput=new e2(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new t2(e,this._onOtherEvent,{enable:!1});for(let[a,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(a,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){let{manager:i}=this;if(!i)return;let a=i.get(e);if(a&&a.options.enable!==n){a.set({enable:n});let o=Oz[e];o&&!this.options.recognizers&&o.forEach(s=>{let l=i.get(s);n?(l.requireFailure(e),a.dropRequireFailure(s)):l.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,a,o){if(typeof e!="string"){i=n;for(let d in e)this._addEventHandler(d,e[d],i,a,o);return}let{manager:s,events:l}=this,c=$7[e]||e,u=l.get(c);u||(u=new r2(this),l.set(c,u),u.recognizerName=Dz[c]||c,s&&s.on(c,u.handleEvent)),u.add(e,n,i,a,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(let s in e)this._removeEventHandler(s,e[s]);return}let{events:i}=this,a=$7[e]||e,o=i.get(a);if(o&&(o.remove(e,n),o.isEmpty())){let{recognizerName:s}=o,l=!1;for(let c of i.values())if(c.recognizerName===s&&!c.isEmpty()){l=!0;break}l||this._toggleRecognizer(s,!1)}}};function cp(){}var sEe=({isDragging:t})=>t?"grabbing":"grab",Kz={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:cp,onResize:cp,onViewStateChange:cp,onInteractionStateChange:cp,onBeforeRender:cp,onAfterRender:cp,onLoad:cp,onError:t=>at.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:sEe,getTooltip:null,debug:!1,drawPickingColors:!1},Bu=class{constructor(e){A(this,"props",void 0),A(this,"width",0),A(this,"height",0),A(this,"userData",{}),A(this,"canvas",null),A(this,"viewManager",null),A(this,"layerManager",null),A(this,"effectManager",null),A(this,"deckRenderer",null),A(this,"deckPicker",null),A(this,"eventManager",null),A(this,"tooltip",null),A(this,"metrics",void 0),A(this,"animationLoop",void 0),A(this,"stats",void 0),A(this,"viewState",void 0),A(this,"cursorState",void 0),A(this,"_needsRedraw",void 0),A(this,"_pickRequest",void 0),A(this,"_lastPointerDownInfo",null),A(this,"_metricsCounter",void 0),A(this,"_onPointerMove",n=>{let{_pickRequest:i}=this;if(n.type==="pointerleave")i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{let a=n.offsetCenter;if(!a)return;i.x=a.x,i.y=a.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),A(this,"_onEvent",n=>{let i=hA[n.type],a=n.offsetCenter;if(!i||!a||!this.layerManager)return;let o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:a.x,y:a.y,layers:o,viewports:this.getViewports(a)},this._lastPointerDownInfo),{layer:l}=s,c=l&&(l[i.handler]||l.props[i.handler]),u=this.props[i.handler],d=!1;c&&(d=c.call(l,s,n)),!d&&u&&u(s,n)}),A(this,"_onPointerDown",n=>{let i=n.offsetCenter,a=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=a.result[0]||a.emptyInfo}),this.props={...Kz,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&at.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),mh()==="IE"&&at.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document!="undefined"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new Mo({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&As.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,a,o,s,l,c;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(i=this.viewManager)===null||i===void 0||i.finalize(),this.viewManager=null,(a=this.effectManager)===null||a===void 0||a.finalize(),this.effectManager=null,(o=this.deckRenderer)===null||o===void 0||o.finalize(),this.deckRenderer=null,(s=this.deckPicker)===null||s===void 0||s.finalize(),this.deckPicker=null,(l=this.eventManager)===null||l===void 0||l.destroy(),this.eventManager=null,(c=this.tooltip)===null||c===void 0||c.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var u;(u=this.canvas.parentElement)===null||u===void 0||u.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&at.removed("onLayerHover","onHover")(),"onLayerClick"in e&&at.removed("onLayerClick","onClick")(),e.initialViewState&&!Dn(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);let n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);let i=this.viewManager.needsRedraw(e),a=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return n=n||i||a||o||s,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Br(this.viewManager),this.viewManager.views}getViewports(e){return Br(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){let n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(let i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(let n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,i){Br(this.deckPicker);let{stats:a}=this;a.get("Pick Count").incrementCount(),a.get(n).timeStart();let o=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return a.get(n).timeEnd(),o}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Br(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;let{width:n,height:i}=e;if(n||n===0){let o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=o}if(i||i===0){var a;let o=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=((a=e.style)===null||a===void 0?void 0:a.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){var e,n;let{canvas:i}=this;if(!i)return;let a=(e=i.clientWidth)!==null&&e!==void 0?e:i.width,o=(n=i.clientHeight)!==null&&n!==void 0?n:i.height;if(a!==this.width||o!==this.height){var s,l;this.width=a,this.height=o,(s=this.viewManager)===null||s===void 0||s.setProps({width:a,height:o}),(l=this.layerManager)===null||l===void 0||l.activateViewport(this.getViewports()[0]),this.props.onResize({width:a,height:o})}}_createAnimationLoop(e){let{width:n,height:i,gl:a,glOptions:o,debug:s,onError:l,onBeforeRender:c,onAfterRender:u,useDevicePixels:d}=e;return new Hf({width:n,height:i,useDevicePixels:d,autoResizeDrawingBuffer:!a,autoResizeViewport:!1,gl:a,onCreateContext:f=>_h({...o,...f,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:u,onError:l})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new jh({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){let{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){let{_pickRequest:e}=this;if(e.event){let{result:i,emptyInfo:a}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let o=a,s=!1;for(let l of i){var n;o=l,s=((n=l.layer)===null||n===void 0?void 0:n.onHover(l,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){let l=this.props.getTooltip(o);this.tooltip.setTooltip(l,o.x,o.y)}e.event=null}}_updateCursor(){let e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,Df(e,{enable:!0,copyState:!0})),this.tooltip=new Y_(this.canvas),ca(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);let n=new Pu;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new Wh(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(let a in hA)this.eventManager.on(a,this._onEvent);this.viewManager=new z_({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});let i=this.viewManager.getViewports()[0];this.layerManager=new $_(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new Z_,this.deckRenderer=new q_(e),this.deckPicker=new K_(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){let{gl:i}=this.layerManager.context;ca(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),at.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){let n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){let{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();let n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){let{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();let i=Lo.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}};A(Bu,"defaultProps",Kz);A(Bu,"VERSION",MU);var up=class{constructor(e,n){A(this,"opts",void 0),A(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){let e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];let{value:i}=this.source,{size:a}=n,o=i;if(i&&i.length!==a){o=new Float32Array(a);let s=n.elementOffset||0;for(let l=0;l<a;++l)o[l]=i[s+l]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}};function Yz(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function E5(t){return t.stride||t.size*t.bytesPerElement}function Jz(t,e){e.offset&&at.removed("shaderAttribute.offset","vertexOffset, elementOffset")();let n=E5(t),i=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,a=e.elementOffset||0,o=i*n+a*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:n}}function lEe(t,e){let n=Jz(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}var n2=class{constructor(e,n,i){A(this,"gl",void 0),A(this,"id",void 0),A(this,"size",void 0),A(this,"settings",void 0),A(this,"value",void 0),A(this,"doublePrecision",void 0),A(this,"_buffer",void 0),A(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;let a=n.logicalType||n.type,o=a===5130,{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0);let l;o?l=5126:!a&&n.isIndexed?l=e&&Uf(e,or.ELEMENT_INDEX_UINT32)?5125:5123:l=a||5126;let c=Yz(a||l||5126);this.doublePrecision=o,o&&n.fp64===!1&&(c=Float32Array),this.value=null,this.settings={...n,defaultType:c,defaultValue:s,logicalType:a,type:l,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){let{isIndexed:e,type:n}=this.settings;this._buffer=new Rt(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){let e=this.getAccessor();return e.vertexOffset?e.vertexOffset*E5(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),As.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){let i={},a=this.value instanceof Float64Array,o=lEe(this.getAccessor(),n||{});return i[e]=new up(this,o.high),i["".concat(e,"64Low")]=a?new up(this,o.low):new Float32Array(this.size),i}if(n){let i=Jz(this.getAccessor(),n);return{[e]:new up(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){let n=Array.from(this.value);e=[n,n]}else{let{value:n,numInstances:i,size:a}=this,o=i*a;if(n&&o&&n.length>=o){let s=new Array(a).fill(1/0),l=new Array(a).fill(-1/0);for(let c=0;c<o;)for(let u=0;u<a;u++){let d=n[c++];d<s[u]&&(s[u]=d),d>l[u]&&(l[u]=d)}e=[s,l]}}return this.state.bounds=e,e}setData(e){let{state:n}=this,i;ArrayBuffer.isView(e)?i={value:e}:e instanceof Rt?i={buffer:e}:i=e;let a={...this.settings,...i};if(n.bufferAccessor=a,n.bounds=null,i.constant){let o=i.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!n.constant||!this._areValuesEqual(o,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(i.buffer){let o=i.buffer;n.externalBuffer=o,n.constant=!1,this.value=i.value||null;let s=i.value instanceof Float64Array;a.type=i.type||o.accessor.type,a.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),a.stride=E5(a)}else if(i.value){this._checkExternalBuffer(i);let o=i.value;n.externalBuffer=null,n.constant=!1,this.value=o,a.bytesPerElement=o.BYTES_PER_ELEMENT,a.stride=E5(a);let{buffer:s,byteOffset:l}=this;this.doublePrecision&&o instanceof Float64Array&&(o=h5(o,a));let c=o.byteLength+l+a.stride*2;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:l}),a.type=i.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;let n=this.value,{startOffset:i=0,endOffset:a}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?h5(n,{size:this.size,startIndex:i,endIndex:a}):n.subarray(i,a),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){let{state:i}=this,a=i.allocatedValue,o=As.allocate(a,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;let{buffer:s,byteOffset:l}=this;return s.byteLength<o.byteLength+l&&(s.reallocate(o.byteLength+l),n&&a&&s.subData({data:a instanceof Float64Array?h5(a,this):a,offset:l})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){let{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));let i=this.settings.defaultType,a=!1;if(this.doublePrecision&&(a=n.BYTES_PER_ELEMENT<4),a)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&at.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){let{defaultValue:a,size:o}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e){let s=o;for(;--s>=0;)n[i+s]=a[s];return n}switch(o){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:a[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:a[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:a[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:a[0];break;default:let s=o;for(;--s>=0;)n[i+s]=Number.isFinite(e[s])?e[s]:a[s]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;let{size:i}=this;for(let a=0;a<i;a++)if(e[a]!==n[a])return!1;return!0}};var Qz=[],ej=[];function so(t,e=0,n=1/0){let i=Qz,a={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?i=t:t.length>0&&(ej.length=t.length,i=ej):i=Qz,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),a.index=e-1),{iterable:i,objectInfo:a}}function v5(t){return t&&t[Symbol.asyncIterator]}function y5(t,e){let{size:n,stride:i,offset:a,startIndices:o,nested:s}=e,l=t.BYTES_PER_ELEMENT,c=i?i/l:n,u=a?a/l:0,d=Math.floor((t.length-u)/c);return(f,{index:p,target:h})=>{if(!o){let v=p*c+u;for(let y=0;y<n;y++)h[y]=t[v+y];return h}let m=o[p],_=o[p+1]||d,E;if(s){E=new Array(_-m);for(let v=m;v<_;v++){let y=v*c+u;h=new Array(n);for(let x=0;x<n;x++)h[x]=t[y+x];E[v-m]=h}}else if(c===n)E=t.subarray(m*n+u,_*n+u);else{E=new t.constructor((_-m)*n);let v=0;for(let y=m;y<_;y++){let x=y*c+u;for(let S=0;S<n;S++)E[v++]=t[x+S]}}return E}}var tj=[],i2=[[0,1/0]];function rj(t,e){if(t===i2||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;let n=[],i=t.length,a=0;for(let o=0;o<i;o++){let s=t[o];s[1]<e[0]?(n.push(s),a=o+1):s[0]>e[1]?n.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return n.splice(a,0,e),n}function j7(t){let{source:e,target:n,start:i=0,size:a,getData:o}=t,s=t.end||n.length,l=e.length,c=s-i;if(l>c){n.set(e.subarray(0,c),i);return}if(n.set(e,i),!o)return;let u=l;for(;u<c;){let d=o(u,e);for(let f=0;f<a;f++)n[i+u]=d[f]||0,u++}}function nj({source:t,target:e,size:n,getData:i,sourceStartIndices:a,targetStartIndices:o}){if(!Array.isArray(o))return j7({source:t,target:e,size:n,getData:i}),e;let s=0,l=0,c=i&&((d,f)=>i(d+l,f)),u=Math.min(a.length,o.length);for(let d=1;d<u;d++){let f=a[d]*n,p=o[d]*n;j7({source:t.subarray(s,f),target:e,start:l,end:p,size:n,getData:c}),s=f,l=p}return l<e.length&&j7({source:[],target:e,start:l,size:n,getData:c}),e}var uEe={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function x5(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});let n=t.type||"interpolation";return{...uEe[n],...e,...t,type:n}}function b5(t,e){let n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function S5(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function N5(t){t.push(t.shift())}function a2(t,e){let{doublePrecision:n,settings:i,value:a,size:o}=t,s=n&&a instanceof Float64Array?2:1;return(i.noAlloc?a.length:e*o)*s}function A5({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:a,getData:o=s=>s}){let s=n.doublePrecision&&n.value instanceof Float64Array?2:1,l=n.size*s,c=n.byteOffset,u=n.startIndices,d=a&&u,f=a2(n,e),p=n.isConstant;if(!d&&i>=f)return;let h=p?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!p){let v=o;o=(y,x)=>n.normalizeConstant(v(y,x))}let m=p?(v,y)=>o(h,y):(v,y)=>o(h.subarray(v,v+l),y),_=t.getData({length:i}),E=new Float32Array(f);nj({source:_,target:E,sourceStartIndices:a,targetStartIndices:u,size:l,getData:m}),t.byteLength<E.byteLength+c&&t.reallocate(E.byteLength+c),t.subData({data:E,offset:c})}var yc=class extends n2{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:i2}),A(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){let n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){let{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;let{accessor:n}=this.settings,i=this.settings.transition,a=Array.isArray(n)?e[n.find(o=>e[o])]:e[n];return x5(a,i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){let{startRow:i=0,endRow:a=1/0}=n;this.state.updateRanges=rj(this.state.updateRanges,[i,a])}else this.state.updateRanges=i2}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=tj}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){let{state:n,settings:i}=this;return i.noAlloc?!1:i.update?(super.allocate(e,n.updateRanges!==i2),!0):!1}updateBuffer({numInstances:e,data:n,props:i,context:a}){if(!this.needsUpdate())return!1;let{state:{updateRanges:o},settings:{update:s,noAlloc:l}}=this,c=!0;if(s){for(let[u,d]of o)s.call(a,this,{data:n,startRow:u,endRow:d,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(let[u,d]of o){let f=Number.isFinite(u)?this.getVertexOffset(u):0,p=Number.isFinite(d)?this.getVertexOffset(d):l||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:p})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){let{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){let{state:i,settings:a}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(a.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),a.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});let s=e;Br(ArrayBuffer.isView(s.value),"invalid ".concat(a.accessor));let l=!!s.size&&s.size!==this.size;return i.binaryAccessor=y5(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:n,nested:l}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){let{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){let e=this.settings.shaderAttributes||{[this.id]:null},n={};for(let i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:a,props:o,numInstances:s}){if(e.constant)return;let{settings:l,state:c,value:u,size:d,startIndices:f}=e,{accessor:p,transform:h}=l,m=c.binaryAccessor||(typeof p=="function"?p:o[p]);Br(typeof m=="function",'accessor "'.concat(p,'" is not a function'));let _=e.getVertexOffset(i),{iterable:E,objectInfo:v}=so(n,i,a);for(let y of E){v.index++;let x=m(y,v);if(h&&(x=h.call(this,x)),f){let S=(v.index<f.length-1?f[v.index+1]:s)-f[v.index];if(x&&Array.isArray(x[0])){let N=_;for(let w of x)e._normalizeValue(w,u,N),N+=d}else x&&x.length>d?u.set(x,_):(e._normalizeValue(x,v.target,0),B7({target:u,source:v.target,start:_,count:S}));_+=S*d}else e._normalizeValue(x,u,_),_+=d}}_validateAttributeUpdaters(){let{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){let{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}};var o2=class{constructor({gl:e,attribute:n,timeline:i}){A(this,"gl",void 0),A(this,"type","interpolation"),A(this,"attributeInTransition",void 0),A(this,"settings",void 0),A(this,"attribute",void 0),A(this,"transition",void 0),A(this,"currentStartIndices",void 0),A(this,"currentLength",void 0),A(this,"transform",void 0),A(this,"buffers",void 0),this.gl=e,this.transition=new oo(i),this.attribute=n,this.attributeInTransition=new yc(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=fEe(e,n);let a={byteLength:0,usage:35050};this.buffers=[new Rt(e,a),new Rt(e,a)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;let{gl:i,buffers:a,attribute:o}=this;N5(a);let s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(let l of a)A5({buffer:l,...s});this.currentStartIndices=o.startIndices,this.currentLength=a2(o,n),this.attributeInTransition.setData({buffer:a[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:a[0],aTo:b5(i,o)},feedbackBuffers:{vCurrent:a[1]}})}update(){let e=this.transition.update();if(e){let{duration:n,easing:i}=this.settings,{time:a}=this.transition,o=a/n;i&&(o=i(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(let e of this.buffers)e.delete();this.buffers.length=0}},dEe=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function fEe(t,e){let n=S5(e.size);return new Ss(t,{vs:dEe,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}var s2=class{constructor({gl:e,attribute:n,timeline:i}){A(this,"gl",void 0),A(this,"type","spring"),A(this,"attributeInTransition",void 0),A(this,"settings",void 0),A(this,"attribute",void 0),A(this,"transition",void 0),A(this,"currentStartIndices",void 0),A(this,"currentLength",void 0),A(this,"texture",void 0),A(this,"framebuffer",void 0),A(this,"transform",void 0),A(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new oo(i),this.attribute=n,this.attributeInTransition=new yc(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=hEe(e),this.framebuffer=mEe(e,this.texture),this.transform=pEe(e,n,this.framebuffer);let a={byteLength:0,usage:35050};this.buffers=[new Rt(e,a),new Rt(e,a),new Rt(e,a)]}get inProgress(){return this.transition.inProgress}start(e,n){let{gl:i,buffers:a,attribute:o}=this,s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(let l of a)A5({buffer:l,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=a2(o,n),this.attributeInTransition.setData({buffer:a[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:b5(i,o)}})}update(){let{buffers:e,transform:n,framebuffer:i,transition:a}=this;if(!a.update())return!1;let s=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),N5(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),sc(i)[0]>0||a.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(let e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}};function pEe(t,e,n){let i=S5(e.size);return new Ss(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}function hEe(t){return new jt(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function mEe(t,e){return new Ht(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}var gEe={interpolation:o2,spring:s2},l2=class{constructor(e,{id:n,timeline:i}){A(this,"id",void 0),A(this,"isSupported",void 0),A(this,"gl",void 0),A(this,"timeline",void 0),A(this,"transitions",void 0),A(this,"needsRedraw",void 0),A(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Ss.isSupported(e)}finalize(){for(let e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(let a in e){let o=e[a],s=o.getTransitionSetting(n);s&&this._updateAttribute(a,o,s)}for(let a in this.transitions){let o=e[a];(!o||!o.getTransitionSetting(n))&&this._removeTransition(a)}}hasAttribute(e){let n=this.transitions[e];return n&&n.inProgress}getAttributes(){let e={};for(let n in this.transitions){let i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(let n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);let e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){let a=this.transitions[e],o=!a||a.type!==i.type;if(o){if(!this.isSupported){at.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}a&&this._removeTransition(e);let s=gEe[i.type];s?this.transitions[e]=new s({attribute:n,timeline:this.timeline,gl:this.gl}):(at.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}};var ij="attributeManager.invalidate",_Ee="attributeManager.updateStart",EEe="attributeManager.updateEnd",vEe="attribute.updateStart",yEe="attribute.allocate",xEe="attribute.updateEnd",c2=class{constructor(e,{id:n="attribute-manager",stats:i,timeline:a}={}){A(this,"id",void 0),A(this,"gl",void 0),A(this,"attributes",void 0),A(this,"updateTriggers",void 0),A(this,"needsRedraw",void 0),A(this,"userData",void 0),A(this,"stats",void 0),A(this,"attributeTransitionManager",void 0),A(this,"mergeBoundsMemoized",gl(yz)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new l2(e,{id:"".concat(n,"-transitions"),timeline:a}),Object.seal(this)}finalize(){for(let e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){let n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(let n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){let i=this._invalidateTrigger(e,n);ln(ij,this,e,i)}invalidateAll(e){for(let n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);ln(ij,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:a,props:o={},buffers:s={},context:l={}}){let c=!1;ln(_Ee,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(let u in this.attributes){let d=this.attributes[u],f=d.settings.accessor;d.startIndices=i,d.numInstances=n,o[u]&&at.removed("props.".concat(u),"data.attributes.".concat(u))(),d.setExternalBuffer(s[u])||d.setBinaryValue(typeof f=="string"?s[f]:void 0,e.startIndices)||typeof f=="string"&&!s[f]&&d.setConstantValue(o[f])||d.needsUpdate()&&(c=!0,this._updateAttribute({attribute:d,numInstances:n,data:e,props:o,context:l})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}c&&ln(EEe,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:a})}updateTransition(){let{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){let n=e.map(i=>{var a;return(a=this.attributes[i])===null||a===void 0?void 0:a.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){let{attributes:n,attributeTransitionManager:i}=this,a={...i.getAttributes()};for(let o in n){let s=n[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(a[o]=s)}return a}getShaderAttributes(e,n={}){e||(e=this.getAttributes());let i={};for(let a in e)n[a]||Object.assign(i,e[a].getShaderAttributes());return i}_add(e,n={}){for(let i in e){let a=e[i];this.attributes[i]=this._createAttribute(i,a,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){let a={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:i.instanced?1:n.divisor||0};return new yc(this.gl,a)}_mapUpdateTriggersToAttributes(){let e={};for(let n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(a=>{e[a]||(e[a]=[]),e[a].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){let{attributes:i,updateTriggers:a}=this,o=a[e];return o&&o.forEach(s=>{let l=i[s];l&&l.setNeedsUpdate(l.id,n)}),o}_updateAttribute(e){let{attribute:n,numInstances:i}=e;if(ln(vEe,n),n.constant){n.setConstantValue(n.value);return}n.allocate(i)&&ln(yEe,n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,ln(xEe,n,i))}};var u2=class extends oo{get value(){return this._value}_onUpdate(){let{time:e,settings:{fromValue:n,toValue:i,duration:a,easing:o}}=this,s=o(e/a);this._value=Zf(n,i,s)}};var aj=1e-5;function oj(t,e,n,i,a){let o=e-t,l=(n-e)*a,c=-o*i;return l+c+o+e}function bEe(t,e,n,i,a){if(Array.isArray(n)){let o=[];for(let s=0;s<n.length;s++)o[s]=oj(t[s],e[s],n[s],i,a);return o}return oj(t,e,n,i,a)}function sj(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){let a=t[i]-e[i];n+=a*a}return Math.sqrt(n)}return Math.abs(t-e)}var d2=class extends oo{get value(){return this._currValue}_onUpdate(){let{fromValue:e,toValue:n,damping:i,stiffness:a}=this.settings,{_prevValue:o=e,_currValue:s=e}=this,l=bEe(o,s,n,i,a),c=sj(l,n),u=sj(l,s);c<aj&&u<aj&&(l=n,this.end()),this._prevValue=s,this._currValue=l}};var SEe={interpolation:u2,spring:d2},f2=class{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,a){let{transitions:o}=this;if(o.has(e)){let c=o.get(e),{value:u=c.settings.fromValue}=c;n=u,this.remove(e)}if(a=x5(a),!a)return;let s=SEe[a.type];if(!s){at.error("unsupported transition type '".concat(a.type,"'"))();return}let l=new s(this.timeline);l.start({...a,fromValue:n,toValue:i}),o.set(e,l)}remove(e){let{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){let e={};for(let[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(let e of this.transitions.keys())this.remove(e)}};function cj(t){let e=t[Go];for(let n in e){let i=e[n],{validate:a}=i;if(a&&!a(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function uj(t,e){let n=dj({newProps:t,oldProps:e,propTypes:t[Go],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=AEe(t,e),a=!1;return i||(a=TEe(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:a,extensionsChanged:CEe(t,e),transitionsChanged:NEe(t,e)}}function NEe(t,e){if(!t.transitions)return!1;let n={},i=t[Go],a=!1;for(let o in t.transitions){let s=i[o],l=s&&s.type;(l==="number"||l==="color"||l==="array")&&H7(t[o],e[o],s)&&(n[o]=!0,a=!0)}return a?n:!1}function dj({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:a="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(a," changed shallowly");for(let o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(a,".").concat(o," added");let s=H7(t[o],e[o],i[o]);if(s)return"".concat(a,".").concat(o," ").concat(s)}for(let o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(a,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){let s=H7(t[o],e[o],i[o]);if(s)return"".concat(a,".").concat(o," ").concat(s)}}return!1}function H7(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":!i&&e!==t?"changed shallowly":null}function AEe(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1,{dataComparator:i,_dataDiff:a}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&a&&(n=a(t.data,e.data)||n),n}function TEe(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&lj(t,e,"all"))return{all:!0};let n={},i=!1;for(let a in t.updateTriggers)a!=="all"&&lj(t,e,a)&&(n[a]=!0,i=!0);return i?n:!1}function CEe(t,e){if(e===null)return!0;let n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let a=0;a<i.length;a++)if(!i[a].equals(n[a]))return!0;return!1}function lj(t,e,n){let i=t.updateTriggers[n];i=i==null?{}:i;let a=e.updateTriggers[n];return a=a==null?{}:a,dj({oldProps:a,newProps:i,triggerName:n})}var wEe="count(): argument not an object",IEe="count(): argument not a container";function fj(t){if(!PEe(t))throw new Error(wEe);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(REe(t))return Object.keys(t).length;throw new Error(IEe)}function REe(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function PEe(t){return t!==null&&typeof t=="object"}function Zh(t,e){if(!e)return t;let n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>i.name==="project64"))){let i=n.modules.findIndex(a=>a.name==="project32");i>=0&&n.modules.splice(i,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{let i={...t.inject};for(let a in e.inject)i[a]=(i[a]||"")+e.inject[a];n.inject=i}return n}var MEe={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},W7={};function pj(t,e,n,i){if(n instanceof jt)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let a=null;n.compressed&&(a={[10241]:n.data.length>1?9985:9729});let o=new jt(e,{...n,parameters:{...MEe,...a,...i}});return W7[o.id]=t,o}function hj(t,e){!e||!(e instanceof jt)||W7[e.id]===t&&(e.delete(),delete W7[e.id])}var LEe={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||Z7(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Dn(t,e,1)}},accessor:{validate(t,e){let n=T5(t);return n==="function"||n===T5(e.value)},equal(t,e,n){return typeof e=="function"?!0:Dn(t,e,1)}},array:{validate(t,e){return e.optional&&!t||Z7(t)},equal(t,e,n){let{compare:i}=n,a=Number.isInteger(i)?i:i?1:0;return i?Dn(t,e,a):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;let{compare:i}=n,a=Number.isInteger(i)?i:i?1:0;return i?Dn(t,e,a):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{let{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>{let i=n.context;return!i||!i.gl?null:pj(n.id,i.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{hj(n.id,t)}}};function mj(t){let e={},n={},i={};for(let[a,o]of Object.entries(t)){let s=o==null?void 0:o.deprecatedFor;if(s)i[a]=Array.isArray(s)?s:[s];else{let l=OEe(a,o);e[a]=l,n[a]=l.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}function OEe(t,e){switch(T5(e)){case"object":return p2(t,e);case"array":return p2(t,{type:"array",value:e,compare:!1});case"boolean":return p2(t,{type:"boolean",value:e});case"number":return p2(t,{type:"number",value:e});case"function":return p2(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function p2(t,e){return"type"in e?{name:t,...LEe[e.type],...e}:"value"in e?{name:t,type:T5(e.value),...e}:{name:t,type:"object",value:e}}function Z7(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function T5(t){return Z7(t)?"array":t===null?"null":typeof t}function gj(t,e){let n;for(let o=e.length-1;o>=0;o--){let s=e[o];"extensions"in s&&(n=s.extensions)}let i=X7(t.constructor,n),a=Object.create(i);a[$h]=t,a[_l]={},a[Ts]={};for(let o=0;o<e.length;++o){let s=e[o];for(let l in s)a[l]=s[l]}return Object.freeze(a),a}var BEe="_mergedDefaultProps";function X7(t,e){let n=BEe;if(e)for(let a of e){let o=a.constructor;o&&(n+=":".concat(o.extensionName||o.name))}let i=_j(t,n);return i||(t[n]=DEe(t,e||[]))}function DEe(t,e){if(!t.prototype)return null;let i=Object.getPrototypeOf(t),a=X7(i),o=_j(t,"defaultProps")||{},s=mj(o),l=Object.assign(Object.create(null),a,s.defaultProps),c=Object.assign(Object.create(null),a==null?void 0:a[Go],s.propTypes),u=Object.assign(Object.create(null),a==null?void 0:a[m5],s.deprecatedProps);for(let d of e){let f=X7(d.constructor);f&&(Object.assign(l,f),Object.assign(c,f[Go]),Object.assign(u,f[m5]))}return FEe(l,t),GEe(l,c),kEe(l,u),l[Go]=c,l[m5]=u,e.length===0&&!q7(t,"_propTypes")&&(t._propTypes=c),l}function FEe(t,e){let n=VEe(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function kEe(t,e){for(let n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){let a="".concat(this.id,": ").concat(n);for(let o of e[n])q7(this,o)||(this[o]=i);at.deprecated(a,e[n].join("/"))()}})}function GEe(t,e){let n={},i={};for(let a in e){let o=e[a],{name:s,value:l}=o;o.async&&(n[s]=l,i[s]=UEe(s))}t[mc]=n,t[_l]={},Object.defineProperties(t,i)}function UEe(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||v5(e)?this[_l][t]=e:this[Ts][t]=e},get(){if(this[Ts]){if(t in this[Ts])return this[Ts][t]||this[mc][t];if(t in this[_l]){let e=this[$h]&&this[$h].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[mc][t]}}return this[mc][t]}}}function q7(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _j(t,e){return q7(t,e)&&t[e]}function VEe(t){let e=t.componentName;return e||at.warn("".concat(t.name,".componentName not specified"))(),e||t.name}var $Ee=0,dp=class{constructor(...e){A(this,"id",void 0),A(this,"props",void 0),A(this,"count",void 0),this.props=gj(this,e),this.id=this.props.id,this.count=$Ee++}clone(e){let{props:n}=this,i={};for(let a in n[mc])a in n[Ts]?i[a]=n[Ts][a]:a in n[_l]&&(i[a]=n[_l][a]);return new this.constructor({...n,...i,...e})}};A(dp,"componentName","Component");A(dp,"defaultProps",{});var zEe=Object.freeze({}),h2=class{constructor(e){A(this,"component",void 0),A(this,"onAsyncPropUpdated",void 0),A(this,"asyncProps",void 0),A(this,"oldProps",void 0),A(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(let e in this.asyncProps){let n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||zEe}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){let n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){let n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(let n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[$h]||this.component;let n=e[Ts]||{},i=e[_l]||e,a=e[mc]||{};for(let o in n){let s=n[o];this._createAsyncPropData(o,a[o]),this._updateAsyncProp(o,s),n[o]=this.getAsyncProp(o)}for(let o in i){let s=i[o];this._createAsyncPropData(o,a[o]),this._updateAsyncProp(o,s)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(v5(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(let e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){let i=this.asyncProps[e];return n===i.resolvedValue||n===i.lastValue?!1:(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();let i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){let a=this.asyncProps[e];a&&i>=a.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),a.resolvedValue=n,a.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){let i=this.asyncProps[e];if(i){i.pendingLoadCount++;let a=i.pendingLoadCount;n.then(o=>{this.component&&(o=this._postProcessValue(i,o),this._setAsyncPropValue(e,o,a),this._onResolve(e,o))}).catch(o=>{this._onError(e,o)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}let i=this.asyncProps[e];if(!i)return;i.pendingLoadCount++;let a=i.pendingLoadCount,o=[],s=0;for await(let l of n){if(!this.component)return;let{dataTransform:c}=this.component.props;c?o=c(l,o):o=o.concat(l),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:s,endRow:o.length}]}),s=o.length,this._setAsyncPropValue(e,o,a)}this._onResolve(e,o)}_postProcessValue(e,n){let i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){let a=this.component&&this.component.props[Go];this.asyncProps[e]={type:a&&a[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}};var m2=class extends h2{constructor({attributeManager:e,layer:n}){super(n),A(this,"attributeManager",void 0),A(this,"needsRedraw",void 0),A(this,"needsUpdate",void 0),A(this,"subLayers",void 0),A(this,"usesPickingColorCache",void 0),A(this,"hasPickingBuffer",void 0),A(this,"changeFlags",void 0),A(this,"viewport",void 0),A(this,"uniformTransitions",void 0),A(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){let i=this.layer,a=i==null?void 0:i.props.fetch;return a?a(n,{propName:e,layer:i}):super._fetch(e,n)}_onResolve(e,n){let i=this.layer;if(i){let a=i.props.onDataLoad;e==="data"&&a&&a(n,{propName:e,layer:i})}}_onError(e,n){let i=this.layer;i&&i.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}};var jEe="layer.changeFlag",HEe="layer.initialize",WEe="layer.update",ZEe="layer.finalize",XEe="layer.matched",Ej=2**24-1,qEe=Object.freeze([]),KEe=gl(({oldViewport:t,viewport:e})=>t.equals(e)),El=new Uint8ClampedArray(0),YEe={data:{type:"data",value:qEe,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:a,signal:o})=>{let{resourceManager:s}=n.context;if(a=a||n.getLoadOptions(),i=i||n.props.loaders,o){var l;a={...a,fetch:{...(l=a)===null||l===void 0?void 0:l.fetch,signal:o}}}let c=s.contains(t);return!c&&!a&&(s.add({resourceId:t,data:cl(t,i),persistent:!1}),c=!0),c?s.subscribe({resourceId:t,onChange:u=>{var d;return(d=n.internalState)===null||d===void 0?void 0:d.reloadAsyncProp(e,u)},consumerId:n.id,requestId:e}):cl(t,i,a)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:_t.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},Dr=class extends dp{constructor(...e){super(...e),A(this,"internalState",null),A(this,"lifecycle",Lu.NO_STATE),A(this,"context",void 0),A(this,"state",void 0),A(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){let e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Br(this.internalState);let n=this.internalState.viewport||this.context.viewport,i=O7(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[a,o,s]=kh(i,n.pixelProjectionMatrix);return e.length===2?[a,o]:[a,o,s]}unproject(e){return Br(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Br(this.internalState);let i=this.internalState.viewport||this.context.viewport;return Sz(e,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(let n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){let{coordinateSystem:e}=this.props;return e===_t.DEFAULT||e===_t.LNGLAT||e===_t.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Br(e instanceof Uint8Array);let[n,i,a]=e;return n+i*256+a*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:fj(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(let n of this.props.extensions)e=Zh(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){let n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(let a of i)n.invalidateAll(a);else n.invalidateAll();if(n){let{props:a}=e,o=this.internalState.hasPickingBuffer,s=Number.isInteger(a.highlightedObjectIndex)||a.pickable||a.extensions.some(l=>l.getNeedsPickingBuffer.call(this,l));if(o!==s){this.internalState.hasPickingBuffer=s;let{pickingColors:l,instancePickingColors:c}=n.attributes,u=l||c;u&&(s&&u.constant&&(u.constant=!1,n.invalidate(u.id)),!u.value&&!s&&(u.constant=!0,u.value=[0,0,0]))}}}finalizeState(e){for(let i of this.getModels())i.delete();let n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(let n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:i}){let{index:a}=e;return a>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[a]),e}raiseError(e,n){var i,a;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((i=(a=this.props).onError)!==null&&i!==void 0&&i.call(a,e))){var o,s;(o=this.context)===null||o===void 0||(s=o.onError)===null||s===void 0||s.call(o,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;let n=this.internalState.viewport;this.internalState.viewport=e,(!n||!KEe({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){let n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(let n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){let e=this.getAttributeManager();if(!e)return;let n=this.props,i=this.getNumInstances(),a=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:a,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});let o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){let e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){let{uniformTransitions:e}=this.internalState;if(e.active){let n=e.update(),i=Object.create(this.props);for(let a in n)Object.defineProperty(i,a,{value:n[a]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;let i=Math.floor(El.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>Ej&&at.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),El=As.allocate(El,n,{size:3,copy:!0,maxCount:Math.max(n,Ej)});let a=Math.floor(El.length/3),o=[];for(let s=i;s<a;s++)this.encodePickingColor(s,o),El[s*3+0]=o[0],El[s*3+1]=o[1],El[s*3+2]=o[2]}e.value=El.subarray(0,n*3)}_setModelAttributes(e,n){let i=this.getAttributeManager(),a=e.userData.excludeAttributes||{},o=i.getShaderAttributes(n,a);e.setAttributes(o)}disablePickingIndex(e){let n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}let{pickingColors:i,instancePickingColors:a}=this.getAttributeManager().attributes,o=i||a,s=o&&n.attributes&&n.attributes[o.id];if(s&&s.value){let l=s.value,c=this.encodePickingColor(e);for(let u=0;u<n.length;u++){let d=o.getVertexOffset(u);l[d]===c[0]&&l[d+1]===c[1]&&l[d+2]===c[2]&&this._disablePickingIndex(u)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){let{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,a=n||i;if(!a)return;let o=a.getVertexOffset(e),s=a.getVertexOffset(e+1);a.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){let{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==El.buffer&&(i.value=El.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){Br(!this.internalState),Br(Number.isFinite(this.props.coordinateSystem)),ln(HEe,this);let e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new m2({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(at.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new f2(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(let n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){ln(XEe,this,this===e);let{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){let e=this.needsUpdate();if(ln(WEe,this,e),!e)return;let n=this.props,i=this.context,a=this.internalState,o=i.viewport,s=this._updateUniformTransition();a.propsInTransition=s,i.viewport=a.viewport||o,this.props=s;try{let l=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(l);else try{this.updateState(l)}catch(d){}for(let d of this.props.extensions)d.updateState.call(this,l,d);let u=this.getModels()[0]!==c[0];this._postUpdate(l,u)}finally{i.viewport=o,this.props=n,this._clearChangeFlags(),a.needsUpdate=!1,a.resetOldProps()}}_finalize(){ln(ZEe,this),this.finalizeState(this.context);for(let e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();let a=this.props,o=this.context;this.props=this.internalState.propsInTransition||a;let s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);let{getPolygonOffset:l}=this.props,c=l&&l(n)||[0,0];ca(o.gl,{polygonOffset:c}),Or(o.gl,i,()=>{let u={moduleParameters:e,uniforms:n,parameters:i,context:o};for(let d of this.props.extensions)d.draw.call(this,u,d);this.draw(u)})}finally{this.props=a}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;let{changeFlags:n}=this.internalState;for(let a in e)if(e[a]){let o=!1;switch(a){case"dataChanged":let s=e[a],l=n[a];s&&Array.isArray(l)&&(n.dataChanged=Array.isArray(s)?l.concat(s):s,o=!0);default:n[a]||(n[a]=e[a],o=!0)}o&&ln(jEe,this,a,e)}let i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){let i=uj(e,n);if(i.updateTriggersChanged)for(let o in i.updateTriggersChanged)i.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(i.transitionsChanged)for(let o in i.transitionsChanged){var a;this.internalState.uniformTransitions.add(o,n[o],e[o],(a=e.transitions)===null||a===void 0?void 0:a[o])}return this.setChangeFlags(i)}validateProps(){cj(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){let n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&typeof i=="function"&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){let e=this.context;return new c2(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){let{props:i,oldProps:a}=e;this.setNeedsRedraw(),this._updateAttributes();let{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());let{autoHighlight:s,highlightedObjectIndex:l,highlightColor:c}=i;if(n||a.autoHighlight!==s||a.highlightedObjectIndex!==l||a.highlightColor!==c){let u={};s||(u.pickingSelectedColor=null),Array.isArray(c)&&(u.pickingHighlightColor=c),(n||l!==a.highlightedObjectIndex)&&(u.pickingSelectedColor=Number.isFinite(l)&&l>=0?this.encodePickingColor(l):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;let i=this.getAttributeManager(),a=i?i.getNeedsRedraw(e):!1;if(n=n||a,n)for(let o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}};A(Dr,"defaultProps",YEe);A(Dr,"layerName","Layer");var JEe="compositeLayer.renderLayers",lo=class extends Dr{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){let{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){let{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if(typeof e=="function"){let n={index:-1,data:this.props.data,target:[]};return(i,a)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,a)}return e}getSubLayerProps(e={}){var n;let{opacity:i,pickable:a,visible:o,parameters:s,getPolygonOffset:l,highlightedObjectIndex:c,autoHighlight:u,highlightColor:d,coordinateSystem:f,coordinateOrigin:p,wrapLongitude:h,positionFormat:m,modelMatrix:_,extensions:E,fetch:v,operation:y,_subLayerProps:x}=this.props,S={id:"",updateTriggers:{},opacity:i,pickable:a,visible:o,parameters:s,getPolygonOffset:l,highlightedObjectIndex:c,autoHighlight:u,highlightColor:d,coordinateSystem:f,coordinateOrigin:p,wrapLongitude:h,positionFormat:m,modelMatrix:_,extensions:E,fetch:v,operation:y},N=x&&e.id&&x[e.id],w=N&&N.updateTriggers,T=e.id||"sublayer";if(N){let I=this.props[Go],R=e.type?e.type._propTypes:{};for(let L in N){let O=R[L]||I[L];O&&O.type==="accessor"&&(N[L]=this.getSubLayerAccessor(N[L]))}}Object.assign(S,e,N),S.id="".concat(this.props.id,"-").concat(T),S.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...w};for(let I of E){let R=I.getSubLayerProps.call(this,I);R&&Object.assign(S,R,{updateTriggers:Object.assign(S.updateTriggers,R.updateTriggers)})}return S}_updateAutoHighlight(e){for(let n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers,a=!i||this.needsUpdate();if(a){let o=this.renderLayers();i=gc(o,Boolean),this.internalState.subLayers=i}ln(JEe,this,a,i);for(let o of i)o.parent=this}};A(lo,"layerName","CompositeLayer");var C5=Math.PI/180,vj=180/Math.PI,w5=6370972,Xh=256;function QEe(){let t=Xh/w5,e=Math.PI/180*Xh;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}var qh=class extends ci{constructor(e={}){let{latitude:n=0,longitude:i=0,zoom:a=0,nearZMultiplier:o=.1,farZMultiplier:s=2,resolution:l=10}=e,{height:c,altitude:u=1.5}=e;c=c||1,u=Math.max(.75,u);let d=new zt().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,a);d.rotateX(n*C5),d.rotateZ(-i*C5),d.scale(f/c);let p=Math.atan(.5/u),h=Xh*2*f/c;super({...e,height:c,viewMatrix:d,longitude:i,latitude:n,zoom:a,distanceScales:QEe(),fovyRadians:p*2,focalDistance:u,near:o,far:Math.min(2,1/h+1)*u*s}),A(this,"longitude",void 0),A(this,"latitude",void 0),A(this,"resolution",void 0),this.latitude=n,this.longitude=i,this.resolution=l}get projectionMode(){return Ui.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){let n={targetZ:e.z||0},i=this.unproject([0,this.height/2],n),a=this.unproject([this.width/2,0],n),o=this.unproject([this.width,this.height/2],n),s=this.unproject([this.width/2,this.height],n);return o[0]<this.longitude&&(o[0]+=360),i[0]>this.longitude&&(i[0]-=360),[Math.min(i[0],o[0],a[0],s[0]),Math.min(i[1],o[1],a[1],s[1]),Math.max(i[0],o[0],a[0],s[0]),Math.max(i[1],o[1],a[1],s[1])]}unproject(e,{topLeft:n=!0,targetZ:i}={}){let[a,o,s]=e,l=n?o:this.height-o,{pixelUnprojectionMatrix:c}=this,u;if(Number.isFinite(s))u=K7(c,[a,l,s,1]);else{let h=K7(c,[a,l,-1,1]),m=K7(c,[a,l,1,1]),_=((i||0)/w5+1)*Xh,E=N_(b_([],h,m)),v=N_(h),y=N_(m),S=4*((4*v*y-(E-v-y)**2)/16)/E,N=Math.sqrt(v-S),w=Math.sqrt(Math.max(0,_*_-S)),T=(N-w)/Math.sqrt(E);u=i7([],h,m,T)}let[d,f,p]=this.unprojectPosition(u);return Number.isFinite(s)?[d,f,p]:Number.isFinite(i)?[d,f,i]:[d,f]}projectPosition(e){let[n,i,a=0]=e,o=n*C5,s=i*C5,l=Math.cos(s),c=(a/w5+1)*Xh;return[Math.sin(o)*l*c,-Math.cos(o)*l*c,Math.sin(s)*c]}unprojectPosition(e){let[n,i,a]=e,o=S_(e),s=Math.asin(a/o),c=Math.atan2(n,-i)*vj,u=s*vj,d=(o/Xh-1)*w5;return[c,u,d]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,n){let i=this.unproject(n);return{longitude:e[0]-i[0]+this.longitude,latitude:e[1]-i[1]+this.latitude}}};function K7(t,e){let n=bs([],e,t);return Rh(n,n,1/n[3]),n}var Y7=Math.PI/180;function e3e({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:a,zoom:o}){let s=n==="Z"?[0,0,1]:[0,1,0],l=n==="Z"?[0,-e,0]:[0,0,e],c=new zt().lookAt({eye:l,up:s});c.rotateX(i*Y7),n==="Z"?c.rotateZ(a*Y7):c.rotateY(a*Y7);let u=Math.pow(2,o)/t;return c.scale(u),c}var g2=class extends ci{constructor(e){let{height:n,projectionMatrix:i,fovy:a=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:l=0,rotationOrbit:c=0,zoom:u=0}=e,d=i?i[5]/2:rp(a);super({...e,longitude:void 0,viewMatrix:e3e({height:n||1,focalDistance:d,orbitAxis:o,rotationX:l,rotationOrbit:c,zoom:u}),fovy:a,focalDistance:d,position:s,zoom:u}),A(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){let[i,a,o=this.projectedCenter[2]]=e,s=n?a:this.height-a,[l,c,u]=ko([i,s,o],this.pixelUnprojectionMatrix);return[l,c,u]}panByPosition(e,n){let i=this.project(e),a=[this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]];return{target:this.unproject(a)}}};var t3e=new zt().lookAt({eye:[0,0,1]});function r3e({width:t,height:e,near:n,far:i,padding:a}){let o=-t/2,s=t/2,l=-e/2,c=e/2;if(a){let{left:u=0,right:d=0,top:f=0,bottom:p=0}=a,h=vr((u+t-d)/2,0,t)-t/2,m=vr((f+e-p)/2,0,e)-e/2;o-=h,s-=h,l+=m,c+=m}return new zt().ortho({left:o,right:s,bottom:l,top:c,near:n,far:i})}var Kh=class extends ci{constructor(e){let{width:n,height:i,near:a=.1,far:o=1e3,zoom:s=0,target:l=[0,0,0],padding:c=null,flipY:u=!0}=e,d=Array.isArray(s)?s[0]:s,f=Array.isArray(s)?s[1]:s,p=Math.min(d,f),h=Math.pow(2,p),m;if(d!==f){let _=Math.pow(2,d),E=Math.pow(2,f);m={unitsPerMeter:[_/h,E/h,1],metersPerUnit:[h/_,h/E,1]}}super({...e,longitude:void 0,position:l,viewMatrix:t3e.clone().scale([h,h*(u?-1:1),h]),projectionMatrix:r3e({width:n||1,height:i||1,padding:c,near:a,far:o}),zoom:p,distanceScales:m})}projectFlat([e,n]){let{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){let{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){let i=ko(n,this.pixelUnprojectionMatrix),a=this.projectFlat(e),o=Ch([],a,H4([],i)),s=Ch([],this.center,o);return{target:this.unprojectFlat(s)}}};var J7=class extends sp{constructor(e){let{width:n,height:i,rotationX:a=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:l=0,minRotationX:c=-90,maxRotationX:u=90,minZoom:d=-1/0,maxZoom:f=1/0,startPanPosition:p,startRotatePos:h,startRotationX:m,startRotationOrbit:_,startZoomPosition:E,startZoom:v}=e;super({width:n,height:i,rotationX:a,rotationOrbit:o,target:s,zoom:l,minRotationX:c,maxRotationX:u,minZoom:d,maxZoom:f},{startPanPosition:p,startRotatePos:h,startRotationX:m,startRotationOrbit:_,startZoomPosition:E,startZoom:v}),A(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){let i=this.getState().startPanPosition||n;if(!i)return this;let o=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){let{startRotatePos:a,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:l,height:c}=this.getViewportProps();if(!a||o===void 0||s===void 0)return this;let u;if(e){let d=(e[0]-a[0])/l,f=(e[1]-a[1])/c;(o<-90||o>90)&&(d*=-1),u={rotationX:o+f*180,rotationOrbit:s+d*180}}else u={rotationX:o+i,rotationOrbit:s+n};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){let n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:a}=i;return Math.abs(a-n.rotationOrbit)>180&&(i.rotationOrbit=a<0?a+360:a-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:a,startZoomPosition:o}=this.getState();if(o||(a=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;let s=this._calculateNewZoom({scale:i,startZoom:a}),l=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){let n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){let{maxZoom:i,minZoom:a}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);let o=n+Math.log2(e);return vr(o,a,i)}_panFromCenter(e){let{width:n,height:i,target:a}=this.getViewportProps();return this.pan({startPosition:a,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){let{maxZoom:n,minZoom:i,zoom:a,maxRotationX:o,minRotationX:s,rotationOrbit:l}=e;return e.zoom=Array.isArray(a)?[vr(a[0],i,n),vr(a[1],i,n)]:vr(a,i,n),e.rotationX=vr(e.rotationX,s,o),(l<-180||l>180)&&(e.rotationOrbit=_z(l+180,360)-180),e}},_2=class extends op{constructor(...e){super(...e),A(this,"ControllerState",J7),A(this,"transition",{transitionDuration:300,transitionInterpolator:new vc({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}};var xc=class extends ip{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return g2}get ControllerType(){return _2}};A(xc,"displayName","OrbitView");var vl=class{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(e){A(this,"opts",void 0),e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&Dn(this.opts,e.opts,1)}getShaders(e){return null}getSubLayerProps(e){let{defaultProps:n}=e.constructor,i={updateTriggers:{}};for(let a in n)if(a in this.props){let o=n[a],s=this.props[a];i[a]=s,o&&o.type==="accessor"&&(i.updateTriggers[a]=this.props.updateTriggers[a],typeof s=="function"&&(i[a]=this.getSubLayerAccessor(s)))}return i}initializeState(e,n){}updateState(e,n){}onNeedsRedraw(e){}getNeedsPickingBuffer(e){return!1}draw(e,n){}finalizeState(e,n){}};A(vl,"defaultProps",{});A(vl,"extensionName","LayerExtension");var Du=class{constructor(e){A(this,"opts",void 0),A(this,"typedArrayManager",void 0),A(this,"indexStarts",[0]),A(this,"vertexStarts",[0]),A(this,"vertexCount",0),A(this,"instanceCount",0),A(this,"attributes",void 0),A(this,"_attributeDefs",void 0),A(this,"data",void 0),A(this,"getGeometry",void 0),A(this,"geometryBuffer",void 0),A(this,"buffers",void 0),A(this,"positionSize",void 0),A(this,"normalize",void 0);let{attributes:n={}}=e;this.typedArrayManager=As,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);let{data:n,buffers:i={},getGeometry:a,geometryBuffer:o,positionFormat:s,dataChanged:l,normalize:c=!0}=this.opts;if(this.data=n,this.getGeometry=a,this.positionSize=o&&o.size||(s==="XY"?2:3),this.buffers=i,this.normalize=c,o&&(Br(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),c||(i.positions=o)),this.geometryBuffer=i.positions,Array.isArray(l))for(let u of l)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){let n=e.value||e;return ArrayBuffer.isView(n)?y5(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){let{attributes:i,buffers:a,_attributeDefs:o,typedArrayManager:s}=this;for(let l in o)if(l in a)s.release(i[l]),i[l]=null;else{let c=o[l];c.copy=n,i[l]=s.allocate(i[l],e,c)}}_forEachGeometry(e,n,i){let{data:a,getGeometry:o}=this,{iterable:s,objectInfo:l}=so(a,n,i);for(let c of s){l.index++;let u=o?o(c,l):null;e(u,l.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:i,instanceCount:a}=this,{data:o,geometryBuffer:s}=this,{startRow:l=0,endRow:c=1/0}=e||{},u={};if(e||(n=[0],i=[0]),this.normalize||!s)this._forEachGeometry((f,p)=>{let h=f&&this.normalizeGeometry(f);u[p]=h,i[p+1]=i[p]+(h?this.getGeometrySize(h):0)},l,c),a=i[i.length-1];else if(i=o.startIndices,a=i[o.length]||0,ArrayBuffer.isView(s))a=a||s.length/this.positionSize;else if(s instanceof Rt){let f=s.accessor.stride||this.positionSize*4;a=a||s.byteLength/f}else if(s.buffer){let f=s.stride||this.positionSize*4;a=a||s.buffer.byteLength/f}else if(s.value){let f=s.value,p=s.stride/f.BYTES_PER_ELEMENT||this.positionSize;a=a||f.length/p}this._allocate(a,!!e),this.indexStarts=n,this.vertexStarts=i,this.instanceCount=a;let d={};this._forEachGeometry((f,p)=>{let h=u[p]||f;d.vertexStart=i[p],d.indexStart=n[p];let m=p<i.length-1?i[p+1]:a;d.geometrySize=m-i[p],d.geometryIndex=p,this.updateGeometryAttributes(h,d)},l,c),this.vertexCount=n[n.length-1]}};var ji={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795};var Jve=Ma(Rj(),1),EZ=Ma(Wj(),1),vZ=Ma(sZ(),1);var fZ="hasParent",pZ="hasType";var tC="containedIn",rC="contains",Vve="composes",$ve="composedBy",$o="downstream",Is="upstream",nC="downstreamDemand",iC="upstreamDemand",M2="downstreamSupply",L2="upstreamSupply",hZ="trace",mZ="track",Sp="hasDataSource",aC="dataSourceTo";var P2="Node",zve="SyntheticNode";var gZ="Project";var jve="Case";var Hve="Base",e9="Bucket",di="Type",t9="Property";var O2="Carrier";var oC="DataSource";var t0="IfcFile",r0="ExcelFile";var hr="basebucket.com",Jr="default",vp="_catalog";var Dpt=`${hr}/${Jr}/${P2}/test-1`,Fpt=`${hr}/${Jr}/${P2}/test-2`,yp="Forest",_Z="ForestStand";var n0="Sawmill";var i0="Factory",xp="GlulamFactory";var a0="SupplyBatch",Wve="QuantificationBatch",Zve="Batch",Xve="BatchItem",qve="Component",bp="Building";var Nc="https://woodlaunch-assets.s3.eu-north-1.amazonaws.com",lZ={fillColor:[173,213,170],strokeColor:[100,184,109],name:"green"},Kve={fillColor:[185,174,166],strokeColor:[143,129,116],name:"brown"},cZ={fillColor:[184,195,202],strokeColor:[135,157,169],name:"blue"},R2={fillColor:[185,182,182],strokeColor:[124,122,121],name:"grey"};var Yve={fillColor:[249,246,243],strokeColor:[209,206,203],name:"white"},bl={TreeSpruce:"tree_spruce_4.png",[yp]:"scene_forest_mix1_16.png",[_Z]:"scene_forest_mix1_16.png",[n0]:"industrial_building_M2_32.png",[i0]:"industrial_building_L1_32.png",[xp]:"industrial_building_L3_32.png",[bp]:"apartments_M1_32.png",[a0]:"box_S_closed_1.png",[oC]:"database_1_1.png",[t0]:"file_BIM_house_model_1.png",[r0]:"file_spread_XY_1.png"},uZ={[`${vp}:SpruceLogs`]:["trees_spruces_8.png"],[`${vp}:PineLogs`]:["trees_pines_8.png"]},ui={[yp]:lZ,[n0]:Kve,[i0]:cZ,[_Z]:lZ,[xp]:cZ,[bp]:R2,[a0]:R2,[oC]:R2,[t0]:R2,[r0]:R2,[e9]:Yve};function Qve(t){return t>1e3?K5(t,0):t>100?K5(t,1):t>10?K5(t,2):K5(t,3)}function K5(t,e){let n=10**e;return Math.round(t*n)/n}function eC(){return Math.floor(Math.random()*16777215).toString(16)}function e4e(t,e){let n=(0,EZ.default)(t),i=[];for(let a=0;a<e;a++)i.push(n());return i}var Gu=class{constructor(t,e){le(this,"source");le(this,"target");le(this,"_carrier");le(this,"_name");le(this,"_key");le(this,"_value");le(this,"_unit");le(this,"_style");le(this,"_path");let{relationKey:n,name:i,value:a,...o}=t;Object.assign(this,o),n&&(this._key=n),i&&(this._name=i),a&&(this._value=a)}get id(){return Gu.createId(this.source,this.target,this._key)}get key(){return this._key}set key(t){this._key=t}get name(){return this._name||""}set name(t){this._name=t}get lineType(){var t;return((t=this._style)==null?void 0:t.lineType)||"bezier"}set lineType(t){this._style=this._style||{},this._style.lineType=t}isBaseToBase(){return this.source.isBase()&&this.target.isBase()}isBaseToBucket(){return this.source.isBase()&&this.target.isBucket()}isSupplyChain(){return this.source.hasDownstream()||this.target.hasUpstream()}isDownstream(){return this.source.hasDownstream()}getLabel(){let t=this._name||this._key||"",e=this.getValue();if(e){let n=this.getUnit();return n?`${t} (${Qve(e)} ${n})`:`${t} (${e})`}return t}getValue(){return this._value}setValue(t){this._value=t}getPropertyValue(t){var n;let e=(n=this._carrier)==null?void 0:n.getPropertyValue(t);return this.setValue(e),this.getValue()}getCarrierValue(t){var e;return(e=this._carrier)==null?void 0:e.getPropertyValue(t)}getUnit(){return this._unit}getFillColor(){var t;return(t=this._style)==null?void 0:t.fillColor}getColorCode(){let t=this.getFillColor();if(!t)return"";let[e,n,i]=t;return`rgb(${e},${n},${i})`}setFillColor(t){this._style=this._style||{},this._style.fillColor=t}hasDataSource(){return this.key===Sp}add(){this.source!==this.target?(this.source._outEdges.add(this),this.target._inEdges.add(this)):this.source._selfEdges.add(this)}remove(){this.source!==this.target?(this.source._outEdges.delete(this),this.target._inEdges.delete(this)):this.source._selfEdges.delete(this)}isInterGraphEdge(){return this.source._parent!==this.target._parent}static createId(t,e,n="default"){let i=t.getUri(),a=e.getUri(),o=n;return Gu.edgePropsToId({sourceUri:i,targetUri:a,relationKey:o})}static edgePropsToId(t){return`${t.sourceUri}-${t.relationKey}-${t.targetUri}`}},t4e=class{constructor(){le(this,"nodeMap",new Map)}remove(t){this.nodeMap.delete(t.getVersionUri())}get size(){return this.nodeMap.size}*nodes_(){for(let t of this.nodeMap.values())yield t}*graphs_(){for(let t of this.nodes_())t instanceof Pe&&(yield t)}findShallow(t){return this.nodeMap.get(t)}get nodesShallow(){return this.nodes_()}get graphs(){return this.graphs_()}*_edges(){for(let t of this.nodeMap.values()){for(let e of t._outEdges)yield e;for(let e of t._selfEdges)yield e}}interGraphEdges(){throw new Error("not implemented")}get nodeShallowCount(){return this.nodeMap.size}get edgeCount(){let t=0;for(let e of this.nodeMap.values())t+=e.getOutDegree()+e.getSelfDegree();return t}get edges(){return this._edges()}addNode(t){this.nodeMap.set(t.getVersionUri(),t)}nodeIsConsistent(t){for(let e of t._outEdges)if(e.source!==t||e.source===e.target)return!1;for(let e of t._inEdges)if(e.target!==t||e.source===e.target)return!1;for(let e of t._selfEdges)if(e.target!==e.source||e.source!==t)return!1;return!0}isConsistent(){for(let t of this.nodeMap.values())if(!this.nodeIsConsistent(t))return!1;return!0}},Pe=class{constructor(t){le(this,"_props");le(this,"_id");le(this,"_tempId");le(this,"_key");le(this,"_type");le(this,"_subTypeOf");le(this,"_namespace");le(this,"_name");le(this,"_boardId");le(this,"_parentId");le(this,"_createdAt");le(this,"_typeNode");le(this,"_subTypeNode");le(this,"_parent");le(this,"_project");le(this,"_sourceNode");le(this,"_targetNode");le(this,"_carrierEdge");le(this,"_polygon");le(this,"_inEdges",new Set);le(this,"_outEdges",new Set);le(this,"_selfEdges",new Set);le(this,"_useNodePropertyValue");le(this,"_useChildrenPropertyValue");le(this,"_useDataSourcePropertyValue");le(this,"_modelMatrix");le(this,"_children",new t4e);let e=(t==null?void 0:t.id)||eC(),n=(t==null?void 0:t.key)||e,i=(t==null?void 0:t.type)||P2,a=(t==null?void 0:t.namespace)||hr,o=(t==null?void 0:t.boardId)||Jr,s=(t==null?void 0:t.createdAt)||new Date().toISOString(),l={...t||{},id:e,key:n,type:i,namespace:a,boardId:o,createdAt:s};this._props=l,t!=null&&t.id?this._id=e:this._tempId=eC()}static createEdgeNodeId(t,e){return`${t}--${e}`}isTemporary(){return!!this._tempId}isCarrier(){return!!this.hasCarrierDemand()||!!this.hasCarrierSupply()}isDownstreamCarrier(){return!!this.hasCarrierSupply()}isUpstreamCarrier(){return!!this.hasCarrierDemand()}isBucket(){return this.type===e9}isBase(){return!this.isBucket()}hasDownstream(){var e;return((e=this.getRelations()[$o])==null?void 0:e.length)>0}hasUpstream(){var e;return((e=this.getRelations()[Is])==null?void 0:e.length)>0}hasDownstreamSupply(){var e;return((e=this.getRelations()[M2])==null?void 0:e.length)>0}hasUpstreamSupply(){var e;return((e=this.getRelations()[L2])==null?void 0:e.length)>0}hasDownstreamDemand(){var e;return((e=this.getRelations()[nC])==null?void 0:e.length)>0}hasUpstreamDemand(){var e;return((e=this.getRelations()[iC])==null?void 0:e.length)>0}hasSupplyChain(){return this.hasDownstream()||this.hasUpstream()}hasCarrierSupply(){return this.hasDownstreamSupply()&&this.hasUpstreamSupply()}hasCarrierDemand(){return this.hasDownstreamDemand()&&this.hasUpstreamDemand()}get id(){return this.getId()}get key(){return this.getKey()}get type(){return this._props.type}set type(t){this._props.type=t}get namespace(){return this._props.namespace}set namespace(t){this._props.namespace=t}get parentId(){return this._props.parentId}get x(){return this.getX()}set x(t){this.setX(t)}get y(){return this.getY()}set y(t){this.setY(t)}get z(){return this.getZ()}set z(t){this.setZ(t)}get center(){let[t,e]=this.getPosition()||[0,0];return[t,e]}get width(){return this.getWidth()}set width(t){this.setWidth(t)}get height(){return this.getHeight()}set height(t){this.setHeight(t)}get polygon(){return this._polygon}set polygon(t){this._polygon=t}get longitude(){let t=this.getLocation();if(t)return t[0]}set longitude(t){let e=this.getLocation();e?e[0]=t:this.setPropertyValue("location",[t,0])}get latitude(){let t=this.getLocation();if(t)return t[1]}set latitude(t){let e=this.getLocation();e?e[1]=t:this.setPropertyValue("location",[0,t])}setId(t){this._id=t,this._tempId=null}getId(){return this._id?this._id:this._tempId?this._tempId:(this._tempId=eC(),this._tempId)}getKey(){return this._props.key}getUri(){let t={key:this.getKey(),type:this._props.type,namespace:this._props.namespace,boardId:this._props.boardId};return Pe.nodePropsToVersionUri(t)}getVersion(){let t=this._props.createdAt;if(t)return encodeURIComponent(t)}setVersion(t){this._props.createdAt=t||new Date().toISOString()}getBaseUri(){return`${this._props.namespace}/${this._props.type}`}getVersionUri(){return this.getUri()}getProjectId(){return this._props.boardId}setProjectId(t){this._props.boardId=t}getBounds(){let{width:t,height:e}=this,n=this.center;if(!n||!t||!e)return null;let[i,a]=n,o=i-t/2,s=a-e/2;return[o,s,o+t,s+e]}getX(){var t,e;return(e=(t=this._props.appearance)==null?void 0:t.position)==null?void 0:e[0]}setX(t){this._props.appearance=this._props.appearance||{},this._props.appearance.position=this._props.appearance.position||[0,0,0],this._props.appearance.position[0]=t}getY(){var t,e;return(e=(t=this._props.appearance)==null?void 0:t.position)==null?void 0:e[1]}setY(t){this._props.appearance=this._props.appearance||{},this._props.appearance.position=this._props.appearance.position||[0,0,0],this._props.appearance.position[1]=t}getZ(){var t,e;return(e=(t=this._props.appearance)==null?void 0:t.position)==null?void 0:e[2]}setZ(t){this._props.appearance=this._props.appearance||{},this._props.appearance.position=this._props.appearance.position||[0,0,0],this._props.appearance.position[2]=t}getPosition(){let t=this.getX(),e=this.getY(),n=this.getZ();return!t&&t!==0||!e&&e!==0?null:[t,e,n||0]}setPosition(t,e,n){this._props.appearance=this._props.appearance||{};let i=n||n===0?n:this.getZ()||0;this._props.appearance.position=[t,e,i]}getWidth(){var t,e;return(e=(t=this._props.appearance)==null?void 0:t.size)==null?void 0:e[0]}setWidth(t){this._props.appearance=this._props.appearance||{},this._props.appearance.size=this._props.appearance.size||[0,0],this._props.appearance.size[0]=t}getHeight(){var t,e;return(e=(t=this._props.appearance)==null?void 0:t.size)==null?void 0:e[1]}setHeight(t){this._props.appearance=this._props.appearance||{},this._props.appearance.size=this._props.appearance.size||[0,0],this._props.appearance.size[1]=t}getSize(){let t=this.getWidth(),e=this.getHeight();return!t&&t!==0||!e&&e!==0?null:[t,e]}setSize(t,e){this._props.appearance=this._props.appearance||{},this._props.appearance.size=[t,e]}getRotation(){var t;return(t=this._props.appearance)==null?void 0:t.rotation}setRotation(t){this._props.appearance=this._props.appearance||{},this._props.appearance.rotation=t}getScale(){var t;return(t=this._props.appearance)==null?void 0:t.scale}setScale(t){this._props.appearance=this._props.appearance||{},this._props.appearance.scale=t}getExtrusion(){var t;return(t=this._props.appearance)==null?void 0:t.extrusion}setExtrusion(t){this._props.appearance=this._props.appearance||{},this._props.appearance.extrusion=t}getFillColor(){var t;return(t=this._props.appearance)==null?void 0:t.fillColor}getColorCode(){let t=this.getFillColor();if(!t)return"";let[e,n,i]=t;return`rgb(${e},${n},${i})`}setFillColor(t){this._props.appearance=this._props.appearance||{},this._props.appearance.fillColor=t}getStrokeColor(){var t;return(t=this._props.appearance)==null?void 0:t.strokeColor}getColor(){let t=this.getFillColor(),e=this.getStrokeColor(),n={};return t&&(n.fillColor=t),e&&(n.strokeColor=e),n}setStrokeColor(t){this._props.appearance=this._props.appearance||{},this._props.appearance.strokeColor=t}getImageUrl(){var t;return(t=this._props.appearance)==null?void 0:t.imageUrl}setImageUrl(t){this._props.appearance=this._props.appearance||{},this._props.appearance.imageUrl=t}getAsset3dUrl(){var t;return(t=this._props.appearance)==null?void 0:t.asset3dUrl}setAsset3dUrl(t){this._props.appearance=this._props.appearance||{},this._props.appearance.asset3dUrl=t}getLocation(){return this.getPropertyValue("location")}setLocation(t){this.setPropertyValue("location",t)}getFeature(){var e;let t=(e=this._props.appearance)==null?void 0:e.geometry;if(t)return{type:"Feature",geometry:t,properties:this.getProperties()}}getProperties(){return this._props.properties}getPropertyValue(t){return this.getNodePropertyValue(t)}setPropertyValue(t,e){this._props.properties=this._props.properties||{},this._props.properties[t]=e}getNodePropertyValue(t){var e;return(e=this._props.properties)==null?void 0:e[t]}useNodePropertyValue(){this._useNodePropertyValue=!0,this._useChildrenPropertyValue=!1,this._useDataSourcePropertyValue=!1}useChildrenPropertyValue(){this._useNodePropertyValue=!1,this._useChildrenPropertyValue=!0,this._useDataSourcePropertyValue=!1}useDataSourcePropertyValue(){this._useNodePropertyValue=!1,this._useChildrenPropertyValue=!1,this._useDataSourcePropertyValue=!0}setParent(t){this._parent=t}getSerializedProperties(){return this._props.properties||{}}instantiateAllRelations(){let t=this.getChildren();for(let e of t)e._parent=this,e._parentId=this.getId(),e.instantiateRelations()}instantiateRelations(){if(!this._parent){console.log("node has no parent",this.getUri());return}let t=this._props.relations;for(let e in t){let n=t[e];for(let i of n){let a=this._parent.findChildNodeByUri(i);if(!a){console.warn("Target node not found",i);continue}let o=Gu.createId(this,a,e);this.findEdge(o)||(a._parent=this._parent,a._parentId=this._parent.getId(),this.addRelation(e,a))}}}getRelations(){let t={};if(!this._parent)return console.log("no parent"),t;let e=this._parent.getEdges().filter(n=>n.source===this);for(let n of e){let i=n._key;t[i]=t[i]||[],t[i].push(n)}return t}getSerializedRelations(){let t=this.getRelations(),e={};for(let i in t){let a=t[i];e[i]=a.map(o=>o.target.getUri())}let n=this._props.relations;for(let i in n){let a=n[i];e[i]||(e[i]=[]);for(let o of a)e[i].find(s=>s===o)||e[i].push(o)}return e}getRelationsByKey(t){return this._parent?this._parent.getEdges().filter(e=>e.source.getUri()===this.getUri()&&e._key===t):[]}addRelation(t,e,n={}){if(!e)return;if(!this._parent){console.error("Parent is missing - a node MUST have a parent to add edges",this.getUri());return}if(!this._parent.findChildNodeByUri(e.getUri())){console.error("Target node is missing - a node must already be added to add the in-memory edge",this.getUri());return}let a=Gu.createId(this,e,t);if(this._parent.findEdge(a)){console.log("Edge already exists");return}n.key=t,this._parent.findChildNodeByUri(e.getUri()),this._parent.addEdge(this.getUri(),e.getUri(),n)}connectToDataSource(t){this.addRelation(Sp,t)}getDownstreamEdges(){return this.getRelationsByKey($o)}getUpstreamEdges(){return this.getRelationsByKey(Is)}getDataSourceEdges(){return this.getRelationsByKey(Sp)}getInsightFromNodeEdges(){return console.warn("this is not used! in node.ts"),[]}serialize(){let t=this.getSerializedProperties(),e=this.getSerializedRelations(),n=this.getId(),i={...this._props};i.appearance&&(i.appearance={...i.appearance}),i.appearance&&(i.appearance=JSON.parse(JSON.stringify(i.appearance)));let a={...i,properties:t,relations:e};a.key||(a.key=this.getId());let o="latest";return o&&(a.createdAt=o),a}moveToParent(t){this.removeSubgraph(),t.addNode(this)}clone(t){let e=this.serialize();return t&&(delete e.id,delete e.key),new Pe(e)}findRootNode(){let t=this;for(;t._parent;)t=t._parent;return t}getChildren(){return[...this.getShallowNodes()]}getChildrenByType(t){return this.getChildren().filter(e=>e.type===t)}getEdges(){return[...this.getShallowEdges()]}findEdge(t){return this.getEdges().find(e=>e.id===t)}getNodesFromRootRecursive(){return[...this.findRootNode().getNodesBreadthFirst()]}getNodesFromRootRecursiveByType(t){return this.getNodesFromRootRecursive().filter(n=>n.type===t)}getNodesFromRootRecursiveByTypes(t){return this.getNodesFromRootRecursive().filter(n=>t.includes(n.type))}getOutDegree(){return this._outEdges.size}getInDegree(){return this._inEdges.size}getSelfDegree(){return this._selfEdges.size}getDegree(){return this.getOutDegree()+this.getInDegree()+this.getSelfDegree()}getShallowEdges(){return this._children.edges}getDeepEdges(){return this.deepEdgesIt()}getShallowNodes(){return this._children.nodesShallow}getNodesBreadthFirst(){return this.getNodesBreadthFirst_()}getShallowNodeCount(){return this._children.nodeShallowCount}getNodeCountDeep(){let t=this._children.size;for(let e of this.getShallowNodes())e instanceof Pe&&(t+=e.getNodeCountDeep());return t}getEdgeCount(){return this._children.edgeCount}getDeepEdgesCount(){let t=0;for(let e of this.getNodesBreadthFirst())t+=e.getOutDegree()+e.getSelfDegree();return t}removeOutEdge(t){this._outEdges.delete(t)}removeInEdge(t){this._inEdges.delete(t)}*_edges(){for(let t of this._inEdges)yield t;for(let t of this._outEdges)yield t;for(let t of this._selfEdges)yield t}getParent(){return this._parent}*getParents(){let t=this._parent;for(;t!=null;)yield t,t=t._parent}isChildOf(t){for(let e of this.getParents())if(e===t)return!0;return!1}*getParentTypeNodes(){let t=this._subTypeNode;for(;t!=null;)yield t,t=t._subTypeNode}isTypeNodeOf(t){for(let e of this.getParentTypeNodes())if(e===t)return!0;return!1}removeSubgraph(){let t=this._parent;t&&t.removeNode(this);for(let e of this.outGoingEdges())e.attachedAtSource?e.node.removeOutEdge(e.edge):e.node.removeInEdge(e.edge)}*outGoingEdges(){for(let t of this._outEdges){let e=t.target;this.isAncestor(e)||(yield{edge:t,node:e,attachedAtSource:!1})}for(let t of this._inEdges){let e=t.source;this.isAncestor(e)||(yield{edge:t,node:e,attachedAtSource:!0})}for(let t of this.getNodesBreadthFirst()){for(let e of t._outEdges){let n=e.target;n!==this&&(this.isAncestor(n)||(yield{edge:e,node:n,attachedAtSource:!1}))}for(let e of t._inEdges){let n=e.source;n!==this&&(this.isAncestor(n)||(yield{edge:e,node:n,attachedAtSource:!0}))}}}isAncestor(t){for(let e of t.getParents())if(e===this)return!0;return!1}*graphs(){for(let t of this._children.graphs)yield t}noEmptySubgraphs(){for(let t of this.subgraphsBreadthFirst())if(t.getShallowNodeCount()===0)return!1;return!0}hasSubgraphs(){for(let t of this.getShallowNodes())if(t instanceof Pe)return!0;return!1}*subgraphsBreadthFirst(){for(let t of this.getNodesBreadthFirst())t instanceof Pe&&(yield t)}isEmpty(){return this.getShallowNodeCount()===0}addEdge(t,e,n){return this.setEdge(t,e,n)}setEdge(t,e,n){let i=this.findChildNodeByUri(t);if(i==null){console.log("source not found",t);return}let a=this.findChildNodeByUri(e);if(a==null){console.log("target not found",e);return}return new Gu({...n,source:i,target:a})}*getNodesBreadthFirst_(){for(let t of this._children.nodesShallow)yield t,t instanceof Pe&&(yield*t.getNodesBreadthFirst())}findEdgeRecursive(t){for(let e of this.getDeepEdges())if(e.id===t)return e;return null}findNodeRecursive(t){let e=this._children.findShallow(t);if(e)return e;for(let n of this.getShallowNodes())if(n instanceof Pe){let i=n.findNodeRecursive(t);if(i)return i}return null}findChildNodeByUri(t){return this._children.findShallow(t)}findChildNodeByVersionUri(t){return this._children.findShallow(t)}*deepEdgesIt(){for(let t of this.getNodesBreadthFirst()){for(let e of t._outEdges)yield e;for(let e of t._selfEdges)yield e;for(let e of t._inEdges)this.isAncestor(e.source)||(yield e)}}isConsistent(){return this._parent?this._parent.isConsistent():this.eachNodeIdIsUnique()&&this._children.isConsistent()}nodeIsConsistent(t){return this._children.nodeIsConsistent(t)}removeNode(t){for(let e of t._outEdges)e.target._inEdges.delete(e);for(let e of t._inEdges)e.source._outEdges.delete(e);this._children.remove(t);for(let e of this.subgraphsBreadthFirst())e.removeNode(t)}addNodes(t){for(let e of t)this.addNode(e)}addNode(t){return t._parent=this,t._parentId=this.getVersionUri(),this._children.addNode(t),t}liftNode(t){for(;t!=null&&t._parent!==this;)t=t._parent;return t}eachNodeIdIsUnique(){let t=new Set;for(let e of this.getNodesBreadthFirst()){if(t.has(e.id))return!1;t.add(e.id)}return!0}*allSuccessorsWidthFirst(){for(let t of this.getShallowNodes())yield t;for(let t of this.getShallowNodes())t instanceof Pe&&(yield*t.allSuccessorsWidthFirst())}*allSuccessorsDepthFirst(){for(let t of this.getShallowNodes())t instanceof Pe&&(yield*t.allSuccessorsDepthFirst()),yield t}static nodePropsToOrdinalKey(t){return t.ordinal!==void 0?`${t.key}-${t.ordinal}`:t.key}static nodePropsToUri(t){let e=Pe.nodePropsToOrdinalKey(t);return`${t.namespace}/${t.type}/${e}`}static nodePropsToVersionUri(t){let e=Pe.nodePropsToOrdinalKey(t),n=t.timing||t.timing===0?t.timing:t.observedAt||"latest";return`${t.namespace}/${t.type}/${e}/${n}`}static uriToNodeProps(t,e){let[n,i,a]=t.split("/");return{...e||{},namespace:n||hr,type:i||P2,key:a||"missing"}}static versionUriToNodeUri(t){return t.split("/").slice(0,3).join("/")}};var kpt={gwpTotal:[351+34+2.95,19.5,0,0,0,0,0],gwpBiogenic:[0,0,0,0,0,0,0]};var Gpt={gwpTotal:[351+34+2.95,3.92],gwpFossil:[350+34+2.93,3.92],gwpBiogenic:[-47.7+-7470+-233,1680],gwpLuluc:[.365,555e-10,.0194,644e-6,.00575,295e-6,0],gwpGhg:[52.7,2.76,2.84,.116,1.04,.12,-161]};var Q5=class extends Pe{constructor(e,n){super(e);le(this,"_seeder");le(this,"_syntheticProps");let i=n.seed;this._seeder=vZ.random.createRandom(i),this._syntheticProps=n,this.generateSyntheticProperties(this,n),this.generateChildNodes()}generateChildNodes(){var n;let e=this.getId();for(let i of((n=this._syntheticProps)==null?void 0:n.syntheticChildren)||[]){let{amountMin:a=1,amountMax:o=1,overrideChildrenNodeProps:s}=i;if(s)for(let l of s)this.addNode(new Pe(l));else{let l=i.key,c=this.getIntegerValue(a,o),u=this._syntheticProps.seed,d=u?e4e(`${e}-${l}-${this.type}-${u}`,c):void 0;for(let f=0;f<c;f++){let p=JSON.parse(JSON.stringify(i));p.seed=d?d[f]:void 0;let h=p.type||zve;p.index=f;let m={key:p.key?`${p.key}-${e}-${f+1}`:`${h}-${e}-${f+1}`,type:h,parentId:e,boardId:this._props.boardId,namespace:this._props.namespace,name:{name:p.name?`${p.name}-${f+1}`:`${h}-${f+1}`}},_=new Q5(m,p);this.addNode(_)}}}}generateSyntheticProperties(e,n){let i=n.syntheticProperties||[];for(let a of i||[]){let{propertyKey:o,propertyType:s,value:l,stringPrefix:c}=a;if(s==="gaussianList"){let{mean:u,std:d,catalog:f}=this._seeder.pick(a.gaussianListSettings);e.setPropertyValue(vp,f);let p=e.generatePropertyValue({propertyKey:o,propertyType:"gaussian",mean:u,std:d});e.setPropertyValue(o,p)}else if(o==="name"&&c&&!l){let u=e.generatePropertyValue({...a,value:`${c}${n.index+1}`});e.setPropertyValue(o,u),e._props.name=u}else if(o==="observedAt"){let u=e.generatePropertyValue(a);e._props.observedAt=u}else{let u=e.generatePropertyValue(a);e.setPropertyValue(o,u)}}}getChildNodeId(){return this.getIntegerValue(0,1e9)}generateChildNode(e,n,i=this){let{type:a}=e;e.index=n,e.key=e.key||`${a}-${n+1}`,e.name=e.name||`${a}-${n+1}`;let o=new Q5({key:e.key,type:e.type,boardId:e.boardId,name:{name:e.name},namespace:e.namespace},e);return i.addNode(o),o}generatePropertyValue(e){let{propertyType:n,propertyKey:i,min:a=0,max:o=100,mean:s,std:l,chance:c,categories:u,categoryDistribution:d,stringPrefix:f="",value:p,startYear:h,endYear:m,startMonth:_,endMonth:E,startDay:v,endDay:y,startHour:x,endHour:S,startMinute:N,endMinute:w}=e;if(p||p===0||p===!1||p==="")return p;let T;switch(n){case"string":T=`${f}${this.getIntegerValue(a,o).toString()}`;break;case"integer":T=this.getIntegerValue(a,o);break;case"float":T=this.getFloatValue(a,o);break;case"boolean":T=this.getBooleanValue();break;case"gaussian":T=this._seeder.gaussian(s,l);break;case"date":T=this.getDate(h,m,_,E,v,y,x,S,N,w);break;case"category":if(d){let I=this._seeder.weighted(d);T=u[I]}else T=this._seeder.pick(u||[]);break;default:break}return T}getIntegerValue(e,n){return e===n?e:Math.round(this._seeder.range(e,n))}getFloatValue(e,n){return this._seeder.range(e,n)}getBooleanValue(e){return e?this._seeder.chance(e):this._seeder.boolean()}getNoiseValue(e,n=.2,i=10){return this._seeder.noise1D(e,n,i)+i}getNoiseValue2D(e,n){return this._seeder.noise2D(e,n,.2,10)+10}getDate(e=2e3,n=2022,i=0,a=11,o=1,s=31,l=1,c=24,u=0,d=59,f=0,p=59){let h=new Date;return h.setFullYear(this.getIntegerValue(e,n)),h.setMonth(this.getIntegerValue(i,a)),h.setDate(this.getIntegerValue(o,s)),h.setHours(this.getIntegerValue(l,c)),h.setMinutes(this.getIntegerValue(u,d)),h.setSeconds(0),h.setMilliseconds(0),h.toISOString()}createEdgeNodeName(e,n){return`${e._key} -> ${n._key}`}generateSyntheticRelations(e=this){var i,a;if((i=e._syntheticProps)!=null&&i.syntheticRelations)for(let o of(a=e._syntheticProps)==null?void 0:a.syntheticRelations){let{relationKey:s,targetUris:l,targetTypes:c,carrierNodes:u}=o;if(!l&&!c)throw"one of targetUris or targetTypes must be defined";let d,f;if(l){let p=this._seeder.pick(l);if(f=e._parent.findChildNodeByUri(p),!f)throw"no target node found with this uri";let h=Gu.createId(e,f,s);e._parent.findEdge(h)||(e._props.relations=e._props.relations||{},e._props.relations[s]=e._props.relations[s]||[],e._props.relations[s].push(f.getVersionUri()))}else if(c){d=this._seeder.pick(c),f=e.getRandomSibling(d),f||(f=new Pe({key:`${d}-temp-for-${e._props.key}`,type:d,boardId:e._props.boardId,namespace:e._props.namespace}));let p=Gu.createId(e,f,s);e._parent.findEdge(p)||(e._props.relations=e._props.relations||{},e._props.relations[s]=e._props.relations[s]||[],e._props.relations[s].push(f.getVersionUri()))}}let n=e.getChildren().filter(o=>o instanceof Q5);for(let o of n)this.generateSyntheticRelations(o)}generateCarrierNodes(e,n,i){let{carrierNodes:a,relationKey:o}=e,s={};for(let l of a||[]){let{amountMin:c,amountMax:u}=l,d=this.getIntegerValue(c,u);for(let f=0;f<d;f++){let p=i?this._seeder.pick(i):this,h=p._parent;if(!h)throw new Error("no parent node for carriers ");let m=this._seeder.pick(n);if(!m){for(let x of n)console.log(x._key,x._type);throw new Error("no target node for carriers ")}let _=Gu.createId(p,m,o),E=Pe.createEdgeNodeId(p.getUri(),m.getUri()),v=h.findEdge(_);if(!s[E]&&!v){p.addRelation(o,m);let x=new Pe({key:E,type:O2,name:{name:this.createEdgeNodeName(p,m)},namespace:this._namespace,boardId:this._boardId});s[E]=x,h.addNode(x);let S=h.findEdge(_);S||(h.addEdge(_,p,m,o),S=h.findEdge(_)),x._carrierEdge=S,S._carrier=x}let y=s[E];p.generateChildNode(l,f,y)}}}generateStyle(e){var l,c;let n=this.getImageFromProperties();n||(n=this.getImageFromType());let i={};n&&(i.imageUrl=`${Nc}/${n}`);let a=this.getColorFromType();a&&(i.fillColor=a.fillColor,i.strokeColor=a.strokeColor);let o=((l=e==null?void 0:e.appearance)==null?void 0:l.size)||[64,64],s=((c=e==null?void 0:e.appearance)==null?void 0:c.position)||[42,42,0];return i.size=o,i.position=s,i}getImageFromProperties(){let e=this.getProperties(),n=e[vp];if(e[vp]&&uZ[`${vp}:${n}`]){let i=uZ[`${vp}:${n}`];return this._seeder.pick(i)}}getImageFromType(){if(bl[this._type]){let e=bl[this._type];return this._seeder.pick(e)}}getColorFromType(){if(ui[this._type])return ui[this._type]}getRandomSibling(e){let n=e?this._parent.getNodesFromRootRecursiveByType(e):this._parent.getChildren();return this._seeder.pick(n)}getRandomChild(e){let n=e?this.getChildrenByType(e):this.getChildren();return this._seeder.pick(n)}getRandomChildren(e,n){let i=n?this.getChildrenByType(n):this.getChildren();return Array(e).fill(null).map(()=>this._seeder.pick(i))}};var Upt=[{key:"carrier-1",type:"Vechile",name:"Semi-trailer, TT/AT 28-34 + 34-40t",namespace:hr,projectId:Jr,properties:{fuelPerKkm:.027,loadFactor:.45,maxLoad:40}}].map(t=>(t.versionUri=Pe.nodePropsToVersionUri(t),t)),Vpt=`${hr}/${Jr}/${xp}/toreboda/latest`,$pt=`${hr}/${Jr}/${bp}/southern-demo/latest`,zpt=`${hr}/${Jr}/${yp}`;function r4e(t){let{seed:e,sourceUri:n,targetUri:i,batchIds:a,shipmentIds:o,carrierUris:s,shipmentDistances:l,descriptions:c,statuses:u,amounts:d,costs:f,costsStd:p,costsMin:h,costsMax:m,weights:_,weightsStd:E,weightsMin:v,weightsMax:y,depths:x,depthsStd:S,depthsMin:N,depthsMax:w,widths:T,widthsStd:I,widthsMin:R,widthsMax:L,lengths:O,lengthsStd:H,lengthsMin:U,lengthsMax:X,isSupply:W,components:ne,startDates:be,endDates:q}=t,ie=[];if(!d)return ie;for(let ge=0;ge<d.length;ge++)ie.push({seed:e,amount:d?d[ge]:1,sourceUri:n,targetUri:i,batchId:a?a[ge]:void 0,shipmentId:o?o[ge]:void 0,carrierUri:s?s[ge]:void 0,shipmentDistance:l?l[ge]:void 0,description:c?c[ge]:void 0,status:u?u[ge]:void 0,cost:f?f[ge]:void 0,costStd:p?p[ge]:void 0,costMin:h?h[ge]:void 0,costMax:m?m[ge]:void 0,weight:_?_[ge]:void 0,weightStd:E?E[ge]:void 0,weightMin:v?v[ge]:void 0,weightMax:y?y[ge]:void 0,depth:x?x[ge]:void 0,depthStd:S?S[ge]:void 0,depthMin:N?N[ge]:void 0,depthMax:w?w[ge]:void 0,width:T?T[ge]:void 0,widthStd:I?I[ge]:void 0,widthMin:R?R[ge]:void 0,widthMax:L?L[ge]:void 0,length:O?O[ge]:void 0,lengthStd:H?H[ge]:void 0,lengthMin:U?U[ge]:void 0,lengthMax:X?X[ge]:void 0,isSupply:W?W[ge]:!1,component:ne?ne[ge]:"component",startDate:be?be[ge]:void 0,endDate:q?q[ge]:void 0});return ie}function yZ(t){let e,n=[];if(t.parametric&&(e=r4e(t.parametric)),t.properties&&t.properties.amount>0&&!(e!=null&&e.length)){let{amount:i=1,depth:a=1,width:o=1,length:s=1,weight:l=0,...c}=t.properties||{};e=[{amount:i,depth:a,width:o,length:s,weight:l,...c}]}for(let i of e||[]){let{name:a,type:o}=t,s=Pe.nodePropsToVersionUri(t),{component:l="component",description:c="no description",isSupply:u=!1,batchId:d="1",shipmentId:f,carrierUri:p,shipmentDistance:h,startDate:m=new Date().toISOString,endDate:_=new Date().toISOString}=i,v=n4e(i,{...{versionUri:s,name:a,type:o,actor:a||o||"unknown"},component:l,description:c,actor:a||o||"unknown",isSupply:u,batchId:d,shipmentId:f,carrierUri:p,shipmentDistance:h,startDate:m,endDate:_});n.push(...v)}return n}function n4e(t,e){let{depth:n,depthMax:i,depthStd:a,width:o,widthMax:s,widthStd:l,length:c,lengthMax:u,lengthStd:d,weight:f,weightMax:p,weightStd:h,cost:m,costMax:_,costStd:E,amount:v}=t,y=i4e(v),x=v/y,S=[],N=new Q5({key:"temp",type:"temp",namespace:"temp",boardId:"temp"},{});for(let w=0;w<x;w++){let T;p?T=N.generatePropertyValue({propertyType:"float",propertyKey:"weight",min:f||0,max:p}):h?T=N.generatePropertyValue({propertyType:"gaussian",propertyKey:"weight",mean:f||0,std:h||0}):T=f||0;let I;_?I=N.generatePropertyValue({propertyType:"float",propertyKey:"cost",min:m||0,max:_}):E?I=N.generatePropertyValue({propertyType:"gaussian",propertyKey:"cost",mean:m||0,std:E||0}):I=m||0;let R;i?R=N.generatePropertyValue({propertyType:"float",propertyKey:"depth",min:n||1,max:i}):a?R=N.generatePropertyValue({propertyType:"gaussian",propertyKey:"depth",mean:n||1,std:a||0}):R=n||1;let L;s?L=N.generatePropertyValue({propertyType:"float",propertyKey:"width",min:o||1,max:s}):l?L=N.generatePropertyValue({propertyType:"gaussian",propertyKey:"width",mean:o||1,std:l||0}):L=o||1;let O;u?O=N.generatePropertyValue({propertyType:"float",propertyKey:"length",min:c||1,max:u}):d?O=N.generatePropertyValue({propertyType:"gaussian",propertyKey:"length",mean:c||1,std:d||0}):O=c||1;let H=R*L*O*y;S.push({cubeResolution:y,amount:y,cost:I*y,volume:H,area:O*L*y,weight:T*y,depth:R*y,width:L*y,length:O*y,...e})}return S}function i4e(t){return t<1e3?1:t<1e4?10:t<1e5?100:t<1e6?1e3:1e4}function B2({sourceUri:t,relationKey:e,targetUri:n}){if(!t||!e||!n)throw new Error("sourceUri, relationKey and targetUri are required");return`${t}-${e}-${n}`}function dZ(t={}){let e={...t};return t.fillColor&&(e.fillColor=[...t.fillColor]),t.strokeColor&&(e.strokeColor=[...t.strokeColor]),t.target&&(e.target=[...t.target]),t.rotation&&(e.rotation=[...t.rotation]),t.position&&(e.position=[...t.position]),t.size&&(e.size=[...t.size]),t.scale&&(e.scale=[...t.scale]),t.fontColor&&(e.fontColor=[...t.fontColor]),t.backgroundColor&&(e.backgroundColor=[...t.backgroundColor]),e}var $u={vegaType:"barchart",cubeUnit:"amount",cubeComponent:"component",x:"component",y:"component",z:"volume",color:"component",scheme:"browns",uid:"versionUri",sort:"component",width:64,height:64,chart:"stacks",view:"3d"},a4e=new Map;a4e.set("layoutKey",{label:"Insight type",list:[{value:"node",label:"Node"},{value:"chart",label:"Chart"},{value:"map",label:"Map"},{value:"gltf",label:"3D model"}],propertyKey:"layoutKey"});function sC(t){let e=new Map,n=new Map,i=t.filter(u=>u.timing===void 0).sort((u,d)=>{let f=u.createdAt?new Date(u.createdAt):new Date(0),p=d.createdAt?new Date(d.createdAt):new Date(0);return f.getTime()-p.getTime()});for(let u of i){e.has(u.nodeUri)||e.set(u.nodeUri,u.createdAt);let d=Pe.nodePropsToVersionUri(u),f=n.get(d)||{},p={...f,...u,appearance:o0(f.appearance||{},u.appearance||{}),parametric:{...f.parametric||{},...u.parametric||{}},chart:{...f.chart||{},...u.chart||{}}};Object.keys(f).forEach(h=>{!u[h]&&typeof f[h]=="string"&&(p[h]=f[h])}),Object.keys(p.appearance||{}).length||delete p.appearance,Object.keys(p.parametric||{}).length||delete p.parametric,Object.keys(p.chart||{}).length||delete p.chart,n.set(d,p)}let a=new Map,s=t.filter(u=>u.timing!==void 0).sort((u,d)=>{let f=u.createdAt?new Date(u.createdAt):new Date(0),p=d.createdAt?new Date(d.createdAt):new Date(0);return f.getTime()-p.getTime()}).sort((u,d)=>u.timing-d.timing);for(let u of s.filter(d=>d.timing!==void 0)){let d=Pe.nodePropsToVersionUri(u),f=Pe.nodePropsToVersionUri({...u,timing:void 0}),p=a.get(d),h=n.get(f)||{};p||(p=h);let m={...p,...u,layoutKey:h.layoutKey,appearance:o0(p.appearance||{},u.appearance||{}),parametric:{...p.parametric||{},...u.parametric||{}},animation:{...p.animation||{},...u.animation||{}},chart:{...p.chart||{},...u.chart||{}}};Object.keys(p).forEach(_=>{!u[_]&&typeof p[_]=="string"&&(m[_]=p[_])}),Object.keys(m.appearance||{}).length||delete m.appearance,Object.keys(m.parametric||{}).length||delete m.parametric,Object.keys(m.animation||{}).length||delete m.animation,a.set(d,m)}let l=Array.from(n.values()),c=Array.from(a.values());return[...l,...c].map(u=>(u.createdAt=e.get(u.nodeUri)||u.createdAt,u))}function o0(t,e){let n=dZ(t),i=dZ(e),a={...n};return Object.keys(i).forEach(o=>{i[o]!==void 0?a[o]=i[o]:delete a[o]}),a;return a}var xl={dim1:{L:"1",T:"0",M:"0",Theta:"0",N:"0",I:"0",J:"0"},dim2:{L:"2",T:"0",M:"0",Theta:"0",N:"0",I:"0",J:"0"},dim3:{L:"3",T:"0",M:"0",Theta:"0",N:"0",I:"0",J:"0"},measureByDim3:{L:"-3",T:"0",M:"1",Theta:"0",N:"0",I:"0",J:"0"},time:{L:"0",T:"1",M:"0",Theta:"0",N:"0",I:"0",J:"0"},measure:{L:"0",T:"0",M:"1",Theta:"0",N:"0",I:"0",J:"0"},unitless:{L:"0",T:"0",M:"0",Theta:"0",N:"0",I:"0",J:"0"}},Y5={length:{name:{"cf78479d-f570-4d5b-86ca-e7d064710ea2":"length"},definition:{"25f68337-a661-4354-ac1e-34eef26bfddc":"n/a"},dimension:xl.dim1},volume:{name:{"11e0e578-2c87-42e6-94ce-e4f0e9260e49":"volume"},definition:{"8ff48534-7edd-4d0d-a76e-1c39dcc599f4":"n/a"},dimension:xl.dim3},time:{name:{"3682b123-1d4a-4bdc-824c-a970ddf2f413":"time"},definition:{"207a10ec-68cb-4393-a690-eaeafade747a":"n/a"},dimension:xl.time}},J5={mm:{symbol:"mm",name:{"495d16db-ef18-48e8-b252-80cec14f4de9":"millimetre"},definition:{"bcbb18ba-06fd-417b-bac3-2b59c0aa1c78":"prefix: milli = 1/1000  SI base unit: metre."},dimension:xl.dim1},kgM3:{symbol:"kg/m\xB3",name:{"1b45831b-b0a5-4c18-9702-99d91609430a":"kilogram per cubic metre"},definition:{"b9ab9e3b-ebd5-4be1-8569-577a3abb9143":"N/A"},dimension:xl.measureByDim3},unitless:{symbol:"unitless",name:{"b267ad31-8ddf-475c-9bad-2de87d595aff":"unitless"},definition:{"4a56a189-a2d9-4f83-bcb9-a8b0d8106356":"n/a"},dimension:xl.unitless},kg:{symbol:"kg",name:{"f59208e3-a8c2-495f-acd4-1c0908b04873":"kilogram"},definition:{"d3a3b2f4-ad11-4972-a058-866014cf786b":"n/a"},dimension:xl.measure},m3:{symbol:"m3",name:{"655820bc-d405-4203-9bc5-ff2c60043f56":"cubic meter"},definition:{"c9b1b95a-1f03-489a-8625-13a6d2e38b17":"n/a"},dimension:xl.dim3},kgCo2Eq:{name:{"3b23101d-6d15-4e79-b940-92751b90b9aa":"kg CO2 eq (100 years)"},definition:{"40b5662d-9307-40e0-a267-d3869e417a67":"unit of global warming potential equivalent to the impact caused 100 years after release of 1 kg of carbon dioxide (CO2)"},dimension:xl.measure},kgC:{name:{"73f096f1-171e-4974-9016-3b1edb7fad34":"kg C"},definition:{"84075ad2-ba1c-4525-99f6-2dee487ac206":"kg of carbon where 1 kg biogenic carbon is equivalent to 44/12 kg of CO2"},dimension:xl.measure}},jpt={elementDepth:{name:"element depth according to EN 14080",definition:"distance from the base to the top",dataType:"REAL",physicalQuantity:Y5.length,unit:J5.mm},elementWidth:{name:"element width according to EN 14080",definition:"the shortest distance between the edge surfaces on a specified point of measure of the material transversal to the length",dataType:"REAL",physicalQuantity:Y5.length,unit:J5.mm},elementLength:{name:"element length according to EN 14080",definition:"the shortest distance between the edge surfaces on a specified point of measure of the material",dataType:"REAL",physicalQuantity:Y5.length,unit:J5.mm},volume:{name:"volume",definition:"the amount of space that a substance or object occupies",dataType:"REAL",physicalQuantity:Y5.length,unit:J5.mm}},l0={name:"string",description:"string",volume:"number",length:"number",width:"number",depth:"number",weight:"number",cost:"number",amount:"number",area:"number",component:"string",isSupply:"boolean",observedAt:"date"},D2={longitude:"number",latitude:"number"},o4e={batchId:"string",shipmentId:"string"},s4e={key:P2,type:di,namespace:hr,boardId:Jr},r9=Pe.nodePropsToVersionUri(s4e);var l4e={key:Hve,type:di,parentId:r9,namespace:hr,boardId:Jr,appearance:{fillColor:[249,246,243],strokeColor:[209,206,203]}},F2=Pe.nodePropsToVersionUri(l4e),xZ={key:bp,type:di,parentId:F2,namespace:hr,boardId:Jr,appearance:{fillColor:ui[bp].fillColor,strokeColor:ui[bp].strokeColor,imageUrl:`${Nc}/${bl[bp]}`},properties:{...l0,...D2}},k2=Pe.nodePropsToVersionUri(xZ),bZ={key:i0,type:di,parentId:F2,namespace:hr,boardId:Jr,appearance:{fillColor:ui[i0].fillColor,strokeColor:ui[i0].strokeColor,imageUrl:`${Nc}/${bl[i0]}`},properties:{...l0,...D2}},Uu=Pe.nodePropsToVersionUri(bZ),SZ={key:xp,type:di,parentId:Uu,namespace:hr,boardId:Jr,appearance:{fillColor:ui[xp].fillColor,strokeColor:ui[xp].strokeColor,imageUrl:`${Nc}/${bl[xp]}`},properties:{...l0,...D2}},s0=Pe.nodePropsToVersionUri(SZ),NZ={key:n0,type:di,parentId:Uu,namespace:hr,boardId:Jr,appearance:{fillColor:ui[n0].fillColor,strokeColor:ui[n0].strokeColor,imageUrl:`${Nc}/${bl[n0]}`},properties:{...l0,...D2}},Vu=Pe.nodePropsToVersionUri(NZ),AZ={key:yp,type:di,parentId:F2,namespace:hr,boardId:Jr,appearance:{fillColor:ui[yp].fillColor,strokeColor:ui[yp].strokeColor,imageUrl:`${Nc}/${bl[yp]}`},relations:{[$o]:[Vu]},properties:{...l0,...D2}},n9=Pe.nodePropsToVersionUri(AZ),TZ={key:Zve,type:di,parentId:r9,namespace:hr,boardId:Jr},lC=Pe.nodePropsToVersionUri(TZ),CZ={key:Xve,type:di,parentId:r9,namespace:hr,boardId:Jr,properties:{...l0,...o4e}},c4e=Pe.nodePropsToVersionUri(CZ),wZ={key:a0,type:di,parentId:lC,namespace:hr,boardId:Jr,appearance:{fillColor:ui[a0].fillColor,strokeColor:ui[a0].strokeColor,imageUrl:`${Nc}/${bl[a0]}`}},u4e=Pe.nodePropsToVersionUri(wZ),IZ={key:Wve,type:di,parentId:lC,namespace:hr,boardId:Jr},d4e=Pe.nodePropsToVersionUri(IZ),f4e={key:jve,type:di,parentId:r9,namespace:hr,boardId:Jr},Hpt=Pe.nodePropsToVersionUri(f4e);var p4e={key:qve,type:di,parentId:F2,namespace:hr,boardId:Jr},h4e=Pe.nodePropsToVersionUri(p4e),RZ={key:oC,type:di,parentId:F2,namespace:hr,boardId:Jr},PZ=Pe.nodePropsToVersionUri(RZ),Wpt={key:r0,type:di,parentId:PZ,namespace:hr,boardId:Jr,appearance:{fillColor:ui[r0].fillColor,strokeColor:ui[r0].strokeColor,imageUrl:`${Nc}/${bl[r0]}`}},Zpt={key:t0,type:di,parentId:PZ,namespace:hr,boardId:Jr,appearance:{fillColor:ui[t0].fillColor,strokeColor:ui[t0].strokeColor,imageUrl:`${Nc}/${bl[t0]}`}};xZ.relations={[Is]:[Uu,s0]};bZ.relations={[$o]:[k2],[Is]:[Vu]};SZ.relations={[$o]:[k2],[Is]:[Vu]};NZ.relations={[$o]:[Uu,s0],[Is]:[n9]};AZ.relations={[$o]:[Vu]};TZ.relations={[rC]:[c4e]};CZ.relations={[tC]:[lC]};wZ.relations={[L2]:[n9,Vu,Uu,s0],[M2]:[Vu,Uu,s0,k2]};IZ.relations={[Vve]:[k2,Uu,s0,Vu,n9],[$ve]:[h4e]};RZ.relations={[aC]:[k2,Uu,s0,Vu,n9,u4e,d4e]};var Vo={...$u,x:"component",y:"volume",z:"cost",chart:"barchart",vegaType:"barchart"},Xpt=[{name:"Volume",propertyKey:"volume",benchmarkOn:"sum",kpiWeight:1,unit:"m\xB3",insight:{...Vo,cubeUnit:"amount",cubeComponent:"component",x:"component",y:"volume",vegaType:"barchart",scheme:"browns"},defaultVisible:!0},{name:"Volume per shipment",propertyKey:"volume",benchmarkOn:"avg",kpiWeight:1,unit:"m\xB3 / shipment",insight:{...Vo,cubeUnit:"amount",cubeComponent:"shipmentId",x:"shipmentId",y:"volume",vegaType:"barchart",scheme:"browns"}},{name:"Emissions per shipment",propertyKey:"shipmentEmissions",benchmarkOn:"avg",kpiWeight:1,unit:"kg CO\u2082eq / shipment",insight:{...Vo,cubeUnit:"amount",cubeComponent:"shipmentId",color:"shipmentId",x:"type",y:"shipmentEmissions",z:"shipmentId",vegaType:"stackedbarchart",scheme:"blues"}},{name:"Carbon budget kg CO\u2082eq",propertyKey:"gwpTotal",benchmarkOn:"sum",kpiWeight:1,unit:"kg CO\u2082eq",insight:{...Vo,x:"component",y:"gwpTotal",cubeUnit:"amount",cubeComponent:"component",vegaType:"barchart",scheme:"tableau20"},defaultVisible:!0},{name:"Total cost",propertyKey:"cost",benchmarkOn:"sum",kpiWeight:1,unit:"\u20AC",insight:{...Vo,x:"component",y:"cost",cubeUnit:"amount",cubeComponent:"component",vegaType:"barchart",scheme:"blues"},defaultVisible:!0},{name:"Forest impact",propertyKey:"numTrees",benchmarkOn:"sum",kpiWeight:1,unit:"trees",insight:{...Vo,x:"component",y:"distance",cubeUnit:"amount",cubeComponent:"component",vegaType:"barchart",scheme:"greens"},defaultVisible:!0},{name:"Cost per m\xB3 \u20AC",propertyKey:"cost",benchmarkOn:"avg",kpiWeight:1,unit:"\u20AC",insight:{...Vo,x:"component",y:"cost",cubeUnit:"amount",cubeComponent:"component",vegaType:"barchart",scheme:"blues"}},{name:"Avg shipment distance",propertyKey:"shipmentDistance",benchmarkOn:"avg",kpiWeight:2,unit:"km / shipment",insight:{...Vo,x:"shipmentId",y:"distance",cubeUnit:"amount",cubeComponent:"shipmentId",vegaType:"barchart",scheme:"greys"}},{name:"Total shipment distance",propertyKey:"shipmentDistance",benchmarkOn:"sum",kpiWeight:0,unit:"km",insight:{...Vo,x:"shipmentId",y:"distance",cubeUnit:"amount",cubeComponent:"shipmentId",vegaType:"barchart",scheme:"greys"}},{name:"Avg fuel consumption / m\xB3",propertyKey:"shipmentFuelConsumption",benchmarkOn:"avg",kpiWeight:1,unit:"l / m\xB3",numDecimals:4,insight:{...Vo,x:"shipmentId",y:"shipmentFuelConsumption",cubeUnit:"amount",cubeComponent:"shipmentId",vegaType:"barchart",scheme:"greys"}},{name:"Fuel consumption / m\xB3",propertyKey:"shipmentFuelConsumption",benchmarkOn:"sum",kpiWeight:1,unit:"l / m\xB3",numDecimals:2,insight:{...Vo,x:"shipmentId",y:"shipmentFuelConsumption",cubeUnit:"amount",cubeComponent:"shipmentId",vegaType:"barchart",scheme:"greys"}},{name:"Transportation emissions",propertyKey:"shipmentEmissions",benchmarkOn:"sum",kpiWeight:1,unit:"kg CO\u2082eq",numDecimals:2,insight:{...Vo,x:"shipmentId",y:"shipmentEmissions",cubeUnit:"amount",cubeComponent:"shipmentId",vegaType:"barchart",scheme:"greys"}}];var m4e=t=>t===void 0?"":t===null?"NULL":t===!1?"FALSE":t===!0?"TRUE":t.toString().replace(/,/g,""),MZ=t=>m4e(t)+",",LZ=(t,e)=>{let n="";for(let i of e)n+=MZ(i);n=n.slice(0,-1),n+=`
`;for(let i of t){for(let a of e)n+=MZ(i[a]);n=n.slice(0,-1),n+=`
`}return n};var g4e={id:"master",name:"Board",timing:0,slideDuration:1e3,transitionDuration:0,transitionEasing:"linear"},OZ={projectNode:{key:"project",name:{name:"Project"},type:"Project",namespace:hr,appearance:g4e},insights:[]};function BZ(t,e,n){n[t]=n[t]||[],n[t].indexOf(e)<0&&n[t].push(e)}function cC(t,e,n){if(n[t]){let i=n[t].indexOf(e);i>=0&&n[t].splice(i,1)}}var G2=class{constructor(){le(this,"_listeners",{});le(this,"_onceListeners",{})}on(e,n){BZ(e,n,this._listeners)}once(e,n){BZ(e,n,this._onceListeners)}off(e,n){cC(e,n,this._listeners),cC(e,n,this._onceListeners)}emit(e,n){var l,c;let i;typeof e=="string"?i={type:e}:i=e;let a=i.type;if(!this._listens(a))return;n&&(i.data=n);let o=((l=this._listeners[a])==null?void 0:l.slice())||[];for(let u of o)u.call(this,i);let s=((c=this._onceListeners[a])==null?void 0:c.slice())||[];for(let u of s)cC(a,u,this._onceListeners),u.call(this,i)}_listens(e){return this._listeners[e]&&this._listeners[e].length>0||this._onceListeners[e]&&this._onceListeners[e].length>0}};var _4e="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGJhc2VQcm9maWxlPSJ0aW55IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNjQgMzIiIG92ZXJmbG93PSJ2aXNpYmxlIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+IDxyZWN0IGZpbGw9Im5vbmUiIHdpZHRoPSI4IiBoZWlnaHQ9IjE2Ii8+IDxwb2x5Z29uIHBvaW50cz0iMS42NSwxNC4zNSAwLjk0LDEzLjY1IDYuNTksOCAwLjk0LDIuMzUgMS42NSwxLjY1IDgsOCAJIi8+CjwvZz4KPGc+IDxyZWN0IHg9IjgiIGZpbGw9Im5vbmUiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiLz4gPHBvbHlnb24gcG9pbnRzPSIxMi42NSw3LjM1IDExLjk0LDYuNjUgMTQuNTksNCAxMS45NCwxLjM1IDEyLjY1LDAuNjUgMTYsNCAJIi8+CjwvZz4KPGc+IDxyZWN0IHg9IjgiIHk9IjgiIGZpbGw9Im5vbmUiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiLz4gPHBvbHlsaW5lIHBvaW50cz0iMTQuNTksMTIgMTEuOTQsOS4zNSAxMi42NSw4LjY1IDE2LDEyIAkiLz4KPC9nPgo8Zz4gPHJlY3QgeD0iMTYiIGZpbGw9Im5vbmUiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiLz4gPHBvbHlsaW5lIHBvaW50cz0iMjAsMSAyNCw0IDIwLDcgCSIvPgo8L2c+CjxnPiA8cmVjdCB4PSI0OCIgZmlsbD0ibm9uZSIgd2lkdGg9IjgiIGhlaWdodD0iOCIvPiA8cGF0aCBkPSJNNTAsM2MwLjU1LDAsMSwwLjQ1LDEsMXMtMC40NSwxLTEsMXMtMS0wLjQ1LTEtMVM0OS40NSwzLDUwLDMgTTUwLDJjLTEuMSwwLTIsMC45LTIsMnMwLjksMiwyLDJzMi0wLjksMi0yUzUxLjEsMiw1MCwyIEw1MCwyeiIvPgo8L2c+CjxnPiA8cmVjdCB4PSI0OCIgeT0iOCIgZmlsbD0ibm9uZSIgd2lkdGg9IjgiIGhlaWdodD0iOCIvPiA8cGF0aCBkPSJNNTEsMTBjMS4xLDAsMiwwLjksMiwycy0wLjksMi0yLDJzLTItMC45LTItMlM0OS45LDEwLDUxLDEwIE01MSw5Yy0xLjY2LDAtMywxLjM0LTMsM3MxLjM0LDMsMywzczMtMS4zNCwzLTNTNTIuNjYsOSw1MSw5IEw1MSw5eiIvPgo8L2c+CjxnPiA8cmVjdCB4PSIzMiIgZmlsbD0ibm9uZSIgd2lkdGg9IjgiIGhlaWdodD0iMTYiLz4gPHBvbHlsaW5lIHBvaW50cz0iMzYsMyA0MCw4IDM2LDEzIAkiLz4KPC9nPgo8Zz4gPHJlY3QgeD0iMjQiIGZpbGw9Im5vbmUiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiLz4gPHBvbHlsaW5lIHBvaW50cz0iMjYsMiAzMiw0IDI2LDYgCSIvPgo8L2c+CjxnPiA8cmVjdCB4PSIxNiIgeT0iOCIgZmlsbD0ibm9uZSIgd2lkdGg9IjgiIGhlaWdodD0iOCIvPiA8cG9seWxpbmUgcG9pbnRzPSIyMCw5IDI0LDEyIDIwLDEyIAkiLz4KPC9nPgo8Zz4gPHJlY3QgeD0iMjQiIHk9IjgiIGZpbGw9Im5vbmUiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiLz4gPHBvbHlsaW5lIHBvaW50cz0iMjYsMTAgMzIsMTIgMjYsMTIgCSIvPgo8L2c+CjxnPiA8cmVjdCB4PSI1NiIgZmlsbD0ibm9uZSIgd2lkdGg9IjgiIGhlaWdodD0iOCIvPiA8Y2lyY2xlIGN4PSI1OCIgY3k9IjQiIHI9IjIiLz4KPC9nPgo8Zz4gPHJlY3QgeD0iNTYiIHk9IjgiIGZpbGw9Im5vbmUiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiLz4gPGNpcmNsZSBjeD0iNTkiIGN5PSIxMiIgcj0iMyIvPgo8L2c+Cjwvc3ZnPgo=",uC=4,i9;function DZ(t){return i9||(i9=typeof Image!="undefined"&&cl(_4e,Mf,{imagebitmap:{resizeWidth:256*uC,resizeHeight:128*uC}}).then(e=>{let n=new jt(t,{data:e,parameters:{[t.TEXTURE_MIN_FILTER]:t.LINEAR_MIPMAP_LINEAR,[t.TEXTURE_MAG_FILTER]:t.LINEAR,[t.TEXTURE_WRAP_S]:t.CLAMP_TO_EDGE,[t.TEXTURE_WRAP_T]:t.CLAMP_TO_EDGE}});return i9=n,n})),i9}var f1t=E4e({caret:{mask:!0,x:32,y:0,width:32,height:32,anchorX:32},"half-caret":{mask:!0,x:32,y:32,width:32,height:32,anchorX:32},"caret-lg":{mask:!0,x:0,y:0,width:32,height:64,anchorX:32},triangle:{mask:!0,x:64,y:0,width:32,height:32,anchorX:32},"triangle-ex":{mask:!0,x:64,y:0,width:32,height:32},"half-triangle":{mask:!0,x:64,y:32,width:32,height:32,anchorX:32},"half-triangle-ex":{mask:!0,x:64,y:32,width:32,height:32},"triangle-n":{mask:!0,x:104,y:4,width:24,height:24},"triangle-n-ex":{mask:!0,x:96,y:0,width:32,height:32,anchorX:8},"half-triangle-n":{mask:!0,x:96,y:32,width:32,height:32,anchorX:32},"half-triangle-n-ex":{mask:!0,x:96,y:32,width:32,height:32,anchorX:8},"triangle-w":{mask:!0,x:128,y:0,width:32,height:64,anchorX:32},"triangle-w-ex":{mask:!0,x:128,y:0,width:32,height:64},"circle-ex":{mask:!0,x:192,y:0,width:32,height:32,anchorX:0},"circle-lg-ex":{mask:!0,x:192,y:32,width:32,height:32,anchorX:0},dot:{mask:!0,x:224,y:0,width:32,height:32,anchorX:8},"dot-ex":{mask:!0,x:224,y:0,width:32,height:32,anchorX:0},"dot-lg":{mask:!0,x:224,y:32,width:32,height:32,anchorX:12},"dot-lg-ex":{mask:!0,x:224,y:32,width:32,height:32,anchorX:0}},uC);function E4e(t,e){for(let n in t){let i=t[n];i.x*=e,i.y*=e,i.width*=e,i.height*=e,i.anchorX&&(i.anchorX*=e),i.anchorY&&(i.anchorY*=e)}return t}var FZ=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`;var kZ=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var v4e=1024,y4e=4,GZ=()=>{},UZ={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function x4e(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function b4e(t,e,n,i){let a=Math.min(n/e.width,i/e.height),o=Math.floor(e.width*a),s=Math.floor(e.height*a);return a===1?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function U2(t){return t&&(t.id||t.url)}function S4e(t,e,n,i){let a=t.width,o=t.height,s=new jt(t.gl,{width:e,height:n,parameters:i});return M4(t,s,{targetY:0,width:a,height:o}),t.delete(),s}function VZ(t,e,n){for(let i=0;i<e.length;i++){let{icon:a,xOffset:o}=e[i],s=U2(a);t[s]={...a,x:o,y:n}}}function N4e({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:a=0,rowHeight:o=0,canvasWidth:s}){let l=[];for(let c=0;c<t.length;c++){let u=t[c],d=U2(u);if(!n[d]){let{height:f,width:p}=u;i+p+e>s&&(VZ(n,l,a),i=0,a=o+a+e,o=0,l=[]),l.push({icon:u,xOffset:i}),i=i+p+e,o=Math.max(o,f)}}return l.length>0&&VZ(n,l,a),{mapping:n,rowHeight:o,xOffset:i,yOffset:a,canvasWidth:s,canvasHeight:x4e(o+a+e)}}function A4e(t,e,n){if(!t||!e)return null;n=n||{};let i={},{iterable:a,objectInfo:o}=so(t);for(let s of a){o.index++;let l=e(s,o),c=U2(l);if(!l)throw new Error("Icon is missing.");if(!l.url)throw new Error("Icon url is missing.");!i[c]&&(!n[c]||l.url!==n[c].url)&&(i[c]={...l,source:s,sourceIndex:o.index})}return i}var V2=class{constructor(e,{onUpdate:n=GZ,onError:i=GZ}){A(this,"gl",void 0),A(this,"onUpdate",void 0),A(this,"onError",void 0),A(this,"_loadOptions",null),A(this,"_texture",null),A(this,"_externalTexture",null),A(this,"_mapping",{}),A(this,"_textureParameters",null),A(this,"_pendingCount",0),A(this,"_autoPacking",!1),A(this,"_xOffset",0),A(this,"_yOffset",0),A(this,"_rowHeight",0),A(this,"_buffer",y4e),A(this,"_canvasWidth",v4e),A(this,"_canvasHeight",0),A(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){let n=this._autoPacking?U2(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:a,textureParameters:o}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),a&&(this._mapping=a),i){var s;(s=this._texture)===null||s===void 0||s.delete(),this._texture=null,this._externalTexture=i}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document=="undefined")return;let i=Object.values(A4e(e,n,this._mapping)||{});if(i.length>0){let{mapping:a,xOffset:o,yOffset:s,rowHeight:l,canvasHeight:c}=N4e({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=l,this._mapping=a,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new jt(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||UZ})),this._texture.height!==this._canvasHeight&&(this._texture=S4e(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||UZ)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){let n=this._canvas.getContext("2d",{willReadFrequently:!0});for(let i of e)this._pendingCount++,cl(i.url,this._loadOptions).then(a=>{let o=U2(i),s=this._mapping[o],{x:l,y:c,width:u,height:d}=s,{data:f,width:p,height:h}=b4e(n,a,u,d);this._texture.setSubImageData({data:f,x:l+(u-p)/2,y:c+(d-h)/2,width:p,height:h}),s.width=p,s.height=h,this._texture.generateMipmap(),this.onUpdate()}).catch(a=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:a})}).finally(()=>{this._pendingCount--})}};var $Z=[0,0,0,255],T4e={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:$Z},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}},ua=class extends Dr{constructor(...e){super(...e),A(this,"state",void 0)}getShaders(){return super.getShaders({vs:FZ,fs:kZ,modules:[On,Bn]})}initializeState(){this.state={iconManager:new V2(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:$Z},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);let{props:n,oldProps:i,changeFlags:a}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:l,data:c,getIcon:u,textureParameters:d}=n,{iconManager:f}=this.state,p=s||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:n.loadOptions,autoPacking:!p,iconAtlas:s,iconMapping:p?l:null,textureParameters:d}),p?i.iconMapping!==n.iconMapping&&o.invalidate("getIcon"):(a.dataChanged||a.updateTriggersChanged&&(a.updateTriggersChanged.all||a.updateTriggersChanged.getIcon))&&f.packIcons(c,u),a.extensionsChanged){var h;let{gl:m}=this.context;(h=this.state.model)===null||h===void 0||h.delete(),this.state.model=this._getModel(m),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){let{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:a,sizeUnits:o,billboard:s,alphaCutoff:l}=this.props,{iconManager:c}=this.state,u=c.getTexture();u&&this.state.model.setUniforms(e).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:wi[o],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:a,billboard:s,alphaCutoff:l}).draw()}_getModel(e){let n=[-1,-1,-1,1,1,1,1,-1];return new wr(e,{...this.getShaders(),id:this.props.id,geometry:new Nn({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;let i=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;i?i(e):at.error(e.error.message)()}getInstanceOffset(e){let{width:n,height:i,anchorX:a=n/2,anchorY:o=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-a,i/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){let{x:n,y:i,width:a,height:o}=this.state.iconManager.getIconMapping(e);return[n,i,a,o]}};A(ua,"defaultProps",T4e);A(ua,"layerName","IconLayer");var zZ=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      gl_Position = vec4(0.);
      return;
    }
  }
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  DECKGL_FILTER_GL_POSITION(p, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var jZ=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var C4e=[0,0,0,255],w4e={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getColor:{type:"accessor",value:C4e},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},Sl=class extends Dr{getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:zZ,fs:jZ,modules:[On,Bn]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;let{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){let{widthUnits:n,widthScale:i,widthMinPixels:a,widthMaxPixels:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(e).setUniforms({widthUnits:wi[n],widthScale:i,widthMinPixels:a,widthMaxPixels:o,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(e){let n=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new wr(e,{...this.getShaders(),id:this.props.id,geometry:new Nn({drawMode:5,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}};A(Sl,"layerName","LineLayer");A(Sl,"defaultProps",w4e);var HZ=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`;var WZ=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var ZZ=[0,0,0,255],I4e={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:ZZ},getLineColor:{type:"accessor",value:ZZ},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},zo=class extends Dr{getShaders(){return super.getShaders({vs:HZ,fs:WZ,modules:[On,Bn]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;let{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){let{radiusUnits:n,radiusScale:i,radiusMinPixels:a,radiusMaxPixels:o,stroked:s,filled:l,billboard:c,antialiasing:u,lineWidthUnits:d,lineWidthScale:f,lineWidthMinPixels:p,lineWidthMaxPixels:h}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:l,billboard:c,antialiasing:u,radiusUnits:wi[n],radiusScale:i,radiusMinPixels:a,radiusMaxPixels:o,lineWidthUnits:wi[d],lineWidthScale:f,lineWidthMinPixels:p,lineWidthMaxPixels:h}).draw()}_getModel(e){let n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new wr(e,{...this.getShaders(),id:this.props.id,geometry:new Nn({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}};A(zo,"defaultProps",I4e);A(zo,"layerName","ScatterplotLayer");var a9={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function $2(t,e,n={}){return XZ(t,n)!==e?(R4e(t,n),!0):!1}function XZ(t,e={}){return Math.sign(o9(t,e))}function o9(t,e={}){let{start:n=0,end:i=t.length}=e,a=e.size||2,o=0;for(let s=n,l=i-a;s<i;s+=a)o+=(t[s]-t[l])*(t[s+1]+t[l+1]),l=s;return o/2}function R4e(t,e){let{start:n=0,end:i=t.length,size:a=2}=e,o=(i-n)/a,s=Math.floor(o/2);for(let l=0;l<s;++l){let c=n+l*a,u=n+(o-1-l)*a;for(let d=0;d<a;++d){let f=t[c+d];t[c+d]=t[u+d],t[u+d]=f}}}function Da(t,e){let n=e.length,i=t.length;if(i>0){let a=!0;for(let o=0;o<n;o++)if(t[i-n+o]!==e[o]){a=!1;break}if(a)return!1}for(let a=0;a<n;a++)t[i+a]=e[a];return!0}function z2(t,e){let n=e.length;for(let i=0;i<n;i++)t[i]=e[i]}function zu(t,e,n,i,a=[]){let o=i+e*n;for(let s=0;s<n;s++)a[s]=t[o+s];return a}function s9(t,e,n,i,a=[]){let o,s;if(n&8)o=(i[3]-t[1])/(e[1]-t[1]),s=3;else if(n&4)o=(i[1]-t[1])/(e[1]-t[1]),s=1;else if(n&2)o=(i[2]-t[0])/(e[0]-t[0]),s=2;else if(n&1)o=(i[0]-t[0])/(e[0]-t[0]),s=0;else return null;for(let l=0;l<t.length;l++)a[l]=(s&1)===l?i[s]:o*(e[l]-t[l])+t[l];return a}function j2(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function H2(t,e){let{size:n=2,broken:i=!1,gridResolution:a=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:l=t.length}=e||{},c=(l-s)/n,u=[],d=[u],f=zu(t,0,n,s),p,h,m=YZ(f,a,o,[]),_=[];Da(u,f);for(let E=1;E<c;E++){for(p=zu(t,E,n,s,p),h=j2(p,m);h;){s9(f,p,h,m,_);let v=j2(_,m);v&&(s9(f,_,v,m,_),h=v),Da(u,_),z2(f,_),L4e(m,a,h),i&&u.length>n&&(u=[],d.push(u),Da(u,f)),h=j2(p,m)}Da(u,p),z2(f,p)}return i?d:d[0]}var qZ=0,M4e=1;function l9(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function W2(t,e=null,n){if(!t.length)return[];let{size:i=2,gridResolution:a=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},l=[],c=[{pos:t,types:s?new Array(t.length/i).fill(M4e):null,holes:e||[]}],u=[[],[]],d=[];for(;c.length;){let{pos:f,types:p,holes:h}=c.shift();O4e(f,i,h[0]||f.length,u),d=YZ(u[0],a,o,d);let m=j2(u[1],d);if(m){let _=KZ(f,p,i,0,h[0]||f.length,d,m),E={pos:_[0].pos,types:_[0].types,holes:[]},v={pos:_[1].pos,types:_[1].types,holes:[]};c.push(E,v);for(let y=0;y<h.length;y++)_=KZ(f,p,i,h[y],h[y+1]||f.length,d,m),_[0]&&(E.holes.push(E.pos.length),E.pos=l9(E.pos,_[0].pos),s&&(E.types=l9(E.types,_[0].types))),_[1]&&(v.holes.push(v.pos.length),v.pos=l9(v.pos,_[1].pos),s&&(v.types=l9(v.types,_[1].types)))}else{let _={positions:f};s&&(_.edgeTypes=p),h.length&&(_.holeIndices=h),l.push(_)}}return l}function KZ(t,e,n,i,a,o,s){let l=(a-i)/n,c=[],u=[],d=[],f=[],p=[],h,m,_,E=zu(t,l-1,n,i),v=Math.sign(s&8?E[1]-o[3]:E[0]-o[2]),y=e&&e[l-1],x=0,S=0;for(let N=0;N<l;N++)h=zu(t,N,n,i,h),m=Math.sign(s&8?h[1]-o[3]:h[0]-o[2]),_=e&&e[i/n+N],m&&v&&v!==m&&(s9(E,h,s,o,p),Da(c,p)&&d.push(y),Da(u,p)&&f.push(y)),m<=0?(Da(c,h)&&d.push(_),x-=m):d.length&&(d[d.length-1]=qZ),m>=0?(Da(u,h)&&f.push(_),S+=m):f.length&&(f[f.length-1]=qZ),z2(E,h),v=m,y=_;return[x?{pos:c,types:e&&d}:null,S?{pos:u,types:e&&f}:null]}function YZ(t,e,n,i){let a=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return i[0]=a,i[1]=o,i[2]=a+e,i[3]=o+e,i}function L4e(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function O4e(t,e,n,i){let a=1/0,o=-1/0,s=1/0,l=-1/0;for(let c=0;c<n;c+=e){let u=t[c],d=t[c+1];a=u<a?u:a,o=u>o?u:o,s=d<s?d:s,l=d>l?d:l}return i[0][0]=a,i[0][1]=s,i[1][0]=o,i[1][1]=l,i}var B4e=85.051129;function dC(t,e){let{size:n=2,startIndex:i=0,endIndex:a=t.length,normalize:o=!0}=e||{},s=t.slice(i,a);JZ(s,n,0,a-i);let l=H2(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(let c of l)QZ(c,n);return l}function fC(t,e=null,n){let{size:i=2,normalize:a=!0,edgeTypes:o=!1}=n||{};e=e||[];let s=[],l=[],c=0,u=0;for(let f=0;f<=e.length;f++){let p=e[f]||t.length,h=u,m=D4e(t,i,c,p);for(let _=m;_<p;_++)s[u++]=t[_];for(let _=c;_<m;_++)s[u++]=t[_];JZ(s,i,h,u),F4e(s,i,h,u,n==null?void 0:n.maxLatitude),c=p,l[f]=u}l.pop();let d=W2(s,l,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(a)for(let f of d)QZ(f.positions,i);return d}function D4e(t,e,n,i){let a=-1,o=-1;for(let s=n+1;s<i;s+=e){let l=Math.abs(t[s]);l>a&&(a=l,o=s-1)}return o}function F4e(t,e,n,i,a=B4e){let o=t[n],s=t[i-e];if(Math.abs(o-s)>180){let l=zu(t,0,e,n);l[0]+=Math.round((s-o)/360)*360,Da(t,l),l[1]=Math.sign(l[1])*a,Da(t,l),l[0]=o,Da(t,l)}}function JZ(t,e,n,i){let a=t[0],o;for(let s=n;s<i;s+=e){o=t[s];let l=o-a;(l>180||l<-180)&&(o-=Math.round(l/360)*360),t[s]=a=o}}function QZ(t,e){let n,i=t.length/e;for(let o=0;o<i&&(n=t[o*e],(n+180)%360===0);o++);let a=-Math.round(n/360)*360;if(a!==0)for(let o=0;o<i;o++)t[o*e]+=a}function eX(t,e,n,i){let a;if(Array.isArray(t[0])){let o=t.length*e;a=new Array(o);for(let s=0;s<t.length;s++)for(let l=0;l<e;l++)a[s*e+l]=t[s][l]||0}else a=t;return n?H2(a,{size:e,gridResolution:n}):i?dC(a,{size:e}):a}var G4e=1,U4e=2,pC=4,Z2=class extends Du{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?eX(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(tX(e)){let i=0;for(let a of e)i+=this.getGeometrySize(a);return i}let n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&tX(e))for(let i of e){let a=this.getGeometrySize(i);n.geometrySize=a,this.updateGeometryAttributes(i,n),n.vertexStart+=a}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){let i=this.attributes.segmentTypes,a=e?this.isClosed(e):!1,{vertexStart:o,geometrySize:s}=n;i.fill(0,o,o+s),a?(i[o]=pC,i[o+s-2]=pC):(i[o]+=G4e,i[o+s-2]+=U4e),i[o+s-1]=pC}_updatePositions(e,n){let{positions:i}=this.attributes;if(!i||!e)return;let{vertexStart:a,geometrySize:o}=n,s=new Array(3);for(let l=a,c=0;c<o;l++,c++)this.getPointOnPath(e,c,s),i[l*3]=s[0],i[l*3+1]=s[1],i[l*3+2]=s[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,i=[]){let{positionSize:a}=this;n*a>=e.length&&(n+=1-e.length/a);let o=n*a;return i[0]=e[o],i[1]=e[o+1],i[2]=a===3&&e[o+2]||0,i}isClosed(e){if(!this.normalize)return!!this.opts.loop;let{positionSize:n}=this,i=e.length-n;return e[0]===e[i]&&e[1]===e[i+1]&&(n===2||e[2]===e[i+2])}};function tX(t){return Array.isArray(t[0])}var rX=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var nX=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var iX=[0,0,0,255],V4e={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:iX},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},hC={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t},jo=class extends Dr{constructor(...e){super(...e),A(this,"state",void 0)}getShaders(){return super.getShaders({vs:rX,fs:nX,modules:[On,Bn]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:hC,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:hC,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:hC,defaultValue:iX},instancePickingColors:{size:3,type:5121,accessor:(i,{index:a,target:o})=>this.encodePickingColor(i&&i.__source?i.__source.index:a,o)}}),this.setState({pathTesselator:new Z2({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);let{props:n,changeFlags:i}=e,a=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){let{pathTesselator:l}=this.state,c=n.data.attributes||{};l.updateGeometry({data:n.data,geometryBuffer:c.getPath,buffers:c,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:l.instanceCount,startIndices:l.vertexStarts}),i.dataChanged||a.invalidateAll()}if(i.extensionsChanged){var s;let{gl:l}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(l),a.invalidateAll()}}getPickingInfo(e){let n=super.getPickingInfo(e),{index:i}=n,{data:a}=this.props;return a[0]&&a[0].__source&&(n.object=a.find(o=>o.__source.index===i)),n}disablePickingIndex(e){let{data:n}=this.props;if(n[0]&&n[0].__source)for(let i=0;i<n.length;i++)n[i].__source.index===e&&this._disablePickingIndex(i);else super.disablePickingIndex(e)}draw({uniforms:e}){let{jointRounded:n,capRounded:i,billboard:a,miterLimit:o,widthUnits:s,widthScale:l,widthMinPixels:c,widthMaxPixels:u}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(i),billboard:a,widthUnits:wi[s],widthScale:l,miterLimit:o,widthMinPixels:c,widthMaxPixels:u}).draw()}_getModel(e){let n=[0,1,2,1,4,2,1,3,4,3,5,4],i=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new wr(e,{...this.getShaders(),id:this.props.id,geometry:new Nn({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(i),size:2}}}),isInstanced:!0})}calculatePositions(e){let{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){let{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}};A(jo,"defaultProps",V4e);A(jo,"layerName","PathLayer");var hX=Ma(cX());var p9=a9.CLOCKWISE,uX=a9.COUNTER_CLOCKWISE,ju={isClosed:!0};function n5e(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function u0(t){return"positions"in t?t.positions:t}function Y2(t){return"holeIndices"in t?t.holeIndices:null}function i5e(t){return Array.isArray(t[0])}function a5e(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function o5e(t){let e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function s5e(t,e,n,i){for(let a=0;a<e;a++)if(t[n+a]!==t[i-e+a])return!1;return!0}function dX(t,e,n,i,a){let o=e,s=n.length;for(let l=0;l<s;l++)for(let c=0;c<i;c++)t[o++]=n[l][c]||0;if(!o5e(n))for(let l=0;l<i;l++)t[o++]=n[0][l]||0;return ju.start=e,ju.end=o,ju.size=i,$2(t,a,ju),o}function fX(t,e,n,i,a=0,o,s){o=o||n.length;let l=o-a;if(l<=0)return e;let c=e;for(let u=0;u<l;u++)t[c++]=n[a+u];if(!s5e(n,i,a,o))for(let u=0;u<i;u++)t[c++]=n[a+u];return ju.start=e,ju.end=c,ju.size=i,$2(t,s,ju),c}function h9(t,e){n5e(t);let n=[],i=[];if("positions"in t){let{positions:a,holeIndices:o}=t;if(o){let s=0;for(let l=0;l<=o.length;l++)s=fX(n,s,a,e,o[l-1],o[l],l===0?p9:uX),i.push(s);return i.pop(),{positions:n,holeIndices:i}}t=a}if(!i5e(t))return fX(n,0,t,e,0,n.length,p9),n;if(!a5e(t)){let a=0;for(let[o,s]of t.entries())a=dX(n,a,s,e,o===0?p9:uX),i.push(a);return i.pop(),{positions:n,holeIndices:i}}return dX(n,0,t,e,p9),n}function vC(t,e,n){let i=t.length/3,a=0;for(let o=0;o<i;o++){let s=(o+1)%i;a+=t[o*3+e]*t[s*3+n],a-=t[s*3+e]*t[o*3+n]}return Math.abs(a/2)}function pX(t,e,n,i){let a=t.length/3;for(let o=0;o<a;o++){let s=o*3,l=t[s+0],c=t[s+1],u=t[s+2];t[s+e]=l,t[s+n]=c,t[s+i]=u}}function mX(t,e,n,i){let a=Y2(t);a&&(a=a.map(l=>l/e));let o=u0(t),s=i&&e===3;if(n){let l=o.length;o=o.slice();let c=[];for(let u=0;u<l;u+=e){c[0]=o[u],c[1]=o[u+1],s&&(c[2]=o[u+2]);let d=n(c);o[u]=d[0],o[u+1]=d[1],s&&(o[u+2]=d[2])}}if(s){let l=vC(o,0,1),c=vC(o,0,2),u=vC(o,1,2);if(!l&&!c&&!u)return[];l>c&&l>u||(c>u?(n||(o=o.slice()),pX(o,0,2,1)):(n||(o=o.slice()),pX(o,2,0,1)))}return(0,hX.default)(o,a,e)}var J2=class extends Du{constructor(e){let{fp64:n,IndexType:i=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:i,size:1}}})}get(e){let{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);let n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){let n=h9(e,this.positionSize);return this.opts.resolution?W2(u0(n),Y2(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?fC(u0(n),Y2(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(_X(e)){let n=0;for(let i of e)n+=this.getGeometrySize(i);return n}return u0(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&_X(e))for(let i of e){let a=this.getGeometrySize(i);n.geometrySize=a,this.updateGeometryAttributes(i,n),n.vertexStart+=a,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:i,indexStart:a}){let{attributes:o,indexStarts:s,typedArrayManager:l}=this,c=o.indices;if(!c||!e)return;let u=a,d=mX(e,this.positionSize,this.opts.preproject,this.opts.full3d);c=l.allocate(c,a+d.length,{copy:!0});for(let f=0;f<d.length;f++)c[u++]=d[f]+i;s[n+1]=a+d.length,o.indices=c}_updatePositions(e,{vertexStart:n,geometrySize:i}){let{attributes:{positions:a},positionSize:o}=this;if(!a||!e)return;let s=u0(e);for(let l=n,c=0;c<i;l++,c++){let u=s[c*o],d=s[c*o+1],f=o>2?s[c*o+2]:0;a[l*3]=u,a[l*3+1]=d,a[l*3+2]=f}}_updateVertexValid(e,{vertexStart:n,geometrySize:i}){let{positionSize:a}=this,o=this.attributes.vertexValid,s=e&&Y2(e);if(e&&e.edgeTypes?o.set(e.edgeTypes,n):o.fill(1,n,n+i),s)for(let l=0;l<s.length;l++)o[n+s[l]/a-1]=0;o[n+i-1]=0}};function _X(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}var m9=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var EX=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(m9,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`);var vX=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(m9,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`);var yX=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var _9=[0,0,0,255],l5e={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:_9},getLineColor:{type:"accessor",value:_9},material:!0},g9={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t},Ac=class extends Dr{constructor(...e){super(...e),A(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?EX:vX,fs:yX,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[On,Ru,Bn]})}get wrapLongitude(){return!1}initializeState(){let{gl:e,viewport:n}=this.context,{coordinateSystem:i}=this.props,{_full3d:a}=this.props;n.isGeospatial&&i===_t.DEFAULT&&(i=_t.LNGLAT);let o;i===_t.LNGLAT&&(a?o=n.projectPosition.bind(n):o=n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new J2({preproject:o,fp64:this.use64bitPositions(),IndexType:!e||Au(e,or.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});let s=this.getAttributeManager(),l=!0;s.remove(["instancePickingColors"]),s.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:l},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:g9,accessor:"getPolygon",update:this.calculatePositions,noAlloc:l,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:l},elevations:{size:1,transition:g9,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:g9,accessor:"getFillColor",defaultValue:_9,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:g9,accessor:"getLineColor",defaultValue:_9,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(c,{index:u,target:d})=>this.encodePickingColor(c&&c.__source?c.__source.index:u,d),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){let n=super.getPickingInfo(e),{index:i}=n,{data:a}=this.props;return a[0]&&a[0].__source&&(n.object=a.find(o=>o.__source.index===i)),n}disablePickingIndex(e){let{data:n}=this.props;if(n[0]&&n[0].__source)for(let i=0;i<n.length;i++)n[i].__source.index===e&&this._disablePickingIndex(i);else super.disablePickingIndex(e)}draw({uniforms:e}){let{extruded:n,filled:i,wireframe:a,elevationScale:o}=this.props,{topModel:s,sideModel:l,polygonTesselator:c}=this.state,u={...e,extruded:!!n,elevationScale:o};l&&(l.setInstanceCount(c.instanceCount-1),l.setUniforms(u),a&&(l.setDrawMode(3),l.setUniforms({isWireframe:!0}).draw()),i&&(l.setDrawMode(6),l.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(c.vertexCount),s.setUniforms(u).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);let{props:n,oldProps:i,changeFlags:a}=e,o=this.getAttributeManager();if(a.extensionsChanged||n.filled!==i.filled||n.extruded!==i.extruded){var l;(l=this.state.models)===null||l===void 0||l.forEach(c=>c.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:i}){if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon)){let{polygonTesselator:o}=this.state,s=e.data.attributes||{};o.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:s.getPolygon,buffers:s,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:i.dataChanged,full3d:e._full3d}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),i.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){let{id:n,filled:i,extruded:a}=this.props,o,s;if(i){let l=this.getShaders("top");l.defines.NON_INSTANCED_MODEL=1,o=new wr(e,{...l,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return a&&(s=new wr(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new Nn({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),s.userData.excludeAttributes={indices:!0}),{models:[s,o].filter(Boolean),topModel:o,sideModel:s}}calculateIndices(e){let{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){let{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}};A(Ac,"defaultProps",l5e);A(Ac,"layerName","SolidPolygonLayer");function E9({data:t,getIndex:e,dataRange:n,replace:i}){let{startRow:a=0,endRow:o=1/0}=n,s=t.length,l=s,c=s;for(let p=0;p<s;p++){let h=e(t[p]);if(l>p&&h>=a&&(l=p),h>=o){c=p;break}}let u=l,f=c-l!==i.length?t.slice(c):void 0;for(let p=0;p<i.length;p++)t[u++]=i[p];if(f){for(let p=0;p<f.length;p++)t[u++]=f[p];t.length=u}return{startRow:l,endRow:l+i.length}}var xX=[0,0,0,255],c5e=[0,0,0,255],u5e={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:c5e},getLineColor:{type:"accessor",value:xX},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},da=class extends lo{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&at.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){let n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){let i=this.state.paths.slice(),a=e.dataChanged.map(o=>E9({data:i,getIndex:s=>s.__source.index,dataRange:o,replace:this._getPaths(o)}));this.setState({paths:i,pathsDiff:a})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){let{data:n,getPolygon:i,positionFormat:a,_normalize:o}=this.props,s=[],l=a==="XY"?2:3,{startRow:c,endRow:u}=e,{iterable:d,objectInfo:f}=so(n,c,u);for(let p of d){f.index++;let h=i(p,f);o&&(h=h9(h,l));let{holeIndices:m}=h,_=h.positions||h;if(m)for(let E=0;E<=m.length;E++){let v=_.slice(m[E-1]||0,m[E]||_.length);s.push(this.getSubLayerRow({path:v},p,f.index))}else s.push(this.getSubLayerRow({path:_},p,f.index))}return s}renderLayers(){let{data:e,_dataDiff:n,stroked:i,filled:a,extruded:o,wireframe:s,_normalize:l,_windingOrder:c,elevationScale:u,transitions:d,positionFormat:f}=this.props,{lineWidthUnits:p,lineWidthScale:h,lineWidthMinPixels:m,lineWidthMaxPixels:_,lineJointRounded:E,lineMiterLimit:v,lineDashJustified:y}=this.props,{getFillColor:x,getLineColor:S,getLineWidth:N,getLineDashArray:w,getElevation:T,getPolygon:I,updateTriggers:R,material:L}=this.props,{paths:O,pathsDiff:H}=this.state,U=this.getSubLayerClass("fill",Ac),X=this.getSubLayerClass("stroke",jo),W=this.shouldRenderSubLayer("fill",O)&&new U({_dataDiff:n,extruded:o,elevationScale:u,filled:a,wireframe:s,_normalize:l,_windingOrder:c,getElevation:T,getFillColor:x,getLineColor:o&&s?S:xX,material:L,transitions:d},this.getSubLayerProps({id:"fill",updateTriggers:R&&{getPolygon:R.getPolygon,getElevation:R.getElevation,getFillColor:R.getFillColor,lineColors:o&&s,getLineColor:R.getLineColor}}),{data:e,positionFormat:f,getPolygon:I}),ne=!o&&i&&this.shouldRenderSubLayer("stroke",O)&&new X({_dataDiff:H&&(()=>H),widthUnits:p,widthScale:h,widthMinPixels:m,widthMaxPixels:_,jointRounded:E,miterLimit:v,dashJustified:y,_pathType:"loop",transitions:d&&{getWidth:d.getLineWidth,getColor:d.getLineColor,getPath:d.getPolygon},getColor:this.getSubLayerAccessor(S),getWidth:this.getSubLayerAccessor(N),getDashArray:this.getSubLayerAccessor(w)},this.getSubLayerProps({id:"stroke",updateTriggers:R&&{getWidth:R.getLineWidth,getColor:R.getLineColor,getDashArray:R.getLineDashArray}}),{data:O,positionFormat:f,getPath:be=>be.path});return[!o&&W,ne,o&&W]}};A(da,"layerName","PolygonLayer");A(da,"defaultProps",u5e);function bX(t,e){if(!t)return null;let n="startIndices"in t?t.startIndices[e]:e,i=t.featureIds.value[n];return n!==-1?d5e(t,i,n):null}function d5e(t,e,n){let i={properties:{...t.properties[e]}};for(let a in t.numericProps)i.properties[a]=t.numericProps[a].value[n];return i}function SX(t,e){let n={points:null,lines:null,polygons:null};for(let i in n){let a=t[i].globalFeatureIds.value;n[i]=new Uint8ClampedArray(a.length*3);let o=[];for(let s=0;s<a.length;s++)e(a[s],o),n[i][s*3+0]=o[0],n[i][s*3+1]=o[1],n[i][s*3+2]=o[2]}return n}var NX=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var yC=192/256,AX=[],f5e={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}},Ap=class extends ua{constructor(...e){super(...e),A(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:NX}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:a})=>this.encodePickingColor(i,a)}})}updateState(e){super.updateState(e);let{props:n,oldProps:i}=e,{outlineColor:a}=n;a!==i.outlineColor&&(a=a.map(o=>o/255),a[3]=Number.isFinite(a[3])?a[3]:1,this.setState({outlineColor:a})),!n.sdf&&n.outlineWidth&&at.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){let{sdf:n,smoothing:i,outlineWidth:a}=this.props,{outlineColor:o}=this.state,s=a?Math.max(i,yC*(1-a)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:yC,outlineBuffer:s,gamma:i,sdf:!!n,outlineColor:o},super.draw(e),n&&a){let{iconManager:l}=this.state;l.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:yC}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):AX}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):AX}};A(Ap,"defaultProps",f5e);A(Ap,"layerName","MultiIconLayer");var Q2=class{constructor({fontSize:e=24,buffer:n=3,radius:i=8,cutoff:a=.25,fontFamily:o="sans-serif",fontWeight:s="normal",fontStyle:l="normal"}={}){this.buffer=n,this.cutoff=a,this.radius=i;let c=this.size=e+n*4,u=this._createCanvas(c),d=this.ctx=u.getContext("2d",{willReadFrequently:!0});d.font=`${l} ${s} ${e}px ${o}`,d.textBaseline="alphabetic",d.textAlign="left",d.fillStyle="black",this.gridOuter=new Float64Array(c*c),this.gridInner=new Float64Array(c*c),this.f=new Float64Array(c),this.z=new Float64Array(c+1),this.v=new Uint16Array(c)}_createCanvas(e){let n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){let{width:n,actualBoundingBoxAscent:i,actualBoundingBoxDescent:a,actualBoundingBoxLeft:o,actualBoundingBoxRight:s}=this.ctx.measureText(e),l=Math.ceil(i),c=0,u=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-o))),d=Math.min(this.size-this.buffer,l+Math.ceil(a)),f=u+2*this.buffer,p=d+2*this.buffer,h=Math.max(f*p,0),m=new Uint8ClampedArray(h),_={data:m,width:f,height:p,glyphWidth:u,glyphHeight:d,glyphTop:l,glyphLeft:c,glyphAdvance:n};if(u===0||d===0)return _;let{ctx:E,buffer:v,gridInner:y,gridOuter:x}=this;E.clearRect(v,v,u,d),E.fillText(e,v,v+l);let S=E.getImageData(v,v,u,d);x.fill(1e20,0,h),y.fill(0,0,h);for(let N=0;N<d;N++)for(let w=0;w<u;w++){let T=S.data[4*(N*u+w)+3]/255;if(T===0)continue;let I=(N+v)*f+w+v;if(T===1)x[I]=0,y[I]=1e20;else{let R=.5-T;x[I]=R>0?R*R:0,y[I]=R<0?R*R:0}}TX(x,0,0,f,p,f,this.f,this.v,this.z),TX(y,v,v,u,d,f,this.f,this.v,this.z);for(let N=0;N<h;N++){let w=Math.sqrt(x[N])-Math.sqrt(y[N]);m[N]=Math.round(255-255*(w/this.radius+this.cutoff))}return _}};function TX(t,e,n,i,a,o,s,l,c){for(let u=e;u<e+i;u++)CX(t,n*o+u,o,a,s,l,c);for(let u=n;u<n+a;u++)CX(t,u*o+e,1,i,s,l,c)}function CX(t,e,n,i,a,o,s){o[0]=0,s[0]=-1e20,s[1]=1e20,a[0]=t[e];for(let l=1,c=0,u=0;l<i;l++){a[l]=t[e+l*n];let d=l*l;do{let f=o[c];u=(a[l]-a[f]+d-f*f)/(l-f)/2}while(u<=s[c]&&--c>-1);c++,o[c]=l,s[c]=u,s[c+1]=1e20}for(let l=0,c=0;l<i;l++){for(;s[c+1]<l;)c++;let u=o[c],d=l-u;t[e+l*n]=a[u]+d*d}}var p5e=32,h5e=[];function m5e(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function wX({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:a,mapping:o={},xOffset:s=0,yOffset:l=0}){let c=0,u=s,d=n+i*2;for(let f of t)if(!o[f]){let p=e(f);u+p+i*2>a&&(u=0,c++),o[f]={x:u+i,y:l+c*d+i,width:p,height:d,layoutWidth:p,layoutHeight:n},u+=p+i*2}return{mapping:o,xOffset:u,yOffset:l+c*d,canvasHeight:m5e(l+(c+1)*d)}}function IX(t,e,n,i){let a=0;for(let s=e;s<n;s++){var o;let l=t[s];a+=((o=i[l])===null||o===void 0?void 0:o.layoutWidth)||0}return a}function RX(t,e,n,i,a,o){let s=e,l=0;for(let c=e;c<n;c++){let u=IX(t,c,c+1,a);l+u>i&&(s<c&&o.push(c),s=c,l=0),l+=u}return l}function g5e(t,e,n,i,a,o){let s=e,l=e,c=e,u=0;for(let d=e;d<n;d++)if((t[d]===" "||t[d+1]===" "||d+1===n)&&(c=d+1),c>l){let f=IX(t,l,c,a);u+f>i&&(s<l&&(o.push(l),s=l,u=0),f>i&&(f=RX(t,l,c,i,a,o),s=o[o.length-1])),l=c,u+=f}return u}function _5e(t,e,n,i,a=0,o){o===void 0&&(o=t.length);let s=[];return e==="break-all"?RX(t,a,o,n,i,s):g5e(t,a,o,n,i,s),s}function E5e(t,e,n,i,a,o){let s=0,l=0;for(let c=e;c<n;c++){let u=t[c],d=i[u];d?(l||(l=d.layoutHeight),a[c]=s+d.layoutWidth/2,s+=d.layoutWidth):(at.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),a[c]=s,s+=p5e)}o[0]=s,o[1]=l}function PX(t,e,n,i,a){let o=Array.from(t),s=o.length,l=new Array(s),c=new Array(s),u=new Array(s),d=(n==="break-word"||n==="break-all")&&isFinite(i)&&i>0,f=[0,0],p=[0,0],h=0,m=0,_=0;for(let v=0;v<=s;v++){let y=o[v];if((y===`
`||v===s)&&(_=v),_>m){let x=d?_5e(o,n,i,a,m,_):h5e;for(let S=0;S<=x.length;S++){let N=S===0?m:x[S-1],w=S<x.length?x[S]:_;E5e(o,N,w,a,l,p);for(let T=N;T<w;T++){var E;let I=o[T],R=((E=a[I])===null||E===void 0?void 0:E.layoutOffsetY)||0;c[T]=h+p[1]/2+R,u[T]=p[0]}h=h+p[1]*e,f[0]=Math.max(f[0],p[0])}m=_}y===`
`&&(l[m]=0,c[m]=0,u[m]=0,m++)}return f[1]=h,{x:l,y:c,rowWidth:u,size:f}}function MX({value:t,length:e,stride:n,offset:i,startIndices:a,characterSet:o}){let s=t.BYTES_PER_ELEMENT,l=n?n/s:1,c=i?i/s:0,u=a[e]||Math.ceil((t.length-c)/l),d=o&&new Set,f=new Array(e),p=t;if(l>1||c>0){let h=t.constructor;p=new h(u);for(let m=0;m<u;m++)p[m]=t[m*l+c]}for(let h=0;h<e;h++){let m=a[h],_=a[h+1]||u,E=p.subarray(m,_);f[h]=String.fromCodePoint.apply(null,E),d&&E.forEach(d.add,d)}if(d)for(let h of d)o.add(String.fromCodePoint(h));return{texts:f,characterCount:u}}var d0=class{constructor(e=5){A(this,"limit",void 0),A(this,"_cache",{}),A(this,"_order",[]),this.limit=e}get(e){let n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){let n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}};function v5e(){let t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}var Tp={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:v5e(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},LX=1024,OX=.9,BX=1.2,FX=3,v9=new d0(FX);function y5e(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);let i=v9.get(t);if(!i)return n;for(let a in i.mapping)n.has(a)&&n.delete(a);return n}function x5e(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function DX(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function kX(t){at.assert(Number.isFinite(t)&&t>=FX,"Invalid cache limit"),v9=new d0(t)}var eE=class{constructor(){A(this,"props",{...Tp}),A(this,"_key",void 0),A(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){let{fontSize:e,buffer:n}=this.props;return(e*BX+n*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();let n=y5e(this._key,this.props.characterSet),i=v9.get(this._key);if(i&&n.size===0){this._atlas!==i&&(this._atlas=i);return}let a=this._generateFontAtlas(n,i);this._atlas=a,v9.set(this._key,a)}_generateFontAtlas(e,n){let{fontFamily:i,fontWeight:a,fontSize:o,buffer:s,sdf:l,radius:c,cutoff:u}=this.props,d=n&&n.data;d||(d=document.createElement("canvas"),d.width=LX);let f=d.getContext("2d",{willReadFrequently:!0});DX(f,i,o,a);let{mapping:p,canvasHeight:h,xOffset:m,yOffset:_}=wX({getFontWidth:E=>f.measureText(E).width,fontHeight:o*BX,buffer:s,characterSet:e,maxCanvasWidth:LX,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(d.height!==h){let E=f.getImageData(0,0,d.width,d.height);d.height=h,f.putImageData(E,0,0)}if(DX(f,i,o,a),l){let E=new Q2({fontSize:o,buffer:s,radius:c,cutoff:u,fontFamily:i,fontWeight:"".concat(a)});for(let v of e){let{data:y,width:x,height:S,glyphTop:N}=E.draw(v);p[v].width=x,p[v].layoutOffsetY=o*OX-N;let w=f.createImageData(x,S);x5e(y,w),f.putImageData(w,p[v].x,p[v].y)}}else for(let E of e)f.fillText(E,p[E].x,p[E].y+s+o*OX);return{xOffset:m,yOffset:_,mapping:p,data:d,width:d.width,height:d.height}}_getKey(){let{fontFamily:e,fontWeight:n,fontSize:i,buffer:a,sdf:o,radius:s,cutoff:l}=this.props;return o?"".concat(e," ").concat(n," ").concat(i," ").concat(a," ").concat(s," ").concat(l):"".concat(e," ").concat(n," ").concat(i," ").concat(a)}};var GX=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`;var UX=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var b5e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}},Cp=class extends Dr{constructor(...e){super(...e),A(this,"state",void 0)}getShaders(){return super.getShaders({vs:GX,fs:UX,modules:[On,Bn]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);let{changeFlags:n}=e;if(n.extensionsChanged){var i;let{gl:a}=this.context;(i=this.state.model)===null||i===void 0||i.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){let{billboard:n,sizeScale:i,sizeUnits:a,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:l}=this.props,{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!l,padding:c,sizeUnits:wi[a],sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){let n=[0,0,1,0,1,1,0,1];return new wr(e,{...this.getShaders(),id:this.props.id,geometry:new Nn({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}};A(Cp,"defaultProps",b5e);A(Cp,"layerName","TextBackgroundLayer");var VX={start:1,middle:0,end:-1},$X={top:1,center:0,bottom:-1},xC=[0,0,0,255],S5e=1,N5e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:xC},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Tp.characterSet},fontFamily:Tp.fontFamily,fontWeight:Tp.fontWeight,lineHeight:S5e,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:xC},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:xC},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}},fa=class extends lo{constructor(...e){super(...e),A(this,"state",void 0),A(this,"getBoundingRect",(n,i)=>{let{size:[a,o]}=this.transformParagraph(n,i),{fontSize:s}=this.state.fontAtlasManager.props;a/=s,o/=s;let{getTextAnchor:l,getAlignmentBaseline:c}=this.props,u=VX[typeof l=="function"?l(n,i):l],d=$X[typeof c=="function"?c(n,i):c];return[(u-1)*a/2,(d-1)*o/2,a,o]}),A(this,"getIconOffsets",(n,i)=>{let{getTextAnchor:a,getAlignmentBaseline:o}=this.props,{x:s,y:l,rowWidth:c,size:[u,d]}=this.transformParagraph(n,i),f=VX[typeof a=="function"?a(n,i):a],p=$X[typeof o=="function"?o(n,i):o],h=s.length,m=new Array(h*2),_=0;for(let E=0;E<h;E++){let v=(1-f)*(u-c[E])/2;m[_++]=(f-1)*u/2+v+s[E],m[_++]=(p-1)*d/2+l[E]}return m})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new eE},this.props.maxWidth>0&&at.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){let{props:n,oldProps:i,changeFlags:a}=e;(a.dataChanged||a.updateTriggersChanged&&(a.updateTriggersChanged.all||a.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){let{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:a,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:n,fontWeight:i};if(!a.mapping)return a.setProps(s),!0;for(let l in s)if(s[l]!==a.props[l])return a.setProps(s),!0;return!1}_updateText(){var e;let{data:n,characterSet:i}=this.props,a=(e=n.attributes)===null||e===void 0?void 0:e.getText,{getText:o}=this.props,s=n.startIndices,l,c=i==="auto"&&new Set;if(a&&s){let{texts:u,characterCount:d}=MX({...ArrayBuffer.isView(a)?{value:a}:a,length:n.length,startIndices:s,characterSet:c});l=d,o=(f,{index:p})=>u[p]}else{let{iterable:u,objectInfo:d}=so(n);s=[0],l=0;for(let f of u){d.index++;let p=Array.from(o(f,d)||"");c&&p.forEach(c.add,c),l+=p.length,s.push(l)}}this.setState({getText:o,startIndices:s,numInstances:l,characterSet:c||i})}transformParagraph(e,n){let{fontAtlasManager:i}=this.state,a=i.mapping,o=this.state.getText,{wordBreak:s,lineHeight:l,maxWidth:c}=this.props,u=o(e,n)||"";return PX(u,l,s,c*i.props.fontSize,a)}renderLayers(){let{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:a,texture:o,mapping:s},styleVersion:l}=this.state,{data:c,_dataDiff:u,getPosition:d,getColor:f,getSize:p,getAngle:h,getPixelOffset:m,getBackgroundColor:_,getBorderColor:E,getBorderWidth:v,backgroundPadding:y,background:x,billboard:S,fontSettings:N,outlineWidth:w,outlineColor:T,sizeScale:I,sizeUnits:R,sizeMinPixels:L,sizeMaxPixels:O,transitions:H,updateTriggers:U}=this.props,X=this.getSubLayerClass("characters",Ap),W=this.getSubLayerClass("background",Cp);return[x&&new W({getFillColor:_,getLineColor:E,getLineWidth:v,padding:y,getPosition:d,getSize:p,getAngle:h,getPixelOffset:m,billboard:S,sizeScale:I,sizeUnits:R,sizeMinPixels:L,sizeMaxPixels:O,transitions:H&&{getPosition:H.getPosition,getAngle:H.getAngle,getSize:H.getSize,getFillColor:H.getBackgroundColor,getLineColor:H.getBorderColor,getLineWidth:H.getBorderWidth,getPixelOffset:H.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:U.getPosition,getAngle:U.getAngle,getSize:U.getSize,getFillColor:U.getBackgroundColor,getLineColor:U.getBorderColor,getLineWidth:U.getBorderWidth,getPixelOffset:U.getPixelOffset,getBoundingRect:{getText:U.getText,getTextAnchor:U.getTextAnchor,getAlignmentBaseline:U.getAlignmentBaseline,styleVersion:l}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new X({sdf:N.sdf,smoothing:Number.isFinite(N.smoothing)?N.smoothing:Tp.smoothing,outlineWidth:w/(N.radius||Tp.radius),outlineColor:T,iconAtlas:o,iconMapping:s,getPosition:d,getColor:f,getSize:p,getAngle:h,getPixelOffset:m,billboard:S,sizeScale:I*a,sizeUnits:R,sizeMinPixels:L*a,sizeMaxPixels:O*a,transitions:H&&{getPosition:H.getPosition,getAngle:H.getAngle,getColor:H.getColor,getSize:H.getSize,getPixelOffset:H.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:U.getText,getPosition:U.getPosition,getAngle:U.getAngle,getColor:U.getColor,getSize:U.getSize,getPixelOffset:U.getPixelOffset,getIconOffsets:{getTextAnchor:U.getTextAnchor,getAlignmentBaseline:U.getAlignmentBaseline,styleVersion:l}}}),{data:c,_dataDiff:u,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){kX(e)}};A(fa,"defaultProps",N5e);A(fa,"layerName","TextLayer");var tE={circle:{type:zo,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:ua,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:fa,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},rE={type:jo,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},y9={type:Ac,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function f0({type:t,props:e}){let n={};for(let i in e)n[i]=t.defaultProps[e[i]];return n}function x9(t,e){let{transitions:n,updateTriggers:i}=t.props,a={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(let o in e){let s=e[o],l=t.props[o];o.startsWith("get")&&(l=t.getSubLayerAccessor(l),a.updateTriggers[s]=i[o],n&&(a.transitions[s]=n[o])),a[s]=l}return a}function jX(t){if(Array.isArray(t))return t;switch(at.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return at.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function bC(t,e,n={}){let i={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:a=0,endRow:o=t.length}=n;for(let s=a;s<o;s++){let l=t[s],{geometry:c}=l;if(c)if(c.type==="GeometryCollection"){at.assert(Array.isArray(c.geometries),"GeoJSON does not have geometries array");let{geometries:u}=c;for(let d=0;d<u.length;d++){let f=u[d];zX(f,i,e,l,s)}}else zX(c,i,e,l,s)}return i}function zX(t,e,n,i,a){let{type:o,coordinates:s}=t,{pointFeatures:l,lineFeatures:c,polygonFeatures:u,polygonOutlineFeatures:d}=e;if(!T5e(o,s)){at.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":l.push(n({geometry:t},i,a));break;case"MultiPoint":s.forEach(f=>{l.push(n({geometry:{type:"Point",coordinates:f}},i,a))});break;case"LineString":c.push(n({geometry:t},i,a));break;case"MultiLineString":s.forEach(f=>{c.push(n({geometry:{type:"LineString",coordinates:f}},i,a))});break;case"Polygon":u.push(n({geometry:t},i,a)),s.forEach(f=>{d.push(n({geometry:{type:"LineString",coordinates:f}},i,a))});break;case"MultiPolygon":s.forEach(f=>{u.push(n({geometry:{type:"Polygon",coordinates:f}},i,a)),f.forEach(p=>{d.push(n({geometry:{type:"LineString",coordinates:p}},i,a))})});break;default:}}var A5e={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function T5e(t,e){let n=A5e[t];for(at.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function HX(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function b9(t){return t.geometry.coordinates}function WX(t,e){let n=HX(),{pointFeatures:i,lineFeatures:a,polygonFeatures:o,polygonOutlineFeatures:s}=t;return n.points.data=i,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=b9,n.lines.data=a,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=b9,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=b9,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=b9,n}function ZX(t,e){let n=HX(),{points:i,lines:a,polygons:o}=t,s=SX(t,e);return n.points.data={length:i.positions.value.length/i.positions.size,attributes:{...i.attributes,getPosition:i.positions,instancePickingColors:{size:3,value:s.points}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines.data={length:a.pathIndices.value.length-1,startIndices:a.pathIndices.value,attributes:{...a.attributes,getPath:a.positions,instancePickingColors:{size:3,value:s.lines}},properties:a.properties,numericProps:a.numericProps,featureIds:a.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}var C5e=["points","linestrings","polygons"],w5e={...f0(tE.circle),...f0(tE.icon),...f0(tE.text),...f0(rE),...f0(y9),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}},Hu=class extends lo{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;let{data:i}=this.props,a=i&&"points"in i&&"polygons"in i&&"lines"in i;this.setState({binary:a}),a?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){let i=ZX(e.data,this.encodePickingColor);this.setState({layerProps:i})}_updateStateJSON({props:e,changeFlags:n}){let i=jX(e.data),a=this.getSubLayerRow.bind(this),o={},s={};if(Array.isArray(n.dataChanged)){let c=this.state.features;for(let u in c)o[u]=c[u].slice(),s[u]=[];for(let u of n.dataChanged){let d=bC(i,a,u);for(let f in c)s[f].push(E9({data:o[f],getIndex:p=>p.__source.index,dataRange:u,replace:d[f]}))}}else o=bC(i,a);let l=WX(o,s);this.setState({features:o,featuresDiff:s,layerProps:l})}getPickingInfo(e){let n=super.getPickingInfo(e),{index:i,sourceLayer:a}=n;return n.featureType=C5e.find(o=>a.id.startsWith("".concat(this.id,"-").concat(o,"-"))),i>=0&&a.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[i]),n}_updateAutoHighlight(e){let n="".concat(this.id,"-points-"),i=e.featureType==="points";for(let a of this.getSubLayers())a.id.startsWith(n)===i&&a.updateAutoHighlight(e)}_renderPolygonLayer(){let{extruded:e,wireframe:n}=this.props,{layerProps:i}=this.state,a="polygons-fill",o=this.shouldRenderSubLayer(a,i.polygons.data)&&this.getSubLayerClass(a,y9.type);if(o){let s=x9(this,y9.props),l=e&&n;return l||delete s.getLineColor,s.updateTriggers.lineColors=l,new o(s,this.getSubLayerProps({id:a,updateTriggers:s.updateTriggers}),i.polygons)}return null}_renderLineLayers(){let{extruded:e,stroked:n}=this.props,{layerProps:i}=this.state,a="polygons-stroke",o="linestrings",s=!e&&n&&this.shouldRenderSubLayer(a,i.polygonsOutline.data)&&this.getSubLayerClass(a,rE.type),l=this.shouldRenderSubLayer(o,i.lines.data)&&this.getSubLayerClass(o,rE.type);if(s||l){let c=x9(this,rE.props);return[s&&new s(c,this.getSubLayerProps({id:a,updateTriggers:c.updateTriggers}),i.polygonsOutline),l&&new l(c,this.getSubLayerProps({id:o,updateTriggers:c.updateTriggers}),i.lines)]}return null}_renderPointLayers(){let{pointType:e}=this.props,{layerProps:n,binary:i}=this.state,{highlightedObjectIndex:a}=this.props;!i&&Number.isFinite(a)&&(a=n.points.data.findIndex(l=>l.__source.index===a));let o=new Set(e.split("+")),s=[];for(let l of o){let c="points-".concat(l),u=tE[l],d=u&&this.shouldRenderSubLayer(c,n.points.data)&&this.getSubLayerClass(c,u.type);if(d){let f=x9(this,u.props),p=n.points;if(l==="text"&&i){let{instancePickingColors:h,...m}=p.data.attributes;p={...p,data:{...p.data,attributes:m}}}s.push(new d(f,this.getSubLayerProps({id:c,updateTriggers:f.updateTriggers,highlightedObjectIndex:a}),p))}}return s}renderLayers(){let{extruded:e}=this.props,n=this._renderPolygonLayer(),i=this._renderLineLayers(),a=this._renderPointLayers();return[!e&&n,i,a,e&&n]}getSubLayerAccessor(e){let{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(i,a)=>{let{data:o,index:s}=a,l=bX(o,s);return e(l,a)}}};A(Hu,"layerName","GeoJsonLayer");A(Hu,"defaultProps",w5e);var SC=function(){},wp=function(){};process.env.NODE_ENV!=="production"&&(SC=function(t,e){!t&&typeof console!="undefined"&&console.warn(e)},wp=function(t,e){if(!t)throw new Error(e)});var XX=(t,e,n)=>Math.min(Math.max(n,t),e);var NC=(t,e,n)=>{let i=e-t;return i===0?1:(n-t)/i};var p0=(t,e,n)=>-n*t+n*e+t;var S9=(t,e)=>n=>Math.max(Math.min(n,e),t),Wu=t=>t%1?Number(t.toFixed(5)):t,h0=/(-)?([\d]*\.?[\d])+/g,N9=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,qX=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Tc(t){return typeof t=="string"}var m0={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},A9=Object.assign(Object.assign({},m0),{transform:S9(0,1)}),gmt=Object.assign(Object.assign({},m0),{default:1});var nE=t=>({test:e=>Tc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),vmt=nE("deg"),g0=nE("%"),ymt=nE("px"),xmt=nE("vh"),bmt=nE("vw"),Smt=Object.assign(Object.assign({},g0),{parse:t=>g0.parse(t)/100,transform:t=>g0.transform(t*100)});var _0=(t,e)=>n=>!!(Tc(n)&&qX.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),T9=(t,e,n)=>i=>{if(!Tc(i))return i;let[a,o,s,l]=i.match(h0);return{[t]:parseFloat(a),[e]:parseFloat(o),[n]:parseFloat(s),alpha:l!==void 0?parseFloat(l):1}};var Nl={test:_0("hsl","hue"),parse:T9("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+g0.transform(Wu(e))+", "+g0.transform(Wu(n))+", "+Wu(A9.transform(i))+")"};var I5e=S9(0,255),C9=Object.assign(Object.assign({},m0),{transform:t=>Math.round(I5e(t))}),Ho={test:_0("rgb","red"),parse:T9("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+C9.transform(t)+", "+C9.transform(e)+", "+C9.transform(n)+", "+Wu(A9.transform(i))+")"};function R5e(t){let e="",n="",i="",a="";return t.length>5?(e=t.substr(1,2),n=t.substr(3,2),i=t.substr(5,2),a=t.substr(7,2)):(e=t.substr(1,1),n=t.substr(2,1),i=t.substr(3,1),a=t.substr(4,1),e+=e,n+=n,i+=i,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}var E0={test:_0("#"),parse:R5e,transform:Ho.transform};var Zu={test:t=>Ho.test(t)||E0.test(t)||Nl.test(t),parse:t=>Ho.test(t)?Ho.parse(t):Nl.test(t)?Nl.parse(t):E0.parse(t),transform:t=>Tc(t)?t:t.hasOwnProperty("red")?Ho.transform(t):Nl.transform(t)};var KX="${c}",YX="${n}";function P5e(t){var e,n,i,a;return isNaN(t)&&Tc(t)&&((n=(e=t.match(h0))===null||e===void 0?void 0:e.length)!==null&&n!==void 0?n:0)+((a=(i=t.match(N9))===null||i===void 0?void 0:i.length)!==null&&a!==void 0?a:0)>0}function JX(t){typeof t=="number"&&(t=`${t}`);let e=[],n=0,i=t.match(N9);i&&(n=i.length,t=t.replace(N9,KX),e.push(...i.map(Zu.parse)));let a=t.match(h0);return a&&(t=t.replace(h0,YX),e.push(...a.map(m0.parse))),{values:e,numColors:n,tokenised:t}}function QX(t){return JX(t).values}function eq(t){let{values:e,numColors:n,tokenised:i}=JX(t),a=e.length;return o=>{let s=i;for(let l=0;l<a;l++)s=s.replace(l<n?KX:YX,l<n?Zu.transform(o[l]):Wu(o[l]));return s}}var M5e=t=>typeof t=="number"?0:t;function L5e(t){let e=QX(t);return eq(t)(e.map(M5e))}var w9={test:P5e,parse:QX,createTransformer:eq,getAnimatableNone:L5e};function AC(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function TC({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let a=0,o=0,s=0;if(!e)a=o=s=n;else{let l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;a=AC(c,l,t+1/3),o=AC(c,l,t),s=AC(c,l,t-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:i}}var O5e=(t,e,n)=>{let i=t*t,a=e*e;return Math.sqrt(Math.max(0,n*(a-i)+i))},B5e=[E0,Ho,Nl],tq=t=>B5e.find(e=>e.test(t)),rq=t=>`'${t}' is not an animatable color. Use the equivalent color code instead.`,I9=(t,e)=>{let n=tq(t),i=tq(e);wp(!!n,rq(t)),wp(!!i,rq(e));let a=n.parse(t),o=i.parse(e);n===Nl&&(a=TC(a),n=Ho),i===Nl&&(o=TC(o),i=Ho);let s=Object.assign({},a);return l=>{for(let c in s)c!=="alpha"&&(s[c]=O5e(a[c],o[c],l));return s.alpha=p0(a.alpha,o.alpha,l),n.transform(s)}};var nq=t=>typeof t=="number";var D5e=(t,e)=>n=>e(t(n)),R9=(...t)=>t.reduce(D5e);function aq(t,e){return nq(t)?n=>p0(t,e,n):Zu.test(t)?I9(t,e):wC(t,e)}var CC=(t,e)=>{let n=[...t],i=n.length,a=t.map((o,s)=>aq(o,e[s]));return o=>{for(let s=0;s<i;s++)n[s]=a[s](o);return n}},oq=(t,e)=>{let n=Object.assign(Object.assign({},t),e),i={};for(let a in n)t[a]!==void 0&&e[a]!==void 0&&(i[a]=aq(t[a],e[a]));return a=>{for(let o in i)n[o]=i[o](a);return n}};function iq(t){let e=w9.parse(t),n=e.length,i=0,a=0,o=0;for(let s=0;s<n;s++)i||typeof e[s]=="number"?i++:e[s].hue!==void 0?o++:a++;return{parsed:e,numNumbers:i,numRGB:a,numHSL:o}}var wC=(t,e)=>{let n=w9.createTransformer(e),i=iq(t),a=iq(e);return i.numHSL===a.numHSL&&i.numRGB===a.numRGB&&i.numNumbers>=a.numNumbers?R9(CC(i.parsed,a.parsed),n):(SC(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),s=>`${s>0?e:t}`)};var F5e=(t,e)=>n=>p0(t,e,n);function k5e(t){if(typeof t=="number")return F5e;if(typeof t=="string")return Zu.test(t)?I9:wC;if(Array.isArray(t))return CC;if(typeof t=="object")return oq}function G5e(t,e,n){let i=[],a=n||k5e(t[0]),o=t.length-1;for(let s=0;s<o;s++){let l=a(t[s],t[s+1]);if(e){let c=Array.isArray(e)?e[s]:e;l=R9(c,l)}i.push(l)}return i}function U5e([t,e],[n]){return i=>n(NC(t,e,i))}function V5e(t,e){let n=t.length,i=n-1;return a=>{let o=0,s=!1;if(a<=t[0]?s=!0:a>=t[i]&&(o=i-1,s=!0),!s){let c=1;for(;c<n&&!(t[c]>a||c===i);c++);o=c-1}let l=NC(t[o],t[o+1],a);return e[o](l)}}function IC(t,e,{clamp:n=!0,ease:i,mixer:a}={}){let o=t.length;wp(o===e.length,"Both input and output ranges must be the same length"),wp(!i||!Array.isArray(i)||i.length===o-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),t[0]>t[o-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());let s=G5e(e,i,a),l=o===2?U5e(t,s):V5e(t,s);return n?c=>l(XX(t[0],t[o-1],c)):l}var iE=t=>e=>1-t(1-e),P9=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,sq=t=>e=>Math.pow(e,t),RC=t=>e=>e*e*((t+1)*e-t),lq=t=>{let e=RC(t);return n=>(n*=2)<1?.5*e(n):.5*(2-Math.pow(2,-10*(n-1)))};var cq=1.525,$5e=4/11,z5e=8/11,j5e=9/10,PC=t=>t,MC=sq(2),H5e=iE(MC),W5e=P9(MC),uq=t=>1-Math.sin(Math.acos(t)),dq=iE(uq),Z5e=P9(dq),LC=RC(cq),X5e=iE(LC),q5e=P9(LC),K5e=lq(cq),Y5e=4356/361,J5e=35442/1805,Q5e=16061/1805,fq=t=>{if(t===1||t===0)return t;let e=t*t;return t<$5e?7.5625*e:t<z5e?9.075*e-9.9*t+3.4:t<j5e?Y5e*e-J5e*t+Q5e:10.8*t*t-20.52*t+10.72},e9e=iE(fq);var t9e=1,r9e=1,hq=class{constructor(){le(this,"time",0);le(this,"channels",new Map);le(this,"animations",new Map);le(this,"playing",!1);le(this,"lastEngineTime",-1)}addChannel(t){let{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:a=1}=t,o=t9e++,s={time:0,delay:e,duration:n,rate:i,repeat:a};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(t){this.channels.delete(t);for(let[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){let e=this.channels.get(t);return e===void 0?!1:this.time>=e.delay+e.duration*e.repeat}getTime(t){if(t===void 0)return this.time;let e=this.channels.get(t);return e===void 0?-1:e.time}setTime(t){this.time=Math.max(0,t);let e=this.channels.values();for(let i of e)this._setChannelTime(i,this.time);let n=this.animations.values();for(let i of n){let{animation:a,channel:o}=i;a.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){let n=r9e++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){let n=e-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}},n9e=t=>t===1?1:0,i9e=t=>t,pq={hold:n9e,linear:i9e},a9e=class{constructor(t){le(this,"startIndex",-1);le(this,"endIndex",-1);le(this,"factor",0);le(this,"times",[]);le(this,"values",[]);le(this,"_lastTime",-1);this.setKeyFrames(t),this.setTime(0)}setKeyFrames(t){let e=t.length;this.times.length=e,this.values.length=e;for(let n=0;n<e;++n)this.times[n]=t[n][0],this.values[n]=t[n][1];this._calculateKeys(this._lastTime)}setTime(t){t=Math.max(0,t),t!==this._lastTime&&(this._calculateKeys(t),this._lastTime=t)}getStartTime(){return this.times[this.startIndex]}getEndTime(){return this.times[this.endIndex]}getStartData(){return this.values[this.startIndex]}getEndData(){return this.values[this.endIndex]}_calculateKeys(t){let e=0,n=this.times.length;for(e=0;e<n-2&&!(this.times[e+1]>t);++e);this.startIndex=e,this.endIndex=e+1;let i=this.times[this.startIndex],a=this.times[this.endIndex];this.factor=Math.min(Math.max(0,(t-i)/(a-i)),1)}};function o9e(t,e,n,i){return e.map((o,s)=>s===0?[t[s],{...o,ease:void 0,interpolate:void 0}]:[t[s],{...o,ease:n[s-1],interpolate:i[s-1]}])}function s9e(t,e,n=PC){return IC([0,1],[t,e],{ease:n})}var mq=class extends a9e{constructor({timings:e=[],keyframes:n=[],easings:i=[],interpolators:a=[]}){super([]);le(this,"activeAttributes",{});le(this,"animationHandle");le(this,"timings");le(this,"keyframes");le(this,"easings");le(this,"interpolators");this._setActiveAttributes=this._setActiveAttributes.bind(this),this.getFrame=this.getFrame.bind(this),this.set=this.set.bind(this),n.length>0?this.set({timings:e,keyframes:n,easings:i,interpolators:a}):(this.timings=e,this.keyframes=n,this.easings=i,this.interpolators=a)}updateKeyframe(e,n,i){let a=this.timings.indexOf(n);if(a===-1){let o=[...this.timings,n].sort((u,d)=>u-d);a=o.indexOf(n);let s=[...this.keyframes.slice(0,a),e.appearance,...this.keyframes.slice(a)],l=[...this.interpolators.slice(0,a),e.easing||"linear",...this.interpolators.slice(a)],c=[...this.easings.slice(0,a),pq[e.easing]||pq.linear,...this.easings.slice(a)];this.set({timings:o,keyframes:s,easings:c,interpolators:l}),this.animationHandle&&i.detachAnimation(this.animationHandle),this.animationHandle=i.attachAnimation(this,void 0)}else{let o=this.keyframes.map((s,l)=>this.timings[l]===n?o0(s,e.appearance):s);this.set({timings:this.timings,keyframes:o,easings:this.easings})}}set({timings:e,keyframes:n,easings:i,interpolators:a}){if(!n||n.length===0)throw new Error("There must be at least one keyframe");if(n.length!==e.length)throw new Error("There must be same number of timings as keyframes");this._setActiveAttributes(n);let o=o9e(e,n,i,a);this.keyframes=n,this.timings=e,this.easings=i,this.interpolators=a,this.setKeyFrames(o)}getFrame(){let e=this.factor,n=this.getStartData(),i=this.getEndData(),a={};return i?(Object.keys(this.activeAttributes).forEach(o=>{this.activeAttributes[o]&&(a[o]=s9e(n[o],i[o],i.ease)(e))}),a):n}_setActiveAttributes(e){if(e.length===0)return;let n=e[0];this.activeAttributes=l9e(n)}};function l9e(t){let e={};return t.position!==void 0&&(e.position=[t.position[0],t.position[1],t.position[2]]),t.size!==void 0&&(e.size=[t.size[0],t.size[1]]),t.rotation!==void 0&&(e.rotation=t.rotation),t.opacity!==void 0&&(e.opacity=t.opacity),t.fillColor!==void 0&&(e.fillColor=t.fillColor),t.strokeColor!==void 0&&(e.strokeColor=t.strokeColor),t.strokeWidth!==void 0&&(e.strokeWidth=t.strokeWidth),t.extrusion!==void 0&&(e.extrusion=t.extrusion),t.extrusionFactor!==void 0&&(e.extrusionFactor=t.extrusionFactor),t.scale!==void 0&&(e.scale=t.scale),t.zoom!==void 0&&(e.zoom=t.zoom),t.target!==void 0&&(e.target=[t.target[0],t.target[1],t.target[2]]),t.rotationOrbit!==void 0&&(e.rotationOrbit=t.rotationOrbit),t.rotationX!==void 0&&(e.rotationX=t.rotationX),t.longitude!==void 0&&(e.longitude=t.longitude),t.latitude!==void 0&&(e.latitude=t.latitude),t.bearing!==void 0&&(e.bearing=t.bearing),t.pitch!==void 0&&(e.pitch=t.pitch),e}var c9e="Queued Requests",u9e="Active Requests",d9e="Cancelled Requests",f9e="Queued Requests Ever",p9e="Active Requests Ever",h9e={id:"request-scheduler",throttleRequests:!0,maxRequests:6},v0=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,"props",void 0),A(this,"stats",void 0),A(this,"activeRequestCount",0),A(this,"requestQueue",[]),A(this,"requestMap",new Map),A(this,"deferredUpdate",null),this.props={...h9e,...e},this.stats=new Mo({id:this.props.id}),this.stats.get(c9e),this.stats.get(u9e),this.stats.get(d9e),this.stats.get(f9e),this.stats.get(p9e)}scheduleRequest(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);let i={handle:e,priority:0,getPriority:n},a=new Promise(o=>(i.resolve=o,i));return this.requestQueue.push(i),this.requestMap.set(e,a),this._issueNewRequests(),a}_issueRequest(e){let{handle:n,resolve:i}=e,a=!1,o=()=>{a||(a=!0,this.requestMap.delete(n),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,i?i({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;let e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(e!==0){this._updateAllRequests();for(let n=0;n<e;++n){let i=this.requestQueue.shift();i&&this._issueRequest(i)}}}_updateAllRequests(){let e=this.requestQueue;for(let n=0;n<e.length;++n){let i=e[n];this._updateRequest(i)||(e.splice(n,1),this.requestMap.delete(i.handle),n--)}e.sort((n,i)=>n.priority-i.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),e.priority<0?(e.resolve(null),!1):!0}};var M9=class{constructor(e){A(this,"index",void 0),A(this,"isVisible",void 0),A(this,"isSelected",void 0),A(this,"parent",void 0),A(this,"children",void 0),A(this,"content",void 0),A(this,"state",void 0),A(this,"layers",void 0),A(this,"id",void 0),A(this,"zoom",void 0),A(this,"userData",void 0),A(this,"boundingBox",void 0),A(this,"_abortController",void 0),A(this,"_loader",void 0),A(this,"_loaderId",void 0),A(this,"_isLoaded",void 0),A(this,"_isCancelled",void 0),A(this,"_needsReload",void 0),A(this,"_bbox",void 0),this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(e){this._bbox||(this._bbox=e,"west"in e?this.boundingBox=[[e.west,e.south],[e.east,e.north]]:this.boundingBox=[[e.left,e.top],[e.right,e.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return!!this._loader&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){let e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error("byteLength not defined in tile data"),e}async _loadData({getData:e,requestScheduler:n,onLoad:i,onError:a}){let{index:o,id:s,bbox:l,userData:c,zoom:u}=this,d=this._loaderId;this._abortController=new AbortController;let{signal:f}=this._abortController,p=await n.scheduleRequest(this,_=>_.isSelected?1:-1);if(!p){this._isCancelled=!0;return}if(this._isCancelled){p.done();return}let h=null,m;try{h=await e({index:o,id:s,bbox:l,userData:c,zoom:u,signal:f})}catch(_){m=_||!0}finally{p.done()}if(d===this._loaderId){if(this._loader=void 0,this.content=h,this._isCancelled&&!h){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,m?a(m,this):i(this)}}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var e;this.isLoaded||(this._isCancelled=!0,(e=this._abortController)===null||e===void 0||e.abort())}};var An={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};var gq=new je,m9e=new je,Cc=class{constructor(e=[0,0,0],n=[0,0,0],i){A(this,"center",void 0),A(this,"halfDiagonal",void 0),A(this,"minimum",void 0),A(this,"maximum",void 0),i=i||gq.copy(e).add(n).scale(.5),this.center=new je(i),this.halfDiagonal=new je(n).subtract(this.center),this.minimum=new je(e),this.maximum=new je(n)}clone(){return new Cc(this.minimum,this.maximum,this.center)}equals(e){return this===e||!!e&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){let{halfDiagonal:n}=this,i=m9e.from(e.normal),a=n.x*Math.abs(i.x)+n.y*Math.abs(i.y)+n.z*Math.abs(i.z),o=this.center.dot(i)+e.distance;return o-a>0?An.INSIDE:o+a<0?An.OUTSIDE:An.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){let n=gq.from(e).subtract(this.center),{halfDiagonal:i}=this,a=0,o;return o=Math.abs(n.x)-i.x,o>0&&(a+=o*o),o=Math.abs(n.y)-i.y,o>0&&(a+=o*o),o=Math.abs(n.z)-i.z,o>0&&(a+=o*o),a}};var aE=new je,_q=new je,wc=class{constructor(e=[0,0,0],n=0){A(this,"center",void 0),A(this,"radius",void 0),this.radius=-0,this.center=new je,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=aE.from(n),this.center=new je().from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new wc(this.center,this.radius)}union(e){let n=this.center,i=this.radius,a=e.center,o=e.radius,s=aE.copy(a).subtract(n),l=s.magnitude();if(i>=l+o)return this.clone();if(o>=l+i)return e.clone();let c=(i+l+o)*.5;return _q.copy(s).scale((-i+c)/l).add(n),this.center.copy(_q),this.radius=c,this}expand(e){let i=aE.from(e).subtract(this.center).magnitude();return i>this.radius&&(this.radius=i),this}transform(e){this.center.transform(e);let n=g$(aE,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){let n=this.distanceTo(e);return n*n}distanceTo(e){let i=aE.from(e).subtract(this.center);return Math.max(0,i.len()-this.radius)}intersectPlane(e){let n=this.center,i=this.radius,o=e.normal.dot(n)+e.distance;return o<-i?An.OUTSIDE:o<i?An.INTERSECTING:An.INSIDE}};var g9e=new je,_9e=new je,L9=new je,O9=new je,B9=new je,E9e=new je,v9e=new je,Ic={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8},Xu=class{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){A(this,"center",void 0),A(this,"halfAxes",void 0),this.center=new je().from(e),this.halfAxes=new yr(n)}get halfSize(){let e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new je(e).len(),new je(n).len(),new je(i).len()]}get quaternion(){let e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),a=new je(e).normalize(),o=new je(n).normalize(),s=new je(i).normalize();return new pc().fromMatrix3(new yr([...a,...o,...s]))}fromCenterHalfSizeQuaternion(e,n,i){let a=new pc(i),o=new yr().fromQuaternion(a);return o[0]=o[0]*n[0],o[1]=o[1]*n[0],o[2]=o[2]*n[0],o[3]=o[3]*n[1],o[4]=o[4]*n[1],o[5]=o[5]*n[1],o[6]=o[6]*n[2],o[7]=o[7]*n[2],o[8]=o[8]*n[2],this.center=new je().from(e),this.halfAxes=o,this}clone(){return new Xu(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new wc){let n=this.halfAxes,i=n.getColumn(0,L9),a=n.getColumn(1,O9),o=n.getColumn(2,B9),s=g9e.copy(i).add(a).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){let n=this.center,i=e.normal,a=this.halfAxes,o=i.x,s=i.y,l=i.z,c=Math.abs(o*a[Ic.COLUMN0ROW0]+s*a[Ic.COLUMN0ROW1]+l*a[Ic.COLUMN0ROW2])+Math.abs(o*a[Ic.COLUMN1ROW0]+s*a[Ic.COLUMN1ROW1]+l*a[Ic.COLUMN1ROW2])+Math.abs(o*a[Ic.COLUMN2ROW0]+s*a[Ic.COLUMN2ROW1]+l*a[Ic.COLUMN2ROW2]),u=i.dot(n)+e.distance;return u<=-c?An.OUTSIDE:u>=c?An.INSIDE:An.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){let n=_9e.from(e).subtract(this.center),i=this.halfAxes,a=i.getColumn(0,L9),o=i.getColumn(1,O9),s=i.getColumn(2,B9),l=a.magnitude(),c=o.magnitude(),u=s.magnitude();a.normalize(),o.normalize(),s.normalize();let d=0,f;return f=Math.abs(n.dot(a))-l,f>0&&(d+=f*f),f=Math.abs(n.dot(o))-c,f>0&&(d+=f*f),f=Math.abs(n.dot(s))-u,f>0&&(d+=f*f),d}computePlaneDistances(e,n,i=[-0,-0]){let a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=this.center,l=this.halfAxes,c=l.getColumn(0,L9),u=l.getColumn(1,O9),d=l.getColumn(2,B9),f=E9e.copy(c).add(u).add(d).add(s),p=v9e.copy(f).subtract(e),h=n.dot(p);return a=Math.min(h,a),o=Math.max(h,o),f.copy(s).add(c).add(u).subtract(d),p.copy(f).subtract(e),h=n.dot(p),a=Math.min(h,a),o=Math.max(h,o),f.copy(s).add(c).subtract(u).add(d),p.copy(f).subtract(e),h=n.dot(p),a=Math.min(h,a),o=Math.max(h,o),f.copy(s).add(c).subtract(u).subtract(d),p.copy(f).subtract(e),h=n.dot(p),a=Math.min(h,a),o=Math.max(h,o),s.copy(f).subtract(c).add(u).add(d),p.copy(f).subtract(e),h=n.dot(p),a=Math.min(h,a),o=Math.max(h,o),s.copy(f).subtract(c).add(u).subtract(d),p.copy(f).subtract(e),h=n.dot(p),a=Math.min(h,a),o=Math.max(h,o),s.copy(f).subtract(c).subtract(u).add(d),p.copy(f).subtract(e),h=n.dot(p),a=Math.min(h,a),o=Math.max(h,o),s.copy(f).subtract(c).subtract(u).subtract(d),p.copy(f).subtract(e),h=n.dot(p),a=Math.min(h,a),o=Math.max(h,o),i[0]=a,i[1]=o,i}transform(e){this.center.transformAsPoint(e);let n=this.halfAxes.getColumn(0,L9);n.transformAsPoint(e);let i=this.halfAxes.getColumn(1,O9);i.transformAsPoint(e);let a=this.halfAxes.getColumn(2,B9);return a.transformAsPoint(e),this.halfAxes=new yr([...n,...i,...a]),this}getTransform(){throw new Error("not implemented")}};var Eq=new je,vq=new je,uo=class{constructor(e=[0,0,1],n=0){A(this,"normal",void 0),A(this,"distance",void 0),this.normal=new je,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return ys(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=Eq.from(e),this.normal.from(n).normalize();let i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,a){return this.normal.set(e,n,i),ys(Kn(this.normal.len(),1)),this.distance=a,this}clone(){return new uo(this.normal,this.distance)}equals(e){return Kn(this.distance,e.distance)&&Kn(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){let n=vq.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=Eq.from(e);let i=this.getPointDistance(e),a=vq.copy(this.normal).scale(i);return e.subtract(a).to(n)}};var yq=[new je([1,0,0]),new je([0,1,0]),new je([0,0,1])],xq=new je,y9e=new je,f_t=new uo(new je(1,0,0),0),pa=class{constructor(e=[]){A(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*yq.length;let n=e.center,i=e.radius,a=0;for(let o of yq){let s=this.planes[a],l=this.planes[a+1];s||(s=this.planes[a]=new uo),l||(l=this.planes[a+1]=new uo);let c=xq.copy(o).scale(-i).add(n),u=-o.dot(c);s.fromPointNormal(c,o);let d=xq.copy(o).scale(i).add(n),f=y9e.copy(o).negate(),p=-f.dot(d);l.fromPointNormal(d,f),a+=2}return this}computeVisibility(e){let n=An.INSIDE;for(let i of this.planes)switch(e.intersectPlane(i)){case An.OUTSIDE:return An.OUTSIDE;case An.INTERSECTING:n=An.INTERSECTING;break;default:}return n}computeVisibilityWithPlaneMask(e,n){if(ys(Number.isFinite(n),"parentPlaneMask is required."),n===pa.MASK_OUTSIDE||n===pa.MASK_INSIDE)return n;let i=pa.MASK_INSIDE,a=this.planes;for(let o=0;o<this.planes.length;++o){let s=o<31?1<<o:0;if(o<31&&!(n&s))continue;let l=a[o],c=e.intersectPlane(l);if(c===An.OUTSIDE)return pa.MASK_OUTSIDE;c===An.INTERSECTING&&(i|=s)}return i}};A(pa,"MASK_OUTSIDE",4294967295);A(pa,"MASK_INSIDE",0);A(pa,"MASK_INDETERMINATE",2147483647);var E_t=new je,v_t=new je,y_t=new je,x_t=new je,b_t=new je;var I_t=new je,R_t=new je,P_t=new je,M_t=new je,L_t=new je,O_t=new je,B_t=new je,D_t=new je,F_t=new je,k_t=new je,G_t=new je,U_t=new je,V_t=4/3*Math.PI;var Al=new yr,b9e=new yr,S9e=new yr,D9=new yr,bq=new yr;function F9(t,e={}){let n=o5.EPSILON20,i=10,a=0,o=0,s=b9e,l=S9e;s.identity(),l.copy(t);let c=n*N9e(l);for(;o<i&&A9e(l)>c;)T9e(l,D9),bq.copy(D9).transpose(),l.multiplyRight(D9),l.multiplyLeft(bq),s.multiplyRight(D9),++a>2&&(++o,a=0);return e.unitary=s.toTarget(e.unitary),e.diagonal=l.toTarget(e.diagonal),e}function N9e(t){let e=0;for(let n=0;n<9;++n){let i=t[n];e+=i*i}return Math.sqrt(e)}var OC=[1,0,0],BC=[2,2,1];function A9e(t){let e=0;for(let n=0;n<3;++n){let i=t[Al.getElementIndex(BC[n],OC[n])];e+=2*i*i}return Math.sqrt(e)}function T9e(t,e){let n=o5.EPSILON15,i=0,a=1;for(let u=0;u<3;++u){let d=Math.abs(t[Al.getElementIndex(BC[u],OC[u])]);d>i&&(a=u,i=d)}let o=OC[a],s=BC[a],l=1,c=0;if(Math.abs(t[Al.getElementIndex(s,o)])>n){let u=t[Al.getElementIndex(s,s)],d=t[Al.getElementIndex(o,o)],f=t[Al.getElementIndex(s,o)],p=(u-d)/2/f,h;p<0?h=-1/(-p+Math.sqrt(1+p*p)):h=1/(p+Math.sqrt(1+p*p)),l=1/Math.sqrt(1+h*h),c=h*l}return yr.IDENTITY.to(e),e[Al.getElementIndex(o,o)]=e[Al.getElementIndex(s,s)]=l,e[Al.getElementIndex(s,o)]=c,e[Al.getElementIndex(o,s)]=-c,e}var qu=new je,C9e=new je,w9e=new je,I9e=new je,R9e=new je,P9e=new yr,M9e={diagonal:new yr,unitary:new yr};function DC(t,e=new Xu){if(!t||t.length===0)return e.halfAxes=new yr([0,0,0,0,0,0,0,0,0]),e.center=new je,e;let n=t.length,i=new je(0,0,0);for(let R of t)i.add(R);let a=1/n;i.multiplyByScalar(a);let o=0,s=0,l=0,c=0,u=0,d=0;for(let R of t){let L=qu.copy(R).subtract(i);o+=L.x*L.x,s+=L.x*L.y,l+=L.x*L.z,c+=L.y*L.y,u+=L.y*L.z,d+=L.z*L.z}o*=a,s*=a,l*=a,c*=a,u*=a,d*=a;let f=P9e;f[0]=o,f[1]=s,f[2]=l,f[3]=s,f[4]=c,f[5]=u,f[6]=l,f[7]=u,f[8]=d;let{unitary:p}=F9(f,M9e),h=e.halfAxes.copy(p),m=h.getColumn(0,w9e),_=h.getColumn(1,I9e),E=h.getColumn(2,R9e),v=-Number.MAX_VALUE,y=-Number.MAX_VALUE,x=-Number.MAX_VALUE,S=Number.MAX_VALUE,N=Number.MAX_VALUE,w=Number.MAX_VALUE;for(let R of t)qu.copy(R),v=Math.max(qu.dot(m),v),y=Math.max(qu.dot(_),y),x=Math.max(qu.dot(E),x),S=Math.min(qu.dot(m),S),N=Math.min(qu.dot(_),N),w=Math.min(qu.dot(E),w);m=m.multiplyByScalar(.5*(S+v)),_=_.multiplyByScalar(.5*(N+y)),E=E.multiplyByScalar(.5*(w+x)),e.center.copy(m).add(_).add(E);let T=C9e.set(v-S,y-N,x-w).multiplyByScalar(.5),I=new yr([T[0],0,0,0,T[1],0,0,0,T[2]]);return e.halfAxes.multiplyRight(I),e}var y0=512,Sq=3,Nq=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],Aq=Nq.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),L9e=Aq.concat([[.25,.5],[.75,.5]]),Ku=class{constructor(e,n,i){A(this,"x",void 0),A(this,"y",void 0),A(this,"z",void 0),A(this,"childVisible",void 0),A(this,"selected",void 0),A(this,"_children",void 0),this.x=e,this.y=n,this.z=i}get children(){if(!this._children){let e=this.x*2,n=this.y*2,i=this.z+1;this._children=[new Ku(e,n,i),new Ku(e,n+1,i),new Ku(e+1,n,i),new Ku(e+1,n+1,i)]}return this._children}update(e){let{viewport:n,cullingVolume:i,elevationBounds:a,minZ:o,maxZ:s,bounds:l,offset:c,project:u}=e,d=this.getBoundingVolume(a,c,u);if(l&&!this.insideBounds(l)||i.computeVisibility(d)<0)return!1;if(!this.childVisible){let{z:p}=this;if(p<s&&p>=o){let h=d.distanceTo(n.cameraPosition)*n.scale/n.height;p+=Math.floor(Math.log2(h))}if(p>=s)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(let p of this.children)p.update(e);return!0}getSelected(e=[]){if(this.selected&&e.push(this),this._children)for(let n of this._children)n.getSelected(e);return e}insideBounds([e,n,i,a]){let o=Math.pow(2,this.z),s=y0/o;return this.x*s<i&&this.y*s<a&&(this.x+1)*s>e&&(this.y+1)*s>n}getBoundingVolume(e,n,i){if(i){let c=this.z<1?L9e:this.z<2?Aq:Nq,u=[];for(let d of c){let f=k9(this.x+d[0],this.y+d[1],this.z);f[2]=e[0],u.push(i(f)),e[0]!==e[1]&&(f[2]=e[1],u.push(i(f)))}return DC(u)}let a=Math.pow(2,this.z),o=y0/a,s=this.x*o+n*y0,l=y0-(this.y+1)*o;return new Cc([s,l,e[0]],[s+o,l+o,e[1]])}};function Tq(t,e,n,i){let a=t instanceof qh&&t.resolution?t.projectPosition:null,o=Object.values(t.getFrustumPlanes()).map(({normal:h,distance:m})=>new uo(h.clone().negate(),m)),s=new pa(o),l=t.distanceScales.unitsPerMeter[2],c=n&&n[0]*l||0,u=n&&n[1]*l||0,d=t instanceof Pi&&t.pitch<=60?e:0;if(i){let[h,m,_,E]=i,v=Fo([h,E]),y=Fo([_,m]);i=[v[0],y0-v[1],y[0],y0-y[1]]}let f=new Ku(0,0,0),p={viewport:t,project:a,cullingVolume:s,elevationBounds:[c,u],minZ:d,maxZ:e,bounds:i,offset:0};if(f.update(p),t instanceof Pi&&t.subViewports&&t.subViewports.length>1){for(p.offset=-1;f.update(p)&&!(--p.offset<-Sq););for(p.offset=1;f.update(p)&&!(++p.offset>Sq););}return f.getSelected()}var Rc=512,O9e=[-1/0,-1/0,1/0,1/0],kC={type:"object",value:null,validate:(t,e)=>e.optional&&t===null||typeof t=="string"||Array.isArray(t)&&t.every(n=>typeof n=="string"),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;let n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}};function wq(t,e){let n=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...n.map(a=>a[0])),Math.min(...n.map(a=>a[1])),Math.max(...n.map(a=>a[0])),Math.max(...n.map(a=>a[1]))]}function B9e(t){return Math.abs(t.split("").reduce((e,n)=>(e<<5)-e+n.charCodeAt(0)|0,0))}function GC(t,e){if(!t||!t.length)return null;let{index:n,id:i}=e;if(Array.isArray(t)){let o=B9e(i)%t.length;t=t[o]}let a=t;for(let o of Object.keys(n)){let s=new RegExp("{".concat(o,"}"),"g");a=a.replace(s,String(n[o]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(a=a.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),a}function D9e(t,e,n){let i;if(e&&e.length===2){let[a,o]=e,s=t.getBounds({z:a}),l=t.getBounds({z:o});i=[Math.min(s[0],l[0]),Math.min(s[1],l[1]),Math.max(s[2],l[2]),Math.max(s[3],l[3])]}else i=t.getBounds();return t.isGeospatial?[Math.max(i[0],n[0]),Math.max(i[1],n[1]),Math.min(i[2],n[2]),Math.min(i[3],n[3])]:[Math.max(Math.min(i[0],n[2]),n[0]),Math.max(Math.min(i[1],n[3]),n[1]),Math.min(Math.max(i[2],n[0]),n[2]),Math.min(Math.max(i[3],n[1]),n[3])]}function Iq({viewport:t,z:e=0,cullRect:n}){return(t.subViewports||[t]).map(a=>FC(a,e,n))}function FC(t,e,n){if(!Array.isArray(e)){let o=n.x-t.x,s=n.y-t.y,{width:l,height:c}=n,u={targetZ:e},d=t.unproject([o,s],u),f=t.unproject([o+l,s],u),p=t.unproject([o,s+c],u),h=t.unproject([o+l,s+c],u);return[Math.min(d[0],f[0],p[0],h[0]),Math.min(d[1],f[1],p[1],h[1]),Math.max(d[0],f[0],p[0],h[0]),Math.max(d[1],f[1],p[1],h[1])]}let i=FC(t,e[0],n),a=FC(t,e[1],n);return[Math.min(i[0],a[0]),Math.min(i[1],a[1]),Math.max(i[2],a[2]),Math.max(i[3],a[3])]}function F9e(t,e,n){return n?wq(t,n).map(a=>a*e/Rc):t.map(i=>i*e/Rc)}function UC(t,e){return Math.pow(2,t)*Rc/e}function k9(t,e,n){let i=UC(n,Rc),a=t/i*360-180,o=Math.PI-2*Math.PI*e/i,s=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[a,s]}function Cq(t,e,n,i){let a=UC(n,i);return[t/a*Rc,e/a*Rc]}function VC(t,e,n,i,a=Rc){if(t.isGeospatial){let[u,d]=k9(e,n,i),[f,p]=k9(e+1,n+1,i);return{west:u,north:d,east:f,south:p}}let[o,s]=Cq(e,n,i,a),[l,c]=Cq(e+1,n+1,i,a);return{left:o,top:s,right:l,bottom:c}}function k9e(t,e,n,i,a){let o=D9e(t,null,i),s=UC(e,n),[l,c,u,d]=F9e(o,s,a),f=[];for(let p=Math.floor(l);p<u;p++)for(let h=Math.floor(c);h<d;h++)f.push({x:p,y:h,z:e});return f}function $C({viewport:t,maxZoom:e,minZoom:n,zRange:i,extent:a,tileSize:o=Rc,modelMatrix:s,modelMatrixInverse:l,zoomOffset:c=0}){let u=t.isGeospatial?Math.round(t.zoom+Math.log2(Rc/o))+c:Math.ceil(t.zoom)+c;if(typeof n=="number"&&Number.isFinite(n)&&u<n){if(!a)return[];u=n}typeof e=="number"&&Number.isFinite(e)&&u>e&&(u=e);let d=a;return s&&l&&a&&!t.isGeospatial&&(d=wq(a,s)),t.isGeospatial?Tq(t,u,i,a):k9e(t,u,o,d||O9e,l)}function Rq(t){let e={},n;return i=>{for(let a in i)if(!G9e(i[a],e[a])){n=t(i),e=i;break}return n}}function G9e(t,e){if(t===e)return!0;if(Array.isArray(t)){let n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}var Pq=1,G9=2,U9e="never",V9e="no-overlap",sE="best-available",$9e=5,z9e={[sE]:H9e,[V9e]:W9e,[U9e]:()=>{}},j9e={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}},oE=class{constructor(e){A(this,"opts",void 0),A(this,"_requestScheduler",void 0),A(this,"_cache",void 0),A(this,"_dirty",void 0),A(this,"_tiles",void 0),A(this,"_cacheByteSize",void 0),A(this,"_viewport",void 0),A(this,"_zRange",void 0),A(this,"_selectedTiles",void 0),A(this,"_frameNumber",void 0),A(this,"_modelMatrix",void 0),A(this,"_modelMatrixInverse",void 0),A(this,"_maxZoom",void 0),A(this,"_minZoom",void 0),A(this,"onTileLoad",void 0),A(this,"_getCullBounds",Rq(Iq)),this.opts={...j9e,...e},this.onTileLoad=n=>{var i,a;(i=(a=this.opts).onTileLoad)===null||i===void 0||i.call(a,n),this.opts.maxCacheByteSize&&(this._cacheByteSize+=n.byteLength,this._resizeCache())},this._requestScheduler=new v0({maxRequests:e.maxRequests,throttleRequests:!!(e.maxRequests&&e.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new zt,this._modelMatrixInverse=new zt,this.setOptions(e)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(e=>e.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(e=>e.needsReload)}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(let e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(let e of this._cache.keys()){let n=this._cache.get(e);!this._selectedTiles||!this._selectedTiles.includes(n)?this._cache.delete(e):n.setNeedsReload()}}update(e,{zRange:n,modelMatrix:i}={}){let a=new zt(i),o=!a.equals(this._modelMatrix);if(!this._viewport||!e.equals(this._viewport)||!Kn(this._zRange,n)||o){o&&(this._modelMatrixInverse=a.clone().invert(),this._modelMatrix=a),this._viewport=e,this._zRange=n;let l=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:n,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=l.map(c=>this._getTile(c,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(l=>this._getTile(l.index,!0)));let s=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),s&&this._frameNumber++,this._frameNumber}isTileVisible(e,n){if(!e.isVisible)return!1;if(n&&this._viewport){let i=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:n}),{bbox:a}=e;for(let[o,s,l,c]of i){let u;if("west"in a)u=a.west<l&&a.east>o&&a.south<c&&a.north>s;else{let d=Math.min(a.top,a.bottom),f=Math.max(a.top,a.bottom);u=a.left<l&&a.right>o&&d<c&&f>s}if(u)return!0}return!1}return!0}getTileIndices({viewport:e,maxZoom:n,minZoom:i,zRange:a,modelMatrix:o,modelMatrixInverse:s}){let{tileSize:l,extent:c,zoomOffset:u}=this.opts;return $C({viewport:e,maxZoom:n,minZoom:i,zRange:a,tileSize:l,extent:c,modelMatrix:o,modelMatrixInverse:s,zoomOffset:u})}getTileId(e){return"".concat(e.x,"-").concat(e.y,"-").concat(e.z)}getTileZoom(e){return e.z}getTileMetadata(e){let{tileSize:n}=this.opts;return{bbox:VC(this._viewport,e.x,e.y,e.z,n)}}getParentIndex(e){let n=Math.floor(e.x/2),i=Math.floor(e.y/2),a=e.z-1;return{x:n,y:i,z:a}}updateTileStates(){let e=this.opts.refinementStrategy||sE,n=new Array(this._cache.size),i=0;for(let a of this._cache.values())n[i++]=a.isVisible,a.isSelected=!1,a.isVisible=!1;for(let a of this._selectedTiles)a.isSelected=!0,a.isVisible=!0;(typeof e=="function"?e:z9e[e])(Array.from(this._cache.values())),i=0;for(let a of this._cache.values())if(n[i++]!==a.isVisible)return!0;return!1}_pruneRequests(){let{maxRequests:e=0}=this.opts,n=[],i=0;for(let a of this._cache.values())a.isLoading&&(i++,!a.isSelected&&!a.isVisible&&n.push(a));for(;e>0&&i>e&&n.length>0;)n.shift().abort(),i--}_rebuildTree(){let{_cache:e}=this;for(let n of e.values())n.parent=null,n.children&&(n.children.length=0);for(let n of e.values()){let i=this._getNearestAncestor(n);n.parent=i,i!=null&&i.children&&i.children.push(n)}}_resizeCache(){let{_cache:e,opts:n}=this,i=n.maxCacheSize||(n.maxCacheByteSize?1/0:$9e*this.selectedTiles.length),a=n.maxCacheByteSize||1/0;if(e.size>i||this._cacheByteSize>a){for(let[c,u]of e){if(!u.isVisible&&!u.isSelected){var s,l;this._cacheByteSize-=n.maxCacheByteSize?u.byteLength:0,e.delete(c),(s=(l=this.opts).onTileUnload)===null||s===void 0||s.call(l,u)}if(e.size<=i&&this._cacheByteSize<=a)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((c,u)=>c.zoom-u.zoom),this._dirty=!1)}_getTile(e,n){let i=this.getTileId(e),a=this._cache.get(i),o=!1;return!a&&n?(a=new M9(e),Object.assign(a,this.getTileMetadata(a.index)),Object.assign(a,{id:i,zoom:this.getTileZoom(a.index)}),o=!0,this._cache.set(i,a),this._dirty=!0):a&&a.needsReload&&(o=!0),a&&o&&a.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),a}_getNearestAncestor(e){let{_minZoom:n=0}=this,i=e.index;for(;this.getTileZoom(i)>n;){i=this.getParentIndex(i);let a=this._getTile(i);if(a)return a}return null}};function H9e(t){for(let e of t)e.state=0;for(let e of t)e.isSelected&&!Mq(e)&&zC(e);for(let e of t)e.isVisible=!!(e.state&G9)}function W9e(t){for(let n of t)n.state=0;for(let n of t)n.isSelected&&Mq(n);let e=Array.from(t).sort((n,i)=>n.zoom-i.zoom);for(let n of e)if(n.isVisible=!!(n.state&G9),n.children&&(n.isVisible||n.state&Pq))for(let i of n.children)i.state=Pq;else n.isSelected&&zC(n)}function Mq(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=G9,!0;e=e.parent}return!1}function zC(t){for(let e of t.children)e.isLoaded||e.content?e.state|=G9:zC(e)}var Z9e={TilesetClass:oE,data:{type:"data",value:[]},dataComparator:kC.equal,renderSubLayers:{type:"function",value:t=>new Hu(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:sE,zRange:null,maxRequests:6,zoomOffset:0},Yu=class extends lo{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e,n;(e=this.state)===null||e===void 0||(n=e.tileset)===null||n===void 0||n.finalize()}get isLoaded(){var e,n,i;return(e=this.state)===null||e===void 0||(n=e.tileset)===null||n===void 0||(i=n.selectedTiles)===null||i===void 0?void 0:i.every(a=>a.isLoaded&&a.layers&&a.layers.every(o=>o.isLoaded))}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({changeFlags:e}){let{tileset:n}=this.state,i=e.propsOrDataChanged||e.updateTriggersChanged,a=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);n?i&&(n.setOptions(this._getTilesetOptions()),a?n.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){let{tileSize:e,maxCacheSize:n,maxCacheByteSize:i,refinementStrategy:a,extent:o,maxZoom:s,minZoom:l,maxRequests:c,zoomOffset:u}=this.props;return{maxCacheSize:n,maxCacheByteSize:i,maxZoom:s,minZoom:l,tileSize:e,refinementStrategy:a,extent:o,maxRequests:c,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){let{tileset:e}=this.state,{zRange:n,modelMatrix:i}=this.props,a=e.update(this.context.viewport,{zRange:n,modelMatrix:i}),{isLoaded:o}=e,s=this.state.isLoaded!==o,l=this.state.frameNumber!==a;o&&(s||l)&&this._onViewportLoad(),l&&this.setState({frameNumber:a}),this.state.isLoaded=o}_onViewportLoad(){let{tileset:e}=this.state,{onViewportLoad:n}=this.props;n&&n(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,n){this.props.onTileError(e),n.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){let{data:n,getTileData:i,fetch:a}=this.props,{signal:o}=e;return e.url=typeof n=="string"||Array.isArray(n)?GC(n,e):null,i?i(e):a&&e.url?a(e.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo({info:e,sourceLayer:n}){let i=n.props.tile;return e.picked&&(e.tile=i),e.sourceTile=i,e}_updateAutoHighlight(e){let n=e.sourceTile;if(n&&n.layers)for(let i of n.layers)i.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map(e=>{let n=this.getSubLayerPropsByTile(e);if(!(!e.isLoaded&&!e.content))if(e.layers)n&&e.layers[0]&&Object.keys(n).some(i=>e.layers[0].props[i]!==n[i])&&(e.layers=e.layers.map(i=>i.clone(n)));else{let i=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:e.id,updateTriggers:this.props.updateTriggers}),data:e.content,_offset:0,tile:e});e.layers=gc(i,Boolean).map(a=>a.clone({tile:e,...n}))}return e.layers})}filterSubLayer({layer:e,cullRect:n}){let{tile:i}=e.props;return this.state.tileset.isTileVisible(i,n)}};A(Yu,"defaultProps",Z9e);A(Yu,"layerName","TileLayer");var jC=Math.PI/180,U9=new Float32Array(16),Lq=new Float32Array(12);function Oq(t,e,n){let i=e[0]*jC,a=e[1]*jC,o=e[2]*jC,s=Math.sin(o),l=Math.sin(i),c=Math.sin(a),u=Math.cos(o),d=Math.cos(i),f=Math.cos(a),p=n[0],h=n[1],m=n[2];t[0]=p*f*d,t[1]=p*c*d,t[2]=p*-l,t[3]=h*(-c*u+f*l*s),t[4]=h*(f*u+c*l*s),t[5]=h*d*s,t[6]=m*(c*s+f*l*u),t[7]=m*(-f*s+c*l*u),t[8]=m*d*u}function Bq(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var Dq={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){let{data:i,getOrientation:a,getScale:o,getTranslation:s,getTransformMatrix:l}=this.props,c=Array.isArray(l),u=c&&l.length===16,d=Array.isArray(o),f=Array.isArray(a),p=Array.isArray(s),h=u||!c&&!!l(i[0]);h?t.constant=u:t.constant=f&&d&&p;let m=t.value;if(t.constant){let _;h?(U9.set(l),_=Bq(U9)):(_=Lq,Oq(_,a,o),_.set(s,9)),t.value=new Float32Array(_)}else{let _=e*t.size,{iterable:E,objectInfo:v}=so(i,e,n);for(let y of E){v.index++;let x;if(h)U9.set(u?l:l(y,v)),x=Bq(U9);else{x=Lq;let S=f?a:a(y,v),N=d?o:o(y,v);Oq(x,S,N),x.set(p?s:s(y,v),9)}m[_++]=x[0],m[_++]=x[1],m[_++]=x[2],m[_++]=x[3],m[_++]=x[4],m[_++]=x[5],m[_++]=x[6],m[_++]=x[7],m[_++]=x[8],m[_++]=x[9],m[_++]=x[10],m[_++]=x[11]}}}};function Fq(t,e){return e===_t.CARTESIAN||e===_t.METER_OFFSETS||e===_t.DEFAULT&&!t.isGeospatial}function HC(t){let e=1/0,n=1/0,i=1/0,a=-1/0,o=-1/0,s=-1/0,l=t.POSITION?t.POSITION.value:[],c=l&&l.length;for(let u=0;u<c;u+=3){let d=l[u],f=l[u+1],p=l[u+2];e=d<e?d:e,n=f<n?f:n,i=p<i?p:i,a=d>a?d:a,o=f>o?f:o,s=p>s?p:s}return[[e,n,i],[a,o,s]]}function kq(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var fo=class{constructor(e,n){A(this,"fields",void 0),A(this,"metadata",void 0),kq(Array.isArray(e)),X9e(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(){let e=Object.create(null);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];for(let s of i)e[s]=!0;let o=this.fields.filter(s=>e[s.name]);return new fo(o,this.metadata)}selectAt(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];let a=n.map(o=>this.fields[o]).filter(Boolean);return new fo(a,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof fo){let s=e;n=s.fields,i=Gq(Gq(new Map,this.metadata),s.metadata)}else n=e;let a=Object.create(null);for(let s of this.fields)a[s.name]=s;for(let s of n)a[s.name]=s;let o=Object.values(a);return new fo(o,i)}};function X9e(t){let e={};for(let n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}function Gq(t,e){return new Map([...t||new Map,...e||new Map])}var Tl=class{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Map;A(this,"name",void 0),A(this,"type",void 0),A(this,"nullable",void 0),A(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=a}get typeId(){return this.type&&this.type.typeId}clone(){return new Tl(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}};var lr=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({});var Uq,Vq,$q,zq,jq,Hq,Wq,Zq,Wi=class{static isNull(e){return e&&e.typeId===lr.Null}static isInt(e){return e&&e.typeId===lr.Int}static isFloat(e){return e&&e.typeId===lr.Float}static isBinary(e){return e&&e.typeId===lr.Binary}static isUtf8(e){return e&&e.typeId===lr.Utf8}static isBool(e){return e&&e.typeId===lr.Bool}static isDecimal(e){return e&&e.typeId===lr.Decimal}static isDate(e){return e&&e.typeId===lr.Date}static isTime(e){return e&&e.typeId===lr.Time}static isTimestamp(e){return e&&e.typeId===lr.Timestamp}static isInterval(e){return e&&e.typeId===lr.Interval}static isList(e){return e&&e.typeId===lr.List}static isStruct(e){return e&&e.typeId===lr.Struct}static isUnion(e){return e&&e.typeId===lr.Union}static isFixedSizeBinary(e){return e&&e.typeId===lr.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===lr.FixedSizeList}static isMap(e){return e&&e.typeId===lr.Map}static isDictionary(e){return e&&e.typeId===lr.Dictionary}get typeId(){return lr.NONE}compareTo(e){return this===e}},V9=class extends Wi{get typeId(){return lr.Null}get[Symbol.toStringTag](){return"Null"}toString(){return"Null"}},$9=class extends Wi{get typeId(){return lr.Bool}get[Symbol.toStringTag](){return"Bool"}toString(){return"Bool"}};Uq=Symbol.toStringTag;var Cl=class extends Wi{constructor(e,n){super(),A(this,"isSigned",void 0),A(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return lr.Int}get[Uq](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}},x0=class extends Cl{constructor(){super(!0,8)}},b0=class extends Cl{constructor(){super(!0,16)}},S0=class extends Cl{constructor(){super(!0,32)}};var N0=class extends Cl{constructor(){super(!1,8)}},A0=class extends Cl{constructor(){super(!1,16)}},T0=class extends Cl{constructor(){super(!1,32)}};var Xq={HALF:16,SINGLE:32,DOUBLE:64};Vq=Symbol.toStringTag;var C0=class extends Wi{constructor(e){super(),A(this,"precision",void 0),this.precision=e}get typeId(){return lr.Float}get[Vq](){return"Float"}toString(){return"Float".concat(this.precision)}};var w0=class extends C0{constructor(){super(Xq.SINGLE)}},I0=class extends C0{constructor(){super(Xq.DOUBLE)}},z9=class extends Wi{constructor(){super()}get typeId(){return lr.Binary}toString(){return"Binary"}get[Symbol.toStringTag](){return"Binary"}},j9=class extends Wi{get typeId(){return lr.Utf8}get[Symbol.toStringTag](){return"Utf8"}toString(){return"Utf8"}},q9e={DAY:0,MILLISECOND:1};$q=Symbol.toStringTag;var H9=class extends Wi{constructor(e){super(),A(this,"unit",void 0),this.unit=e}get typeId(){return lr.Date}get[$q](){return"Date"}toString(){return"Date".concat((this.unit+1)*32,"<").concat(q9e[this.unit],">")}};var qq={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};zq=Symbol.toStringTag;var W9=class extends Wi{constructor(e,n){super(),A(this,"unit",void 0),A(this,"bitWidth",void 0),this.unit=e,this.bitWidth=n}get typeId(){return lr.Time}toString(){return"Time".concat(this.bitWidth,"<").concat(qq[this.unit],">")}get[zq](){return"Time"}};jq=Symbol.toStringTag;var Z9=class extends Wi{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(),A(this,"unit",void 0),A(this,"timezone",void 0),this.unit=e,this.timezone=n}get typeId(){return lr.Timestamp}get[jq](){return"Timestamp"}toString(){return"Timestamp<".concat(qq[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}};var K9e={DAY_TIME:0,YEAR_MONTH:1};Hq=Symbol.toStringTag;var X9=class extends Wi{constructor(e){super(),A(this,"unit",void 0),this.unit=e}get typeId(){return lr.Interval}get[Hq](){return"Interval"}toString(){return"Interval<".concat(K9e[this.unit],">")}};Wq=Symbol.toStringTag;var R0=class extends Wi{constructor(e,n){super(),A(this,"listSize",void 0),A(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return lr.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[Wq](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}};Zq=Symbol.toStringTag;var q9=class extends Wi{constructor(e){super(),A(this,"children",void 0),this.children=e}get typeId(){return lr.Struct}toString(){return"Struct<{".concat(this.children.map(e=>"".concat(e.name,":").concat(e.type)).join(", "),"}>")}get[Zq](){return"Struct"}};function Kq(t){switch(t.constructor){case Int8Array:return new x0;case Uint8Array:return new N0;case Int16Array:return new b0;case Uint16Array:return new A0;case Int32Array:return new S0;case Uint32Array:return new T0;case Float32Array:return new w0;case Float64Array:return new I0;default:throw new Error("array type not supported")}}function WC(t,e,n){let i=Kq(e.value),a=n||Yq(e);return new Tl(t,new R0(e.size,new Tl("value",i)),!1,a)}function Yq(t){let e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}var po=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n}=e;this.id=n||Xn(this.constructor.name),this.display=!0,this.position=new je,this.rotation=new je,this.scale=new je(1,1,1),this.matrix=new zt,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Oe(e.length===3,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Oe(e.length===3,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Oe(e.length===3,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?this.matrix.copy(e):this.matrix=e}setMatrixComponents(e){let{position:n,rotation:i,scale:a,update:o=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),a&&this.setScale(a),o&&this.updateMatrix(),this}updateMatrix(){let e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{position:n,rotation:i,scale:a}=e;return n&&this.setPosition(n),i&&this.setRotation(i),a&&this.setScale(a),this.updateMatrix(),this}getCoordinateUniforms(e,n){Oe(e),n=n||this.matrix;let i=new zt(e).multiplyRight(n),a=i.invert(),o=a.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:a,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}};var Pc=class extends po{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;let{children:n=[]}=e;We.assert(n.every(i=>i instanceof po),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(let a of n)Array.isArray(a)?this.add(...a):this.children.push(a);return this}remove(e){let n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){let e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:a}=i,o=n.getBounds();if(!o)return;let[s,l]=o,c=new je(s).add(l).divide([2,2,2]);a.transformAsPoint(c,c);let u=new je(l).subtract(s).divide([2,2,2]);a.transformAsVector(u,u);for(let d=0;d<8;d++){let f=new je(d&1?-1:1,d&2?-1:1,d&4?-1:1).multiply(u).add(c);for(let p=0;p<3;p++)e[0][p]=Math.min(e[0][p],f[p]),e[1][p]=Math.max(e[1][p],f[p])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new zt}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=new zt(n).multiplyRight(this.matrix);for(let a of this.children)a instanceof Pc?a.traverse(e,{worldMatrix:i}):e(a,{worldMatrix:i})}};var uye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},dye={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Jq(t){if(!t._animation){let e=dye[t.componentType],n=uye[t.type],i=n*t.count,{buffer:a,byteOffset:o}=t.bufferView.data,s=new e(a,o+(t.byteOffset||0),i);if(n===1)t._animation=Array.from(s);else{let l=[];for(let c=0;c<s.length;c+=n)l.push(Array.from(s.slice(c,c+n)));t._animation=l}}return t._animation}var fye=new zt;function pye(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){let n=fye.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}var ZC=new pc;function hye(t,e,n,i,a){if(e==="rotation"){ZC.slerp({start:n,target:i,ratio:a});for(let o=0;o<ZC.length;o++)t[e][o]=ZC[o]}else for(let o=0;o<n.length;o++)t[e][o]=a*i[o]+(1-a)*n[o]}function mye(t,e,n){let{p0:i,outTangent0:a,inTangent1:o,p1:s,tDiff:l,ratio:c}=n;for(let u=0;u<t[e].length;u++){let d=a[u]*l,f=o[u]*l;t[e][u]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[u]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*d+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[u]+(Math.pow(c,3)-Math.pow(c,2))*f}}function gye(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}function _ye(t,e,n,i){let{input:a,interpolation:o,output:s}=e,l=a[a.length-1],c=t%l,u=a.findIndex(h=>h>=c),d=Math.max(0,u-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:We.warn("Bad animation path ".concat(i))()}Oe(n[i].length===s[d].length);let f=a[d],p=a[u];switch(o){case"STEP":gye(n,i,s[d]);break;case"LINEAR":if(p>f){let h=(c-f)/(p-f);hye(n,i,s[d],s[u],h)}break;case"CUBICSPLINE":if(p>f){let h=(c-f)/(p-f),m=p-f,_=s[3*d+1],E=s[3*d+2],v=s[3*u+0],y=s[3*u+1];mye(n,i,{p0:_,outTangent0:E,inTangent1:v,p1:y,tDiff:m,ratio:h})}break;default:We.warn("Interpolation ".concat(o," not supported"))();break}}var XC=class{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;let i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(a=>{let{sampler:o,target:s,path:l}=a;_ye(i,o,s,l),pye(s,s._node)})}},lE=class{constructor(e){this.animations=e.animations.map((n,i)=>{let a=n.name||"Animation-".concat(i),o=n.samplers.map(l=>{let{input:c,interpolation:u="LINEAR",output:d}=l;return{input:Jq(e.accessors[c]),interpolation:u,output:Jq(e.accessors[d])}}),s=n.channels.map(l=>{let{sampler:c,target:u}=l;return{sampler:o[c],target:e.nodes[u.node],path:u.path}});return new XC({name:a,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}};var cE=class extends po{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof wr?(this.model=e,this._setModelNodeProps(n)):this.model=new wr(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}};var uE=class{constructor(e,n){let{attributes:i,material:a,pbrDebug:o,imageBasedLightingEnvironment:s,lights:l,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Uf(e,or.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(l,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),a&&this.parseMaterial(a)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},o=e.texture.source.image,s,l={};o.compressed?(s=o,l={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};let c=new jt(this.gl,{id:e.name||e.id,parameters:{...a,...l},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...s});this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");let{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");let{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");let{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),e.alphaMode==="MASK"){let{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else e.alphaMode==="BLEND"&&(We.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}};var Eye=`
#if (__VERSION__ < 300)
  #define _attr attribute
#else
  #define _attr in
#endif

  _attr vec4 POSITION;

  #ifdef HAS_NORMALS
    _attr vec4 NORMAL;
  #endif

  #ifdef HAS_TANGENTS
    _attr vec4 TANGENT;
  #endif

  #ifdef HAS_UV
    _attr vec2 TEXCOORD_0;
  #endif

  void main(void) {
    vec4 _NORMAL = vec4(0.);
    vec4 _TANGENT = vec4(0.);
    vec2 _TEXCOORD_0 = vec2(0.);

    #ifdef HAS_NORMALS
      _NORMAL = NORMAL;
    #endif

    #ifdef HAS_TANGENTS
      _TANGENT = TANGENT;
    #endif

    #ifdef HAS_UV
      _TEXCOORD_0 = TEXCOORD_0;
    #endif

    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);
    gl_Position = u_MVPMatrix * POSITION;
  }
`,vye=`
#if (__VERSION__ < 300)
  #define fragmentColor gl_FragColor
#else
  out vec4 fragmentColor;
#endif

  void main(void) {
    fragmentColor = pbr_filterColor(vec4(0));
  }
`;function Qq(t,e){return pt(t)?`#version 300 es
`.concat(e):e}function qC(t,e){let{id:n,drawMode:i,vertexCount:a,attributes:o,modelOptions:s}=e,l=new uE(t,e);We.info(4,"createGLTFModel defines: ",l.defines)();let c=[];c.push(...l.generatedTextures),c.push(...Object.values(o).map(d=>d.buffer));let u=new cE(t,{id:n,drawMode:i,vertexCount:a,modules:[Mh],parameters:l.parameters,vs:Qq(t,Eye),fs:Qq(t,vye),managedResources:c,...s,defines:{...l.defines,...s.defines}});return u.setProps({attributes:o}),u.setUniforms(l.uniforms),u}var yye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xye={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},dE=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.options=Object.assign({},xye,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new lE(this.gltf):null}createScene(e){let i=(e.nodes||[]).map(o=>this.createNode(o));return new Pc({id:e.name||e.id,children:i})}createNode(e){if(!e._node){let i=(e.children||[]).map(o=>this.createNode(o));e.mesh&&i.push(this.createMesh(e.mesh));let a=new Pc({id:e.name||e.id,children:i});if(e.matrix)a.setMatrix(e.matrix);else{if(a.matrix.identity(),e.translation&&a.matrix.translate(e.translation),e.rotation){let o=new zt().fromQuaternion(e.rotation);a.matrix.multiplyRight(o)}e.scale&&a.matrix.scale(e.scale)}e._node=a}return e._node}createMesh(e){if(!e._mesh){let i=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),a=new Pc({id:e.name||e.id,children:i});e._mesh=a}return e._mesh}getVertexCount(e){We.warn("getVertexCount() not found")()}createPrimitive(e,n,i){let a=qC(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return a.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],a}createAttributes(e,n){let i={};return Object.keys(e).forEach(a=>{i[a]=this.createAccessor(e[a],this.createBuffer(e[a],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),We.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});let{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new Rt(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new un({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:yye[e.type]})}createSampler(e){return e}needsPOT(){return!1}};function K9(t,e,n){let i=new dE(t,n),a=i.instantiate(e),o=i.createAnimator();return{scenes:a,animator:o}}var eK="3.4.13";var tK="3.4.13";var rK="3.4.13",bye="https://unpkg.com/@loaders.gl/textures@".concat(rK,"/dist/libs/basis_encoder.wasm"),Sye="https://unpkg.com/@loaders.gl/textures@".concat(rK,"/dist/libs/basis_encoder.js"),KC;async function JC(t){let e=t.modules||{};return e.basis?e.basis:(KC=KC||Nye(t),await KC)}async function Nye(t){let e=null,n=null;return[e,n]=await Promise.all([await sl("basis_transcoder.js","textures",t),await sl("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,await Aye(e,n)}function Aye(t,e){let n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(a=>{let{BasisFile:o,initializeBasis:s}=a;s(),i({BasisFile:o})})})}var YC;async function QC(t){let e=t.modules||{};return e.basisEncoder?e.basisEncoder:(YC=YC||Tye(t),await YC)}async function Tye(t){let e=null,n=null;return[e,n]=await Promise.all([await sl(Sye,"textures",t),await sl(bye,"textures",t)]),e=e||globalThis.BASIS,await Cye(e,n)}function Cye(t,e){let n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(a=>{let{BasisFile:o,KTX2File:s,initializeBasis:l,BasisEncoder:c}=a;l(),i({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}var Ip={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919};var wye=["","WEBKIT_","MOZ_"],nK={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},Y9=null;function iK(t){if(!Y9){t=t||Iye()||void 0,Y9=new Set;for(let e of wye)for(let n in nK)if(t&&t.getExtension("".concat(e).concat(n))){let i=nK[n];Y9.add(i)}}return Y9}function Iye(){try{return document.createElement("canvas").getContext("webgl")}catch(t){return null}}var KEt=new Uint8Array([0]);var aK,oK,sK,lK,cK,uK,dK,fK;(function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"})(aK||(aK={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(oK||(oK={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(sK||(sK={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(lK||(lK={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(cK||(cK={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(uK||(uK={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(dK||(dK={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(fK||(fK={}));var ho=[171,75,84,88,32,50,48,187,13,10,26,10];function pK(t){let e=new Uint8Array(t);return!(e.byteLength<ho.length||e[0]!==ho[0]||e[1]!==ho[1]||e[2]!==ho[2]||e[3]!==ho[3]||e[4]!==ho[4]||e[5]!==ho[5]||e[6]!==ho[6]||e[7]!==ho[7]||e[8]!==ho[8]||e[9]!==ho[9]||e[10]!==ho[10]||e[11]!==ho[11])}var Rye={etc1:{basisFormat:0,compressed:!0,format:Ip.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:Ip.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:Ip.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:Ip.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:Ip.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:Ip.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function tw(t,e){if(e.basis.containerFormat==="auto"){if(pK(t)){let i=await QC(e);return hK(i.KTX2File,t,e)}let{BasisFile:n}=await JC(e);return ew(n,t,e)}switch(e.basis.module){case"encoder":let n=await QC(e);switch(e.basis.containerFormat){case"ktx2":return hK(n.KTX2File,t,e);case"basis":default:return ew(n.BasisFile,t,e)}case"transcoder":default:let{BasisFile:i}=await JC(e);return ew(i,t,e)}}function ew(t,e,n){let i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");let a=i.getNumImages(),o=[];for(let s=0;s<a;s++){let l=i.getNumLevels(s),c=[];for(let u=0;u<l;u++)c.push(Pye(i,s,u,n));o.push(c)}return o}finally{i.close(),i.delete()}}function Pye(t,e,n,i){let a=t.getImageWidth(e,n),o=t.getImageHeight(e,n),s=t.getHasAlpha(),{compressed:l,format:c,basisFormat:u}=mK(i,s),d=t.getImageTranscodedSizeInBytes(e,n,u),f=new Uint8Array(d);if(!t.transcodeImage(f,e,n,u,0,0))throw new Error("failed to start Basis transcoding");return{width:a,height:o,data:f,compressed:l,format:c,hasAlpha:s}}function hK(t,e,n){let i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");let a=i.getLevels(),o=[];for(let s=0;s<a;s++){o.push(Mye(i,s,n));break}return[o]}finally{i.close(),i.delete()}}function Mye(t,e,n){let{alphaFlag:i,height:a,width:o}=t.getImageLevelInfo(e,0,0),{compressed:s,format:l,basisFormat:c}=mK(n,i),u=t.getImageTranscodedSizeInBytes(e,0,0,c),d=new Uint8Array(u);if(!t.transcodeImage(d,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:a,data:d,compressed:s,levelSize:u,hasAlpha:i,format:l}}function mK(t,e){let n=t&&t.basis&&t.basis.format;return n==="auto"&&(n=J9()),typeof n=="object"&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),Rye[n]}function J9(){let t=iK();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}var gK={name:"Basis",id:la?"basis":"basis-nodejs",module:"textures",version:tK,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},rw={...gK,parse:tw};function Yn(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function nw(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;let i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function _K(t,e,n){let i=t.bufferViews[n];Yn(i);let a=i.buffer,o=e[a];Yn(o);let s=(i.byteOffset||0)+o.byteOffset;return new Uint8Array(o.arrayBuffer,s,i.byteLength)}var ow={};mr(ow,{decode:()=>Kye,name:()=>qye});var EK=["SCALAR","VEC2","VEC3","VEC4"],Lye=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Oye=new Map(Lye),Bye={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Dye={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Fye={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Q9(t){return EK[t-1]||EK[0]}function ey(t){let e=Oye.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function P0(t,e){let n=Fye[t.componentType],i=Bye[t.type],a=Dye[t.componentType],o=t.count*i,s=t.count*i*a;return Yn(s>=0&&s<=e.byteLength),{ArrayType:n,length:o,byteLength:s}}var kye={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},Ir=class{constructor(e){A(this,"gltf",void 0),A(this,"sourceBuffers",void 0),A(this,"byteLength",void 0),this.gltf=e||{json:{...kye},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){let n=this.getUsedExtensions().find(a=>a===e),i=this.json.extensions||{};return n?i[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if(typeof n=="object")return n;let i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);let n=e.buffer,i=this.gltf.buffers[n];Yn(i);let a=(e.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,a,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);let n=this.getBufferView(e.bufferView),a=this.getBuffer(n.buffer).data,{ArrayType:o,length:s}=P0(e,n),l=n.byteOffset+e.byteOffset;return new o(a,l,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);let n=this.getBufferView(e.bufferView),a=this.getBuffer(n.buffer).data,o=n.byteOffset||0;return new Uint8Array(a,o,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){let a=e.extensions||{};a[n]=i}removeObjectExtension(e,n){let i=e.extensions||{},a=i[n];return delete i[n],a}addExtension(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Yn(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Yn(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){if(!this.getExtension(e))return;this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);let n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}setDefaultScene(e){this.json.scene=e}addScene(e){let{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){let{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];let a={mesh:n};return i&&(a.matrix=i),this.json.nodes.push(a),this.json.nodes.length-1}addMesh(e){let{attributes:n,indices:i,material:a,mode:o=4}=e,l={primitives:[{attributes:this._addAttributes(n),mode:o}]};if(i){let c=this._addIndices(i);l.primitives[0].indices=c}return Number.isFinite(a)&&(l.primitives[0].material=a),this.json.meshes=this.json.meshes||[],this.json.meshes.push(l),this.json.meshes.length-1}addPointCloud(e){let i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){let i=Pf(e),a=n||(i==null?void 0:i.mimeType),s={bufferView:this.addBufferView(e),mimeType:a};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){let n=e.byteLength;Yn(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);let i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=vu(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){let i={bufferView:e,type:Q9(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{size:3},i=this.addBufferView(e),a={min:n.min,max:n.max};(!a.min||!a.max)&&(a=this._getAccessorMinMax(e,n.size));let o={size:n.size,componentType:ey(e),count:Math.round(e.length/n.size),min:a.min,max:a.max};return this.addAccessor(i,Object.assign(o,n))}addTexture(e){let{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];let i=this.byteLength,a=new ArrayBuffer(i),o=new Uint8Array(a),s=0;for(let l of this.sourceBuffers||[])s=GN(l,o,s);(e=this.json)!==null&&e!==void 0&&(n=e.buffers)!==null&&n!==void 0&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=a,this.sourceBuffers=[a]}_removeStringFromArray(e,n){let i=!0;for(;i;){let a=e.indexOf(n);a>-1?e.splice(a,1):i=!1}}_addAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={};for(let i in e){let a=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(a.value,a);n[o]=s}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){let i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];let a=e.subarray(0,n);for(let o of a)i.min.push(o),i.max.push(o);for(let o=n;o<e.length;o+=n)for(let s=0;s<n;s++)i.min[0+s]=Math.min(i.min[0+s],e[o+s]),i.max[0+s]=Math.max(i.max[0+s],e[o+s]);return i}};var Gye="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Uye="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Vye=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),$ye=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),zye={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},jye={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};async function vK(t,e,n,i,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"NONE",s=await Hye();Xye(s,s.exports[jye[a]],t,e,n,i,s.exports[zye[o||"NONE"]])}var iw;async function Hye(){return iw||(iw=Wye()),iw}async function Wye(){let t=Gye;WebAssembly.validate(Vye)&&(t=Uye,console.log("Warning: meshopt_decoder is using experimental SIMD support"));let e=await WebAssembly.instantiate(Zye(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}function Zye(t){let e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){let a=t.charCodeAt(i);e[i]=a>96?a-71:a>64?a-65:a>47?a+4:a>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?$ye[e[i]]:(e[i]-60)*64+e[++i];return e.buffer.slice(0,n)}function Xye(t,e,n,i,a,o,s){let l=t.exports.sbrk,c=i+3&-4,u=l(c*a),d=l(o.length),f=new Uint8Array(t.exports.memory.buffer);f.set(o,d);let p=e(u,i,a,d,o.length);if(p===0&&s&&s(u,c,a),n.set(f.subarray(u,u+i*a)),l(u-l(0)),p!==0)throw new Error("Malformed buffer data: ".concat(p))}var aw="EXT_meshopt_compression",qye=aw;async function Kye(t,e){var n;let i=new Ir(t);if(!(e!=null&&(n=e.gltf)!==null&&n!==void 0&&n.decompressMeshes))return;let a=[];for(let o of t.json.bufferViews||[])a.push(Yye(i,o));await Promise.all(a),i.removeExtension(aw)}async function Yye(t,e){let n=t.getObjectExtension(e,aw);if(n){let{byteOffset:i=0,byteLength:a=0,byteStride:o,count:s,mode:l,filter:c="NONE",buffer:u}=n,d=t.gltf.buffers[u],f=new Uint8Array(d.arrayBuffer,d.byteOffset+i,a),p=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return await vK(p,s,o,f,l,c),p}return null}var sw={};mr(sw,{name:()=>Jye,preprocess:()=>Qye});var M0="EXT_texture_webp",Jye=M0;function Qye(t,e){let n=new Ir(t);if(!cA("image/webp")){if(n.getRequiredExtensions().includes(M0))throw new Error("gltf: Required extension ".concat(M0," not supported by browser"));return}let{json:i}=n;for(let a of i.textures||[]){let o=n.getObjectExtension(a,M0);o&&(a.source=o.source),n.removeObjectExtension(a,M0)}n.removeExtension(M0)}var lw={};mr(lw,{name:()=>e8e,preprocess:()=>t8e});var ty="KHR_texture_basisu",e8e=ty;function t8e(t,e){let n=new Ir(t),{json:i}=n;for(let a of i.textures||[]){let o=n.getObjectExtension(a,ty);o&&(a.source=o.source),n.removeObjectExtension(a,ty)}n.removeExtension(ty)}var dw={};mr(dw,{decode:()=>x8e,encode:()=>b8e,name:()=>v8e,preprocess:()=>y8e});var yK="3.4.13";var r8e={draco:{decoderType:typeof WebAssembly=="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},xK={name:"Draco",id:la?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:yK,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:r8e};function SK(t,e,n){let i=NK(e.metadata),a=[],o=n8e(e.attributes);for(let s in t){let l=t[s],c=bK(s,l,o[s]);a.push(c)}if(n){let s=bK("indices",n);a.push(s)}return new fo(a,i)}function n8e(t){let e={};for(let n in t){let i=t[n];e[i.name||"undefined"]=i}return e}function bK(t,e,n){let i=n?NK(n.metadata):void 0;return WC(t,e,i)}function NK(t){let e=new Map;for(let n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}var AK={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},i8e={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},a8e=4,fE=class{constructor(e){A(this,"draco",void 0),A(this,"decoder",void 0),A(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);let a=this.decoder.GetEncodedGeometryType(i),o=a===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(a){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){let p="DRACO decompression failed: ".concat(s.error_msg());throw new Error(p)}let l=this._getDracoLoaderData(o,a,n),c=this._getMeshData(o,l,n),u=HC(c.attributes),d=SK(c.attributes,l,c.indices);return{loader:"draco",loaderData:l,header:{vertexCount:o.num_points(),boundingBox:u},...c,schema:d}}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,n,i){let a=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:a,attributes:o}}_getDracoAttributes(e,n){let i={};for(let a=0;a<e.num_attributes();a++){let o=this.decoder.GetAttribute(e,a),s=this._getAttributeMetadata(e,a);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:a,metadata:s};let l=this._getQuantizationTransform(o,n);l&&(i[o.unique_id()].quantization_transform=l);let c=this._getOctahedronTransform(o,n);c&&(i[o.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,n,i){let a=this._getMeshAttributes(n,e,i);if(!a.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(i.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:a,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:a,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:a}}_getMeshAttributes(e,n,i){let a={};for(let o of Object.values(e.attributes)){let s=this._deduceAttributeName(o,i);o.name=s;let{value:l,size:c}=this._getAttributeValues(n,o);a[s]={value:l,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return a}_getTriangleListIndices(e){let i=e.num_faces()*3,a=i*a8e,o=this.draco._malloc(a);try{return this.decoder.GetTrianglesUInt32Array(e,a,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){let n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),l8e(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){let i=i8e[n.data_type],a=n.num_components,s=e.num_points()*a,l=s*i.BYTES_PER_ELEMENT,c=o8e(this.draco,i),u,d=this.draco._malloc(l);try{let f=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,f,c,l,d),u=new i(this.draco.HEAPF32.buffer,d,s).slice()}finally{this.draco._free(d)}return{value:u,size:a}}_deduceAttributeName(e,n){let i=e.unique_id;for(let[s,l]of Object.entries(n.extraAttributes||{}))if(l===i)return s;let a=e.attribute_type;for(let s in AK)if(this.draco[s]===a)return AK[s];let o=n.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){let n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){let i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};let n={},i=this.metadataQuerier.NumEntries(e);for(let a=0;a<i;a++){let o=this.metadataQuerier.GetEntryName(e,a);n[o]=this._getDracoMetadataField(e,o)}return n}_getDracoMetadataField(e,n){let i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);let a=s8e(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:a}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){let{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,a=[...n,...i];for(let o of a)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,n){let{quantizedAttributes:i=[]}=n,a=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(a)){let s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(l=>s.min_value(l))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,n){let{octahedronAttributes:i=[]}=n,a=e.attribute_type();if(i.map(s=>this.decoder[s]).includes(a)){let s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}};function o8e(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function s8e(t){let e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}function l8e(t){let e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}var c8e="1.5.5",u8e="1.4.1",cw="https://www.gstatic.com/draco/versioned/decoders/".concat(c8e),d8e="".concat(cw,"/draco_decoder.js"),f8e="".concat(cw,"/draco_wasm_wrapper.js"),p8e="".concat(cw,"/draco_decoder.wasm"),z3t="https://raw.githubusercontent.com/google/draco/".concat(u8e,"/javascript/draco_encoder.js"),pE;async function TK(t){let e=t.modules||{};return e.draco3d?pE=pE||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):pE=pE||h8e(t),await pE}async function h8e(t){let e,n;switch(t.draco&&t.draco.decoderType){case"js":e=await sl(d8e,"draco",t);break;case"wasm":default:[e,n]=await Promise.all([await sl(f8e,"draco",t),await sl(p8e,"draco",t)])}return e=e||globalThis.DracoDecoderModule,await m8e(e,n)}function m8e(t,e){let n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:a=>i({draco:a})})})}var CK={...xK,parse:g8e};async function g8e(t,e){let{draco:n}=await TK(e),i=new fE(n);try{return i.parseSync(t,e==null?void 0:e.draco)}finally{i.destroy()}}function wK(t){let e={};for(let n in t){let i=t[n];if(n!=="indices"){let a=uw(i);e[n]=a}}return e}function uw(t){let{buffer:e,size:n,count:i}=_8e(t);return{value:e,size:n,byteOffset:0,count:i,type:Q9(n),componentType:ey(e)}}function _8e(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=E8e(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}function E8e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?Array.isArray(t)?new e(t):n&&!(t instanceof e)?new e(t):t:null}var Rp="KHR_draco_mesh_compression",v8e=Rp;function y8e(t,e,n){let i=new Ir(t);for(let a of IK(i))i.getObjectExtension(a,Rp)}async function x8e(t,e,n){var i;if(!(e!=null&&(i=e.gltf)!==null&&i!==void 0&&i.decompressMeshes))return;let a=new Ir(t),o=[];for(let s of IK(a))a.getObjectExtension(s,Rp)&&o.push(S8e(a,s,e,n));await Promise.all(o),a.removeExtension(Rp)}function b8e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new Ir(t);for(let i of n.json.meshes||[])N8e(i,e),n.addRequiredExtension(Rp)}async function S8e(t,e,n,i){let a=t.getObjectExtension(e,Rp);if(!a)return;let o=t.getTypedArrayForBufferView(a.bufferView),s=Zg(o.buffer,o.byteOffset),{parse:l}=i,c={...n};delete c["3d-tiles"];let u=await l(s,CK,c,i),d=wK(u.attributes);for(let[f,p]of Object.entries(d))if(f in e.attributes){let h=e.attributes[f],m=t.getAccessor(h);m!=null&&m.min&&m!==null&&m!==void 0&&m.max&&(p.min=m.min,p.max=m.max)}e.attributes=d,u.indices&&(e.indices=uw(u.indices)),A8e(e)}function N8e(t,e){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!a.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");let s=a.DracoWriter.encodeSync({attributes:t}),l=o==null||(n=o.parseSync)===null||n===void 0?void 0:n.call(o,{attributes:t}),c=a._addFauxAttributes(l.attributes),u=a.addBufferView(s);return{primitives:[{attributes:c,mode:i,extensions:{[Rp]:{bufferView:u,attributes:c}}}]}}function A8e(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*IK(t){for(let e of t.json.meshes||[])for(let n of e.primitives)yield n}var pw={};mr(pw,{decode:()=>I8e,name:()=>T8e});var RK={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},PK={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};var fw="KHR_texture_transform",T8e=fw,ry=new je,C8e=new yr,w8e=new yr;async function I8e(t,e){if(!new Ir(t).getExtension(fw))return;let a=t.json.materials||[];for(let o=0;o<a.length;o++)R8e(o,t)}function R8e(t,e){var n,i,a;let o=[],s=(n=e.json.materials)===null||n===void 0?void 0:n[t],l=s==null||(i=s.pbrMetallicRoughness)===null||i===void 0?void 0:i.baseColorTexture;l&&hE(e,t,l,o);let c=s==null?void 0:s.emissiveTexture;c&&hE(e,t,c,o);let u=s==null?void 0:s.normalTexture;u&&hE(e,t,u,o);let d=s==null?void 0:s.occlusionTexture;d&&hE(e,t,d,o);let f=s==null||(a=s.pbrMetallicRoughness)===null||a===void 0?void 0:a.metallicRoughnessTexture;f&&hE(e,t,f,o)}function hE(t,e,n,i){let a=P8e(n,i);if(!a)return;let o=t.json.meshes||[];for(let s of o)for(let l of s.primitives){let c=l.material;Number.isFinite(c)&&e===c&&M8e(t,l,a)}}function P8e(t,e){var n;let i=(n=t.extensions)===null||n===void 0?void 0:n[fw],{texCoord:a=0}=t,{texCoord:o=a}=i;if(!(e.findIndex(l=>{let[c,u]=l;return c===a&&u===o})!==-1)){let l=B8e(i);return a!==o&&(t.texCoord=o),e.push([a,o]),{originalTexCoord:a,texCoord:o,matrix:l}}return null}function M8e(t,e,n){let{originalTexCoord:i,texCoord:a,matrix:o}=n,s=e.attributes["TEXCOORD_".concat(i)];if(Number.isFinite(s)){var l;let u=(l=t.json.accessors)===null||l===void 0?void 0:l[s];if(u&&u.bufferView){var c;let d=(c=t.json.bufferViews)===null||c===void 0?void 0:c[u.bufferView];if(d){let{arrayBuffer:f,byteOffset:p}=t.buffers[d.buffer],h=(p||0)+(u.byteOffset||0)+(d.byteOffset||0),{ArrayType:m,length:_}=P0(u,d),E=PK[u.componentType],v=RK[u.type],y=d.byteStride||E*v,x=new Float32Array(_);for(let S=0;S<u.count;S++){let N=new m(f,h+S*y,2);ry.set(N[0],N[1],1),ry.transformByMatrix3(o),x.set([ry[0],ry[1]],S*v)}i===a?L8e(u,d,t.buffers,x):O8e(a,u,e,t,x)}}}}function L8e(t,e,n,i){t.componentType=5126,n.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=i.buffer.byteLength,e.byteOffset=0,delete e.byteStride}function O8e(t,e,n,i,a){i.buffers.push({arrayBuffer:a.buffer,byteOffset:0,byteLength:a.buffer.byteLength});let o=i.json.bufferViews;if(!o)return;o.push({buffer:i.buffers.length-1,byteLength:a.buffer.byteLength,byteOffset:0});let s=i.json.accessors;s&&(s.push({bufferView:(o==null?void 0:o.length)-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes["TEXCOORD_".concat(t)]=s.length-1)}function B8e(t){let{offset:e=[0,0],rotation:n=0,scale:i=[1,1]}=t,a=new yr().set(1,0,0,0,1,0,e[0],e[1],1),o=C8e.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),s=w8e.set(i[0],0,0,0,i[1],0,0,0,1);return a.multiplyRight(o).multiplyRight(s)}var hw={};mr(hw,{decode:()=>F8e,encode:()=>k8e,name:()=>D8e});var Pp="KHR_lights_punctual",D8e=Pp;async function F8e(t){let e=new Ir(t),{json:n}=e,i=e.getExtension(Pp);i&&(e.json.lights=i.lights,e.removeExtension(Pp));for(let a of n.nodes||[]){let o=e.getObjectExtension(a,Pp);o&&(a.light=o.light),e.removeObjectExtension(a,Pp)}}async function k8e(t){let e=new Ir(t),{json:n}=e;if(n.lights){let i=e.addExtension(Pp);Yn(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(let i of e.json.lights){let a=i.node;e.addObjectExtension(a,Pp,i)}delete e.json.lights}}var mw={};mr(mw,{decode:()=>U8e,encode:()=>V8e,name:()=>G8e});var mE="KHR_materials_unlit",G8e=mE;async function U8e(t){let e=new Ir(t),{json:n}=e;for(let i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,mE);e.removeExtension(mE)}function V8e(t){let e=new Ir(t),{json:n}=e;if(e.materials)for(let i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,mE,{}),e.addExtension(mE))}var gw={};mr(gw,{decode:()=>z8e,encode:()=>j8e,name:()=>$8e});var gE="KHR_techniques_webgl",$8e=gE;async function z8e(t){let e=new Ir(t),{json:n}=e,i=e.getExtension(gE);if(i){let a=H8e(i,e);for(let o of n.materials||[]){let s=e.getObjectExtension(o,gE);s&&(o.technique=Object.assign({},s,a[s.technique]),o.technique.values=W8e(o.technique,e)),e.removeObjectExtension(o,gE)}e.removeExtension(gE)}}async function j8e(t,e){}function H8e(t,e){let{programs:n=[],shaders:i=[],techniques:a=[]}=t,o=new TextDecoder;return i.forEach(s=>{if(Number.isFinite(s.bufferView))s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(s=>{s.fragmentShader=i[s.fragmentShader],s.vertexShader=i[s.vertexShader]}),a.forEach(s=>{s.program=n[s.program]}),a}function W8e(t,e){let n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{typeof n[i]=="object"&&n[i].index!==void 0&&(n[i].texture=e.getTexture(n[i].index))}),n}var _w={};mr(_w,{decode:()=>X8e,name:()=>Z8e});var MK="EXT_feature_metadata",Z8e=MK;async function X8e(t){let e=new Ir(t);q8e(e)}function q8e(t){var e;let n=t.getExtension(MK),i=n==null||(e=n.schema)===null||e===void 0?void 0:e.classes,a=n==null?void 0:n.featureTables;if((n==null?void 0:n.featureTextures)&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),i&&a)for(let s in i){let l=i[s],c=J8e(a,s);c&&K8e(t,c,l)}}function K8e(t,e,n){for(let a in n.properties){var i;let o=n.properties[a],s=e==null||(i=e.properties)===null||i===void 0?void 0:i[a],l=e.count;if(s){let c=Y8e(t,o,l,s);s.data=c}}}function Y8e(t,e,n,i){let a=i.bufferView,o=t.getTypedArrayForBufferView(a);switch(e.type){case"STRING":{let s=i.stringOffsetBufferView,l=t.getTypedArrayForBufferView(s);o=Q8e(o,l,n);break}default:}return o}function J8e(t,e){for(let n in t){let i=t[n];if(i.class===e)return i}return null}function Q8e(t,e,n){let i=[],a=new TextDecoder("utf8"),o=0,s=4;for(let l=0;l<n;l++){let c=e[(l+1)*s]-e[l*s],u=t.subarray(o,c+o),d=a.decode(u);i.push(d),o+=c}return i}var LK=[ow,sw,lw,dw,hw,mw,gw,pw,_w];function OK(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=LK.filter(o=>DK(o.name,e));for(let o of i){var a;(a=o.preprocess)===null||a===void 0||a.call(o,t,e,n)}}async function BK(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=LK.filter(o=>DK(o.name,e));for(let o of i){var a;await((a=o.decode)===null||a===void 0?void 0:a.call(o,t,e,n))}}function DK(t,e){var n;let i=(e==null||(n=e.gltf)===null||n===void 0?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}var Ew="KHR_binary_glTF";function FK(t){let e=new Ir(t),{json:n}=e;for(let i of n.images||[]){let a=e.getObjectExtension(i,Ew);a&&Object.assign(i,a),e.removeObjectExtension(i,Ew)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(Ew)}var kK={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},txe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},vw=class{constructor(){A(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),A(this,"json",void 0)}normalize(e,n){this.json=e.json;let i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn("glTF: Unknown version ".concat(i.asset.version));return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),FK(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(let n in kK)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){let i=e[n];if(!(!i||Array.isArray(i))){e[n]=[];for(let a in i){let o=i[a];o.id=o.id||a;let s=e[n].length;e[n].push(o),this.idToIndexMap[n][a]=s}}}_convertObjectIdsToArrayIndices(e){for(let n in kK)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(let n of e.textures)this._convertTextureIds(n);for(let n of e.meshes)this._convertMeshIds(n);for(let n of e.nodes)this._convertNodeIds(n);for(let n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(let n of e.primitives){let{attributes:i,indices:a,material:o}=n;for(let s in i)i[s]=this._convertIdToIndex(i[s],"accessor");a&&(n.indices=this._convertIdToIndex(a,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(let i of e[n])for(let a in i){let o=i[a],s=this._convertIdToIndex(o,a);i[a]=s}}_convertIdToIndex(e,n){let i=txe[n];if(i in this.idToIndexMap){let a=this.idToIndexMap[i][e];if(!Number.isFinite(a))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return a}return e}_updateObjects(e){for(let n of this.json.buffers)delete n.type}_updateMaterial(e){for(let o of e.materials){var n,i,a;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};let s=((n=o.values)===null||n===void 0?void 0:n.tex)||((i=o.values)===null||i===void 0?void 0:i.texture2d_0)||((a=o.values)===null||a===void 0?void 0:a.diffuseTex),l=e.textures.findIndex(c=>c.id===s);l!==-1&&(o.pbrMetallicRoughness.baseColorTexture={index:l})}}};function GK(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new vw().normalize(t,e)}var rxe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},nxe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Wo={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},ixe={magFilter:Wo.TEXTURE_MAG_FILTER,minFilter:Wo.TEXTURE_MIN_FILTER,wrapS:Wo.TEXTURE_WRAP_S,wrapT:Wo.TEXTURE_WRAP_T},axe={[Wo.TEXTURE_MAG_FILTER]:Wo.LINEAR,[Wo.TEXTURE_MIN_FILTER]:Wo.NEAREST_MIPMAP_LINEAR,[Wo.TEXTURE_WRAP_S]:Wo.REPEAT,[Wo.TEXTURE_WRAP_T]:Wo.REPEAT};function oxe(t){return nxe[t]}function sxe(t){return rxe[t]}var yw=class{constructor(){A(this,"baseUri",""),A(this,"json",{}),A(this,"buffers",[]),A(this,"images",[])}postProcess(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{json:i,buffers:a=[],images:o=[],baseUri:s=""}=e;return Yn(i),this.baseUri=s,this.json=i,this.buffers=a,this.images=o,this._resolveTree(this.json,n),this.json}_resolveTree(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,a)=>this._resolveBufferView(i,a))),e.images&&(e.images=e.images.map((i,a)=>this._resolveImage(i,a))),e.samplers&&(e.samplers=e.samplers.map((i,a)=>this._resolveSampler(i,a))),e.textures&&(e.textures=e.textures.map((i,a)=>this._resolveTexture(i,a))),e.accessors&&(e.accessors=e.accessors.map((i,a)=>this._resolveAccessor(i,a))),e.materials&&(e.materials=e.materials.map((i,a)=>this._resolveMaterial(i,a))),e.meshes&&(e.meshes=e.meshes.map((i,a)=>this._resolveMesh(i,a))),e.nodes&&(e.nodes=e.nodes.map((i,a)=>this._resolveNode(i,a))),e.skins&&(e.skins=e.skins.map((i,a)=>this._resolveSkin(i,a))),e.scenes&&(e.scenes=e.scenes.map((i,a)=>this._resolveScene(i,a))),e.scene!==void 0&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if(typeof n=="object")return n;let i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),e.mesh!==void 0?e.mesh=this.getMesh(e.mesh):e.meshes!==void 0&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,a)=>{let o=this.getMesh(a);return i.id=o.id,i.primitives=i.primitives.concat(o.primitives),i},{primitives:[]})),e.camera!==void 0&&(e.camera=this.getCamera(e.camera)),e.skin!==void 0&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{i={...i};let a=i.attributes;i.attributes={};for(let o in a)i.attributes[o]=this.getAccessor(a[o]);return i.indices!==void 0&&(i.indices=this.getAccessor(i.indices)),i.material!==void 0&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};let i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=oxe(e.componentType),e.components=sxe(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){let i=e.bufferView.buffer,{ArrayType:a,byteLength:o}=P0(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset,l=i.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(l=this._getValueFromInterleavedBuffer(i,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new a(l)}return e}_getValueFromInterleavedBuffer(e,n,i,a,o){let s=new Uint8Array(o*a);for(let l=0;l<o;l++){let c=n+l*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+a)),l*a)}return s.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):axe,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(let i in e){let a=this._enumSamplerParameter(i);a!==void 0&&(e.parameters[a]=e[i])}return e}_enumSamplerParameter(e){return ixe[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView));let i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){let i=e.buffer,a={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]},o=this.buffers[i].arrayBuffer,s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),a.data=new Uint8Array(o,s,e.byteLength),a}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e.perspective,e.orthographic,e}};function UK(t,e){return new yw().postProcess(t,e)}var VK=1735152710,Sw=12,ny=8,lxe=1313821514,cxe=5130562,uxe=0,dxe=1,fxe=0,L0=!0;function pxe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}function $K(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=new DataView(t),{magic:a=VK}=n,o=i.getUint32(e,!1);return o===a||o===VK}function Nw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=new DataView(e),o=pxe(a,n+0),s=a.getUint32(n+4,L0),l=a.getUint32(n+8,L0);switch(Object.assign(t,{header:{byteOffset:n,byteLength:l,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),n+=Sw,t.version){case 1:return hxe(t,a,n);case 2:return mxe(t,a,n,i={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}function hxe(t,e,n){sa(t.header.byteLength>Sw+ny);let i=e.getUint32(n+0,L0),a=e.getUint32(n+4,L0);return n+=ny,sa(a===fxe),xw(t,e,n,i),n+=i,n+=bw(t,e,n,t.header.byteLength),n}function mxe(t,e,n,i){return sa(t.header.byteLength>Sw+ny),gxe(t,e,n,i),n+t.header.byteLength}function gxe(t,e,n,i){for(;n+8<=t.header.byteLength;){let a=e.getUint32(n+0,L0),o=e.getUint32(n+4,L0);switch(n+=ny,o){case lxe:xw(t,e,n,a);break;case cxe:bw(t,e,n,a);break;case uxe:i.strict||xw(t,e,n,a);break;case dxe:i.strict||bw(t,e,n,a);break;default:break}n+=vu(a,4)}return n}function xw(t,e,n,i){let a=new Uint8Array(e.buffer,n,i),s=new TextDecoder("utf8").decode(a);return t.json=JSON.parse(s),vu(i,4)}function bw(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),vu(i,4)}async function zK(t,e){var n,i,a,o;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;_xe(t,e,s,l),GK(t,{normalize:l==null||(n=l.gltf)===null||n===void 0?void 0:n.normalize}),OK(t,l,c);let u=[];if(l!=null&&(i=l.gltf)!==null&&i!==void 0&&i.loadBuffers&&t.json.buffers&&await Exe(t,l,c),l!=null&&(a=l.gltf)!==null&&a!==void 0&&a.loadImages){let f=vxe(t,l,c);u.push(f)}let d=BK(t,l,c);return u.push(d),await Promise.all(u),l!=null&&(o=l.gltf)!==null&&o!==void 0&&o.postProcess?UK(t,l):t}function _xe(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!$K(e,n,i)&&(e=new TextDecoder().decode(e)),typeof e=="string")t.json=DN(e);else if(e instanceof ArrayBuffer){let s={};n=Nw(s,e,n,i.glb),Yn(s.type==="glTF","Invalid GLB magic string ".concat(s.type)),t._glb=s,t.json=s.json}else Yn(!1,"GLTF: must be ArrayBuffer or string");let a=t.json.buffers||[];if(t.buffers=new Array(a.length).fill(null),t._glb&&t._glb.header.hasBinChunk){let{binChunks:s}=t._glb;t.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}let o=t.json.images||[];t.images=new Array(o.length).fill({})}async function Exe(t,e,n){let i=t.json.buffers||[];for(let s=0;s<i.length;++s){let l=i[s];if(l.uri){var a,o;let{fetch:c}=n;Yn(c);let u=nw(l.uri,e),d=await(n==null||(a=n.fetch)===null||a===void 0?void 0:a.call(n,u)),f=await(d==null||(o=d.arrayBuffer)===null||o===void 0?void 0:o.call(d));t.buffers[s]={arrayBuffer:f,byteOffset:0,byteLength:f.byteLength},delete l.uri}else t.buffers[s]===null&&(t.buffers[s]={arrayBuffer:new ArrayBuffer(l.byteLength),byteOffset:0,byteLength:l.byteLength})}}async function vxe(t,e,n){let i=yxe(t),a=t.json.images||[],o=[];for(let s of i)o.push(xxe(t,a[s],s,e,n));return await Promise.all(o)}function yxe(t){let e=new Set,n=t.json.textures||[];for(let i of n)i.source!==void 0&&e.add(i.source);return Array.from(e).sort()}async function xxe(t,e,n,i,a){let{fetch:o,parse:s}=a,l;if(e.uri&&!e.hasOwnProperty("bufferView")){let u=nw(e.uri,i);l=await(await o(u)).arrayBuffer(),e.bufferView={data:l}}if(Number.isFinite(e.bufferView)){let u=_K(t.json,t.buffers,e.bufferView);l=Zg(u.buffer,u.byteOffset,u.byteLength)}Yn(l,"glTF image has no data");let c=await s(l,[Mf,rw],{mimeType:e.mimeType,basis:i.basis||{format:J9()}},a);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c}var _E={name:"glTF",id:"gltf",module:"gltf",version:eK,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:bxe,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};async function bxe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;e={..._E.options,...e},e.gltf={..._E.options.gltf,...e.gltf};let{byteOffset:i=0}=e;return await zK({},t,i,e,n)}async function jK(t){let e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(a=>{a.loaded===!1&&e.push(a)})})}),await Sxe(()=>e.some(n=>!n.loaded))}async function Sxe(t){for(;t();)await new Promise(e=>requestAnimationFrame(e))}var HK=`#version 300 es
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform mat4 sceneModelMatrix;
uniform bool composeModelMatrix;
in vec4 POSITION;

#ifdef HAS_UV
  in vec2 TEXCOORD_0;
#endif

#ifdef MODULE_PBR
  #ifdef HAS_NORMALS
    in vec4 NORMAL;
  #endif
#endif
out vec4 vColor;
#ifndef MODULE_PBR
  #ifdef HAS_UV
    out vec2 vTEXCOORD_0;
  #endif
#endif
void main(void) {
  #if defined(HAS_UV) && !defined(MODULE_PBR)
    vTEXCOORD_0 = TEXCOORD_0;
    geometry.uv = vTEXCOORD_0;
  #endif

  geometry.worldPosition = instancePositions;
  geometry.pickingColor = instancePickingColors;

  vec3 normal = vec3(0.0, 0.0, 1.0);
  #ifdef MODULE_PBR
    #ifdef HAS_NORMALS
      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;
    #endif
  #endif

  float originalSize = project_size_to_pixel(sizeScale);
  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);

  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;
  if(composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    geometry.normal = project_normal(normal);
    geometry.worldPosition += pos;
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);
    geometry.normal = project_normal(normal);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = TEXCOORD_0;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var WK=`#version 300 es
uniform float opacity;
in vec4 vColor;

out vec4 fragmentColor;
#ifndef MODULE_PBR
  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
    in vec2 vTEXCOORD_0;
    uniform sampler2D u_BaseColorSampler;
  #endif
#endif

void main(void) {
  #ifdef MODULE_PBR
    fragmentColor = vColor * pbr_filterColor(vec4(0));
    geometry.uv = pbr_vUV;
  #else
    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);
      geometry.uv = vTEXCOORD_0;
    #else
      fragmentColor = vColor;
    #endif
  #endif

  fragmentColor.a *= opacity;
  DECKGL_FILTER_COLOR(fragmentColor, geometry);
}
`;var ZK=[255,255,255,255],Nxe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?typeof t.scene=="object"?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:ZK},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[_E]},Ju=class extends Dr{constructor(...e){super(...e),A(this,"state",void 0)}getShaders(){let e=[On,Bn];return this.props._lighting==="pbr"&&e.push(Mh),super.getShaders({vs:HK,fs:WK,modules:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:ZK,transition:!0},instanceModelMatrix:Dq})}updateState(e){super.updateState(e);let{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){let e=this.props,{gl:n}=this.context,i=null;if(e.scenegraph instanceof po)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){let l=e.scenegraph,c=K9(n,l,this._getModelOptions());i={gltf:l,...c},jK(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(at.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);let a={layer:this,gl:n},o=e.getScene(i,a),s=e.getAnimator(i,a);o instanceof po?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):o!==null&&at.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){let n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;let a=n.getAnimations();Object.keys(i).sort().forEach(o=>{let s=i[o];if(o==="*")a.forEach(l=>{Object.assign(l,s)});else if(Number.isFinite(Number(o))){let l=Number(o);l>=0&&l<a.length?Object.assign(a[l],s):at.warn("animation ".concat(o," not found"))()}else{let l=a.find(({name:c})=>c===o);l?Object.assign(l,s):at.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){let{scenegraph:e}=this.state;e instanceof po&&e.delete()}_getModelOptions(){let{_imageBasedLightingEnvironment:e}=this.props,n=null;return e&&(typeof e=="function"?n=e({gl:this.context.gl,layer:this}):n=e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!pt(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());let{viewport:a}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:l,opacity:c,coordinateSystem:u}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((f,{worldMatrix:p})=>{f.model.setInstanceCount(d),f.updateModuleSettings(e),f.draw({parameters:n,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:l,composeModelMatrix:Fq(a,u),sceneModelMatrix:p,u_Camera:f.model.getUniforms().project_uCameraPosition}})})}};A(Ju,"defaultProps",Nxe);A(Ju,"layerName","ScenegraphLayer");var XK={inject:{"vs:#decl":`
attribute vec2 instanceDashArrays;
attribute float instanceDashOffsets;
varying vec2 vDashArray;
varying float vDashOffset;
`,"vs:#main-end":`
vDashArray = instanceDashArrays;
vDashOffset = instanceDashOffsets / width.x;
`,"fs:#decl":`
uniform float dashAlignMode;
uniform float capType;
uniform bool dashGapPickable;
varying vec2 vDashArray;
varying float vDashOffset;

float round(float x) {
  return floor(x + 0.5);
}
`,"fs:#main-start":`
  float solidLength = vDashArray.x;
  float gapLength = vDashArray.y;
  float unitLength = solidLength + gapLength;

  float offset;

  if (unitLength > 0.0) {
    if (dashAlignMode == 0.0) {
      offset = vDashOffset;
    } else {
      unitLength = vPathLength / round(vPathLength / unitLength);
      offset = solidLength / 2.0;
    }

    float unitOffset = mod(vPathPosition.y + offset, unitLength);

    if (gapLength > 0.0 && unitOffset > solidLength) {
      if (capType <= 0.5) {
        if (!(dashGapPickable && picking_uActive)) {
          discard;
        }
      } else {
        float distToEnd = length(vec2(
          min(unitOffset - solidLength, unitLength - unitOffset),
          vPathPosition.x
        ));
        if (distToEnd > 1.0) {
          if (!(dashGapPickable && picking_uActive)) {
            discard;
          }
        }
      }
    }
  }
`}},qK={inject:{"vs:#decl":`
attribute float instanceOffsets;
`,"vs:DECKGL_FILTER_SIZE":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  size *= offsetWidth;
`,"vs:#main-end":`
  float offsetWidth = abs(instanceOffsets * 2.0) + 1.0;
  float offsetDir = sign(instanceOffsets);
  vPathPosition.x = (vPathPosition.x + offsetDir) * offsetWidth - offsetDir;
  vPathPosition.y *= offsetWidth;
  vPathLength *= offsetWidth;
`,"fs:#main-start":`
  float isInside;
  isInside = step(-1.0, vPathPosition.x) * step(vPathPosition.x, 1.0);
  if (isInside == 0.0) {
    discard;
  }
`}};var Axe={getDashArray:{type:"accessor",value:[0,0]},getOffset:{type:"accessor",value:0},dashJustified:!1,dashGapPickable:!1},Qu=class extends vl{constructor({dash:e=!1,offset:n=!1,highPrecisionDash:i=!1}={}){super({dash:e||i,offset:n,highPrecisionDash:i})}isEnabled(e){return"pathTesselator"in e.state}getShaders(e){if(!e.isEnabled(this))return null;let n={};return e.opts.dash&&(n=Zh(n,XK)),e.opts.offset&&(n=Zh(n,qK)),n}initializeState(e,n){let i=this.getAttributeManager();!i||!n.isEnabled(this)||(n.opts.dash&&i.addInstanced({instanceDashArrays:{size:2,accessor:"getDashArray"}}),n.opts.highPrecisionDash&&i.addInstanced({instanceDashOffsets:{size:1,accessor:"getPath",transform:n.getDashOffsets.bind(this)}}),n.opts.offset&&i.addInstanced({instanceOffsets:{size:1,accessor:"getOffset"}}))}updateState(e,n){if(!n.isEnabled(this))return;let i={};n.opts.dash&&(i.dashAlignMode=this.props.dashJustified?1:0,i.dashGapPickable=!!this.props.dashGapPickable),this.state.model.setUniforms(i)}getDashOffsets(e){let n=[0],i=this.props.positionFormat==="XY"?2:3,a=Array.isArray(e[0]),o=a?e.length:e.length/i,s,l;for(let c=0;c<o-1;c++)s=a?e[c]:e.slice(c*i,c*i+i),s=this.projectPosition(s),c>0&&(n[c]=n[c-1]+c7(l,s)),l=s;return n}};A(Qu,"defaultProps",Axe);A(Qu,"extensionName","PathStyleExtension");var Txe=`
#ifdef NON_INSTANCED_MODEL
attribute float collisionPriorities;
#else
attribute float instanceCollisionPriorities;
#endif

uniform sampler2D collision_texture;
uniform bool collision_sort;
uniform bool collision_enabled;

vec2 collision_getCoords(vec4 position) {
  vec4 collision_clipspace = project_common_position_to_clipspace(position);
  return (1.0 + collision_clipspace.xy / collision_clipspace.w) / 2.0;
}

float collision_match(vec2 tex, vec3 pickingColor) {
  vec4 collision_pickingColor = texture2D(collision_texture, tex);
  float delta = dot(abs(collision_pickingColor.rgb - pickingColor), vec3(1.0));
  float e = 0.001;
  return step(delta, e);
}

float collision_isVisible(vec2 texCoords, vec3 pickingColor) {
  if (!collision_enabled) {
    return 1.0;
  }

  // Visibility test, sample area of 5x5 pixels in order to fade in/out.
  // Due to the locality, the lookups will be cached
  // This reduces the flicker present when objects are shown/hidden
  const int N = 2;
  float accumulator = 0.0;
  vec2 step = vec2(1.0 / project_uViewportSize);

  const float floatN = float(N);
  vec2 delta = -floatN * step;
  for(int i = -N; i <= N; i++) {
    delta.x = -step.x * floatN;
    for(int j = -N; j <= N; j++) {
      accumulator += collision_match(texCoords + delta, pickingColor);
      delta.x += step.x;
    }
    delta.y += step.y;
  }

  float W = 2.0 * floatN + 1.0;
  return pow(accumulator / (W * W), 2.2);
}
`,Cxe={"vs:#decl":`
  float collision_fade = 1.0;
`,"vs:DECKGL_FILTER_GL_POSITION":`
  if (collision_sort) {
    #ifdef NON_INSTANCED_MODEL
    float collisionPriority = collisionPriorities;
    #else
    float collisionPriority = instanceCollisionPriorities;
    #endif
    position.z = -0.001 * collisionPriority * position.w; // Support range -1000 -> 1000
  }

  if (collision_enabled) {
    vec4 collision_common_position = project_position(vec4(geometry.worldPosition, 1.0));
    vec2 collision_texCoords = collision_getCoords(collision_common_position);
    collision_fade = collision_isVisible(collision_texCoords, geometry.pickingColor / 255.0);
    if (collision_fade < 0.0001) {
      // Position outside clip space bounds to discard
      position = vec4(0.0, 0.0, 2.0, 1.0);
    }
  }
  `,"vs:DECKGL_FILTER_COLOR":`
  color.a *= collision_fade;
  `},wxe=(t,e)=>{if(!t||!("dummyCollisionMap"in t))return{};let{collisionFBO:n,drawToCollisionMap:i,dummyCollisionMap:a}=t;return{collision_sort:!!i,collision_texture:!i&&n?n:a}},KK={name:"collision",dependencies:[hc],vs:Txe,inject:Cxe,getUniforms:wxe};var EE=class extends Ba{renderCollisionMap(e,n){let i=this.gl,a=1;return Or(i,{scissorTest:!0,scissor:[a,a,e.width-2*a,e.height-2*a],clearColor:[0,0,0,0],blend:!1,depthTest:!0,depthRange:[0,1]},()=>this.render({...n,target:e,pass:"collision"}))}getModuleParameters(){return{drawToCollisionMap:!0,pickingActive:1,pickingAttribute:!1,lightSources:{}}}};var vE=class extends Ba{constructor(e,n){super(e,n),A(this,"maskMap",void 0),A(this,"fbo",void 0);let{mapSize:i=2048}=n;this.maskMap=new jt(e,{width:i,height:i,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new Ht(e,{id:"maskmap",width:i,height:i,attachments:{[36064]:this.maskMap}})}render(e){let n=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,Or(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return e.props.operation.includes("mask")}delete(){this.fbo.delete(),this.maskMap.delete()}};function YK(t,e){let n=[1/0,1/0,-1/0,-1/0];for(let i of t){let a=i.getBounds();if(a){let o=i.projectPosition(a[0],{viewport:e,autoOffset:!1}),s=i.projectPosition(a[1],{viewport:e,autoOffset:!1});n[0]=Math.min(n[0],o[0]),n[1]=Math.min(n[1],o[1]),n[2]=Math.max(n[2],s[0]),n[3]=Math.max(n[3],s[1])}}return Number.isFinite(n[0])?n:null}var Ixe=2048;function JK(t){let{bounds:e,viewport:n,border:i=0}=t,{isGeospatial:a}=n;if(e[2]<=e[0]||e[3]<=e[1])return null;let o=n.unprojectPosition([(e[0]+e[2])/2,(e[1]+e[3])/2,0]),{width:s,height:l,zoom:c}=t;if(c===void 0){s=s-i*2,l=l-i*2;let u=Math.min(s/(e[2]-e[0]),l/(e[3]-e[1]));c=Math.min(Math.log2(u),20)}else if(!s||!l){let u=2**c;s=Math.round(Math.abs(e[2]-e[0])*u),l=Math.round(Math.abs(e[3]-e[1])*u);let d=Ixe-i*2;if(s>d||l>d){let f=d/Math.max(s,l);s=Math.round(s*f),l=Math.round(l*f),c+=Math.log2(f)}}return a?new Pi({id:n.id,x:i,y:i,width:s,height:l,longitude:o[0],latitude:o[1],zoom:c,orthographic:!0}):new Kh({id:n.id,x:i,y:i,width:s,height:l,target:o,zoom:c,flipY:!1})}function Rxe(t,e){let n;if(e&&e.length===2){let[o,s]=e,l=t.getBounds({z:o}),c=t.getBounds({z:s});n=[Math.min(l[0],c[0]),Math.min(l[1],c[1]),Math.max(l[2],c[2]),Math.max(l[3],c[3])]}else n=t.getBounds();let i=t.projectPosition(n.slice(0,2)),a=t.projectPosition(n.slice(2,4));return[i[0],i[1],a[0],a[1]]}function QK(t,e,n){if(!t)return[0,0,1,1];let i=Rxe(e,n),a=Pxe(i);return t[2]-t[0]<=a[2]-a[0]&&t[3]-t[1]<=a[3]-a[1]?t:[Math.max(t[0],a[0]),Math.max(t[1],a[1]),Math.min(t[2],a[2]),Math.min(t[3],a[3])]}function Pxe(t){let e=t[2]-t[0],n=t[3]-t[1],i=(t[0]+t[2])/2,a=(t[1]+t[3])/2;return[i-e,a-n,i+e,a+n]}var yE=class{constructor(){A(this,"id","mask-effect"),A(this,"props",null),A(this,"useInPicking",!0),A(this,"order",0),A(this,"dummyMaskMap",void 0),A(this,"channels",[]),A(this,"masks",null),A(this,"maskPass",void 0),A(this,"maskMap",void 0),A(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:i,viewports:a,onViewportActive:o,views:s,isPicking:l}){let c=!1;if(this.dummyMaskMap||(this.dummyMaskMap=new jt(e,{width:1,height:1})),l)return{didRender:c};let u=n.filter(h=>h.props.visible&&h.props.operation.includes("mask"));if(u.length===0)return this.masks=null,this.channels.length=0,{didRender:c};this.masks={},this.maskPass||(this.maskPass=new vE(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);let d=this._sortMaskChannels(u),f=a[0],p=!this.lastViewport||!this.lastViewport.equals(f);if(f.resolution!==void 0)return at.warn("MaskExtension is not supported in GlobeView")(),{didRender:c};for(let h in d){let m=this._renderChannel(d[h],{layerFilter:i,onViewportActive:o,views:s,viewport:f,viewportChanged:p});c||(c=m)}return{didRender:c}}_renderChannel(e,{layerFilter:n,onViewportActive:i,views:a,viewport:o,viewportChanged:s}){let l=!1,c=this.channels[e.index];if(!c)return l;let u=e===c||e.layers.length!==c.layers.length||e.layers.some((d,f)=>d!==c.layers[f]||d.props.transitions)||e.layerBounds.some((d,f)=>d!==c.layerBounds[f]);if(e.bounds=c.bounds,e.maskBounds=c.maskBounds,this.channels[e.index]=e,u||s){this.lastViewport=o;let d=YK(e.layers,o);if(e.bounds=d&&QK(d,o),u||!Kn(e.bounds,c.bounds)){let{maskPass:f,maskMap:p}=this,h=d&&JK({bounds:e.bounds,viewport:o,width:p.width,height:p.height,border:1});e.maskBounds=h?h.getBounds():[0,0,1,1],f.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:h?[h]:[],onViewportActive:i,views:a,moduleParameters:{devicePixelRatio:1}}),l=!0}}return this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem},l}_sortMaskChannels(e){let n={},i=0;for(let a of e){let{id:o}=a.root,s=n[o];if(!s){if(++i>4){at.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(l=>(l==null?void 0:l.id)===o),layers:[],layerBounds:[],coordinateOrigin:a.root.props.coordinateOrigin,coordinateSystem:a.root.props.coordinateSystem},n[o]=s}s.layers.push(a),s.layerBounds.push(a.getBounds())}for(let a=0;a<4;a++){let o=this.channels[a];(!o||!(o.id in n))&&(this.channels[a]=null)}for(let a in n){let o=n[a];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}};var Aw=2,xE=class{constructor(){A(this,"id","collision-filter-effect"),A(this,"props",null),A(this,"useInPicking",!0),A(this,"order",1),A(this,"channels",{}),A(this,"collisionFilterPass",void 0),A(this,"collisionFBOs",{}),A(this,"dummyCollisionMap",void 0),A(this,"lastViewport",void 0)}preRender(e,{effects:n,layers:i,layerFilter:a,viewports:o,onViewportActive:s,views:l,isPicking:c,preRenderStats:u={}}){var d;if(this.dummyCollisionMap||(this.dummyCollisionMap=new jt(e,{width:1,height:1})),c)return;let f=i.filter(({props:{visible:v,collisionEnabled:y}})=>v&&y);if(f.length===0){this.channels={};return}this.collisionFilterPass||(this.collisionFilterPass=new EE(e,{id:"default-collision-filter"}));let p=n==null?void 0:n.filter(v=>v.constructor===yE),h=(d=u["mask-effect"])===null||d===void 0?void 0:d.didRender,m=this._groupByCollisionGroup(e,f),_=o[0],E=!this.lastViewport||!this.lastViewport.equals(_)||h;for(let v in m){let y=this.collisionFBOs[v],x=m[v];y.resize({width:e.canvas.width/Aw,height:e.canvas.height/Aw}),this._render(x,{effects:p,layerFilter:a,onViewportActive:s,views:l,viewport:_,viewportChanged:E})}}_render(e,{effects:n,layerFilter:i,onViewportActive:a,views:o,viewport:s,viewportChanged:l}){let{collisionGroup:c}=e,u=this.channels[c];if(!u)return;let d=l||e===u||!Dn(u.layers,e.layers,1)||e.layerBounds.some((f,p)=>!Kn(f,u.layerBounds[p]))||e.allLayersLoaded!==u.allLayersLoaded||e.layers.some(f=>f.props.transitions);if(this.channels[c]=e,d){this.lastViewport=s;let f=this.collisionFBOs[c];this.collisionFilterPass.renderCollisionMap(f,{pass:"collision-filter",isPicking:!0,layers:e.layers,effects:n,layerFilter:i,viewports:s?[s]:[],onViewportActive:a,views:o,moduleParameters:{dummyCollisionMap:this.dummyCollisionMap,devicePixelRatio:ro(f.gl)/Aw}})}}_groupByCollisionGroup(e,n){let i={};for(let a of n){let{collisionGroup:o}=a.props,s=i[o];s||(s={collisionGroup:o,layers:[],layerBounds:[],allLayersLoaded:!0},i[o]=s),s.layers.push(a),s.layerBounds.push(a.getBounds()),a.isLoaded||(s.allLayersLoaded=!1)}for(let a of Object.keys(i))this.collisionFBOs[a]||this.createFBO(e,a),this.channels[a]||(this.channels[a]=i[a]);for(let a of Object.keys(this.collisionFBOs))i[a]||this.destroyFBO(a);return i}getModuleParameters(e){let{collisionGroup:n}=e.props,{collisionFBOs:i,dummyCollisionMap:a}=this;return{collisionFBO:i[n],dummyCollisionMap:a}}cleanup(){this.dummyCollisionMap&&(this.dummyCollisionMap.delete(),this.dummyCollisionMap=void 0),this.channels={};for(let e of Object.keys(this.collisionFBOs))this.destroyFBO(e);this.collisionFBOs={},this.lastViewport=void 0}createFBO(e,n){let{width:i,height:a}=e.canvas,o=new jt(e,{width:i,height:a,parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071}}),s=new $i(e,{format:33189,width:i,height:a});this.collisionFBOs[n]=new Ht(e,{id:"Collision-".concat(n),width:i,height:a,attachments:{[36064]:o,[36096]:s}})}destroyFBO(e){let n=this.collisionFBOs[e];for(let i of Object.values(n.attachments))i.delete();n.delete(),delete this.collisionFBOs[e]}};var Mxe={getCollisionPriority:{type:"accessor",value:0},collisionEnabled:!0,collisionGroup:{type:"string",value:"default"},collisionTestProps:{}},Mc=class extends vl{getShaders(){return{modules:[KK]}}draw({uniforms:e,context:n,moduleParameters:i}){let{collisionEnabled:a}=this.props,{collisionFBO:o,drawToCollisionMap:s}=i,l=a&&!!o;e.collision_enabled=l,s&&(this.props=this.clone(this.props.collisionTestProps).props)}initializeState(e,n){var i;if(this.getAttributeManager()===null)return;(i=this.context.deck)===null||i===void 0||i._addDefaultEffect(new xE),this.getAttributeManager().add({collisionPriorities:{size:1,accessor:"getCollisionPriority",shaderAttributes:{collisionPriorities:{divisor:0},instanceCollisionPriorities:{divisor:1}}}})}getNeedsPickingBuffer(){return this.props.collisionEnabled}};A(Mc,"defaultProps",Mxe);A(Mc,"extensionName","CollisionFilterExtension");function ha(t,e,n){return t.fields=e||[],t.fname=n,t}function Hr(t){return t==null?null:t.fname}function fi(t){return t==null?null:t.fields}function tY(t){return t.length===1?Lxe(t[0]):Oxe(t)}var Lxe=t=>function(e){return e[t]},Oxe=t=>{let e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function he(t){throw Error(t)}function sy(t){let e=[],n=t.length,i=null,a=0,o="",s,l,c;t=t+"";function u(){e.push(o+t.substring(s,l)),o="",s=l+1}for(s=l=0;l<n;++l)if(c=t[l],c==="\\")o+=t.substring(s,l++),s=l;else if(c===i)u(),i=null,a=-1;else{if(i)continue;s===a&&c==='"'||s===a&&c==="'"?(s=l+1,i=c):c==="."&&!a?l>s?u():s=l+1:c==="["?(l>s&&u(),a=s=l+1):c==="]"&&(a||he("Access path missing open bracket: "+t),a>0&&u(),a=0,s=l+1)}return a&&he("Access path missing closing bracket: "+t),i&&he("Access path missing closing quote: "+t),l>s&&(l++,u()),e}function Mi(t,e,n){let i=sy(t);return t=i.length===1?i[0]:t,ha((n&&n.get||tY)(i),[t],e||t)}var bE=Mi("id"),Jn=ha(t=>t,[],"identity"),wl=ha(()=>0,[],"zero"),Lc=ha(()=>1,[],"one"),pi=ha(()=>!0,[],"true"),ed=ha(()=>!1,[],"false");function Bxe(t,e,n){let i=[e].concat([].slice.call(n));console[t].apply(console,i)}var Dxe=0,Tw=1,Fxe=2,kxe=3,Gxe=4;function rY(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bxe,i=t||Dxe;return{level(a){return arguments.length?(i=+a,this):i},error(){return i>=Tw&&n(e||"error","ERROR",arguments),this},warn(){return i>=Fxe&&n(e||"warn","WARN",arguments),this},info(){return i>=kxe&&n(e||"log","INFO",arguments),this},debug(){return i>=Gxe&&n(e||"log","DEBUG",arguments),this}}}var ot=Array.isArray;function Lt(t){return t===Object(t)}var eY=t=>t!=="__proto__";function nY(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((i,a)=>{for(let o in a)if(o==="signals")i.signals=Uxe(i.signals,a.signals);else{let s=o==="legend"?{layout:1}:o==="style"?!0:null;iY(i,o,a[o],s)}return i},{})}function iY(t,e,n,i){if(!eY(e))return;let a,o;if(Lt(n)&&!ot(n)){o=Lt(t[e])?t[e]:t[e]={};for(a in n)i&&(i===!0||i[a])?iY(o,a,n[a]):eY(a)&&(o[a]=n[a])}else t[e]=n}function Uxe(t,e){if(t==null)return e;let n={},i=[];function a(o){n[o.name]||(n[o.name]=1,i.push(o))}return e.forEach(a),t.forEach(a),i}function Vt(t){return t[t.length-1]}function kn(t){return t==null||t===""?null:+t}var aY=t=>e=>t*Math.exp(e),oY=t=>e=>Math.log(t*e),sY=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),lY=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,oy=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function ly(t,e,n,i){let a=n(t[0]),o=n(Vt(t)),s=(o-a)*e;return[i(a-s),i(o-s)]}function cY(t,e){return ly(t,e,kn,Jn)}function uY(t,e){var n=Math.sign(t[0]);return ly(t,e,oY(n),aY(n))}function dY(t,e,n){return ly(t,e,oy(n),oy(1/n))}function fY(t,e,n){return ly(t,e,sY(n),lY(n))}function cy(t,e,n,i,a){let o=i(t[0]),s=i(Vt(t)),l=e!=null?i(e):(o+s)/2;return[a(l+(o-l)*n),a(l+(s-l)*n)]}function uy(t,e,n){return cy(t,e,n,kn,Jn)}function dy(t,e,n){let i=Math.sign(t[0]);return cy(t,e,n,oY(i),aY(i))}function SE(t,e,n,i){return cy(t,e,n,oy(i),oy(1/i))}function fy(t,e,n,i){return cy(t,e,n,sY(i),lY(i))}function pY(t){return 1+~~(new Date(t).getMonth()/3)}function hY(t){return 1+~~(new Date(t).getUTCMonth()/3)}function st(t){return t!=null?ot(t)?t:[t]:[]}function mY(t,e,n){let i=t[0],a=t[1],o;return a<i&&(o=a,a=i,i=o),o=a-i,o>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-o),i+o]}function wt(t){return typeof t=="function"}var Vxe="descending";function py(t,e,n){n=n||{},e=st(e)||[];let i=[],a=[],o={},s=n.comparator||$xe;return st(t).forEach((l,c)=>{l!=null&&(i.push(e[c]===Vxe?-1:1),a.push(l=wt(l)?l:Mi(l,null,n)),(fi(l)||[]).forEach(u=>o[u]=1))}),a.length===0?null:ha(s(a,i),Object.keys(o))}var hy=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),$xe=(t,e)=>t.length===1?zxe(t[0],e[0]):jxe(t,e,t.length),zxe=(t,e)=>function(n,i){return hy(t(n),t(i))*e},jxe=(t,e,n)=>(e.push(0),function(i,a){let o,s=0,l=-1;for(;s===0&&++l<n;)o=t[l],s=hy(o(i),o(a));return s*e[l]});function en(t){return wt(t)?t:()=>t}function my(t,e){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(e(i),n=null),t)}}function St(t){for(let e,n,i=1,a=arguments.length;i<a;++i){e=arguments[i];for(n in e)t[n]=e[n]}return t}function Fa(t,e){let n=0,i,a,o,s;if(t&&(i=t.length))if(e==null){for(a=t[n];n<i&&(a==null||a!==a);a=t[++n]);for(o=s=a;n<i;++n)a=t[n],a!=null&&(a<o&&(o=a),a>s&&(s=a))}else{for(a=e(t[n]);n<i&&(a==null||a!==a);a=e(t[++n]));for(o=s=a;n<i;++n)a=e(t[n]),a!=null&&(a<o&&(o=a),a>s&&(s=a))}return[o,s]}function gY(t,e){let n=t.length,i=-1,a,o,s,l,c;if(e==null){for(;++i<n;)if(o=t[i],o!=null&&o>=o){a=s=o;break}if(i===n)return[-1,-1];for(l=c=i;++i<n;)o=t[i],o!=null&&(a>o&&(a=o,l=i),s<o&&(s=o,c=i))}else{for(;++i<n;)if(o=e(t[i],i,t),o!=null&&o>=o){a=s=o;break}if(i===n)return[-1,-1];for(l=c=i;++i<n;)o=e(t[i],i,t),o!=null&&(a>o&&(a=o,l=i),s<o&&(s=o,c=i))}return[l,c]}var Hxe=Object.prototype.hasOwnProperty;function ut(t,e){return Hxe.call(t,e)}var iy={};function Mp(t){let e={},n;function i(o){return ut(e,o)&&e[o]!==iy}let a={size:0,empty:0,object:e,has:i,get(o){return i(o)?e[o]:void 0},set(o,s){return i(o)||(++a.size,e[o]===iy&&--a.empty),e[o]=s,this},delete(o){return i(o)&&(--a.size,++a.empty,e[o]=iy),this},clear(){a.size=a.empty=0,a.object=e={}},test(o){return arguments.length?(n=o,a):n},clean(){let o={},s=0;for(let l in e){let c=e[l];c!==iy&&(!n||!n(c))&&(o[l]=c,++s)}a.size=s,a.empty=0,a.object=e=o}};return t&&Object.keys(t).forEach(o=>{a.set(o,t[o])}),a}function _Y(t,e,n,i,a,o){if(!n&&n!==0)return o;let s=+n,l=t[0],c=Vt(t),u;c<l&&(u=l,l=c,c=u),u=Math.abs(e-l);let d=Math.abs(c-e);return u<d&&u<=s?i:d<=s?a:o}function ze(t,e,n){let i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),St(i,n)}function Lp(t,e,n,i){let a=e[0],o=e[e.length-1],s;return a>o&&(s=a,a=o,o=s),n=n===void 0||n,i=i===void 0||i,(n?a<=t:a<t)&&(i?t<=o:t<o)}function EY(t){return typeof t=="boolean"}function Il(t){return Object.prototype.toString.call(t)==="[object Date]"}function vY(t){return t&&wt(t[Symbol.iterator])}function Oc(t){return typeof t=="number"}function yY(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function fr(t){return typeof t=="string"}function gy(t,e,n){t&&(t=e?st(t).map(l=>l.replace(/\\(.)/g,"$1")):st(t));let i=t&&t.length,a=n&&n.get||tY,o=l=>a(e?[l]:sy(l)),s;if(!i)s=function(){return""};else if(i===1){let l=o(t[0]);s=function(c){return""+l(c)}}else{let l=t.map(o);s=function(c){let u=""+l[0](c),d=0;for(;++d<i;)u+="|"+l[d](c);return u}}return ha(s,t,"key")}function xY(t,e){let n=t[0],i=Vt(t),a=+e;return a?a===1?i:n+a*(i-n):n}var Wxe=1e4;function bY(t){t=+t||Wxe;let e,n,i,a=()=>{e={},n={},i=0},o=(s,l)=>(++i>t&&(n=e,e={},i=1),e[s]=l);return a(),{clear:a,has:s=>ut(e,s)||ut(n,s),get:s=>ut(e,s)?e[s]:ut(n,s)?o(s,n[s]):void 0,set:(s,l)=>ut(e,s)?e[s]=l:o(s,l)}}function SY(t,e,n,i){let a=e.length,o=n.length;if(!o)return e;if(!a)return n;let s=i||new e.constructor(a+o),l=0,c=0,u=0;for(;l<a&&c<o;++u)s[u]=t(e[l],n[c])>0?n[c++]:e[l++];for(;l<a;++l,++u)s[u]=e[l];for(;c<o;++c,++u)s[u]=n[c];return s}function ay(t,e){let n="";for(;--e>=0;)n+=t;return n}function NY(t,e,n,i){let a=n||" ",o=t+"",s=e-o.length;return s<=0?o:i==="left"?ay(a,s)+o:i==="center"?ay(a,~~(s/2))+o+ay(a,Math.ceil(s/2)):o+ay(a,s)}function td(t){return t&&Vt(t)-t[0]||0}function ht(t){return ot(t)?"["+t.map(ht)+"]":Lt(t)||fr(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function _y(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}var Zxe=t=>Oc(t)||Il(t)?t:Date.parse(t);function Ey(t,e){return e=e||Zxe,t==null||t===""?null:e(t)}function vy(t){return t==null||t===""?null:t+""}function hi(t){let e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}function yy(t,e,n,i){let a=i!=null?i:"\u2026",o=t+"",s=o.length,l=Math.max(0,e-a.length);return s<=e?o:n==="left"?a+o.slice(s-l):n==="center"?o.slice(0,Math.ceil(l/2))+a+o.slice(s-~~(l/2)):o.slice(0,l)+a}function rd(t,e,n){if(t)if(e){let i=t.length;for(let a=0;a<i;++a){let o=e(t[a]);o&&n(o,a,t)}}else t.forEach(n)}var AY={},Cw={},ww=34,NE=10,Iw=13;function CY(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Xxe(t,e){var n=CY(t);return function(i,a){return e(n(i),a,t)}}function TY(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var a in i)a in e||n.push(e[a]=a)}),n}function ka(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function qxe(t){return t<0?"-"+ka(-t,6):t>9999?"+"+ka(t,6):ka(t,4)}function Kxe(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":qxe(t.getUTCFullYear(),4)+"-"+ka(t.getUTCMonth()+1,2)+"-"+ka(t.getUTCDate(),2)+(a?"T"+ka(e,2)+":"+ka(n,2)+":"+ka(i,2)+"."+ka(a,3)+"Z":i?"T"+ka(e,2)+":"+ka(n,2)+":"+ka(i,2)+"Z":n||e?"T"+ka(e,2)+":"+ka(n,2)+"Z":"")}function Rw(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(f,p){var h,m,_=a(f,function(E,v){if(h)return h(E,v-1);m=E,h=p?Xxe(E,p):CY(E)});return _.columns=m||[],_}function a(f,p){var h=[],m=f.length,_=0,E=0,v,y=m<=0,x=!1;f.charCodeAt(m-1)===NE&&--m,f.charCodeAt(m-1)===Iw&&--m;function S(){if(y)return Cw;if(x)return x=!1,AY;var w,T=_,I;if(f.charCodeAt(T)===ww){for(;_++<m&&f.charCodeAt(_)!==ww||f.charCodeAt(++_)===ww;);return(w=_)>=m?y=!0:(I=f.charCodeAt(_++))===NE?x=!0:I===Iw&&(x=!0,f.charCodeAt(_)===NE&&++_),f.slice(T+1,w-1).replace(/""/g,'"')}for(;_<m;){if((I=f.charCodeAt(w=_++))===NE)x=!0;else if(I===Iw)x=!0,f.charCodeAt(_)===NE&&++_;else if(I!==n)continue;return f.slice(T,w)}return y=!0,f.slice(T,m)}for(;(v=S())!==Cw;){for(var N=[];v!==AY&&v!==Cw;)N.push(v),v=S();p&&(N=p(N,E++))==null||h.push(N)}return h}function o(f,p){return f.map(function(h){return p.map(function(m){return d(h[m])}).join(t)})}function s(f,p){return p==null&&(p=TY(f)),[p.map(d).join(t)].concat(o(f,p)).join(`
`)}function l(f,p){return p==null&&(p=TY(f)),o(f,p).join(`
`)}function c(f){return f.map(u).join(`
`)}function u(f){return f.map(d).join(t)}function d(f){return f==null?"":f instanceof Date?Kxe(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:a,format:s,formatBody:l,formatRows:c,formatRow:u,formatValue:d}}function Pw(t){return t}function xy(t){if(t==null)return Pw;var e,n,i=t.scale[0],a=t.scale[1],o=t.translate[0],s=t.translate[1];return function(l,c){c||(e=n=0);var u=2,d=l.length,f=new Array(d);for(f[0]=(e+=l[0])*i+o,f[1]=(n+=l[1])*a+s;u<d;)f[u]=l[u],++u;return f}}function wY(t,e){for(var n,i=t.length,a=i-e;a<--i;)n=t[a],t[a++]=t[i],t[i]=n}function Mw(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return IY(t,n)})}:IY(t,e)}function IY(t,e){var n=e.id,i=e.bbox,a=e.properties==null?{}:e.properties,o=by(t,e);return n==null&&i==null?{type:"Feature",properties:a,geometry:o}:i==null?{type:"Feature",id:n,properties:a,geometry:o}:{type:"Feature",id:n,bbox:i,properties:a,geometry:o}}function by(t,e){var n=xy(t.transform),i=t.arcs;function a(d,f){f.length&&f.pop();for(var p=i[d<0?~d:d],h=0,m=p.length;h<m;++h)f.push(n(p[h],h));d<0&&wY(f,m)}function o(d){return n(d)}function s(d){for(var f=[],p=0,h=d.length;p<h;++p)a(d[p],f);return f.length<2&&f.push(f[0]),f}function l(d){for(var f=s(d);f.length<4;)f.push(f[0]);return f}function c(d){return d.map(l)}function u(d){var f=d.type,p;switch(f){case"GeometryCollection":return{type:f,geometries:d.geometries.map(u)};case"Point":p=o(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(o);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=c(d.arcs);break;case"MultiPolygon":p=d.arcs.map(c);break;default:return null}return{type:f,coordinates:p}}return u(e)}function Lw(t,e){var n={},i={},a={},o=[],s=-1;e.forEach(function(u,d){var f=t.arcs[u<0?~u:u],p;f.length<3&&!f[1][0]&&!f[1][1]&&(p=e[++s],e[s]=u,e[d]=p)}),e.forEach(function(u){var d=l(u),f=d[0],p=d[1],h,m;if(h=a[f])if(delete a[h.end],h.push(u),h.end=p,m=i[p]){delete i[m.start];var _=m===h?h:h.concat(m);i[_.start=h.start]=a[_.end=m.end]=_}else i[h.start]=a[h.end]=h;else if(h=i[p])if(delete i[h.start],h.unshift(u),h.start=f,m=a[f]){delete a[m.end];var E=m===h?h:m.concat(h);i[E.start=m.start]=a[E.end=h.end]=E}else i[h.start]=a[h.end]=h;else h=[u],i[h.start=f]=a[h.end=p]=h});function l(u){var d=t.arcs[u<0?~u:u],f=d[0],p;return t.transform?(p=[0,0],d.forEach(function(h){p[0]+=h[0],p[1]+=h[1]})):p=d[d.length-1],u<0?[p,f]:[f,p]}function c(u,d){for(var f in u){var p=u[f];delete d[p.start],delete p.start,delete p.end,p.forEach(function(h){n[h<0?~h:h]=1}),o.push(p)}}return c(a,i),c(i,a),e.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function Ow(t){return by(t,RY.apply(this,arguments))}function RY(t,e,n){var i,a,o;if(arguments.length>1)i=Yxe(t,e,n);else for(a=0,i=new Array(o=t.arcs.length);a<o;++a)i[a]=a;return{type:"MultiLineString",arcs:Lw(t,i)}}function Yxe(t,e,n){var i=[],a=[],o;function s(f){var p=f<0?~f:f;(a[p]||(a[p]=[])).push({i:f,g:o})}function l(f){f.forEach(s)}function c(f){f.forEach(l)}function u(f){f.forEach(c)}function d(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(d);break;case"LineString":l(f.arcs);break;case"MultiLineString":case"Polygon":c(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return d(e),a.forEach(n==null?function(f){i.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&i.push(f[0].i)}),i}function Zi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bw(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rs(t){let e,n,i;t.length!==2?(e=Zi,n=(l,c)=>Zi(t(l),c),i=(l,c)=>t(l)-c):(e=t===Zi||t===Bw?t:ebe,n=t,i=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{let f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{let f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){let f=a(l,c,u,d-1);return f>u&&i(l[f-1],c)>-i(l[f],c)?f-1:f}return{left:a,center:s,right:o}}function ebe(){return 0}function AE(t){return t===null?NaN:+t}function*PY(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}var MY=Rs(Zi),Op=MY.right,Dw=MY.left,tbe=Rs(AE).center,Ps=Op;function Fw(t,e){let n=0,i,a=0,o=0;if(e===void 0)for(let s of t)s!=null&&(s=+s)>=s&&(i=s-a,a+=i/++n,o+=i*(s-a));else{let s=-1;for(let l of t)(l=e(l,++s,t))!=null&&(l=+l)>=l&&(i=l-a,a+=i/++n,o+=i*(l-a))}if(n>1)return o/(n-1)}function Sy(t,e){let n=Fw(t,e);return n&&Math.sqrt(n)}var Wr=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let n=this._partials,i=0;for(let a=0;a<this._n&&a<32;a++){let o=n[a],s=e+o,l=Math.abs(e)<Math.abs(o)?e-(s-o):o-(s-e);l&&(n[i++]=l),e=s}return n[i]=e,this._n=i+1,this}valueOf(){let e=this._partials,n=this._n,i,a,o,s=0;if(n>0){for(s=e[--n];n>0&&(i=s,a=e[--n],s=i+a,o=a-(s-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(a=o*2,i=s+a,a==i-s&&(s=i))}return s}};var O0=class extends Map{constructor(e,n=BY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(let[i,a]of e)this.set(i,a)}get(e){return super.get(kw(this,e))}has(e){return super.has(kw(this,e))}set(e,n){return super.set(LY(this,e),n)}delete(e){return super.delete(OY(this,e))}},Bc=class extends Set{constructor(e,n=BY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(let i of e)this.add(i)}has(e){return super.has(kw(this,e))}add(e){return super.add(LY(this,e))}delete(e){return super.delete(OY(this,e))}};function kw({_intern:t,_key:e},n){let i=e(n);return t.has(i)?t.get(i):n}function LY({_intern:t,_key:e},n){let i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function OY({_intern:t,_key:e},n){let i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function BY(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ny(t,e){return Array.from(e,n=>t[n])}function DY(t=Zi){if(t===Zi)return Gw;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{let i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Gw(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var rbe=Math.sqrt(50),nbe=Math.sqrt(10),ibe=Math.sqrt(2);function Ay(t,e,n){let i=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(i)),o=i/Math.pow(10,a),s=o>=rbe?10:o>=nbe?5:o>=ibe?2:1,l,c,u;return a<0?(u=Math.pow(10,-a)/s,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*s,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?Ay(t,e,n*2):[l,c,u]}function Bp(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];let i=e<t,[a,o,s]=i?Ay(e,t,n):Ay(t,e,n);if(!(o>=a))return[];let l=o-a+1,c=new Array(l);if(i)if(s<0)for(let u=0;u<l;++u)c[u]=(o-u)/-s;else for(let u=0;u<l;++u)c[u]=(o-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(a+u)/-s;else for(let u=0;u<l;++u)c[u]=(a+u)*s;return c}function TE(t,e,n){return e=+e,t=+t,n=+n,Ay(t,e,n)[2]}function ma(t,e,n){e=+e,t=+t,n=+n;let i=e<t,a=i?TE(e,t,n):TE(t,e,n);return(i?-1:1)*(a<0?1/-a:a)}function Zo(t,e){let n;if(e===void 0)for(let i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}return n}function Dp(t,e){let n;if(e===void 0)for(let i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a)}return n}function Ty(t,e,n=0,i=1/0,a){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(a=a===void 0?Gw:DY(a);i>n;){if(i-n>600){let c=i-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/c+p)),m=Math.min(i,Math.floor(e+(c-u)*f/c+p));Ty(t,e,h,m,a)}let o=t[e],s=n,l=i;for(CE(t,n,e),a(t[i],o)>0&&CE(t,n,i);s<l;){for(CE(t,s,l),++s,--l;a(t[s],o)<0;)++s;for(;a(t[l],o)>0;)--l}a(t[n],o)===0?CE(t,n,l):(++l,CE(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function CE(t,e,n){let i=t[e];t[e]=t[n],t[n]=i}function Fp(t,e,n){if(t=Float64Array.from(PY(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return Dp(t);if(e>=1)return Zo(t);var i,a=(i-1)*e,o=Math.floor(a),s=Zo(Ty(t,o).subarray(0,o+1)),l=Dp(t.subarray(o+1));return s+(l-s)*(a-o)}}function wE(t,e,n=AE){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*e,o=Math.floor(a),s=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return s+(l-s)*(a-o)}}function Cy(t,e){let n=0,i=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(++n,i+=a);else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function B0(t,e){return Fp(t,.5,e)}function*obe(t){for(let e of t)yield*e}function D0(t){return Array.from(obe(t))}function Tn(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var i=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(a);++i<a;)o[i]=t+i*n;return o}function F0(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let a of t)(a=+e(a,++i,t))&&(n+=a)}return n}function FY(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kp(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Rl(t){return t=kp(Math.abs(t)),t?t[1]:NaN}function kY(t,e){return function(n,i){for(var a=n.length,o=[],s=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),o.push(n.substring(a-=l,a+l)),!((c+=l+1)>i));)l=t[s=(s+1)%t.length];return o.reverse().join(e)}}function GY(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var sbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mo(t){if(!(e=sbe.exec(t)))throw new Error("invalid format: "+t);var e;return new wy({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}mo.prototype=wy.prototype;function wy(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UY(t){e:for(var e=t.length,n=1,i=-1,a;n<e;++n)switch(t[n]){case".":i=a=n;break;case"0":i===0&&(i=n),a=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(a+1):t}var Uw;function VY(t,e){var n=kp(t,e);if(!n)return t+"";var i=n[0],a=n[1],o=a-(Uw=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+kp(t,Math.max(0,e+o-1))[0]}function Vw(t,e){var n=kp(t,e);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}var $w={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:FY,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Vw(t*100,e),r:Vw,s:VY,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function zw(t){return t}var $Y=Array.prototype.map,zY=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function IE(t){var e=t.grouping===void 0||t.thousands===void 0?zw:kY($Y.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?zw:GY($Y.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"\u2212":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=mo(f);var p=f.fill,h=f.align,m=f.sign,_=f.symbol,E=f.zero,v=f.width,y=f.comma,x=f.precision,S=f.trim,N=f.type;N==="n"?(y=!0,N="g"):$w[N]||(x===void 0&&(x=12),S=!0,N="g"),(E||p==="0"&&h==="=")&&(E=!0,p="0",h="=");var w=_==="$"?n:_==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",T=_==="$"?i:/[%p]/.test(N)?s:"",I=$w[N],R=/[defgprs%]/.test(N);x=x===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function L(O){var H=w,U=T,X,W,ne;if(N==="c")U=I(O)+U,O="";else{O=+O;var be=O<0||1/O<0;if(O=isNaN(O)?c:I(Math.abs(O),x),S&&(O=UY(O)),be&&+O==0&&m!=="+"&&(be=!1),H=(be?m==="("?m:l:m==="-"||m==="("?"":m)+H,U=(N==="s"?zY[8+Uw/3]:"")+U+(be&&m==="("?")":""),R){for(X=-1,W=O.length;++X<W;)if(ne=O.charCodeAt(X),48>ne||ne>57){U=(ne===46?a+O.slice(X+1):O.slice(X))+U,O=O.slice(0,X);break}}}y&&!E&&(O=e(O,1/0));var q=H.length+O.length+U.length,ie=q<v?new Array(v-q+1).join(p):"";switch(y&&E&&(O=e(ie+O,ie.length?v-U.length:1/0),ie=""),h){case"<":O=H+O+U+ie;break;case"=":O=H+ie+O+U;break;case"^":O=ie.slice(0,q=ie.length>>1)+H+O+U+ie.slice(q);break;default:O=ie+H+O+U;break}return o(O)}return L.toString=function(){return f+""},L}function d(f,p){var h=u((f=mo(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Rl(p)/3)))*3,_=Math.pow(10,-m),E=zY[8+m/3];return function(v){return h(_*v)+E}}return{format:u,formatPrefix:d}}var Iy,nd,k0;jw({thousands:",",grouping:[3],currency:["$",""]});function jw(t){return Iy=IE(t),nd=Iy.format,k0=Iy.formatPrefix,Iy}function RE(t){return Math.max(0,-Rl(Math.abs(t)))}function PE(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rl(e)/3)))*3-Rl(Math.abs(t)))}function ME(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Rl(e)-Rl(t))+1}var Hw=new Date,Ww=new Date;function Rr(t,e,n,i){function a(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(t(o=new Date(+o)),o),a.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),a.round=o=>{let s=a(o),l=a.ceil(o);return o-s<l-o?s:l},a.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),a.range=(o,s,l)=>{let c=[];if(o=a.ceil(o),l=l==null?1:Math.floor(l),!(o<s)||!(l>0))return c;let u;do c.push(u=new Date(+o)),e(o,l),t(o);while(u<o&&o<s);return c},a.filter=o=>Rr(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!o(s););else for(;--l>=0;)for(;e(s,1),!o(s););}),n&&(a.count=(o,s)=>(Hw.setTime(+o),Ww.setTime(+s),t(Hw),t(Ww),Math.floor(n(Hw,Ww))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(i?s=>i(s)%o===0:s=>a.count(0,s)%o===0):a)),a}var Ms=Rr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ms.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Rr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ms);var jY=Ms.range;var Xi=Rr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*1e3)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),HY=Xi.range;var id=Rr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getMinutes()),lbe=id.range,ad=Rr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes()),cbe=ad.range;var od=Rr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getHours()),ube=od.range,sd=Rr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours()),dbe=sd.range;var Ga=Rr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),fbe=Ga.range,Xo=Rr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>t.getUTCDate()-1),pbe=Xo.range,Ry=Rr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>Math.floor(t/864e5)),hbe=Ry.range;function Vp(t){return Rr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}var qo=Vp(0),G0=Vp(1),ZY=Vp(2),XY=Vp(3),ld=Vp(4),qY=Vp(5),KY=Vp(6),YY=qo.range,mbe=G0.range,gbe=ZY.range,_be=XY.range,Ebe=ld.range,vbe=qY.range,ybe=KY.range;function $p(t){return Rr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/6048e5)}var Ko=$p(0),U0=$p(1),JY=$p(2),QY=$p(3),cd=$p(4),eJ=$p(5),tJ=$p(6),rJ=Ko.range,xbe=U0.range,bbe=JY.range,Sbe=QY.range,Nbe=cd.range,Abe=eJ.range,Tbe=tJ.range;var Dc=Rr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),Cbe=Dc.range,Fc=Rr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),wbe=Fc.range;var ga=Rr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ga.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});var Ibe=ga.range,_a=Rr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());_a.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});var Rbe=_a.range;function iJ(t,e,n,i,a,o){let s=[[Xi,1,1e3],[Xi,5,5*1e3],[Xi,15,15*1e3],[Xi,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[a,1,36e5],[a,3,3*36e5],[a,6,6*36e5],[a,12,12*36e5],[i,1,864e5],[i,2,2*864e5],[n,1,6048e5],[e,1,2592e6],[e,3,3*2592e6],[t,1,31536e6]];function l(u,d,f){let p=d<u;p&&([u,d]=[d,u]);let h=f&&typeof f.range=="function"?f:c(u,d,f),m=h?h.range(u,+d+1):[];return p?m.reverse():m}function c(u,d,f){let p=Math.abs(d-u)/f,h=Rs(([,,E])=>E).right(s,p);if(h===s.length)return t.every(ma(u/31536e6,d/31536e6,f));if(h===0)return Ms.every(Math.max(ma(u,d,f),1));let[m,_]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return m.every(_)}return[l,c]}var[Zw,Xw]=iJ(_a,Fc,Ko,Ry,sd,ad),[qw,Kw]=iJ(ga,Dc,qo,Ga,od,id);var Li="year",Ua="quarter",Ki="month",Qn="week",Va="date",qi="day",kc="dayofyear",go="hours",_o="minutes",Yo="seconds",Ls="milliseconds",nI=[Li,Ua,Ki,Qn,Va,qi,kc,go,_o,Yo,Ls],Yw=nI.reduce((t,e,n)=>(t[e]=1+n,t),{});function iI(t){let e=st(t).slice(),n={};return e.length||he("Missing time unit."),e.forEach(a=>{ut(Yw,a)?n[a]=1:he(`Invalid time unit: ${a}.`)}),(n[Qn]||n[qi]?1:0)+(n[Ua]||n[Ki]||n[Va]?1:0)+(n[kc]?1:0)>1&&he(`Incompatible time units: ${t}`),e.sort((a,o)=>Yw[a]-Yw[o]),e}var Mbe={[Li]:"%Y ",[Ua]:"Q%q ",[Ki]:"%b ",[Va]:"%d ",[Qn]:"W%U ",[qi]:"%a ",[kc]:"%j ",[go]:"%H:00",[_o]:"00:%M",[Yo]:":%S",[Ls]:".%L",[`${Li}-${Ki}`]:"%Y-%m ",[`${Li}-${Ki}-${Va}`]:"%Y-%m-%d ",[`${go}-${_o}`]:"%H:%M"};function sJ(t,e){let n=St({},Mbe,e),i=iI(t),a=i.length,o="",s=0,l,c;for(s=0;s<a;)for(l=i.length;l>s;--l)if(c=i.slice(s,l).join("-"),n[c]!=null){o+=n[c],s=l;break}return o.trim()}var zp=new Date;function aI(t){return zp.setFullYear(t),zp.setMonth(0),zp.setDate(1),zp.setHours(0,0,0,0),zp}function lJ(t){return uJ(new Date(t))}function cJ(t){return Jw(new Date(t))}function uJ(t){return Ga.count(aI(t.getFullYear())-1,t)}function Jw(t){return qo.count(aI(t.getFullYear())-1,t)}function Qw(t){return aI(t).getDay()}function Lbe(t,e,n,i,a,o,s){if(0<=t&&t<100){let l=new Date(-1,e,n,i,a,o,s);return l.setFullYear(t),l}return new Date(t,e,n,i,a,o,s)}function dJ(t){return pJ(new Date(t))}function fJ(t){return eI(new Date(t))}function pJ(t){let e=Date.UTC(t.getUTCFullYear(),0,1);return Xo.count(e-1,t)}function eI(t){let e=Date.UTC(t.getUTCFullYear(),0,1);return Ko.count(e-1,t)}function tI(t){return zp.setTime(Date.UTC(t,0,1)),zp.getUTCDay()}function Obe(t,e,n,i,a,o,s){if(0<=t&&t<100){let l=new Date(Date.UTC(-1,e,n,i,a,o,s));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(t,e,n,i,a,o,s))}function hJ(t,e,n,i,a){let o=e||1,s=Vt(t),l=(v,y,x)=>(x=x||v,Bbe(n[x],i[x],v===s&&o,y)),c=new Date,u=hi(t),d=u[Li]?l(Li):en(2012),f=u[Ki]?l(Ki):u[Ua]?l(Ua):wl,p=u[Qn]&&u[qi]?l(qi,1,Qn+qi):u[Qn]?l(Qn,1):u[qi]?l(qi,1):u[Va]?l(Va,1):u[kc]?l(kc,1):Lc,h=u[go]?l(go):wl,m=u[_o]?l(_o):wl,_=u[Yo]?l(Yo):wl,E=u[Ls]?l(Ls):wl;return function(v){c.setTime(+v);let y=d(c);return a(y,f(c),p(c,y),h(c),m(c),_(c),E(c))}}function Bbe(t,e,n,i){let a=n<=1?t:i?(o,s)=>i+n*Math.floor((t(o,s)-i)/n):(o,s)=>n*Math.floor(t(o,s)/n);return e?(o,s)=>e(a(o,s),s):a}function V0(t,e,n){return e+t*7-(n+6)%7}var Dbe={[Li]:t=>t.getFullYear(),[Ua]:t=>Math.floor(t.getMonth()/3),[Ki]:t=>t.getMonth(),[Va]:t=>t.getDate(),[go]:t=>t.getHours(),[_o]:t=>t.getMinutes(),[Yo]:t=>t.getSeconds(),[Ls]:t=>t.getMilliseconds(),[kc]:t=>uJ(t),[Qn]:t=>Jw(t),[Qn+qi]:(t,e)=>V0(Jw(t),t.getDay(),Qw(e)),[qi]:(t,e)=>V0(1,t.getDay(),Qw(e))},Fbe={[Ua]:t=>3*t,[Qn]:(t,e)=>V0(t,0,Qw(e))};function mJ(t,e){return hJ(t,e||1,Dbe,Fbe,Lbe)}var kbe={[Li]:t=>t.getUTCFullYear(),[Ua]:t=>Math.floor(t.getUTCMonth()/3),[Ki]:t=>t.getUTCMonth(),[Va]:t=>t.getUTCDate(),[go]:t=>t.getUTCHours(),[_o]:t=>t.getUTCMinutes(),[Yo]:t=>t.getUTCSeconds(),[Ls]:t=>t.getUTCMilliseconds(),[kc]:t=>pJ(t),[Qn]:t=>eI(t),[qi]:(t,e)=>V0(1,t.getUTCDay(),tI(e)),[Qn+qi]:(t,e)=>V0(eI(t),t.getUTCDay(),tI(e))},Gbe={[Ua]:t=>3*t,[Qn]:(t,e)=>V0(t,0,tI(e))};function gJ(t,e){return hJ(t,e||1,kbe,Gbe,Obe)}var Ube={[Li]:ga,[Ua]:Dc.every(3),[Ki]:Dc,[Qn]:qo,[Va]:Ga,[qi]:Ga,[kc]:Ga,[go]:od,[_o]:id,[Yo]:Xi,[Ls]:Ms},Vbe={[Li]:_a,[Ua]:Fc.every(3),[Ki]:Fc,[Qn]:Ko,[Va]:Xo,[qi]:Xo,[kc]:Xo,[go]:sd,[_o]:ad,[Yo]:Xi,[Ls]:Ms};function ud(t){return Ube[t]}function dd(t){return Vbe[t]}function _J(t,e,n){return t?t.offset(e,n):void 0}function EJ(t,e,n){return _J(ud(t),e,n)}function vJ(t,e,n){return _J(dd(t),e,n)}function yJ(t,e,n,i){return t?t.range(e,n,i):void 0}function xJ(t,e,n,i){return yJ(ud(t),e,n,i)}function bJ(t,e,n,i){return yJ(dd(t),e,n,i)}var BE=1e3,DE=BE*60,FE=DE*60,Py=FE*24,$be=Py*7,aJ=Py*30,rI=Py*365,SJ=[Li,Ki,Va,go,_o,Yo,Ls],kE=SJ.slice(0,-1),GE=kE.slice(0,-1),UE=GE.slice(0,-1),zbe=UE.slice(0,-1),jbe=[Li,Qn],oJ=[Li,Ki],NJ=[Li],OE=[[kE,1,BE],[kE,5,5*BE],[kE,15,15*BE],[kE,30,30*BE],[GE,1,DE],[GE,5,5*DE],[GE,15,15*DE],[GE,30,30*DE],[UE,1,FE],[UE,3,3*FE],[UE,6,6*FE],[UE,12,12*FE],[zbe,1,Py],[jbe,1,$be],[oJ,1,aJ],[oJ,3,3*aJ],[NJ,1,rI]];function AJ(t){let e=t.extent,n=t.maxbins||40,i=Math.abs(td(e))/n,a=Rs(l=>l[2]).right(OE,i),o,s;return a===OE.length?(o=NJ,s=ma(e[0]/rI,e[1]/rI,n)):a?(a=OE[i/OE[a-1][2]<OE[a][2]/i?a-1:a],o=a[0],s=a[1]):(o=SJ,s=Math.max(ma(e[0],e[1],n),1)),{units:o,step:s}}function oI(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function sI(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function VE(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function $0(t){var e=t.dateTime,n=t.date,i=t.time,a=t.periods,o=t.days,s=t.shortDays,l=t.months,c=t.shortMonths,u=$E(a),d=zE(a),f=$E(o),p=zE(o),h=$E(s),m=zE(s),_=$E(l),E=zE(l),v=$E(c),y=zE(c),x={a:be,A:q,b:ie,B:ge,c:null,d:PJ,e:PJ,f:pSe,g:SSe,G:ASe,H:uSe,I:dSe,j:fSe,L:DJ,m:hSe,M:mSe,p:et,q:qe,Q:OJ,s:BJ,S:gSe,u:_Se,U:ESe,V:vSe,w:ySe,W:xSe,x:null,X:null,y:bSe,Y:NSe,Z:TSe,"%":LJ},S={a:vt,A:ar,b:Qt,B:Ai,c:null,d:MJ,e:MJ,f:RSe,g:USe,G:$Se,H:CSe,I:wSe,j:ISe,L:kJ,m:PSe,M:MSe,p:Ti,q:Ci,Q:OJ,s:BJ,S:LSe,u:OSe,U:BSe,V:DSe,w:FSe,W:kSe,x:null,X:null,y:GSe,Y:VSe,Z:zSe,"%":LJ},N={a:L,A:O,b:H,B:U,c:X,d:IJ,e:IJ,f:oSe,g:wJ,G:CJ,H:RJ,I:RJ,j:rSe,L:aSe,m:tSe,M:nSe,p:R,q:eSe,Q:lSe,s:cSe,S:iSe,u:qbe,U:Kbe,V:Ybe,w:Xbe,W:Jbe,x:W,X:ne,y:wJ,Y:CJ,Z:Qbe,"%":sSe};x.x=w(n,x),x.X=w(i,x),x.c=w(e,x),S.x=w(n,S),S.X=w(i,S),S.c=w(e,S);function w(Qe,Nt){return function(Bt){var Ue=[],Cr=-1,qt=0,kr=Qe.length,er,Mn,ia;for(Bt instanceof Date||(Bt=new Date(+Bt));++Cr<kr;)Qe.charCodeAt(Cr)===37&&(Ue.push(Qe.slice(qt,Cr)),(Mn=TJ[er=Qe.charAt(++Cr)])!=null?er=Qe.charAt(++Cr):Mn=er==="e"?" ":"0",(ia=Nt[er])&&(er=ia(Bt,Mn)),Ue.push(er),qt=Cr+1);return Ue.push(Qe.slice(qt,Cr)),Ue.join("")}}function T(Qe,Nt){return function(Bt){var Ue=VE(1900,void 0,1),Cr=I(Ue,Qe,Bt+="",0),qt,kr;if(Cr!=Bt.length)return null;if("Q"in Ue)return new Date(Ue.Q);if("s"in Ue)return new Date(Ue.s*1e3+("L"in Ue?Ue.L:0));if(Nt&&!("Z"in Ue)&&(Ue.Z=0),"p"in Ue&&(Ue.H=Ue.H%12+Ue.p*12),Ue.m===void 0&&(Ue.m="q"in Ue?Ue.q:0),"V"in Ue){if(Ue.V<1||Ue.V>53)return null;"w"in Ue||(Ue.w=1),"Z"in Ue?(qt=sI(VE(Ue.y,0,1)),kr=qt.getUTCDay(),qt=kr>4||kr===0?U0.ceil(qt):U0(qt),qt=Xo.offset(qt,(Ue.V-1)*7),Ue.y=qt.getUTCFullYear(),Ue.m=qt.getUTCMonth(),Ue.d=qt.getUTCDate()+(Ue.w+6)%7):(qt=oI(VE(Ue.y,0,1)),kr=qt.getDay(),qt=kr>4||kr===0?G0.ceil(qt):G0(qt),qt=Ga.offset(qt,(Ue.V-1)*7),Ue.y=qt.getFullYear(),Ue.m=qt.getMonth(),Ue.d=qt.getDate()+(Ue.w+6)%7)}else("W"in Ue||"U"in Ue)&&("w"in Ue||(Ue.w="u"in Ue?Ue.u%7:"W"in Ue?1:0),kr="Z"in Ue?sI(VE(Ue.y,0,1)).getUTCDay():oI(VE(Ue.y,0,1)).getDay(),Ue.m=0,Ue.d="W"in Ue?(Ue.w+6)%7+Ue.W*7-(kr+5)%7:Ue.w+Ue.U*7-(kr+6)%7);return"Z"in Ue?(Ue.H+=Ue.Z/100|0,Ue.M+=Ue.Z%100,sI(Ue)):oI(Ue)}}function I(Qe,Nt,Bt,Ue){for(var Cr=0,qt=Nt.length,kr=Bt.length,er,Mn;Cr<qt;){if(Ue>=kr)return-1;if(er=Nt.charCodeAt(Cr++),er===37){if(er=Nt.charAt(Cr++),Mn=N[er in TJ?Nt.charAt(Cr++):er],!Mn||(Ue=Mn(Qe,Bt,Ue))<0)return-1}else if(er!=Bt.charCodeAt(Ue++))return-1}return Ue}function R(Qe,Nt,Bt){var Ue=u.exec(Nt.slice(Bt));return Ue?(Qe.p=d.get(Ue[0].toLowerCase()),Bt+Ue[0].length):-1}function L(Qe,Nt,Bt){var Ue=h.exec(Nt.slice(Bt));return Ue?(Qe.w=m.get(Ue[0].toLowerCase()),Bt+Ue[0].length):-1}function O(Qe,Nt,Bt){var Ue=f.exec(Nt.slice(Bt));return Ue?(Qe.w=p.get(Ue[0].toLowerCase()),Bt+Ue[0].length):-1}function H(Qe,Nt,Bt){var Ue=v.exec(Nt.slice(Bt));return Ue?(Qe.m=y.get(Ue[0].toLowerCase()),Bt+Ue[0].length):-1}function U(Qe,Nt,Bt){var Ue=_.exec(Nt.slice(Bt));return Ue?(Qe.m=E.get(Ue[0].toLowerCase()),Bt+Ue[0].length):-1}function X(Qe,Nt,Bt){return I(Qe,e,Nt,Bt)}function W(Qe,Nt,Bt){return I(Qe,n,Nt,Bt)}function ne(Qe,Nt,Bt){return I(Qe,i,Nt,Bt)}function be(Qe){return s[Qe.getDay()]}function q(Qe){return o[Qe.getDay()]}function ie(Qe){return c[Qe.getMonth()]}function ge(Qe){return l[Qe.getMonth()]}function et(Qe){return a[+(Qe.getHours()>=12)]}function qe(Qe){return 1+~~(Qe.getMonth()/3)}function vt(Qe){return s[Qe.getUTCDay()]}function ar(Qe){return o[Qe.getUTCDay()]}function Qt(Qe){return c[Qe.getUTCMonth()]}function Ai(Qe){return l[Qe.getUTCMonth()]}function Ti(Qe){return a[+(Qe.getUTCHours()>=12)]}function Ci(Qe){return 1+~~(Qe.getUTCMonth()/3)}return{format:function(Qe){var Nt=w(Qe+="",x);return Nt.toString=function(){return Qe},Nt},parse:function(Qe){var Nt=T(Qe+="",!1);return Nt.toString=function(){return Qe},Nt},utcFormat:function(Qe){var Nt=w(Qe+="",S);return Nt.toString=function(){return Qe},Nt},utcParse:function(Qe){var Nt=T(Qe+="",!0);return Nt.toString=function(){return Qe},Nt}}}var TJ={"-":"",_:" ",0:"0"},mi=/^\s*\d+/,Hbe=/^%/,Wbe=/[\\^$*+?|[\]().{}]/g;function cr(t,e,n){var i=t<0?"-":"",a=(i?-t:t)+"",o=a.length;return i+(o<n?new Array(n-o+1).join(e)+a:a)}function Zbe(t){return t.replace(Wbe,"\\$&")}function $E(t){return new RegExp("^(?:"+t.map(Zbe).join("|")+")","i")}function zE(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Xbe(t,e,n){var i=mi.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function qbe(t,e,n){var i=mi.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Kbe(t,e,n){var i=mi.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Ybe(t,e,n){var i=mi.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Jbe(t,e,n){var i=mi.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function CJ(t,e,n){var i=mi.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function wJ(t,e,n){var i=mi.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Qbe(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function eSe(t,e,n){var i=mi.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function tSe(t,e,n){var i=mi.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function IJ(t,e,n){var i=mi.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function rSe(t,e,n){var i=mi.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function RJ(t,e,n){var i=mi.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function nSe(t,e,n){var i=mi.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function iSe(t,e,n){var i=mi.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function aSe(t,e,n){var i=mi.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function oSe(t,e,n){var i=mi.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function sSe(t,e,n){var i=Hbe.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function lSe(t,e,n){var i=mi.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function cSe(t,e,n){var i=mi.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function PJ(t,e){return cr(t.getDate(),e,2)}function uSe(t,e){return cr(t.getHours(),e,2)}function dSe(t,e){return cr(t.getHours()%12||12,e,2)}function fSe(t,e){return cr(1+Ga.count(ga(t),t),e,3)}function DJ(t,e){return cr(t.getMilliseconds(),e,3)}function pSe(t,e){return DJ(t,e)+"000"}function hSe(t,e){return cr(t.getMonth()+1,e,2)}function mSe(t,e){return cr(t.getMinutes(),e,2)}function gSe(t,e){return cr(t.getSeconds(),e,2)}function _Se(t){var e=t.getDay();return e===0?7:e}function ESe(t,e){return cr(qo.count(ga(t)-1,t),e,2)}function FJ(t){var e=t.getDay();return e>=4||e===0?ld(t):ld.ceil(t)}function vSe(t,e){return t=FJ(t),cr(ld.count(ga(t),t)+(ga(t).getDay()===4),e,2)}function ySe(t){return t.getDay()}function xSe(t,e){return cr(G0.count(ga(t)-1,t),e,2)}function bSe(t,e){return cr(t.getFullYear()%100,e,2)}function SSe(t,e){return t=FJ(t),cr(t.getFullYear()%100,e,2)}function NSe(t,e){return cr(t.getFullYear()%1e4,e,4)}function ASe(t,e){var n=t.getDay();return t=n>=4||n===0?ld(t):ld.ceil(t),cr(t.getFullYear()%1e4,e,4)}function TSe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+cr(e/60|0,"0",2)+cr(e%60,"0",2)}function MJ(t,e){return cr(t.getUTCDate(),e,2)}function CSe(t,e){return cr(t.getUTCHours(),e,2)}function wSe(t,e){return cr(t.getUTCHours()%12||12,e,2)}function ISe(t,e){return cr(1+Xo.count(_a(t),t),e,3)}function kJ(t,e){return cr(t.getUTCMilliseconds(),e,3)}function RSe(t,e){return kJ(t,e)+"000"}function PSe(t,e){return cr(t.getUTCMonth()+1,e,2)}function MSe(t,e){return cr(t.getUTCMinutes(),e,2)}function LSe(t,e){return cr(t.getUTCSeconds(),e,2)}function OSe(t){var e=t.getUTCDay();return e===0?7:e}function BSe(t,e){return cr(Ko.count(_a(t)-1,t),e,2)}function GJ(t){var e=t.getUTCDay();return e>=4||e===0?cd(t):cd.ceil(t)}function DSe(t,e){return t=GJ(t),cr(cd.count(_a(t),t)+(_a(t).getUTCDay()===4),e,2)}function FSe(t){return t.getUTCDay()}function kSe(t,e){return cr(U0.count(_a(t)-1,t),e,2)}function GSe(t,e){return cr(t.getUTCFullYear()%100,e,2)}function USe(t,e){return t=GJ(t),cr(t.getUTCFullYear()%100,e,2)}function VSe(t,e){return cr(t.getUTCFullYear()%1e4,e,4)}function $Se(t,e){var n=t.getUTCDay();return t=n>=4||n===0?cd(t):cd.ceil(t),cr(t.getUTCFullYear()%1e4,e,4)}function zSe(){return"+0000"}function LJ(){return"%"}function OJ(t){return+t}function BJ(t){return Math.floor(+t/1e3)}var z0,j0,My,H0,Ly;lI({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lI(t){return z0=$0(t),j0=z0.format,My=z0.parse,H0=z0.utcFormat,Ly=z0.utcParse,z0}function jE(t){let e={};return n=>e[n]||(e[n]=t(n))}function jSe(t,e){return n=>{let i=t(n),a=i.indexOf(e);if(a<0)return i;let o=HSe(i,a),s=o<i.length?i.slice(o):"";for(;--o>a;)if(i[o]!=="0"){++o;break}return i.slice(0,o)+s}}function HSe(t,e){let n=t.lastIndexOf("e"),i;if(n>0)return n;for(n=t.length;--n>e;)if(i=t.charCodeAt(n),i>=48&&i<=57)return n+1}function VJ(t){let e=jE(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(i){let a=mo(i||",");if(a.precision==null){switch(a.precision=12,a.type){case"%":a.precision-=2;break;case"e":a.precision-=1;break}return jSe(e(a),e(".1f")(1)[1])}else return e(a)},formatSpan(i,a,o,s){s=mo(s==null?",f":s);let l=ma(i,a,o),c=Math.max(Math.abs(i),Math.abs(a)),u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=PE(l,c))||(s.precision=u),n(s,c);case"":case"e":case"g":case"p":case"r":{isNaN(u=ME(l,c))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=RE(l))||(s.precision=u-(s.type==="%")*2);break}}return e(s)}}}var cI;WSe();function WSe(){return cI=VJ({format:nd,formatPrefix:k0})}function $J(t){return VJ(IE(t))}function Oy(t){return arguments.length?cI=$J(t):cI}function UJ(t,e,n){n=n||{},Lt(n)||he(`Invalid time multi-format specifier: ${n}`);let i=e(Yo),a=e(_o),o=e(go),s=e(Va),l=e(Qn),c=e(Ki),u=e(Ua),d=e(Li),f=t(n[Ls]||".%L"),p=t(n[Yo]||":%S"),h=t(n[_o]||"%I:%M"),m=t(n[go]||"%I %p"),_=t(n[Va]||n[qi]||"%a %d"),E=t(n[Qn]||"%b %d"),v=t(n[Ki]||"%B"),y=t(n[Ua]||"%B"),x=t(n[Li]||"%Y");return S=>(i(S)<S?f:a(S)<S?p:o(S)<S?h:s(S)<S?m:c(S)<S?l(S)<S?_:E:d(S)<S?u(S)<S?v:y:x)(S)}function zJ(t){let e=jE(t.format),n=jE(t.utcFormat);return{timeFormat:i=>fr(i)?e(i):UJ(e,ud,i),utcFormat:i=>fr(i)?n(i):UJ(n,dd,i),timeParse:jE(t.parse),utcParse:jE(t.utcParse)}}var uI;ZSe();function ZSe(){return uI=zJ({format:j0,parse:My,utcFormat:H0,utcParse:Ly})}function jJ(t){return zJ($0(t))}function W0(t){return arguments.length?uI=jJ(t):uI}var dI=(t,e)=>St({},t,e);function fI(t,e){let n=t?$J(t):Oy(),i=e?jJ(e):W0();return dI(n,i)}function pI(t,e){let n=arguments.length;return n&&n!==2&&he("defaultLocale expects either zero or two arguments."),n?dI(Oy(t),W0(e)):dI(Oy(),W0())}var VNe=/^(data:|([A-Za-z]+:)?\/\/)/,$Ne=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,zNe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,IQ="file://";function jNe(t,e){return n=>({options:n||{},sanitize:WNe,load:HNe,fileAccess:!!e,file:ZNe(e),http:qNe(t)})}async function HNe(t,e){let n=await this.sanitize(t,e),i=n.href;return n.localFile?this.file(i):this.http(i,e)}async function WNe(t,e){e=St({},this.options,e);let n=this.fileAccess,i={href:null},a,o,s,l=$Ne.test(t.replace(zNe,""));(t==null||typeof t!="string"||!l)&&he("Sanitize failure, invalid URI: "+ht(t));let c=VNe.test(t);return(s=e.baseURL)&&!c&&(!t.startsWith("/")&&!s.endsWith("/")&&(t="/"+t),t=s+t),o=(a=t.startsWith(IQ))||e.mode==="file"||e.mode!=="http"&&!c&&n,a?t=t.slice(IQ.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),o=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!o}),i.href=t,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function ZNe(t){return t?e=>new Promise((n,i)=>{t.readFile(e,(a,o)=>{a?i(a):n(o)})}):XNe}async function XNe(){he("No file system access.")}function qNe(t){return t?async function(e,n){let i=St({},this.options.http,n),a=n&&n.response,o=await t(e,i);return o.ok?wt(o[a])?o[a]():o.text():he(o.status+""+o.statusText)}:KNe}async function KNe(){he("No HTTP fetch method available.")}var YNe=t=>t!=null&&t===t,JNe=t=>t==="true"||t==="false"||t===!0||t===!1,QNe=t=>!Number.isNaN(Date.parse(t)),MQ=t=>!Number.isNaN(+t)&&!(t instanceof Date),eAe=t=>MQ(t)&&Number.isInteger(+t),RQ={boolean:_y,integer:kn,number:kn,date:Ey,string:vy,unknown:Jn},Gy=[JNe,eAe,MQ,QNe],tAe=["boolean","integer","number","date"];function rAe(t,e){if(!t||!t.length)return"unknown";let n=t.length,i=Gy.length,a=Gy.map((o,s)=>s+1);for(let o=0,s=0,l,c;o<n;++o)for(c=e?t[o][e]:t[o],l=0;l<i;++l)if(a[l]&&YNe(c)&&!Gy[l](c)&&(a[l]=0,++s,s===Gy.length))return"string";return tAe[a.reduce((o,s)=>o===0?s:o,0)-1]}function RI(t,e){return e.reduce((n,i)=>(n[i]=rAe(t,i),n),{})}function PQ(t){let e=function(n,i){let a={delimiter:t};return PI(n,i?St(i,a):a)};return e.responseType="text",e}function PI(t,e){return e.header&&(t=e.header.map(ht).join(e.delimiter)+`
`+t),Rw(e.delimiter).parse(t+"")}PI.responseType="text";function nAe(t){return typeof Buffer=="function"&&wt(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function MI(t,e){let n=e&&e.property?Mi(e.property):Jn;return Lt(t)&&!nAe(t)?iAe(n(t),e):n(JSON.parse(t))}MI.responseType="json";function iAe(t,e){return!ot(t)&&vY(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}var aAe={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function LQ(t,e){let n,i,a,o;return t=MI(t,e),e&&e.feature?(n=Mw,a=e.feature):e&&e.mesh?(n=Ow,a=e.mesh,o=aAe[e.filter]):he("Missing TopoJSON feature or mesh parameter."),i=(i=t.objects[a])?n(t,i,o):he("Invalid TopoJSON object: "+a),i&&i.features||[i]}LQ.responseType="json";var II={dsv:PI,csv:PQ(","),tsv:PQ("	"),json:MI,topojson:LQ};function OQ(t,e){return arguments.length>1?(II[t]=e,this):ut(II,t)?II[t]:null}function BQ(t){let e=OQ(t);return e&&e.responseType||"text"}function DQ(t,e,n,i){e=e||{};let a=OQ(e.type||"json");return a||he("Unknown data format type: "+e.type),t=a(t,e),e.parse&&oAe(t,e.parse,n,i),ut(t,"columns")&&delete t.columns,t}function oAe(t,e,n,i){if(!t.length)return;let a=W0();n=n||a.timeParse,i=i||a.utcParse;let o=t.columns||Object.keys(t[0]),s,l,c,u,d,f;e==="auto"&&(e=RI(t,o)),o=Object.keys(e);let p=o.map(h=>{let m=e[h],_,E;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return _=m.split(/:(.+)?/,2),E=_[1],(E[0]==="'"&&E[E.length-1]==="'"||E[0]==='"'&&E[E.length-1]==='"')&&(E=E.slice(1,-1)),(_[0]==="utc"?i:n)(E);if(!RQ[m])throw Error("Illegal format pattern: "+h+":"+m);return RQ[m]});for(c=0,d=t.length,f=o.length;c<d;++c)for(s=t[c],u=0;u<f;++u)l=o[u],s[l]=p[u](s[l])}var JE=jNe((wQ(),r4(CQ)),dr("fs"));function zy(t){let e=t||Jn,n=[],i={};return n.add=a=>{let o=e(a);return i[o]||(i[o]=1,n.push(a)),n},n.remove=a=>{let o=e(a);if(i[o]){i[o]=0;let s=n.indexOf(a);s>=0&&n.splice(s,1)}return n},n}async function t3(t,e){try{await e(t)}catch(n){t.error(n)}}var zQ=Symbol("vega_id"),sAe=1;function Q0(t){return!!(t&&mt(t))}function mt(t){return t[zQ]}function jQ(t,e){return t[zQ]=e,t}function Jt(t){let e=t===Object(t)?t:{data:t};return mt(e)?e:jQ(e,sAe++)}function jy(t){return Hp(t,Jt({}))}function Hp(t,e){for(let n in t)e[n]=t[n];return e}function Hy(t,e){return jQ(e,mt(t))}function Dl(t,e){return t?e?(n,i)=>t(n,i)||mt(e(n))-mt(e(i)):(n,i)=>t(n,i)||mt(n)-mt(i):null}function OI(t){return t&&t.constructor===bd}function bd(){let t=[],e=[],n=[],i=[],a=[],o=null,s=!1;return{constructor:bd,insert(l){let c=st(l),u=c.length;for(let d=0;d<u;++d)t.push(c[d]);return this},remove(l){let c=wt(l)?i:e,u=st(l),d=u.length;for(let f=0;f<d;++f)c.push(u[f]);return this},modify(l,c,u){let d={field:c,value:en(u)};return wt(l)?(d.filter=l,a.push(d)):(d.tuple=l,n.push(d)),this},encode(l,c){return wt(l)?a.push({filter:l,field:c}):n.push({tuple:l,field:c}),this},clean(l){return o=l,this},reflow(){return s=!0,this},pulse(l,c){let u={},d={},f,p,h,m,_,E;for(f=0,p=c.length;f<p;++f)u[mt(c[f])]=1;for(f=0,p=e.length;f<p;++f)_=e[f],u[mt(_)]=-1;for(f=0,p=i.length;f<p;++f)m=i[f],c.forEach(y=>{m(y)&&(u[mt(y)]=-1)});for(f=0,p=t.length;f<p;++f)_=t[f],E=mt(_),u[E]?u[E]=1:l.add.push(Jt(t[f]));for(f=0,p=c.length;f<p;++f)_=c[f],u[mt(_)]<0&&l.rem.push(_);function v(y,x,S){S?y[x]=S(y):l.encode=x,s||(d[mt(y)]=y)}for(f=0,p=n.length;f<p;++f)h=n[f],_=h.tuple,m=h.field,E=u[mt(_)],E>0&&(v(_,m,h.value),l.modifies(m));for(f=0,p=a.length;f<p;++f)h=a[f],m=h.filter,c.forEach(y=>{m(y)&&u[mt(y)]>0&&v(y,h.field,h.value)}),l.modifies(h.field);if(s)l.mod=e.length||i.length?c.filter(y=>u[mt(y)]>0):c.slice();else for(E in d)l.mod.push(d[E]);return(o||o==null&&(e.length||i.length))&&l.clean(!0),l}}}var Vy="_:mod:_";function Wy(){Object.defineProperty(this,Vy,{writable:!0,value:{}})}Wy.prototype={set(t,e,n,i){let a=this,o=a[t],s=a[Vy];return e!=null&&e>=0?(o[e]!==n||i)&&(o[e]=n,s[e+":"+t]=-1,s[t]=-1):(o!==n||i)&&(a[t]=n,s[t]=ot(n)?1+n.length:-1),a},modified(t,e){let n=this[Vy];if(arguments.length){if(ot(t)){for(let i=0;i<t.length;++i)if(n[t[i]])return!0;return!1}}else{for(let i in n)if(n[i])return!0;return!1}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[Vy]={},this}};var lAe=0,cAe="pulse",uAe=new Wy,dAe=1,fAe=2;function xr(t,e,n,i){this.id=++lAe,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i)}function FQ(t){return function(e){let n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this)}}xr.prototype={targets(){return this._targets||(this._targets=zy(bE))},set(t){return this.value!==t?(this.value=t,1):0},skip:FQ(dAe),modified:FQ(fAe),parameters(t,e,n){e=e!==!1;let i=this._argval=this._argval||new Wy,a=this._argops=this._argops||[],o=[],s,l,c,u,d=(f,p,h)=>{h instanceof xr?(h!==this&&(e&&h.targets().add(this),o.push(h)),a.push({op:h,name:f,index:p})):i.set(f,p,h)};for(s in t)if(l=t[s],s===cAe)st(l).forEach(f=>{f instanceof xr?f!==this&&(f.targets().add(this),o.push(f)):he("Pulse parameters must be operator instances.")}),this.source=l;else if(ot(l))for(i.set(s,-1,Array(c=l.length)),u=0;u<c;++u)d(s,u,l[u]);else d(s,-1,l);return this.marshall().clear(),n&&(a.initonly=!0),o},marshall(t){let e=this._argval||uAe,n=this._argops,i,a,o,s;if(n){let l=n.length;for(a=0;a<l;++a)i=n[a],o=i.op,s=o.modified()&&o.stamp===t,e.set(i.name,i.index,o.value,s);if(n.initonly){for(a=0;a<l;++a)i=n[a],i.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){let t=this._argops,e,n,i,a;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],a=i.op,a._targets&&a._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){let e=this._update;if(e){let n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function pAe(t,e,n,i){let a=1,o;return t instanceof xr?o=t:t&&t.prototype instanceof xr?o=new t:wt(t)?o=new xr(null,t):(a=0,o=new xr(t,e)),this.rank(o),a&&(i=n,n=e),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o}function hAe(t,e){let n=t.rank,i=e.length;for(let a=0;a<i;++a)if(n<e[a].rank){this.rerank(t);return}}var mAe=0;function r3(t,e,n){this.id=++mAe,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function Ed(t,e,n){return new r3(t,e,n)}r3.prototype={_filter:pi,_apply:Jn,targets(){return this._targets||(this._targets=zy(bE))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){let e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let a=0;a<i;++a)n[a].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){let e=Ed(t);return this.targets().add(e),e},apply(t){let e=Ed(null,t);return this.targets().add(e),e},merge(){let t=Ed();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{let n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){let e=Ed();return this.targets().add(Ed(null,null,my(t,n=>{let i=n.dataflow;e.receive(n),i&&i.run&&i.run()}))),e},between(t,e){let n=!1;return t.targets().add(Ed(null,null,()=>n=!0)),e.targets().add(Ed(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=pi,this._targets=null}};function gAe(t,e,n,i){let a=this,o=Ed(n,i),s=function(u){u.dataflow=a;try{o.receive(u)}catch(d){a.error(d)}finally{a.run()}},l;typeof t=="string"&&typeof document!="undefined"?l=document.querySelectorAll(t):l=st(t);let c=l.length;for(let u=0;u<c;++u)l[u].addEventListener(e,s);return o}function _Ae(t,e){let n=this.locale();return DQ(t,e,n.timeParse,n.utcParse)}function EAe(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function vAe(t,e){let n=this,i=0,a;try{a=await n.loader().load(t,{context:"dataflow",response:BQ(e&&e.type)});try{a=n.parse(a,e)}catch(o){i=-2,n.warn("Data ingestion failed",t,o)}}catch(o){i=-1,n.warn("Loading failed",t,o)}return{data:a,status:i}}async function yAe(t,e,n){let i=this,a=i._pending||xAe(i);a.requests+=1;let o=await i.request(e,n);return i.pulse(t,i.changeset().remove(pi).insert(o.data||[])),a.done(),o}function xAe(t){let e,n=new Promise(i=>e=i);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,e(t))},t._pending=n}var bAe={skip:!0};function SAe(t,e,n,i,a){return(t instanceof xr?AAe:NAe)(this,t,e,n,i,a),this}function NAe(t,e,n,i,a,o){let s=St({},o,bAe),l,c;wt(n)||(n=en(n)),i===void 0?l=u=>t.touch(n(u)):wt(i)?(c=new xr(null,i,a,!1),l=u=>{c.evaluate(u);let d=n(u),f=c.value;OI(f)?t.pulse(d,f,o):t.update(d,f,s)}):l=u=>t.update(n(u),i,s),e.apply(l)}function AAe(t,e,n,i,a,o){if(i===void 0)e.targets().add(n);else{let s=o||{},l=new xr(null,TAe(n,i),a,!1);l.modified(s.force),l.rank=e.rank,e.targets().add(l),n&&(l.skip(!0),l.value=n.value,l.targets().add(n),t.connect(n,[l]))}}function TAe(t,e){return e=wt(e)?e:en(e),t?function(n,i){let a=e(n,i);return t.skip()||(t.skip(a!==this.value).value=a),a}:e}function CAe(t){t.rank=++this._rank}function wAe(t){let e=[t],n,i,a;for(;e.length;)if(this.rank(n=e.pop()),i=n._targets)for(a=i.length;--a>=0;)e.push(n=i[a]),n===t&&he("Cycle detected in dataflow graph.")}var $y={},Bl=1,vd=2,$c=4,IAe=Bl|vd,kQ=Bl|$c,J0=Bl|vd|$c,GQ=8,QE=16,UQ=32,VQ=64;function yd(t,e,n){this.dataflow=t,this.stamp=e==null?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function LI(t,e){let n=[];return rd(t,e,i=>n.push(i)),n}function $Q(t,e){let n={};return t.visit(e,i=>{n[mt(i)]=1}),i=>n[mt(i)]?null:i}function Uy(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e}yd.prototype={StopPropagation:$y,ADD:Bl,REM:vd,MOD:$c,ADD_REM:IAe,ADD_MOD:kQ,ALL:J0,REFLOW:GQ,SOURCE:QE,NO_SOURCE:UQ,NO_FIELDS:VQ,fork(t){return new yd(this.dataflow).init(this,t)},clone(){let t=this.fork(J0);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(J0|QE)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new yd(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){let n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&VQ)&&(n.fields=t.fields),e&Bl?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&vd?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&$c?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&UQ?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){let e=t||J0;return e&Bl&&this.add.length||e&vd&&this.rem.length||e&$c&&this.mod.length},reflow(t){if(t)return this.fork(J0).reflow();let e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter($c,$Q(this,Bl))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){let e=this.fields||(this.fields={});return ot(t)?t.forEach(n=>e[n]=!0):e[t]=!0,this},modified(t,e){let n=this.fields;return(e||this.mod.length)&&n?arguments.length?ot(t)?t.some(i=>n[i]):n[t]:!!n:!1},filter(t,e){let n=this;return t&Bl&&(n.addF=Uy(n.addF,e)),t&vd&&(n.remF=Uy(n.remF,e)),t&$c&&(n.modF=Uy(n.modF,e)),t&QE&&(n.srcF=Uy(n.srcF,e)),n},materialize(t){t=t||J0;let e=this;return t&Bl&&e.addF&&(e.add=LI(e.add,e.addF),e.addF=null),t&vd&&e.remF&&(e.rem=LI(e.rem,e.remF),e.remF=null),t&$c&&e.modF&&(e.mod=LI(e.mod,e.modF),e.modF=null),t&QE&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){let n=this,i=e;if(t&QE)return rd(n.source,n.srcF,i),n;t&Bl&&rd(n.add,n.addF,i),t&vd&&rd(n.rem,n.remF,i),t&$c&&rd(n.mod,n.modF,i);let a=n.source;if(t&GQ&&a){let o=n.add.length+n.mod.length;o===a.length||(o?rd(a,$Q(n,kQ),i):rd(a,n.srcF,i))}return n}};function BI(t,e,n,i){let a=this,o=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(let s of n)if(s.stamp===e){if(s.fields){let l=a.fields||(a.fields={});for(let c in s.fields)l[c]=1}s.changed(a.ADD)&&(o|=a.ADD),s.changed(a.REM)&&(o|=a.REM),s.changed(a.MOD)&&(o|=a.MOD)}this.changes=o}ze(BI,yd,{fork(t){let e=new yd(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,n=>e.add.push(n)),t&e.REM&&this.visit(e.REM,n=>e.rem.push(n)),t&e.MOD&&this.visit(e.MOD,n=>e.mod.push(n))),e},changed(t){return this.changes&t},modified(t){let e=this,n=e.fields;return n&&e.changes&e.MOD?ot(t)?t.some(i=>n[i]):n[t]:0},filter(){he("MultiPulse does not support filtering.")},materialize(){he("MultiPulse does not support materialization.")},visit(t,e){let n=this,i=n.pulses,a=i.length,o=0;if(t&n.SOURCE)for(;o<a;++o)i[o].visit(t,e);else for(;o<a;++o)i[o].stamp===n.stamp&&i[o].visit(t,e);return n}});async function RAe(t,e,n){let i=this,a=[];if(i._pulse)return HQ(i);if(i._pending&&await i._pending,e&&await t3(i,e),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;let o=++i._clock;i._pulse=new yd(i,o,t),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=zy(bE);let s=0,l,c,u;try{for(;i._heap.size()>0;){if(l=i._heap.pop(),l.rank!==l.qrank){i._enqueue(l,!0);continue}c=l.run(i._getPulse(l,t)),c.then?c=await c:c.async&&(a.push(c.async),c=$y),c!==$y&&l._targets&&l._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),u=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${s} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){let d=i._postrun.sort((f,p)=>p.priority-f.priority);i._postrun=[];for(let f=0;f<d.length;++f)await t3(i,d[f].callback)}return n&&await t3(i,n),a.length&&Promise.all(a).then(d=>i.runAsync(null,()=>{d.forEach(f=>{try{f(i)}catch(p){i.error(p)}})})),i}async function PAe(t,e,n){for(;this._running;)await this._running;let i=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(i,i),this._running}function MAe(t,e,n){return this._pulse?HQ(this):(this.evaluate(t,e,n),this)}function LAe(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(i){this.error(i)}}function HQ(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function OAe(t,e){let n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function BAe(t,e){let n=t.source,i=this._clock;return n&&ot(n)?new BI(this,i,n.map(a=>a.pulse),e):this._input[t.id]||DAe(this._pulse,n&&n.pulse)}function DAe(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==$y&&(t.source=e.source),t)}var DI={skip:!1,force:!1};function FAe(t,e){let n=e||DI;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function kAe(t,e,n){let i=n||DI;return(t.set(e)||i.force)&&this.touch(t,i),this}function GAe(t,e,n){this.touch(t,n||DI);let i=new yd(this,this._clock+(this._pulse?0:1)),a=t.pulse&&t.pulse.source||[];return i.target=t,this._input[t.id]=e.pulse(i,a),this}function UAe(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),WQ(e,0,e.length-1,t)),pop:()=>{let n=e.pop(),i;return e.length?(i=e[0],e[0]=n,VAe(e,0,t)):i=n,i}}}function WQ(t,e,n,i){let a,o,s=t[n];for(;n>e;){if(o=n-1>>1,a=t[o],i(s,a)<0){t[n]=a,n=o;continue}break}return t[n]=s}function VAe(t,e,n){let i=e,a=t.length,o=t[e],s=(e<<1)+1,l;for(;s<a;)l=s+1,l<a&&n(t[s],t[l])>=0&&(s=l),t[e]=t[s],e=s,s=(e<<1)+1;return t[e]=o,WQ(t,i,e,n)}function Wp(){this.logger(rY()),this.logLevel(Tw),this._clock=0,this._rank=0,this._locale=pI();try{this._loader=JE()}catch(t){}this._touched=zy(bE),this._input={},this._pulse=null,this._heap=UAe((t,e)=>t.qrank-e.qrank),this._postrun=[]}function e3(t){return function(){return this._log[t].apply(this,arguments)}}Wp.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:e3("error"),warn:e3("warn"),info:e3("info"),debug:e3("debug"),logLevel:e3("level"),cleanThreshold:1e4,add:pAe,connect:hAe,rank:CAe,rerank:wAe,pulse:GAe,touch:FAe,update:kAe,changeset:bd,ingest:EAe,parse:_Ae,preload:yAe,request:vAe,events:gAe,on:SAe,evaluate:RAe,run:MAe,runAsync:PAe,runAfter:LAe,_enqueue:OAe,_getPulse:BAe};function pe(t,e){xr.call(this,t,null,e)}ze(pe,xr,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(n=>this.pulse=n):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){let e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});var xd={};function FI(t){let e=ZQ(t);return e&&e.Definition||null}function ZQ(t){return t=t&&t.toLowerCase(),ut(xd,t)?xd[t]:null}var IR={};mr(IR,{aggregate:()=>Sd,bin:()=>aR,collect:()=>oR,compare:()=>gee,countpattern:()=>sR,cross:()=>lR,density:()=>cR,dotbin:()=>dR,expression:()=>xee,extent:()=>fR,facet:()=>Jy,field:()=>bee,filter:()=>hR,flatten:()=>mR,fold:()=>gR,formula:()=>_R,generate:()=>See,impute:()=>ER,joinaggregate:()=>vR,kde:()=>yR,key:()=>Nee,load:()=>Aee,lookup:()=>xR,multiextent:()=>Tee,multivalues:()=>Cee,params:()=>wee,pivot:()=>bR,prefacet:()=>Iee,project:()=>SR,proxy:()=>Ree,quantile:()=>NR,relay:()=>Pee,sample:()=>AR,sequence:()=>TR,sieve:()=>Mee,subflow:()=>pR,timeunit:()=>CR,tupleindex:()=>Oee,values:()=>Bee,window:()=>wR});function*KQ(t,e){if(e==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)i=e(i,++n,t),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function kI(t,e,n){let i=Float64Array.from(KQ(t,n));return i.sort(Zi),e.map(a=>wE(i,a))}function GI(t,e){return kI(t,[.25,.5,.75],e)}function UI(t,e){let n=t.length,i=Sy(t,e),a=GI(t,e),o=(a[2]-a[0])/1.34;return 1.06*(Math.min(i,o)||i||Math.abs(a[0])||1)*Math.pow(n,-.2)}function YQ(t){let e=t.maxbins||20,n=t.base||10,i=Math.log(n),a=t.divide||[5,2],o=t.extent[0],s=t.extent[1],l,c,u,d,f,p,h=t.span||s-o||Math.abs(o)||1;if(t.step)l=t.step;else if(t.steps){for(d=h/e,f=0,p=t.steps.length;f<p&&t.steps[f]<d;++f);l=t.steps[Math.max(0,f-1)]}else{for(c=Math.ceil(Math.log(e)/i),u=t.minstep||0,l=Math.max(u,Math.pow(n,Math.round(Math.log(h)/i)-c));Math.ceil(h/l)>e;)l*=n;for(f=0,p=a.length;f<p;++f)d=l/a[f],d>=u&&h/d<=e&&(l=d)}d=Math.log(l);let m=d>=0?0:~~(-d/i)+1,_=Math.pow(n,-m-1);return(t.nice||t.nice===void 0)&&(d=Math.floor(o/l+_)*l,o=o<d?d-l:d,s=Math.ceil(s/l)*l),{start:o,stop:s===o?o+l:s,step:l}}var es=Math.random;function JQ(t,e,n,i){if(!t.length)return[void 0,void 0];let a=Float64Array.from(KQ(t,i)),o=a.length,s=e,l,c,u,d;for(u=0,d=Array(s);u<s;++u){for(l=0,c=0;c<o;++c)l+=a[~~(es()*o)];d[u]=l/o}return d.sort(Zi),[Fp(d,n/2),Fp(d,1-n/2)]}function QQ(t,e,n,i){i=i||(p=>p);let a=t.length,o=new Float64Array(a),s=0,l=1,c=i(t[0]),u=c,d=c+e,f;for(;l<a;++l){if(f=i(t[l]),f>=d){for(u=(c+u)/2;s<l;++s)o[s]=u;d=f+e,c=f}u=f}for(u=(c+u)/2;s<l;++s)o[s]=u;return n?$Ae(o,e+e/4):o}function $Ae(t,e){let n=t.length,i=0,a=1,o,s;for(;t[i]===t[a];)++a;for(;a<n;){for(o=a+1;t[a]===t[o];)++o;if(t[a]-t[a-1]<e){for(s=a+(i+o-a-a>>1);s<a;)t[s++]=t[a];for(;s>a;)t[s--]=t[i]}i=a,a=o}return t}var eee=Math.sqrt(2*Math.PI),zAe=Math.SQRT2,n3=NaN;function Zy(t,e){t=t||0,e=e==null?1:e;let n=0,i=0,a,o;if(n3===n3)n=n3,n3=NaN;else{do n=es()*2-1,i=es()*2-1,a=n*n+i*i;while(a===0||a>1);o=Math.sqrt(-2*Math.log(a)/a),n*=o,n3=i*o}return t+n*e}function VI(t,e,n){n=n==null?1:n;let i=(t-(e||0))/n;return Math.exp(-.5*i*i)/(n*eee)}function Xy(t,e,n){e=e||0,n=n==null?1:n;let i=(t-e)/n,a=Math.abs(i),o;if(a>37)o=0;else{let s=Math.exp(-a*a/2),l;a<7.07106781186547?(l=.0352624965998911*a+.700383064443688,l=l*a+6.37396220353165,l=l*a+33.912866078383,l=l*a+112.079291497871,l=l*a+221.213596169931,l=l*a+220.206867912376,o=s*l,l=.0883883476483184*a+1.75566716318264,l=l*a+16.064177579207,l=l*a+86.7807322029461,l=l*a+296.564248779674,l=l*a+637.333633378831,l=l*a+793.826512519948,l=l*a+440.413735824752,o=o/l):(l=a+.65,l=a+4/l,l=a+3/l,l=a+2/l,l=a+1/l,o=s/l/2.506628274631)}return i>0?1-o:o}function qy(t,e,n){return t<0||t>1?NaN:(e||0)+(n==null?1:n)*zAe*jAe(2*t-1)}function jAe(t){let e=-Math.log((1-t)*(1+t)),n;return e<6.25?(e-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*e,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=-1333171662854621e-31+n*e,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=-4054566272975207e-29+n*e,n=-8151934197605472e-29+n*e,n=26335093153082323e-28+n*e,n=-12975133253453532e-27+n*e,n=-5415412054294628e-26+n*e,n=10512122733215323e-25+n*e,n=-4112633980346984e-24+n*e,n=-29070369957882005e-24+n*e,n=42347877827932404e-23+n*e,n=-13654692000834679e-22+n*e,n=-13882523362786469e-21+n*e,n=.00018673420803405714+n*e,n=-.000740702534166267+n*e,n=-.006033670871430149+n*e,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*e,n=-27517406297064545e-23+n*e,n=18239629214389228e-24+n*e,n=15027403968909828e-22+n*e,n=-4013867526981546e-21+n*e,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=-47318229009055734e-21+n*e,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=-.0003550375203628475+n*e,n=.0009532893797373805+n*e,n=-.0016882755560235047+n*e,n=.002491442096107851+n*e,n=-.003751208507569241+n*e,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*e,n=15076572693500548e-25+n*e,n=-3789465440126737e-24+n*e,n=761570120807834e-23+n*e,n=-1496002662714924e-23+n*e,n=2914795345090108e-23+n*e,n=-6771199775845234e-23+n*e,n=22900482228026655e-23+n*e,n=-99298272942317e-20+n*e,n=4526062597223154e-21+n*e,n=-1968177810553167e-20+n*e,n=7599527703001776e-20+n*e,n=-.00021503011930044477+n*e,n=-.00013871931833623122+n*e,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0,n*t}function $I(t,e){let n,i,a={mean(o){return arguments.length?(n=o||0,a):n},stdev(o){return arguments.length?(i=o==null?1:o,a):i},sample:()=>Zy(n,i),pdf:o=>VI(o,n,i),cdf:o=>Xy(o,n,i),icdf:o=>qy(o,n,i)};return a.mean(t).stdev(e)}function zI(t,e){let n=$I(),i=0,a={data(o){return arguments.length?(t=o,i=o?o.length:0,a.bandwidth(e)):t},bandwidth(o){return arguments.length?(e=o,!e&&t&&(e=UI(t)),a):e},sample(){return t[~~(es()*i)]+e*n.sample()},pdf(o){let s=0,l=0;for(;l<i;++l)s+=n.pdf((o-t[l])/e);return s/e/i},cdf(o){let s=0,l=0;for(;l<i;++l)s+=n.cdf((o-t[l])/e);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return a.data(t)}function jI(t,e){return t=t||0,e=e==null?1:e,Math.exp(t+Zy()*e)}function HI(t,e,n){if(t<=0)return 0;e=e||0,n=n==null?1:n;let i=(Math.log(t)-e)/n;return Math.exp(-.5*i*i)/(n*eee*t)}function WI(t,e,n){return Xy(Math.log(t),e,n)}function ZI(t,e,n){return Math.exp(qy(t,e,n))}function tee(t,e){let n,i,a={mean(o){return arguments.length?(n=o||0,a):n},stdev(o){return arguments.length?(i=o==null?1:o,a):i},sample:()=>jI(n,i),pdf:o=>HI(o,n,i),cdf:o=>WI(o,n,i),icdf:o=>ZI(o,n,i)};return a.mean(t).stdev(e)}function ree(t,e){let n=0,i;function a(s){let l=[],c=0,u;for(u=0;u<n;++u)c+=l[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)l[u]/=c;return l}let o={weights(s){return arguments.length?(i=a(e=s||[]),o):e},distributions(s){return arguments.length?(s?(n=s.length,t=s):(n=0,t=[]),o.weights(e)):t},sample(){let s=es(),l=t[n-1],c=i[0],u=0;for(;u<n-1;c+=i[++u])if(s<c){l=t[u];break}return l.sample()},pdf(s){let l=0,c=0;for(;c<n;++c)l+=i[c]*t[c].pdf(s);return l},cdf(s){let l=0,c=0;for(;c<n;++c)l+=i[c]*t[c].cdf(s);return l},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(t).weights(e)}function XI(t,e){return e==null&&(e=t==null?1:t,t=0),t+(e-t)*es()}function qI(t,e,n){return n==null&&(n=e==null?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function KI(t,e,n){return n==null&&(n=e==null?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function YI(t,e,n){return n==null&&(n=e==null?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function nee(t,e){let n,i,a={min(o){return arguments.length?(n=o||0,a):n},max(o){return arguments.length?(i=o==null?1:o,a):i},sample:()=>XI(n,i),pdf:o=>qI(o,n,i),cdf:o=>KI(o,n,i),icdf:o=>YI(o,n,i)};return e==null&&(e=t==null?1:t,t=0),a.min(t).max(e)}function JI(t,e,n){let i=0,a=0;for(let o of t){let s=n(o);e(o)==null||s==null||isNaN(s)||(i+=(s-i)/++a)}return{coef:[i],predict:()=>i,rSquared:0}}function i3(t,e,n,i){let a=i-t*t,o=Math.abs(a)<1e-24?0:(n-t*e)/a;return[e-o*t,o]}function Ky(t,e,n,i){t=t.filter(h=>{let m=e(h),_=n(h);return m!=null&&(m=+m)>=m&&_!=null&&(_=+_)>=_}),i&&t.sort((h,m)=>e(h)-e(m));let a=t.length,o=new Float64Array(a),s=new Float64Array(a),l=0,c=0,u=0,d,f,p;for(p of t)o[l]=d=+e(p),s[l]=f=+n(p),++l,c+=(d-c)/l,u+=(f-u)/l;for(l=0;l<a;++l)o[l]-=c,s[l]-=u;return[o,s,c,u]}function a3(t,e,n,i){let a=-1,o,s;for(let l of t)o=e(l),s=n(l),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&i(o,s,++a)}function em(t,e,n,i,a){let o=0,s=0;return a3(t,e,n,(l,c)=>{let u=c-a(l),d=c-i;o+=u*u,s+=d*d}),1-o/s}function QI(t,e,n){let i=0,a=0,o=0,s=0,l=0;a3(t,e,n,(d,f)=>{++l,i+=(d-i)/l,a+=(f-a)/l,o+=(d*f-o)/l,s+=(d*d-s)/l});let c=i3(i,a,o,s),u=d=>c[0]+c[1]*d;return{coef:c,predict:u,rSquared:em(t,e,n,a,u)}}function iee(t,e,n){let i=0,a=0,o=0,s=0,l=0;a3(t,e,n,(d,f)=>{++l,d=Math.log(d),i+=(d-i)/l,a+=(f-a)/l,o+=(d*f-o)/l,s+=(d*d-s)/l});let c=i3(i,a,o,s),u=d=>c[0]+c[1]*Math.log(d);return{coef:c,predict:u,rSquared:em(t,e,n,a,u)}}function aee(t,e,n){let[i,a,o,s]=Ky(t,e,n),l=0,c=0,u=0,d=0,f=0,p,h,m;a3(t,e,n,(y,x)=>{p=i[f++],h=Math.log(x),m=p*x,l+=(x*h-l)/f,c+=(m-c)/f,u+=(m*h-u)/f,d+=(p*m-d)/f});let[_,E]=i3(c/s,l/s,u/s,d/s),v=y=>Math.exp(_+E*(y-o));return{coef:[Math.exp(_-E*o),E],predict:v,rSquared:em(t,e,n,s,v)}}function oee(t,e,n){let i=0,a=0,o=0,s=0,l=0,c=0;a3(t,e,n,(f,p)=>{let h=Math.log(f),m=Math.log(p);++c,i+=(h-i)/c,a+=(m-a)/c,o+=(h*m-o)/c,s+=(h*h-s)/c,l+=(p-l)/c});let u=i3(i,a,o,s),d=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:d,rSquared:em(t,e,n,l,d)}}function eR(t,e,n){let[i,a,o,s]=Ky(t,e,n),l=i.length,c=0,u=0,d=0,f=0,p=0,h,m,_,E;for(h=0;h<l;)m=i[h],_=a[h++],E=m*m,c+=(E-c)/h,u+=(E*m-u)/h,d+=(E*E-d)/h,f+=(m*_-f)/h,p+=(E*_-p)/h;let v=d-c*c,y=c*v-u*u,x=(p*c-f*u)/y,S=(f*v-p*u)/y,N=-x*c,w=T=>(T=T-o,x*T*T+S*T+N+s);return{coef:[N-S*o+x*o*o+s,S-2*x*o,x],predict:w,rSquared:em(t,e,n,s,w)}}function see(t,e,n,i){if(i===0)return JI(t,e,n);if(i===1)return QI(t,e,n);if(i===2)return eR(t,e,n);let[a,o,s,l]=Ky(t,e,n),c=a.length,u=[],d=[],f=i+1,p,h,m,_,E;for(p=0;p<f;++p){for(m=0,_=0;m<c;++m)_+=Math.pow(a[m],p)*o[m];for(u.push(_),E=new Float64Array(f),h=0;h<f;++h){for(m=0,_=0;m<c;++m)_+=Math.pow(a[m],p+h);E[h]=_}d.push(E)}d.push(u);let v=WAe(d),y=x=>{x-=s;let S=l+v[0]+v[1]*x+v[2]*x*x;for(p=3;p<f;++p)S+=v[p]*Math.pow(x,p);return S};return{coef:HAe(f,v,-s,l),predict:y,rSquared:em(t,e,n,l,y)}}function HAe(t,e,n,i){let a=Array(t),o,s,l,c;for(o=0;o<t;++o)a[o]=0;for(o=t-1;o>=0;--o)for(l=e[o],c=1,a[o]+=l,s=1;s<=o;++s)c*=(o+1-s)/s,a[o-s]+=l*Math.pow(n,s)*c;return a[0]+=i,a}function WAe(t){let e=t.length-1,n=[],i,a,o,s,l;for(i=0;i<e;++i){for(s=i,a=i+1;a<e;++a)Math.abs(t[i][a])>Math.abs(t[i][s])&&(s=a);for(o=i;o<e+1;++o)l=t[o][i],t[o][i]=t[o][s],t[o][s]=l;for(a=i+1;a<e;++a)for(o=e;o>=i;o--)t[o][a]-=t[o][i]*t[i][a]/t[i][i]}for(a=e-1;a>=0;--a){for(l=0,o=a+1;o<e;++o)l+=t[o][a]*n[o];n[a]=(t[e][a]-l)/t[a][a]}return n}var XQ=2,qQ=1e-12;function lee(t,e,n,i){let[a,o,s,l]=Ky(t,e,n,!0),c=a.length,u=Math.max(2,~~(i*c)),d=new Float64Array(c),f=new Float64Array(c),p=new Float64Array(c).fill(1);for(let h=-1;++h<=XQ;){let m=[0,u-1];for(let E=0;E<c;++E){let v=a[E],y=m[0],x=m[1],S=v-a[y]>a[x]-v?y:x,N=0,w=0,T=0,I=0,R=0,L=1/Math.abs(a[S]-v||1);for(let U=y;U<=x;++U){let X=a[U],W=o[U],ne=ZAe(Math.abs(v-X)*L)*p[U],be=X*ne;N+=ne,w+=be,T+=W*ne,I+=W*be,R+=X*be}let[O,H]=i3(w/N,T/N,I/N,R/N);d[E]=O+H*v,f[E]=Math.abs(o[E]-d[E]),XAe(a,E+1,m)}if(h===XQ)break;let _=B0(f);if(Math.abs(_)<qQ)break;for(let E=0,v,y;E<c;++E)v=f[E]/(6*_),p[E]=v>=1?qQ:(y=1-v*v)*y}return qAe(a,d,s,l)}function ZAe(t){return(t=1-t*t*t)*t*t}function XAe(t,e,n){let i=t[e],a=n[0],o=n[1]+1;if(!(o>=t.length))for(;e>a&&t[o]-i<=i-t[a];)n[0]=++a,n[1]=o,++o}function qAe(t,e,n,i){let a=t.length,o=[],s=0,l=0,c=[],u;for(;s<a;++s)u=t[s]+n,c[0]===u?c[1]+=(e[s]-c[1])/++l:(l=0,c[1]+=i,c=[u,e[s]],o.push(c));return c[1]+=i,o}var KAe=.5*Math.PI/180;function o3(t,e,n,i){n=n||25,i=Math.max(n,i||200);let a=_=>[_,t(_)],o=e[0],s=e[1],l=s-o,c=l/i,u=[a(o)],d=[];if(n===i){for(let _=1;_<i;++_)u.push(a(o+_/n*l));return u.push(a(s)),u}else{d.push(a(s));for(let _=n;--_>0;)d.push(a(o+_/n*l))}let f=u[0],p=d[d.length-1],h=1/l,m=YAe(f[1],d);for(;p;){let _=a((f[0]+p[0])/2);_[0]-f[0]>=c&&JAe(f,_,p,h,m)>KAe?d.push(_):(f=p,u.push(p),d.pop()),p=d[d.length-1]}return u}function YAe(t,e){let n=t,i=t,a=e.length;for(let o=0;o<a;++o){let s=e[o][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function JAe(t,e,n,i,a){let o=Math.atan2(a*(n[1]-t[1]),i*(n[0]-t[0])),s=Math.atan2(a*(e[1]-t[1]),i*(e[0]-t[0]));return Math.abs(o-s)}function QAe(t){return e=>{let n=t.length,i=1,a=String(t[0](e));for(;i<n;++i)a+="|"+t[i](e);return a}}function nR(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:QAe(t)}function dee(t,e,n){return n||t+(e?"_"+e:"")}var tR=()=>{},e7e={init:tR,add:tR,rem:tR,idx:0},s3={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.valid?t.sum:void 0,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(t,e)=>{t.exp=0,t.exp_r=e},value:t=>t.valid?t.exp*(1-t.exp_r)/(1-t.exp_r**t.valid):void 0,add:(t,e)=>t.exp=t.exp_r*t.exp+e,rem:(t,e)=>t.exp=(t.exp-e/t.exp_r**(t.valid-1))/t.exp_r},exponentialb:{value:t=>t.valid?t.exp*(1-t.exp_r):void 0,req:["exponential"],idx:1}},c3=Object.keys(s3).filter(t=>t!=="__count__");function t7e(t,e){return(n,i)=>St({name:t,aggregate_param:i,out:n||t},e7e,e)}[...c3,"__count__"].forEach(t=>{s3[t]=t7e(t,s3[t])});function fee(t,e,n){return s3[t](n,e)}function pee(t,e){return t.idx-e.idx}function r7e(t){let e={};t.forEach(i=>e[i.name]=i);let n=i=>{i.req&&i.req.forEach(a=>{e[a]||n(e[a]=s3[a]())})};return t.forEach(n),Object.values(e).sort(pee)}function n7e(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.aggregate_param==null?t.init(this):t.init(this,t.aggregate_param))}function i7e(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e)))}function a7e(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e)))}function o7e(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function hee(t,e){let n=e||Jn,i=r7e(t),a=t.slice().sort(pee);function o(s){this._ops=i,this._out=a,this.cell=s,this.init()}return o.prototype.init=n7e,o.prototype.add=i7e,o.prototype.rem=a7e,o.prototype.set=o7e,o.prototype.get=n,o.fields=t.map(s=>s.out),o}function iR(t){this._key=t?Mi(t):mt,this.reset()}var Bi=iR.prototype;Bi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Bi.add=function(t){this._add.push(t)};Bi.rem=function(t){this._rem.push(t)};Bi.values=function(){if(this._get=null,this._rem.length===0)return this._add;let t=this._add,e=this._rem,n=this._key,i=t.length,a=e.length,o=Array(i-a),s={},l,c,u;for(l=0;l<a;++l)s[n(e[l])]=1;for(l=0,c=0;l<i;++l)s[n(u=t[l])]?s[n(u)]=0:o[c++]=u;return this._rem=[],this._add=o};Bi.distinct=function(t){let e=this.values(),n={},i=e.length,a=0,o;for(;--i>=0;)o=t(e[i])+"",ut(n,o)||(n[o]=1,++a);return a};Bi.extent=function(t){if(this._get!==t||!this._ext){let e=this.values(),n=gY(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext};Bi.argmin=function(t){return this.extent(t)[0]||{}};Bi.argmax=function(t){return this.extent(t)[1]||{}};Bi.min=function(t){let e=this.extent(t)[0];return e!=null?t(e):void 0};Bi.max=function(t){let e=this.extent(t)[1];return e!=null?t(e):void 0};Bi.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=GI(this.values(),t),this._get=t),this._q};Bi.q1=function(t){return this.quartile(t)[0]};Bi.q2=function(t){return this.quartile(t)[1]};Bi.q3=function(t){return this.quartile(t)[2]};Bi.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=JQ(this.values(),1e3,.05,t),this._get=t),this._ci};Bi.ci0=function(t){return this.ci(t)[0]};Bi.ci1=function(t){return this.ci(t)[1]};function Sd(t){pe.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Sd.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:c3},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ze(Sd,pe,{transform(t,e){let n=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),a=t.modified();return n.stamp=i.stamp,n.value&&(a||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=a?n.init(t):Object.create(null),e.visit(e.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(t),e.visit(e.REM,o=>n.rem(o)),e.visit(e.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){let t=this,e=t.value,n=t._dnames,i=n.map(()=>({})),a=n.length;function o(l){let c,u,d,f;for(c in l)for(d=l[c].tuple,u=0;u<a;++u)i[u][f=d[n[u]]]=f}o(t._prev),o(e);function s(l,c,u){let d=n[u],f=i[u++];for(let p in f){let h=l?l+"|"+p:p;c[d]=f[p],u<a?s(h,c,u):e[h]||t.cell(h,c)}}s("",{},0)},init(t){let e=this._inputs=[],n=this._outputs=[],i={};function a(y){let x=st(fi(y)),S=x.length,N=0,w;for(;N<S;++N)i[w=x[N]]||(i[w]=1,e.push(w))}this._dims=st(t.groupby),this._dnames=this._dims.map(y=>{let x=Hr(y);return a(y),n.push(x),x}),this.cellkey=t.key?t.key:nR(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];let o=t.fields||[null],s=t.ops||["count"],l=t.aggregate_params||[null],c=t.as||[],u=o.length,d={},f,p,h,m,_,E,v;for(u!==s.length&&he("Unmatched number of fields and aggregate ops."),v=0;v<u;++v){if(f=o[v],p=s[v],h=l[v]||null,f==null&&p!=="count"&&he("Null aggregate field specified."),_=Hr(f),E=dee(p,_,c[v]),n.push(E),p==="count"){this._counts.push(E);continue}m=d[_],m||(a(f),m=d[_]=[],m.field=f,this._measures.push(m)),p!=="count"&&(this._countOnly=!1),m.push(fee(p,h,E))}return this._measures=this._measures.map(y=>hee(y,y.field)),Object.create(null)},cellkey:nR(),cell(t,e){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){let n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){let i=this._measures,a=i.length;n.agg=Array(a);for(let o=0;o<a;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new iR),n},newtuple(t,e){let n=this._dnames,i=this._dims,a=i.length,o={};for(let s=0;s<a;++s)o[n[s]]=i[s](t);return e?Hy(e.tuple,o):Jt(o)},clean(){let t=this.value;for(let e in t)t[e].num===0&&delete t[e]},add(t){let e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);let i=n.agg;for(let a=0,o=i.length;a<o;++a)i[a].add(i[a].get(t),t)},rem(t){let e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);let i=n.agg;for(let a=0,o=i.length;a<o;++a)i[a].rem(i[a].get(t),t)},celltuple(t){let e=t.tuple,n=this._counts;t.store&&t.data.values();for(let i=0,a=n.length;i<a;++i)e[n[i]]=t.num;if(!this._countOnly){let i=t.agg;for(let a=0,o=i.length;a<o;++a)i[a].set(e)}return e},changes(t){let e=this._adds,n=this._mods,i=this._prev,a=this._drop,o=t.add,s=t.rem,l=t.mod,c,u,d,f;if(i)for(u in i)c=i[u],(!a||c.num)&&s.push(c.tuple);for(d=0,f=this._alen;d<f;++d)o.push(this.celltuple(e[d])),e[d]=null;for(d=0,f=this._mlen;d<f;++d)c=n[d],(c.num===0&&a?s:l).push(this.celltuple(c)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,t}});var s7e=1e-14;function aR(t){pe.call(this,null,t)}aR.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ze(aR,pe,{transform(t,e){let n=t.interval!==!1,i=this._bins(t),a=i.start,o=i.step,s=t.as||["bin0","bin1"],l=s[0],c=s[1],u;return t.modified()?(e=e.reflow(!0),u=e.SOURCE):u=e.modified(fi(t.field))?e.ADD_MOD:e.ADD,e.visit(u,n?d=>{let f=i(d);d[l]=f,d[c]=f==null?null:a+o*(1+(f-a)/o)}:d=>d[l]=i(d)),e.modifies(n?s:l)},_bins(t){if(this.value&&!t.modified())return this.value;let e=t.field,n=YQ(t),i=n.step,a=n.start,o=a+Math.ceil((n.stop-a)/i)*i,s,l;(s=t.anchor)!=null&&(l=s-(a+i*Math.floor((s-a)/i)),a+=l,o+=l);let c=function(u){let d=kn(e(u));return d==null?null:d<a?-1/0:d>o?1/0:(d=Math.max(a,Math.min(d,o-i)),a+i*Math.floor(s7e+(d-a)/i))};return c.start=a,c.stop=n.stop,c.step=i,this.value=ha(c,fi(e),t.name||"bin_"+Hr(e))}});function mee(t,e,n){let i=t,a=e||[],o=n||[],s={},l=0;return{add:c=>o.push(c),remove:c=>s[i(c)]=++l,size:()=>a.length,data:(c,u)=>(l&&(a=a.filter(d=>!s[i(d)]),s={},l=0),u&&c&&a.sort(c),o.length&&(a=c?SY(c,a,o.sort(c)):a.concat(o),o=[]),a)}}function oR(t){pe.call(this,[],t)}oR.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ze(oR,pe,{transform(t,e){let n=e.fork(e.ALL),i=mee(mt,this.value,n.materialize(n.ADD).add),a=t.sort,o=e.changed()||a&&(t.modified("sort")||e.modified(a.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(Dl(a),o),e.source&&e.source.root&&(this.value.root=e.source.root),n}});function gee(t){xr.call(this,null,l7e,t)}ze(gee,xr);function l7e(t){return this.value&&!t.modified()?this.value:py(t.fields,t.orders)}function sR(t){pe.call(this,null,t)}sR.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function c7e(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}ze(sR,pe,{transform(t,e){let n=f=>p=>{for(var h=c7e(l(p),t.case,o)||[],m,_=0,E=h.length;_<E;++_)s.test(m=h[_])||f(m)},i=this._parameterCheck(t,e),a=this._counts,o=this._match,s=this._stop,l=t.field,c=t.as||["text","count"],u=n(f=>a[f]=1+(a[f]||0)),d=n(f=>a[f]-=1);return i?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,d)),this._finish(e,c)},_parameterCheck(t,e){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){let n=this._counts,i=this._tuples||(this._tuples={}),a=e[0],o=e[1],s=t.fork(t.NO_SOURCE|t.NO_FIELDS),l,c,u;for(l in n)c=i[l],u=n[l]||0,!c&&u?(i[l]=c=Jt({}),c[a]=l,c[o]=u,s.add.push(c)):u===0?(c&&s.rem.push(c),n[l]=null,i[l]=null):c[o]!==u&&(c[o]=u,s.mod.push(c));return s.modifies(e)}});function lR(t){pe.call(this,null,t)}lR.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ze(lR,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE),i=t.as||["a","b"],a=i[0],o=i[1],s=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter"),l=this.value;return s?(l&&(n.rem=l),l=e.materialize(e.SOURCE).source,n.add=this.value=u7e(l,a,o,t.filter||pi)):n.mod=l,n.source=this.value,n.modifies(i)}});function u7e(t,e,n,i){for(var a=[],o={},s=t.length,l=0,c,u;l<s;++l)for(o[e]=u=t[l],c=0;c<s;++c)o[n]=t[c],i(o)&&(a.push(Jt(o)),o={},o[e]=u);return a}var cee={kde:zI,mixture:ree,normal:$I,lognormal:tee,uniform:nee},d7e="distributions",uee="function",f7e="field";function _ee(t,e){let n=t[uee];ut(cee,n)||he("Unknown distribution function: "+n);let i=cee[n]();for(let a in t)a===f7e?i.data((t.from||e()).map(t[a])):a===d7e?i[a](t[a].map(o=>_ee(o,e))):typeof i[a]===uee&&i[a](t[a]);return i}function cR(t){pe.call(this,null,t)}var Eee=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],p7e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Eee},{name:"weights",type:"number",array:!0}]};cR.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Eee.concat(p7e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ze(cR,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let i=_ee(t.distribution,h7e(e)),a=t.steps||t.minsteps||25,o=t.steps||t.maxsteps||200,s=t.method||"pdf";s!=="pdf"&&s!=="cdf"&&he("Invalid density method: "+s),!t.extent&&!i.data&&he("Missing density extent parameter."),s=i[s];let l=t.as||["value","density"],c=t.extent||Fa(i.data()),u=o3(s,c,a,o).map(d=>{let f={};return f[l[0]]=d[0],f[l[1]]=d[1],Jt(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function h7e(t){return()=>t.materialize(t.SOURCE).source}function vee(t,e){return t?t.map((n,i)=>e[i]||Hr(n)):null}function uR(t,e,n){let i=[],a=f=>f(c),o,s,l,c,u,d;if(e==null)i.push(t.map(n));else for(o={},s=0,l=t.length;s<l;++s)c=t[s],u=e.map(a),d=o[u],d||(o[u]=d=[],d.dims=u,i.push(d)),d.push(n(c));return i}var yee="bin";function dR(t){pe.call(this,null,t)}dR.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:yee}]};var m7e=(t,e)=>td(Fa(t,e))/30;ze(dR,pe,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;let n=e.materialize(e.SOURCE).source,i=uR(e.source,t.groupby,Jn),a=t.smooth||!1,o=t.field,s=t.step||m7e(n,o),l=Dl((m,_)=>o(m)-o(_)),c=t.as||yee,u=i.length,d=1/0,f=-1/0,p=0,h;for(;p<u;++p){let m=i[p].sort(l);h=-1;for(let _ of QQ(m,s,a,o))_<d&&(d=_),_>f&&(f=_),m[++h][c]=_}return this.value={start:d,stop:f,step:s},e.reflow(!0).modifies(c)}});function xee(t){xr.call(this,null,g7e,t),this.modified(!0)}ze(xee,xr);function g7e(t){let e=t.expr;return this.value&&!t.modified("expr")?this.value:ha(n=>e(n,t),fi(e),Hr(e))}function fR(t){pe.call(this,[void 0,void 0],t)}fR.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ze(fR,pe,{transform(t,e){let n=this.value,i=t.field,a=e.changed()||e.modified(i.fields)||t.modified("field"),o=n[0],s=n[1];if((a||o==null)&&(o=1/0,s=-1/0),e.visit(a?e.SOURCE:e.ADD,l=>{let c=kn(i(l));c!=null&&(c<o&&(o=c),c>s&&(s=c))}),!Number.isFinite(o)||!Number.isFinite(s)){let l=Hr(i);l&&(l=` for field "${l}"`),e.dataflow.warn(`Infinite extent${l}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function pR(t,e){xr.call(this,t),this.parent=e,this.count=0}ze(pR,xr,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function Jy(t){pe.call(this,{},t),this._keys=Mp();let e=this._targets=[];e.active=0,e.forEach=n=>{for(let i=0,a=e.active;i<a;++i)n(e[i],i,e)}}ze(Jy,pe,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,i){let a=this.value,o=ut(a,t)&&a[t],s,l;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(l=i||(l=this._group[t])&&l.tuple,s=n.dataflow,o=new pR(n.fork(n.NO_SOURCE),this),s.add(o).connect(e(s,t,l)),a[t]=o,this.activate(o)),o},clean(){let t=this.value,e=0;for(let n in t)if(t[n].count===0){let i=t[n].detachSubflow;i&&i(),delete t[n],++e}if(e){let n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(t){let e=this._targets,n=e.length,i=t?t.length:0,a=0;for(;a<i;++a)e[a]=t[a];for(;a<n&&e[a]!=null;++a)e[a]=null;e.active=i},transform(t,e){let n=e.dataflow,i=t.key,a=t.subflow,o=this._keys,s=t.modified("key"),l=c=>this.subflow(c,a,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,c=>{let u=mt(c),d=o.get(u);d!==void 0&&(o.delete(u),l(d).rem(c))}),e.visit(e.ADD,c=>{let u=i(c);o.set(mt(c),u),l(u).add(c)}),s||e.modified(i.fields)?e.visit(e.MOD,c=>{let u=mt(c),d=o.get(u),f=i(c);d===f?l(f).mod(c):(o.set(u,f),l(d).rem(c),l(f).add(c))}):e.changed(e.MOD)&&e.visit(e.MOD,c=>{l(o.get(mt(c))).mod(c)}),s&&e.visit(e.REFLOW,c=>{let u=mt(c),d=o.get(u),f=i(c);d!==f&&(o.set(u,f),l(d).rem(c),l(f).add(c))}),e.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),e}});function bee(t){xr.call(this,null,_7e,t)}ze(bee,xr);function _7e(t){return this.value&&!t.modified()?this.value:ot(t.name)?st(t.name).map(e=>Mi(e)):Mi(t.name,t.as)}function hR(t){pe.call(this,Mp(),t)}hR.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ze(hR,pe,{transform(t,e){let n=e.dataflow,i=this.value,a=e.fork(),o=a.add,s=a.rem,l=a.mod,c=t.expr,u=!0;e.visit(e.REM,f=>{let p=mt(f);i.has(p)?i.delete(p):s.push(f)}),e.visit(e.ADD,f=>{c(f,t)?o.push(f):i.set(mt(f),1)});function d(f){let p=mt(f),h=c(f,t),m=i.get(p);h&&m?(i.delete(p),o.push(f)):!h&&!m?(i.set(p,1),s.push(f)):u&&h&&!m&&l.push(f)}return e.visit(e.MOD,d),t.modified()&&(u=!1,e.visit(e.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),a}});function mR(t){pe.call(this,[],t)}mR.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ze(mR,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE),i=t.fields,a=vee(i,t.as||[]),o=t.index||null,s=a.length;return n.rem=this.value,e.visit(e.SOURCE,l=>{let c=i.map(m=>m(l)),u=c.reduce((m,_)=>Math.max(m,_.length),0),d=0,f,p,h;for(;d<u;++d){for(p=jy(l),f=0;f<s;++f)p[a[f]]=(h=c[f][d])==null?null:h;o&&(p[o]=d),n.add.push(p)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(a)}});function gR(t){pe.call(this,[],t)}gR.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ze(gR,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE),i=t.fields,a=i.map(Hr),o=t.as||["key","value"],s=o[0],l=o[1],c=i.length;return n.rem=this.value,e.visit(e.SOURCE,u=>{for(let d=0,f;d<c;++d)f=jy(u),f[s]=a[d],f[l]=i[d](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function _R(t){pe.call(this,null,t)}_R.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ze(_R,pe,{transform(t,e){let n=t.expr,i=t.as,a=t.modified(),o=t.initonly?e.ADD:a?e.SOURCE:e.modified(n.fields)||e.modified(i)?e.ADD_MOD:e.ADD;return a&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(i),e.visit(o,s=>s[i]=n(s,t))}});function See(t){pe.call(this,[],t)}ze(See,pe,{transform(t,e){let n=e.fork(e.ALL),i=t.generator,a=this.value,o=t.size-a.length,s,l,c;if(o>0){for(s=[];--o>=0;)s.push(c=Jt(i(t))),a.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else l=a.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(l):l,a=a.slice(-o);return n.source=this.value=a,n}});var Yy={value:"value",median:B0,mean:Cy,min:Dp,max:Zo},E7e=[];function ER(t){pe.call(this,[],t)}ER.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function v7e(t){var e=t.method||Yy.value,n;if(Yy[e]==null)he("Unrecognized imputation method: "+e);else return e===Yy.value?(n=t.value!==void 0?t.value:0,()=>n):Yy[e]}function y7e(t){let e=t.field;return n=>n?e(n):NaN}ze(ER,pe,{transform(t,e){var n=e.fork(e.ALL),i=v7e(t),a=y7e(t),o=Hr(t.field),s=Hr(t.key),l=(t.groupby||[]).map(Hr),c=x7e(e.source,t.groupby,t.key,t.keyvals),u=[],d=this.value,f=c.domain.length,p,h,m,_,E,v,y,x,S,N;for(E=0,x=c.length;E<x;++E)for(p=c[E],m=p.values,h=NaN,y=0;y<f;++y)if(p[y]==null){for(_=c.domain[y],N={_impute:!0},v=0,S=m.length;v<S;++v)N[l[v]]=m[v];N[s]=_,N[o]=Number.isNaN(h)?h=i(p,a):h,u.push(Jt(N))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=u,n}});function x7e(t,e,n,i){var a=v=>v(E),o=[],s=i?i.slice():[],l={},c={},u,d,f,p,h,m,_,E;for(s.forEach((v,y)=>l[v]=y+1),p=0,_=t.length;p<_;++p)E=t[p],m=n(E),h=l[m]||(l[m]=s.push(m)),d=(u=e?e.map(a):E7e)+"",(f=c[d])||(f=c[d]=[],o.push(f),f.values=u),f[h-1]=E;return o.domain=s,o}function vR(t){Sd.call(this,t)}vR.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:c3},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ze(vR,Sd,{transform(t,e){let n=this,i=t.modified(),a;return n.value&&(i||e.modified(n._inputs,!0))?(a=n.value=i?n.init(t):{},e.visit(e.SOURCE,o=>n.add(o))):(a=n.value=n.value||this.init(t),e.visit(e.REM,o=>n.rem(o)),e.visit(e.ADD,o=>n.add(o))),n.changes(),e.visit(e.SOURCE,o=>{St(o,a[n.cellkey(o)].tuple)}),e.reflow(i).modifies(this._outputs)},changes(){let t=this._adds,e=this._mods,n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(t[n]),t[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}});function yR(t){pe.call(this,null,t)}yR.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ze(yR,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let i=e.materialize(e.SOURCE).source,a=uR(i,t.groupby,t.field),o=(t.groupby||[]).map(Hr),s=t.bandwidth,l=t.cumulative?"cdf":"pdf",c=t.as||["value","density"],u=[],d=t.extent,f=t.steps||t.minsteps||25,p=t.steps||t.maxsteps||200;l!=="pdf"&&l!=="cdf"&&he("Invalid density method: "+l),t.resolve==="shared"&&(d||(d=Fa(i,t.field)),f=p=t.steps||p),a.forEach(h=>{let m=zI(h,s)[l],_=t.counts?h.length:1,E=d||Fa(h);o3(m,E,f,p).forEach(v=>{let y={};for(let x=0;x<o.length;++x)y[o[x]]=h.dims[x];y[c[0]]=v[0],y[c[1]]=v[1]*_,u.push(Jt(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Nee(t){xr.call(this,null,b7e,t)}ze(Nee,xr);function b7e(t){return this.value&&!t.modified()?this.value:gy(t.fields,t.flat)}function Aee(t){pe.call(this,[],t),this._pending=null}ze(Aee,pe,{transform(t,e){let n=e.dataflow;return this._pending?rR(this,e,this._pending):S7e(t)?e.StopPropagation:t.values?rR(this,e,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(a=>(this._pending=st(a.data),o=>o.touch(this)))}:n.request(t.url,t.format).then(i=>rR(this,e,st(i.data)))}});function S7e(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function rR(t,e,n){n.forEach(Jt);let i=e.fork(e.NO_FIELDS&e.NO_SOURCE);return i.rem=t.value,t.value=i.source=i.add=n,t._pending=null,i.rem.length&&i.clean(!0),i}function xR(t){pe.call(this,{},t)}xR.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ze(xR,pe,{transform(t,e){let n=t.fields,i=t.index,a=t.values,o=t.default==null?null:t.default,s=t.modified(),l=n.length,c=s?e.SOURCE:e.ADD,u=e,d=t.as,f,p,h;return a?(p=a.length,l>1&&!d&&he('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==l*p&&he('The "as" parameter has too few output field names.'),d=d||a.map(Hr),f=function(m){for(var _=0,E=0,v,y;_<l;++_)if(y=i.get(n[_](m)),y==null)for(v=0;v<p;++v,++E)m[d[E]]=o;else for(v=0;v<p;++v,++E)m[d[E]]=a[v](y)}):(d||he("Missing output field names."),f=function(m){for(var _=0,E;_<l;++_)E=i.get(n[_](m)),m[d[_]]=E==null?o:E}),s?u=e.reflow(!0):(h=n.some(m=>e.modified(m.fields)),c|=h?e.MOD:0),e.visit(c,f),u.modifies(d)}});function Tee(t){xr.call(this,null,N7e,t)}ze(Tee,xr);function N7e(t){if(this.value&&!t.modified())return this.value;let e=t.extents,n=e.length,i=1/0,a=-1/0,o,s;for(o=0;o<n;++o)s=e[o],s[0]<i&&(i=s[0]),s[1]>a&&(a=s[1]);return[i,a]}function Cee(t){xr.call(this,null,A7e,t)}ze(Cee,xr);function A7e(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,n)=>e.concat(n),[])}function wee(t){pe.call(this,null,t)}ze(wee,pe,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function bR(t){Sd.call(this,t)}bR.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:c3,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ze(bR,Sd,{_transform:Sd.prototype.transform,transform(t,e){return this._transform(T7e(t,e),e)}});function T7e(t,e){let n=t.field,i=t.value,a=(t.op==="count"?"__count__":t.op)||"sum",o=fi(n).concat(fi(i)),s=w7e(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:s.map(()=>a),fields:s.map(l=>C7e(l,n,i,o)),as:s.map(l=>l+""),modified:t.modified.bind(t)}}function C7e(t,e,n,i){return ha(a=>e(a)===t?n(a):NaN,i,t+"")}function w7e(t,e,n){let i={},a=[];return n.visit(n.SOURCE,o=>{let s=t(o);i[s]||(i[s]=1,a.push(s))}),a.sort(hy),e?a.slice(0,e):a}function Iee(t){Jy.call(this,t)}ze(Iee,Jy,{transform(t,e){let n=t.subflow,i=t.field,a=o=>this.subflow(mt(o),n,e,o);return(t.modified("field")||i&&e.modified(fi(i)))&&he("PreFacet does not support field modification."),this.initTargets(),i?(e.visit(e.MOD,o=>{let s=a(o);i(o).forEach(l=>s.mod(l))}),e.visit(e.ADD,o=>{let s=a(o);i(o).forEach(l=>s.add(Jt(l)))}),e.visit(e.REM,o=>{let s=a(o);i(o).forEach(l=>s.rem(l))})):(e.visit(e.MOD,o=>a(o).mod(o)),e.visit(e.ADD,o=>a(o).add(o)),e.visit(e.REM,o=>a(o).rem(o))),e.clean()&&e.runAfter(()=>this.clean()),e}});function SR(t){pe.call(this,null,t)}SR.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ze(SR,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE),i=t.fields,a=vee(t.fields,t.as||[]),o=i?(l,c)=>I7e(l,c,i,a):Hp,s;return this.value?s=this.value:(e=e.addAll(),s=this.value={}),e.visit(e.REM,l=>{let c=mt(l);n.rem.push(s[c]),s[c]=null}),e.visit(e.ADD,l=>{let c=o(l,Jt({}));s[mt(l)]=c,n.add.push(c)}),e.visit(e.MOD,l=>{n.mod.push(o(l,s[mt(l)]))}),n}});function I7e(t,e,n,i){for(let a=0,o=n.length;a<o;++a)e[i[a]]=n[a](t);return e}function Ree(t){pe.call(this,null,t)}ze(Ree,pe,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function NR(t){pe.call(this,null,t)}NR.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var R7e=1e-14;ze(NR,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;let a=e.materialize(e.SOURCE).source,o=uR(a,t.groupby,t.field),s=(t.groupby||[]).map(Hr),l=[],c=t.step||.01,u=t.probs||Tn(c/2,1-R7e,c),d=u.length;return o.forEach(f=>{let p=kI(f,u);for(let h=0;h<d;++h){let m={};for(let _=0;_<s.length;++_)m[s[_]]=f.dims[_];m[i[0]]=u[h],m[i[1]]=p[h],l.push(Jt(m))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l,n}});function Pee(t){pe.call(this,null,t)}ze(Pee,pe,{transform(t,e){let n,i;return this.value?i=this.value:(n=e=e.addAll(),i=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,a=>{let o=mt(a);n.rem.push(i[o]),i[o]=null}),e.visit(e.ADD,a=>{let o=jy(a);i[mt(a)]=o,n.add.push(o)}),e.visit(e.MOD,a=>{let o=i[mt(a)];for(let s in a)o[s]=a[s],n.modifies(s);n.mod.push(o)})),n}});function AR(t){pe.call(this,[],t),this.count=0}AR.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ze(AR,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE),i=t.modified("size"),a=t.size,o=this.value.reduce((d,f)=>(d[mt(f)]=1,d),{}),s=this.value,l=this.count,c=0;function u(d){let f,p;s.length<a?s.push(d):(p=~~((l+1)*es()),p<s.length&&p>=c&&(f=s[p],o[mt(f)]&&n.rem.push(f),s[p]=d)),++l}if(e.rem.length&&(e.visit(e.REM,d=>{let f=mt(d);o[f]&&(o[f]=-1,n.rem.push(d)),--l}),s=s.filter(d=>o[mt(d)]!==-1)),(e.rem.length||i)&&s.length<a&&e.source&&(c=l=s.length,e.visit(e.SOURCE,d=>{o[mt(d)]||u(d)}),c=-1),i&&s.length>a){let d=s.length-a;for(let f=0;f<d;++f)o[mt(s[f])]=-1,n.rem.push(s[f]);s=s.slice(d)}return e.mod.length&&e.visit(e.MOD,d=>{o[mt(d)]&&n.mod.push(d)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||c<0)&&(n.add=s.filter(d=>!o[mt(d)])),this.count=l,this.value=n.source=s,n}});function TR(t){pe.call(this,null,t)}TR.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ze(TR,pe,{transform(t,e){if(this.value&&!t.modified())return;let n=e.materialize().fork(e.MOD),i=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=Tn(t.start,t.stop,t.step||1).map(a=>{let o={};return o[i]=a,Jt(o)}),n.add=e.add.concat(this.value),n}});function Mee(t){pe.call(this,null,t),this.modified(!0)}ze(Mee,pe,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function CR(t){pe.call(this,null,t)}var Lee=["unit0","unit1"];CR.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:nI,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Lee}]};ze(CR,pe,{transform(t,e){let n=t.field,i=t.interval!==!1,a=t.timezone==="utc",o=this._floor(t,e),s=(a?dd:ud)(o.unit).offset,l=t.as||Lee,c=l[0],u=l[1],d=o.step,f=o.start||1/0,p=o.stop||-1/0,h=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(fi(n)))&&(e=e.reflow(!0),h=e.SOURCE,f=1/0,p=-1/0),e.visit(h,m=>{let _=n(m),E,v;_==null?(m[c]=null,i&&(m[u]=null)):(m[c]=E=v=o(_),i&&(m[u]=v=s(E,d)),E<f&&(f=E),v>p&&(p=v))}),o.start=f,o.stop=p,e.modifies(i?l:c)},_floor(t,e){let n=t.timezone==="utc",{units:i,step:a}=t.units?{units:t.units,step:t.step||1}:AJ({extent:t.extent||Fa(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),o=iI(i),s=this.value||{},l=(n?gJ:mJ)(o,a);return l.unit=Vt(o),l.units=o,l.step=a,l.start=s.start,l.stop=s.stop,this.value=l}});function Oee(t){pe.call(this,Mp(),t)}ze(Oee,pe,{transform(t,e){let n=e.dataflow,i=t.field,a=this.value,o=l=>a.set(i(l),l),s=!0;return t.modified("field")||e.modified(i.fields)?(a.clear(),e.visit(e.SOURCE,o)):e.changed()?(e.visit(e.REM,l=>a.delete(i(l))),e.visit(e.ADD,o)):s=!1,this.modified(s),a.empty>n.cleanThreshold&&n.runAfter(a.clean),e.fork()}});function Bee(t){pe.call(this,null,t)}ze(Bee,pe,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(Dl(t.sort)):e.source).map(t.field))}});function P7e(t,e,n,i){let a=l3[t](e,n);return{init:a.init||wl,update:function(o,s){s[i]=a.next(o)}}}var l3={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{let n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{let n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?++t:t}}},percent_rank:function(){let t=l3.rank(),e=t.next;return{init:t.init,next:n=>(e(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{let n=e.data,i=e.compare,a=e.index;if(t<a){for(;a+1<n.length&&!i(n[a],n[a+1]);)++a;t=a}return(1+t)/n.length}}},ntile:function(t,e){e=+e,e>0||he("ntile num must be greater than zero.");let n=l3.cume_dist(),i=n.next;return{init:n.init,next:a=>Math.ceil(e*i(a))}},lag:function(t,e){return e=+e||1,{next:n=>{let i=n.index-e;return i>=0?t(n.data[i]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{let i=n.index+e,a=n.data;return i<a.length?t(a[i]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||he("nth_value nth must be greater than zero."),{next:n=>{let i=n.i0+(e-1);return i<n.i1?t(n.data[i]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{let i=t(n.data[n.index]);return i!=null?e=i:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:i=>{let a=i.data;return i.index<=n?e:(n=M7e(t,a,i.index))<0?(n=a.length,e=null):e=t(a[n])}}}};function M7e(t,e,n){for(let i=e.length;n<i;++n)if(t(e[n])!=null)return n;return-1}var L7e=Object.keys(l3);function Dee(t){let e=st(t.ops),n=st(t.fields),i=st(t.params),a=st(t.aggregate_params),o=st(t.as),s=this.outputs=[],l=this.windows=[],c={},u={},d=[],f=[],p=!0;function h(m){st(fi(m)).forEach(_=>c[_]=1)}h(t.sort),e.forEach((m,_)=>{let E=n[_],v=i[_],y=a[_]||null,x=Hr(E),S=dee(m,x,o[_]);if(h(E),s.push(S),ut(l3,m))l.push(P7e(m,E,v,S));else{if(E==null&&m!=="count"&&he("Null aggregate field specified."),m==="count"){d.push(S);return}p=!1;let N=u[x];N||(N=u[x]=[],N.field=E,f.push(N)),N.push(fee(m,y,S))}}),(d.length||f.length)&&(this.cell=O7e(f,d,p)),this.inputs=Object.keys(c)}var Fee=Dee.prototype;Fee.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};Fee.update=function(t,e){let n=this.cell,i=this.windows,a=t.data,o=i&&i.length,s;if(n){for(s=t.p0;s<t.i0;++s)n.rem(a[s]);for(s=t.p1;s<t.i1;++s)n.add(a[s]);n.set(e)}for(s=0;s<o;++s)i[s].update(t,e)};function O7e(t,e,n){t=t.map(c=>hee(c,c.field));let i={num:0,agg:null,store:!1,count:e};if(!n)for(var a=t.length,o=i.agg=Array(a),s=0;s<a;++s)o[s]=new t[s](i);if(i.store)var l=i.data=new iR;return i.add=function(c){if(i.num+=1,!n){l&&l.add(c);for(let u=0;u<a;++u)o[u].add(o[u].get(c),c)}},i.rem=function(c){if(i.num-=1,!n){l&&l.rem(c);for(let u=0;u<a;++u)o[u].rem(o[u].get(c),c)}},i.set=function(c){let u,d;for(l&&l.values(),u=0,d=e.length;u<d;++u)c[e[u]]=i.num;if(!n)for(u=0,d=o.length;u<d;++u)o[u].set(c)},i.init=function(){i.num=0,l&&l.reset();for(let c=0;c<a;++c)o[c].init()},i}function wR(t){pe.call(this,{},t),this._mlen=0,this._mods=[]}wR.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:L7e.concat(c3)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ze(wR,pe,{transform(t,e){this.stamp=e.stamp;let n=t.modified(),i=Dl(t.sort),a=nR(t.groupby),o=l=>this.group(a(l)),s=this.state;(!s||n)&&(s=this.state=new Dee(t)),n||e.modified(s.inputs)?(this.value={},e.visit(e.SOURCE,l=>o(l).add(l))):(e.visit(e.REM,l=>o(l).remove(l)),e.visit(e.ADD,l=>o(l).add(l)));for(let l=0,c=this._mlen;l<c;++l)B7e(this._mods[l],s,i,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(s.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=mee(mt),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function B7e(t,e,n,i){let a=i.sort,o=a&&!i.ignorePeers,s=i.frame||[null,0],l=t.data(n),c=l.length,u=o?Rs(a):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:a||en(-1)};e.init();for(let f=0;f<c;++f)D7e(d,s,f,c),o&&F7e(d,u),e.update(d,l[f])}function D7e(t,e,n,i){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,n-Math.abs(e[0])),t.i1=e[1]==null?i:Math.min(i,n+Math.abs(e[1])+1),t.index=n}function F7e(t,e){let n=t.i0,i=t.i1-1,a=t.compare,o=t.data,s=o.length-1;n>0&&!a(o[n],o[n-1])&&(t.i0=e.left(o,o[n])),i<s&&!a(o[i],o[i+1])&&(t.i1=e.right(o,o[i]))}var eL={};mr(eL,{bound:()=>Uie,identifier:()=>QM,mark:()=>Vie,overlap:()=>$ie,render:()=>jie,viewlayout:()=>Wie});function rr(t){return function(){return t}}var RR=Math.abs,Di=Math.atan2,Nd=Math.cos,kee=Math.max,Qy=Math.min,Bs=Math.sin,zc=Math.sqrt,Ei=1e-12,Ad=Math.PI,u3=Ad/2,e8=2*Ad;function Gee(t){return t>1?0:t<-1?Ad:Math.acos(t)}function PR(t){return t>=1?u3:t<=-1?-u3:Math.asin(t)}var MR=Math.PI,LR=2*MR,Zp=1e-6,k7e=LR-Zp;function Uee(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function G7e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Uee;let n=10**e;return function(i){this._+=i[0];for(let a=1,o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}var Xp=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Uee:G7e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,a){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(e,n,i,a,o,s){this._append`C${+e},${+n},${+i},${+a},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,i,a,o){if(e=+e,n=+n,i=+i,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,c=i-e,u=a-n,d=s-e,f=l-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Zp)if(!(Math.abs(f*c-u*d)>Zp)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let h=i-s,m=a-l,_=c*c+u*u,E=h*h+m*m,v=Math.sqrt(_),y=Math.sqrt(p),x=o*Math.tan((MR-Math.acos((_+p-E)/(2*v*y)))/2),S=x/y,N=x/v;Math.abs(S-1)>Zp&&this._append`L${e+S*d},${n+S*f}`,this._append`A${o},${o},0,0,${+(f*h>d*m)},${this._x1=e+N*c},${this._y1=n+N*u}`}}arc(e,n,i,a,o,s){if(e=+e,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(a),c=i*Math.sin(a),u=e+l,d=n+c,f=1^s,p=s?a-o:o-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Zp||Math.abs(this._y1-d)>Zp)&&this._append`L${u},${d}`,i&&(p<0&&(p=p%LR+LR),p>k7e?this._append`A${i},${i},0,1,${f},${e-l},${n-c}A${i},${i},0,1,${f},${this._x1=u},${this._y1=d}`:p>Zp&&this._append`A${i},${i},0,${+(p>=MR)},${f},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}};function d3(){return new Xp}d3.prototype=Xp.prototype;function Td(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{let i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Xp(e)}function U7e(t){return t.innerRadius}function V7e(t){return t.outerRadius}function $7e(t){return t.startAngle}function z7e(t){return t.endAngle}function j7e(t){return t&&t.padAngle}function H7e(t,e,n,i,a,o,s,l){var c=n-t,u=i-e,d=s-a,f=l-o,p=f*c-d*u;if(!(p*p<Ei))return p=(d*(e-o)-f*(t-a))/p,[t+p*c,e+p*u]}function t8(t,e,n,i,a,o,s){var l=t-n,c=e-i,u=(s?o:-o)/zc(l*l+c*c),d=u*c,f=-u*l,p=t+d,h=e+f,m=n+d,_=i+f,E=(p+m)/2,v=(h+_)/2,y=m-p,x=_-h,S=y*y+x*x,N=a-o,w=p*_-m*h,T=(x<0?-1:1)*zc(kee(0,N*N*S-w*w)),I=(w*x-y*T)/S,R=(-w*y-x*T)/S,L=(w*x+y*T)/S,O=(-w*y+x*T)/S,H=I-E,U=R-v,X=L-E,W=O-v;return H*H+U*U>X*X+W*W&&(I=L,R=O),{cx:I,cy:R,x01:-d,y01:-f,x11:I*(a/N-1),y11:R*(a/N-1)}}function f3(){var t=U7e,e=V7e,n=rr(0),i=null,a=$7e,o=z7e,s=j7e,l=null,c=Td(u);function u(){var d,f,p=+t.apply(this,arguments),h=+e.apply(this,arguments),m=a.apply(this,arguments)-u3,_=o.apply(this,arguments)-u3,E=RR(_-m),v=_>m;if(l||(l=d=c()),h<p&&(f=h,h=p,p=f),!(h>Ei))l.moveTo(0,0);else if(E>e8-Ei)l.moveTo(h*Nd(m),h*Bs(m)),l.arc(0,0,h,m,_,!v),p>Ei&&(l.moveTo(p*Nd(_),p*Bs(_)),l.arc(0,0,p,_,m,v));else{var y=m,x=_,S=m,N=_,w=E,T=E,I=s.apply(this,arguments)/2,R=I>Ei&&(i?+i.apply(this,arguments):zc(p*p+h*h)),L=Qy(RR(h-p)/2,+n.apply(this,arguments)),O=L,H=L,U,X;if(R>Ei){var W=PR(R/p*Bs(I)),ne=PR(R/h*Bs(I));(w-=W*2)>Ei?(W*=v?1:-1,S+=W,N-=W):(w=0,S=N=(m+_)/2),(T-=ne*2)>Ei?(ne*=v?1:-1,y+=ne,x-=ne):(T=0,y=x=(m+_)/2)}var be=h*Nd(y),q=h*Bs(y),ie=p*Nd(N),ge=p*Bs(N);if(L>Ei){var et=h*Nd(x),qe=h*Bs(x),vt=p*Nd(S),ar=p*Bs(S),Qt;if(E<Ad)if(Qt=H7e(be,q,vt,ar,et,qe,ie,ge)){var Ai=be-Qt[0],Ti=q-Qt[1],Ci=et-Qt[0],Qe=qe-Qt[1],Nt=1/Bs(Gee((Ai*Ci+Ti*Qe)/(zc(Ai*Ai+Ti*Ti)*zc(Ci*Ci+Qe*Qe)))/2),Bt=zc(Qt[0]*Qt[0]+Qt[1]*Qt[1]);O=Qy(L,(p-Bt)/(Nt-1)),H=Qy(L,(h-Bt)/(Nt+1))}else O=H=0}T>Ei?H>Ei?(U=t8(vt,ar,be,q,h,H,v),X=t8(et,qe,ie,ge,h,H,v),l.moveTo(U.cx+U.x01,U.cy+U.y01),H<L?l.arc(U.cx,U.cy,H,Di(U.y01,U.x01),Di(X.y01,X.x01),!v):(l.arc(U.cx,U.cy,H,Di(U.y01,U.x01),Di(U.y11,U.x11),!v),l.arc(0,0,h,Di(U.cy+U.y11,U.cx+U.x11),Di(X.cy+X.y11,X.cx+X.x11),!v),l.arc(X.cx,X.cy,H,Di(X.y11,X.x11),Di(X.y01,X.x01),!v))):(l.moveTo(be,q),l.arc(0,0,h,y,x,!v)):l.moveTo(be,q),!(p>Ei)||!(w>Ei)?l.lineTo(ie,ge):O>Ei?(U=t8(ie,ge,et,qe,p,-O,v),X=t8(be,q,vt,ar,p,-O,v),l.lineTo(U.cx+U.x01,U.cy+U.y01),O<L?l.arc(U.cx,U.cy,O,Di(U.y01,U.x01),Di(X.y01,X.x01),!v):(l.arc(U.cx,U.cy,O,Di(U.y01,U.x01),Di(U.y11,U.x11),!v),l.arc(0,0,p,Di(U.cy+U.y11,U.cx+U.x11),Di(X.cy+X.y11,X.cx+X.x11),v),l.arc(X.cx,X.cy,O,Di(X.y11,X.x11),Di(X.y01,X.x01),!v))):l.arc(0,0,p,N,S,v)}if(l.closePath(),d)return l=null,d+""||null}return u.centroid=function(){var d=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-Ad/2;return[Nd(f)*d,Bs(f)*d]},u.innerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:rr(+d),u):t},u.outerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:rr(+d),u):e},u.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:rr(+d),u):n},u.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:rr(+d),u):i},u.startAngle=function(d){return arguments.length?(a=typeof d=="function"?d:rr(+d),u):a},u.endAngle=function(d){return arguments.length?(o=typeof d=="function"?d:rr(+d),u):o},u.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:rr(+d),u):s},u.context=function(d){return arguments.length?(l=d==null?null:d,u):l},u}var Jyt=Array.prototype.slice;function r8(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Vee(t){this._context=t}Vee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function qp(t){return new Vee(t)}function n8(t){return t[0]}function i8(t){return t[1]}function p3(t,e){var n=rr(!0),i=null,a=qp,o=null,s=Td(l);t=typeof t=="function"?t:t===void 0?n8:rr(t),e=typeof e=="function"?e:e===void 0?i8:rr(e);function l(c){var u,d=(c=r8(c)).length,f,p=!1,h;for(i==null&&(o=a(h=s())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+t(f,u,c),+e(f,u,c));if(h)return o=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:rr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:rr(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:rr(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,i!=null&&(o=a(i)),l):a},l.context=function(c){return arguments.length?(c==null?i=o=null:o=a(i=c),l):i},l}function a8(t,e,n){var i=null,a=rr(!0),o=null,s=qp,l=null,c=Td(u);t=typeof t=="function"?t:t===void 0?n8:rr(+t),e=typeof e=="function"?e:e===void 0?rr(0):rr(+e),n=typeof n=="function"?n:n===void 0?i8:rr(+n);function u(f){var p,h,m,_=(f=r8(f)).length,E,v=!1,y,x=new Array(_),S=new Array(_);for(o==null&&(l=s(y=c())),p=0;p<=_;++p){if(!(p<_&&a(E=f[p],p,f))===v)if(v=!v)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=p-1;m>=h;--m)l.point(x[m],S[m]);l.lineEnd(),l.areaEnd()}v&&(x[p]=+t(E,p,f),S[p]=+e(E,p,f),l.point(i?+i(E,p,f):x[p],n?+n(E,p,f):S[p]))}if(y)return l=null,y+""||null}function d(){return p3().defined(a).curve(s).context(o)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:rr(+f),i=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:rr(+f),u):t},u.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:rr(+f),u):i},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:rr(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:rr(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:rr(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(i).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:rr(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,o!=null&&(l=s(o)),u):s},u.context=function(f){return arguments.length?(f==null?o=l=null:l=s(o=f),u):o},u}var $ee={draw(t,e){let n=zc(e/Ad);t.moveTo(n,0),t.arc(0,0,n,0,e8)}};function o8(t,e){let n=null,i=Td(a);t=typeof t=="function"?t:rr(t||$ee),e=typeof e=="function"?e:rr(e===void 0?64:+e);function a(){let o;if(n||(n=o=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return a.type=function(o){return arguments.length?(t=typeof o=="function"?o:rr(o),a):t},a.size=function(o){return arguments.length?(e=typeof o=="function"?o:rr(+o),a):e},a.context=function(o){return arguments.length?(n=o==null?null:o,a):n},a}function ts(){}function tm(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function h3(t){this._context=t}h3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function OR(t){return new h3(t)}function zee(t){this._context=t}zee.prototype={areaStart:ts,areaEnd:ts,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:tm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function BR(t){return new zee(t)}function jee(t){this._context=t}jee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:tm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function DR(t){return new jee(t)}function Hee(t,e){this._basis=new h3(t),this._beta=e}Hee.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,l=-1,c;++l<=n;)c=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+c*o),this._beta*e[l]+(1-this._beta)*(a+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var FR=function t(e){function n(i){return e===1?new h3(i):new Hee(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function rm(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function s8(t,e){this._context=t,this._k=(1-e)/6}s8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:rm(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:rm(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var kR=function t(e){function n(i){return new s8(i,e)}return n.tension=function(i){return t(+i)},n}(0);function l8(t,e){this._context=t,this._k=(1-e)/6}l8.prototype={areaStart:ts,areaEnd:ts,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:rm(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var GR=function t(e){function n(i){return new l8(i,e)}return n.tension=function(i){return t(+i)},n}(0);function c8(t,e){this._context=t,this._k=(1-e)/6}c8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rm(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var UR=function t(e){function n(i){return new c8(i,e)}return n.tension=function(i){return t(+i)},n}(0);function m3(t,e,n){var i=t._x1,a=t._y1,o=t._x2,s=t._y2;if(t._l01_a>Ei){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,a=(a*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Ei){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,d=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/d,s=(s*u+t._y1*t._l23_2a-n*t._l12_2a)/d}t._context.bezierCurveTo(i,a,o,s,t._x2,t._y2)}function Wee(t,e){this._context=t,this._alpha=e}Wee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:m3(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var VR=function t(e){function n(i){return e?new Wee(i,e):new s8(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Zee(t,e){this._context=t,this._alpha=e}Zee.prototype={areaStart:ts,areaEnd:ts,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:m3(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $R=function t(e){function n(i){return e?new Zee(i,e):new l8(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Xee(t,e){this._context=t,this._alpha=e}Xee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:m3(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zR=function t(e){function n(i){return e?new Xee(i,e):new c8(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function qee(t){this._context=t}qee.prototype={areaStart:ts,areaEnd:ts,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function jR(t){return new qee(t)}function Kee(t){return t<0?-1:1}function Yee(t,e,n){var i=t._x1-t._x0,a=e-t._x1,o=(t._y1-t._y0)/(i||a<0&&-0),s=(n-t._y1)/(a||i<0&&-0),l=(o*a+s*i)/(i+a);return(Kee(o)+Kee(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(l))||0}function Jee(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function HR(t,e,n){var i=t._x0,a=t._y0,o=t._x1,s=t._y1,l=(o-i)/3;t._context.bezierCurveTo(i+l,a+l*e,o-l,s-l*n,o,s)}function u8(t){this._context=t}u8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HR(this,this._t0,Jee(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,HR(this,Jee(this,n=Yee(this,t,e)),n);break;default:HR(this,this._t0,n=Yee(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Qee(t){this._context=new ete(t)}(Qee.prototype=Object.create(u8.prototype)).point=function(t,e){u8.prototype.point.call(this,e,t)};function ete(t){this._context=t}ete.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,a,o){this._context.bezierCurveTo(e,t,i,n,o,a)}};function WR(t){return new u8(t)}function ZR(t){return new Qee(t)}function rte(t){this._context=t}rte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=tte(t),a=tte(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],a[0][o],i[1][o],a[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function tte(t){var e,n=t.length-1,i,a=new Array(n),o=new Array(n),s=new Array(n);for(a[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)a[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(a[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=a[e]/o[e-1],o[e]-=i,s[e]-=i*s[e-1];for(a[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)a[e]=(s[e]-a[e+1])/o[e];for(o[n-1]=(t[n]+a[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-a[e+1];return[a,o]}function XR(t){return new rte(t)}function d8(t,e){this._context=t,this._t=e}d8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function qR(t){return new d8(t,.5)}function KR(t){return new d8(t,0)}function YR(t){return new d8(t,1)}function QTe(t,e){if(typeof document!="undefined"&&document.createElement){let n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}var eCe=()=>typeof Image!="undefined"?Image:null,Cd;try{Cd=zte(),Cd&&Cd.createCanvas||(Cd=null)}catch(t){}function tCe(t,e,n){if(Cd)try{return new Cd.Canvas(t,e,n)}catch(i){}return null}var rCe=()=>Cd&&Cd.Image||null;function is(t,e,n){return QTe(t,e)||tCe(t,e,n)||null}function jte(){return eCe()||rCe()||null}function Un(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Fl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}var hm=Symbol("implicit");function Kp(){var t=new O0,e=[],n=[],i=hm;function a(o){let s=t.get(o);if(s===void 0){if(i!==hm)return i;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return a.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new O0;for(let s of o)t.has(s)||t.set(s,e.push(s)-1);return a},a.range=function(o){return arguments.length?(n=Array.from(o),a):n.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.copy=function(){return Kp(e,n).unknown(i)},Un.apply(a,arguments),a}var CP={};mr(CP,{interpolate:()=>Yi,interpolateArray:()=>gre,interpolateBasis:()=>S8,interpolateBasisClosed:()=>N8,interpolateCubehelix:()=>Ore,interpolateCubehelixLong:()=>Bre,interpolateDate:()=>T8,interpolateDiscrete:()=>_re,interpolateHcl:()=>Pre,interpolateHclLong:()=>Mre,interpolateHsl:()=>wre,interpolateHslLong:()=>Ire,interpolateHue:()=>Ere,interpolateLab:()=>TP,interpolateNumber:()=>Ji,interpolateNumberArray:()=>vm,interpolateObject:()=>C8,interpolateRgb:()=>w3,interpolateRgbBasis:()=>hre,interpolateRgbBasisClosed:()=>mre,interpolateRound:()=>Vl,interpolateString:()=>w8,interpolateTransformCss:()=>Sre,interpolateTransformSvg:()=>Nre,interpolateZoom:()=>Tre,piecewise:()=>r1,quantize:()=>Dre});function Hc(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wd(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Gl(){}var Id=.7,Qp=1/Id,mm="\\s*([+-]?\\d+)\\s*",A3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nCe=/^#([0-9a-f]{3,8})$/,iCe=new RegExp(`^rgb\\(${mm},${mm},${mm}\\)$`),aCe=new RegExp(`^rgb\\(${kl},${kl},${kl}\\)$`),oCe=new RegExp(`^rgba\\(${mm},${mm},${mm},${A3}\\)$`),sCe=new RegExp(`^rgba\\(${kl},${kl},${kl},${A3}\\)$`),lCe=new RegExp(`^hsl\\(${A3},${kl},${kl}\\)$`),cCe=new RegExp(`^hsla\\(${A3},${kl},${kl},${A3}\\)$`),Hte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hc(Gl,as,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wte,formatHex:Wte,formatHex8:uCe,formatHsl:dCe,formatRgb:Zte,toString:Zte});function Wte(){return this.rgb().formatHex()}function uCe(){return this.rgb().formatHex8()}function dCe(){return Qte(this).formatHsl()}function Zte(){return this.rgb().formatRgb()}function as(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nCe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Xte(e):n===3?new Vn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?g8(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?g8(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=iCe.exec(t))?new Vn(e[1],e[2],e[3],1):(e=aCe.exec(t))?new Vn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=oCe.exec(t))?g8(e[1],e[2],e[3],e[4]):(e=sCe.exec(t))?g8(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=lCe.exec(t))?Yte(e[1],e[2]/100,e[3]/100,1):(e=cCe.exec(t))?Yte(e[1],e[2]/100,e[3]/100,e[4]):Hte.hasOwnProperty(t)?Xte(Hte[t]):t==="transparent"?new Vn(NaN,NaN,NaN,0):null}function Xte(t){return new Vn(t>>16&255,t>>8&255,t&255,1)}function g8(t,e,n,i){return i<=0&&(t=e=n=NaN),new Vn(t,e,n,i)}function T3(t){return t instanceof Gl||(t=as(t)),t?(t=t.rgb(),new Vn(t.r,t.g,t.b,t.opacity)):new Vn}function ja(t,e,n,i){return arguments.length===1?T3(t):new Vn(t,e,n,i==null?1:i)}function Vn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Hc(Vn,ja,wd(Gl,{brighter(t){return t=t==null?Qp:Math.pow(Qp,t),new Vn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Id:Math.pow(Id,t),new Vn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Vn(Jp(this.r),Jp(this.g),Jp(this.b),E8(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qte,formatHex:qte,formatHex8:fCe,formatRgb:Kte,toString:Kte}));function qte(){return`#${Yp(this.r)}${Yp(this.g)}${Yp(this.b)}`}function fCe(){return`#${Yp(this.r)}${Yp(this.g)}${Yp(this.b)}${Yp((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kte(){let t=E8(this.opacity);return`${t===1?"rgb(":"rgba("}${Jp(this.r)}, ${Jp(this.g)}, ${Jp(this.b)}${t===1?")":`, ${t})`}`}function E8(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yp(t){return t=Jp(t),(t<16?"0":"")+t.toString(16)}function Yte(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Fs(t,e,n,i)}function Qte(t){if(t instanceof Fs)return new Fs(t.h,t.s,t.l,t.opacity);if(t instanceof Gl||(t=as(t)),!t)return new Fs;if(t instanceof Fs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,l=o-a,c=(o+a)/2;return l?(e===o?s=(n-i)/l+(n<i)*6:n===o?s=(i-e)/l+2:s=(e-n)/l+4,l/=c<.5?o+a:2-o-a,s*=60):l=c>0&&c<1?0:s,new Fs(s,l,c,t.opacity)}function Wc(t,e,n,i){return arguments.length===1?Qte(t):new Fs(t,e,n,i==null?1:i)}function Fs(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Hc(Fs,Wc,wd(Gl,{brighter(t){return t=t==null?Qp:Math.pow(Qp,t),new Fs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Id:Math.pow(Id,t),new Fs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new Vn(hP(t>=240?t-240:t+120,a,i),hP(t,a,i),hP(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new Fs(Jte(this.h),_8(this.s),_8(this.l),E8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=E8(this.opacity);return`${t===1?"hsl(":"hsla("}${Jte(this.h)}, ${_8(this.s)*100}%, ${_8(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Jte(t){return t=(t||0)%360,t<0?t+360:t}function _8(t){return Math.max(0,Math.min(1,t||0))}function hP(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var v8=Math.PI/180,y8=180/Math.PI;var x8=18,ere=.96422,tre=1,rre=.82521,nre=4/29,gm=6/29,ire=3*gm*gm,pCe=gm*gm*gm;function are(t){if(t instanceof Ul)return new Ul(t.l,t.a,t.b,t.opacity);if(t instanceof Zc)return ore(t);t instanceof Vn||(t=T3(t));var e=EP(t.r),n=EP(t.g),i=EP(t.b),a=mP((.2225045*e+.7168786*n+.0606169*i)/tre),o,s;return e===n&&n===i?o=s=a:(o=mP((.4360747*e+.3850649*n+.1430804*i)/ere),s=mP((.0139322*e+.0971045*n+.7141733*i)/rre)),new Ul(116*a-16,500*(o-a),200*(a-s),t.opacity)}function Rd(t,e,n,i){return arguments.length===1?are(t):new Ul(t,e,n,i==null?1:i)}function Ul(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}Hc(Ul,Rd,wd(Gl,{brighter(t){return new Ul(this.l+x8*(t==null?1:t),this.a,this.b,this.opacity)},darker(t){return new Ul(this.l-x8*(t==null?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=ere*gP(e),t=tre*gP(t),n=rre*gP(n),new Vn(_P(3.1338561*e-1.6168667*t-.4906146*n),_P(-.9787684*e+1.9161415*t+.033454*n),_P(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function mP(t){return t>pCe?Math.pow(t,1/3):t/ire+nre}function gP(t){return t>gm?t*t*t:ire*(t-nre)}function _P(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function EP(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function hCe(t){if(t instanceof Zc)return new Zc(t.h,t.c,t.l,t.opacity);if(t instanceof Ul||(t=are(t)),t.a===0&&t.b===0)return new Zc(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*y8;return new Zc(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function e1(t,e,n,i){return arguments.length===1?hCe(t):new Zc(t,e,n,i==null?1:i)}function Zc(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function ore(t){if(isNaN(t.h))return new Ul(t.l,0,0,t.opacity);var e=t.h*v8;return new Ul(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Hc(Zc,e1,wd(Gl,{brighter(t){return new Zc(this.h,this.c,this.l+x8*(t==null?1:t),this.opacity)},darker(t){return new Zc(this.h,this.c,this.l-x8*(t==null?1:t),this.opacity)},rgb(){return ore(this).rgb()}}));var ure=-.14861,vP=1.78277,yP=-.29227,b8=-.90649,C3=1.97294,sre=C3*b8,lre=C3*vP,cre=vP*yP-b8*ure;function mCe(t){if(t instanceof t1)return new t1(t.h,t.s,t.l,t.opacity);t instanceof Vn||(t=T3(t));var e=t.r/255,n=t.g/255,i=t.b/255,a=(cre*i+sre*e-lre*n)/(cre+sre-lre),o=i-a,s=(C3*(n-a)-yP*o)/b8,l=Math.sqrt(s*s+o*o)/(C3*a*(1-a)),c=l?Math.atan2(s,o)*y8-120:NaN;return new t1(c<0?c+360:c,l,a,t.opacity)}function _m(t,e,n,i){return arguments.length===1?mCe(t):new t1(t,e,n,i==null?1:i)}function t1(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Hc(t1,_m,wd(Gl,{brighter(t){return t=t==null?Qp:Math.pow(Qp,t),new t1(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Id:Math.pow(Id,t),new t1(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*v8,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),a=Math.sin(t);return new Vn(255*(e+n*(ure*i+vP*a)),255*(e+n*(yP*i+b8*a)),255*(e+n*(C3*i)),this.opacity)}}));function xP(t,e,n,i,a){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*i+s*a)/6}function S8(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],o=t[i+1],s=i>0?t[i-1]:2*a-o,l=i<e-1?t[i+2]:2*o-a;return xP((n-i/e)*e,s,a,o,l)}}function N8(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],o=t[i%e],s=t[(i+1)%e],l=t[(i+2)%e];return xP((n-i/e)*e,a,o,s,l)}}var Em=t=>()=>t;function dre(t,e){return function(n){return t+n*e}}function gCe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Pd(t,e){var n=e-t;return n?dre(t,n>180||n<-180?n-360*Math.round(n/360):n):Em(isNaN(t)?e:t)}function fre(t){return(t=+t)==1?Zr:function(e,n){return n-e?gCe(e,n,t):Em(isNaN(e)?n:e)}}function Zr(t,e){var n=e-t;return n?dre(t,n):Em(isNaN(t)?e:t)}var w3=function t(e){var n=fre(e);function i(a,o){var s=n((a=ja(a)).r,(o=ja(o)).r),l=n(a.g,o.g),c=n(a.b,o.b),u=Zr(a.opacity,o.opacity);return function(d){return a.r=s(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return i.gamma=t,i}(1);function pre(t){return function(e){var n=e.length,i=new Array(n),a=new Array(n),o=new Array(n),s,l;for(s=0;s<n;++s)l=ja(e[s]),i[s]=l.r||0,a[s]=l.g||0,o[s]=l.b||0;return i=t(i),a=t(a),o=t(o),l.opacity=1,function(c){return l.r=i(c),l.g=a(c),l.b=o(c),l+""}}}var hre=pre(S8),mre=pre(N8);function vm(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),a;return function(o){for(a=0;a<n;++a)i[a]=t[a]*(1-o)+e[a]*o;return i}}function A8(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gre(t,e){return(A8(e)?vm:bP)(t,e)}function bP(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,a=new Array(i),o=new Array(n),s;for(s=0;s<i;++s)a[s]=Yi(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(l){for(s=0;s<i;++s)o[s]=a[s](l);return o}}function T8(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ji(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function C8(t,e){var n={},i={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=Yi(t[a],e[a]):i[a]=e[a];return function(o){for(a in n)i[a]=n[a](o);return i}}var NP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SP=new RegExp(NP.source,"g");function _Ce(t){return function(){return t}}function ECe(t){return function(e){return t(e)+""}}function w8(t,e){var n=NP.lastIndex=SP.lastIndex=0,i,a,o,s=-1,l=[],c=[];for(t=t+"",e=e+"";(i=NP.exec(t))&&(a=SP.exec(e));)(o=a.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(i=i[0])===(a=a[0])?l[s]?l[s]+=a:l[++s]=a:(l[++s]=null,c.push({i:s,x:Ji(i,a)})),n=SP.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?c[0]?ECe(c[0].x):_Ce(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Yi(t,e){var n=typeof e,i;return e==null||n==="boolean"?Em(e):(n==="number"?Ji:n==="string"?(i=as(e))?(e=i,w3):w8:e instanceof as?w3:e instanceof Date?T8:A8(e)?vm:Array.isArray(e)?bP:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?C8:Ji)(t,e)}function _re(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Ere(t,e){var n=Pd(+t,+e);return function(i){var a=n(i);return a-360*Math.floor(a/360)}}function Vl(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var vre=180/Math.PI,I8={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function AP(t,e,n,i,a,o){var s,l,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,c/=l),t*i<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:a,translateY:o,rotate:Math.atan2(e,t)*vre,skewX:Math.atan(c)*vre,scaleX:s,scaleY:l}}var R8;function yre(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?I8:AP(e.a,e.b,e.c,e.d,e.e,e.f)}function xre(t){return t==null?I8:(R8||(R8=document.createElementNS("http://www.w3.org/2000/svg","g")),R8.setAttribute("transform",t),(t=R8.transform.baseVal.consolidate())?(t=t.matrix,AP(t.a,t.b,t.c,t.d,t.e,t.f)):I8)}function bre(t,e,n,i){function a(u){return u.length?u.pop()+" ":""}function o(u,d,f,p,h,m){if(u!==f||d!==p){var _=h.push("translate(",null,e,null,n);m.push({i:_-4,x:Ji(u,f)},{i:_-2,x:Ji(d,p)})}else(f||p)&&h.push("translate("+f+e+p+n)}function s(u,d,f,p){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),p.push({i:f.push(a(f)+"rotate(",null,i)-2,x:Ji(u,d)})):d&&f.push(a(f)+"rotate("+d+i)}function l(u,d,f,p){u!==d?p.push({i:f.push(a(f)+"skewX(",null,i)-2,x:Ji(u,d)}):d&&f.push(a(f)+"skewX("+d+i)}function c(u,d,f,p,h,m){if(u!==f||d!==p){var _=h.push(a(h)+"scale(",null,",",null,")");m.push({i:_-4,x:Ji(u,f)},{i:_-2,x:Ji(d,p)})}else(f!==1||p!==1)&&h.push(a(h)+"scale("+f+","+p+")")}return function(u,d){var f=[],p=[];return u=t(u),d=t(d),o(u.translateX,u.translateY,d.translateX,d.translateY,f,p),s(u.rotate,d.rotate,f,p),l(u.skewX,d.skewX,f,p),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,p),u=d=null,function(h){for(var m=-1,_=p.length,E;++m<_;)f[(E=p[m]).i]=E.x(h);return f.join("")}}}var Sre=bre(yre,"px, ","px)","deg)"),Nre=bre(xre,", ",")",")");var vCe=1e-12;function Are(t){return((t=Math.exp(t))+1/t)/2}function yCe(t){return((t=Math.exp(t))-1/t)/2}function xCe(t){return((t=Math.exp(2*t))-1)/(t+1)}var Tre=function t(e,n,i){function a(o,s){var l=o[0],c=o[1],u=o[2],d=s[0],f=s[1],p=s[2],h=d-l,m=f-c,_=h*h+m*m,E,v;if(_<vCe)v=Math.log(p/u)/e,E=function(T){return[l+T*h,c+T*m,u*Math.exp(e*T*v)]};else{var y=Math.sqrt(_),x=(p*p-u*u+i*_)/(2*u*n*y),S=(p*p-u*u-i*_)/(2*p*n*y),N=Math.log(Math.sqrt(x*x+1)-x),w=Math.log(Math.sqrt(S*S+1)-S);v=(w-N)/e,E=function(T){var I=T*v,R=Are(N),L=u/(n*y)*(R*xCe(e*I+N)-yCe(N));return[l+L*h,c+L*m,u*R/Are(e*I+N)]}}return E.duration=v*1e3*e/Math.SQRT2,E}return a.rho=function(o){var s=Math.max(.001,+o),l=s*s,c=l*l;return t(s,l,c)},a}(Math.SQRT2,2,4);function Cre(t){return function(e,n){var i=t((e=Wc(e)).h,(n=Wc(n)).h),a=Zr(e.s,n.s),o=Zr(e.l,n.l),s=Zr(e.opacity,n.opacity);return function(l){return e.h=i(l),e.s=a(l),e.l=o(l),e.opacity=s(l),e+""}}}var wre=Cre(Pd),Ire=Cre(Zr);function TP(t,e){var n=Zr((t=Rd(t)).l,(e=Rd(e)).l),i=Zr(t.a,e.a),a=Zr(t.b,e.b),o=Zr(t.opacity,e.opacity);return function(s){return t.l=n(s),t.a=i(s),t.b=a(s),t.opacity=o(s),t+""}}function Rre(t){return function(e,n){var i=t((e=e1(e)).h,(n=e1(n)).h),a=Zr(e.c,n.c),o=Zr(e.l,n.l),s=Zr(e.opacity,n.opacity);return function(l){return e.h=i(l),e.c=a(l),e.l=o(l),e.opacity=s(l),e+""}}}var Pre=Rre(Pd),Mre=Rre(Zr);function Lre(t){return function e(n){n=+n;function i(a,o){var s=t((a=_m(a)).h,(o=_m(o)).h),l=Zr(a.s,o.s),c=Zr(a.l,o.l),u=Zr(a.opacity,o.opacity);return function(d){return a.h=s(d),a.s=l(d),a.l=c(Math.pow(d,n)),a.opacity=u(d),a+""}}return i.gamma=e,i}(1)}var Ore=Lre(Pd),Bre=Lre(Zr);function r1(t,e){e===void 0&&(e=t,t=Yi);for(var n=0,i=e.length-1,a=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(a,a=e[++n]);return function(s){var l=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return o[l](s-l)}}function Dre(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}function wP(t){return function(){return t}}function ym(t){return+t}var Fre=[0,1];function Fi(t){return t}function IP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:wP(isNaN(e)?NaN:.5)}function bCe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function SCe(t,e,n){var i=t[0],a=t[1],o=e[0],s=e[1];return a<i?(i=IP(a,i),o=n(s,o)):(i=IP(i,a),o=n(o,s)),function(l){return o(i(l))}}function NCe(t,e,n){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=IP(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(l){var c=Ps(t,l,1,i)-1;return o[c](a[c](l))}}function $l(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function n1(){var t=Fre,e=Fre,n=Yi,i,a,o,s=Fi,l,c,u;function d(){var p=Math.min(t.length,e.length);return s!==Fi&&(s=bCe(t[0],t[p-1])),l=p>2?NCe:SCe,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?o:(c||(c=l(t.map(i),e,n)))(i(s(p)))}return f.invert=function(p){return s(a((u||(u=l(e,t.map(i),Ji)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,ym),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=Vl,d()},f.clamp=function(p){return arguments.length?(s=p?!0:Fi,d()):s!==Fi},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(o=p,f):o},function(p,h){return i=p,a=h,d()}}function I3(){return n1()(Fi,Fi)}function xm(t,e,n,i){var a=ma(t,e,n),o;switch(i=mo(i==null?",f":i),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=PE(a,s))&&(i.precision=o),k0(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=ME(a,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=RE(a))&&(i.precision=o-(i.type==="%")*2);break}}return nd(i)}function yo(t){var e=t.domain;return t.ticks=function(n){var i=e();return Bp(i[0],i[i.length-1],n==null?10:n)},t.tickFormat=function(n,i){var a=e();return xm(a[0],a[a.length-1],n==null?10:n,i)},t.nice=function(n){n==null&&(n=10);var i=e(),a=0,o=i.length-1,s=i[a],l=i[o],c,u,d=10;for(l<s&&(u=s,s=l,l=u,u=a,a=o,o=u);d-- >0;){if(u=TE(s,l,n),u===c)return i[a]=s,i[o]=l,e(i);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function R3(){var t=I3();return t.copy=function(){return $l(t,R3())},Un.apply(t,arguments),yo(t)}function P3(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,ym),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return P3(t).unknown(e)},t=arguments.length?Array.from(t,ym):[0,1],yo(n)}function M3(t,e){t=t.slice();var n=0,i=t.length-1,a=t[n],o=t[i],s;return o<a&&(s=n,n=i,i=s,s=a,a=o,o=s),t[n]=e.floor(a),t[i]=e.ceil(o),t}function kre(t){return Math.log(t)}function Gre(t){return Math.exp(t)}function ACe(t){return-Math.log(-t)}function TCe(t){return-Math.exp(-t)}function CCe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function wCe(t){return t===10?CCe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ICe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Ure(t){return(e,n)=>-t(-e,n)}function L3(t){let e=t(kre,Gre),n=e.domain,i=10,a,o;function s(){return a=ICe(i),o=wCe(i),n()[0]<0?(a=Ure(a),o=Ure(o),t(ACe,TCe)):t(kre,Gre),e}return e.base=function(l){return arguments.length?(i=+l,s()):i},e.domain=function(l){return arguments.length?(n(l),s()):n()},e.ticks=l=>{let c=n(),u=c[0],d=c[c.length-1],f=d<u;f&&([u,d]=[d,u]);let p=a(u),h=a(d),m,_,E=l==null?10:+l,v=[];if(!(i%1)&&h-p<E){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(m=1;m<i;++m)if(_=p<0?m/o(-p):m*o(p),!(_<u)){if(_>d)break;v.push(_)}}else for(;p<=h;++p)for(m=i-1;m>=1;--m)if(_=p>0?m/o(-p):m*o(p),!(_<u)){if(_>d)break;v.push(_)}v.length*2<E&&(v=Bp(u,d,E))}else v=Bp(p,h,Math.min(h-p,E)).map(o);return f?v.reverse():v},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=mo(c)).precision==null&&(c.trim=!0),c=nd(c)),l===1/0)return c;let u=Math.max(1,i*l/e.ticks().length);return d=>{let f=d/o(Math.round(a(d)));return f*i<i-.5&&(f*=i),f<=u?c(d):""}},e.nice=()=>n(M3(n(),{floor:l=>o(Math.floor(a(l))),ceil:l=>o(Math.ceil(a(l)))})),e}function O3(){let t=L3(n1()).domain([1,10]);return t.copy=()=>$l(t,O3()).base(t.base()),Un.apply(t,arguments),t}function Vre(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function $re(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function B3(t){var e=1,n=t(Vre(e),$re(e));return n.constant=function(i){return arguments.length?t(Vre(e=+i),$re(e)):e},yo(n)}function D3(){var t=B3(n1());return t.copy=function(){return $l(t,D3()).constant(t.constant())},Un.apply(t,arguments)}function zre(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function RCe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function PCe(t){return t<0?-t*t:t*t}function F3(t){var e=t(Fi,Fi),n=1;function i(){return n===1?t(Fi,Fi):n===.5?t(RCe,PCe):t(zre(n),zre(1/n))}return e.exponent=function(a){return arguments.length?(n=+a,i()):n},yo(e)}function bm(){var t=F3(n1());return t.copy=function(){return $l(t,bm()).exponent(t.exponent())},Un.apply(t,arguments),t}function RP(){return bm.apply(null,arguments).exponent(.5)}function k3(){var t=[],e=[],n=[],i;function a(){var s=0,l=Math.max(1,e.length);for(n=new Array(l-1);++s<l;)n[s-1]=wE(t,s/l);return o}function o(s){return s==null||isNaN(s=+s)?i:e[Ps(n,s)]}return o.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Zi),a()},o.range=function(s){return arguments.length?(e=Array.from(s),a()):e.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return k3().domain(t).range(e).unknown(i)},Un.apply(o,arguments)}function G3(){var t=0,e=1,n=1,i=[.5],a=[0,1],o;function s(c){return c!=null&&c<=c?a[Ps(i,c,0,n)]:o}function l(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},s.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,i[0]]:u>=n?[i[n-1],e]:[i[u-1],i[u]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return i.slice()},s.copy=function(){return G3().domain([t,e]).range(a).unknown(o)},Un.apply(yo(s),arguments)}function U3(){var t=[.5],e=[0,1],n,i=1;function a(o){return o!=null&&o<=o?e[Ps(t,o,0,i)]:n}return a.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return U3().domain(t).range(e).unknown(n)},Un.apply(a,arguments)}function MCe(t){return new Date(t)}function LCe(t){return t instanceof Date?+t:+new Date(+t)}function P8(t,e,n,i,a,o,s,l,c,u){var d=I3(),f=d.invert,p=d.domain,h=u(".%L"),m=u(":%S"),_=u("%I:%M"),E=u("%I %p"),v=u("%a %d"),y=u("%b %d"),x=u("%B"),S=u("%Y");function N(w){return(c(w)<w?h:l(w)<w?m:s(w)<w?_:o(w)<w?E:i(w)<w?a(w)<w?v:y:n(w)<w?x:S)(w)}return d.invert=function(w){return new Date(f(w))},d.domain=function(w){return arguments.length?p(Array.from(w,LCe)):p().map(MCe)},d.ticks=function(w){var T=p();return t(T[0],T[T.length-1],w==null?10:w)},d.tickFormat=function(w,T){return T==null?N:u(T)},d.nice=function(w){var T=p();return(!w||typeof w.range!="function")&&(w=e(T[0],T[T.length-1],w==null?10:w)),w?p(M3(T,w)):d},d.copy=function(){return $l(d,P8(t,e,n,i,a,o,s,l,c,u))},d}function M8(){return Un.apply(P8(qw,Kw,ga,Dc,qo,Ga,od,id,Xi,j0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function L8(){return Un.apply(P8(Zw,Xw,_a,Fc,Ko,Xo,sd,ad,Xi,H0).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function O8(){var t=0,e=1,n,i,a,o,s=Fi,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(o(f)-n)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=o(t=+t),i=o(e=+e),a=n===i?0:1/(i-n),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var h,m;return arguments.length?([h,m]=p,s=f(h,m),u):[s(0),s(1)]}}return u.range=d(Yi),u.rangeRound=d(Vl),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return o=f,n=f(t),i=f(e),a=n===i?0:1/(i-n),u}}function Xc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Sm(){var t=yo(O8()(Fi));return t.copy=function(){return Xc(t,Sm())},Fl.apply(t,arguments)}function B8(){var t=L3(O8()).domain([1,10]);return t.copy=function(){return Xc(t,B8()).base(t.base())},Fl.apply(t,arguments)}function D8(){var t=B3(O8());return t.copy=function(){return Xc(t,D8()).constant(t.constant())},Fl.apply(t,arguments)}function V3(){var t=F3(O8());return t.copy=function(){return Xc(t,V3()).exponent(t.exponent())},Fl.apply(t,arguments)}function PP(){return V3.apply(null,arguments).exponent(.5)}function F8(){var t=0,e=.5,n=1,i=1,a,o,s,l,c,u=Fi,d,f=!1,p;function h(_){return isNaN(_=+_)?p:(_=.5+((_=+d(_))-o)*(i*_<i*o?l:c),u(f?Math.max(0,Math.min(1,_)):_))}h.domain=function(_){return arguments.length?([t,e,n]=_,a=d(t=+t),o=d(e=+e),s=d(n=+n),l=a===o?0:.5/(o-a),c=o===s?0:.5/(s-o),i=o<a?-1:1,h):[t,e,n]},h.clamp=function(_){return arguments.length?(f=!!_,h):f},h.interpolator=function(_){return arguments.length?(u=_,h):u};function m(_){return function(E){var v,y,x;return arguments.length?([v,y,x]=E,u=r1(_,[v,y,x]),h):[u(0),u(.5),u(1)]}}return h.range=m(Yi),h.rangeRound=m(Vl),h.unknown=function(_){return arguments.length?(p=_,h):p},function(_){return d=_,a=_(t),o=_(e),s=_(n),l=a===o?0:.5/(o-a),c=o===s?0:.5/(s-o),i=o<a?-1:1,h}}function $3(){var t=yo(F8()(Fi));return t.copy=function(){return Xc(t,$3())},Fl.apply(t,arguments)}function k8(){var t=L3(F8()).domain([.1,1,10]);return t.copy=function(){return Xc(t,k8()).base(t.base())},Fl.apply(t,arguments)}function G8(){var t=B3(F8());return t.copy=function(){return Xc(t,G8()).constant(t.constant())},Fl.apply(t,arguments)}function z3(){var t=F3(F8());return t.copy=function(){return Xc(t,z3()).exponent(t.exponent())},Fl.apply(t,arguments)}function MP(){return z3.apply(null,arguments).exponent(.5)}function $n(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}var LP=$n("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var OP=$n("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666");var BP=$n("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666");var DP=$n("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0");var FP=$n("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");var kP=$n("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");var GP=$n("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");var UP=$n("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999");var VP=$n("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");var $P=$n("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function j3(t,e,n){let i=t-e+n*2;return t?i>0?i:1:0}var BCe="identity",a1="linear",zl="log",Nm="pow",Am="sqrt",H3="symlog",Md="time",Ld="utc",ks="sequential",o1="diverging",i1="quantile",W3="quantize",Z3="threshold",V8="ordinal",$8="point",jP="band",z8="bin-ordinal",ti="continuous",X3="discrete",q3="discretizing",os="interpolating",HP="temporal";function DCe(t){return function(e){let n=e[0],i=e[1],a;return i<n&&(a=n,n=i,i=a),[t.invert(n),t.invert(i)]}}function FCe(t){return function(e){let n=t.range(),i=e[0],a=e[1],o=-1,s,l,c,u;for(a<i&&(l=i,i=a,a=l),c=0,u=n.length;c<u;++c)n[c]>=i&&n[c]<=a&&(o<0&&(o=c),s=c);if(!(o<0))return i=t.invertExtent(n[o]),a=t.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],a[1]===void 0?a[0]:a[1]]}}function WP(){let t=Kp().unknown(void 0),e=t.domain,n=t.range,i=[0,1],a,o,s=!1,l=0,c=0,u=.5;delete t.unknown;function d(){let f=e().length,p=i[1]<i[0],h=i[1-p],m=j3(f,l,c),_=i[p-0];a=(h-_)/(m||1),s&&(a=Math.floor(a)),_+=(h-_-a*(f-l))*u,o=a*(1-l),s&&(_=Math.round(_),o=Math.round(o));let E=Tn(f).map(v=>_+a*v);return n(p?E.reverse():E)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?(i=[+f[0],+f[1]],d()):i.slice()},t.rangeRound=function(f){return i=[+f[0],+f[1]],s=!0,d()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(s=!!f,d()):s},t.padding=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),l=c,d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),d()):l},t.paddingOuter=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.invertRange=function(f){if(f[0]==null||f[1]==null)return;let p=i[1]<i[0],h=p?n().reverse():n(),m=h.length-1,_=+f[0],E=+f[1],v,y,x;if(!(_!==_||E!==E)&&(E<_&&(x=_,_=E,E=x),!(E<h[0]||_>i[1-p])))return v=Math.max(0,Op(h,_)-1),y=_===E?v:Op(h,E)-1,_-h[v]>o+1e-10&&++v,p&&(x=v,v=m-y,y=m-x),v>y?void 0:e().slice(v,y+1)},t.invert=function(f){let p=t.invertRange([f,f]);return p&&p[0]},t.copy=function(){return WP().domain(e()).range(i).round(s).paddingInner(l).paddingOuter(c).align(u)},d()}function Zre(t){let e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Zre(e())},t}function kCe(){return Zre(WP().paddingInner(1))}var GCe=Array.prototype.map;function UCe(t){return GCe.call(t,kn)}var VCe=Array.prototype.slice;function Xre(){let t=[],e=[];function n(i){return i==null||i!==i?void 0:e[(Ps(t,i)-1)%e.length]}return n.domain=function(i){return arguments.length?(t=UCe(i),n):t.slice()},n.range=function(i){return arguments.length?(e=VCe.call(i),n):e.slice()},n.tickFormat=function(i,a){return xm(t[0],Vt(t),i==null?10:i,a)},n.copy=function(){return Xre().domain(n.domain()).range(n.range())},n}var U8=new Map,qre=Symbol("vega_scale");function ZP(t){return t[qre]=!0,t}function Kre(t){return t&&t[qre]===!0}function $Ce(t,e,n){let i=function(){let o=e();return o.invertRange||(o.invertRange=o.invert?DCe(o):o.invertExtent?FCe(o):void 0),o.type=t,ZP(o)};return i.metadata=hi(st(n)),i}function tr(t,e,n){return arguments.length>1?(U8.set(t,$Ce(t,e,n)),this):XP(t)?U8.get(t):void 0}tr(BCe,P3);tr(a1,R3,ti);tr(zl,O3,[ti,zl]);tr(Nm,bm,ti);tr(Am,RP,ti);tr(H3,D3,ti);tr(Md,M8,[ti,HP]);tr(Ld,L8,[ti,HP]);tr(ks,Sm,[ti,os]);tr(`${ks}-${a1}`,Sm,[ti,os]);tr(`${ks}-${zl}`,B8,[ti,os,zl]);tr(`${ks}-${Nm}`,V3,[ti,os]);tr(`${ks}-${Am}`,PP,[ti,os]);tr(`${ks}-${H3}`,D8,[ti,os]);tr(`${o1}-${a1}`,$3,[ti,os]);tr(`${o1}-${zl}`,k8,[ti,os,zl]);tr(`${o1}-${Nm}`,z3,[ti,os]);tr(`${o1}-${Am}`,MP,[ti,os]);tr(`${o1}-${H3}`,G8,[ti,os]);tr(i1,k3,[q3,i1]);tr(W3,G3,q3);tr(Z3,U3,q3);tr(z8,Xre,[X3,q3]);tr(V8,Kp,X3);tr(jP,WP,X3);tr($8,kCe,X3);function XP(t){return U8.has(t)}function s1(t,e){let n=U8.get(t);return n&&n.metadata[e]}function K3(t){return s1(t,ti)}function Od(t){return s1(t,X3)}function j8(t){return s1(t,q3)}function qP(t){return s1(t,zl)}function zCe(t){return s1(t,HP)}function KP(t){return s1(t,os)}function YP(t){return s1(t,i1)}var jCe=["clamp","base","constant","exponent"];function JP(t,e){let n=e[0],i=Vt(e)-n;return function(a){return t(n+a*i)}}function Y3(t,e,n){return r1(W8(e||"rgb",n),t)}function QP(t,e){let n=new Array(e),i=e+1;for(let a=0;a<e;)n[a]=t(++a/i);return n}function H8(t,e,n){let i=n-e,a,o,s;return!i||!Number.isFinite(i)?en(.5):(a=(o=t.type).indexOf("-"),o=a<0?o:o.slice(a+1),s=tr(o)().domain([e,n]).range([0,1]),jCe.forEach(l=>t[l]?s[l](t[l]()):0),s)}function W8(t,e){let n=CP[HCe(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function HCe(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}var WCe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},ZCe={accent:OP,category10:LP,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:BP,observable10:DP,paired:FP,pastel1:kP,pastel2:GP,set1:UP,set2:VP,set3:$P,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function Yre(t){if(ot(t))return t;let e=t.length/6|0,n=new Array(e);for(let i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}function Jre(t,e){for(let n in t)Z8(n,e(t[n]))}var jre={};Jre(ZCe,Yre);Jre(WCe,t=>Y3(Yre(t)));function Z8(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(jre[t]=e,this):jre[t]}var J3="symbol",XCe="discrete",Qre="gradient",qCe=t=>ot(t)?t.map(e=>String(e)):String(t),KCe=(t,e)=>t[1]-e[1],YCe=(t,e)=>e[1]-t[1];function X8(t,e,n){let i;return Oc(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),n!=null&&(e=Math.min(e,Math.floor(td(t.domain())/n||1)+1))),Lt(e)&&(i=e.step,e=e.interval),fr(e)&&(e=t.type===Md?ud(e):t.type==Ld?dd(e):he("Only time and utc scales accept interval strings."),i&&(e=e.every(i))),e}function eM(t,e,n){let i=t.range(),a=i[0],o=Vt(i),s=KCe;if(a>o&&(i=o,o=a,a=i,s=YCe),a=Math.floor(a),o=Math.ceil(o),e=e.map(l=>[l,t(l)]).filter(l=>a<=l[1]&&l[1]<=o).sort(s).map(l=>l[0]),n>0&&e.length>1){let l=[e[0],Vt(e)];for(;e.length>n&&e.length>=3;)e=e.filter((c,u)=>!(u%2));e.length<3&&(e=l)}return e}function q8(t,e){return t.bins?eM(t,t.bins,e):t.ticks?t.ticks(e):t.domain()}function tM(t,e,n,i,a,o){let s=e.type,l=qCe;if(s===Md||a===Md)l=t.timeFormat(i);else if(s===Ld||a===Ld)l=t.utcFormat(i);else if(qP(s)){let c=t.formatFloat(i);if(o||e.bins)l=c;else{let u=ene(e,n,!1);l=d=>u(d)?c(d):""}}else if(e.tickFormat){let c=e.domain();l=t.formatSpan(c[0],c[c.length-1],n,i)}else i&&(l=t.format(i));return l}function ene(t,e,n){let i=q8(t,e),a=t.base(),o=Math.log(a),s=Math.max(1,a*e/i.length),l=c=>{let u=c/Math.pow(a,Math.round(Math.log(c)/o));return u*a<a-.5&&(u*=a),u<=s};return n?i.filter(l):l}var zP={[i1]:"quantiles",[W3]:"thresholds",[Z3]:"domain"},tne={[i1]:"quantiles",[W3]:"domain"};function rM(t,e){return t.bins?ewe(t.bins):t.type===zl?ene(t,e,!0):zP[t.type]?QCe(t[zP[t.type]]()):q8(t,e)}function JCe(t,e,n){let i=e[tne[e.type]](),a=i.length,o=a>1?i[1]-i[0]:i[0],s;for(s=1;s<a;++s)o=Math.min(o,i[s]-i[s-1]);return t.formatSpan(0,o,3*10,n)}function QCe(t){let e=[-1/0].concat(t);return e.max=1/0,e}function ewe(t){let e=t.slice(0,-1);return e.max=Vt(t),e}var twe=t=>zP[t.type]||t.bins;function nM(t,e,n,i,a,o,s){let l=tne[e.type]&&o!==Md&&o!==Ld?JCe(t,e,a):tM(t,e,n,a,o,s);return i===J3&&twe(e)?rwe(l):i===XCe?nwe(l):iwe(l)}var rwe=t=>(e,n,i)=>{let a=Hre(i[n+1],Hre(i.max,1/0)),o=Wre(e,t),s=Wre(a,t);return o&&s?o+" \u2013 "+s:s?"< "+s:"\u2265 "+o},Hre=(t,e)=>t!=null?t:e,nwe=t=>(e,n)=>n?t(e):null,iwe=t=>e=>t(e),Wre=(t,e)=>Number.isFinite(t)?e(t):null;function rne(t){let e=t.domain(),n=e.length-1,i=+e[0],a=+Vt(e),o=a-i;if(t.type===Z3){let s=n?o/n:.1;i-=s,a+=s,o=a-i}return s=>(s-i)/o}function awe(t,e,n,i){let a=i||e.type;return fr(n)&&zCe(a)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&a===Md?t.timeFormat("%A, %d %B %Y, %X"):!n&&a===Ld?t.utcFormat("%A, %d %B %Y, %X UTC"):nM(t,e,5,null,n,i,!0)}function iM(t,e,n){n=n||{};let i=Math.max(3,n.maxlen||7),a=awe(t,e,n.format,n.formatType);if(j8(e.type)){let o=rM(e).slice(1).map(a),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(Od(e.type)){let o=e.domain(),s=o.length,l=s>i?o.slice(0,i-2).map(a).join(", ")+", ending with "+o.slice(-1).map(a):o.map(a).join(", ");return`${s} value${s===1?"":"s"}: ${l}`}else{let o=e.domain();return`values from ${a(o[0])} to ${a(Vt(o))}`}}var owe=0;var ax="p_";function AM(t){return t&&t.gradient}function wne(t,e,n){let i=t.gradient,a=t.id,o=i==="radial"?ax:"";return a||(a=t.id="gradient_"+owe++,i==="radial"?(t.x1=jl(t.x1,.5),t.y1=jl(t.y1,.5),t.r1=jl(t.r1,0),t.x2=jl(t.x2,.5),t.y2=jl(t.y2,.5),t.r2=jl(t.r2,.5),o=ax):(t.x1=jl(t.x1,0),t.y1=jl(t.y1,0),t.x2=jl(t.x2,1),t.y2=jl(t.y2,0))),e[a]=t,"url("+(n||"")+"#"+o+a+")"}function jl(t,e){return t!=null?t:e}function Ine(t,e){var n=[],i;return i={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(a,o){return n.push({offset:a,color:o}),i}}}var nne={basis:{curve:OR},"basis-closed":{curve:BR},"basis-open":{curve:DR},bundle:{curve:FR,tension:"beta",value:.85},cardinal:{curve:kR,tension:"tension",value:0},"cardinal-open":{curve:UR,tension:"tension",value:0},"cardinal-closed":{curve:GR,tension:"tension",value:0},"catmull-rom":{curve:VR,tension:"alpha",value:.5},"catmull-rom-closed":{curve:$R,tension:"alpha",value:.5},"catmull-rom-open":{curve:zR,tension:"alpha",value:.5},linear:{curve:qp},"linear-closed":{curve:jR},monotone:{horizontal:ZR,vertical:WR},natural:{curve:XR},step:{curve:qR},"step-after":{curve:YR},"step-before":{curve:KR}};function Rne(t,e,n){var i=ut(nne,t)&&nne[t],a=null;return i&&(a=i.curve||i[e||"vertical"],i.tension&&n!=null&&(a=a[i.tension](n))),a}var swe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},lwe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,cwe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,uwe=/^((\s+,?\s*)|(,\s*))/,dwe=/^[01]/;function yx(t){let e=[];return(t.match(lwe)||[]).forEach(i=>{let a=i[0],o=a.toLowerCase(),s=swe[o],l=fwe(o,s,i.slice(1).trim()),c=l.length;if(c<s||c&&c%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([a,...l.slice(0,s)]),c!==s){o==="m"&&(a=a==="M"?"L":"l");for(let u=s;u<c;u+=s)e.push([a,...l.slice(u,u+s)])}}),e}function fwe(t,e,n){let i=[];for(let a=0;e&&a<n.length;)for(let o=0;o<e;++o){let s=t==="a"&&(o===3||o===4)?dwe:cwe,l=n.slice(a).match(s);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");a+=l[0].length,i.push(+l[0]);let c=n.slice(a).match(uwe);c!==null&&(a+=c[0].length)}return i}var Ud=Math.PI/180,pwe=1e-14,l1=Math.PI/2,Hl=Math.PI*2,Tm=Math.sqrt(3)/2,aM={},oM={},Pne=[].join;function hwe(t,e,n,i,a,o,s,l,c){let u=Pne.call(arguments);if(aM[u])return aM[u];let d=s*Ud,f=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);let h=p*(l-t)*.5+f*(c-e)*.5,m=p*(c-e)*.5-f*(l-t)*.5,_=h*h/(n*n)+m*m/(i*i);_>1&&(_=Math.sqrt(_),n*=_,i*=_);let E=p/n,v=f/n,y=-f/i,x=p/i,S=E*l+v*c,N=y*l+x*c,w=E*t+v*e,T=y*t+x*e,R=1/((w-S)*(w-S)+(T-N)*(T-N))-.25;R<0&&(R=0);let L=Math.sqrt(R);o==a&&(L=-L);let O=.5*(S+w)-L*(T-N),H=.5*(N+T)+L*(w-S),U=Math.atan2(N-H,S-O),W=Math.atan2(T-H,w-O)-U;W<0&&o===1?W+=Hl:W>0&&o===0&&(W-=Hl);let ne=Math.ceil(Math.abs(W/(l1+.001))),be=[];for(let q=0;q<ne;++q){let ie=U+q*W/ne,ge=U+(q+1)*W/ne;be[q]=[O,H,ie,ge,n,i,f,p]}return aM[u]=be}function mwe(t){let e=Pne.call(t);if(oM[e])return oM[e];var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7];let d=u*s,f=-c*l,p=c*s,h=u*l,m=Math.cos(a),_=Math.sin(a),E=Math.cos(o),v=Math.sin(o),y=.5*(o-a),x=Math.sin(y*.5),S=8/3*x*x/Math.sin(y),N=n+m-S*_,w=i+_+S*m,T=n+E,I=i+v,R=T+S*v,L=I-S*E;return oM[e]=[d*N+f*w,p*N+h*w,d*R+f*L,p*R+h*L,d*T+f*I,p*T+h*I]}var ss=["l",0,0,0,0,0,0,0];function gwe(t,e,n){let i=ss[0]=t[0];if(i==="a"||i==="A")ss[1]=e*t[1],ss[2]=n*t[2],ss[3]=t[3],ss[4]=t[4],ss[5]=t[5],ss[6]=e*t[6],ss[7]=n*t[7];else if(i==="h"||i==="H")ss[1]=e*t[1];else if(i==="v"||i==="V")ss[1]=n*t[1];else for(var a=1,o=t.length;a<o;++a)ss[a]=(a%2==1?e:n)*t[a];return ss}function o6(t,e,n,i,a,o){var s,l=null,c=0,u=0,d=0,f=0,p,h,m,_,E=0,v=0;n==null&&(n=0),i==null&&(i=0),a==null&&(a=1),o==null&&(o=a),t.beginPath&&t.beginPath();for(var y=0,x=e.length;y<x;++y){switch(s=e[y],(a!==1||o!==1)&&(s=gwe(s,a,o)),s[0]){case"l":c+=s[1],u+=s[2],t.lineTo(c+n,u+i);break;case"L":c=s[1],u=s[2],t.lineTo(c+n,u+i);break;case"h":c+=s[1],t.lineTo(c+n,u+i);break;case"H":c=s[1],t.lineTo(c+n,u+i);break;case"v":u+=s[1],t.lineTo(c+n,u+i);break;case"V":u=s[1],t.lineTo(c+n,u+i);break;case"m":c+=s[1],u+=s[2],E=c,v=u,t.moveTo(c+n,u+i);break;case"M":c=s[1],u=s[2],E=c,v=u,t.moveTo(c+n,u+i);break;case"c":p=c+s[5],h=u+s[6],d=c+s[3],f=u+s[4],t.bezierCurveTo(c+s[1]+n,u+s[2]+i,d+n,f+i,p+n,h+i),c=p,u=h;break;case"C":c=s[5],u=s[6],d=s[3],f=s[4],t.bezierCurveTo(s[1]+n,s[2]+i,d+n,f+i,c+n,u+i);break;case"s":p=c+s[3],h=u+s[4],d=2*c-d,f=2*u-f,t.bezierCurveTo(d+n,f+i,c+s[1]+n,u+s[2]+i,p+n,h+i),d=c+s[1],f=u+s[2],c=p,u=h;break;case"S":p=s[3],h=s[4],d=2*c-d,f=2*u-f,t.bezierCurveTo(d+n,f+i,s[1]+n,s[2]+i,p+n,h+i),c=p,u=h,d=s[1],f=s[2];break;case"q":p=c+s[3],h=u+s[4],d=c+s[1],f=u+s[2],t.quadraticCurveTo(d+n,f+i,p+n,h+i),c=p,u=h;break;case"Q":p=s[3],h=s[4],t.quadraticCurveTo(s[1]+n,s[2]+i,p+n,h+i),c=p,u=h,d=s[1],f=s[2];break;case"t":p=c+s[1],h=u+s[2],l[0].match(/[QqTt]/)===null?(d=c,f=u):l[0]==="t"?(d=2*c-m,f=2*u-_):l[0]==="q"&&(d=2*c-d,f=2*u-f),m=d,_=f,t.quadraticCurveTo(d+n,f+i,p+n,h+i),c=p,u=h,d=c+s[1],f=u+s[2];break;case"T":p=s[1],h=s[2],d=2*c-d,f=2*u-f,t.quadraticCurveTo(d+n,f+i,p+n,h+i),c=p,u=h;break;case"a":ine(t,c+n,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+c+n,s[7]+u+i]),c+=s[6],u+=s[7];break;case"A":ine(t,c+n,u+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),c=s[6],u=s[7];break;case"z":case"Z":c=E,u=v,t.closePath();break}l=s}}function ine(t,e,n,i){let a=hwe(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let o=0;o<a.length;++o){let s=mwe(a[o]);t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}var ane=.5773502691896257,one={circle:{draw:function(t,e){let n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,Hl)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath()}},diamond:{draw:function(t,e){let n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,a=n/2.5,o=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-o),t.lineTo(a,-o),t.lineTo(0,-n),t.lineTo(-a,-o),t.lineTo(-i,-o),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Tm*n,a=i-n*ane,o=n/4;t.moveTo(0,-i-a),t.lineTo(-o,i-a),t.lineTo(o,i-a),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Tm*n,a=i-n*ane;t.moveTo(0,-i-a),t.lineTo(-n,i-a),t.lineTo(n,i-a),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Tm*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Tm*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Tm*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Tm*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath()}},stroke:{draw:function(t,e){let n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function _we(t){return ut(one,t)?one[t]:Ewe(t)}var sM={};function Ewe(t){if(!ut(sM,t)){let e=yx(t);sM[t]={draw:function(n,i){o6(n,e,0,0,Math.sqrt(i)/2)}}}return sM[t]}var Bd=.448084975506;function vwe(t){return t.x}function ywe(t){return t.y}function xwe(t){return t.width}function bwe(t){return t.height}function qc(t){return typeof t=="function"?t:()=>+t}function K8(t,e,n){return Math.max(e,Math.min(t,n))}function Swe(){var t=vwe,e=ywe,n=xwe,i=bwe,a=qc(0),o=a,s=a,l=a,c=null;function u(d,f,p){var h,m=f!=null?f:+t.call(this,d),_=p!=null?p:+e.call(this,d),E=+n.call(this,d),v=+i.call(this,d),y=Math.min(E,v)/2,x=K8(+a.call(this,d),0,y),S=K8(+o.call(this,d),0,y),N=K8(+s.call(this,d),0,y),w=K8(+l.call(this,d),0,y);if(c||(c=h=d3()),x<=0&&S<=0&&N<=0&&w<=0)c.rect(m,_,E,v);else{var T=m+E,I=_+v;c.moveTo(m+x,_),c.lineTo(T-S,_),c.bezierCurveTo(T-Bd*S,_,T,_+Bd*S,T,_+S),c.lineTo(T,I-w),c.bezierCurveTo(T,I-Bd*w,T-Bd*w,I,T-w,I),c.lineTo(m+N,I),c.bezierCurveTo(m+Bd*N,I,m,I-Bd*N,m,I-N),c.lineTo(m,_+x),c.bezierCurveTo(m,_+Bd*x,m+Bd*x,_,m+x,_),c.closePath()}if(h)return c=null,h+""||null}return u.x=function(d){return arguments.length?(t=qc(d),u):t},u.y=function(d){return arguments.length?(e=qc(d),u):e},u.width=function(d){return arguments.length?(n=qc(d),u):n},u.height=function(d){return arguments.length?(i=qc(d),u):i},u.cornerRadius=function(d,f,p,h){return arguments.length?(a=qc(d),o=f!=null?qc(f):a,l=p!=null?qc(p):a,s=h!=null?qc(h):o,u):a},u.context=function(d){return arguments.length?(c=d==null?null:d,u):c},u}function Nwe(){var t,e,n,i,a=null,o,s,l,c;function u(f,p,h){let m=h/2;if(o){var _=l-p,E=f-s;if(_||E){var v=Math.hypot(_,E),y=(_/=v)*c,x=(E/=v)*c,S=Math.atan2(E,_);a.moveTo(s-y,l-x),a.lineTo(f-_*m,p-E*m),a.arc(f,p,m,S-Math.PI,S),a.lineTo(s+y,l+x),a.arc(s,l,c,S,S+Math.PI)}else a.arc(f,p,m,0,Hl);a.closePath()}else o=1;s=f,l=p,c=m}function d(f){var p,h=f.length,m,_=!1,E;for(a==null&&(a=E=d3()),p=0;p<=h;++p)!(p<h&&i(m=f[p],p,f))===_&&(_=!_)&&(o=0),_&&u(+t(m,p,f),+e(m,p,f),+n(m,p,f));if(E)return a=null,E+""||null}return d.x=function(f){return arguments.length?(t=f,d):t},d.y=function(f){return arguments.length?(e=f,d):e},d.size=function(f){return arguments.length?(n=f,d):n},d.defined=function(f){return arguments.length?(i=f,d):i},d.context=function(f){return arguments.length?(f==null?a=null:a=f,d):a},d}function u6(t,e){return t!=null?t:e}var d6=t=>t.x||0,f6=t=>t.y||0,Awe=t=>t.width||0,Twe=t=>t.height||0,Cwe=t=>(t.x||0)+(t.width||0),wwe=t=>(t.y||0)+(t.height||0),Iwe=t=>t.startAngle||0,Rwe=t=>t.endAngle||0,Pwe=t=>t.padAngle||0,Mwe=t=>t.innerRadius||0,Lwe=t=>t.outerRadius||0,Owe=t=>t.cornerRadius||0,Bwe=t=>u6(t.cornerRadiusTopLeft,t.cornerRadius)||0,Dwe=t=>u6(t.cornerRadiusTopRight,t.cornerRadius)||0,Fwe=t=>u6(t.cornerRadiusBottomRight,t.cornerRadius)||0,kwe=t=>u6(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Gwe=t=>u6(t.size,64),Uwe=t=>t.size||1,xx=t=>t.defined!==!1,Vwe=t=>_we(t.shape||"circle"),$we=f3().startAngle(Iwe).endAngle(Rwe).padAngle(Pwe).innerRadius(Mwe).outerRadius(Lwe).cornerRadius(Owe),zwe=a8().x(d6).y1(f6).y0(wwe).defined(xx),jwe=a8().y(f6).x1(d6).x0(Cwe).defined(xx),Hwe=p3().x(d6).y(f6).defined(xx),Wwe=Swe().x(d6).y(f6).width(Awe).height(Twe).cornerRadius(Bwe,Dwe,Fwe,kwe),Zwe=o8().type(Vwe).size(Gwe),Xwe=Nwe().x(d6).y(f6).defined(xx).size(Uwe);function TM(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function qwe(t,e){return $we.context(t)(e)}function Kwe(t,e){let n=e[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?jwe:zwe).curve(Rne(i,n.orient,n.tension)).context(t)(e)}function Ywe(t,e){let n=e[0],i=n.interpolate||"linear";return Hwe.curve(Rne(i,n.orient,n.tension)).context(t)(e)}function Rm(t,e,n,i){return Wwe.context(t)(e,n,i)}function Jwe(t,e){return(e.mark.shape||e.shape).context(t)(e)}function Qwe(t,e){return Zwe.context(t)(e)}function eIe(t,e){return Xwe.context(t)(e)}var tIe=1;function CM(t,e,n){var i=e.clip,a=t._defs,o=e.clip_id||(e.clip_id="clip"+tIe++),s=a.clipping[o]||(a.clipping[o]={id:o});return wt(i)?s.path=i(null):TM(n)?s.path=Rm(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function wn(t){this.clear(),t&&this.union(t)}wn.prototype={clone(){return new wn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){let i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(t,e,n){var{x1:i,y1:a,x2:o,y2:s}=this,l=Math.cos(t),c=Math.sin(t),u=e-e*l+n*c,d=n-e*c-n*l;return[l*i-c*a+u,c*i+l*a+d,l*i-c*s+u,c*i+l*s+d,l*o-c*a+u,c*o+l*a+d,l*o-c*s+u,c*o+l*s+d]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function bx(t){this.mark=t,this.bounds=this.bounds||new wn}function Sx(t){bx.call(this,t),this.items=this.items||[]}ze(Sx,bx);var fM=class{constructor(e){this._pending=0,this._loader=e||JE()}pending(){return this._pending}sanitizeURL(e){let n=this;return sne(n),n._loader.sanitize(e,{context:"href"}).then(i=>(Q3(n),i)).catch(()=>(Q3(n),null))}loadImage(e){let n=this,i=jte();return sne(n),n._loader.sanitize(e,{context:"image"}).then(a=>{let o=a.href;if(!o||!i)throw{url:o};let s=new i,l=ut(a,"crossOrigin")?a.crossOrigin:"anonymous";return l!=null&&(s.crossOrigin=l),s.onload=()=>Q3(n),s.onerror=()=>Q3(n),s.src=o,s}).catch(a=>(Q3(n),{complete:!1,width:0,height:0,src:a&&a.url||""}))}ready(){let e=this;return new Promise(n=>{function i(a){e.pending()?setTimeout(()=>{i(!0)},10):n(a)}i(!1)})}};function sne(t){t._pending+=1}function Q3(t){t._pending-=1}function Yc(t,e,n){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){let i=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(i+(n?rIe(e,i):0))}return t}function rIe(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}var nIe=Hl-1e-8,Nx,Y8,J8,d1,pM,Q8,hM,mM,Fd=(t,e)=>Nx.add(t,e),ex=(t,e)=>Fd(Y8=t,J8=e),lne=t=>Fd(t,Nx.y1),cne=t=>Fd(Nx.x1,t),c1=(t,e)=>pM*t+hM*e,u1=(t,e)=>Q8*t+mM*e,lM=(t,e)=>Fd(c1(t,e),u1(t,e)),cM=(t,e)=>ex(c1(t,e),u1(t,e));function Ax(t,e){return Nx=t,e?(d1=e*Ud,pM=mM=Math.cos(d1),Q8=Math.sin(d1),hM=-Q8):(pM=mM=1,d1=Q8=hM=0),iIe}var iIe={beginPath(){},closePath(){},moveTo:cM,lineTo:cM,rect(t,e,n,i){d1?(lM(t+n,e),lM(t+n,e+i),lM(t,e+i),cM(t,e)):(Fd(t+n,e+i),ex(t,e))},quadraticCurveTo(t,e,n,i){let a=c1(t,e),o=u1(t,e),s=c1(n,i),l=u1(n,i);une(Y8,a,s,lne),une(J8,o,l,cne),ex(s,l)},bezierCurveTo(t,e,n,i,a,o){let s=c1(t,e),l=u1(t,e),c=c1(n,i),u=u1(n,i),d=c1(a,o),f=u1(a,o);dne(Y8,s,c,d,lne),dne(J8,l,u,f,cne),ex(d,f)},arc(t,e,n,i,a,o){if(i+=d1,a+=d1,Y8=n*Math.cos(a)+t,J8=n*Math.sin(a)+e,Math.abs(a-i)>nIe)Fd(t-n,e-n),Fd(t+n,e+n);else{let s=u=>Fd(n*Math.cos(u)+t,n*Math.sin(u)+e),l,c;if(s(i),s(a),a!==i)if(i=i%Hl,i<0&&(i+=Hl),a=a%Hl,a<0&&(a+=Hl),a<i&&(o=!o,l=i,i=a,a=l),o)for(a-=Hl,l=i-i%l1,c=0;c<4&&l>a;++c,l-=l1)s(l);else for(l=i-i%l1+l1,c=0;c<4&&l<a;++c,l=l+l1)s(l)}}};function une(t,e,n,i){let a=(t-e)/(t+n-2*e);0<a&&a<1&&i(t+(e-t)*a)}function dne(t,e,n,i,a){let o=i-t+3*e-3*n,s=t+n-2*e,l=t-e,c=0,u=0,d;Math.abs(o)>pwe?(d=s*s+l*o,d>=0&&(d=Math.sqrt(d),c=(-s+d)/o,u=(-s-d)/o)):c=.5*l/s,0<c&&c<1&&a(fne(c,t,e,n,i)),0<u&&u<1&&a(fne(u,t,e,n,i))}function fne(t,e,n,i,a){let o=1-t,s=o*o,l=t*t;return s*o*e+3*s*t*n+3*o*l*i+l*t*a}var Gd=(Gd=is(1,1))?Gd.getContext("2d"):null,gM=new wn;function Mne(t){return function(e,n){if(!Gd)return!0;t(Gd,e),gM.clear().union(e.bounds).intersect(n).round();let{x1:i,y1:a,x2:o,y2:s}=gM;for(let l=a;l<=s;++l)for(let c=i;c<=o;++c)if(Gd.isPointInPath(c,l))return!0;return!1}}function Lne(t,e){return e.contains(t.x||0,t.y||0)}function One(t,e){let n=t.x||0,i=t.y||0,a=t.width||0,o=t.height||0;return e.intersects(gM.set(n,i,n+a,i+o))}function aIe(t,e){let n=t.x||0,i=t.y||0,a=t.x2!=null?t.x2:n,o=t.y2!=null?t.y2:i;return t6(e,n,i,a,o)}function t6(t,e,n,i,a){let{x1:o,y1:s,x2:l,y2:c}=t,u=i-e,d=a-n,f=0,p=1,h,m,_,E;for(E=0;E<4;++E){if(E===0&&(h=-u,m=-(o-e)),E===1&&(h=u,m=l-e),E===2&&(h=-d,m=-(s-n)),E===3&&(h=d,m=c-n),Math.abs(h)<1e-10&&m<0)return!1;if(_=m/h,h<0){if(_>p)return!1;_>f&&(f=_)}else if(h>0){if(_<f)return!1;_<p&&(p=_)}}return!0}function Cm(t,e){t.globalCompositeOperation=e.blend||"source-over"}function Gs(t,e){return t==null?e:t}function pne(t,e){let n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t}function oIe(t,e,n){let i=n.width(),a=n.height(),o;if(e.gradient==="radial")o=t.createRadialGradient(n.x1+Gs(e.x1,.5)*i,n.y1+Gs(e.y1,.5)*a,Math.max(i,a)*Gs(e.r1,0),n.x1+Gs(e.x2,.5)*i,n.y1+Gs(e.y2,.5)*a,Math.max(i,a)*Gs(e.r2,.5));else{let s=Gs(e.x1,0),l=Gs(e.y1,0),c=Gs(e.x2,1),u=Gs(e.y2,0);if(s===c||l===u||i===a)o=t.createLinearGradient(n.x1+s*i,n.y1+l*a,n.x1+c*i,n.y1+u*a);else{let d=is(Math.ceil(i),Math.ceil(a)),f=d.getContext("2d");return f.scale(i,a),f.fillStyle=pne(f.createLinearGradient(s,l,c,u),e.stops),f.fillRect(0,0,i,a),t.createPattern(d,"no-repeat")}}return pne(o,e.stops)}function Bne(t,e,n){return AM(n)?oIe(t,n,e.bounds):n}function ox(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=Bne(t,e,e.fill),!0):!1}var sIe=[];function wm(t,e,n){var i=(i=e.strokeWidth)!=null?i:1;return i<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=Bne(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||sIe),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function lIe(t,e){return t.zindex-e.zindex||t.index-e.index}function Dne(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],i,a,o;for(a=0,o=e.length;a<o;++a)i=e[a],i.index=a,i.zindex&&n.push(i);return t.zdirty=!1,t.zitems=n.sort(lIe)}function In(t,e){var n=t.items,i,a;if(!n||!n.length)return;let o=Dne(t);if(o&&o.length){for(i=0,a=n.length;i<a;++i)n[i].zindex||e(n[i]);n=o}for(i=0,a=n.length;i<a;++i)e(n[i])}function _M(t,e){var n=t.items,i,a;if(!n||!n.length)return null;let o=Dne(t);for(o&&o.length&&(n=o),a=n.length;--a>=0;)if(i=e(n[a]))return i;if(n===o){for(n=t.items,a=n.length;--a>=0;)if(!n[a].zindex&&(i=e(n[a])))return i}return null}function wM(t){return function(e,n,i){In(n,a=>{(!i||i.intersects(a.bounds))&&Fne(t,e,a,a)})}}function cIe(t){return function(e,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&Fne(t,e,n.items[0],n.items)}}function Fne(t,e,n,i){var a=n.opacity==null?1:n.opacity;a!==0&&(t(e,i)||(Cm(e,n),n.fill&&ox(e,n,a)&&e.fill(),n.stroke&&wm(e,n,a)&&e.stroke()))}function Tx(t){return t=t||pi,function(e,n,i,a,o,s){return i*=e.pixelRatio,a*=e.pixelRatio,_M(n,l=>{let c=l.bounds;if(!(c&&!c.contains(o,s)||!c)&&t(e,l,i,a,o,s))return l})}}function p6(t,e){return function(n,i,a,o){var s=Array.isArray(i)?i[0]:i,l=e==null?s.fill:e,c=s.stroke&&n.isPointInStroke,u,d;return c&&(u=s.strokeWidth,d=s.strokeCap,n.lineWidth=u!=null?u:1,n.lineCap=d!=null?d:"butt"),t(n,i)?!1:l&&n.isPointInPath(a,o)||c&&n.isPointInStroke(a,o)}}function IM(t){return Tx(p6(t))}function p1(t,e){return"translate("+t+","+e+")"}function RM(t){return"rotate("+t+")"}function uIe(t,e){return"scale("+t+","+e+")"}function kne(t){return p1(t.x||0,t.y||0)}function dIe(t){return p1(t.x||0,t.y||0)+(t.angle?" "+RM(t.angle):"")}function fIe(t){return p1(t.x||0,t.y||0)+(t.angle?" "+RM(t.angle):"")+(t.scaleX||t.scaleY?" "+uIe(t.scaleX||1,t.scaleY||1):"")}function PM(t,e,n){function i(s,l){s("transform",dIe(l)),s("d",e(null,l))}function a(s,l){return e(Ax(s,l.angle),l),Yc(s,l).translate(l.x||0,l.y||0)}function o(s,l){var c=l.x||0,u=l.y||0,d=l.angle||0;s.translate(c,u),d&&s.rotate(d*=Ud),s.beginPath(),e(s,l),d&&s.rotate(-d),s.translate(-c,-u)}return{type:t,tag:"path",nested:!1,attr:i,bound:a,draw:wM(o),pick:IM(o),isect:n||Mne(o)}}var pIe=PM("arc",qwe);function hIe(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],i=t[0].orient==="horizontal"?"y":"x",a=t.length,o=1/0,s,l;--a>=0;)t[a].defined!==!1&&(l=Math.abs(t[a][i]-n),l<o&&(o=l,s=t[a]));return s}function mIe(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),i=t.length,a,o,s;--i>=0;)if(t[i].defined!==!1&&(a=t[i].x-e[0],o=t[i].y-e[1],s=a*a+o*o,s<n))return t[i];return null}function gIe(t,e){for(var n=t.length,i,a,o;--n>=0;)if(t[n].defined!==!1&&(i=t[n].x-e[0],a=t[n].y-e[1],o=i*i+a*a,i=t[n].size||1,o<i*i))return t[n];return null}function MM(t,e,n){function i(c,u){var d=u.mark.items;d.length&&c("d",e(null,d))}function a(c,u){var d=u.items;return d.length===0?c:(e(Ax(c),d),Yc(c,d[0]))}function o(c,u){c.beginPath(),e(c,u)}let s=p6(o);function l(c,u,d,f,p,h){var m=u.items,_=u.bounds;return!m||!m.length||_&&!_.contains(p,h)?null:(d*=c.pixelRatio,f*=c.pixelRatio,s(c,m,d,f)?m[0]:null)}return{type:t,tag:"path",nested:!0,attr:i,bound:a,draw:cIe(o),pick:l,isect:Lne,tip:n}}var _Ie=MM("area",Kwe,hIe);function EIe(t,e){var n=e.clip;t.save(),wt(n)?(t.beginPath(),n(t),t.clip()):Gne(t,e.group)}function Gne(t,e){t.beginPath(),TM(e)?Rm(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function Une(t){let e=Gs(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function vIe(t,e){t("transform",kne(e))}function Vne(t,e){let n=Une(e);t("d",Rm(null,e,n,n))}function yIe(t,e){t("class","background"),t("aria-hidden",!0),Vne(t,e)}function xIe(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?Vne(t,e):t("d","")}function bIe(t,e,n){let i=e.clip?CM(n,e,e):null;t("clip-path",i)}function SIe(t,e){if(!e.clip&&e.items){let n=e.items,i=n.length;for(let a=0;a<i;++a)t.union(n[a].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),Yc(t,e),t.translate(e.x||0,e.y||0)}function s6(t,e,n,i){let a=Une(e);t.beginPath(),Rm(t,e,(n||0)+a,(i||0)+a)}var NIe=p6(s6),AIe=p6(s6,!1),TIe=p6(s6,!0);function CIe(t,e,n,i){In(e,a=>{let o=a.x||0,s=a.y||0,l=a.strokeForeground,c=a.opacity==null?1:a.opacity;(a.stroke||a.fill)&&c&&(s6(t,a,o,s),Cm(t,a),a.fill&&ox(t,a,c)&&t.fill(),a.stroke&&!l&&wm(t,a,c)&&t.stroke()),t.save(),t.translate(o,s),a.clip&&Gne(t,a),n&&n.translate(-o,-s),In(a,u=>{(u.marktype==="group"||i==null||i.includes(u.marktype))&&this.draw(t,u,n,i)}),n&&n.translate(o,s),t.restore(),l&&a.stroke&&c&&(s6(t,a,o,s),Cm(t,a),wm(t,a,c)&&t.stroke())})}function wIe(t,e,n,i,a,o){if(e.bounds&&!e.bounds.contains(a,o)||!e.items)return null;let s=n*t.pixelRatio,l=i*t.pixelRatio;return _M(e,c=>{let u,d,f,p=c.bounds;if(p&&!p.contains(a,o))return;d=c.x||0,f=c.y||0;let h=d+(c.width||0),m=f+(c.height||0),_=c.clip;if(_&&(a<d||a>h||o<f||o>m))return;if(t.save(),t.translate(d,f),d=a-d,f=o-f,_&&TM(c)&&!TIe(t,c,s,l))return t.restore(),null;let E=c.strokeForeground,v=e.interactive!==!1;return v&&E&&c.stroke&&AIe(t,c,s,l)?(t.restore(),c):(u=_M(c,y=>IIe(y,d,f)?this.pick(y,n,i,d,f):null),!u&&v&&(c.fill||!E&&c.stroke)&&NIe(t,c,s,l)&&(u=c),t.restore(),u||null)})}function IIe(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n)}var RIe={type:"group",tag:"g",nested:!1,attr:vIe,bound:SIe,draw:CIe,pick:wIe,isect:One,content:bIe,background:yIe,foreground:xIe},l6={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function LM(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(i=>{t.image=i,t.image.url=t.url})),n}function OM(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function BM(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function Cx(t,e){return t==="center"?e/2:t==="right"?e:0}function wx(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function PIe(t,e,n){let i=LM(e,n),a=OM(e,i),o=BM(e,i),s=(e.x||0)-Cx(e.align,a),l=(e.y||0)-wx(e.baseline,o),c=!i.src&&i.toDataURL?i.toDataURL():i.src||"";t("href",c,l6["xmlns:xlink"],"xlink:href"),t("transform",p1(s,l)),t("width",a),t("height",o),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function MIe(t,e){let n=e.image,i=OM(e,n),a=BM(e,n),o=(e.x||0)-Cx(e.align,i),s=(e.y||0)-wx(e.baseline,a);return t.set(o,s,o+i,s+a)}function LIe(t,e,n){In(e,i=>{if(n&&!n.intersects(i.bounds))return;let a=LM(i,this),o=OM(i,a),s=BM(i,a);if(o===0||s===0)return;let l=(i.x||0)-Cx(i.align,o),c=(i.y||0)-wx(i.baseline,s),u,d,f,p;i.aspect!==!1&&(d=a.width/a.height,f=i.width/i.height,d===d&&f===f&&d!==f&&(f<d?(p=o/d,c+=(s-p)/2,s=p):(p=s*d,l+=(o-p)/2,o=p))),(a.complete||a.toDataURL)&&(Cm(t,i),t.globalAlpha=(u=i.opacity)!=null?u:1,t.imageSmoothingEnabled=i.smooth!==!1,t.drawImage(a,l,c,o,s))})}var OIe={type:"image",tag:"image",nested:!1,attr:PIe,bound:MIe,draw:LIe,pick:Tx(),isect:pi,get:LM,xOffset:Cx,yOffset:wx},BIe=MM("line",Ywe,mIe);function DIe(t,e){var n=e.scaleX||1,i=e.scaleY||1;(n!==1||i!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",fIe(e)),t("d",e.path)}function tx(t,e){var n=e.path;if(n==null)return!0;var i=e.x||0,a=e.y||0,o=e.scaleX||1,s=e.scaleY||1,l=(e.angle||0)*Ud,c=e.pathCache;(!c||c.path!==n)&&((e.pathCache=c=yx(n)).path=n),l&&t.rotate&&t.translate?(t.translate(i,a),t.rotate(l),o6(t,c,0,0,o,s),t.rotate(-l),t.translate(-i,-a)):o6(t,c,i,a,o,s)}function FIe(t,e){return tx(Ax(t,e.angle),e)?t.set(0,0,0,0):Yc(t,e,!0)}var kIe={type:"path",tag:"path",nested:!1,attr:DIe,bound:FIe,draw:wM(tx),pick:IM(tx),isect:Mne(tx)};function GIe(t,e){t("d",Rm(null,e))}function UIe(t,e){var n,i;return Yc(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e)}function hne(t,e){t.beginPath(),Rm(t,e)}var VIe={type:"rect",tag:"path",nested:!1,attr:GIe,bound:UIe,draw:wM(hne),pick:IM(hne),isect:One};function $Ie(t,e){t("transform",kne(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function zIe(t,e){var n,i;return Yc(t.set(n=e.x||0,i=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:i),e)}function $ne(t,e,n){var i,a,o,s;return e.stroke&&wm(t,e,n)?(i=e.x||0,a=e.y||0,o=e.x2!=null?e.x2:i,s=e.y2!=null?e.y2:a,t.beginPath(),t.moveTo(i,a),t.lineTo(o,s),!0):!1}function jIe(t,e,n){In(e,i=>{if(!(n&&!n.intersects(i.bounds))){var a=i.opacity==null?1:i.opacity;a&&$ne(t,i,a)&&(Cm(t,i),t.stroke())}})}function HIe(t,e,n,i){return t.isPointInStroke?$ne(t,e,1)&&t.isPointInStroke(n,i):!1}var WIe={type:"rule",tag:"line",nested:!1,attr:$Ie,bound:zIe,draw:jIe,pick:Tx(HIe),isect:aIe},ZIe=PM("shape",Jwe),XIe=PM("symbol",Qwe,Lne),mne=bY(),xo={height:Jc,measureWidth:DM,estimateWidth:sx,width:sx,canvas:zne};zne(!0);function zne(t){xo.width=t&&Gd?DM:sx}function sx(t,e){return jne(Vd(t,e),Jc(t))}function jne(t,e){return~~(.8*t.length*e)}function DM(t,e){return Jc(t)<=0||!(e=Vd(t,e))?0:Hne(e,kM(t))}function Hne(t,e){let n=`(${e}) ${t}`,i=mne.get(n);return i===void 0&&(Gd.font=e,i=Gd.measureText(t).width,mne.set(n,i)),i}function Jc(t){return t.fontSize!=null?+t.fontSize||0:11}function h1(t){return t.lineHeight!=null?t.lineHeight:Jc(t)+2}function qIe(t){return ot(t)?t.length>1?t:t[0]:t}function h6(t){return qIe(t.lineBreak&&t.text&&!ot(t.text)?t.text.split(t.lineBreak):t.text)}function FM(t){let e=h6(t);return(ot(e)?e.length-1:0)*h1(t)}function Vd(t,e){let n=e==null?"":(e+"").trim();return t.limit>0&&n.length?YIe(t,n):n}function KIe(t){if(xo.width===DM){let e=kM(t);return n=>Hne(n,e)}else if(xo.width===sx){let e=Jc(t);return n=>jne(n,e)}else return e=>xo.width(t,e)}function YIe(t,e){var n=+t.limit,i=KIe(t);if(i(e)<n)return e;var a=t.ellipsis||"\u2026",o=t.dir==="rtl",s=0,l=e.length,c;if(n-=i(a),o){for(;s<l;)c=s+l>>>1,i(e.slice(c))>n?s=c+1:l=c;return a+e.slice(s)}else{for(;s<l;)c=1+(s+l>>>1),i(e.slice(0,c))<n?s=c:l=c-1;return e.slice(0,s)+a}}function Ix(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function kM(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Jc(t)+"px "+Ix(t,e)}function GM(t){var e=t.baseline,n=Jc(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:e==="line-top"?.29*n+.5*h1(t):e==="line-bottom"?.29*n-.5*h1(t):0)}var JIe={left:"start",center:"middle",right:"end"},n6=new wn;function Rx(t){var e=t.x||0,n=t.y||0,i=t.radius||0,a;return i&&(a=(t.theta||0)-l1,e+=i*Math.cos(a),n+=i*Math.sin(a)),n6.x1=e,n6.y1=n,n6}function QIe(t,e){var n=e.dx||0,i=(e.dy||0)+GM(e),a=Rx(e),o=a.x1,s=a.y1,l=e.angle||0,c;t("text-anchor",JIe[e.align]||"start"),l?(c=p1(o,s)+" "+RM(l),(n||i)&&(c+=" "+p1(n,i))):c=p1(o+n,s+i),t("transform",c)}function UM(t,e,n){var i=xo.height(e),a=e.align,o=Rx(e),s=o.x1,l=o.y1,c=e.dx||0,u=(e.dy||0)+GM(e)-Math.round(.8*i),d=h6(e),f;if(ot(d)?(i+=h1(e)*(d.length-1),f=d.reduce((p,h)=>Math.max(p,xo.width(e,h)),0)):f=xo.width(e,d),a==="center"?c-=f/2:a==="right"&&(c-=f),t.set(c+=s,u+=l,c+f,u+i),e.angle&&!n)t.rotate(e.angle*Ud,s,l);else if(n===2)return t.rotatedPoints(e.angle*Ud,s,l);return t}function eRe(t,e,n){In(e,i=>{var a=i.opacity==null?1:i.opacity,o,s,l,c,u,d,f;if(!(n&&!n.intersects(i.bounds)||a===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(t.font=kM(i),t.textAlign=i.align||"left",o=Rx(i),s=o.x1,l=o.y1,i.angle&&(t.save(),t.translate(s,l),t.rotate(i.angle*Ud),s=l=0),s+=i.dx||0,l+=(i.dy||0)+GM(i),d=h6(i),Cm(t,i),ot(d))for(u=h1(i),c=0;c<d.length;++c)f=Vd(i,d[c]),i.fill&&ox(t,i,a)&&t.fillText(f,s,l),i.stroke&&wm(t,i,a)&&t.strokeText(f,s,l),l+=u;else f=Vd(i,d),i.fill&&ox(t,i,a)&&t.fillText(f,s,l),i.stroke&&wm(t,i,a)&&t.strokeText(f,s,l);i.angle&&t.restore()}})}function tRe(t,e,n,i,a,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var s=Rx(e),l=s.x1,c=s.y1,u=UM(n6,e,1),d=-e.angle*Ud,f=Math.cos(d),p=Math.sin(d),h=f*a-p*o+(l-f*l+p*c),m=p*a+f*o+(c-p*l-f*c);return u.contains(h,m)}function rRe(t,e){let n=UM(n6,t,2);return t6(e,n[0],n[1],n[2],n[3])||t6(e,n[0],n[1],n[4],n[5])||t6(e,n[4],n[5],n[6],n[7])||t6(e,n[2],n[3],n[6],n[7])}var nRe={type:"text",tag:"text",nested:!1,attr:QIe,bound:UM,draw:eRe,pick:Tx(tRe),isect:rRe},iRe=MM("trail",eIe,gIe),Ha={arc:pIe,area:_Ie,group:RIe,image:OIe,line:BIe,path:kIe,rect:VIe,rule:WIe,shape:ZIe,symbol:XIe,text:nRe,trail:iRe};function gne(t,e,n){var i=Ha[t.mark.marktype],a=e||i.bound;return i.nested&&(t=t.mark),a(t.bounds||(t.bounds=new wn),t,n)}var _ne={mark:null};function aRe(t,e,n){var i=Ha[t.marktype],a=i.bound,o=t.items,s=o&&o.length,l,c,u,d;if(i.nested)return s?u=o[0]:(_ne.mark=t,u=_ne),d=gne(u,a,n),e=e&&e.union(d)||d,e;if(e=e||t.bounds&&t.bounds.clear()||new wn,s)for(l=0,c=o.length;l<c;++l)e.union(gne(o[l],a,n));return t.bounds=e}var oRe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function sRe(t,e){return JSON.stringify(t,oRe,e)}function lRe(t){let e=typeof t=="string"?JSON.parse(t):t;return Wne(e)}function Wne(t){var e=t.marktype,n=t.items,i,a,o;if(n)for(a=0,o=n.length;a<o;++a)i=e?"mark":"group",n[a][i]=t,n[a].zindex&&(n[a][i].zdirty=!0),(e||i)==="group"&&Wne(n[a]);return e&&aRe(t),t}var lx=class{constructor(e){arguments.length?this.root=lRe(e):(this.root=Ene({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Sx(this.root)])}toJSON(e){return sRe(this.root,e||0)}mark(e,n,i){n=n||this.root.items[0];let a=Ene(e,n);return n.items[i]=a,a.zindex&&(a.group.zdirty=!0),a}};function Ene(t,e){let n={bounds:new wn,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function f1(t,e,n){return!t&&typeof document!="undefined"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function Zne(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,a=n.length;i<a;++i)if(n[i].tagName.toLowerCase()===e)return n[i]}function yi(t,e,n,i){var a=t.childNodes[e],o;return(!a||a.tagName.toLowerCase()!==n.toLowerCase())&&(o=a||null,a=f1(t.ownerDocument,n,i),t.insertBefore(a,o)),a}function Us(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t}function Xne(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function Px(t,e){let n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function cRe(t,e,n,i){var a=t&&t.mark,o,s;if(a&&(o=Ha[a.marktype]).tip){for(s=Px(e,n),s[0]-=i[0],s[1]-=i[1];t=t.mark.group;)s[0]-=t.x||0,s[1]-=t.y||0;t=o.tip(a.items,s)}return t}var cx=class{constructor(e,n){this._active=null,this._handlers={},this._loader=e||JE(),this._tooltip=n||uRe}initialize(e,n,i){return this._el=e,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()}scene(e){return arguments.length?(this._scene=e,this):this._scene}on(){}off(){}_handlerIndex(e,n,i){for(let a=e?e.length:0;--a>=0;)if(e[a].type===n&&(!i||e[a].handler===i))return a;return-1}handlers(e){let n=this._handlers,i=[];if(e)i.push(...n[this.eventName(e)]);else for(let a in n)i.push(...n[a]);return i}eventName(e){let n=e.indexOf(".");return n<0?e:e.slice(0,n)}handleHref(e,n,i){this._loader.sanitize(i,{context:"href"}).then(a=>{let o=new MouseEvent(e.type,e),s=f1(null,"a");for(let l in a)s.setAttribute(l,a[l]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(e,n,i){if(n&&n.tooltip!=null){n=cRe(n,e,this.canvas(),this._origin);let a=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,e,n,a)}}getItemBoundingClientRect(e){let n=this.canvas();if(!n)return;let i=n.getBoundingClientRect(),a=this._origin,o=e.bounds,s=o.width(),l=o.height(),c=o.x1+a[0]+i.left,u=o.y1+a[1]+i.top;for(;e.mark&&(e=e.mark.group);)c+=e.x||0,u+=e.y||0;return{x:c,y:u,width:s,height:l,left:c,top:u,right:c+s,bottom:u+l}}};function uRe(t,e,n,i){t.element().setAttribute("title",i||"")}var Im=class{constructor(e){this._el=null,this._bgcolor=null,this._loader=new fM(e)}initialize(e,n,i,a,o){return this._el=e,this.resize(n,i,a,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)}resize(e,n,i,a){return this._width=e,this._height=n,this._origin=i||[0,0],this._scale=a||1,this}dirty(){}render(e,n){let i=this;return i._call=function(){i._render(e,n)},i._call(),i._call=null,i}_render(){}renderAsync(e,n){let i=this.render(e,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(e,n){var i=this,a=i._loader[e](n);if(!i._ready){let o=i._call;i._ready=i._loader.ready().then(s=>{s&&o(),i._ready=null})}return a}sanitizeURL(e){return this._load("sanitizeURL",e)}loadImage(e){return this._load("loadImage",e)}},dRe="keydown",fRe="keypress",pRe="keyup",qne="dragenter",rx="dragleave",Kne="dragover",EM="pointerdown",hRe="pointerup",ux="pointermove",nx="pointerout",Yne="pointerover",vM="mousedown",mRe="mouseup",Jne="mousemove",dx="mouseout",Qne="mouseover",fx="click",gRe="dblclick",_Re="wheel",eie="mousewheel",px="touchstart",hx="touchmove",mx="touchend",ERe=[dRe,fRe,pRe,qne,rx,Kne,EM,hRe,ux,nx,Yne,vM,mRe,Jne,dx,Qne,fx,gRe,_Re,eie,px,hx,mx],yM=ux,i6=dx,xM=fx,m1=class extends cx{constructor(e,n){super(e,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=ERe,this.pointermove=yne([ux,Jne],[Yne,Qne],[nx,dx]),this.dragover=yne([Kne],[qne],[rx]),this.pointerout=xne([nx,dx]),this.dragleave=xne([rx])}initialize(e,n,i){return this._canvas=e&&Zne(e,"canvas"),[fx,vM,EM,ux,nx,rx].forEach(a=>vne(this,a)),super.initialize(e,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(e){this.fire(eie,e)}pointerdown(e){this._down=this._active,this.fire(EM,e)}mousedown(e){this._down=this._active,this.fire(vM,e)}click(e){this._down===this._active&&(this.fire(fx,e),this._down=null)}touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(px,e,!0)}touchmove(e){this.fire(hx,e,!0)}touchend(e){this.fire(mx,e,!0),this._touch=null}fire(e,n,i){let a=i?this._touch:this._active,o=this._handlers[e];if(n.vegaType=e,e===xM&&a&&a.href?this.handleHref(n,a,a.href):(e===yM||e===i6)&&this.handleTooltip(n,a,e!==i6),o)for(let s=0,l=o.length;s<l;++s)o[s].handler.call(this._obj,n,a)}on(e,n){let i=this.eventName(e),a=this._handlers;return this._handlerIndex(a[i],e,n)<0&&(vne(this,e),(a[i]||(a[i]=[])).push({type:e,handler:n})),this}off(e,n){let i=this.eventName(e),a=this._handlers[i],o=this._handlerIndex(a,e,n);return o>=0&&a.splice(o,1),this}pickEvent(e){let n=Px(e,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(e,n,i,a,o){let s=this.context();return Ha[e.marktype].pick.call(this,s,e,n,i,a,o)}},vRe=t=>t===px||t===hx||t===mx?[px,hx,mx]:[t];function vne(t,e){vRe(e).forEach(n=>yRe(t,n))}function yRe(t,e){let n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?i=>t[e](i):i=>t.fire(e,i)))}function r6(t,e,n){e.forEach(i=>t.fire(i,n))}function yne(t,e,n){return function(i){let a=this._active,o=this.pickEvent(i);o===a?r6(this,t,i):((!a||!a.exit)&&r6(this,n,i),this._active=o,r6(this,e,i),r6(this,t,i))}}function xne(t){return function(e){r6(this,t,e),this._active=null}}function xRe(){return typeof window!="undefined"&&window.devicePixelRatio||1}function bRe(t,e,n,i,a,o){let s=typeof HTMLElement!="undefined"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),c=s?xRe():a;t.width=e*c,t.height=n*c;for(let u in o)l[u]=o[u];return s&&c!==1&&(t.style.width=e+"px",t.style.height=n+"px"),l.pixelRatio=c,l.setTransform(c,0,0,c,c*i[0],c*i[1]),t}var c6=class extends Im{constructor(e){super(e),this._options={},this._redraw=!1,this._dirty=new wn,this._tempb=new wn}initialize(e,n,i,a,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:is(1,1,this._options.type),e&&this._canvas&&(Us(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(e,n,i,a,o)}resize(e,n,i,a){if(super.resize(e,n,i,a),this._canvas)bRe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{let o=this._options.externalContext;o||he("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(e){let n=this._tempb.clear().union(e.bounds),i=e.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(e,n){let i=this.context(),a=this._origin,o=this._width,s=this._height,l=this._dirty,c=SRe(a,o,s);i.save();let u=this._redraw||l.empty()?(this._redraw=!1,c.expand(1)):NRe(i,c.intersect(l),a);return this.clear(-a[0],-a[1],o,s),this.draw(i,e,u,n),i.restore(),l.clear(),this}draw(e,n,i,a){if(n.marktype!=="group"&&a!=null&&!a.includes(n.marktype))return;let o=Ha[n.marktype];n.clip&&EIe(e,n),o.draw.call(this,e,n,i,a),n.clip&&e.restore()}clear(e,n,i,a){let o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(e,n,i,a),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,n,i,a))}},SRe=(t,e,n)=>new wn().set(0,0,e,n).translate(-t[0],-t[1]);function NRe(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}var bM=class extends cx{constructor(e,n){super(e,n);let i=this;i._hrefHandler=uM(i,(a,o)=>{o&&o.href&&i.handleHref(a,o,o.href)}),i._tooltipHandler=uM(i,(a,o)=>{i.handleTooltip(a,o,a.type!==i6)})}initialize(e,n,i){let a=this._svg;return a&&(a.removeEventListener(xM,this._hrefHandler),a.removeEventListener(yM,this._tooltipHandler),a.removeEventListener(i6,this._tooltipHandler)),this._svg=a=e&&Zne(e,"svg"),a&&(a.addEventListener(xM,this._hrefHandler),a.addEventListener(yM,this._tooltipHandler),a.addEventListener(i6,this._tooltipHandler)),super.initialize(e,n,i)}canvas(){return this._svg}on(e,n){let i=this.eventName(e),a=this._handlers;if(this._handlerIndex(a[i],e,n)<0){let s={type:e,handler:n,listener:uM(this,n)};(a[i]||(a[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(e,n){let i=this.eventName(e),a=this._handlers[i],o=this._handlerIndex(a,e,n);return o>=0&&(this._svg&&this._svg.removeEventListener(i,a[o].listener),a.splice(o,1)),this}},uM=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i)},tie="aria-hidden",VM="aria-label",$M="role",zM="aria-roledescription",rie="graphics-object",jM="graphics-symbol",nie=(t,e,n)=>({[$M]:t,[zM]:e,[VM]:n||void 0}),ARe=hi(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),bne={axis:{desc:"axis",caption:wRe},legend:{desc:"legend",caption:IRe},"title-text":{desc:"title",caption:t=>`Title text '${Nne(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${Nne(t)}'`}},Sne={ariaRole:$M,ariaRoleDescription:zM,description:VM};function iie(t,e){let n=e.aria===!1;if(t(tie,n||void 0),n||e.description==null)for(let i in Sne)t(Sne[i],void 0);else{let i=e.mark.marktype;t(VM,e.description),t($M,e.ariaRole||(i==="group"?rie:jM)),t(zM,e.ariaRoleDescription||`${i} mark`)}}function aie(t){return t.aria===!1?{[tie]:!0}:ARe[t.role]?null:bne[t.role]?CRe(t,bne[t.role]):TRe(t)}function TRe(t){let e=t.marktype,n=e==="group"||e==="text"||t.items.some(i=>i.description!=null&&i.aria!==!1);return nie(n?rie:jM,`${e} mark container`,t.description)}function CRe(t,e){try{let n=t.items[0],i=e.caption||(()=>"");return nie(e.role||jM,e.desc,n.description||i(n))}catch(n){return null}}function Nne(t){return st(t.text).join(" ")}function wRe(t){let e=t.datum,n=t.orient,i=e.title?oie(t):null,a=t.context,o=a.scales[e.scale].value,s=a.dataflow.locale(),l=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Od(l)?"discrete":l} scale with ${iM(s,o,t)}`}function IRe(t){let e=t.datum,n=e.title?oie(t):null,i=`${e.type||""} legend`.trim(),a=e.scales,o=Object.keys(a),s=t.context,l=s.scales[a[o[0]]].value,c=s.dataflow.locale();return PRe(i)+(n?` titled '${n}'`:"")+` for ${RRe(o)} with ${iM(c,l,t)}`}function oie(t){try{return st(Vt(t.items).items[0].text).join(" ")}catch(e){return null}}function RRe(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Vt(t)}function PRe(t){return t.length?t[0].toUpperCase()+t.slice(1):t}var sie=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),MRe=t=>sie(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function lie(){let t="",e="",n="",i=[],a=()=>e=n="",o=c=>{e&&(t+=`${e}>${n}`,a()),i.push(c)},s=(c,u)=>(u!=null&&(e+=` ${c}="${MRe(u)}"`),l),l={open(c){o(c),e="<"+c;for(var u=arguments.length,d=new Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];for(let p of d)for(let h in p)s(h,p[h]);return l},close(){let c=i.pop();return e?t+=e+(n?`>${n}</${c}>`:"/>"):t+=`</${c}>`,a(),l},attr:s,text:c=>(n+=sie(c),l),toString:()=>t};return l}var LRe=t=>cie(lie(),t)+"";function cie(t,e){if(t.open(e.tagName),e.hasAttributes()){let n=e.attributes,i=n.length;for(let a=0;a<i;++a)t.attr(n[a].name,n[a].value)}if(e.hasChildNodes()){let n=e.childNodes;for(let i of n)i.nodeType===3?t.text(i.nodeValue):cie(t,i)}return t.close()}var gx={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},_x={blend:"mix-blend-mode"},uie={fill:"none","stroke-miterlimit":10},e6=0,Ane="http://www.w3.org/2000/xmlns/",ri=l6.xmlns,Ex=class extends Im{constructor(e){super(e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(e,n,i,a,o){return this._defs={},this._clearDefs(),e&&(this._svg=yi(e,0,"svg",ri),this._svg.setAttributeNS(Ane,"xmlns",ri),this._svg.setAttributeNS(Ane,"xmlns:xlink",l6["xmlns:xlink"]),this._svg.setAttribute("version",l6.version),this._svg.setAttribute("class","marks"),Us(e,1),this._root=yi(this._svg,e6,"g",ri),kd(this._root,uie),Us(this._svg,e6+1)),this.background(this._bgcolor),super.initialize(e,n,i,a,o)}background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),super.background(...arguments)}resize(e,n,i,a){return super.resize(e,n,i,a),this._svg&&(kd(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){let e=this._svg,n=this._bgcolor;if(!e)return null;let i;n&&(e.removeAttribute("style"),i=yi(e,e6,"rect",ri),kd(i,{width:this._width,height:this._height,fill:n}));let a=LRe(e);return n&&(e.removeChild(i),this._svg.style.setProperty("background-color",n)),a}_render(e,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,n),Us(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))}isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;let e=this._dirty;if(!e.length||!this._dirtyID)return!0;let n=++this._dirtyID,i,a,o,s,l,c,u;for(l=0,c=e.length;l<c;++l)if(i=e[l],a=i.mark,a.marktype!==o&&(o=a.marktype,s=Ha[o]),a.zdirty&&a.dirty!==n&&(this._dirtyAll=!1,Tne(i,n),a.items.forEach(d=>{d.dirty=n})),!a.zdirty){if(i.exit){s.nested&&a.items.length?(u=a.items[0],u._svg&&this._update(s,u._svg,u)):i._svg&&(u=i._svg.parentNode,u&&u.removeChild(i._svg)),i._svg=null;continue}i=s.nested?a.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,Tne(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(e,n,i,a){if(!this.isDirty(n))return n._svg;let o=this._svg,s=n.marktype,l=Ha[s],c=n.interactive===!1?"none":null,u=l.tag==="g",d=Cne(n,e,i,"g",o);if(s!=="group"&&a!=null&&!a.includes(s))return Us(d,0),n._svg;d.setAttribute("class",Xne(n));let f=aie(n);for(let _ in f)Ea(d,_,f[_]);u||Ea(d,"pointer-events",c),Ea(d,"clip-path",n.clip?CM(this,n,n.group):null);let p=null,h=0,m=_=>{let E=this.isDirty(_),v=Cne(_,d,p,l.tag,o);E&&(this._update(l,v,_),u&&DRe(this,v,_,a)),p=v,++h};return l.nested?n.items.length&&m(n.items[0]):In(n,m),Us(d,h),d}_update(e,n,i){Kc=n,Qi=n.__values__,iie(a6,i),e.attr(a6,i,this);let a=kRe[e.type];a&&a.call(this,e,n,i),Kc&&this.style(Kc,i)}style(e,n){if(n!=null){for(let i in gx){let a=i==="font"?Ix(n):n[i];if(a===Qi[i])continue;let o=gx[i];a==null?e.removeAttribute(o):(AM(a)&&(a=wne(a,this._defs.gradient,die())),e.setAttribute(o,a+"")),Qi[i]=a}for(let i in _x)ix(e,_x[i],n[i])}}defs(){let e=this._svg,n=this._defs,i=n.el,a=0;for(let o in n.gradient)i||(n.el=i=yi(e,e6+1,"defs",ri)),a=ORe(i,n.gradient[o],a);for(let o in n.clipping)i||(n.el=i=yi(e,e6+1,"defs",ri)),a=BRe(i,n.clipping[o],a);i&&(a===0?(e.removeChild(i),n.el=null):Us(i,a))}_clearDefs(){let e=this._defs;e.gradient={},e.clipping={}}};function Tne(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function ORe(t,e,n){let i,a,o;if(e.gradient==="radial"){let s=yi(t,n++,"pattern",ri);kd(s,{id:ax+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=yi(s,0,"rect",ri),kd(s,{width:1,height:1,fill:`url(${die()}#${e.id})`}),t=yi(t,n++,"radialGradient",ri),kd(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=yi(t,n++,"linearGradient",ri),kd(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,a=e.stops.length;i<a;++i)o=yi(t,i,"stop",ri),o.setAttribute("offset",e.stops[i].offset),o.setAttribute("stop-color",e.stops[i].color);return Us(t,i),n}function BRe(t,e,n){let i;return t=yi(t,n,"clipPath",ri),t.setAttribute("id",e.id),e.path?(i=yi(t,0,"path",ri),i.setAttribute("d",e.path)):(i=yi(t,0,"rect",ri),kd(i,{x:0,y:0,width:e.width,height:e.height})),Us(t,1),n+1}function DRe(t,e,n,i){e=e.lastChild.previousSibling;let a,o=0;In(n,s=>{a=t.mark(e,s,a,i),++o}),Us(e,1+o)}function Cne(t,e,n,i,a){let o=t._svg,s;if(!o&&(s=e.ownerDocument,o=f1(s,i,ri),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},i==="g"))){let l=f1(s,"path",ri);o.appendChild(l),l.__data__=t;let c=f1(s,"g",ri);o.appendChild(c),c.__data__=t;let u=f1(s,"path",ri);o.appendChild(u),u.__data__=t,u.__values__={fill:"default"}}return(o.ownerSVGElement!==a||FRe(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}function FRe(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}var Kc=null,Qi=null,kRe={group(t,e,n){let i=Kc=e.childNodes[2];Qi=i.__values__,t.foreground(a6,n,this),Qi=e.__values__,Kc=e.childNodes[1],t.content(a6,n,this);let a=Kc=e.childNodes[0];t.background(a6,n,this);let o=n.mark.interactive===!1?"none":null;if(o!==Qi.events&&(Ea(i,"pointer-events",o),Ea(a,"pointer-events",o),Qi.events=o),n.strokeForeground&&n.stroke){let s=n.fill;Ea(i,"display",null),this.style(a,n),Ea(a,"stroke",null),s&&(n.fill=null),Qi=i.__values__,this.style(i,n),s&&(n.fill=s),Kc=null}else Ea(i,"display","none")},image(t,e,n){n.smooth===!1?(ix(e,"image-rendering","optimizeSpeed"),ix(e,"image-rendering","pixelated")):ix(e,"image-rendering",null)},text(t,e,n){let i=h6(n),a,o,s,l;ot(i)?(o=i.map(c=>Vd(n,c)),a=o.join(`
`),a!==Qi.text&&(Us(e,0),s=e.ownerDocument,l=h1(n),o.forEach((c,u)=>{let d=f1(s,"tspan",ri);d.__data__=n,d.textContent=c,u&&(d.setAttribute("x",0),d.setAttribute("dy",l)),e.appendChild(d)}),Qi.text=a)):(o=Vd(n,i),o!==Qi.text&&(e.textContent=o,Qi.text=o)),Ea(e,"font-family",Ix(n)),Ea(e,"font-size",Jc(n)+"px"),Ea(e,"font-style",n.fontStyle),Ea(e,"font-variant",n.fontVariant),Ea(e,"font-weight",n.fontWeight)}};function a6(t,e,n){e!==Qi[t]&&(n?GRe(Kc,t,e,n):Ea(Kc,t,e),Qi[t]=e)}function ix(t,e,n){n!==Qi[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),Qi[e]=n)}function kd(t,e){for(let n in e)Ea(t,n,e[n])}function Ea(t,e,n){n!=null?t.setAttribute(e,n):t.removeAttribute(e)}function GRe(t,e,n,i){n!=null?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e)}function die(){let t;return typeof window=="undefined"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}var SM=class extends Im{constructor(e){super(e),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(e){let n=lie();n.open("svg",St({},l6,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));let i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",uie,{transform:"translate("+this._origin+")"}),this.mark(n,e),n.close(),this.defs(n),this._text=n.close()+"",this}mark(e,n){let i=Ha[n.marktype],a=i.tag,o=[iie,i.attr];e.open("g",{class:Xne(n),"clip-path":n.clip?CM(this,n,n.group):null},aie(n),{"pointer-events":a!=="g"&&n.interactive===!1?"none":null});let s=l=>{let c=this.href(l);if(c&&e.open("a",c),e.open(a,this.attr(n,l,o,a!=="g"?a:null)),a==="text"){let u=h6(l);if(ot(u)){let d={x:0,dy:h1(l)};for(let f=0;f<u.length;++f)e.open("tspan",f?d:null).text(Vd(l,u[f])).close()}else e.text(Vd(l,u))}else if(a==="g"){let u=l.strokeForeground,d=l.fill,f=l.stroke;u&&f&&(l.stroke=null),e.open("path",this.attr(n,l,i.background,"bgrect")).close(),e.open("g",this.attr(n,l,i.content)),In(l,p=>this.mark(e,p)),e.close(),u&&f?(d&&(l.fill=null),l.stroke=f,e.open("path",this.attr(n,l,i.foreground,"bgrect")).close(),d&&(l.fill=d)):e.open("path",this.attr(n,l,i.foreground,"bgfore")).close()}e.close(),c&&e.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):In(n,s),e.close()}href(e){let n=e.href,i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(a=>{a["xlink:href"]=a.href,a.href=null,(this._hrefs||(this._hrefs={}))[n]=a})}return null}attr(e,n,i,a){let o={},s=(l,c,u,d)=>{o[d||l]=c};return Array.isArray(i)?i.forEach(l=>l(s,n,this)):i(s,n,this),a&&URe(o,n,e,a,this._defs),o}defs(e){let n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){e.open("defs");for(let o in n){let s=n[o],l=s.stops;s.gradient==="radial"?(e.open("pattern",{id:ax+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),e.close(),e.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let c=0;c<l.length;++c)e.open("stop",{offset:l[c].offset,"stop-color":l[c].color}).close();e.close()}for(let o in i){let s=i[o];e.open("clipPath",{id:o}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}};function URe(t,e,n,i,a){let o;if(e==null||(i==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;i==="image"&&e.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(t["font-family"]=Ix(e),t["font-size"]=Jc(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(let s in gx){let l=e[s],c=gx[s];l==="transparent"&&(c==="fill"||c==="stroke")||l!=null&&(AM(l)&&(l=wne(l,a.gradient,"")),t[c]=l)}for(let s in _x){let l=e[s];l!=null&&(o=o||[],o.push(`${_x[s]}: ${l};`))}return o&&(t.style=o.join(" ")),t}var Dd={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};var vx=class extends Im{constructor(e){super(e),this._svgRenderer=new Ex(e),this._canvasRenderer=new c6(e)}initialize(e,n,i,a,o){this._root_el=yi(e,0,"div");let s=yi(this._root_el,0,"div"),l=yi(this._root_el,1,"div");return this._root_el.style.position="relative",Dd.debug||(s.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=Dd.svgOnTop?l:s,this._canvasEl=Dd.svgOnTop?s:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,a,o),this._svgRenderer.initialize(this._svgEl,n,i,a,o),super.initialize(e,n,i,a,o)}dirty(e){return Dd.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this}_render(e,n){let a=(n!=null?n:["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!Dd.svgMarkTypes.includes(o));this._svgRenderer.render(e,Dd.svgMarkTypes),this._canvasRenderer.render(e,a)}resize(e,n,i,a){return super.resize(e,n,i,a),this._svgRenderer.resize(e,n,i,a),this._canvasRenderer.resize(e,n,i,a),this}background(e){return Dd.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}},NM=class extends m1{constructor(e,n){super(e,n)}initialize(e,n,i){let a=yi(yi(e,0,"div"),Dd.svgOnTop?0:1,"div");return super.initialize(a,n,i)}},fie="canvas",pie="hybrid",hie="png",mie="svg",gie="none",$d={Canvas:fie,PNG:hie,SVG:mie,Hybrid:pie,None:gie},g1={};g1[fie]=g1[hie]={renderer:c6,headless:c6,handler:m1};g1[mie]={renderer:Ex,headless:SM,handler:bM};g1[pie]={renderer:vx,headless:vx,handler:NM};g1[gie]={};function Mx(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(g1[t]=e,this):g1[t]}function _ie(t,e,n){let i=[],a=new wn().union(e),o=t.marktype;return o?Eie(t,a,n,i):o==="group"?vie(t,a,n,i):he("Intersect scene must be mark node or group item.")}function Eie(t,e,n,i){if(VRe(t,e,n)){let a=t.items,o=t.marktype,s=a.length,l=0;if(o==="group")for(;l<s;++l)vie(a[l],e,n,i);else for(let c=Ha[o].isect;l<s;++l){let u=a[l];yie(u,e,c)&&i.push(u)}}return i}function VRe(t,e,n){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function vie(t,e,n,i){n&&n(t.mark)&&yie(t,e,Ha.group.isect)&&i.push(t);let a=t.items,o=a&&a.length;if(o){let s=t.x||0,l=t.y||0;e.translate(-s,-l);for(let c=0;c<o;++c)Eie(a[c],e,n,i);e.translate(s,l)}return i}function yie(t,e,n){let i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e)}var dM=new wn;function xie(t){let e=t.clip;if(wt(e))e(Ax(dM.clear()));else if(e)dM.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(dM)}var Lm="top",Vs="left",$s="right",Hd="bottom",$Re="top-left",zRe="top-right",jRe="bottom-left",HRe="bottom-right",ZM="start",HM="middle",va="end",WRe="x",ZRe="y",Fx="group",XM="axis",qM="title",XRe="frame",qRe="scope",KM="legend",Pie="row-header",Mie="row-footer",Lie="row-title",Oie="column-header",Bie="column-footer",Die="column-title",KRe="padding",YRe="symbol",Fie="fit",kie="fit-x",Gie="fit-y",JRe="pad",YM="none",Lx="all",WM="each",JM="flush",zd="column",jd="row";function Uie(t){pe.call(this,null,t)}ze(Uie,pe,{transform(t,e){let n=e.dataflow,i=t.mark,a=i.marktype,o=Ha[a],s=o.bound,l=i.bounds,c;if(o.nested)i.items.length&&n.dirty(i.items[0]),l=Ox(i,s),i.items.forEach(u=>{u.bounds.clear().union(l)});else if(a===Fx||t.modified())switch(e.visit(e.MOD,u=>n.dirty(u)),l.clear(),i.items.forEach(u=>l.union(Ox(u,s))),i.role){case XM:case KM:case qM:e.reflow()}else c=e.changed(e.REM),e.visit(e.ADD,u=>{l.union(Ox(u,s))}),e.visit(e.MOD,u=>{c=c||l.alignsWith(u.bounds),n.dirty(u),l.union(Ox(u,s))}),c&&(l.clear(),i.items.forEach(u=>l.union(u.bounds)));return xie(i),e.modifies("bounds")}});function Ox(t,e,n){return e(t.bounds.clear(),t,n)}var bie=":vega_identifier:";function QM(t){pe.call(this,0,t)}QM.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ze(QM,pe,{transform(t,e){let n=QRe(e.dataflow),i=t.as,a=n.value;return e.visit(e.ADD,o=>o[i]=o[i]||++a),n.set(this.value=a),e}});function QRe(t){return t._signals[bie]||(t._signals[bie]=t.add(0))}function Vie(t){pe.call(this,null,t)}ze(Vie,pe,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,ePe(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);let i=n.marktype===Fx?Sx:bx;return e.visit(e.ADD,a=>i.call(a,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});function ePe(t){let e=t.groups,n=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function $ie(t){pe.call(this,null,t)}var Sie={parity:t=>t.filter((e,n)=>n%2?e.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((i,a)=>!a||!zie(n.bounds,i.bounds,e)?(n=i,1):i.opacity=0)}},zie=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),Nie=(t,e)=>{for(var n=1,i=t.length,a=t[0].bounds,o;n<i;a=o,++n)if(zie(a,o=t[n].bounds,e))return!0},tPe=t=>{let e=t.bounds;return e.width()>1&&e.height()>1},rPe=(t,e,n)=>{var i=t.range(),a=new wn;return e===Lm||e===Hd?a.set(i[0],-1/0,i[1],1/0):a.set(-1/0,i[0],1/0,i[1]),a.expand(n||1),o=>a.encloses(o.bounds)},Aie=t=>(t.forEach(e=>e.opacity=1),t),Tie=(t,e)=>t.reflow(e.modified()).modifies("opacity");ze($ie,pe,{transform(t,e){let n=Sie[t.method]||Sie.parity,i=t.separation||0,a=e.materialize(e.SOURCE).source,o,s;if(!a||!a.length)return;if(!t.method)return t.modified("method")&&(Aie(a),e=Tie(e,t)),e;if(a=a.filter(tPe),!a.length)return;if(t.sort&&(a=a.slice().sort(t.sort)),o=Aie(a),e=Tie(e,t),o.length>=3&&Nie(o,i)){do o=n(o,i);while(o.length>=3&&Nie(o,i));o.length<3&&!Vt(a).opacity&&(o.length>1&&(Vt(o).opacity=0),Vt(a).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(s=rPe(t.boundScale,t.boundOrient,+t.boundTolerance),a.forEach(c=>{s(c)||(c.opacity=0)}));let l=o[0].mark.bounds.clear();return a.forEach(c=>{c.opacity&&l.union(c.bounds)}),e}});function jie(t){pe.call(this,null,t)}ze(jie,pe,{transform(t,e){let n=e.dataflow;if(e.visit(e.ALL,i=>n.dirty(i)),e.fields&&e.fields.zindex){let i=e.source&&e.source[0];i&&(i.mark.zdirty=!0)}}});var ea=new wn;function Mm(t,e,n){return t[e]===n?0:(t[e]=n,1)}function nPe(t){var e=t.items[0].orient;return e===Vs||e===$s}function iPe(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function aPe(t,e,n,i){var a=e.items[0],o=a.datum,s=a.translate!=null?a.translate:.5,l=a.orient,c=iPe(o),u=a.range,d=a.offset,f=a.position,p=a.minExtent,h=a.maxExtent,m=o.title&&a.items[c[2]].items[0],_=a.titlePadding,E=a.bounds,v=m&&FM(m),y=0,x=0,S,N;switch(ea.clear().union(E),E.clear(),(S=c[0])>-1&&E.union(a.items[S].bounds),(S=c[1])>-1&&E.union(a.items[S].bounds),l){case Lm:y=f||0,x=-d,N=Math.max(p,Math.min(h,-E.y1)),E.add(0,-N).add(u,0),m&&Bx(t,m,N,_,v,0,-1,E);break;case Vs:y=-d,x=f||0,N=Math.max(p,Math.min(h,-E.x1)),E.add(-N,0).add(0,u),m&&Bx(t,m,N,_,v,1,-1,E);break;case $s:y=n+d,x=f||0,N=Math.max(p,Math.min(h,E.x2)),E.add(0,0).add(N,u),m&&Bx(t,m,N,_,v,1,1,E);break;case Hd:y=f||0,x=i+d,N=Math.max(p,Math.min(h,E.y2)),E.add(0,0).add(u,N),m&&Bx(t,m,N,_,0,0,1,E);break;default:y=a.x,x=a.y}return Yc(E.translate(y,x),a),Mm(a,"x",y+s)|Mm(a,"y",x+s)&&(a.bounds=ea,t.dirty(a),a.bounds=E,t.dirty(a)),a.mark.bounds.clear().union(E)}function Bx(t,e,n,i,a,o,s,l){let c=e.bounds;if(e.auto){let u=s*(n+a+i),d=0,f=0;t.dirty(e),o?d=(e.x||0)-(e.x=u):f=(e.y||0)-(e.y=u),e.mark.bounds.clear().union(c.translate(-d,-f)),t.dirty(e)}l.union(c)}var Cie=(t,e)=>Math.floor(Math.min(t,e)),wie=(t,e)=>Math.ceil(Math.max(t,e));function oPe(t){var e=t.items,n=e.length,i=0,a,o;let s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(a=e[i],o=a.items,a.marktype===Fx)switch(a.role){case XM:case KM:case qM:break;case Pie:s.rowheaders.push(...o);break;case Mie:s.rowfooters.push(...o);break;case Oie:s.colheaders.push(...o);break;case Bie:s.colfooters.push(...o);break;case Lie:s.rowtitle=o[0];break;case Die:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function sPe(t){return new wn().set(0,0,t.width||0,t.height||0)}function lPe(t){let e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function Xr(t,e,n){let i=Lt(t)?t[e]:t;return i!=null?i:n!==void 0?n:0}function Iie(t){return t<0?Math.ceil(-t):0}function Hie(t,e,n){var i=!n.nodirty,a=n.bounds===JM?sPe:lPe,o=ea.set(0,0,0,0),s=Xr(n.align,zd),l=Xr(n.align,jd),c=Xr(n.padding,zd),u=Xr(n.padding,jd),d=n.columns||e.length,f=d<=0?1:Math.ceil(e.length/d),p=e.length,h=Array(p),m=Array(d),_=0,E=Array(p),v=Array(f),y=0,x=Array(p),S=Array(p),N=Array(p),w,T,I,R,L,O,H,U,X,W,ne;for(T=0;T<d;++T)m[T]=0;for(T=0;T<f;++T)v[T]=0;for(T=0;T<p;++T)O=e[T],L=N[T]=a(O),O.x=O.x||0,x[T]=0,O.y=O.y||0,S[T]=0,I=T%d,R=~~(T/d),_=Math.max(_,H=Math.ceil(L.x2)),y=Math.max(y,U=Math.ceil(L.y2)),m[I]=Math.max(m[I],H),v[R]=Math.max(v[R],U),h[T]=c+Iie(L.x1),E[T]=u+Iie(L.y1),i&&t.dirty(e[T]);for(T=0;T<p;++T)T%d===0&&(h[T]=0),T<d&&(E[T]=0);if(s===WM)for(I=1;I<d;++I){for(ne=0,T=I;T<p;T+=d)ne<h[T]&&(ne=h[T]);for(T=I;T<p;T+=d)h[T]=ne+m[I-1]}else if(s===Lx){for(ne=0,T=0;T<p;++T)T%d&&ne<h[T]&&(ne=h[T]);for(T=0;T<p;++T)T%d&&(h[T]=ne+_)}else for(s=!1,I=1;I<d;++I)for(T=I;T<p;T+=d)h[T]+=m[I-1];if(l===WM)for(R=1;R<f;++R){for(ne=0,T=R*d,w=T+d;T<w;++T)ne<E[T]&&(ne=E[T]);for(T=R*d;T<w;++T)E[T]=ne+v[R-1]}else if(l===Lx){for(ne=0,T=d;T<p;++T)ne<E[T]&&(ne=E[T]);for(T=d;T<p;++T)E[T]=ne+y}else for(l=!1,R=1;R<f;++R)for(T=R*d,w=T+d;T<w;++T)E[T]+=v[R-1];for(X=0,T=0;T<p;++T)X=h[T]+(T%d?X:0),x[T]+=X-e[T].x;for(I=0;I<d;++I)for(W=0,T=I;T<p;T+=d)W+=E[T],S[T]+=W-e[T].y;if(s&&Xr(n.center,zd)&&f>1)for(T=0;T<p;++T)L=s===Lx?_:m[T%d],X=L-N[T].x2-e[T].x-x[T],X>0&&(x[T]+=X/2);if(l&&Xr(n.center,jd)&&d!==1)for(T=0;T<p;++T)L=l===Lx?y:v[~~(T/d)],W=L-N[T].y2-e[T].y-S[T],W>0&&(S[T]+=W/2);for(T=0;T<p;++T)o.union(N[T].translate(x[T],S[T]));switch(X=Xr(n.anchor,WRe),W=Xr(n.anchor,ZRe),Xr(n.anchor,zd)){case va:X-=o.width();break;case HM:X-=o.width()/2}switch(Xr(n.anchor,jd)){case va:W-=o.height();break;case HM:W-=o.height()/2}for(X=Math.round(X),W=Math.round(W),o.clear(),T=0;T<p;++T)e[T].mark.bounds.clear();for(T=0;T<p;++T)O=e[T],O.x+=x[T]+=X,O.y+=S[T]+=W,o.union(O.mark.bounds.union(O.bounds.translate(x[T],S[T]))),i&&t.dirty(O);return o}function cPe(t,e,n){var i=oPe(e),a=i.marks,o=n.bounds===JM?uPe:dPe,s=n.offset,l=n.columns||a.length,c=l<=0?1:Math.ceil(a.length/l),u=c*l,d,f,p,h,m,_,E;let v=Hie(t,a,n);v.empty()&&v.set(0,0,0,0),i.rowheaders&&(_=Xr(n.headerBand,jd,null),d=Dx(t,i.rowheaders,a,l,c,-Xr(s,"rowHeader"),Cie,0,o,"x1",0,l,1,_)),i.colheaders&&(_=Xr(n.headerBand,zd,null),f=Dx(t,i.colheaders,a,l,l,-Xr(s,"columnHeader"),Cie,1,o,"y1",0,1,l,_)),i.rowfooters&&(_=Xr(n.footerBand,jd,null),p=Dx(t,i.rowfooters,a,l,c,Xr(s,"rowFooter"),wie,0,o,"x2",l-1,l,1,_)),i.colfooters&&(_=Xr(n.footerBand,zd,null),h=Dx(t,i.colfooters,a,l,l,Xr(s,"columnFooter"),wie,1,o,"y2",u-l,1,l,_)),i.rowtitle&&(m=Xr(n.titleAnchor,jd),E=Xr(s,"rowTitle"),E=m===va?p+E:d-E,_=Xr(n.titleBand,jd,.5),Rie(t,i.rowtitle,E,0,v,_)),i.coltitle&&(m=Xr(n.titleAnchor,zd),E=Xr(s,"columnTitle"),E=m===va?h+E:f-E,_=Xr(n.titleBand,zd,.5),Rie(t,i.coltitle,E,1,v,_))}function uPe(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function dPe(t,e){return t.bounds[e]}function Dx(t,e,n,i,a,o,s,l,c,u,d,f,p,h){var m=n.length,_=0,E=0,v,y,x,S,N,w,T,I,R;if(!m)return _;for(v=d;v<m;v+=f)n[v]&&(_=s(_,c(n[v],u)));if(!e.length)return _;for(e.length>a&&(t.warn("Grid headers exceed limit: "+a),e=e.slice(0,a)),_+=o,y=0,S=e.length;y<S;++y)t.dirty(e[y]),e[y].mark.bounds.clear();for(v=d,y=0,S=e.length;y<S;++y,v+=f){for(w=e[y],N=w.mark.bounds,x=v;x>=0&&(T=n[x])==null;x-=p);l?(I=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),R=_):(I=_,R=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),N.union(w.bounds.translate(I-(w.x||0),R-(w.y||0))),w.x=I,w.y=R,t.dirty(w),E=s(E,N[u])}return E}function Rie(t,e,n,i,a,o){if(e){t.dirty(e);var s=n,l=n;i?s=Math.round(a.x1+o*a.width()):l=Math.round(a.y1+o*a.height()),e.bounds.translate(s-(e.x||0),l-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=s,e.y=l,t.dirty(e)}}function fPe(t,e){let n=t[e]||{};return(i,a)=>n[i]!=null?n[i]:t[i]!=null?t[i]:a}function pPe(t,e){let n=-1/0;return t.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:e}function hPe(t,e,n,i,a,o,s){let l=fPe(n,e),c=pPe(t,l("offset",0)),u=l("anchor",ZM),d=u===va?1:u===HM?.5:0,f={align:WM,bounds:l("bounds",JM),columns:l("direction")==="vertical"?1:t.length,padding:l("margin",8),center:l("center"),nodirty:!0};switch(e){case Vs:f.anchor={x:Math.floor(i.x1)-c,column:va,y:d*(s||i.height()+2*i.y1),row:u};break;case $s:f.anchor={x:Math.ceil(i.x2)+c,y:d*(s||i.height()+2*i.y1),row:u};break;case Lm:f.anchor={y:Math.floor(a.y1)-c,row:va,x:d*(o||a.width()+2*a.x1),column:u};break;case Hd:f.anchor={y:Math.ceil(a.y2)+c,x:d*(o||a.width()+2*a.x1),column:u};break;case $Re:f.anchor={x:c,y:c};break;case zRe:f.anchor={x:o-c,y:c,column:va};break;case jRe:f.anchor={x:c,y:s-c,row:va};break;case HRe:f.anchor={x:o-c,y:s-c,column:va,row:va};break}return f}function mPe(t,e){var n=e.items[0],i=n.datum,a=n.orient,o=n.bounds,s=n.x,l=n.y,c,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),_Pe(t,n,n.items[0].items[0]),o=gPe(n,o),c=2*n.padding,u=2*n.padding,o.empty()||(c=Math.ceil(o.width()+c),u=Math.ceil(o.height()+u)),i.type===YRe&&EPe(n.items[0].items[0].items[0].items),a!==YM&&(n.x=s=0,n.y=l=0),n.width=c,n.height=u,Yc(o.set(s,l,s+c,l+u),n),n.mark.bounds.clear().union(o),n}function gPe(t,e){return t.items.forEach(n=>e.union(n.bounds)),e.x1=t.padding,e.y1=t.padding,e}function _Pe(t,e,n){var i=e.padding,a=i-n.x,o=i-n.y;if(!e.datum.title)(a||o)&&m6(t,n,a,o);else{var s=e.items[1].items[0],l=s.anchor,c=e.titlePadding||0,u=i-s.x,d=i-s.y;switch(s.orient){case Vs:a+=Math.ceil(s.bounds.width())+c;break;case $s:case Hd:break;default:o+=s.bounds.height()+c}switch((a||o)&&m6(t,n,a,o),s.orient){case Vs:d+=Pm(e,n,s,l,1,1);break;case $s:u+=Pm(e,n,s,va,0,0)+c,d+=Pm(e,n,s,l,1,1);break;case Hd:u+=Pm(e,n,s,l,0,0),d+=Pm(e,n,s,va,-1,0,1)+c;break;default:u+=Pm(e,n,s,l,0,0)}(u||d)&&m6(t,s,u,d),(u=Math.round(s.bounds.x1-i))<0&&(m6(t,n,-u,0),m6(t,s,-u,0))}}function Pm(t,e,n,i,a,o,s){let l=t.datum.type!=="symbol",c=n.datum.vgrad,u=l&&(o||!c)&&!s?e.items[0]:e,d=u.bounds[a?"y2":"x2"]-t.padding,f=c&&o?d:0,p=c&&o?0:d,h=a<=0?0:FM(n);return Math.round(i===ZM?f:i===va?p-h:.5*(d-h))}function m6(t,e,n,i){e.x+=n,e.y+=i,e.bounds.translate(n,i),e.mark.bounds.translate(n,i),t.dirty(e)}function EPe(t){let e=t.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});t.forEach(n=>{n.width=e[n.column],n.height=n.bounds.y2-n.y})}function vPe(t,e,n,i,a){var o=e.items[0],s=o.frame,l=o.orient,c=o.anchor,u=o.offset,d=o.padding,f=o.items[0].items[0],p=o.items[1]&&o.items[1].items[0],h=l===Vs||l===$s?i:n,m=0,_=0,E=0,v=0,y=0,x;if(s!==Fx?l===Vs?(m=a.y2,h=a.y1):l===$s?(m=a.y1,h=a.y2):(m=a.x1,h=a.x2):l===Vs&&(m=i,h=0),x=c===ZM?m:c===va?h:(m+h)/2,p&&p.text){switch(l){case Lm:case Hd:y=f.bounds.height()+d;break;case Vs:v=f.bounds.width()+d;break;case $s:v=-f.bounds.width()-d;break}ea.clear().union(p.bounds),ea.translate(v-(p.x||0),y-(p.y||0)),Mm(p,"x",v)|Mm(p,"y",y)&&(t.dirty(p),p.bounds.clear().union(ea),p.mark.bounds.clear().union(ea),t.dirty(p)),ea.clear().union(p.bounds)}else ea.clear();switch(ea.union(f.bounds),l){case Lm:_=x,E=a.y1-ea.height()-u;break;case Vs:_=a.x1-ea.width()-u,E=x;break;case $s:_=a.x2+ea.width()+u,E=x;break;case Hd:_=x,E=a.y2+u;break;default:_=o.x,E=o.y}return Mm(o,"x",_)|Mm(o,"y",E)&&(ea.translate(_,E),t.dirty(o),o.bounds.clear().union(ea),e.bounds.clear().union(ea),t.dirty(o)),o.bounds}function Wie(t){pe.call(this,null,t)}ze(Wie,pe,{transform(t,e){let n=e.dataflow;return t.mark.items.forEach(i=>{t.layout&&cPe(n,i,t.layout),xPe(n,i,t)}),yPe(t.mark.group)?e.reflow():e}});function yPe(t){return t&&t.mark.role!=="legend-entry"}function xPe(t,e,n){var i=e.items,a=Math.max(0,e.width||0),o=Math.max(0,e.height||0),s=new wn().set(0,0,a,o),l=s.clone(),c=s.clone(),u=[],d,f,p,h,m,_;for(m=0,_=i.length;m<_;++m)switch(f=i[m],f.role){case XM:h=nPe(f)?l:c,h.union(aPe(t,f,a,o));break;case qM:d=f;break;case KM:u.push(mPe(t,f));break;case XRe:case qRe:case Pie:case Mie:case Lie:case Oie:case Bie:case Die:l.union(f.bounds),c.union(f.bounds);break;default:s.union(f.bounds)}if(u.length){let E={};u.forEach(v=>{p=v.orient||$s,p!==YM&&(E[p]||(E[p]=[])).push(v)});for(let v in E){let y=E[v];Hie(t,y,hPe(y,v,n.legends,l,c,a,o))}u.forEach(v=>{let y=v.bounds;if(y.equals(v._bounds)||(v.bounds=v._bounds,t.dirty(v),v.bounds=y,t.dirty(v)),n.autosize&&(n.autosize.type===Fie||n.autosize.type===kie||n.autosize.type===Gie))switch(v.orient){case Vs:case $s:s.add(y.x1,0).add(y.x2,0);break;case Lm:case Hd:s.add(0,y.y1).add(0,y.y2)}else s.union(y)})}s.union(l).union(c),d&&s.union(vPe(t,d,a,o,s)),e.clip&&s.set(0,0,e.width||0,e.height||0),bPe(t,e,s,n)}function bPe(t,e,n,i){let a=i.autosize||{},o=a.type;if(t._autosize<1||!o)return;let s=t._width,l=t._height,c=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,e.height||0),f=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.x2-c)),h=Math.max(0,Math.ceil(n.y2-d));if(a.contains===KRe){let m=t.padding();s-=m.left+m.right,l-=m.top+m.bottom}o===YM?(u=0,f=0,c=s,d=l):o===Fie?(c=Math.max(0,s-u-p),d=Math.max(0,l-f-h)):o===kie?(c=Math.max(0,s-u-p),l=d+f+h):o===Gie?(s=c+u+p,d=Math.max(0,l-f-h)):o===JRe&&(s=c+u+p,l=d+f+h),t._resizeView(s,l,c,d,[u,f],a.resize)}var aL={};mr(aL,{axisticks:()=>Kie,datajoin:()=>Yie,encode:()=>Jie,legendentries:()=>Qie,linkpath:()=>rL,pie:()=>nL,scale:()=>iae,sortitems:()=>oae,stack:()=>iL});function Kie(t){pe.call(this,null,t)}ze(Kie,pe,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),a=this.value,o=t.scale,s=t.count==null?t.values?t.values.length:10:t.count,l=X8(o,s,t.minstep),c=t.format||tM(n,o,l,t.formatSpecifier,t.formatType,!!t.values),u=t.values?eM(o,t.values,l):q8(o,l);return a&&(i.rem=a),a=u.map((d,f)=>Jt({index:f/(u.length-1||1),value:d,label:c(d)})),t.extra&&a.length&&a.push(Jt({index:-1,extra:{value:a[0].value},label:""})),i.source=a,i.add=a,this.value=a,i}});function Yie(t){pe.call(this,null,t)}function SPe(){return Jt({})}function NPe(t){let e=Mp().test(n=>n.exit);return e.lookup=n=>e.get(t(n)),e}ze(Yie,pe,{transform(t,e){var n=e.dataflow,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),a=t.item||SPe,o=t.key||mt,s=this.value;return ot(i.encode)&&(i.encode=null),s&&(t.modified("key")||e.modified(o))&&he("DataJoin does not support modified key function or fields."),s||(e=e.addAll(),this.value=s=NPe(o)),e.visit(e.ADD,l=>{let c=o(l),u=s.get(c);u?u.exit?(s.empty--,i.add.push(u)):i.mod.push(u):(u=a(l),s.set(c,u),i.add.push(u)),u.datum=l,u.exit=!1}),e.visit(e.MOD,l=>{let c=o(l),u=s.get(c);u&&(u.datum=l,i.mod.push(u))}),e.visit(e.REM,l=>{let c=o(l),u=s.get(c);l===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++s.empty)}),e.changed(e.ADD_MOD)&&i.modifies("datum"),(e.clean()||t.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function Jie(t){pe.call(this,null,t)}ze(Jie,pe,{transform(t,e){var n=e.fork(e.ADD_REM),i=t.mod||!1,a=t.encoders,o=e.encode;if(ot(o))if(n.changed()||o.every(f=>a[f]))o=o[0],n.encode=null;else return e.StopPropagation;var s=o==="enter",l=a.update||ed,c=a.enter||ed,u=a.exit||ed,d=(o&&!s?a[o]:l)||ed;if(e.changed(e.ADD)&&(e.visit(e.ADD,f=>{c(f,t),l(f,t)}),n.modifies(c.output),n.modifies(l.output),d!==ed&&d!==l&&(e.visit(e.ADD,f=>{d(f,t)}),n.modifies(d.output))),e.changed(e.REM)&&u!==ed&&(e.visit(e.REM,f=>{u(f,t)}),n.modifies(u.output)),s||d!==ed){let f=e.MOD|(t.modified()?e.REFLOW:0);s?(e.visit(f,p=>{let h=c(p,t)||i;(d(p,t)||h)&&n.mod.push(p)}),n.mod.length&&n.modifies(c.output)):e.visit(f,p=>{(d(p,t)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:e.StopPropagation}});function Qie(t){pe.call(this,[],t)}ze(Qie,pe,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),a=this.value,o=t.type||J3,s=t.scale,l=+t.limit,c=X8(s,t.count==null?5:t.count,t.minstep),u=!!t.values||o===J3,d=t.format||nM(n,s,c,o,t.formatSpecifier,t.formatType,u),f=t.values||rM(s,c),p,h,m,_,E;return a&&(i.rem=a),o===J3?(l&&f.length>l?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),a=f.slice(0,l-1),E=!0):a=f,wt(m=t.size)?(!t.values&&s(a[0])===0&&(a=a.slice(1)),_=a.reduce((v,y)=>Math.max(v,m(y,t)),0)):m=en(_=m||8),a=a.map((v,y)=>Jt({index:y,label:d(v,y,a),value:v,offset:_,size:m(v,t)})),E&&(E=f[a.length],a.push(Jt({index:a.length,label:`\u2026${f.length-a.length} entries`,value:E,offset:_,size:m(E,t)})))):o===Qre?(p=s.domain(),h=H8(s,p[0],Vt(p)),f.length<3&&!t.values&&p[0]!==Vt(p)&&(f=[p[0],Vt(p)]),a=f.map((v,y)=>Jt({index:y,label:d(v,y,f),value:v,perc:h(v)}))):(m=f.length-1,h=rne(s),a=f.map((v,y)=>Jt({index:y,label:d(v,y,f),value:v,perc:y?h(v):0,perc2:y===m?1:h(f[y+1])}))),i.source=a,i.add=a,this.value=a,i}});var APe=t=>t.source.x,TPe=t=>t.source.y,CPe=t=>t.target.x,wPe=t=>t.target.y;function rL(t){pe.call(this,{},t)}rL.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ze(rL,pe,{transform(t,e){var n=t.sourceX||APe,i=t.sourceY||TPe,a=t.targetX||CPe,o=t.targetY||wPe,s=t.as||"path",l=t.orient||"vertical",c=t.shape||"line",u=Zie.get(c+"-"+l)||Zie.get(c);return u||he("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,d=>{d[s]=u(n(d),i(d),a(d),o(d))}),e.reflow(t.modified()).modifies(s)}});var eae=(t,e,n,i)=>"M"+t+","+e+"L"+n+","+i,IPe=(t,e,n,i)=>eae(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),tae=(t,e,n,i)=>{var a=n-t,o=i-e,s=Math.hypot(a,o)/2,l=180*Math.atan2(o,a)/Math.PI;return"M"+t+","+e+"A"+s+","+s+" "+l+" 0 1 "+n+","+i},RPe=(t,e,n,i)=>tae(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),rae=(t,e,n,i)=>{let a=n-t,o=i-e,s=.2*(a+o),l=.2*(o-a);return"M"+t+","+e+"C"+(t+s)+","+(e+l)+" "+(n+l)+","+(i-s)+" "+n+","+i},PPe=(t,e,n,i)=>rae(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),MPe=(t,e,n,i)=>"M"+t+","+e+"V"+i+"H"+n,LPe=(t,e,n,i)=>"M"+t+","+e+"H"+n+"V"+i,OPe=(t,e,n,i)=>{let a=Math.cos(t),o=Math.sin(t),s=Math.cos(n),l=Math.sin(n),c=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*a+","+e*o+"A"+e+","+e+" 0 0,"+(c?1:0)+" "+e*s+","+e*l+"L"+i*s+","+i*l},BPe=(t,e,n,i)=>{let a=(t+n)/2;return"M"+t+","+e+"C"+a+","+e+" "+a+","+i+" "+n+","+i},DPe=(t,e,n,i)=>{let a=(e+i)/2;return"M"+t+","+e+"C"+t+","+a+" "+n+","+a+" "+n+","+i},FPe=(t,e,n,i)=>{let a=Math.cos(t),o=Math.sin(t),s=Math.cos(n),l=Math.sin(n),c=(e+i)/2;return"M"+e*a+","+e*o+"C"+c*a+","+c*o+" "+c*s+","+c*l+" "+i*s+","+i*l},Zie=Mp({line:eae,"line-radial":IPe,arc:tae,"arc-radial":RPe,curve:rae,"curve-radial":PPe,"orthogonal-horizontal":MPe,"orthogonal-vertical":LPe,"orthogonal-radial":OPe,"diagonal-horizontal":BPe,"diagonal-vertical":DPe,"diagonal-radial":FPe});function nL(t){pe.call(this,null,t)}nL.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ze(nL,pe,{transform(t,e){var n=t.as||["startAngle","endAngle"],i=n[0],a=n[1],o=t.field||Lc,s=t.startAngle||0,l=t.endAngle!=null?t.endAngle:2*Math.PI,c=e.source,u=c.map(o),d=u.length,f=s,p=(l-s)/F0(u),h=Tn(d),m,_,E;for(t.sort&&h.sort((v,y)=>u[v]-u[y]),m=0;m<d;++m)E=u[h[m]],_=c[h[m]],_[i]=f,_[a]=f+=E*p;return this.value=u,e.reflow(t.modified()).modifies(n)}});var kPe=5;function GPe(t){let e=t.type;return!t.bins&&(e===a1||e===Nm||e===Am)}function nae(t){return K3(t)&&t!==ks}var UPe=hi(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function iae(t){pe.call(this,null,t),this.modified(!0)}ze(iae,pe,{transform(t,e){var n=e.dataflow,i=this.value,a=VPe(t);(!i||a!==i.type)&&(this.value=i=tr(a)());for(a in t)if(!UPe[a]){if(a==="padding"&&nae(i.type))continue;wt(i[a])?i[a](t[a]):n.warn("Unsupported scale property: "+a)}return ZPe(i,t,WPe(i,t,zPe(i,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function VPe(t){var e=t.type,n="",i;return e===ks?ks+"-"+a1:($Pe(t)&&(i=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=i===2?ks+"-":i===3?o1+"-":""),(n+e||a1).toLowerCase())}function $Pe(t){let e=t.type;return K3(e)&&e!==Md&&e!==Ld&&(t.scheme||t.range&&t.range.length&&t.range.every(fr))}function zPe(t,e,n){let i=jPe(t,e.domainRaw,n);if(i>-1)return i;var a=e.domain,o=t.type,s=e.zero||e.zero===void 0&&GPe(t),l,c;if(!a)return 0;if((s||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(l=(a=a.slice()).length-1||1,s&&(a[0]>0&&(a[0]=0),a[l]<0&&(a[l]=0)),e.domainMin!=null&&(a[0]=e.domainMin),e.domainMax!=null&&(a[l]=e.domainMax),e.domainMid!=null)){c=e.domainMid;let u=c>a[l]?l+1:c<a[0]?0:l;u!==l&&n.warn("Scale domainMid exceeds domain min or max.",c),a.splice(u,0,c)}return nae(o)&&e.padding&&a[0]!==Vt(a)&&(a=HPe(o,a,e.range,e.padding,e.exponent,e.constant)),t.domain(aae(o,a,n)),o===V8&&t.unknown(e.domainImplicit?hm:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&X8(t,e.nice)||null),a.length}function jPe(t,e,n){return e?(t.domain(aae(t.type,e,n)),e.length):-1}function HPe(t,e,n,i,a,o){var s=Math.abs(Vt(n)-n[0]),l=s/(s-2*i),c=t===zl?dy(e,null,l):t===Am?SE(e,null,l,.5):t===Nm?SE(e,null,l,a||1):t===H3?fy(e,null,l,o||1):uy(e,null,l);return e=e.slice(),e[0]=c[0],e[e.length-1]=c[1],e}function aae(t,e,n){if(qP(t)){var i=Math.abs(e.reduce((a,o)=>a+(o<0?-1:o>0?1:0),0));i!==e.length&&n.warn("Log scale domain includes zero: "+ht(e))}return e}function WPe(t,e,n){let i=e.bins;if(i&&!ot(i)){let a=t.domain(),o=a[0],s=Vt(a),l=i.step,c=i.start==null?o:i.start,u=i.stop==null?s:i.stop;l||he("Scale bins parameter missing step property."),c<o&&(c=l*Math.ceil(o/l)),u>s&&(u=l*Math.floor(s/l)),i=Tn(c,u+l/2,l)}return i?t.bins=i:t.bins&&delete t.bins,t.type===z8&&(i?!e.domain&&!e.domainRaw&&(t.domain(i),n=i.length):t.bins=t.domain()),n}function ZPe(t,e,n){var i=t.type,a=e.round||!1,o=e.range;if(e.rangeStep!=null)o=XPe(i,e,n);else if(e.scheme&&(o=qPe(i,e,n),wt(o))){if(t.interpolator)return t.interpolator(o);he(`Scale type ${i} does not support interpolating color schemes.`)}if(o&&KP(i))return t.interpolator(Y3(tL(o,e.reverse),e.interpolate,e.interpolateGamma));o&&e.interpolate&&t.interpolate?t.interpolate(W8(e.interpolate,e.interpolateGamma)):wt(t.round)?t.round(a):wt(t.rangeRound)&&t.interpolate(a?Vl:Yi),o&&t.range(tL(o,e.reverse))}function XPe(t,e,n){t!==jP&&t!==$8&&he("Only band and point scales support rangeStep.");var i=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,a=t===$8?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*j3(n,a,i)]}function qPe(t,e,n){var i=e.schemeExtent,a,o;return ot(e.scheme)?o=Y3(e.scheme,e.interpolate,e.interpolateGamma):(a=e.scheme.toLowerCase(),o=Z8(a),o||he(`Unrecognized scheme name: ${e.scheme}`)),n=t===Z3?n+1:t===z8?n-1:t===i1||t===W3?+e.schemeCount||kPe:n,KP(t)?Xie(o,i,e.reverse):wt(o)?QP(Xie(o,i),n):t===V8?o:o.slice(0,n)}function Xie(t,e,n){return wt(t)&&(e||n)?JP(t,tL(e||[0,1],n)):t}function tL(t,e){return e?t.slice().reverse():t}function oae(t){pe.call(this,null,t)}ze(oae,pe,{transform(t,e){let n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(Dl(t.sort)),this.modified(n),e}});var qie="zero",sae="center",lae="normalize",cae=["y0","y1"];function iL(t){pe.call(this,null,t)}iL.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:qie,values:[qie,sae,lae]},{name:"as",type:"string",array:!0,length:2,default:cae}]};ze(iL,pe,{transform(t,e){var n=t.as||cae,i=n[0],a=n[1],o=Dl(t.sort),s=t.field||Lc,l=t.offset===sae?KPe:t.offset===lae?YPe:JPe,c,u,d,f;for(c=QPe(e.source,t.groupby,o,s),u=0,d=c.length,f=c.max;u<d;++u)l(c[u],f,s,i,a);return e.reflow(t.modified()).modifies(n)}});function KPe(t,e,n,i,a){for(var o=(e-t.sum)/2,s=t.length,l=0,c;l<s;++l)c=t[l],c[i]=o,c[a]=o+=Math.abs(n(c))}function YPe(t,e,n,i,a){for(var o=1/t.sum,s=0,l=t.length,c=0,u=0,d;c<l;++c)d=t[c],d[i]=s,d[a]=s=o*(u+=Math.abs(n(d)))}function JPe(t,e,n,i,a){for(var o=0,s=0,l=t.length,c=0,u,d;c<l;++c)d=t[c],u=+n(d),u<0?(d[i]=s,d[a]=s+=u):(d[i]=o,d[a]=o+=u)}function QPe(t,e,n,i){var a=[],o=_=>_(d),s,l,c,u,d,f,p,h,m;if(e==null)a.push(t.slice());else for(s={},l=0,c=t.length;l<c;++l)d=t[l],f=e.map(o),p=s[f],p||(s[f]=p=[],a.push(p)),p.push(d);for(f=0,m=0,u=a.length;f<u;++f){for(p=a[f],l=0,h=0,c=p.length;l<c;++l)h+=Math.abs(i(p[l]));p.sum=h,h>m&&(m=h),n&&p.sort(n)}return a.max=m,a}var SO={};mr(SO,{contour:()=>mO,geojson:()=>_O,geopath:()=>EO,geopoint:()=>vO,geoshape:()=>yO,graticule:()=>xO,heatmap:()=>bO,isocontour:()=>pO,kde2d:()=>hO,projection:()=>voe});var nt=1e-6,_1=1e-12,Dt=Math.PI,br=Dt/2,Om=Dt/4,Rn=Dt*2,Sr=180/Dt,Pt=Dt/180,It=Math.abs,ls=Math.atan,hn=Math.atan2,rt=Math.cos,g6=Math.ceil,kx=Math.exp;var Gx=Math.hypot,E1=Math.log,Ux=Math.pow,tt=Math.sin,ta=Math.sign||function(t){return t>0?1:t<0?-1:0},Nr=Math.sqrt,Bm=Math.tan;function Vx(t){return t>1?0:t<-1?Dt:Math.acos(t)}function Vr(t){return t>1?br:t<-1?-br:Math.asin(t)}function $r(){}function $x(t,e){t&&dae.hasOwnProperty(t.type)&&dae[t.type](t,e)}var uae={Feature:function(t,e){$x(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)$x(n[i].geometry,e)}},dae={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){oL(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)oL(n[i],e,0)},Polygon:function(t,e){fae(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)fae(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)$x(n[i],e)}};function oL(t,e,n){var i=-1,a=t.length-n,o;for(e.lineStart();++i<a;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function fae(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)oL(t[n],e,1);e.polygonEnd()}function Wa(t,e){t&&uae.hasOwnProperty(t.type)?uae[t.type](t,e):$x(t,e)}var _6=new Wr,zx=new Wr,pae,hae,sL,lL,cL,zs={point:$r,lineStart:$r,lineEnd:$r,polygonStart:function(){_6=new Wr,zs.lineStart=eMe,zs.lineEnd=tMe},polygonEnd:function(){var t=+_6;zx.add(t<0?Rn+t:t),this.lineStart=this.lineEnd=this.point=$r},sphere:function(){zx.add(Rn)}};function eMe(){zs.point=rMe}function tMe(){mae(pae,hae)}function rMe(t,e){zs.point=mae,pae=t,hae=e,t*=Pt,e*=Pt,sL=t,lL=rt(e=e/2+Om),cL=tt(e)}function mae(t,e){t*=Pt,e*=Pt,e=e/2+Om;var n=t-sL,i=n>=0?1:-1,a=i*n,o=rt(e),s=tt(e),l=cL*s,c=lL*o+l*rt(a),u=l*i*tt(a);_6.add(hn(u,c)),sL=t,lL=o,cL=s}function uL(t){return zx=new Wr,Wa(t,zs),zx*2}function v1(t){return[hn(t[1],t[0]),Vr(t[2])]}function cs(t){var e=t[0],n=t[1],i=rt(n);return[i*rt(e),i*tt(e),tt(n)]}function E6(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Qc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function jx(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function v6(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function y1(t){var e=Nr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var tn,Za,mn,So,x1,vae,yae,Dm,y6,Wd,tu,eu={point:dL,lineStart:gae,lineEnd:_ae,polygonStart:function(){eu.point=bae,eu.lineStart=nMe,eu.lineEnd=iMe,y6=new Wr,zs.polygonStart()},polygonEnd:function(){zs.polygonEnd(),eu.point=dL,eu.lineStart=gae,eu.lineEnd=_ae,_6<0?(tn=-(mn=180),Za=-(So=90)):y6>nt?So=90:y6<-nt&&(Za=-90),tu[0]=tn,tu[1]=mn},sphere:function(){tn=-(mn=180),Za=-(So=90)}};function dL(t,e){Wd.push(tu=[tn=t,mn=t]),e<Za&&(Za=e),e>So&&(So=e)}function xae(t,e){var n=cs([t*Pt,e*Pt]);if(Dm){var i=Qc(Dm,n),a=[i[1],-i[0],0],o=Qc(a,i);y1(o),o=v1(o);var s=t-x1,l=s>0?1:-1,c=o[0]*Sr*l,u,d=It(s)>180;d^(l*x1<c&&c<l*t)?(u=o[1]*Sr,u>So&&(So=u)):(c=(c+360)%360-180,d^(l*x1<c&&c<l*t)?(u=-o[1]*Sr,u<Za&&(Za=u)):(e<Za&&(Za=e),e>So&&(So=e))),d?t<x1?bo(tn,t)>bo(tn,mn)&&(mn=t):bo(t,mn)>bo(tn,mn)&&(tn=t):mn>=tn?(t<tn&&(tn=t),t>mn&&(mn=t)):t>x1?bo(tn,t)>bo(tn,mn)&&(mn=t):bo(t,mn)>bo(tn,mn)&&(tn=t)}else Wd.push(tu=[tn=t,mn=t]);e<Za&&(Za=e),e>So&&(So=e),Dm=n,x1=t}function gae(){eu.point=xae}function _ae(){tu[0]=tn,tu[1]=mn,eu.point=dL,Dm=null}function bae(t,e){if(Dm){var n=t-x1;y6.add(It(n)>180?n+(n>0?360:-360):n)}else vae=t,yae=e;zs.point(t,e),xae(t,e)}function nMe(){zs.lineStart()}function iMe(){bae(vae,yae),zs.lineEnd(),It(y6)>nt&&(tn=-(mn=180)),tu[0]=tn,tu[1]=mn,Dm=null}function bo(t,e){return(e-=t)<0?e+360:e}function aMe(t,e){return t[0]-e[0]}function Eae(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function fL(t){var e,n,i,a,o,s,l;if(So=mn=-(tn=Za=1/0),Wd=[],Wa(t,eu),n=Wd.length){for(Wd.sort(aMe),e=1,i=Wd[0],o=[i];e<n;++e)a=Wd[e],Eae(i,a[0])||Eae(i,a[1])?(bo(i[0],a[1])>bo(i[0],i[1])&&(i[1]=a[1]),bo(a[0],i[1])>bo(i[0],i[1])&&(i[0]=a[0])):o.push(i=a);for(s=-1/0,n=o.length-1,e=0,i=o[n];e<=n;i=a,++e)a=o[e],(l=bo(i[1],a[0]))>s&&(s=l,tn=a[0],mn=i[1])}return Wd=tu=null,tn===1/0||Za===1/0?[[NaN,NaN],[NaN,NaN]]:[[tn,Za],[mn,So]]}var x6,Hx,Wx,Zx,Xx,qx,Kx,Yx,pL,hL,mL,Aae,Tae,ya,xa,ba,js={sphere:$r,point:gL,lineStart:Sae,lineEnd:Nae,polygonStart:function(){js.lineStart=lMe,js.lineEnd=cMe},polygonEnd:function(){js.lineStart=Sae,js.lineEnd=Nae}};function gL(t,e){t*=Pt,e*=Pt;var n=rt(e);b6(n*rt(t),n*tt(t),tt(e))}function b6(t,e,n){++x6,Wx+=(t-Wx)/x6,Zx+=(e-Zx)/x6,Xx+=(n-Xx)/x6}function Sae(){js.point=oMe}function oMe(t,e){t*=Pt,e*=Pt;var n=rt(e);ya=n*rt(t),xa=n*tt(t),ba=tt(e),js.point=sMe,b6(ya,xa,ba)}function sMe(t,e){t*=Pt,e*=Pt;var n=rt(e),i=n*rt(t),a=n*tt(t),o=tt(e),s=hn(Nr((s=xa*o-ba*a)*s+(s=ba*i-ya*o)*s+(s=ya*a-xa*i)*s),ya*i+xa*a+ba*o);Hx+=s,qx+=s*(ya+(ya=i)),Kx+=s*(xa+(xa=a)),Yx+=s*(ba+(ba=o)),b6(ya,xa,ba)}function Nae(){js.point=gL}function lMe(){js.point=uMe}function cMe(){Cae(Aae,Tae),js.point=gL}function uMe(t,e){Aae=t,Tae=e,t*=Pt,e*=Pt,js.point=Cae;var n=rt(e);ya=n*rt(t),xa=n*tt(t),ba=tt(e),b6(ya,xa,ba)}function Cae(t,e){t*=Pt,e*=Pt;var n=rt(e),i=n*rt(t),a=n*tt(t),o=tt(e),s=xa*o-ba*a,l=ba*i-ya*o,c=ya*a-xa*i,u=Gx(s,l,c),d=Vr(u),f=u&&-d/u;pL.add(f*s),hL.add(f*l),mL.add(f*c),Hx+=d,qx+=d*(ya+(ya=i)),Kx+=d*(xa+(xa=a)),Yx+=d*(ba+(ba=o)),b6(ya,xa,ba)}function _L(t){x6=Hx=Wx=Zx=Xx=qx=Kx=Yx=0,pL=new Wr,hL=new Wr,mL=new Wr,Wa(t,js);var e=+pL,n=+hL,i=+mL,a=Gx(e,n,i);return a<_1&&(e=qx,n=Kx,i=Yx,Hx<nt&&(e=Wx,n=Zx,i=Xx),a=Gx(e,n,i),a<_1)?[NaN,NaN]:[hn(n,e)*Sr,Vr(i/a)*Sr]}function S6(t,e){function n(i,a){return i=t(i,a),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,a){return i=e.invert(i,a),i&&t.invert(i[0],i[1])}),n}function EL(t,e){return It(t)>Dt&&(t-=Math.round(t/Rn)*Rn),[t,e]}EL.invert=EL;function vL(t,e,n){return(t%=Rn)?e||n?S6(Iae(t),Rae(e,n)):Iae(t):e||n?Rae(e,n):EL}function wae(t){return function(e,n){return e+=t,It(e)>Dt&&(e-=Math.round(e/Rn)*Rn),[e,n]}}function Iae(t){var e=wae(t);return e.invert=wae(-t),e}function Rae(t,e){var n=rt(t),i=tt(t),a=rt(e),o=tt(e);function s(l,c){var u=rt(c),d=rt(l)*u,f=tt(l)*u,p=tt(c),h=p*n+d*i;return[hn(f*a-h*o,d*n-p*i),Vr(h*a+f*o)]}return s.invert=function(l,c){var u=rt(c),d=rt(l)*u,f=tt(l)*u,p=tt(c),h=p*a-f*o;return[hn(f*a+p*o,d*n+h*i),Vr(h*n-d*i)]},s}function Pae(t){t=vL(t[0]*Pt,t[1]*Pt,t.length>2?t[2]*Pt:0);function e(n){return n=t(n[0]*Pt,n[1]*Pt),n[0]*=Sr,n[1]*=Sr,n}return e.invert=function(n){return n=t.invert(n[0]*Pt,n[1]*Pt),n[0]*=Sr,n[1]*=Sr,n},e}function Lae(t,e,n,i,a,o){if(n){var s=rt(e),l=tt(e),c=i*n;a==null?(a=e+i*Rn,o=e-c/2):(a=Mae(s,a),o=Mae(s,o),(i>0?a<o:a>o)&&(a+=i*Rn));for(var u,d=a;i>0?d>o:d<o;d-=c)u=v1([s,-l*rt(d),-l*tt(d)]),t.point(u[0],u[1])}}function Mae(t,e){e=cs(e),e[0]-=t,y1(e);var n=Vx(-e[1]);return((-e[2]<0?-n:n)+Rn-nt)%Rn}function Jx(){var t=[],e;return{point:function(n,i,a){e.push([n,i,a])},lineStart:function(){t.push(e=[])},lineEnd:$r,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Fm(t,e){return It(t[0]-e[0])<nt&&It(t[1]-e[1])<nt}function Qx(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function eb(t,e,n,i,a){var o=[],s=[],l,c;if(t.forEach(function(m){if(!((_=m.length-1)<=0)){var _,E=m[0],v=m[_],y;if(Fm(E,v)){if(!E[2]&&!v[2]){for(a.lineStart(),l=0;l<_;++l)a.point((E=m[l])[0],E[1]);a.lineEnd();return}v[0]+=2*nt}o.push(y=new Qx(E,m,null,!0)),s.push(y.o=new Qx(E,null,y,!1)),o.push(y=new Qx(v,m,null,!1)),s.push(y.o=new Qx(v,null,y,!0))}}),!!o.length){for(s.sort(e),Oae(o),Oae(s),l=0,c=s.length;l<c;++l)s[l].e=n=!n;for(var u=o[0],d,f;;){for(var p=u,h=!0;p.v;)if((p=p.n)===u)return;d=p.z,a.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(l=0,c=d.length;l<c;++l)a.point((f=d[l])[0],f[1]);else i(p.x,p.n.x,1,a);p=p.n}else{if(h)for(d=p.p.z,l=d.length-1;l>=0;--l)a.point((f=d[l])[0],f[1]);else i(p.x,p.p.x,-1,a);p=p.p}p=p.o,d=p.z,h=!h}while(!p.v);a.lineEnd()}}}function Oae(t){if(e=t.length){for(var e,n=0,i=t[0],a;++n<e;)i.n=a=t[n],a.p=i,i=a;i.n=a=t[0],a.p=i}}function yL(t){return It(t[0])<=Dt?t[0]:ta(t[0])*((It(t[0])+Dt)%Rn-Dt)}function Bae(t,e){var n=yL(e),i=e[1],a=tt(i),o=[tt(n),-rt(n),0],s=0,l=0,c=new Wr;a===1?i=br+nt:a===-1&&(i=-br-nt);for(var u=0,d=t.length;u<d;++u)if(p=(f=t[u]).length)for(var f,p,h=f[p-1],m=yL(h),_=h[1]/2+Om,E=tt(_),v=rt(_),y=0;y<p;++y,m=S,E=w,v=T,h=x){var x=f[y],S=yL(x),N=x[1]/2+Om,w=tt(N),T=rt(N),I=S-m,R=I>=0?1:-1,L=R*I,O=L>Dt,H=E*w;if(c.add(hn(H*R*tt(L),v*T+H*rt(L))),s+=O?I+R*Rn:I,O^m>=n^S>=n){var U=Qc(cs(h),cs(x));y1(U);var X=Qc(o,U);y1(X);var W=(O^I>=0?-1:1)*Vr(X[2]);(i>W||i===W&&(U[0]||U[1]))&&(l+=O^I>=0?1:-1)}}return(s<-nt||s<nt&&c<-_1)^l&1}function tb(t,e,n,i){return function(a){var o=e(a),s=Jx(),l=e(s),c=!1,u,d,f,p={point:h,lineStart:_,lineEnd:E,polygonStart:function(){p.point=v,p.lineStart=y,p.lineEnd=x,d=[],u=[]},polygonEnd:function(){p.point=h,p.lineStart=_,p.lineEnd=E,d=D0(d);var S=Bae(u,i);d.length?(c||(a.polygonStart(),c=!0),eb(d,fMe,S,n,a)):S&&(c||(a.polygonStart(),c=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),c&&(a.polygonEnd(),c=!1),d=u=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function h(S,N){t(S,N)&&a.point(S,N)}function m(S,N){o.point(S,N)}function _(){p.point=m,o.lineStart()}function E(){p.point=h,o.lineEnd()}function v(S,N){f.push([S,N]),l.point(S,N)}function y(){l.lineStart(),f=[]}function x(){v(f[0][0],f[0][1]),l.lineEnd();var S=l.clean(),N=s.result(),w,T=N.length,I,R,L;if(f.pop(),u.push(f),f=null,!!T){if(S&1){if(R=N[0],(I=R.length-1)>0){for(c||(a.polygonStart(),c=!0),a.lineStart(),w=0;w<I;++w)a.point((L=R[w])[0],L[1]);a.lineEnd()}return}T>1&&S&2&&N.push(N.pop().concat(N.shift())),d.push(N.filter(dMe))}}return p}}function dMe(t){return t.length>1}function fMe(t,e){return((t=t.x)[0]<0?t[1]-br-nt:br-t[1])-((e=e.x)[0]<0?e[1]-br-nt:br-e[1])}var xL=tb(function(){return!0},pMe,mMe,[-Dt,-br]);function pMe(t){var e=NaN,n=NaN,i=NaN,a;return{lineStart:function(){t.lineStart(),a=1},point:function(o,s){var l=o>0?Dt:-Dt,c=It(o-e);It(c-Dt)<nt?(t.point(e,n=(n+s)/2>0?br:-br),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),a=0):i!==l&&c>=Dt&&(It(e-i)<nt&&(e-=i*nt),It(o-l)<nt&&(o-=l*nt),n=hMe(e,n,o,s),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),a=0),t.point(e=o,n=s),i=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-a}}}function hMe(t,e,n,i){var a,o,s=tt(t-n);return It(s)>nt?ls((tt(e)*(o=rt(i))*tt(n)-tt(i)*(a=rt(e))*tt(t))/(a*o*s)):(e+i)/2}function mMe(t,e,n,i){var a;if(t==null)a=n*br,i.point(-Dt,a),i.point(0,a),i.point(Dt,a),i.point(Dt,0),i.point(Dt,-a),i.point(0,-a),i.point(-Dt,-a),i.point(-Dt,0),i.point(-Dt,a);else if(It(t[0]-e[0])>nt){var o=t[0]<e[0]?Dt:-Dt;a=n*o/2,i.point(-o,a),i.point(0,a),i.point(o,a)}else i.point(e[0],e[1])}function Dae(t){var e=rt(t),n=2*Pt,i=e>0,a=It(e)>nt;function o(d,f,p,h){Lae(h,t,n,p,d,f)}function s(d,f){return rt(d)*rt(f)>e}function l(d){var f,p,h,m,_;return{lineStart:function(){m=h=!1,_=1},point:function(E,v){var y=[E,v],x,S=s(E,v),N=i?S?0:u(E,v):S?u(E+(E<0?Dt:-Dt),v):0;if(!f&&(m=h=S)&&d.lineStart(),S!==h&&(x=c(f,y),(!x||Fm(f,x)||Fm(y,x))&&(y[2]=1)),S!==h)_=0,S?(d.lineStart(),x=c(y,f),d.point(x[0],x[1])):(x=c(f,y),d.point(x[0],x[1],2),d.lineEnd()),f=x;else if(a&&f&&i^S){var w;!(N&p)&&(w=c(y,f,!0))&&(_=0,i?(d.lineStart(),d.point(w[0][0],w[0][1]),d.point(w[1][0],w[1][1]),d.lineEnd()):(d.point(w[1][0],w[1][1]),d.lineEnd(),d.lineStart(),d.point(w[0][0],w[0][1],3)))}S&&(!f||!Fm(f,y))&&d.point(y[0],y[1]),f=y,h=S,p=N},lineEnd:function(){h&&d.lineEnd(),f=null},clean:function(){return _|(m&&h)<<1}}}function c(d,f,p){var h=cs(d),m=cs(f),_=[1,0,0],E=Qc(h,m),v=E6(E,E),y=E[0],x=v-y*y;if(!x)return!p&&d;var S=e*v/x,N=-e*y/x,w=Qc(_,E),T=v6(_,S),I=v6(E,N);jx(T,I);var R=w,L=E6(T,R),O=E6(R,R),H=L*L-O*(E6(T,T)-1);if(!(H<0)){var U=Nr(H),X=v6(R,(-L-U)/O);if(jx(X,T),X=v1(X),!p)return X;var W=d[0],ne=f[0],be=d[1],q=f[1],ie;ne<W&&(ie=W,W=ne,ne=ie);var ge=ne-W,et=It(ge-Dt)<nt,qe=et||ge<nt;if(!et&&q<be&&(ie=be,be=q,q=ie),qe?et?be+q>0^X[1]<(It(X[0]-W)<nt?be:q):be<=X[1]&&X[1]<=q:ge>Dt^(W<=X[0]&&X[0]<=ne)){var vt=v6(R,(-L+U)/O);return jx(vt,T),[X,v1(vt)]}}}function u(d,f){var p=i?t:Dt-t,h=0;return d<-p?h|=1:d>p&&(h|=2),f<-p?h|=4:f>p&&(h|=8),h}return tb(s,l,o,i?[0,-t]:[-Dt,t-Dt])}function Fae(t,e,n,i,a,o){var s=t[0],l=t[1],c=e[0],u=e[1],d=0,f=1,p=c-s,h=u-l,m;if(m=n-s,!(!p&&m>0)){if(m/=p,p<0){if(m<d)return;m<f&&(f=m)}else if(p>0){if(m>f)return;m>d&&(d=m)}if(m=a-s,!(!p&&m<0)){if(m/=p,p<0){if(m>f)return;m>d&&(d=m)}else if(p>0){if(m<d)return;m<f&&(f=m)}if(m=i-l,!(!h&&m>0)){if(m/=h,h<0){if(m<d)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>d&&(d=m)}if(m=o-l,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>d&&(d=m)}else if(h>0){if(m<d)return;m<f&&(f=m)}return d>0&&(t[0]=s+d*p,t[1]=l+d*h),f<1&&(e[0]=s+f*p,e[1]=l+f*h),!0}}}}}var N6=1e9,rb=-N6;function A6(t,e,n,i){function a(u,d){return t<=u&&u<=n&&e<=d&&d<=i}function o(u,d,f,p){var h=0,m=0;if(u==null||(h=s(u,f))!==(m=s(d,f))||c(u,d)<0^f>0)do p.point(h===0||h===3?t:n,h>1?i:e);while((h=(h+f+4)%4)!==m);else p.point(d[0],d[1])}function s(u,d){return It(u[0]-t)<nt?d>0?0:3:It(u[0]-n)<nt?d>0?2:1:It(u[1]-e)<nt?d>0?1:0:d>0?3:2}function l(u,d){return c(u.x,d.x)}function c(u,d){var f=s(u,1),p=s(d,1);return f!==p?f-p:f===0?d[1]-u[1]:f===1?u[0]-d[0]:f===2?u[1]-d[1]:d[0]-u[0]}return function(u){var d=u,f=Jx(),p,h,m,_,E,v,y,x,S,N,w,T={point:I,lineStart:H,lineEnd:U,polygonStart:L,polygonEnd:O};function I(W,ne){a(W,ne)&&d.point(W,ne)}function R(){for(var W=0,ne=0,be=h.length;ne<be;++ne)for(var q=h[ne],ie=1,ge=q.length,et=q[0],qe,vt,ar=et[0],Qt=et[1];ie<ge;++ie)qe=ar,vt=Qt,et=q[ie],ar=et[0],Qt=et[1],vt<=i?Qt>i&&(ar-qe)*(i-vt)>(Qt-vt)*(t-qe)&&++W:Qt<=i&&(ar-qe)*(i-vt)<(Qt-vt)*(t-qe)&&--W;return W}function L(){d=f,p=[],h=[],w=!0}function O(){var W=R(),ne=w&&W,be=(p=D0(p)).length;(ne||be)&&(u.polygonStart(),ne&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),be&&eb(p,l,W,o,u),u.polygonEnd()),d=u,p=h=m=null}function H(){T.point=X,h&&h.push(m=[]),N=!0,S=!1,y=x=NaN}function U(){p&&(X(_,E),v&&S&&f.rejoin(),p.push(f.result())),T.point=I,S&&d.lineEnd()}function X(W,ne){var be=a(W,ne);if(h&&m.push([W,ne]),N)_=W,E=ne,v=be,N=!1,be&&(d.lineStart(),d.point(W,ne));else if(be&&S)d.point(W,ne);else{var q=[y=Math.max(rb,Math.min(N6,y)),x=Math.max(rb,Math.min(N6,x))],ie=[W=Math.max(rb,Math.min(N6,W)),ne=Math.max(rb,Math.min(N6,ne))];Fae(q,ie,t,e,n,i)?(S||(d.lineStart(),d.point(q[0],q[1])),d.point(ie[0],ie[1]),be||d.lineEnd(),w=!1):be&&(d.lineStart(),d.point(W,ne),w=!1)}y=W,x=ne,S=be}return T}}function kae(t,e,n){var i=Tn(t,e-nt,n).concat(e);return function(a){return i.map(function(o){return[a,o]})}}function Gae(t,e,n){var i=Tn(t,e-nt,n).concat(e);return function(a){return i.map(function(o){return[o,a]})}}function nb(){var t,e,n,i,a,o,s,l,c=10,u=c,d=90,f=360,p,h,m,_,E=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Tn(g6(i/d)*d,n,d).map(m).concat(Tn(g6(l/f)*f,s,f).map(_)).concat(Tn(g6(e/c)*c,t,c).filter(function(x){return It(x%d)>nt}).map(p)).concat(Tn(g6(o/u)*u,a,u).filter(function(x){return It(x%f)>nt}).map(h))}return v.lines=function(){return y().map(function(x){return{type:"LineString",coordinates:x}})},v.outline=function(){return{type:"Polygon",coordinates:[m(i).concat(_(s).slice(1),m(n).reverse().slice(1),_(l).reverse().slice(1))]}},v.extent=function(x){return arguments.length?v.extentMajor(x).extentMinor(x):v.extentMinor()},v.extentMajor=function(x){return arguments.length?(i=+x[0][0],n=+x[1][0],l=+x[0][1],s=+x[1][1],i>n&&(x=i,i=n,n=x),l>s&&(x=l,l=s,s=x),v.precision(E)):[[i,l],[n,s]]},v.extentMinor=function(x){return arguments.length?(e=+x[0][0],t=+x[1][0],o=+x[0][1],a=+x[1][1],e>t&&(x=e,e=t,t=x),o>a&&(x=o,o=a,a=x),v.precision(E)):[[e,o],[t,a]]},v.step=function(x){return arguments.length?v.stepMajor(x).stepMinor(x):v.stepMinor()},v.stepMajor=function(x){return arguments.length?(d=+x[0],f=+x[1],v):[d,f]},v.stepMinor=function(x){return arguments.length?(c=+x[0],u=+x[1],v):[c,u]},v.precision=function(x){return arguments.length?(E=+x,p=kae(o,a,90),h=Gae(e,t,E),m=kae(l,s,90),_=Gae(i,n,E),v):E},v.extentMajor([[-180,-90+nt],[180,90-nt]]).extentMinor([[-180,-80-nt],[180,80+nt]])}var Zd=t=>t;var bL=new Wr,SL=new Wr,Uae,Vae,NL,AL,Xd={point:$r,lineStart:$r,lineEnd:$r,polygonStart:function(){Xd.lineStart=gMe,Xd.lineEnd=EMe},polygonEnd:function(){Xd.lineStart=Xd.lineEnd=Xd.point=$r,bL.add(It(SL)),SL=new Wr},result:function(){var t=bL/2;return bL=new Wr,t}};function gMe(){Xd.point=_Me}function _Me(t,e){Xd.point=$ae,Uae=NL=t,Vae=AL=e}function $ae(t,e){SL.add(AL*t-NL*e),NL=t,AL=e}function EMe(){$ae(Uae,Vae)}var TL=Xd;var km=1/0,ib=km,T6=-km,ab=T6,vMe={point:yMe,lineStart:$r,lineEnd:$r,polygonStart:$r,polygonEnd:$r,result:function(){var t=[[km,ib],[T6,ab]];return T6=ab=-(ib=km=1/0),t}};function yMe(t,e){t<km&&(km=t),t>T6&&(T6=t),e<ib&&(ib=e),e>ab&&(ab=e)}var Gm=vMe;var CL=0,wL=0,C6=0,ob=0,sb=0,Um=0,IL=0,RL=0,w6=0,Hae,Wae,Wl,Zl,Hs={point:b1,lineStart:zae,lineEnd:jae,polygonStart:function(){Hs.lineStart=SMe,Hs.lineEnd=NMe},polygonEnd:function(){Hs.point=b1,Hs.lineStart=zae,Hs.lineEnd=jae},result:function(){var t=w6?[IL/w6,RL/w6]:Um?[ob/Um,sb/Um]:C6?[CL/C6,wL/C6]:[NaN,NaN];return CL=wL=C6=ob=sb=Um=IL=RL=w6=0,t}};function b1(t,e){CL+=t,wL+=e,++C6}function zae(){Hs.point=xMe}function xMe(t,e){Hs.point=bMe,b1(Wl=t,Zl=e)}function bMe(t,e){var n=t-Wl,i=e-Zl,a=Nr(n*n+i*i);ob+=a*(Wl+t)/2,sb+=a*(Zl+e)/2,Um+=a,b1(Wl=t,Zl=e)}function jae(){Hs.point=b1}function SMe(){Hs.point=AMe}function NMe(){Zae(Hae,Wae)}function AMe(t,e){Hs.point=Zae,b1(Hae=Wl=t,Wae=Zl=e)}function Zae(t,e){var n=t-Wl,i=e-Zl,a=Nr(n*n+i*i);ob+=a*(Wl+t)/2,sb+=a*(Zl+e)/2,Um+=a,a=Zl*t-Wl*e,IL+=a*(Wl+t),RL+=a*(Zl+e),w6+=a*3,b1(Wl=t,Zl=e)}var PL=Hs;function lb(t){this._context=t}lb.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Rn);break}}},result:$r};var LL=new Wr,ML,Xae,qae,I6,R6,cb={point:$r,lineStart:function(){cb.point=TMe},lineEnd:function(){ML&&Kae(Xae,qae),cb.point=$r},polygonStart:function(){ML=!0},polygonEnd:function(){ML=null},result:function(){var t=+LL;return LL=new Wr,t}};function TMe(t,e){cb.point=Kae,Xae=I6=t,qae=R6=e}function Kae(t,e){I6-=t,R6-=e,LL.add(Nr(I6*I6+R6*R6)),I6=t,R6=e}var OL=cb;var Yae,ub,Jae,Qae,Vm=class{constructor(e){this._append=e==null?eoe:CMe(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Jae||this._append!==ub){let i=this._radius,a=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Jae=i,ub=this._append,Qae=this._,this._=a}this._+=Qae;break}}}result(){let e=this._;return this._="",e.length?e:null}};function eoe(t){let e=1;this._+=t[0];for(let n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function CMe(t){let e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return eoe;if(e!==Yae){let n=10**e;Yae=e,ub=function(a){let o=1;this._+=a[0];for(let s=a.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+a[o]}}return ub}function db(t,e){let n=3,i=4.5,a,o;function s(l){return l&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),Wa(l,a(o))),o.result()}return s.area=function(l){return Wa(l,a(TL)),TL.result()},s.measure=function(l){return Wa(l,a(OL)),OL.result()},s.bounds=function(l){return Wa(l,a(Gm)),Gm.result()},s.centroid=function(l){return Wa(l,a(PL)),PL.result()},s.projection=function(l){return arguments.length?(a=l==null?(t=null,Zd):(t=l).stream,s):t},s.context=function(l){return arguments.length?(o=l==null?(e=null,new Vm(n)):new lb(e=l),typeof i!="function"&&o.pointRadius(i),s):e},s.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(o.pointRadius(+l),+l),s):i},s.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{let c=Math.floor(l);if(!(c>=0))throw new RangeError(`invalid digits: ${l}`);n=c}return e===null&&(o=new Vm(n)),s},s.projection(t).digits(n).context(e)}function S1(t){return function(e){var n=new BL;for(var i in t)n[i]=t[i];return n.stream=e,n}}function BL(){}BL.prototype={constructor:BL,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function DL(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Wa(n,t.stream(Gm)),e(Gm.result()),i!=null&&t.clipExtent(i),t}function N1(t,e,n){return DL(t,function(i){var a=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=Math.min(a/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+e[0][0]+(a-s*(i[1][0]+i[0][0]))/2,c=+e[0][1]+(o-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([l,c])},n)}function $m(t,e,n){return N1(t,[[0,0],e],n)}function zm(t,e,n){return DL(t,function(i){var a=+e,o=a/(i[1][0]-i[0][0]),s=(a-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];t.scale(150*o).translate([s,l])},n)}function jm(t,e,n){return DL(t,function(i){var a=+e,o=a/(i[1][1]-i[0][1]),s=-o*i[0][0],l=(a-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([s,l])},n)}var toe=16,wMe=rt(30*Pt);function FL(t,e){return+e?RMe(t,e):IMe(t)}function IMe(t){return S1({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function RMe(t,e){function n(i,a,o,s,l,c,u,d,f,p,h,m,_,E){var v=u-i,y=d-a,x=v*v+y*y;if(x>4*e&&_--){var S=s+p,N=l+h,w=c+m,T=Nr(S*S+N*N+w*w),I=Vr(w/=T),R=It(It(w)-1)<nt||It(o-f)<nt?(o+f)/2:hn(N,S),L=t(R,I),O=L[0],H=L[1],U=O-i,X=H-a,W=y*U-v*X;(W*W/x>e||It((v*U+y*X)/x-.5)>.3||s*p+l*h+c*m<wMe)&&(n(i,a,o,s,l,c,O,H,R,S/=T,N/=T,w,_,E),E.point(O,H),n(O,H,R,S,N,w,u,d,f,p,h,m,_,E))}}return function(i){var a,o,s,l,c,u,d,f,p,h,m,_,E={point:v,lineStart:y,lineEnd:S,polygonStart:function(){i.polygonStart(),E.lineStart=N},polygonEnd:function(){i.polygonEnd(),E.lineStart=y}};function v(I,R){I=t(I,R),i.point(I[0],I[1])}function y(){f=NaN,E.point=x,i.lineStart()}function x(I,R){var L=cs([I,R]),O=t(I,R);n(f,p,d,h,m,_,f=O[0],p=O[1],d=I,h=L[0],m=L[1],_=L[2],toe,i),i.point(f,p)}function S(){E.point=v,i.lineEnd()}function N(){y(),E.point=w,E.lineEnd=T}function w(I,R){x(a=I,R),o=f,s=p,l=h,c=m,u=_,E.point=x}function T(){n(f,p,d,h,m,_,o,s,a,l,c,u,toe,i),E.lineEnd=S,S()}return E}}var PMe=S1({point:function(t,e){this.stream.point(t*Pt,e*Pt)}});function MMe(t){return S1({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function LMe(t,e,n,i,a){function o(s,l){return s*=i,l*=a,[e+t*s,n-t*l]}return o.invert=function(s,l){return[(s-e)/t*i,(n-l)/t*a]},o}function roe(t,e,n,i,a,o){if(!o)return LMe(t,e,n,i,a);var s=rt(o),l=tt(o),c=s*t,u=l*t,d=s/t,f=l/t,p=(l*n-s*e)/t,h=(l*e+s*n)/t;function m(_,E){return _*=i,E*=a,[c*_-u*E+e,n-u*_-c*E]}return m.invert=function(_,E){return[i*(d*_-f*E+p),a*(h-f*_-d*E)]},m}function gn(t){return fb(function(){return t})()}function fb(t){var e,n=150,i=480,a=250,o=0,s=0,l=0,c=0,u=0,d,f=0,p=1,h=1,m=null,_=xL,E=null,v,y,x,S=Zd,N=.5,w,T,I,R,L;function O(W){return I(W[0]*Pt,W[1]*Pt)}function H(W){return W=I.invert(W[0],W[1]),W&&[W[0]*Sr,W[1]*Sr]}O.stream=function(W){return R&&L===W?R:R=PMe(MMe(d)(_(w(S(L=W)))))},O.preclip=function(W){return arguments.length?(_=W,m=void 0,X()):_},O.postclip=function(W){return arguments.length?(S=W,E=v=y=x=null,X()):S},O.clipAngle=function(W){return arguments.length?(_=+W?Dae(m=W*Pt):(m=null,xL),X()):m*Sr},O.clipExtent=function(W){return arguments.length?(S=W==null?(E=v=y=x=null,Zd):A6(E=+W[0][0],v=+W[0][1],y=+W[1][0],x=+W[1][1]),X()):E==null?null:[[E,v],[y,x]]},O.scale=function(W){return arguments.length?(n=+W,U()):n},O.translate=function(W){return arguments.length?(i=+W[0],a=+W[1],U()):[i,a]},O.center=function(W){return arguments.length?(o=W[0]%360*Pt,s=W[1]%360*Pt,U()):[o*Sr,s*Sr]},O.rotate=function(W){return arguments.length?(l=W[0]%360*Pt,c=W[1]%360*Pt,u=W.length>2?W[2]%360*Pt:0,U()):[l*Sr,c*Sr,u*Sr]},O.angle=function(W){return arguments.length?(f=W%360*Pt,U()):f*Sr},O.reflectX=function(W){return arguments.length?(p=W?-1:1,U()):p<0},O.reflectY=function(W){return arguments.length?(h=W?-1:1,U()):h<0},O.precision=function(W){return arguments.length?(w=FL(T,N=W*W),X()):Nr(N)},O.fitExtent=function(W,ne){return N1(O,W,ne)},O.fitSize=function(W,ne){return $m(O,W,ne)},O.fitWidth=function(W,ne){return zm(O,W,ne)},O.fitHeight=function(W,ne){return jm(O,W,ne)};function U(){var W=roe(n,0,0,p,h,f).apply(null,e(o,s)),ne=roe(n,i-W[0],a-W[1],p,h,f);return d=vL(l,c,u),T=S6(e,ne),I=S6(d,T),w=FL(T,N),X()}function X(){return R=L=null,O}return function(){return e=t.apply(this,arguments),O.invert=e.invert&&H,U()}}function Hm(t){var e=0,n=Dt/3,i=fb(t),a=i(e,n);return a.parallels=function(o){return arguments.length?i(e=o[0]*Pt,n=o[1]*Pt):[e*Sr,n*Sr]},a}function noe(t){var e=rt(t);function n(i,a){return[i*e,tt(a)/e]}return n.invert=function(i,a){return[i/e,Vr(a*e)]},n}function ioe(t,e){var n=tt(t),i=(n+tt(e))/2;if(It(i)<nt)return noe(t);var a=1+n*(2*i-n),o=Nr(a)/i;function s(l,c){var u=Nr(a-2*i*tt(c))/i;return[u*tt(l*=i),o-u*rt(l)]}return s.invert=function(l,c){var u=o-c,d=hn(l,It(u))*ta(u);return u*i<0&&(d-=Dt*ta(l)*ta(u)),[d/i,Vr((a-(l*l+u*u)*i*i)/(2*i))]},s}function qd(){return Hm(ioe).scale(155.424).center([0,33.6442])}function P6(){return qd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function OMe(t){var e=t.length;return{point:function(n,i){for(var a=-1;++a<e;)t[a].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function kL(){var t,e,n=P6(),i,a=qd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=qd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,c,u={point:function(p,h){c=[p,h]}};function d(p){var h=p[0],m=p[1];return c=null,i.point(h,m),c||(o.point(h,m),c)||(l.point(h,m),c)}d.invert=function(p){var h=n.scale(),m=n.translate(),_=(p[0]-m[0])/h,E=(p[1]-m[1])/h;return(E>=.12&&E<.234&&_>=-.425&&_<-.214?a:E>=.166&&E<.234&&_>=-.214&&_<-.115?s:n).invert(p)},d.stream=function(p){return t&&e===p?t:t=OMe([n.stream(e=p),a.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),a.precision(p),s.precision(p),f()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),a.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var h=n.scale(),m=+p[0],_=+p[1];return i=n.translate(p).clipExtent([[m-.455*h,_-.238*h],[m+.455*h,_+.238*h]]).stream(u),o=a.translate([m-.307*h,_+.201*h]).clipExtent([[m-.425*h+nt,_+.12*h+nt],[m-.214*h-nt,_+.234*h-nt]]).stream(u),l=s.translate([m-.205*h,_+.212*h]).clipExtent([[m-.214*h+nt,_+.166*h+nt],[m-.115*h-nt,_+.234*h-nt]]).stream(u),f()},d.fitExtent=function(p,h){return N1(d,p,h)},d.fitSize=function(p,h){return $m(d,p,h)},d.fitWidth=function(p,h){return zm(d,p,h)},d.fitHeight=function(p,h){return jm(d,p,h)};function f(){return t=e=null,d}return d.scale(1070)}function pb(t){return function(e,n){var i=rt(e),a=rt(n),o=t(i*a);return o===1/0?[2,0]:[o*a*tt(e),o*tt(n)]}}function Xl(t){return function(e,n){var i=Nr(e*e+n*n),a=t(i),o=tt(a),s=rt(a);return[hn(e*o,i*s),Vr(i&&n*o/i)]}}var GL=pb(function(t){return Nr(2/(1+t))});GL.invert=Xl(function(t){return 2*Vr(t/2)});function UL(){return gn(GL).scale(124.75).clipAngle(180-.001)}var VL=pb(function(t){return(t=Vx(t))&&t/tt(t)});VL.invert=Xl(function(t){return t});function $L(){return gn(VL).scale(79.4188).clipAngle(180-.001)}function Wm(t,e){return[t,E1(Bm((br+e)/2))]}Wm.invert=function(t,e){return[t,2*ls(kx(e))-br]};function zL(){return jL(Wm).scale(961/Rn)}function jL(t){var e=gn(t),n=e.center,i=e.scale,a=e.translate,o=e.clipExtent,s=null,l,c,u;e.scale=function(f){return arguments.length?(i(f),d()):i()},e.translate=function(f){return arguments.length?(a(f),d()):a()},e.center=function(f){return arguments.length?(n(f),d()):n()},e.clipExtent=function(f){return arguments.length?(f==null?s=l=c=u=null:(s=+f[0][0],l=+f[0][1],c=+f[1][0],u=+f[1][1]),d()):s==null?null:[[s,l],[c,u]]};function d(){var f=Dt*i(),p=e(Pae(e.rotate()).invert([0,0]));return o(s==null?[[p[0]-f,p[1]-f],[p[0]+f,p[1]+f]]:t===Wm?[[Math.max(p[0]-f,s),l],[Math.min(p[0]+f,c),u]]:[[s,Math.max(p[1]-f,l)],[c,Math.min(p[1]+f,u)]])}return d()}function hb(t){return Bm((br+t)/2)}function aoe(t,e){var n=rt(t),i=t===e?tt(t):E1(n/rt(e))/E1(hb(e)/hb(t)),a=n*Ux(hb(t),i)/i;if(!i)return Wm;function o(s,l){a>0?l<-br+nt&&(l=-br+nt):l>br-nt&&(l=br-nt);var c=a/Ux(hb(l),i);return[c*tt(i*s),a-c*rt(i*s)]}return o.invert=function(s,l){var c=a-l,u=ta(i)*Nr(s*s+c*c),d=hn(s,It(c))*ta(c);return c*i<0&&(d-=Dt*ta(s)*ta(c)),[d/i,2*ls(Ux(a/u,1/i))-br]},o}function HL(){return Hm(aoe).scale(109.5).parallels([30,30])}function Zm(t,e){return[t,e]}Zm.invert=Zm;function WL(){return gn(Zm).scale(152.63)}function ooe(t,e){var n=rt(t),i=t===e?tt(t):(n-rt(e))/(e-t),a=n/i+t;if(It(i)<nt)return Zm;function o(s,l){var c=a-l,u=i*s;return[c*tt(u),a-c*rt(u)]}return o.invert=function(s,l){var c=a-l,u=hn(s,It(c))*ta(c);return c*i<0&&(u-=Dt*ta(s)*ta(c)),[u/i,a-ta(i)*Nr(s*s+c*c)]},o}function ZL(){return Hm(ooe).scale(131.154).center([0,13.9389])}var M6=1.340264,L6=-.081106,O6=893e-6,B6=.003796,mb=Nr(3)/2,BMe=12;function XL(t,e){var n=Vr(mb*tt(e)),i=n*n,a=i*i*i;return[t*rt(n)/(mb*(M6+3*L6*i+a*(7*O6+9*B6*i))),n*(M6+L6*i+a*(O6+B6*i))]}XL.invert=function(t,e){for(var n=e,i=n*n,a=i*i*i,o=0,s,l,c;o<BMe&&(l=n*(M6+L6*i+a*(O6+B6*i))-e,c=M6+3*L6*i+a*(7*O6+9*B6*i),n-=s=l/c,i=n*n,a=i*i*i,!(It(s)<_1));++o);return[mb*t*(M6+3*L6*i+a*(7*O6+9*B6*i))/rt(n),Vr(tt(n)/mb)]};function qL(){return gn(XL).scale(177.158)}function KL(t,e){var n=rt(e),i=rt(t)*n;return[n*tt(t)/i,tt(e)/i]}KL.invert=Xl(ls);function YL(){return gn(KL).scale(144.049).clipAngle(60)}function JL(){var t=1,e=0,n=0,i=1,a=1,o=0,s,l,c=null,u,d,f,p=1,h=1,m=S1({point:function(S,N){var w=x([S,N]);this.stream.point(w[0],w[1])}}),_=Zd,E,v;function y(){return p=t*i,h=t*a,E=v=null,x}function x(S){var N=S[0]*p,w=S[1]*h;if(o){var T=w*s-N*l;N=N*s+w*l,w=T}return[N+e,w+n]}return x.invert=function(S){var N=S[0]-e,w=S[1]-n;if(o){var T=w*s+N*l;N=N*s-w*l,w=T}return[N/p,w/h]},x.stream=function(S){return E&&v===S?E:E=m(_(v=S))},x.postclip=function(S){return arguments.length?(_=S,c=u=d=f=null,y()):_},x.clipExtent=function(S){return arguments.length?(_=S==null?(c=u=d=f=null,Zd):A6(c=+S[0][0],u=+S[0][1],d=+S[1][0],f=+S[1][1]),y()):c==null?null:[[c,u],[d,f]]},x.scale=function(S){return arguments.length?(t=+S,y()):t},x.translate=function(S){return arguments.length?(e=+S[0],n=+S[1],y()):[e,n]},x.angle=function(S){return arguments.length?(o=S%360*Pt,l=tt(o),s=rt(o),y()):o*Sr},x.reflectX=function(S){return arguments.length?(i=S?-1:1,y()):i<0},x.reflectY=function(S){return arguments.length?(a=S?-1:1,y()):a<0},x.fitExtent=function(S,N){return N1(x,S,N)},x.fitSize=function(S,N){return $m(x,S,N)},x.fitWidth=function(S,N){return zm(x,S,N)},x.fitHeight=function(S,N){return jm(x,S,N)},x}function QL(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}QL.invert=function(t,e){var n=e,i=25,a;do{var o=n*n,s=o*o;n-=a=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-e)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(It(a)>nt&&--i>0);return[t/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function eO(){return gn(QL).scale(175.295)}function tO(t,e){return[rt(e)*tt(t),tt(e)]}tO.invert=Xl(Vr);function rO(){return gn(tO).scale(249.5).clipAngle(90+nt)}function nO(t,e){var n=rt(e),i=1+rt(t)*n;return[n*tt(t)/i,tt(e)/i]}nO.invert=Xl(function(t){return 2*ls(t)});function iO(){return gn(nO).scale(250).clipAngle(142)}function aO(t,e){return[E1(Bm((br+e)/2)),-t]}aO.invert=function(t,e){return[-e,2*ls(kx(t))-br]};function oO(){var t=jL(aO),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var soe=Math.abs;var _b=Math.cos;var D6=Math.sin;var loe=1e-6;var Kd=Math.PI,gb=Kd/2,Xwt=Kd/4;var sO=coe(2),qwt=coe(Kd),Kwt=Kd*2,Ywt=180/Kd,Jwt=Kd/180;function lO(t){return t>1?gb:t<-1?-gb:Math.asin(t)}function coe(t){return t>0?Math.sqrt(t):0}function DMe(t,e){var n=t*D6(e),i=30,a;do e-=a=(e+D6(e)-n)/(1+_b(e));while(soe(a)>loe&&--i>0);return e/2}function FMe(t,e,n){function i(a,o){return[t*a*_b(o=DMe(n,o)),e*D6(o)]}return i.invert=function(a,o){return o=lO(o/e),[a/(t*_b(o)),lO((2*o+D6(2*o))/n)]},i}var uoe=FMe(sO/gb,sO,Kd);function cO(){return gn(uoe).scale(169.529)}var kMe=db(),vb=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function GMe(t,e){return function n(){let i=e();return i.type=t,i.path=db().projection(i),i.copy=i.copy||function(){let a=n();return vb.forEach(o=>{i[o]&&a[o](i[o]())}),a.path.pointRadius(i.path.pointRadius()),a},ZP(i)}}function yb(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Eb[t]=GMe(t,e),this):Eb[t]||null}function uO(t){return t&&t.path||kMe}var Eb={albers:P6,albersusa:kL,azimuthalequalarea:UL,azimuthalequidistant:$L,conicconformal:HL,conicequalarea:qd,conicequidistant:ZL,equalEarth:qL,equirectangular:WL,gnomonic:YL,identity:JL,mercator:zL,mollweide:cO,naturalEarth1:eO,orthographic:rO,stereographic:iO,transversemercator:oO};for(let t in Eb)yb(t,Eb[t]);function UMe(){}var ru=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function poe(){var t=1,e=1,n=l;function i(c,u){return u.map(d=>a(c,d))}function a(c,u){var d=[],f=[];return o(c,u,p=>{n(p,c,u),VMe(p)>0?d.push([p]):f.push(p)}),f.forEach(p=>{for(var h=0,m=d.length,_;h<m;++h)if($Me((_=d[h])[0],p)!==-1){_.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function o(c,u,d){var f=[],p=[],h,m,_,E,v,y;for(h=m=-1,E=c[0]>=u,ru[E<<1].forEach(x);++h<t-1;)_=E,E=c[h+1]>=u,ru[_|E<<1].forEach(x);for(ru[E<<0].forEach(x);++m<e-1;){for(h=-1,E=c[m*t+t]>=u,v=c[m*t]>=u,ru[E<<1|v<<2].forEach(x);++h<t-1;)_=E,E=c[m*t+t+h+1]>=u,y=v,v=c[m*t+h+1]>=u,ru[_|E<<1|v<<2|y<<3].forEach(x);ru[E|v<<3].forEach(x)}for(h=-1,v=c[m*t]>=u,ru[v<<2].forEach(x);++h<t-1;)y=v,v=c[m*t+h+1]>=u,ru[v<<2|y<<3].forEach(x);ru[v<<3].forEach(x);function x(S){var N=[S[0][0]+h,S[0][1]+m],w=[S[1][0]+h,S[1][1]+m],T=s(N),I=s(w),R,L;(R=p[T])?(L=f[I])?(delete p[R.end],delete f[L.start],R===L?(R.ring.push(w),d(R.ring)):f[R.start]=p[L.end]={start:R.start,end:L.end,ring:R.ring.concat(L.ring)}):(delete p[R.end],R.ring.push(w),p[R.end=I]=R):(R=f[I])?(L=p[T])?(delete f[R.start],delete p[L.end],R===L?(R.ring.push(w),d(R.ring)):f[L.start]=p[R.end]={start:L.start,end:R.end,ring:L.ring.concat(R.ring)}):(delete f[R.start],R.ring.unshift(N),f[R.start=T]=R):f[T]=p[I]={start:T,end:I,ring:[N,w]}}}function s(c){return c[0]*2+c[1]*(t+1)*4}function l(c,u,d){c.forEach(f=>{var p=f[0],h=f[1],m=p|0,_=h|0,E,v=u[_*t+m];p>0&&p<t&&m===p&&(E=u[_*t+m-1],f[0]=p+(d-E)/(v-E)-.5),h>0&&h<e&&_===h&&(E=u[(_-1)*t+m],f[1]=h+(d-E)/(v-E)-.5)})}return i.contour=a,i.size=function(c){if(!arguments.length)return[t,e];var u=Math.floor(c[0]),d=Math.floor(c[1]);return u>=0&&d>=0||he("invalid size"),t=u,e=d,i},i.smooth=function(c){return arguments.length?(n=c?l:UMe,i):n===l},i}function VMe(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function $Me(t,e){for(var n=-1,i=e.length,a;++n<i;)if(a=zMe(t,e[n]))return a;return 0}function zMe(t,e){for(var n=e[0],i=e[1],a=-1,o=0,s=t.length,l=s-1;o<s;l=o++){var c=t[o],u=c[0],d=c[1],f=t[l],p=f[0],h=f[1];if(jMe(c,f,e))return 0;d>i!=h>i&&n<(p-u)*(i-d)/(h-d)+u&&(a=-a)}return a}function jMe(t,e,n){var i;return HMe(t,e,n)&&WMe(t[i=+(t[0]===e[0])],n[i],e[i])}function HMe(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function WMe(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function hoe(t,e,n){return function(i){var a=Fa(i),o=n?Math.min(a[0],0):a[0],s=a[1],l=s-o,c=e?ma(o,s,t):l/(t+1);return Tn(o+c,s,c)}}function pO(t){pe.call(this,null,t)}pO.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ze(pO,pe,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,a=t.field||Jn,o=poe().smooth(t.smooth!==!1),s=t.thresholds||ZMe(i,a,t),l=t.as===null?null:t.as||"contour",c=[];return i.forEach(u=>{let d=a(u),f=o.size([d.width,d.height])(d.values,ot(s)?s:s(d.values));XMe(f,d,u,t),f.forEach(p=>{c.push(Hp(u,Jt(l!=null?{[l]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function ZMe(t,e,n){let i=hoe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(t.map(a=>Zo(e(a).values)))}function XMe(t,e,n,i){let a=i.scale||e.scale,o=i.translate||e.translate;if(wt(a)&&(a=a(n,i)),wt(o)&&(o=o(n,i)),(a===1||a==null)&&!o)return;let s=(Oc(a)?a:a[0])||1,l=(Oc(a)?a:a[1])||1,c=o&&o[0]||0,u=o&&o[1]||0;t.forEach(moe(e,s,l,c,u))}function moe(t,e,n,i,a){let o=t.x1||0,s=t.y1||0,l=e*n<0;function c(f){f.forEach(u)}function u(f){l&&f.reverse(),f.forEach(d)}function d(f){f[0]=(f[0]-o)*e+i,f[1]=(f[1]-s)*n+a}return function(f){return f.coordinates.forEach(c),f}}function doe(t,e,n){let i=t>=0?t:UI(e,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function dO(t){return wt(t)?t:en(+t)}function goe(){var t=c=>c[0],e=c=>c[1],n=Lc,i=[-1,-1],a=960,o=500,s=2;function l(c,u){let d=doe(i[0],c,t)>>s,f=doe(i[1],c,e)>>s,p=d?d+2:0,h=f?f+2:0,m=2*p+(a>>s),_=2*h+(o>>s),E=new Float32Array(m*_),v=new Float32Array(m*_),y=E;c.forEach(S=>{let N=p+(+t(S)>>s),w=h+(+e(S)>>s);N>=0&&N<m&&w>=0&&w<_&&(E[N+w*m]+=+n(S))}),d>0&&f>0?(Xm(m,_,E,v,d),qm(m,_,v,E,f),Xm(m,_,E,v,d),qm(m,_,v,E,f),Xm(m,_,E,v,d),qm(m,_,v,E,f)):d>0?(Xm(m,_,E,v,d),Xm(m,_,v,E,d),Xm(m,_,E,v,d),y=v):f>0&&(qm(m,_,E,v,f),qm(m,_,v,E,f),qm(m,_,E,v,f),y=v);let x=u?Math.pow(2,-2*s):1/F0(y);for(let S=0,N=m*_;S<N;++S)y[S]*=x;return{values:y,scale:1<<s,width:m,height:_,x1:p,y1:h,x2:p+(a>>s),y2:h+(o>>s)}}return l.x=function(c){return arguments.length?(t=dO(c),l):t},l.y=function(c){return arguments.length?(e=dO(c),l):e},l.weight=function(c){return arguments.length?(n=dO(c),l):n},l.size=function(c){if(!arguments.length)return[a,o];var u=+c[0],d=+c[1];return u>=0&&d>=0||he("invalid size"),a=u,o=d,l},l.cellSize=function(c){return arguments.length?((c=+c)>=1||he("invalid cell size"),s=Math.floor(Math.log(c)/Math.LN2),l):1<<s},l.bandwidth=function(c){return arguments.length?(c=st(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&he("invalid bandwidth"),i=c,l):i},l}function Xm(t,e,n,i,a){let o=(a<<1)+1;for(let s=0;s<e;++s)for(let l=0,c=0;l<t+a;++l)l<t&&(c+=n[l+s*t]),l>=a&&(l>=o&&(c-=n[l-o+s*t]),i[l-a+s*t]=c/Math.min(l+1,t-1+o-l,o))}function qm(t,e,n,i,a){let o=(a<<1)+1;for(let s=0;s<t;++s)for(let l=0,c=0;l<e+a;++l)l<e&&(c+=n[s+l*t]),l>=a&&(l>=o&&(c-=n[s+(l-o)*t]),i[s+(l-a)*t]=c/Math.min(l+1,e-1+o-l,o))}function hO(t){pe.call(this,null,t)}hO.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var qMe=["x","y","weight","size","cellSize","bandwidth"];function _oe(t,e){return qMe.forEach(n=>e[n]!=null?t[n](e[n]):0),t}ze(hO,pe,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,a=KMe(i,t.groupby),o=(t.groupby||[]).map(Hr),s=_oe(goe(),t),l=t.as||"grid",c=[];function u(d,f){for(let p=0;p<o.length;++p)d[o[p]]=f[p];return d}return c=a.map(d=>Jt(u({[l]:s(d,t.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function KMe(t,e){var n=[],i=d=>d(l),a,o,s,l,c,u;if(e==null)n.push(t);else for(a={},o=0,s=t.length;o<s;++o)l=t[o],c=e.map(i),u=a[c],u||(a[c]=u=[],u.dims=c,n.push(u)),u.push(l);return n}function mO(t){pe.call(this,null,t)}mO.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ze(mO,pe,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=poe().smooth(t.smooth!==!1),a=t.values,o=t.thresholds||hoe(t.count||10,t.nice,!!a),s=t.size,l,c;return a||(a=e.materialize(e.SOURCE).source,l=_oe(goe(),t)(a,!0),c=moe(l,l.scale||1,l.scale||1,0,0),s=[l.width,l.height],a=l.values),o=ot(o)?o:o(a),a=i.size(s)(a,o),c&&a.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(a||[]).map(Jt),n}});var fO="Feature",gO="FeatureCollection",YMe="MultiPoint";function _O(t){pe.call(this,null,t)}_O.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ze(_O,pe,{transform(t,e){var n=this._features,i=this._points,a=t.fields,o=a&&a[0],s=a&&a[1],l=t.geojson||!a&&Jn,c=e.ADD,u;u=t.modified()||e.changed(e.REM)||e.modified(fi(l))||o&&e.modified(fi(o))||s&&e.modified(fi(s)),(!this.value||u)&&(c=e.SOURCE,this._features=n=[],this._points=i=[]),l&&e.visit(c,d=>n.push(l(d))),o&&s&&(e.visit(c,d=>{var f=o(d),p=s(d);f!=null&&p!=null&&(f=+f)===f&&(p=+p)===p&&i.push([f,p])}),n=n.concat({type:fO,geometry:{type:YMe,coordinates:i}})),this.value={type:gO,features:n}}});function EO(t){pe.call(this,null,t)}EO.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ze(EO,pe,{transform(t,e){var n=e.fork(e.ALL),i=this.value,a=t.field||Jn,o=t.as||"path",s=n.SOURCE;!i||t.modified()?(this.value=i=uO(t.projection),n.materialize().reflow()):s=a===Jn||e.modified(a.fields)?n.ADD_MOD:n.ADD;let l=JMe(i,t.pointRadius);return n.visit(s,c=>c[o]=i(a(c))),i.pointRadius(l),n.modifies(o)}});function JMe(t,e){let n=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),n}function vO(t){pe.call(this,null,t)}vO.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ze(vO,pe,{transform(t,e){var n=t.projection,i=t.fields[0],a=t.fields[1],o=t.as||["x","y"],s=o[0],l=o[1],c;function u(d){let f=n([i(d),a(d)]);f?(d[s]=f[0],d[l]=f[1]):(d[s]=void 0,d[l]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(c=e.modified(i.fields)||e.modified(a.fields),e.visit(c?e.ADD_MOD:e.ADD,u)),e.modifies(o)}});function yO(t){pe.call(this,null,t)}yO.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ze(yO,pe,{transform(t,e){var n=e.fork(e.ALL),i=this.value,a=t.as||"shape",o=n.ADD;return(!i||t.modified())&&(this.value=i=QMe(uO(t.projection),t.field||Mi("datum"),t.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[a]=i),n.modifies(a)}});function QMe(t,e,n){let i=n==null?a=>t(e(a)):a=>{var o=t.pointRadius(),s=t.pointRadius(n)(e(a));return t.pointRadius(o),s};return i.context=a=>(t.context(a),i),i}function xO(t){pe.call(this,[],t),this.generator=nb()}xO.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ze(xO,pe,{transform(t,e){var n=this.value,i=this.generator,a;if(!n.length||t.modified())for(let o in t)wt(i[o])&&i[o](t[o]);return a=i(),n.length?e.mod.push(Hy(n[0],a)):e.add.push(Jt(a)),n[0]=a,e}});function bO(t){pe.call(this,null,t)}bO.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ze(bO,pe,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,i=t.resolve==="shared",a=t.field||Jn,o=tLe(t.opacity,t),s=eLe(t.color,t),l=t.as||"image",c={$x:0,$y:0,$value:0,$max:i?Zo(n.map(u=>Zo(a(u).values))):0};return n.forEach(u=>{let d=a(u),f=St({},u,c);i||(f.$max=Zo(d.values||[])),u[l]=rLe(d,f,s.dep?s:en(s(f)),o.dep?o:en(o(f)))}),e.reflow(!0).modifies(l)}});function eLe(t,e){let n;return wt(t)?(n=i=>ja(t(i,e)),n.dep=Eoe(t)):n=en(ja(t||"#888")),n}function tLe(t,e){let n;return wt(t)?(n=i=>t(i,e),n.dep=Eoe(t)):t?n=en(t):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function Eoe(t){if(!wt(t))return!1;let e=hi(fi(t));return e.$x||e.$y||e.$value||e.$max}function rLe(t,e,n,i){let a=t.width,o=t.height,s=t.x1||0,l=t.y1||0,c=t.x2||a,u=t.y2||o,d=t.values,f=d?E=>d[E]:wl,p=is(c-s,u-l),h=p.getContext("2d"),m=h.getImageData(0,0,c-s,u-l),_=m.data;for(let E=l,v=0;E<u;++E){e.$y=E-l;for(let y=s,x=E*a;y<c;++y,v+=4){e.$x=y-s,e.$value=f(y+x);let S=n(e);_[v+0]=S.r,_[v+1]=S.g,_[v+2]=S.b,_[v+3]=~~(255*i(e))}}return h.putImageData(m,0,0),p}function voe(t){pe.call(this,null,t),this.modified(!0)}ze(voe,pe,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=iLe(t.type),vb.forEach(i=>{t[i]!=null&&foe(n,i,t[i])})):vb.forEach(i=>{t.modified(i)&&foe(n,i,t[i])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&nLe(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function nLe(t,e){let n=aLe(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function iLe(t){let e=yb((t||"mercator").toLowerCase());return e||he("Unrecognized projection type: "+t),e()}function foe(t,e,n){wt(t[e])&&t[e](n)}function aLe(t){return t=st(t),t.length===1?t[0]:{type:gO,features:t.reduce((e,n)=>e.concat(oLe(n)),[])}}function oLe(t){return t.type===gO?t.features:st(t).filter(e=>e!=null).map(e=>e.type===fO?e:{type:fO,geometry:e})}var FO={};mr(FO,{force:()=>DO});function NO(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function a(){var o,s=n.length,l,c=0,u=0;for(o=0;o<s;++o)l=n[o],c+=l.x,u+=l.y;for(c=(c/s-t)*i,u=(u/s-e)*i,o=0;o<s;++o)l=n[o],l.x-=c,l.y-=u}return a.initialize=function(o){n=o},a.x=function(o){return arguments.length?(t=+o,a):t},a.y=function(o){return arguments.length?(e=+o,a):e},a.strength=function(o){return arguments.length?(i=+o,a):i},a}function yoe(t){let e=+this._x.call(null,t),n=+this._y.call(null,t);return xoe(this.cover(e,n),e,n,t)}function xoe(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var a,o=t._root,s={data:i},l=t._x0,c=t._y0,u=t._x1,d=t._y1,f,p,h,m,_,E,v,y;if(!o)return t._root=s,t;for(;o.length;)if((_=e>=(f=(l+u)/2))?l=f:u=f,(E=n>=(p=(c+d)/2))?c=p:d=p,a=o,!(o=o[v=E<<1|_]))return a[v]=s,t;if(h=+t._x.call(null,o.data),m=+t._y.call(null,o.data),e===h&&n===m)return s.next=o,a?a[v]=s:t._root=s,t;do a=a?a[v]=new Array(4):t._root=new Array(4),(_=e>=(f=(l+u)/2))?l=f:u=f,(E=n>=(p=(c+d)/2))?c=p:d=p;while((v=E<<1|_)===(y=(m>=p)<<1|h>=f));return a[y]=o,a[v]=s,t}function boe(t){var e,n,i=t.length,a,o,s=new Array(i),l=new Array(i),c=1/0,u=1/0,d=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(a=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=a,l[n]=o,a<c&&(c=a),a>d&&(d=a),o<u&&(u=o),o>f&&(f=o));if(c>d||u>f)return this;for(this.cover(c,u).cover(d,f),n=0;n<i;++n)xoe(this,s[n],l[n],t[n]);return this}function Soe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,a=this._x1,o=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var s=a-n||1,l=this._root,c,u;n>t||t>=a||i>e||e>=o;)switch(u=(e<i)<<1|t<n,c=new Array(4),c[u]=l,l=c,s*=2,u){case 0:a=n+s,o=i+s;break;case 1:n=a-s,o=i+s;break;case 2:a=n+s,i=o-s;break;case 3:n=a-s,i=o-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=a,this._y1=o,this}function Noe(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Aoe(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function xi(t,e,n,i,a){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=a}function Toe(t,e,n){var i,a=this._x0,o=this._y0,s,l,c,u,d=this._x1,f=this._y1,p=[],h=this._root,m,_;for(h&&p.push(new xi(h,a,o,d,f)),n==null?n=1/0:(a=t-n,o=e-n,d=t+n,f=e+n,n*=n);m=p.pop();)if(!(!(h=m.node)||(s=m.x0)>d||(l=m.y0)>f||(c=m.x1)<a||(u=m.y1)<o))if(h.length){var E=(s+c)/2,v=(l+u)/2;p.push(new xi(h[3],E,v,c,u),new xi(h[2],s,v,E,u),new xi(h[1],E,l,c,v),new xi(h[0],s,l,E,v)),(_=(e>=v)<<1|t>=E)&&(m=p[p.length-1],p[p.length-1]=p[p.length-1-_],p[p.length-1-_]=m)}else{var y=t-+this._x.call(null,h.data),x=e-+this._y.call(null,h.data),S=y*y+x*x;if(S<n){var N=Math.sqrt(n=S);a=t-N,o=e-N,d=t+N,f=e+N,i=h.data}}return i}function Coe(t){if(isNaN(d=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,i,a,o,s=this._x0,l=this._y0,c=this._x1,u=this._y1,d,f,p,h,m,_,E,v;if(!n)return this;if(n.length)for(;;){if((m=d>=(p=(s+c)/2))?s=p:c=p,(_=f>=(h=(l+u)/2))?l=h:u=h,e=n,!(n=n[E=_<<1|m]))return this;if(!n.length)break;(e[E+1&3]||e[E+2&3]||e[E+3&3])&&(i=e,v=E)}for(;n.data!==t;)if(a=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,a?(o?a.next=o:delete a.next,this):e?(o?e[E]=o:delete e[E],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[v]=n:this._root=n),this):(this._root=o,this)}function woe(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Ioe(){return this._root}function Roe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Poe(t){var e=[],n,i=this._root,a,o,s,l,c;for(i&&e.push(new xi(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,o=n.x0,s=n.y0,l=n.x1,c=n.y1)&&i.length){var u=(o+l)/2,d=(s+c)/2;(a=i[3])&&e.push(new xi(a,u,d,l,c)),(a=i[2])&&e.push(new xi(a,o,d,u,c)),(a=i[1])&&e.push(new xi(a,u,s,l,d)),(a=i[0])&&e.push(new xi(a,o,s,u,d))}return this}function Moe(t){var e=[],n=[],i;for(this._root&&e.push(new xi(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var a=i.node;if(a.length){var o,s=i.x0,l=i.y0,c=i.x1,u=i.y1,d=(s+c)/2,f=(l+u)/2;(o=a[0])&&e.push(new xi(o,s,l,d,f)),(o=a[1])&&e.push(new xi(o,d,l,c,f)),(o=a[2])&&e.push(new xi(o,s,f,d,u)),(o=a[3])&&e.push(new xi(o,d,f,c,u))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Loe(t){return t[0]}function Ooe(t){return arguments.length?(this._x=t,this):this._x}function Boe(t){return t[1]}function Doe(t){return arguments.length?(this._y=t,this):this._y}function A1(t,e,n){var i=new AO(e==null?Loe:e,n==null?Boe:n,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function AO(t,e,n,i,a,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=a,this._y1=o,this._root=void 0}function Foe(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Sa=A1.prototype=AO.prototype;Sa.copy=function(){var t=new AO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=Foe(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var a=0;a<4;++a)(i=e.source[a])&&(i.length?n.push({source:i,target:e.target[a]=new Array(4)}):e.target[a]=Foe(i));return t};Sa.add=yoe;Sa.addAll=boe;Sa.cover=Soe;Sa.data=Noe;Sa.extent=Aoe;Sa.find=Toe;Sa.remove=Coe;Sa.removeAll=woe;Sa.root=Ioe;Sa.size=Roe;Sa.visit=Poe;Sa.visitAfter=Moe;Sa.x=Ooe;Sa.y=Doe;function zn(t){return function(){return t}}function Ws(t){return(t()-.5)*1e-6}function sLe(t){return t.x+t.vx}function lLe(t){return t.y+t.vy}function TO(t){var e,n,i,a=1,o=1;typeof t!="function"&&(t=zn(t==null?1:+t));function s(){for(var u,d=e.length,f,p,h,m,_,E,v=0;v<o;++v)for(f=A1(e,sLe,lLe).visitAfter(l),u=0;u<d;++u)p=e[u],_=n[p.index],E=_*_,h=p.x+p.vx,m=p.y+p.vy,f.visit(y);function y(x,S,N,w,T){var I=x.data,R=x.r,L=_+R;if(I){if(I.index>p.index){var O=h-I.x-I.vx,H=m-I.y-I.vy,U=O*O+H*H;U<L*L&&(O===0&&(O=Ws(i),U+=O*O),H===0&&(H=Ws(i),U+=H*H),U=(L-(U=Math.sqrt(U)))/U*a,p.vx+=(O*=U)*(L=(R*=R)/(E+R)),p.vy+=(H*=U)*L,I.vx-=O*(L=1-L),I.vy-=H*L)}return}return S>h+L||w<h-L||N>m+L||T<m-L}}function l(u){if(u.data)return u.r=n[u.data.index];for(var d=u.r=0;d<4;++d)u[d]&&u[d].r>u.r&&(u.r=u[d].r)}function c(){if(e){var u,d=e.length,f;for(n=new Array(d),u=0;u<d;++u)f=e[u],n[f.index]=+t(f,u,e)}}return s.initialize=function(u,d){e=u,i=d,c()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(a=+u,s):a},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:zn(+u),c(),s):t},s}function cLe(t){return t.index}function koe(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function CO(t){var e=cLe,n=f,i,a=zn(30),o,s,l,c,u,d=1;t==null&&(t=[]);function f(E){return 1/Math.min(l[E.source.index],l[E.target.index])}function p(E){for(var v=0,y=t.length;v<d;++v)for(var x=0,S,N,w,T,I,R,L;x<y;++x)S=t[x],N=S.source,w=S.target,T=w.x+w.vx-N.x-N.vx||Ws(u),I=w.y+w.vy-N.y-N.vy||Ws(u),R=Math.sqrt(T*T+I*I),R=(R-o[x])/R*E*i[x],T*=R,I*=R,w.vx-=T*(L=c[x]),w.vy-=I*L,N.vx+=T*(L=1-L),N.vy+=I*L}function h(){if(s){var E,v=s.length,y=t.length,x=new Map(s.map((N,w)=>[e(N,w,s),N])),S;for(E=0,l=new Array(v);E<y;++E)S=t[E],S.index=E,typeof S.source!="object"&&(S.source=koe(x,S.source)),typeof S.target!="object"&&(S.target=koe(x,S.target)),l[S.source.index]=(l[S.source.index]||0)+1,l[S.target.index]=(l[S.target.index]||0)+1;for(E=0,c=new Array(y);E<y;++E)S=t[E],c[E]=l[S.source.index]/(l[S.source.index]+l[S.target.index]);i=new Array(y),m(),o=new Array(y),_()}}function m(){if(s)for(var E=0,v=t.length;E<v;++E)i[E]=+n(t[E],E,t)}function _(){if(s)for(var E=0,v=t.length;E<v;++E)o[E]=+a(t[E],E,t)}return p.initialize=function(E,v){s=E,u=v,h()},p.links=function(E){return arguments.length?(t=E,h(),p):t},p.id=function(E){return arguments.length?(e=E,p):e},p.iterations=function(E){return arguments.length?(d=+E,p):d},p.strength=function(E){return arguments.length?(n=typeof E=="function"?E:zn(+E),m(),p):n},p.distance=function(E){return arguments.length?(a=typeof E=="function"?E:zn(+E),_(),p):a},p}var uLe={value:()=>{}};function Uoe(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new xb(n)}function xb(t){this._=t}function dLe(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}xb.prototype=Uoe.prototype={constructor:xb,on:function(t,e){var n=this._,i=dLe(t+"",n),a,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((a=(t=i[o]).type)&&(a=fLe(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(a=(t=i[o]).type)n[a]=Goe(n[a],t.name,e);else if(e==null)for(a in n)n[a]=Goe(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new xb(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,o;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,a=o.length;i<a;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,o=i.length;a<o;++a)i[a].value.apply(e,n)}};function fLe(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function Goe(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=uLe,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var wO=Uoe;var Km=0,k6=0,F6=0,$oe=1e3,bb,G6,Sb=0,T1=0,Nb=0,U6=typeof performance=="object"&&performance.now?performance:Date,zoe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $6(){return T1||(zoe(pLe),T1=U6.now()+Nb)}function pLe(){T1=0}function V6(){this._call=this._time=this._next=null}V6.prototype=Ab.prototype={constructor:V6,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?$6():+n)+(e==null?0:+e),!this._next&&G6!==this&&(G6?G6._next=this:bb=this,G6=this),this._call=t,this._time=n,IO()},stop:function(){this._call&&(this._call=null,this._time=1/0,IO())}};function Ab(t,e,n){var i=new V6;return i.restart(t,e,n),i}function joe(){$6(),++Km;for(var t=bb,e;t;)(e=T1-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Km}function Voe(){T1=(Sb=U6.now())+Nb,Km=k6=0;try{joe()}finally{Km=0,mLe(),T1=0}}function hLe(){var t=U6.now(),e=t-Sb;e>$oe&&(Nb-=e,Sb=t)}function mLe(){for(var t,e=bb,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:bb=n);G6=t,IO(i)}function IO(t){if(!Km){k6&&(k6=clearTimeout(k6));var e=t-T1;e>24?(t<1/0&&(k6=setTimeout(Voe,t-U6.now()-Nb)),F6&&(F6=clearInterval(F6))):(F6||(Sb=U6.now(),F6=setInterval(hLe,$oe)),Km=1,zoe(Voe))}}function RO(t,e,n){var i=new V6,a=e;return e==null?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(o,s,l){s=+s,l=l==null?$6():+l,i._restart(function c(u){u+=a,i._restart(c,a+=s,l),o(u)},s,l)},i.restart(t,e,n),i)}function Hoe(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function Woe(t){return t.x}function Zoe(t){return t.y}var gLe=10,_Le=Math.PI*(3-Math.sqrt(5));function PO(t){var e,n=1,i=.001,a=1-Math.pow(i,1/300),o=0,s=.6,l=new Map,c=Ab(f),u=wO("tick","end"),d=Hoe();t==null&&(t=[]);function f(){p(),u.call("tick",e),n<i&&(c.stop(),u.call("end",e))}function p(_){var E,v=t.length,y;_===void 0&&(_=1);for(var x=0;x<_;++x)for(n+=(o-n)*a,l.forEach(function(S){S(n)}),E=0;E<v;++E)y=t[E],y.fx==null?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return e}function h(){for(var _=0,E=t.length,v;_<E;++_){if(v=t[_],v.index=_,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var y=gLe*Math.sqrt(.5+_),x=_*_Le;v.x=y*Math.cos(x),v.y=y*Math.sin(x)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function m(_){return _.initialize&&_.initialize(t,d),_}return h(),e={tick:p,restart:function(){return c.restart(f),e},stop:function(){return c.stop(),e},nodes:function(_){return arguments.length?(t=_,h(),l.forEach(m),e):t},alpha:function(_){return arguments.length?(n=+_,e):n},alphaMin:function(_){return arguments.length?(i=+_,e):i},alphaDecay:function(_){return arguments.length?(a=+_,e):+a},alphaTarget:function(_){return arguments.length?(o=+_,e):o},velocityDecay:function(_){return arguments.length?(s=1-_,e):1-s},randomSource:function(_){return arguments.length?(d=_,l.forEach(m),e):d},force:function(_,E){return arguments.length>1?(E==null?l.delete(_):l.set(_,m(E)),e):l.get(_)},find:function(_,E,v){var y=0,x=t.length,S,N,w,T,I;for(v==null?v=1/0:v*=v,y=0;y<x;++y)T=t[y],S=_-T.x,N=E-T.y,w=S*S+N*N,w<v&&(I=T,v=w);return I},on:function(_,E){return arguments.length>1?(u.on(_,E),e):u.on(_)}}}function MO(){var t,e,n,i,a=zn(-30),o,s=1,l=1/0,c=.81;function u(h){var m,_=t.length,E=A1(t,Woe,Zoe).visitAfter(f);for(i=h,m=0;m<_;++m)e=t[m],E.visit(p)}function d(){if(t){var h,m=t.length,_;for(o=new Array(m),h=0;h<m;++h)_=t[h],o[_.index]=+a(_,h,t)}}function f(h){var m=0,_,E,v=0,y,x,S;if(h.length){for(y=x=S=0;S<4;++S)(_=h[S])&&(E=Math.abs(_.value))&&(m+=_.value,v+=E,y+=E*_.x,x+=E*_.y);h.x=y/v,h.y=x/v}else{_=h,_.x=_.data.x,_.y=_.data.y;do m+=o[_.data.index];while(_=_.next)}h.value=m}function p(h,m,_,E){if(!h.value)return!0;var v=h.x-e.x,y=h.y-e.y,x=E-m,S=v*v+y*y;if(x*x/c<S)return S<l&&(v===0&&(v=Ws(n),S+=v*v),y===0&&(y=Ws(n),S+=y*y),S<s&&(S=Math.sqrt(s*S)),e.vx+=v*h.value*i/S,e.vy+=y*h.value*i/S),!0;if(h.length||S>=l)return;(h.data!==e||h.next)&&(v===0&&(v=Ws(n),S+=v*v),y===0&&(y=Ws(n),S+=y*y),S<s&&(S=Math.sqrt(s*S)));do h.data!==e&&(x=o[h.data.index]*i/S,e.vx+=v*x,e.vy+=y*x);while(h=h.next)}return u.initialize=function(h,m){t=h,n=m,d()},u.strength=function(h){return arguments.length?(a=typeof h=="function"?h:zn(+h),d(),u):a},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u.theta=function(h){return arguments.length?(c=h*h,u):Math.sqrt(c)},u}function LO(t){var e=zn(.1),n,i,a;typeof t!="function"&&(t=zn(t==null?0:+t));function o(l){for(var c=0,u=n.length,d;c<u;++c)d=n[c],d.vx+=(a[c]-d.x)*i[c]*l}function s(){if(n){var l,c=n.length;for(i=new Array(c),a=new Array(c),l=0;l<c;++l)i[l]=isNaN(a[l]=+t(n[l],l,n))?0:+e(n[l],l,n)}}return o.initialize=function(l){n=l,s()},o.strength=function(l){return arguments.length?(e=typeof l=="function"?l:zn(+l),s(),o):e},o.x=function(l){return arguments.length?(t=typeof l=="function"?l:zn(+l),s(),o):t},o}function OO(t){var e=zn(.1),n,i,a;typeof t!="function"&&(t=zn(t==null?0:+t));function o(l){for(var c=0,u=n.length,d;c<u;++c)d=n[c],d.vy+=(a[c]-d.y)*i[c]*l}function s(){if(n){var l,c=n.length;for(i=new Array(c),a=new Array(c),l=0;l<c;++l)i[l]=isNaN(a[l]=+t(n[l],l,n))?0:+e(n[l],l,n)}}return o.initialize=function(l){n=l,s()},o.strength=function(l){return arguments.length?(e=typeof l=="function"?l:zn(+l),s(),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:zn(+l),s(),o):t},o}var Xoe={center:NO,collide:TO,nbody:MO,link:CO,x:LO,y:OO},z6="forces",BO=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ELe=["static","iterations"],qoe=["x","y","vx","vy"];function DO(t){pe.call(this,null,t)}DO.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:qoe}]};ze(DO,pe,{transform(t,e){var n=this.value,i=e.changed(e.ADD_REM),a=t.modified(BO),o=t.iterations||300;if(n?(i&&(e.modifies("index"),n.nodes(e.source)),(a||e.changed(e.MOD))&&Koe(n,t,0,e)):(this.value=n=yLe(e.source,t),n.on("tick",vLe(e.dataflow,this)),t.static||(i=!0,n.tick()),e.modifies("index")),a||i||t.modified(ELe)||e.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),t.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return e.StopPropagation}return this.finish(t,e)},finish(t,e){let n=e.dataflow;for(let l=this._argops,c=0,u=l.length,d;c<u;++c)if(d=l[c],!(d.name!==z6||d.op._argval.force!=="link")){for(var i=d.op._argops,a=0,o=i.length,s;a<o;++a)if(i[a].name==="links"&&(s=i[a].op.source)){n.pulse(s,n.changeset().reflow());break}}return e.reflow(t.modified()).modifies(qoe)}});function vLe(t,e){return()=>t.touch(e).run()}function yLe(t,e){let n=PO(t),i=n.stop,a=n.restart,o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,a()),n.stop=()=>(o=!0,i()),Koe(n,e,!0).on("end",()=>o=!0)}function Koe(t,e,n,i){var a=st(e.forces),o,s,l,c;for(o=0,s=BO.length;o<s;++o)l=BO[o],l!==z6&&e.modified(l)&&t[l](e[l]);for(o=0,s=a.length;o<s;++o)c=z6+o,l=n||e.modified(z6,o)?bLe(a[o]):i&&xLe(a[o],i)?t.force(c):null,l&&t.force(c,l);for(s=t.numForces||0;o<s;++o)t.force(z6+o,null);return t.numForces=a.length,t}function xLe(t,e){var n,i;for(n in t)if(wt(i=t[n])&&e.modified(fi(i)))return 1;return 0}function bLe(t){var e,n;ut(Xoe,t.force)||he("Unrecognized force: "+t.force),e=Xoe[t.force]();for(n in t)wt(e[n])&&SLe(e[n],t[n],t);return e}function SLe(t,e,n){t(wt(e)?i=>e(i,n):e)}var hB={};mr(hB,{nest:()=>sB,pack:()=>lB,partition:()=>cB,stratify:()=>uB,tree:()=>dB,treelinks:()=>fB,treemap:()=>pB});function NLe(t,e){return t.parent===e.parent?1:2}function ALe(t){return t.reduce(TLe,0)/t.length}function TLe(t,e){return t+e.x}function CLe(t){return 1+t.reduce(wLe,0)}function wLe(t,e){return Math.max(t,e.y)}function ILe(t){for(var e;e=t.children;)t=e[0];return t}function RLe(t){for(var e;e=t.children;)t=e[e.length-1];return t}function kO(){var t=NLe,e=1,n=1,i=!1;function a(o){var s,l=0;o.eachAfter(function(p){var h=p.children;h?(p.x=ALe(h),p.y=CLe(h)):(p.x=s?l+=t(p,s):0,p.y=0,s=p)});var c=ILe(o),u=RLe(o),d=c.x-t(c,u)/2,f=u.x+t(u,c)/2;return o.eachAfter(i?function(p){p.x=(p.x-o.x)*e,p.y=(o.y-p.y)*n}:function(p){p.x=(p.x-d)/(f-d)*e,p.y=(1-(o.y?p.y/o.y:1))*n})}return a.separation=function(o){return arguments.length?(t=o,a):t},a.size=function(o){return arguments.length?(i=!1,e=+o[0],n=+o[1],a):i?null:[e,n]},a.nodeSize=function(o){return arguments.length?(i=!0,e=+o[0],n=+o[1],a):i?[e,n]:null},a}function PLe(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function Yoe(){return this.eachAfter(PLe)}function Joe(t,e){let n=-1;for(let i of this)t.call(e,i,++n,this);return this}function Qoe(t,e){for(var n=this,i=[n],a,o,s=-1;n=i.pop();)if(t.call(e,n,++s,this),a=n.children)for(o=a.length-1;o>=0;--o)i.push(a[o]);return this}function ese(t,e){for(var n=this,i=[n],a=[],o,s,l,c=-1;n=i.pop();)if(a.push(n),o=n.children)for(s=0,l=o.length;s<l;++s)i.push(o[s]);for(;n=a.pop();)t.call(e,n,++c,this);return this}function tse(t,e){let n=-1;for(let i of this)if(t.call(e,i,++n,this))return i}function rse(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,a=i&&i.length;--a>=0;)n+=i[a].value;e.value=n})}function nse(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ise(t){for(var e=this,n=MLe(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var a=i.length;t!==n;)i.splice(a,0,t),t=t.parent;return i}function MLe(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),a=null;for(t=n.pop(),e=i.pop();t===e;)a=t,t=n.pop(),e=i.pop();return a}function ase(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function ose(){return Array.from(this)}function sse(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function lse(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*cse(){var t=this,e,n=[t],i,a,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(a=0,o=i.length;a<o;++a)n.push(i[a]);while(n.length)}function Ym(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=BLe)):e===void 0&&(e=OLe);for(var n=new nu(t),i,a=[n],o,s,l,c;i=a.pop();)if((s=e(i.data))&&(c=(s=Array.from(s)).length))for(i.children=s,l=c-1;l>=0;--l)a.push(o=s[l]=new nu(s[l])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(GO)}function LLe(){return Ym(this).eachBefore(DLe)}function OLe(t){return t.children}function BLe(t){return Array.isArray(t)?t[1]:null}function DLe(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function GO(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function nu(t){this.data=t,this.depth=this.height=0,this.parent=null}nu.prototype=Ym.prototype={constructor:nu,count:Yoe,each:Joe,eachAfter:ese,eachBefore:Qoe,find:tse,sum:rse,sort:nse,path:ise,ancestors:ase,descendants:ose,leaves:sse,links:lse,copy:LLe,[Symbol.iterator]:cse};function Jm(t){return t==null?null:UO(t)}function UO(t){if(typeof t!="function")throw new Error;return t}function iu(){return 0}function Yd(t){return function(){return t}}function use(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function dse(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fse(t,e){let n=t.length,i,a;for(;n;)a=e()*n--|0,i=t[n],t[n]=t[a],t[a]=i;return t}function pse(t,e){for(var n=0,i=(t=fse(Array.from(t),e)).length,a=[],o,s;n<i;)o=t[n],s&&hse(s,o)?++n:(s=kLe(a=FLe(a,o)),n=0);return s}function FLe(t,e){var n,i;if(VO(e,t))return[e];for(n=0;n<t.length;++n)if(Tb(e,t[n])&&VO(j6(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Tb(j6(t[n],t[i]),e)&&Tb(j6(t[n],e),t[i])&&Tb(j6(t[i],e),t[n])&&VO(mse(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Tb(t,e){var n=t.r-e.r,i=e.x-t.x,a=e.y-t.y;return n<0||n*n<i*i+a*a}function hse(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function VO(t,e){for(var n=0;n<e.length;++n)if(!hse(t,e[n]))return!1;return!0}function kLe(t){switch(t.length){case 1:return GLe(t[0]);case 2:return j6(t[0],t[1]);case 3:return mse(t[0],t[1],t[2])}}function GLe(t){return{x:t.x,y:t.y,r:t.r}}function j6(t,e){var n=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,c=o-n,u=s-i,d=l-a,f=Math.sqrt(c*c+u*u);return{x:(n+o+c/f*d)/2,y:(i+s+u/f*d)/2,r:(f+a+l)/2}}function mse(t,e,n){var i=t.x,a=t.y,o=t.r,s=e.x,l=e.y,c=e.r,u=n.x,d=n.y,f=n.r,p=i-s,h=i-u,m=a-l,_=a-d,E=c-o,v=f-o,y=i*i+a*a-o*o,x=y-s*s-l*l+c*c,S=y-u*u-d*d+f*f,N=h*m-p*_,w=(m*S-_*x)/(N*2)-i,T=(_*E-m*v)/N,I=(h*x-p*S)/(N*2)-a,R=(p*v-h*E)/N,L=T*T+R*R-1,O=2*(o+w*T+I*R),H=w*w+I*I-o*o,U=-(Math.abs(L)>1e-6?(O+Math.sqrt(O*O-4*L*H))/(2*L):H/O);return{x:i+w+T*U,y:a+I+R*U,r:U}}function gse(t,e,n){var i=t.x-e.x,a,o,s=t.y-e.y,l,c,u=i*i+s*s;u?(o=e.r+n.r,o*=o,c=t.r+n.r,c*=c,o>c?(a=(u+c-o)/(2*u),l=Math.sqrt(Math.max(0,c/u-a*a)),n.x=t.x-a*i-l*s,n.y=t.y-a*s+l*i):(a=(u+o-c)/(2*u),l=Math.sqrt(Math.max(0,o/u-a*a)),n.x=e.x+a*i-l*s,n.y=e.y+a*s+l*i)):(n.x=e.x+n.r,n.y=e.y)}function _se(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function Ese(t){var e=t._,n=t.next._,i=e.r+n.r,a=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return a*a+o*o}function Cb(t){this._=t,this.next=null,this.previous=null}function vse(t,e){if(!(o=(t=dse(t)).length))return 0;var n,i,a,o,s,l,c,u,d,f,p;if(n=t[0],n.x=0,n.y=0,!(o>1))return n.r;if(i=t[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;gse(i,n,a=t[2]),n=new Cb(n),i=new Cb(i),a=new Cb(a),n.next=a.previous=i,i.next=n.previous=a,a.next=i.previous=n;e:for(c=3;c<o;++c){gse(n._,i._,a=t[c]),a=new Cb(a),u=i.next,d=n.previous,f=i._.r,p=n._.r;do if(f<=p){if(_se(u._,a._)){i=u,n.next=i,i.previous=n,--c;continue e}f+=u._.r,u=u.next}else{if(_se(d._,a._)){n=d,n.next=i,i.previous=n,--c;continue e}p+=d._.r,d=d.previous}while(u!==d.next);for(a.previous=n,a.next=i,n.next=i.previous=i=a,s=Ese(n);(a=a.next)!==i;)(l=Ese(a))<s&&(n=a,s=l);i=n.next}for(n=[i._],a=i;(a=a.next)!==i;)n.push(a._);for(a=pse(n,e),c=0;c<o;++c)n=t[c],n.x-=a.x,n.y-=a.y;return a.r}function ULe(t){return Math.sqrt(t.value)}function zO(){var t=null,e=1,n=1,i=iu;function a(o){let s=use();return o.x=e/2,o.y=n/2,t?o.eachBefore(yse(t)).eachAfter($O(i,.5,s)).eachBefore(xse(1)):o.eachBefore(yse(ULe)).eachAfter($O(iu,1,s)).eachAfter($O(i,o.r/Math.min(e,n),s)).eachBefore(xse(Math.min(e,n)/(2*o.r))),o}return a.radius=function(o){return arguments.length?(t=Jm(o),a):t},a.size=function(o){return arguments.length?(e=+o[0],n=+o[1],a):[e,n]},a.padding=function(o){return arguments.length?(i=typeof o=="function"?o:Yd(+o),a):i},a}function yse(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function $O(t,e,n){return function(i){if(a=i.children){var a,o,s=a.length,l=t(i)*e||0,c;if(l)for(o=0;o<s;++o)a[o].r+=l;if(c=vse(a,n),l)for(o=0;o<s;++o)a[o].r-=l;i.r=c+l}}}function xse(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function wb(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Zs(t,e,n,i,a){for(var o=t.children,s,l=-1,c=o.length,u=t.value&&(i-e)/t.value;++l<c;)s=o[l],s.y0=n,s.y1=a,s.x0=e,s.x1=e+=s.value*u}function jO(){var t=1,e=1,n=0,i=!1;function a(s){var l=s.height+1;return s.x0=s.y0=n,s.x1=t,s.y1=e/l,s.eachBefore(o(e,l)),i&&s.eachBefore(wb),s}function o(s,l){return function(c){c.children&&Zs(c,c.x0,s*(c.depth+1)/l,c.x1,s*(c.depth+2)/l);var u=c.x0,d=c.y0,f=c.x1-n,p=c.y1-n;f<u&&(u=f=(u+f)/2),p<d&&(d=p=(d+p)/2),c.x0=u,c.y0=d,c.x1=f,c.y1=p}}return a.round=function(s){return arguments.length?(i=!!s,a):i},a.size=function(s){return arguments.length?(t=+s[0],e=+s[1],a):[t,e]},a.padding=function(s){return arguments.length?(n=+s,a):n},a}var VLe={depth:-1},bse={},HO={};function $Le(t){return t.id}function zLe(t){return t.parentId}function Ib(){var t=$Le,e=zLe,n;function i(a){var o=Array.from(a),s=t,l=e,c,u,d,f,p,h,m,_,E=new Map;if(n!=null){let v=o.map((S,N)=>jLe(n(S,N,a))),y=v.map(Sse),x=new Set(v).add("");for(let S of y)x.has(S)||(x.add(S),v.push(S),y.push(Sse(S)),o.push(HO));s=(S,N)=>v[N],l=(S,N)=>y[N]}for(d=0,c=o.length;d<c;++d)u=o[d],h=o[d]=new nu(u),(m=s(u,d,a))!=null&&(m+="")&&(_=h.id=m,E.set(_,E.has(_)?bse:h)),(m=l(u,d,a))!=null&&(m+="")&&(h.parent=m);for(d=0;d<c;++d)if(h=o[d],m=h.parent){if(p=E.get(m),!p)throw new Error("missing: "+m);if(p===bse)throw new Error("ambiguous: "+m);p.children?p.children.push(h):p.children=[h],h.parent=p}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===HO&&f.children.length===1;)f=f.children[0],--c;for(let v=o.length-1;v>=0&&(h=o[v],h.data===HO);--v)h.data=null}if(f.parent=VLe,f.eachBefore(function(v){v.depth=v.parent.depth+1,--c}).eachBefore(GO),f.parent=null,c>0)throw new Error("cycle");return f}return i.id=function(a){return arguments.length?(t=Jm(a),i):t},i.parentId=function(a){return arguments.length?(e=Jm(a),i):e},i.path=function(a){return arguments.length?(n=Jm(a),i):n},i}function jLe(t){t=`${t}`;let e=t.length;return WO(t,e-1)&&!WO(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function Sse(t){let e=t.length;if(e<2)return"";for(;--e>1&&!WO(t,e););return t.slice(0,e)}function WO(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function HLe(t,e){return t.parent===e.parent?1:2}function ZO(t){var e=t.children;return e?e[0]:t.t}function XO(t){var e=t.children;return e?e[e.length-1]:t.t}function WLe(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function ZLe(t){for(var e=0,n=0,i=t.children,a=i.length,o;--a>=0;)o=i[a],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function XLe(t,e,n){return t.a.parent===e.parent?t.a:n}function Rb(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Rb.prototype=Object.create(nu.prototype);function qLe(t){for(var e=new Rb(t,0),n,i=[e],a,o,s,l;n=i.pop();)if(o=n._.children)for(n.children=new Array(l=o.length),s=l-1;s>=0;--s)i.push(a=n.children[s]=new Rb(o[s],s)),a.parent=n;return(e.parent=new Rb(null,0)).children=[e],e}function qO(){var t=HLe,e=1,n=1,i=null;function a(u){var d=qLe(u);if(d.eachAfter(o),d.parent.m=-d.z,d.eachBefore(s),i)u.eachBefore(c);else{var f=u,p=u,h=u;u.eachBefore(function(y){y.x<f.x&&(f=y),y.x>p.x&&(p=y),y.depth>h.depth&&(h=y)});var m=f===p?1:t(f,p)/2,_=m-f.x,E=e/(p.x+m+_),v=n/(h.depth||1);u.eachBefore(function(y){y.x=(y.x+_)*E,y.y=y.depth*v})}return u}function o(u){var d=u.children,f=u.parent.children,p=u.i?f[u.i-1]:null;if(d){ZLe(u);var h=(d[0].z+d[d.length-1].z)/2;p?(u.z=p.z+t(u._,p._),u.m=u.z-h):u.z=h}else p&&(u.z=p.z+t(u._,p._));u.parent.A=l(u,p,u.parent.A||f[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function l(u,d,f){if(d){for(var p=u,h=u,m=d,_=p.parent.children[0],E=p.m,v=h.m,y=m.m,x=_.m,S;m=XO(m),p=ZO(p),m&&p;)_=ZO(_),h=XO(h),h.a=u,S=m.z+y-p.z-E+t(m._,p._),S>0&&(WLe(XLe(m,u,f),u,S),E+=S,v+=S),y+=m.m,E+=p.m,x+=_.m,v+=h.m;m&&!XO(h)&&(h.t=m,h.m+=y-v),p&&!ZO(_)&&(_.t=p,_.m+=E-x,f=u)}return f}function c(u){u.x*=e,u.y=u.depth*n}return a.separation=function(u){return arguments.length?(t=u,a):t},a.size=function(u){return arguments.length?(i=!1,e=+u[0],n=+u[1],a):i?null:[e,n]},a.nodeSize=function(u){return arguments.length?(i=!0,e=+u[0],n=+u[1],a):i?[e,n]:null},a}function au(t,e,n,i,a){for(var o=t.children,s,l=-1,c=o.length,u=t.value&&(a-n)/t.value;++l<c;)s=o[l],s.x0=e,s.x1=i,s.y0=n,s.y1=n+=s.value*u}var KO=(1+Math.sqrt(5))/2;function YO(t,e,n,i,a,o){for(var s=[],l=e.children,c,u,d=0,f=0,p=l.length,h,m,_=e.value,E,v,y,x,S,N,w;d<p;){h=a-n,m=o-i;do E=l[f++].value;while(!E&&f<p);for(v=y=E,N=Math.max(m/h,h/m)/(_*t),w=E*E*N,S=Math.max(y/w,w/v);f<p;++f){if(E+=u=l[f].value,u<v&&(v=u),u>y&&(y=u),w=E*E*N,x=Math.max(y/w,w/v),x>S){E-=u;break}S=x}s.push(c={value:E,dice:h<m,children:l.slice(d,f)}),c.dice?Zs(c,n,i,a,_?i+=m*E/_:o):au(c,n,i,_?n+=h*E/_:a,o),_-=E,d=f}return s}var H6=function t(e){function n(i,a,o,s,l){YO(e,i,a,o,s,l)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(KO);function JO(){var t=H6,e=!1,n=1,i=1,a=[0],o=iu,s=iu,l=iu,c=iu,u=iu;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(f),a=[0],e&&p.eachBefore(wb),p}function f(p){var h=a[p.depth],m=p.x0+h,_=p.y0+h,E=p.x1-h,v=p.y1-h;E<m&&(m=E=(m+E)/2),v<_&&(_=v=(_+v)/2),p.x0=m,p.y0=_,p.x1=E,p.y1=v,p.children&&(h=a[p.depth+1]=o(p)/2,m+=u(p)-h,_+=s(p)-h,E-=l(p)-h,v-=c(p)-h,E<m&&(m=E=(m+E)/2),v<_&&(_=v=(_+v)/2),t(p,m,_,E,v))}return d.round=function(p){return arguments.length?(e=!!p,d):e},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(t=UO(p),d):t},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(o=typeof p=="function"?p:Yd(+p),d):o},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Yd(+p),d):s},d.paddingRight=function(p){return arguments.length?(l=typeof p=="function"?p:Yd(+p),d):l},d.paddingBottom=function(p){return arguments.length?(c=typeof p=="function"?p:Yd(+p),d):c},d.paddingLeft=function(p){return arguments.length?(u=typeof p=="function"?p:Yd(+p),d):u},d}function QO(t,e,n,i,a){var o=t.children,s,l=o.length,c,u=new Array(l+1);for(u[0]=c=s=0;s<l;++s)u[s+1]=c+=o[s].value;d(0,l,t.value,e,n,i,a);function d(f,p,h,m,_,E,v){if(f>=p-1){var y=o[f];y.x0=m,y.y0=_,y.x1=E,y.y1=v;return}for(var x=u[f],S=h/2+x,N=f+1,w=p-1;N<w;){var T=N+w>>>1;u[T]<S?N=T+1:w=T}S-u[N-1]<u[N]-S&&f+1<N&&--N;var I=u[N]-x,R=h-I;if(E-m>v-_){var L=h?(m*R+E*I)/h:E;d(f,N,I,m,_,L,v),d(N,p,R,L,_,E,v)}else{var O=h?(_*R+v*I)/h:v;d(f,N,I,m,_,E,O),d(N,p,R,m,O,E,v)}}}function eB(t,e,n,i,a){(t.depth&1?au:Zs)(t,e,n,i,a)}var tB=function t(e){function n(i,a,o,s,l){if((c=i._squarify)&&c.ratio===e)for(var c,u,d,f,p=-1,h,m=c.length,_=i.value;++p<m;){for(u=c[p],d=u.children,f=u.value=0,h=d.length;f<h;++f)u.value+=d[f].value;u.dice?Zs(u,a,o,s,_?o+=(l-o)*u.value/_:l):au(u,a,o,_?a+=(s-a)*u.value/_:s,l),_-=u.value}else i._squarify=c=YO(e,i,a,o,s,l),c.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(KO);function rB(t,e,n){let i={};return t.each(a=>{let o=a.data;n(o)&&(i[e(o)]=a)}),t.lookup=i,t}function sB(t){pe.call(this,null,t)}sB.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var KLe=t=>t.values;ze(sB,pe,{transform(t,e){e.source||he("Nest transform requires an upstream data source.");var n=t.generate,i=t.modified(),a=e.clone(),o=this.value;return(!o||i||e.changed())&&(o&&o.each(s=>{s.children&&Q0(s.data)&&a.rem.push(s.data)}),this.value=o=Ym({values:st(t.keys).reduce((s,l)=>(s.key(l),s),YLe()).entries(a.source)},KLe),n&&o.each(s=>{s.children&&(s=Jt(s.data),a.add.push(s),a.source.push(s))}),rB(o,mt,mt)),a.source.root=o,a}});function YLe(){let t=[],e={entries:a=>i(n(a,0),0),key:a=>(t.push(a),e)};function n(a,o){if(o>=t.length)return a;let s=a.length,l=t[o++],c={},u={},d=-1,f,p,h;for(;++d<s;)f=l(p=a[d])+"",(h=c[f])?h.push(p):c[f]=[p];for(f in c)u[f]=n(c[f],o);return u}function i(a,o){if(++o>t.length)return a;let s=[];for(let l in a)s.push({key:l,values:i(a[l],o)});return s}return e}function ou(t){pe.call(this,null,t)}var JLe=(t,e)=>t.parent===e.parent?1:2;ze(ou,pe,{transform(t,e){(!e.source||!e.source.root)&&he(this.constructor.name+" transform requires a backing tree data source.");let n=this.layout(t.method),i=this.fields,a=e.source.root,o=t.as||i;t.field?a.sum(t.field):a.count(),t.sort&&a.sort(Dl(t.sort,s=>s.data)),QLe(n,this.params,t),n.separation&&n.separation(t.separation!==!1?JLe:Lc);try{this.value=n(a)}catch(s){he(s)}return a.each(s=>eOe(s,i,o)),e.reflow(t.modified()).modifies(o).modifies("leaf")}});function QLe(t,e,n){for(let i,a=0,o=e.length;a<o;++a)i=e[a],i in n&&t[i](n[i])}function eOe(t,e,n){let i=t.data,a=e.length-1;for(let o=0;o<a;++o)i[n[o]]=t[e[o]];i[n[a]]=t.children?t.children.length:0}var nB=["x","y","r","depth","children"];function lB(t){ou.call(this,t)}lB.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:nB.length,default:nB}]};ze(lB,ou,{layout:zO,params:["radius","size","padding"],fields:nB});var iB=["x0","y0","x1","y1","depth","children"];function cB(t){ou.call(this,t)}cB.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:iB.length,default:iB}]};ze(cB,ou,{layout:jO,params:["size","round","padding"],fields:iB});function uB(t){pe.call(this,null,t)}uB.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ze(uB,pe,{transform(t,e){e.source||he("Stratify transform requires an upstream data source.");let n=this.value,i=t.modified(),a=e.fork(e.ALL).materialize(e.SOURCE),o=!n||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return a.source=a.source.slice(),o&&(n=a.source.length?rB(Ib().id(t.key).parentId(t.parentKey)(a.source),t.key,pi):rB(Ib()([{}]),t.key,t.key)),a.source.root=this.value=n,a}});var Nse={tidy:qO,cluster:kO},aB=["x","y","depth","children"];function dB(t){ou.call(this,t)}dB.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:aB.length,default:aB}]};ze(dB,ou,{layout(t){let e=t||"tidy";if(ut(Nse,e))return Nse[e]();he("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:aB});function fB(t){pe.call(this,[],t)}fB.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ze(fB,pe,{transform(t,e){let n=this.value,i=e.source&&e.source.root,a=e.fork(e.NO_SOURCE),o={};return i||he("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(a.rem=n,e.visit(e.SOURCE,s=>o[mt(s)]=1),i.each(s=>{let l=s.data,c=s.parent&&s.parent.data;c&&o[mt(l)]&&o[mt(c)]&&a.add.push(Jt({source:c,target:l}))}),this.value=a.add):e.changed(e.MOD)&&(e.visit(e.MOD,s=>o[mt(s)]=1),n.forEach(s=>{(o[mt(s.source)]||o[mt(s.target)])&&a.mod.push(s)})),a}});var Ase={binary:QO,dice:Zs,slice:au,slicedice:eB,squarify:H6,resquarify:tB},oB=["x0","y0","x1","y1","depth","children"];function pB(t){ou.call(this,t)}pB.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:oB.length,default:oB}]};ze(pB,ou,{layout(){let t=JO();return t.ratio=e=>{let n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{ut(Ase,e)?t.tile(Ase[e]):he("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:oB});var AB={};mr(AB,{label:()=>NB});var mB=4278190080;function tOe(t,e){let n=t.bitmap();return(e||[]).forEach(i=>n.set(t(i.boundary[0]),t(i.boundary[3]))),[n,void 0]}function rOe(t,e,n,i,a){let o=t.width,s=t.height,l=i||a,c=is(o,s).getContext("2d"),u=is(o,s).getContext("2d"),d=l&&is(o,s).getContext("2d");n.forEach(I=>Pb(c,I,!1)),Pb(u,e,!1),l&&Pb(d,e,!0);let f=gB(c,o,s),p=gB(u,o,s),h=l&&gB(d,o,s),m=t.bitmap(),_=l&&t.bitmap(),E,v,y,x,S,N,w,T;for(v=0;v<s;++v)for(E=0;E<o;++E)S=v*o+E,N=f[S]&mB,T=p[S]&mB,w=l&&h[S]&mB,(N||w||T)&&(y=t(E),x=t(v),!a&&(N||T)&&m.set(y,x),l&&(N||w)&&_.set(y,x));return[m,_]}function gB(t,e,n){return new Uint32Array(t.getImageData(0,0,e,n).data.buffer)}function Pb(t,e,n){if(!e.length)return;let i=e[0].mark.marktype;i==="group"?e.forEach(a=>{a.items.forEach(o=>Pb(t,o.items,n))}):Ha[i].draw(t,{items:n?e.map(nOe):e})}function nOe(t){let e=Hp(t,{});return e.stroke&&e.strokeOpacity!==0||e.fill&&e.fillOpacity!==0?{...e,strokeOpacity:1,stroke:"#000",fillOpacity:0}:e}var su=5,Na=31,W6=32,Jd=new Uint32Array(W6+1),Xs=new Uint32Array(W6+1);Xs[0]=0;Jd[0]=~Xs[0];for(let t=1;t<=W6;++t)Xs[t]=Xs[t-1]<<1|1,Jd[t]=~Xs[t];function iOe(t,e){let n=new Uint32Array(~~((t*e+W6)/W6));function i(o,s){n[o]|=s}function a(o,s){n[o]&=s}return{array:n,get:(o,s)=>{let l=s*t+o;return n[l>>>su]&1<<(l&Na)},set:(o,s)=>{let l=s*t+o;i(l>>>su,1<<(l&Na))},clear:(o,s)=>{let l=s*t+o;a(l>>>su,~(1<<(l&Na)))},getRange:(o,s,l,c)=>{let u=c,d,f,p,h;for(;u>=s;--u)if(d=u*t+o,f=u*t+l,p=d>>>su,h=f>>>su,p===h){if(n[p]&Jd[d&Na]&Xs[(f&Na)+1])return!0}else{if(n[p]&Jd[d&Na]||n[h]&Xs[(f&Na)+1])return!0;for(let m=p+1;m<h;++m)if(n[m])return!0}return!1},setRange:(o,s,l,c)=>{let u,d,f,p,h;for(;s<=c;++s)if(u=s*t+o,d=s*t+l,f=u>>>su,p=d>>>su,f===p)i(f,Jd[u&Na]&Xs[(d&Na)+1]);else for(i(f,Jd[u&Na]),i(p,Xs[(d&Na)+1]),h=f+1;h<p;++h)i(h,4294967295)},clearRange:(o,s,l,c)=>{let u,d,f,p,h;for(;s<=c;++s)if(u=s*t+o,d=s*t+l,f=u>>>su,p=d>>>su,f===p)a(f,Xs[u&Na]|Jd[(d&Na)+1]);else for(a(f,Xs[u&Na]),a(p,Jd[(d&Na)+1]),h=f+1;h<p;++h)a(h,0)},outOfBounds:(o,s,l,c)=>o<0||s<0||c>=e||l>=t}}function aOe(t,e,n){let i=Math.max(1,Math.sqrt(t*e/1e6)),a=~~((t+2*n+i)/i),o=~~((e+2*n+i)/i),s=l=>~~((l+n)/i);return s.invert=l=>l*i-n,s.bitmap=()=>iOe(a,o),s.ratio=i,s.padding=n,s.width=t,s.height=e,s}function oOe(t,e,n,i){let a=t.width,o=t.height;return function(s){let l=s.datum.datum.items[i].items,c=l.length,u=s.datum.fontSize,d=xo.width(s.datum,s.datum.text),f=0,p,h,m,_,E,v,y;for(let x=0;x<c;++x)p=l[x].x,m=l[x].y,h=l[x].x2===void 0?p:l[x].x2,_=l[x].y2===void 0?m:l[x].y2,E=(p+h)/2,v=(m+_)/2,y=Math.abs(h-p+_-m),y>=f&&(f=y,s.x=E,s.y=v);return E=d/2,v=u/2,p=s.x-E,h=s.x+E,m=s.y-v,_=s.y+v,s.align="center",p<0&&h<=a?s.align="left":0<=p&&a<h&&(s.align="right"),s.baseline="middle",m<0&&_<=o?s.baseline="top":0<=m&&o<_&&(s.baseline="bottom"),!0}}function Mb(t,e,n,i,a,o){let s=n/2;return t-s<0||t+s>a||e-(s=i/2)<0||e+s>o}function Qd(t,e,n,i,a,o,s,l){let c=a*o/(i*2),u=t(e-c),d=t(e+c),f=t(n-(o=o/2)),p=t(n+o);return s.outOfBounds(u,f,d,p)||s.getRange(u,f,d,p)||l&&l.getRange(u,f,d,p)}function sOe(t,e,n,i){let a=t.width,o=t.height,s=e[0],l=e[1];function c(u,d,f,p,h){let m=t.invert(u),_=t.invert(d),E=f,v=o,y;if(!Mb(m,_,p,h,a,o)&&!Qd(t,m,_,h,p,E,s,l)&&!Qd(t,m,_,h,p,h,s,null)){for(;v-E>=1;)y=(E+v)/2,Qd(t,m,_,h,p,y,s,l)?v=y:E=y;if(E>f)return[m,_,E,!0]}}return function(u){let d=u.datum.datum.items[i].items,f=d.length,p=u.datum.fontSize,h=xo.width(u.datum,u.datum.text),m=n?p:0,_=!1,E=!1,v=0,y,x,S,N,w,T,I,R,L,O,H,U,X,W,ne,be,q;for(let ie=0;ie<f;++ie){for(y=d[ie].x,S=d[ie].y,x=d[ie].x2===void 0?y:d[ie].x2,N=d[ie].y2===void 0?S:d[ie].y2,y>x&&(q=y,y=x,x=q),S>N&&(q=S,S=N,N=q),L=t(y),H=t(x),O=~~((L+H)/2),U=t(S),W=t(N),X=~~((U+W)/2),I=O;I>=L;--I)for(R=X;R>=U;--R)be=c(I,R,m,h,p),be&&([u.x,u.y,m,_]=be);for(I=O;I<=H;++I)for(R=X;R<=W;++R)be=c(I,R,m,h,p),be&&([u.x,u.y,m,_]=be);!_&&!n&&(ne=Math.abs(x-y+N-S),w=(y+x)/2,T=(S+N)/2,ne>=v&&!Mb(w,T,h,p,a,o)&&!Qd(t,w,T,p,h,p,s,null)&&(v=ne,u.x=w,u.y=T,E=!0))}return _||E?(w=h/2,T=p/2,s.setRange(t(u.x-w),t(u.y-T),t(u.x+w),t(u.y+T)),u.align="center",u.baseline="middle",!0):!1}}var lOe=[-1,-1,1,1],cOe=[-1,1,-1,1];function uOe(t,e,n,i){let a=t.width,o=t.height,s=e[0],l=e[1],c=t.bitmap();return function(u){let d=u.datum.datum.items[i].items,f=d.length,p=u.datum.fontSize,h=xo.width(u.datum,u.datum.text),m=[],_=n?p:0,E=!1,v=!1,y=0,x,S,N,w,T,I,R,L,O,H,U,X;for(let W=0;W<f;++W){for(x=d[W].x,N=d[W].y,S=d[W].x2===void 0?x:d[W].x2,w=d[W].y2===void 0?N:d[W].y2,m.push([t((x+S)/2),t((N+w)/2)]);m.length;)if([R,L]=m.pop(),!(s.get(R,L)||l.get(R,L)||c.get(R,L))){c.set(R,L);for(let ne=0;ne<4;++ne)T=R+lOe[ne],I=L+cOe[ne],c.outOfBounds(T,I,T,I)||m.push([T,I]);if(T=t.invert(R),I=t.invert(L),O=_,H=o,!Mb(T,I,h,p,a,o)&&!Qd(t,T,I,p,h,O,s,l)&&!Qd(t,T,I,p,h,p,s,null)){for(;H-O>=1;)U=(O+H)/2,Qd(t,T,I,p,h,U,s,l)?H=U:O=U;O>_&&(u.x=T,u.y=I,_=O,E=!0)}}!E&&!n&&(X=Math.abs(S-x+w-N),T=(x+S)/2,I=(N+w)/2,X>=y&&!Mb(T,I,h,p,a,o)&&!Qd(t,T,I,p,h,p,s,null)&&(y=X,u.x=T,u.y=I,v=!0))}return E||v?(T=h/2,I=p/2,s.setRange(t(u.x-T),t(u.y-I),t(u.x+T),t(u.y+I)),u.align="center",u.baseline="middle",!0):!1}}var dOe=["right","center","left"],fOe=["bottom","middle","top"];function pOe(t,e,n,i){let a=t.width,o=t.height,s=e[0],l=e[1],c=i.length;return function(u){var H;let d=u.boundary,f=u.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>a||d[3]>o)return!1;let p=(H=u.textWidth)!=null?H:0,h,m,_,E,v,y,x,S,N,w,T,I,R,L,O;for(let U=0;U<c;++U){if(h=(n[U]&3)-1,m=(n[U]>>>2&3)-1,_=h===0&&m===0||i[U]<0,E=h&&m?Math.SQRT1_2:1,v=i[U]<0?-1:1,y=d[1+h]+i[U]*h*E,T=d[4+m]+v*f*m/2+i[U]*m*E,S=T-f/2,N=T+f/2,I=t(y),L=t(S),O=t(N),!p)if(Tse(I,I,L,O,s,l,y,y,S,N,d,_))p=xo.width(u.datum,u.datum.text);else continue;if(w=y+v*p*h/2,y=w-p/2,x=w+p/2,I=t(y),R=t(x),Tse(I,R,L,O,s,l,y,x,S,N,d,_))return u.x=h?h*v<0?x:y:w,u.y=m?m*v<0?N:S:T,u.align=dOe[h*v+1],u.baseline=fOe[m*v+1],s.setRange(I,L,R,O),!0}return!1}}function Tse(t,e,n,i,a,o,s,l,c,u,d,f){return!(a.outOfBounds(t,n,e,i)||(f&&o||a).getRange(t,n,e,i))}var _B=0,EB=4,vB=8,yB=0,xB=1,bB=2,hOe={"top-left":_B+yB,top:_B+xB,"top-right":_B+bB,left:EB+yB,middle:EB+xB,right:EB+bB,"bottom-left":vB+yB,bottom:vB+xB,"bottom-right":vB+bB},mOe={naive:oOe,"reduced-search":sOe,floodfill:uOe};function gOe(t,e,n,i,a,o,s,l,c,u,d){if(!t.length)return t;let f=Math.max(i.length,a.length),p=_Oe(i,f),h=EOe(a,f),m=vOe(t[0].datum),_=m==="group"&&t[0].datum.items[c].marktype,E=_==="area",v=yOe(m,_,l,c),y=u===null||u===1/0,x=E&&d==="naive",S=-1,N=-1,w=t.map(L=>{let O=y?xo.width(L,L.text):void 0;return S=Math.max(S,O),N=Math.max(N,L.fontSize),{datum:L,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(L),textWidth:O}});u=u===null||u===1/0?Math.max(S,N)+Math.max(...i):u;let T=aOe(e[0],e[1],u),I;if(!x){n&&w.sort((H,U)=>n(H.datum,U.datum));let L=!1;for(let H=0;H<h.length&&!L;++H)L=h[H]===5||p[H]<0;let O=(m&&s||E)&&t.map(H=>H.datum);I=o.length||O?rOe(T,O||[],o,L,E):tOe(T,s&&w)}let R=E?mOe[d](T,I,s,c):pOe(T,I,h,p);return w.forEach(L=>L.opacity=+R(L)),w}function _Oe(t,e){let n=new Float64Array(e),i=t.length;for(let a=0;a<i;++a)n[a]=t[a]||0;for(let a=i;a<e;++a)n[a]=n[i-1];return n}function EOe(t,e){let n=new Int8Array(e),i=t.length;for(let a=0;a<i;++a)n[a]|=hOe[t[a]];for(let a=i;a<e;++a)n[a]=n[i-1];return n}function vOe(t){return t&&t.mark&&t.mark.marktype}function yOe(t,e,n,i){let a=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return t?t==="line"||t==="area"?o=>a(o.datum):e==="line"?o=>{let s=o.datum.items[i].items;return a(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{let s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:a}var SB=["x","y","opacity","align","baseline"],Cse=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function NB(t){pe.call(this,null,t)}NB.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Cse},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:SB.length,default:SB}]};ze(NB,pe,{transform(t,e){function n(o){let s=t[o];return wt(s)&&e.modified(s.fields)}let i=t.modified();if(!(i||e.changed(e.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&he("Size parameter should be specified as a [width, height] array.");let a=t.as||SB;return gOe(e.materialize(e.SOURCE).source||[],t.size,t.sort,st(t.offset==null?1:t.offset),st(t.anchor||Cse),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(o=>{let s=o.datum;s[a[0]]=o.x,s[a[1]]=o.y,s[a[2]]=o.opacity,s[a[3]]=o.align,s[a[4]]=o.baseline}),e.reflow(i).modifies(a)}});var IB={};mr(IB,{loess:()=>CB,regression:()=>wB});function wse(t,e){var n=[],i=function(d){return d(l)},a,o,s,l,c,u;if(e==null)n.push(t);else for(a={},o=0,s=t.length;o<s;++o)l=t[o],c=e.map(i),u=a[c],u||(a[c]=u=[],u.dims=c,n.push(u)),u.push(l);return n}function CB(t){pe.call(this,null,t)}CB.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ze(CB,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let i=e.materialize(e.SOURCE).source,a=wse(i,t.groupby),o=(t.groupby||[]).map(Hr),s=o.length,l=t.as||[Hr(t.x),Hr(t.y)],c=[];a.forEach(u=>{lee(u,t.x,t.y,t.bandwidth||.3).forEach(d=>{let f={};for(let p=0;p<s;++p)f[o[p]]=u.dims[p];f[l[0]]=d[0],f[l[1]]=d[1],c.push(Jt(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});var TB={constant:JI,linear:QI,log:iee,exp:aee,pow:oee,quad:eR,poly:see},xOe=(t,e)=>t==="poly"?e:t==="quad"?2:1;function wB(t){pe.call(this,null,t)}wB.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(TB)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ze(wB,pe,{transform(t,e){let n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){let i=e.materialize(e.SOURCE).source,a=wse(i,t.groupby),o=(t.groupby||[]).map(Hr),s=t.method||"linear",l=t.order==null?3:t.order,c=xOe(s,l),u=t.as||[Hr(t.x),Hr(t.y)],d=TB[s],f=[],p=t.extent;ut(TB,s)||he("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),a.forEach(h=>{if(h.length<=c){e.dataflow.warn("Skipping regression with more parameters than data points.");return}let _=d(h,t.x,t.y,l);if(t.params){f.push(Jt({keys:h.dims,coef:_.coef,rSquared:_.rSquared}));return}let E=p||Fa(h,t.x),v=y=>{let x={};for(let S=0;S<o.length;++S)x[o[S]]=h.dims[S];x[u[0]]=y[0],x[u[1]]=y[1],f.push(Jt(x))};s==="linear"||s==="constant"?E.forEach(y=>v([y,_.predict(y)])):o3(_.predict,E,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var MB={};mr(MB,{voronoi:()=>PB});var nr=11102230246251565e-32,jn=134217729,Z6=(3+8*nr)*nr;function C1(t,e,n,i,a){let o,s,l,c,u=e[0],d=i[0],f=0,p=0;d>u==d>-u?(o=u,u=e[++f]):(o=d,d=i[++p]);let h=0;if(f<t&&p<n)for(d>u==d>-u?(s=u+o,l=o-(s-u),u=e[++f]):(s=d+o,l=o-(s-d),d=i[++p]),o=s,l!==0&&(a[h++]=l);f<t&&p<n;)d>u==d>-u?(s=o+u,c=s-o,l=o-(s-c)+(u-c),u=e[++f]):(s=o+d,c=s-o,l=o-(s-c)+(d-c),d=i[++p]),o=s,l!==0&&(a[h++]=l);for(;f<t;)s=o+u,c=s-o,l=o-(s-c)+(u-c),u=e[++f],o=s,l!==0&&(a[h++]=l);for(;p<n;)s=o+d,c=s-o,l=o-(s-c)+(d-c),d=i[++p],o=s,l!==0&&(a[h++]=l);return(o!==0||h===0)&&(a[h++]=o),h}function X6(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function Fe(t){return new Float64Array(t)}var bOe=(3+16*nr)*nr,SOe=(2+12*nr)*nr,NOe=(9+64*nr)*nr*nr,Qm=Fe(4),Ise=Fe(8),Rse=Fe(12),Pse=Fe(16),Aa=Fe(4);function AOe(t,e,n,i,a,o,s){let l,c,u,d,f,p,h,m,_,E,v,y,x,S,N,w,T,I,R=t-a,L=n-a,O=e-o,H=i-o;S=R*H,p=jn*R,h=p-(p-R),m=R-h,p=jn*H,_=p-(p-H),E=H-_,N=m*E-(S-h*_-m*_-h*E),w=O*L,p=jn*O,h=p-(p-O),m=O-h,p=jn*L,_=p-(p-L),E=L-_,T=m*E-(w-h*_-m*_-h*E),v=N-T,f=N-v,Qm[0]=N-(v+f)+(f-T),y=S+v,f=y-S,x=S-(y-f)+(v-f),v=x-w,f=x-v,Qm[1]=x-(v+f)+(f-w),I=y+v,f=I-y,Qm[2]=y-(I-f)+(v-f),Qm[3]=I;let U=X6(4,Qm),X=SOe*s;if(U>=X||-U>=X||(f=t-R,l=t-(R+f)+(f-a),f=n-L,u=n-(L+f)+(f-a),f=e-O,c=e-(O+f)+(f-o),f=i-H,d=i-(H+f)+(f-o),l===0&&c===0&&u===0&&d===0)||(X=NOe*s+Z6*Math.abs(U),U+=R*d+H*l-(O*u+L*c),U>=X||-U>=X))return U;S=l*H,p=jn*l,h=p-(p-l),m=l-h,p=jn*H,_=p-(p-H),E=H-_,N=m*E-(S-h*_-m*_-h*E),w=c*L,p=jn*c,h=p-(p-c),m=c-h,p=jn*L,_=p-(p-L),E=L-_,T=m*E-(w-h*_-m*_-h*E),v=N-T,f=N-v,Aa[0]=N-(v+f)+(f-T),y=S+v,f=y-S,x=S-(y-f)+(v-f),v=x-w,f=x-v,Aa[1]=x-(v+f)+(f-w),I=y+v,f=I-y,Aa[2]=y-(I-f)+(v-f),Aa[3]=I;let W=C1(4,Qm,4,Aa,Ise);S=R*d,p=jn*R,h=p-(p-R),m=R-h,p=jn*d,_=p-(p-d),E=d-_,N=m*E-(S-h*_-m*_-h*E),w=O*u,p=jn*O,h=p-(p-O),m=O-h,p=jn*u,_=p-(p-u),E=u-_,T=m*E-(w-h*_-m*_-h*E),v=N-T,f=N-v,Aa[0]=N-(v+f)+(f-T),y=S+v,f=y-S,x=S-(y-f)+(v-f),v=x-w,f=x-v,Aa[1]=x-(v+f)+(f-w),I=y+v,f=I-y,Aa[2]=y-(I-f)+(v-f),Aa[3]=I;let ne=C1(W,Ise,4,Aa,Rse);S=l*d,p=jn*l,h=p-(p-l),m=l-h,p=jn*d,_=p-(p-d),E=d-_,N=m*E-(S-h*_-m*_-h*E),w=c*u,p=jn*c,h=p-(p-c),m=c-h,p=jn*u,_=p-(p-u),E=u-_,T=m*E-(w-h*_-m*_-h*E),v=N-T,f=N-v,Aa[0]=N-(v+f)+(f-T),y=S+v,f=y-S,x=S-(y-f)+(v-f),v=x-w,f=x-v,Aa[1]=x-(v+f)+(f-w),I=y+v,f=I-y,Aa[2]=y-(I-f)+(v-f),Aa[3]=I;let be=C1(ne,Rse,4,Aa,Pse);return Pse[be-1]}function eg(t,e,n,i,a,o){let s=(e-o)*(n-a),l=(t-a)*(i-o),c=s-l,u=Math.abs(s+l);return Math.abs(c)>=bOe*u?c:-AOe(t,e,n,i,a,o,u)}var CMt=(7+56*nr)*nr,wMt=(3+28*nr)*nr,IMt=(26+288*nr)*nr*nr,RMt=Fe(4),PMt=Fe(4),MMt=Fe(4),LMt=Fe(4),OMt=Fe(4),BMt=Fe(4),DMt=Fe(4),FMt=Fe(4),kMt=Fe(4),GMt=Fe(8),UMt=Fe(8),VMt=Fe(8),$Mt=Fe(4),zMt=Fe(8),jMt=Fe(8),HMt=Fe(8),WMt=Fe(12),ZMt=Fe(192),XMt=Fe(192);var YMt=(10+96*nr)*nr,JMt=(4+48*nr)*nr,QMt=(44+576*nr)*nr*nr,eLt=Fe(4),tLt=Fe(4),rLt=Fe(4),nLt=Fe(4),iLt=Fe(4),aLt=Fe(4),oLt=Fe(4),sLt=Fe(4),lLt=Fe(8),cLt=Fe(8),uLt=Fe(8),dLt=Fe(8),fLt=Fe(8),pLt=Fe(8),hLt=Fe(8),mLt=Fe(8),gLt=Fe(8),_Lt=Fe(4),ELt=Fe(4),vLt=Fe(4),yLt=Fe(8),xLt=Fe(16),bLt=Fe(16),SLt=Fe(16),NLt=Fe(32),ALt=Fe(32),TLt=Fe(48),CLt=Fe(64),wLt=Fe(1152),ILt=Fe(1152);var LLt=(16+224*nr)*nr,OLt=(5+72*nr)*nr,BLt=(71+1408*nr)*nr*nr,DLt=Fe(4),FLt=Fe(4),kLt=Fe(4),GLt=Fe(4),ULt=Fe(4),VLt=Fe(4),$Lt=Fe(4),zLt=Fe(4),jLt=Fe(4),HLt=Fe(4),WLt=Fe(24),ZLt=Fe(24),XLt=Fe(24),qLt=Fe(24),KLt=Fe(24),YLt=Fe(24),JLt=Fe(24),QLt=Fe(24),eOt=Fe(24),tOt=Fe(24),rOt=Fe(1152),nOt=Fe(1152),iOt=Fe(1152),aOt=Fe(1152),oOt=Fe(1152),sOt=Fe(2304),lOt=Fe(2304),cOt=Fe(3456),uOt=Fe(5760),dOt=Fe(8),fOt=Fe(8),pOt=Fe(8),hOt=Fe(16),mOt=Fe(24),gOt=Fe(48),_Ot=Fe(48),EOt=Fe(96),vOt=Fe(192),yOt=Fe(384),xOt=Fe(384),bOt=Fe(384),SOt=Fe(768);var NOt=Fe(96),AOt=Fe(96),TOt=Fe(96),COt=Fe(1152);var Lse=Math.pow(2,-52),Lb=new Uint32Array(512),ef=class{static from(e,n=POe,i=MOe){let a=e.length,o=new Float64Array(a*2);for(let s=0;s<a;s++){let l=e[s];o[2*s]=n(l),o[2*s+1]=i(l)}return new ef(o)}constructor(e){let n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;let i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){let{coords:e,_hullPrev:n,_hullNext:i,_hullTri:a,_hullHash:o}=this,s=e.length>>1,l=1/0,c=1/0,u=-1/0,d=-1/0;for(let R=0;R<s;R++){let L=e[2*R],O=e[2*R+1];L<l&&(l=L),O<c&&(c=O),L>u&&(u=L),O>d&&(d=O),this._ids[R]=R}let f=(l+u)/2,p=(c+d)/2,h,m,_;for(let R=0,L=1/0;R<s;R++){let O=RB(f,p,e[2*R],e[2*R+1]);O<L&&(h=R,L=O)}let E=e[2*h],v=e[2*h+1];for(let R=0,L=1/0;R<s;R++){if(R===h)continue;let O=RB(E,v,e[2*R],e[2*R+1]);O<L&&O>0&&(m=R,L=O)}let y=e[2*m],x=e[2*m+1],S=1/0;for(let R=0;R<s;R++){if(R===h||R===m)continue;let L=IOe(E,v,y,x,e[2*R],e[2*R+1]);L<S&&(_=R,S=L)}let N=e[2*_],w=e[2*_+1];if(S===1/0){for(let O=0;O<s;O++)this._dists[O]=e[2*O]-e[0]||e[2*O+1]-e[1];tg(this._ids,this._dists,0,s-1);let R=new Uint32Array(s),L=0;for(let O=0,H=-1/0;O<s;O++){let U=this._ids[O],X=this._dists[U];X>H&&(R[L++]=U,H=X)}this.hull=R.subarray(0,L),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(eg(E,v,y,x,N,w)<0){let R=m,L=y,O=x;m=_,y=N,x=w,_=R,N=L,w=O}let T=ROe(E,v,y,x,N,w);this._cx=T.x,this._cy=T.y;for(let R=0;R<s;R++)this._dists[R]=RB(e[2*R],e[2*R+1],T.x,T.y);tg(this._ids,this._dists,0,s-1),this._hullStart=h;let I=3;i[h]=n[_]=m,i[m]=n[h]=_,i[_]=n[m]=h,a[h]=0,a[m]=1,a[_]=2,o.fill(-1),o[this._hashKey(E,v)]=h,o[this._hashKey(y,x)]=m,o[this._hashKey(N,w)]=_,this.trianglesLen=0,this._addTriangle(h,m,_,-1,-1,-1);for(let R=0,L,O;R<this._ids.length;R++){let H=this._ids[R],U=e[2*H],X=e[2*H+1];if(R>0&&Math.abs(U-L)<=Lse&&Math.abs(X-O)<=Lse||(L=U,O=X,H===h||H===m||H===_))continue;let W=0;for(let ge=0,et=this._hashKey(U,X);ge<this._hashSize&&(W=o[(et+ge)%this._hashSize],!(W!==-1&&W!==i[W]));ge++);W=n[W];let ne=W,be;for(;be=i[ne],eg(U,X,e[2*ne],e[2*ne+1],e[2*be],e[2*be+1])>=0;)if(ne=be,ne===W){ne=-1;break}if(ne===-1)continue;let q=this._addTriangle(ne,H,i[ne],-1,-1,a[ne]);a[H]=this._legalize(q+2),a[ne]=q,I++;let ie=i[ne];for(;be=i[ie],eg(U,X,e[2*ie],e[2*ie+1],e[2*be],e[2*be+1])<0;)q=this._addTriangle(ie,H,be,a[H],-1,a[ie]),a[H]=this._legalize(q+2),i[ie]=ie,I--,ie=be;if(ne===W)for(;be=n[ne],eg(U,X,e[2*be],e[2*be+1],e[2*ne],e[2*ne+1])<0;)q=this._addTriangle(be,H,ne,-1,a[ne],a[be]),this._legalize(q+2),a[be]=q,i[ne]=ne,I--,ne=be;this._hullStart=n[H]=ne,i[ne]=n[ie]=H,i[H]=ie,o[this._hashKey(U,X)]=H,o[this._hashKey(e[2*ne],e[2*ne+1])]=ne}this.hull=new Uint32Array(I);for(let R=0,L=this._hullStart;R<I;R++)this.hull[R]=L,L=i[L];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(COe(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){let{_triangles:n,_halfedges:i,coords:a}=this,o=0,s=0;for(;;){let l=i[e],c=e-e%3;if(s=c+(e+2)%3,l===-1){if(o===0)break;e=Lb[--o];continue}let u=l-l%3,d=c+(e+1)%3,f=u+(l+2)%3,p=n[s],h=n[e],m=n[d],_=n[f];if(wOe(a[2*p],a[2*p+1],a[2*h],a[2*h+1],a[2*m],a[2*m+1],a[2*_],a[2*_+1])){n[e]=_,n[l]=p;let v=i[f];if(v===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=e;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(e,v),this._link(l,i[s]),this._link(s,f);let y=u+(l+1)%3;o<Lb.length&&(Lb[o++]=y)}else{if(o===0)break;e=Lb[--o]}}return s}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,i,a,o,s){let l=this.trianglesLen;return this._triangles[l]=e,this._triangles[l+1]=n,this._triangles[l+2]=i,this._link(l,a),this._link(l+1,o),this._link(l+2,s),this.trianglesLen+=3,l}};function COe(t,e){let n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function RB(t,e,n,i){let a=t-n,o=e-i;return a*a+o*o}function wOe(t,e,n,i,a,o,s,l){let c=t-s,u=e-l,d=n-s,f=i-l,p=a-s,h=o-l,m=c*c+u*u,_=d*d+f*f,E=p*p+h*h;return c*(f*E-_*h)-u*(d*E-_*p)+m*(d*h-f*p)<0}function IOe(t,e,n,i,a,o){let s=n-t,l=i-e,c=a-t,u=o-e,d=s*s+l*l,f=c*c+u*u,p=.5/(s*u-l*c),h=(u*d-l*f)*p,m=(s*f-c*d)*p;return h*h+m*m}function ROe(t,e,n,i,a,o){let s=n-t,l=i-e,c=a-t,u=o-e,d=s*s+l*l,f=c*c+u*u,p=.5/(s*u-l*c),h=t+(u*d-l*f)*p,m=e+(s*f-c*d)*p;return{x:h,y:m}}function tg(t,e,n,i){if(i-n<=20)for(let a=n+1;a<=i;a++){let o=t[a],s=e[o],l=a-1;for(;l>=n&&e[t[l]]>s;)t[l+1]=t[l--];t[l+1]=o}else{let a=n+i>>1,o=n+1,s=i;q6(t,a,o),e[t[n]]>e[t[i]]&&q6(t,n,i),e[t[o]]>e[t[i]]&&q6(t,o,i),e[t[n]]>e[t[o]]&&q6(t,n,o);let l=t[o],c=e[l];for(;;){do o++;while(e[t[o]]<c);do s--;while(e[t[s]]>c);if(s<o)break;q6(t,o,s)}t[n+1]=t[s],t[s]=l,i-o+1>=s-n?(tg(t,e,o,i),tg(t,e,n,s-1)):(tg(t,e,n,s-1),tg(t,e,o,i))}}function q6(t,e,n){let i=t[e];t[e]=t[n],t[n]=i}function POe(t){return t[0]}function MOe(t){return t[1]}var us=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,i){e=+e,n=+n,i=+i;let a=e+i,o=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${a},${o}`:(Math.abs(this._x1-a)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+a+","+o),i&&(this._+=`A${i},${i},0,1,1,${e-i},${n}A${i},${i},0,1,1,${this._x1=a},${this._y1=o}`)}rect(e,n,i,a){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+i}v${+a}h${-i}Z`}value(){return this._||null}};var tf=class{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}};var K6=class{constructor(e,[n,i,a,o]=[0,0,960,500]){if(!((a=+a)>=(n=+n))||!((o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=a,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:e,hull:n,triangles:i},vectors:a}=this,o,s,l=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let _=0,E=0,v=i.length,y,x;_<v;_+=3,E+=2){let S=i[_]*2,N=i[_+1]*2,w=i[_+2]*2,T=e[S],I=e[S+1],R=e[N],L=e[N+1],O=e[w],H=e[w+1],U=R-T,X=L-I,W=O-T,ne=H-I,be=(U*ne-X*W)*2;if(Math.abs(be)<1e-9){if(o===void 0){o=s=0;for(let ie of n)o+=e[ie*2],s+=e[ie*2+1];o/=n.length,s/=n.length}let q=1e9*Math.sign((o-T)*ne-(s-I)*W);y=(T+O)/2-q*ne,x=(I+H)/2+q*W}else{let q=1/be,ie=U*U+X*X,ge=W*W+ne*ne;y=T+(ne*ie-X*ge)*q,x=I+(U*ge-W*ie)*q}l[E]=y,l[E+1]=x}let c=n[n.length-1],u,d=c*4,f,p=e[2*c],h,m=e[2*c+1];a.fill(0);for(let _=0;_<n.length;++_)c=n[_],u=d,f=p,h=m,d=c*4,p=e[2*c],m=e[2*c+1],a[u+2]=a[d]=h-m,a[u+3]=a[d+1]=p-f}render(e){let n=e==null?e=new us:void 0,{delaunay:{halfedges:i,inedges:a,hull:o},circumcenters:s,vectors:l}=this;if(o.length<=1)return null;for(let d=0,f=i.length;d<f;++d){let p=i[d];if(p<d)continue;let h=Math.floor(d/3)*2,m=Math.floor(p/3)*2,_=s[h],E=s[h+1],v=s[m],y=s[m+1];this._renderSegment(_,E,v,y,e)}let c,u=o[o.length-1];for(let d=0;d<o.length;++d){c=u,u=o[d];let f=Math.floor(a[u]/3)*2,p=s[f],h=s[f+1],m=c*4,_=this._project(p,h,l[m+2],l[m+3]);_&&this._renderSegment(p,h,_[0],_[1],e)}return n&&n.value()}renderBounds(e){let n=e==null?e=new us:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){let i=n==null?n=new us:void 0,a=this._clip(e);if(a===null||!a.length)return;n.moveTo(a[0],a[1]);let o=a.length;for(;a[0]===a[o-2]&&a[1]===a[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(a[s]!==a[s-2]||a[s+1]!==a[s-1])&&n.lineTo(a[s],a[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){let{delaunay:{points:e}}=this;for(let n=0,i=e.length/2;n<i;++n){let a=this.cellPolygon(n);a&&(a.index=n,yield a)}}cellPolygon(e){let n=new tf;return this.renderCell(e,n),n.value()}_renderSegment(e,n,i,a,o){let s,l=this._regioncode(e,n),c=this._regioncode(i,a);l===0&&c===0?(o.moveTo(e,n),o.lineTo(i,a)):(s=this._clipSegment(e,n,i,a,l,c))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(e,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(e,n,i)===e}*neighbors(e){let n=this._clip(e);if(n)for(let i of this.delaunay.neighbors(e)){let a=this._clip(i);if(a){e:for(let o=0,s=n.length;o<s;o+=2)for(let l=0,c=a.length;l<c;l+=2)if(n[o]===a[l]&&n[o+1]===a[l+1]&&n[(o+2)%s]===a[(l+c-2)%c]&&n[(o+3)%s]===a[(l+c-1)%c]){yield i;break e}}}}_cell(e){let{circumcenters:n,delaunay:{inedges:i,halfedges:a,triangles:o}}=this,s=i[e];if(s===-1)return null;let l=[],c=s;do{let u=Math.floor(c/3);if(l.push(n[u*2],n[u*2+1]),c=c%3===2?c-2:c+1,o[c]!==e)break;c=a[c]}while(c!==s&&c!==-1);return l}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let n=this._cell(e);if(n===null)return null;let{vectors:i}=this,a=e*4;return this._simplify(i[a]||i[a+1]?this._clipInfinite(e,n,i[a],i[a+1],i[a+2],i[a+3]):this._clipFinite(e,n))}_clipFinite(e,n){let i=n.length,a=null,o,s,l=n[i-2],c=n[i-1],u,d=this._regioncode(l,c),f,p=0;for(let h=0;h<i;h+=2)if(o=l,s=c,l=n[h],c=n[h+1],u=d,d=this._regioncode(l,c),u===0&&d===0)f=p,p=0,a?a.push(l,c):a=[l,c];else{let m,_,E,v,y;if(u===0){if((m=this._clipSegment(o,s,l,c,u,d))===null)continue;[_,E,v,y]=m}else{if((m=this._clipSegment(l,c,o,s,d,u))===null)continue;[v,y,_,E]=m,f=p,p=this._edgecode(_,E),f&&p&&this._edge(e,f,p,a,a.length),a?a.push(_,E):a=[_,E]}f=p,p=this._edgecode(v,y),f&&p&&this._edge(e,f,p,a,a.length),a?a.push(v,y):a=[v,y]}if(a)f=p,p=this._edgecode(a[0],a[1]),f&&p&&this._edge(e,f,p,a,a.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return a}_clipSegment(e,n,i,a,o,s){let l=o<s;for(l&&([e,n,i,a,o,s]=[i,a,e,n,s,o]);;){if(o===0&&s===0)return l?[i,a,e,n]:[e,n,i,a];if(o&s)return null;let c,u,d=o||s;d&8?(c=e+(i-e)*(this.ymax-n)/(a-n),u=this.ymax):d&4?(c=e+(i-e)*(this.ymin-n)/(a-n),u=this.ymin):d&2?(u=n+(a-n)*(this.xmax-e)/(i-e),c=this.xmax):(u=n+(a-n)*(this.xmin-e)/(i-e),c=this.xmin),o?(e=c,n=u,o=this._regioncode(e,n)):(i=c,a=u,s=this._regioncode(i,a))}}_clipInfinite(e,n,i,a,o,s){let l=Array.from(n),c;if((c=this._project(l[0],l[1],i,a))&&l.unshift(c[0],c[1]),(c=this._project(l[l.length-2],l[l.length-1],o,s))&&l.push(c[0],c[1]),l=this._clipFinite(e,l))for(let u=0,d=l.length,f,p=this._edgecode(l[d-2],l[d-1]);u<d;u+=2)f=p,p=this._edgecode(l[u],l[u+1]),f&&p&&(u=this._edge(e,f,p,l,u),d=l.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(e,n,i,a,o){for(;n!==i;){let s,l;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,l=this.ymin;break}(a[o]!==s||a[o+1]!==l)&&this.contains(e,s,l)&&(a.splice(o,0,s,l),o+=2)}return o}_project(e,n,i,a){let o=1/0,s,l,c;if(a<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/a)<o&&(c=this.ymin,l=e+(o=s)*i)}else if(a>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/a)<o&&(c=this.ymax,l=e+(o=s)*i)}if(i>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/i)<o&&(l=this.xmax,c=n+(o=s)*a)}else if(i<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/i)<o&&(l=this.xmin,c=n+(o=s)*a)}return[l,c]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let n=0;n<e.length;n+=2){let i=(n+2)%e.length,a=(n+4)%e.length;(e[n]===e[i]&&e[i]===e[a]||e[n+1]===e[i+1]&&e[i+1]===e[a+1])&&(e.splice(i,2),n-=2)}e.length||(e=null)}return e}};var LOe=2*Math.PI,rg=Math.pow;function OOe(t){return t[0]}function BOe(t){return t[1]}function DOe(t){let{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){let a=2*e[i],o=2*e[i+1],s=2*e[i+2];if((n[s]-n[a])*(n[o+1]-n[a+1])-(n[o]-n[a])*(n[s+1]-n[a+1])>1e-10)return!1}return!0}function FOe(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}var rf=class{static from(e,n=OOe,i=BOe,a){return new rf("length"in e?kOe(e,n,i,a):Float64Array.from(GOe(e,n,i,a)))}constructor(e){this._delaunator=new ef(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&DOe(e)){this.collinear=Int32Array.from({length:n.length/2},(p,h)=>h).sort((p,h)=>n[2*p]-n[2*h]||n[2*p+1]-n[2*h+1]);let c=this.collinear[0],u=this.collinear[this.collinear.length-1],d=[n[2*c],n[2*c+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,h=n.length/2;p<h;++p){let m=FOe(n[2*p],n[2*p+1],f);n[2*p]=m[0],n[2*p+1]=m[1]}this._delaunator=new ef(n)}else delete this.collinear;let i=this.halfedges=this._delaunator.halfedges,a=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let c=0,u=i.length;c<u;++c){let d=o[c%3===2?c-2:c+1];(i[c]===-1||s[d]===-1)&&(s[d]=c)}for(let c=0,u=a.length;c<u;++c)l[a[c]]=c;a.length<=2&&a.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=a[0],s[a[0]]=1,a.length===2&&(s[a[1]]=0,this.triangles[1]=a[1],this.triangles[2]=a[1]))}voronoi(e){return new K6(this,e)}*neighbors(e){let{inedges:n,hull:i,_hullIndex:a,halfedges:o,triangles:s,collinear:l}=this;if(l){let f=l.indexOf(e);f>0&&(yield l[f-1]),f<l.length-1&&(yield l[f+1]);return}let c=n[e];if(c===-1)return;let u=c,d=-1;do{if(yield d=s[u],u=u%3===2?u-2:u+1,s[u]!==e)return;if(u=o[u],u===-1){let f=i[(a[e]+1)%i.length];f!==d&&(yield f);return}}while(u!==c)}find(e,n,i=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;let a=i,o;for(;(o=this._step(i,e,n))>=0&&o!==i&&o!==a;)i=o;return o}_step(e,n,i){let{inedges:a,hull:o,_hullIndex:s,halfedges:l,triangles:c,points:u}=this;if(a[e]===-1||!u.length)return(e+1)%(u.length>>1);let d=e,f=rg(n-u[e*2],2)+rg(i-u[e*2+1],2),p=a[e],h=p;do{let m=c[h],_=rg(n-u[m*2],2)+rg(i-u[m*2+1],2);if(_<f&&(f=_,d=m),h=h%3===2?h-2:h+1,c[h]!==e)break;if(h=l[h],h===-1){if(h=o[(s[e]+1)%o.length],h!==m&&rg(n-u[h*2],2)+rg(i-u[h*2+1],2)<f)return h;break}}while(h!==p);return d}render(e){let n=e==null?e=new us:void 0,{points:i,halfedges:a,triangles:o}=this;for(let s=0,l=a.length;s<l;++s){let c=a[s];if(c<s)continue;let u=o[s]*2,d=o[c]*2;e.moveTo(i[u],i[u+1]),e.lineTo(i[d],i[d+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;let i=e==null?e=new us:void 0,{points:a}=this;for(let o=0,s=a.length;o<s;o+=2){let l=a[o],c=a[o+1];e.moveTo(l+n,c),e.arc(l,c,n,0,LOe)}return i&&i.value()}renderHull(e){let n=e==null?e=new us:void 0,{hull:i,points:a}=this,o=i[0]*2,s=i.length;e.moveTo(a[o],a[o+1]);for(let l=1;l<s;++l){let c=2*i[l];e.lineTo(a[c],a[c+1])}return e.closePath(),n&&n.value()}hullPolygon(){let e=new tf;return this.renderHull(e),e.value()}renderTriangle(e,n){let i=n==null?n=new us:void 0,{points:a,triangles:o}=this,s=o[e*=3]*2,l=o[e+1]*2,c=o[e+2]*2;return n.moveTo(a[s],a[s+1]),n.lineTo(a[l],a[l+1]),n.lineTo(a[c],a[c+1]),n.closePath(),i&&i.value()}*trianglePolygons(){let{triangles:e}=this;for(let n=0,i=e.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(e){let n=new tf;return this.renderTriangle(e,n),n.value()}};function kOe(t,e,n,i){let a=t.length,o=new Float64Array(a*2);for(let s=0;s<a;++s){let l=t[s];o[s*2]=e.call(i,l,s,t),o[s*2+1]=n.call(i,l,s,t)}return o}function*GOe(t,e,n,i){let a=0;for(let o of t)yield e.call(i,o,a,t),yield n.call(i,o,a,t),++a}function PB(t){pe.call(this,null,t)}PB.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var UOe=[-1e5,-1e5,1e5,1e5];ze(PB,pe,{transform(t,e){let n=t.as||"path",i=e.source;if(!i||!i.length)return e;let a=t.size;a=a?[0,0,a[0],a[1]]:(a=t.extent)?[a[0][0],a[0][1],a[1][0],a[1][1]]:UOe;let o=this.value=rf.from(i,t.x,t.y).voronoi(a);for(let s=0,l=i.length;s<l;++s){let c=o.cellPolygon(s);i[s][n]=c&&!$Oe(c)?VOe(c):null}return e.reflow(t.modified()).modifies(n)}});function VOe(t){let e=t[0][0],n=t[0][1],i=t.length-1;for(;t[i][0]===e&&t[i][1]===n;--i);return"M"+t.slice(0,i+1).join("L")+"Z"}function $Oe(t){return t.length===2&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]}var BB={};mr(BB,{wordcloud:()=>OB});var LB=Math.PI/180,Y6=64,Ob=2048;function zOe(){var t=[256,256],e,n,i,a,o,s,l,c=Ose,u=[],d=Math.random,f={};f.layout=function(){for(var m=p(is()),_=qOe((t[0]>>5)*t[1]),E=null,v=u.length,y=-1,x=[],S=u.map(w=>({text:e(w),font:n(w),style:a(w),weight:o(w),rotate:s(w),size:~~(i(w)+1e-14),padding:l(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,T)=>T.size-w.size);++y<v;){var N=S[y];N.x=t[0]*(d()+.5)>>1,N.y=t[1]*(d()+.5)>>1,jOe(m,N,S,y),N.hasText&&h(_,N,E)&&(x.push(N),E?WOe(E,N):E=[{x:N.x+N.x0,y:N.y+N.y0},{x:N.x+N.x1,y:N.y+N.y1}],N.x-=t[0]>>1,N.y-=t[1]>>1)}return x};function p(m){m.width=m.height=1;var _=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(Y6<<5)/_,m.height=Ob/_;var E=m.getContext("2d");return E.fillStyle=E.strokeStyle="red",E.textAlign="center",{context:E,ratio:_}}function h(m,_,E){for(var v=_.x,y=_.y,x=Math.hypot(t[0],t[1]),S=c(t),N=d()<.5?1:-1,w=-N,T,I,R;(T=S(w+=N))&&(I=~~T[0],R=~~T[1],!(Math.min(Math.abs(I),Math.abs(R))>=x));)if(_.x=v+I,_.y=y+R,!(_.x+_.x0<0||_.y+_.y0<0||_.x+_.x1>t[0]||_.y+_.y1>t[1])&&(!E||!HOe(_,m,t[0]))&&(!E||ZOe(_,E))){for(var L=_.sprite,O=_.width>>5,H=t[0]>>5,U=_.x-(O<<4),X=U&127,W=32-X,ne=_.y1-_.y0,be=(_.y+_.y0)*H+(U>>5),q,ie=0;ie<ne;ie++){q=0;for(var ge=0;ge<=O;ge++)m[be+ge]|=q<<W|(ge<O?(q=L[ie*O+ge])>>>X:0);be+=H}return _.sprite=null,!0}return!1}return f.words=function(m){return arguments.length?(u=m,f):u},f.size=function(m){return arguments.length?(t=[+m[0],+m[1]],f):t},f.font=function(m){return arguments.length?(n=w1(m),f):n},f.fontStyle=function(m){return arguments.length?(a=w1(m),f):a},f.fontWeight=function(m){return arguments.length?(o=w1(m),f):o},f.rotate=function(m){return arguments.length?(s=w1(m),f):s},f.text=function(m){return arguments.length?(e=w1(m),f):e},f.spiral=function(m){return arguments.length?(c=KOe[m]||m,f):c},f.fontSize=function(m){return arguments.length?(i=w1(m),f):i},f.padding=function(m){return arguments.length?(l=w1(m),f):l},f.random=function(m){return arguments.length?(d=m,f):d},f}function jOe(t,e,n,i){if(!e.sprite){var a=t.context,o=t.ratio;a.clearRect(0,0,(Y6<<5)/o,Ob/o);var s=0,l=0,c=0,u=n.length,d,f,p,h,m;for(--i;++i<u;){if(e=n[i],a.save(),a.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font,d=a.measureText(e.text+"m").width*o,p=e.size<<1,e.rotate){var _=Math.sin(e.rotate*LB),E=Math.cos(e.rotate*LB),v=d*E,y=d*_,x=p*E,S=p*_;d=Math.max(Math.abs(v+S),Math.abs(v-S))+31>>5<<5,p=~~Math.max(Math.abs(y+x),Math.abs(y-x))}else d=d+31>>5<<5;if(p>c&&(c=p),s+d>=Y6<<5&&(s=0,l+=c,c=0),l+p>=Ob)break;a.translate((s+(d>>1))/o,(l+(p>>1))/o),e.rotate&&a.rotate(e.rotate*LB),a.fillText(e.text,0,0),e.padding&&(a.lineWidth=2*e.padding,a.strokeText(e.text,0,0)),a.restore(),e.width=d,e.height=p,e.xoff=s,e.yoff=l,e.x1=d>>1,e.y1=p>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,s+=d}for(var N=a.getImageData(0,0,(Y6<<5)/o,Ob/o).data,w=[];--i>=0;)if(e=n[i],!!e.hasText){for(d=e.width,f=d>>5,p=e.y1-e.y0,h=0;h<p*f;h++)w[h]=0;if(s=e.xoff,s==null)return;l=e.yoff;var T=0,I=-1;for(m=0;m<p;m++){for(h=0;h<d;h++){var R=f*m+(h>>5),L=N[(l+m)*(Y6<<5)+(s+h)<<2]?1<<31-h%32:0;w[R]|=L,T|=L}T?I=m:(e.y0++,p--,m--,l++)}e.y1=e.y0+I,e.sprite=w.slice(0,(e.y1-e.y0)*f)}}}function HOe(t,e,n){n>>=5;for(var i=t.sprite,a=t.width>>5,o=t.x-(a<<4),s=o&127,l=32-s,c=t.y1-t.y0,u=(t.y+t.y0)*n+(o>>5),d,f=0;f<c;f++){d=0;for(var p=0;p<=a;p++)if((d<<l|(p<a?(d=i[f*a+p])>>>s:0))&e[u+p])return!0;u+=n}return!1}function WOe(t,e){var n=t[0],i=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>i.x&&(i.x=e.x+e.x1),e.y+e.y1>i.y&&(i.y=e.y+e.y1)}function ZOe(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Ose(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function XOe(t){var e=4,n=e*t[0]/t[1],i=0,a=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:i+=n;break;case 1:a+=e;break;case 2:i-=n;break;default:a-=e;break}return[i,a]}}function qOe(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function w1(t){return typeof t=="function"?t:function(){return t}}var KOe={archimedean:Ose,rectangular:XOe},Bse=["x","y","font","fontSize","fontStyle","fontWeight","angle"],YOe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function OB(t){pe.call(this,zOe(),t)}OB.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Bse}]};ze(OB,pe,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&he("Wordcloud size dimensions must be non-zero.");function n(m){let _=t[m];return wt(_)&&e.modified(_.fields)}let i=t.modified();if(!(i||e.changed(e.ADD_REM)||YOe.some(n)))return;let a=e.materialize(e.SOURCE).source,o=this.value,s=t.as||Bse,l=t.fontSize||14,c;if(wt(l)?c=t.fontSizeRange:l=en(l),c){let m=l,_=tr("sqrt")().domain(Fa(a,m)).range(c);l=E=>_(m(E))}a.forEach(m=>{m[s[0]]=NaN,m[s[1]]=NaN,m[s[3]]=0});let u=o.words(a).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(l).random(es).layout(),d=o.size(),f=d[0]>>1,p=d[1]>>1,h=u.length;for(let m=0,_,E;m<h;++m)_=u[m],E=_.datum,E[s[0]]=_.x+f,E[s[1]]=_.y+p,E[s[2]]=_.font,E[s[3]]=_.size,E[s[4]]=_.style,E[s[5]]=_.weight,E[s[6]]=_.rotate;return e.reflow(i).modifies(s)}});var kB={};mr(kB,{crossfilter:()=>DB,resolvefilter:()=>FB});var JOe=t=>new Uint8Array(t),QOe=t=>new Uint16Array(t),J6=t=>new Uint32Array(t);function eBe(){let t=8,e=[],n=J6(0),i=Bb(0,t),a=Bb(0,t);return{data:()=>e,seen:()=>n=tBe(n,e.length),add(o){for(let s=0,l=e.length,c=o.length,u;s<c;++s)u=o[s],u._index=l++,e.push(u)},remove(o,s){let l=e.length,c=Array(l-o),u=e,d,f,p;for(f=0;!s[f]&&f<l;++f)c[f]=e[f],u[f]=f;for(p=f;f<l;++f)d=e[f],s[f]?u[f]=-1:(u[f]=p,i[p]=i[f],a[p]=a[f],c[p]=d,d._index=p++),i[f]=0;return e=c,u},size:()=>e.length,curr:()=>i,prev:()=>a,reset:o=>a[o]=i[o],all:()=>t<257?255:t<65537?65535:4294967295,set(o,s){i[o]|=s},clear(o,s){i[o]&=~s},resize(o,s){let l=i.length;(o>l||s>t)&&(t=Math.max(s,t),i=Bb(o,t,i),a=Bb(o,t))}}}function tBe(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function Bb(t,e,n){let i=(e<257?JOe:e<65537?QOe:J6)(t);return n&&i.set(n),i}function Dse(t,e,n){let i=1<<e;return{one:i,zero:~i,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(a,o){let s=this,l=s.bisect(s.range,a.value),c=a.index,u=l[0],d=l[1],f=c.length,p;for(p=0;p<u;++p)o[c[p]]|=i;for(p=d;p<f;++p)o[c[p]]|=i;return s}}}function Fse(){let t=J6(0),e=[],n=0;function i(l,c,u){if(!c.length)return[];let d=n,f=c.length,p=J6(f),h=Array(f),m,_,E;for(E=0;E<f;++E)h[E]=l(c[E]),p[E]=E;if(h=rBe(h,p),d)m=e,_=t,e=Array(d+f),t=J6(d+f),nBe(u,m,_,d,h,p,f,e,t);else{if(u>0)for(E=0;E<f;++E)p[E]+=u;e=h,t=p}return n=d+f,{index:p,value:h}}function a(l,c){let u=n,d,f,p;for(f=0;!c[t[f]]&&f<u;++f);for(p=f;f<u;++f)c[d=t[f]]||(t[p]=d,e[p]=e[f],++p);n=u-l}function o(l){for(let c=0,u=n;c<u;++c)t[c]=l[t[c]]}function s(l,c){let u;return c?u=c.length:(c=e,u=n),[Dw(c,l[0],0,u),Op(c,l[1],0,u)]}return{insert:i,remove:a,bisect:s,reindex:o,index:()=>t,size:()=>n}}function rBe(t,e){return t.sort.call(e,(n,i)=>{let a=t[n],o=t[i];return a<o?-1:a>o?1:0}),Ny(t,e)}function nBe(t,e,n,i,a,o,s,l,c){let u=0,d=0,f;for(f=0;u<i&&d<s;++f)e[u]<a[d]?(l[f]=e[u],c[f]=n[u++]):(l[f]=a[d],c[f]=o[d++]+t);for(;u<i;++u,++f)l[f]=e[u],c[f]=n[u];for(;d<s;++d,++f)l[f]=a[d],c[f]=o[d]+t}function DB(t){pe.call(this,eBe(),t),this._indices=null,this._dims=null}DB.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ze(DB,pe,{transform(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(i=>e.modified(i.fields));return n?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){let n=t.fields,i=t.query,a=this._indices={},o=this._dims=[],s=i.length,l=0,c,u;for(;l<s;++l)c=n[l].fname,u=a[c]||(a[c]=Fse()),o.push(Dse(u,l,i[l]));return this.eval(t,e)},reinit(t,e){let n=e.materialize().fork(),i=t.fields,a=t.query,o=this._indices,s=this._dims,l=this.value,c=l.curr(),u=l.prev(),d=l.all(),f=n.rem=n.add,p=n.mod,h=a.length,m={},_,E,v,y,x,S,N,w,T;if(u.set(c),e.rem.length&&(x=this.remove(t,e,n)),e.add.length&&l.add(e.add),e.mod.length)for(S={},y=e.mod,N=0,w=y.length;N<w;++N)S[y[N]._index]=1;for(N=0;N<h;++N)T=i[N],(!s[N]||t.modified("fields",N)||e.modified(T.fields))&&(v=T.fname,(_=m[v])||(o[v]=E=Fse(),m[v]=_=E.insert(T,e.source,0)),s[N]=Dse(E,N,a[N]).onAdd(_,c));for(N=0,w=l.data().length;N<w;++N)x[N]||(u[N]!==c[N]?f.push(N):S[N]&&c[N]!==d&&p.push(N));return l.mask=(1<<h)-1,n},eval(t,e){let n=e.materialize().fork(),i=this._dims.length,a=0;return e.rem.length&&(this.remove(t,e,n),a|=(1<<i)-1),t.modified("query")&&!t.modified("fields")&&(a|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),a|=(1<<i)-1),e.mod.length&&(this.modify(e,n),a|=(1<<i)-1),this.value.mask=a,n},insert(t,e,n){let i=e.add,a=this.value,o=this._dims,s=this._indices,l=t.fields,c={},u=n.add,d=a.size()+i.length,f=o.length,p=a.size(),h,m,_;a.resize(d,f),a.add(i);let E=a.curr(),v=a.prev(),y=a.all();for(h=0;h<f;++h)m=l[h].fname,_=c[m]||(c[m]=s[m].insert(l[h],i,p)),o[h].onAdd(_,E);for(;p<d;++p)v[p]=y,E[p]!==y&&u.push(p)},modify(t,e){let n=e.mod,i=this.value,a=i.curr(),o=i.all(),s=t.mod,l,c,u;for(l=0,c=s.length;l<c;++l)u=s[l]._index,a[u]!==o&&n.push(u)},remove(t,e,n){let i=this._indices,a=this.value,o=a.curr(),s=a.prev(),l=a.all(),c={},u=n.rem,d=e.rem,f,p,h,m;for(f=0,p=d.length;f<p;++f)h=d[f]._index,c[h]=1,s[h]=m=o[h],o[h]=l,m!==l&&u.push(h);for(h in i)i[h].remove(p,c);return this.reindex(e,p,c),c},reindex(t,e,n){let i=this._indices,a=this.value;t.runAfter(()=>{let o=a.remove(e,n);for(let s in i)i[s].reindex(o)})},update(t,e,n){let i=this._dims,a=t.query,o=e.stamp,s=i.length,l=0,c,u;for(n.filters=0,u=0;u<s;++u)t.modified("query",u)&&(c=u,++l);if(l===1)l=i[c].one,this.incrementOne(i[c],a[c],n.add,n.rem);else for(u=0,l=0;u<s;++u)t.modified("query",u)&&(l|=i[u].one,this.incrementAll(i[u],a[u],o,n.add),n.rem=n.add);return l},incrementAll(t,e,n,i){let a=this.value,o=a.seen(),s=a.curr(),l=a.prev(),c=t.index(),u=t.bisect(t.range),d=t.bisect(e),f=d[0],p=d[1],h=u[0],m=u[1],_=t.one,E,v,y;if(f<h)for(E=f,v=Math.min(h,p);E<v;++E)y=c[E],o[y]!==n&&(l[y]=s[y],o[y]=n,i.push(y)),s[y]^=_;else if(f>h)for(E=h,v=Math.min(f,m);E<v;++E)y=c[E],o[y]!==n&&(l[y]=s[y],o[y]=n,i.push(y)),s[y]^=_;if(p>m)for(E=Math.max(f,m),v=p;E<v;++E)y=c[E],o[y]!==n&&(l[y]=s[y],o[y]=n,i.push(y)),s[y]^=_;else if(p<m)for(E=Math.max(h,p),v=m;E<v;++E)y=c[E],o[y]!==n&&(l[y]=s[y],o[y]=n,i.push(y)),s[y]^=_;t.range=e.slice()},incrementOne(t,e,n,i){let a=this.value,o=a.curr(),s=t.index(),l=t.bisect(t.range),c=t.bisect(e),u=c[0],d=c[1],f=l[0],p=l[1],h=t.one,m,_,E;if(u<f)for(m=u,_=Math.min(f,d);m<_;++m)E=s[m],o[E]^=h,n.push(E);else if(u>f)for(m=f,_=Math.min(u,p);m<_;++m)E=s[m],o[E]^=h,i.push(E);if(d>p)for(m=Math.max(u,p),_=d;m<_;++m)E=s[m],o[E]^=h,n.push(E);else if(d<p)for(m=Math.max(f,d),_=p;m<_;++m)E=s[m],o[E]^=h,i.push(E);t.range=e.slice()}});function FB(t){pe.call(this,null,t)}FB.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ze(FB,pe,{transform(t,e){let n=~(t.ignore||0),i=t.filter,a=i.mask;if(!(a&n))return e.StopPropagation;let o=e.fork(e.ALL),s=i.data(),l=i.curr(),c=i.prev(),u=d=>l[d]&n?null:s[d];return o.filter(o.MOD,u),a&a-1?(o.filter(o.ADD,d=>{let f=l[d]&n;return!f&&f^c[d]&n?s[d]:null}),o.filter(o.REM,d=>{let f=l[d]&n;return f&&!(f^(f^c[d]&n))?s[d]:null})):(o.filter(o.ADD,u),o.filter(o.REM,d=>(l[d]&n)===a?s[d]:null)),o.filter(o.SOURCE,d=>u(d._index))}});var iBe="RawCode",cu="Literal",aBe="Property",oBe="Identifier",sBe="ArrayExpression",lBe="BinaryExpression",jB="CallExpression",cBe="ConditionalExpression",uBe="LogicalExpression",dBe="MemberExpression",fBe="ObjectExpression",pBe="UnaryExpression";function qs(t){this.type=t}qs.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=hBe(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1};function hBe(t){switch(t.type){case sBe:return t.elements;case lBe:case uBe:return[t.left,t.right];case jB:return[t.callee].concat(t.arguments);case cBe:return[t.test,t.consequent,t.alternate];case dBe:return[t.object,t.property];case fBe:return t.properties;case aBe:return[t.key,t.value];case pBe:return[t.argument];case oBe:case cu:case iBe:default:return[]}}var ql,ft,Se,ra,_r,kb=1,nv=2,I1=3,nf=4,Gb=5,P1=6,Xa=7,iv=8,mBe=9;ql={};ql[kb]="Boolean";ql[nv]="<end>";ql[I1]="Identifier";ql[nf]="Keyword";ql[Gb]="Null";ql[P1]="Numeric";ql[Xa]="Punctuator";ql[iv]="String";ql[mBe]="RegularExpression";var gBe="ArrayExpression",_Be="BinaryExpression",EBe="CallExpression",vBe="ConditionalExpression",Hse="Identifier",yBe="Literal",xBe="LogicalExpression",bBe="MemberExpression",SBe="ObjectExpression",NBe="Property",ABe="UnaryExpression",bi="Unexpected token %0",TBe="Unexpected number",CBe="Unexpected string",wBe="Unexpected identifier",IBe="Unexpected reserved word",RBe="Unexpected end of input",$B="Invalid regular expression",GB="Invalid regular expression: missing /",Wse="Octal literals are not allowed in strict mode.",PBe="Duplicate data property in object literal not allowed in strict mode",ki="ILLEGAL",tv="Disabled.",MBe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),LBe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Ub(t,e){if(!t)throw new Error("ASSERT: "+e)}function lu(t){return t>=48&&t<=57}function HB(t){return"0123456789abcdefABCDEF".includes(t)}function ev(t){return"01234567".includes(t)}function OBe(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t)}function rv(t){return t===10||t===13||t===8232||t===8233}function av(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&MBe.test(String.fromCharCode(t))}function Fb(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&LBe.test(String.fromCharCode(t))}var BBe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Zse(){for(;Se<ra;){let t=ft.charCodeAt(Se);if(OBe(t)||rv(t))++Se;else break}}function zB(t){var e,n,i,a=0;for(n=t==="u"?4:2,e=0;e<n;++e)Se<ra&&HB(ft[Se])?(i=ft[Se++],a=a*16+"0123456789abcdef".indexOf(i.toLowerCase())):ur({},bi,ki);return String.fromCharCode(a)}function DBe(){var t,e,n,i;for(t=ft[Se],e=0,t==="}"&&ur({},bi,ki);Se<ra&&(t=ft[Se++],!!HB(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&ur({},bi,ki),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(n,i))}function Xse(){var t,e;for(t=ft.charCodeAt(Se++),e=String.fromCharCode(t),t===92&&(ft.charCodeAt(Se)!==117&&ur({},bi,ki),++Se,t=zB("u"),(!t||t==="\\"||!av(t.charCodeAt(0)))&&ur({},bi,ki),e=t);Se<ra&&(t=ft.charCodeAt(Se),!!Fb(t));)++Se,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),ft.charCodeAt(Se)!==117&&ur({},bi,ki),++Se,t=zB("u"),(!t||t==="\\"||!Fb(t.charCodeAt(0)))&&ur({},bi,ki),e+=t);return e}function FBe(){var t,e;for(t=Se++;Se<ra;){if(e=ft.charCodeAt(Se),e===92)return Se=t,Xse();if(Fb(e))++Se;else break}return ft.slice(t,Se)}function kBe(){var t,e,n;return t=Se,e=ft.charCodeAt(Se)===92?Xse():FBe(),e.length===1?n=I1:BBe.hasOwnProperty(e)?n=nf:e==="null"?n=Gb:e==="true"||e==="false"?n=kb:n=I1,{type:n,value:e,start:t,end:Se}}function UB(){var t=Se,e=ft.charCodeAt(Se),n,i=ft[Se],a,o,s;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Se,{type:Xa,value:String.fromCharCode(e),start:t,end:Se};default:if(n=ft.charCodeAt(Se+1),n===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Se+=2,{type:Xa,value:String.fromCharCode(e)+String.fromCharCode(n),start:t,end:Se};case 33:case 61:return Se+=2,ft.charCodeAt(Se)===61&&++Se,{type:Xa,value:ft.slice(t,Se),start:t,end:Se}}}if(s=ft.substr(Se,4),s===">>>=")return Se+=4,{type:Xa,value:s,start:t,end:Se};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return Se+=3,{type:Xa,value:o,start:t,end:Se};if(a=o.substr(0,2),i===a[1]&&"+-<>&|".includes(i)||a==="=>")return Se+=2,{type:Xa,value:a,start:t,end:Se};if(a==="//"&&ur({},bi,ki),"<>=!+-*%&|^/".includes(i))return++Se,{type:Xa,value:i,start:t,end:Se};ur({},bi,ki)}function GBe(t){let e="";for(;Se<ra&&HB(ft[Se]);)e+=ft[Se++];return e.length===0&&ur({},bi,ki),av(ft.charCodeAt(Se))&&ur({},bi,ki),{type:P1,value:parseInt("0x"+e,16),start:t,end:Se}}function UBe(t){let e="0"+ft[Se++];for(;Se<ra&&ev(ft[Se]);)e+=ft[Se++];return(av(ft.charCodeAt(Se))||lu(ft.charCodeAt(Se)))&&ur({},bi,ki),{type:P1,value:parseInt(e,8),octal:!0,start:t,end:Se}}function kse(){var t,e,n;if(n=ft[Se],Ub(lu(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),e=Se,t="",n!=="."){if(t=ft[Se++],n=ft[Se],t==="0"){if(n==="x"||n==="X")return++Se,GBe(e);if(ev(n))return UBe(e);n&&lu(n.charCodeAt(0))&&ur({},bi,ki)}for(;lu(ft.charCodeAt(Se));)t+=ft[Se++];n=ft[Se]}if(n==="."){for(t+=ft[Se++];lu(ft.charCodeAt(Se));)t+=ft[Se++];n=ft[Se]}if(n==="e"||n==="E")if(t+=ft[Se++],n=ft[Se],(n==="+"||n==="-")&&(t+=ft[Se++]),lu(ft.charCodeAt(Se)))for(;lu(ft.charCodeAt(Se));)t+=ft[Se++];else ur({},bi,ki);return av(ft.charCodeAt(Se))&&ur({},bi,ki),{type:P1,value:parseFloat(t),start:e,end:Se}}function VBe(){var t="",e,n,i,a,o=!1;for(e=ft[Se],Ub(e==="'"||e==='"',"String literal must starts with a quote"),n=Se,++Se;Se<ra;)if(i=ft[Se++],i===e){e="";break}else if(i==="\\")if(i=ft[Se++],!i||!rv(i.charCodeAt(0)))switch(i){case"u":case"x":ft[Se]==="{"?(++Se,t+=DBe()):t+=zB(i);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:ev(i)?(a="01234567".indexOf(i),a!==0&&(o=!0),Se<ra&&ev(ft[Se])&&(o=!0,a=a*8+"01234567".indexOf(ft[Se++]),"0123".includes(i)&&Se<ra&&ev(ft[Se])&&(a=a*8+"01234567".indexOf(ft[Se++]))),t+=String.fromCharCode(a)):t+=i;break}else i==="\r"&&ft[Se]===`
`&&++Se;else{if(rv(i.charCodeAt(0)))break;t+=i}return e!==""&&ur({},bi,ki),{type:iv,value:t,octal:o,start:n,end:Se}}function $Be(t,e){let n=t;e.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,a)=>{if(parseInt(a,16)<=1114111)return"x";ur({},$B)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(i){ur({},$B)}try{return new RegExp(t,e)}catch(i){return null}}function zBe(){var t,e,n,i,a;for(t=ft[Se],Ub(t==="/","Regular expression literal must start with a slash"),e=ft[Se++],n=!1,i=!1;Se<ra;)if(t=ft[Se++],e+=t,t==="\\")t=ft[Se++],rv(t.charCodeAt(0))&&ur({},GB),e+=t;else if(rv(t.charCodeAt(0)))ur({},GB);else if(n)t==="]"&&(n=!1);else if(t==="/"){i=!0;break}else t==="["&&(n=!0);return i||ur({},GB),a=e.substr(1,e.length-2),{value:a,literal:e}}function jBe(){var t,e,n;for(e="",n="";Se<ra&&(t=ft[Se],!!Fb(t.charCodeAt(0)));)++Se,t==="\\"&&Se<ra?ur({},bi,ki):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&ur({},$B,n),{value:n,literal:e}}function HBe(){var t,e,n,i;return _r=null,Zse(),t=Se,e=zBe(),n=jBe(),i=$Be(e.value,n.value),{literal:e.literal+n.literal,value:i,regex:{pattern:e.value,flags:n.value},start:t,end:Se}}function WBe(t){return t.type===I1||t.type===nf||t.type===kb||t.type===Gb}function qse(){if(Zse(),Se>=ra)return{type:nv,start:Se,end:Se};let t=ft.charCodeAt(Se);return av(t)?kBe():t===40||t===41||t===59?UB():t===39||t===34?VBe():t===46?lu(ft.charCodeAt(Se+1))?kse():UB():lu(t)?kse():UB()}function qa(){let t=_r;return Se=t.end,_r=qse(),Se=t.end,t}function Kse(){let t=Se;_r=qse(),Se=t}function ZBe(t){let e=new qs(gBe);return e.elements=t,e}function Gse(t,e,n){let i=new qs(t==="||"||t==="&&"?xBe:_Be);return i.operator=t,i.left=e,i.right=n,i}function XBe(t,e){let n=new qs(EBe);return n.callee=t,n.arguments=e,n}function qBe(t,e,n){let i=new qs(vBe);return i.test=t,i.consequent=e,i.alternate=n,i}function WB(t){let e=new qs(Hse);return e.name=t,e}function Q6(t){let e=new qs(yBe);return e.value=t.value,e.raw=ft.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Use(t,e,n){let i=new qs(bBe);return i.computed=t==="[",i.object=e,i.property=n,i.computed||(n.member=!0),i}function KBe(t){let e=new qs(SBe);return e.properties=t,e}function Vse(t,e,n){let i=new qs(NBe);return i.key=e,i.value=n,i.kind=t,i}function YBe(t,e){let n=new qs(ABe);return n.operator=t,n.argument=e,n.prefix=!0,n}function ur(t,e){var n,i=Array.prototype.slice.call(arguments,2),a=e.replace(/%(\d)/g,(o,s)=>(Ub(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(a),n.index=Se,n.description=a,n}function Vb(t){t.type===nv&&ur(t,RBe),t.type===P1&&ur(t,TBe),t.type===iv&&ur(t,CBe),t.type===I1&&ur(t,wBe),t.type===nf&&ur(t,IBe),ur(t,bi,t.value)}function na(t){let e=qa();(e.type!==Xa||e.value!==t)&&Vb(e)}function zr(t){return _r.type===Xa&&_r.value===t}function VB(t){return _r.type===nf&&_r.value===t}function JBe(){let t=[];for(Se=_r.start,na("[");!zr("]");)zr(",")?(qa(),t.push(null)):(t.push(R1()),zr("]")||na(","));return qa(),ZBe(t)}function $se(){Se=_r.start;let t=qa();return t.type===iv||t.type===P1?(t.octal&&ur(t,Wse),Q6(t)):WB(t.value)}function QBe(){var t,e,n,i;if(Se=_r.start,t=_r,t.type===I1)return n=$se(),na(":"),i=R1(),Vse("init",n,i);if(t.type===nv||t.type===Xa)Vb(t);else return e=$se(),na(":"),i=R1(),Vse("init",e,i)}function eDe(){var t=[],e,n,i,a={},o=String;for(Se=_r.start,na("{");!zr("}");)e=QBe(),e.key.type===Hse?n=e.key.name:n=o(e.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(a,i)?ur({},PBe):a[i]=!0,t.push(e),zr("}")||na(",");return na("}"),KBe(t)}function tDe(){na("(");let t=ZB();return na(")"),t}var rDe={if:1};function nDe(){var t,e,n;if(zr("("))return tDe();if(zr("["))return JBe();if(zr("{"))return eDe();if(t=_r.type,Se=_r.start,t===I1||rDe[_r.value])n=WB(qa().value);else if(t===iv||t===P1)_r.octal&&ur(_r,Wse),n=Q6(qa());else{if(t===nf)throw new Error(tv);t===kb?(e=qa(),e.value=e.value==="true",n=Q6(e)):t===Gb?(e=qa(),e.value=null,n=Q6(e)):zr("/")||zr("/=")?(n=Q6(HBe()),Kse()):Vb(qa())}return n}function iDe(){let t=[];if(na("("),!zr(")"))for(;Se<ra&&(t.push(R1()),!zr(")"));)na(",");return na(")"),t}function aDe(){Se=_r.start;let t=qa();return WBe(t)||Vb(t),WB(t.value)}function oDe(){return na("."),aDe()}function sDe(){na("[");let t=ZB();return na("]"),t}function lDe(){var t,e,n;for(t=nDe();;)if(zr("."))n=oDe(),t=Use(".",t,n);else if(zr("("))e=iDe(),t=XBe(t,e);else if(zr("["))n=sDe(),t=Use("[",t,n);else break;return t}function zse(){let t=lDe();if(_r.type===Xa&&(zr("++")||zr("--")))throw new Error(tv);return t}function Db(){var t,e;if(_r.type!==Xa&&_r.type!==nf)e=zse();else{if(zr("++")||zr("--"))throw new Error(tv);if(zr("+")||zr("-")||zr("~")||zr("!"))t=qa(),e=Db(),e=YBe(t.value,e);else{if(VB("delete")||VB("void")||VB("typeof"))throw new Error(tv);e=zse()}}return e}function jse(t){let e=0;if(t.type!==Xa&&t.type!==nf)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function cDe(){var t,e,n,i,a,o,s,l,c,u;if(t=_r,c=Db(),i=_r,a=jse(i),a===0)return c;for(i.prec=a,qa(),e=[t,_r],s=Db(),o=[c,i,s];(a=jse(_r))>0;){for(;o.length>2&&a<=o[o.length-2].prec;)s=o.pop(),l=o.pop().value,c=o.pop(),e.pop(),n=Gse(l,c,s),o.push(n);i=qa(),i.prec=a,o.push(i),e.push(_r),n=Db(),o.push(n)}for(u=o.length-1,n=o[u],e.pop();u>1;)e.pop(),n=Gse(o[u-1].value,o[u-2],n),u-=2;return n}function R1(){var t,e,n;return t=cDe(),zr("?")&&(qa(),e=R1(),na(":"),n=R1(),t=qBe(t,e,n)),t}function ZB(){let t=R1();if(zr(","))throw new Error(tv);return t}function XB(t){ft=t,Se=0,ra=ft.length,_r=null,Kse();let e=ZB();if(_r.type!==nv)throw new Error("Unexpect token after expression.");return e}var qB={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function KB(t){function e(s,l,c,u){let d=t(l[0]);return c&&(d=c+"("+d+")",c.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(u<0?"":u===0?"()":"("+l.slice(1).map(t).join(",")+")")}function n(s,l,c){return u=>e(s,u,l,c)}let i="new Date",a="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&he("Missing arguments to clamp function."),s.length>3&&he("Too many arguments to clamp function.");let l=s.map(t);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",a,0),lower:n("toLowerCase",a,0),substring:n("substring",a),split:n("split",a),trim:n("trim",a,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&he("Missing arguments to if function."),s.length>3&&he("Too many arguments to if function.");let l=s.map(t);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function uDe(t){let e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function YB(t){t=t||{};let e=t.allowed?hi(t.allowed):{},n=t.forbidden?hi(t.forbidden):{},i=t.constants||qB,a=(t.functions||KB)(f),o=t.globalvar,s=t.fieldvar,l=wt(o)?o:m=>`${o}["${m}"]`,c={},u={},d=0;function f(m){if(fr(m))return m;let _=p[m.type];return _==null&&he("Unsupported type: "+m.type),_(m)}let p={Literal:m=>m.raw,Identifier:m=>{let _=m.name;return d>0?_:ut(n,_)?he("Illegal identifier: "+_):ut(i,_)?i[_]:ut(e,_)?_:(c[_]=1,l(_))},MemberExpression:m=>{let _=!m.computed,E=f(m.object);_&&(d+=1);let v=f(m.property);return E===s&&(u[uDe(v)]=1),_&&(d-=1),E+(_?"."+v:"["+v+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&he("Illegal callee type: "+m.callee.type);let _=m.callee.name,E=m.arguments,v=ut(a,_)&&a[_];return v||he("Unrecognized function: "+_),wt(v)?v(E):v+"("+E.map(f).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(f).join(",")+"]",BinaryExpression:m=>"("+f(m.left)+" "+m.operator+" "+f(m.right)+")",UnaryExpression:m=>"("+m.operator+f(m.argument)+")",ConditionalExpression:m=>"("+f(m.test)+"?"+f(m.consequent)+":"+f(m.alternate)+")",LogicalExpression:m=>"("+f(m.left)+m.operator+f(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(f).join(",")+"}",Property:m=>{d+=1;let _=f(m.key);return d-=1,_+":"+f(m.value)}};function h(m){let _={code:f(m),globals:Object.keys(c),fields:Object.keys(u)};return c={},u={},_}return h.functions=a,h.constants=i,h}function ov(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JB(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $b(t){let e,n,i;t.length!==2?(e=ov,n=(l,c)=>ov(t(l),c),i=(l,c)=>t(l)-c):(e=t===ov||t===JB?t:dDe,n=t,i=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{let f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{let f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){let f=a(l,c,u,d-1);return f>u&&i(l[f-1],c)>-i(l[f],c)?f-1:f}return{left:a,center:s,right:o}}function dDe(){return 0}function zb(t,...e){t=new Bc(t),e=e.map(fDe);e:for(let n of t)for(let i of e)if(!i.has(n)){t.delete(n);continue e}return t}function fDe(t){return t instanceof Bc?t:new Bc(t)}function jb(...t){let e=new Bc;for(let n of t)for(let i of n)e.add(i);return e}var Yse=Symbol("vega_selection_getter");function tle(t){return(!t.getter||!t.getter[Yse])&&(t.getter=Mi(t.field),t.getter[Yse]=!0),t.getter}var eD="intersect",Jse="union",pDe="vlMulti",hDe="vlPoint",Qse="or",mDe="and",Kl="_vgsid_",sv=Mi(Kl),gDe="E",_De="R",EDe="R-E",vDe="R-LE",yDe="R-RE",Hb="index:unit";function ele(t,e){for(var n=e.fields,i=e.values,a=n.length,o=0,s,l;o<a;++o)if(l=n[o],s=tle(l)(t),Il(s)&&(s=kn(s)),Il(i[o])&&(i[o]=kn(i[o])),ot(i[o])&&Il(i[o][0])&&(i[o]=i[o].map(kn)),l.type===gDe){if(ot(i[o])?i[o].indexOf(s)<0:s!==i[o])return!1}else if(l.type===_De){if(!Lp(s,i[o]))return!1}else if(l.type===yDe){if(!Lp(s,i[o],!0,!1))return!1}else if(l.type===EDe){if(!Lp(s,i[o],!1,!1))return!1}else if(l.type===vDe&&!Lp(s,i[o],!1,!0))return!1;return!0}function rle(t,e,n){for(var i=this.context.data[t],a=i?i.values.value:[],o=i?i[Hb]&&i[Hb].value:void 0,s=n===eD,l=a.length,c=0,u,d,f,p,h;c<l;++c)if(u=a[c],o&&s){if(d=d||{},f=d[p=u.unit]||0,f===-1)continue;if(h=ele(e,u),d[p]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(p).count)return!1}else if(h=ele(e,u),s^h)return h;return l&&s}var nle=$b(sv),xDe=nle.left,bDe=nle.right;function ile(t,e,n){let i=this.context.data[t],a=i?i.values.value:[],o=i?i[Hb]&&i[Hb].value:void 0,s=n===eD,l=sv(e),c=xDe(a,l);if(c===a.length||sv(a[c])!==l)return!1;if(o&&s){if(o.size===1)return!0;if(bDe(a,l)-c<o.size)return!1}return!0}function ale(t,e){return t.map(n=>St(e.fields?{values:e.fields.map(i=>tle(i)(n.datum))}:{[Kl]:sv(n.datum)},e))}function ole(t,e,n,i){for(var a=this.context.data[t],o=a?a.values.value:[],s={},l={},c={},u,d,f,p,h,m,_,E,v,y,x=o.length,S=0,N,w;S<x;++S)if(u=o[S],p=u.unit,d=u.fields,f=u.values,d&&f){for(N=0,w=d.length;N<w;++N)h=d[N],_=s[h.field]||(s[h.field]={}),E=_[p]||(_[p]=[]),c[h.field]=v=h.type.charAt(0),y=QB[`${v}_union`],_[p]=y(E,st(f[N]));n&&(E=l[p]||(l[p]=[]),E.push(st(f).reduce((T,I,R)=>(T[d[R].field]=I,T),{})))}else h=Kl,m=sv(u),_=s[h]||(s[h]={}),E=_[p]||(_[p]=[]),E.push(m),n&&(E=l[p]||(l[p]=[]),E.push({[Kl]:m}));if(e=e||Jse,s[Kl]?s[Kl]=QB[`${Kl}_${e}`](...Object.values(s[Kl])):Object.keys(s).forEach(T=>{s[T]=Object.keys(s[T]).map(I=>s[T][I]).reduce((I,R)=>I===void 0?R:QB[`${c[T]}_${e}`](I,R))}),o=Object.keys(l),n&&o.length){let T=i?hDe:pDe;s[T]=e===Jse?{[Qse]:o.reduce((I,R)=>(I.push(...l[R]),I),[])}:{[mDe]:o.map(I=>({[Qse]:l[I]}))}}return s}var QB={[`${Kl}_union`]:jb,[`${Kl}_intersect`]:zb,E_union:function(t,e){if(!t.length)return e;for(var n=0,i=e.length;n<i;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(n=>e.indexOf(n)>=0):e},R_union:function(t,e){var n=kn(e[0]),i=kn(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<i&&(t[1]=i),t):[n,i]},R_intersect:function(t,e){var n=kn(e[0]),i=kn(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?i<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>i&&(t[1]=i),t):[n,i]}},SDe=":",NDe="@";function Wb(t,e,n,i){e[0].type!==cu&&he("First argument to selection functions must be a string literal.");let a=e[0].value,o=e.length>=2&&Vt(e).value,s="unit",l=NDe+s,c=SDe+a;o===eD&&!ut(i,l)&&(i[l]=n.getData(a).indataRef(n,s)),ut(i,c)||(i[c]=n.getData(a).tuplesRef())}function ule(t){let e=this.context.data[t];return e?e.values.value:[]}function ADe(t,e,n){let i=this.context.data[t]["index:"+e],a=i?i.value.get(n):void 0;return a&&a.count}function TDe(t,e){let n=this.context.dataflow,i=this.context.data[t],a=i.input;return n.pulse(a,n.changeset().remove(pi).insert(e)),1}function CDe(t,e,n){if(t){let i=this.context.dataflow,a=t.mark.source;i.pulse(a,i.changeset().encode(t,e))}return n!==void 0?n:t}var lv=t=>function(e,n){let i=this.context.dataflow.locale();return e===null?"null":i[t](n)(e)},wDe=lv("format"),dle=lv("timeFormat"),IDe=lv("utcFormat"),RDe=lv("timeParse"),PDe=lv("utcParse"),Zb=new Date(2e3,0,1);function Xb(t,e,n){return!Number.isInteger(t)||!Number.isInteger(e)?"":(Zb.setYear(2e3),Zb.setMonth(t),Zb.setDate(e),dle.call(this,Zb,n))}function MDe(t){return Xb.call(this,t,1,"%B")}function LDe(t){return Xb.call(this,t,1,"%b")}function ODe(t){return Xb.call(this,0,2+t,"%A")}function BDe(t){return Xb.call(this,0,2+t,"%a")}var DDe=":",FDe="@",rD="%",fle="$";function aD(t,e,n,i){e[0].type!==cu&&he("First argument to data functions must be a string literal.");let a=e[0].value,o=DDe+a;if(!ut(o,i))try{i[o]=n.getData(a).tuplesRef()}catch(s){}}function kDe(t,e,n,i){e[0].type!==cu&&he("First argument to indata must be a string literal."),e[1].type!==cu&&he("Second argument to indata must be a string literal.");let a=e[0].value,o=e[1].value,s=FDe+o;ut(s,i)||(i[s]=n.getData(a).indataRef(n,o))}function Ta(t,e,n,i){if(e[0].type===cu)sle(n,i,e[0].value);else for(t in n.scales)sle(n,i,t)}function sle(t,e,n){let i=rD+n;if(!ut(e,i))try{e[i]=t.scaleRef(n)}catch(a){}}function Yl(t,e){if(wt(t))return t;if(fr(t)){let n=e.scales[t];return n&&Kre(n.value)?n.value:void 0}}function GDe(t,e,n){e.__bandwidth=a=>a&&a.bandwidth?a.bandwidth():0,n._bandwidth=Ta,n._range=Ta,n._scale=Ta;let i=a=>"_["+(a.type===cu?ht(rD+a.value):ht(rD)+"+"+t(a))+"]";return{_bandwidth:a=>`this.__bandwidth(${i(a[0])})`,_range:a=>`${i(a[0])}.range()`,_scale:a=>`${i(a[0])}(${t(a[1])})`}}function oD(t,e){return function(n,i,a){if(n){let o=Yl(n,(a||this).context);return o&&o.path[t](i)}else return e(i)}}var UDe=oD("area",uL),VDe=oD("bounds",fL),$De=oD("centroid",_L);function zDe(t,e){let n=Yl(t,(e||this).context);return n&&n.scale()}function jDe(t){let e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function sD(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(i){t.warn(i)}return n[n.length-1]}function HDe(){return sD(this.context.dataflow,"warn",arguments)}function WDe(){return sD(this.context.dataflow,"info",arguments)}function ZDe(){return sD(this.context.dataflow,"debug",arguments)}function tD(t){let e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function nD(t){let e=ja(t),n=tD(e.r),i=tD(e.g),a=tD(e.b);return .2126*n+.7152*i+.0722*a}function XDe(t,e){let n=nD(t),i=nD(e),a=Math.max(n,i),o=Math.min(n,i);return(a+.05)/(o+.05)}function qDe(){let t=[].slice.call(arguments);return t.unshift({}),St(...t)}function ple(t,e){return t===e||t!==t&&e!==e?!0:ot(t)?ot(e)&&t.length===e.length?KDe(t,e):!1:Lt(t)&&Lt(e)?hle(t,e):!1}function KDe(t,e){for(let n=0,i=t.length;n<i;++n)if(!ple(t[n],e[n]))return!1;return!0}function hle(t,e){for(let n in t)if(!ple(t[n],e[n]))return!1;return!0}function lle(t){return e=>hle(t,e)}function YDe(t,e,n,i,a,o){let s=this.context.dataflow,l=this.context.data[t],c=l.input,u=s.stamp(),d=l.changes,f,p;if(s._trigger===!1||!(c.value.length||e||i))return 0;if((!d||d.stamp<u)&&(l.changes=d=s.changeset(),d.stamp=u,s.runAfter(()=>{l.modified=!0,s.pulse(c,d).run()},!0,1)),n&&(f=n===!0?pi:ot(n)||Q0(n)?n:lle(n),d.remove(f)),e&&d.insert(e),i&&(f=lle(i),c.value.some(f)?d.remove(f):d.insert(i)),a)for(p in o)d.modify(a,p,o[p]);return 1}function JDe(t){let e=t.touches,n=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.hypot(n,i)}function QDe(t){let e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}var cle={};function eFe(t,e){let n=cle[e]||(cle[e]=Mi(e));return ot(t)?t.map(n):n(t)}function lD(t){return ot(t)||ArrayBuffer.isView(t)?t:null}function cD(t){return lD(t)||(fr(t)?t:null)}function tFe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return lD(t).join(...n)}function rFe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cD(t).indexOf(...n)}function nFe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cD(t).lastIndexOf(...n)}function iFe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cD(t).slice(...n)}function aFe(t,e,n){return wt(n)&&he("Function argument passed to replace."),String(t).replace(e,n)}function oFe(t){return lD(t).slice().reverse()}function sFe(t,e,n){return j3(t||0,e||0,n||0)}function lFe(t,e){let n=Yl(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function cFe(t,e){let n=Yl(t,(e||this).context);return n?n.copy():void 0}function uFe(t,e){let n=Yl(t,(e||this).context);return n?n.domain():[]}function dFe(t,e,n){let i=Yl(t,(n||this).context);return i?ot(e)?(i.invertRange||i.invert)(e):(i.invert||i.invertExtent)(e):void 0}function fFe(t,e){let n=Yl(t,(e||this).context);return n&&n.range?n.range():[]}function pFe(t,e,n){let i=Yl(t,(n||this).context);return i?i(e):void 0}function hFe(t,e,n,i,a){t=Yl(t,(a||this).context);let o=Ine(e,n),s=t.domain(),l=s[0],c=Vt(s),u=Jn;return c-l?u=H8(t,l,c):t=(t.interpolator?tr("sequential")().interpolator(t.interpolator()):tr("linear")().interpolate(t.interpolate()).range(t.range())).domain([l=0,c=1]),t.ticks&&(s=t.ticks(+i||15),l!==s[0]&&s.unshift(l),c!==Vt(s)&&s.push(c)),s.forEach(d=>o.stop(u(d),t(d))),o}function mFe(t,e,n){let i=Yl(t,(n||this).context);return function(a){return i?i.path.context(a)(e):""}}function gFe(t){let e=null;return function(n){return n?o6(n,e=e||yx(t)):t}}var mle=t=>t.data;function gle(t,e){let n=ule.call(e,t);return n.root&&n.root.lookup||{}}function _Fe(t,e,n){let i=gle(t,this),a=i[e],o=i[n];return a&&o?a.path(o).map(mle):void 0}function EFe(t,e){let n=gle(t,this)[e];return n?n.ancestors().map(mle):void 0}var _le=()=>typeof window!="undefined"&&window||null;function vFe(){let t=_le();return t?t.screen:{}}function yFe(){let t=_le();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function xFe(){let t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function Ele(t,e,n){if(!t)return[];let[i,a]=t,o=new wn().set(i[0],i[1],a[0],a[1]),s=n||this.context.dataflow.scenegraph().root;return _ie(s,o,bFe(e))}function bFe(t){let e=null;if(t){let n=st(t.marktype),i=st(t.markname);e=a=>(!n.length||n.some(o=>a.marktype===o))&&(!i.length||i.some(o=>a.name===o))}return e}function SFe(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;t=st(t);let a=t[t.length-1];return a===void 0||Math.hypot(a[0]-e,a[1]-n)>i?[...t,[e,n]]:t}function NFe(t){return st(t).reduce((e,n,i)=>{let[a,o]=n;return e+=i==0?`M ${a},${o} `:i===t.length-1?" Z":`L ${a},${o} `},"")}function AFe(t,e,n){let{x:i,y:a,mark:o}=n,s=new wn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(let[c,u]of e)c<s.x1&&(s.x1=c),c>s.x2&&(s.x2=c),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(i,a),Ele([[s.x1,s.y1],[s.x2,s.y2]],t,o).filter(c=>TFe(c.x,c.y,e))}function TFe(t,e,n){let i=0;for(let a=0,o=n.length-1;a<n.length;o=a++){let[s,l]=n[o],[c,u]=n[a];u>e!=l>e&&t<(s-c)*(e-u)/(l-u)+c&&i++}return i&1}var ng={random(){return es()},cumulativeNormal:Xy,cumulativeLogNormal:WI,cumulativeUniform:KI,densityNormal:VI,densityLogNormal:HI,densityUniform:qI,quantileNormal:qy,quantileLogNormal:ZI,quantileUniform:YI,sampleNormal:Zy,sampleLogNormal:jI,sampleUniform:XI,isArray:ot,isBoolean:EY,isDate:Il,isDefined(t){return t!==void 0},isNumber:Oc,isObject:Lt,isRegExp:yY,isString:fr,isTuple:Q0,isValid(t){return t!=null&&t===t},toBoolean:_y,toDate(t){return Ey(t)},toNumber:kn,toString:vy,indexof:rFe,join:tFe,lastindexof:nFe,replace:aFe,reverse:oFe,slice:iFe,flush:_Y,lerp:xY,merge:qDe,pad:NY,peek:Vt,pluck:eFe,span:td,inrange:Lp,truncate:yy,rgb:ja,lab:Rd,hcl:e1,hsl:Wc,luminance:nD,contrast:XDe,sequence:Tn,format:wDe,utcFormat:IDe,utcParse:PDe,utcOffset:vJ,utcSequence:bJ,timeFormat:dle,timeParse:RDe,timeOffset:EJ,timeSequence:xJ,timeUnitSpecifier:sJ,monthFormat:MDe,monthAbbrevFormat:LDe,dayFormat:ODe,dayAbbrevFormat:BDe,quarter:pY,utcquarter:hY,week:cJ,utcweek:fJ,dayofyear:lJ,utcdayofyear:dJ,warn:HDe,info:WDe,debug:ZDe,extent(t){return Fa(t)},inScope:jDe,intersect:Ele,clampRange:mY,pinchDistance:JDe,pinchAngle:QDe,screen:vFe,containerSize:xFe,windowSize:yFe,bandspace:sFe,setdata:TDe,pathShape:gFe,panLinear:cY,panLog:uY,panPow:dY,panSymlog:fY,zoomLinear:uy,zoomLog:dy,zoomPow:SE,zoomSymlog:fy,encode:CDe,modify:YDe,lassoAppend:SFe,lassoPath:NFe,intersectLasso:AFe},CFe=["view","item","group","xy","x","y"],wFe="event.vega.",vle="this.",uD={},yle={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${ht(fle+t)}]`,functions:IFe,constants:qB,visitors:uD},iD=YB(yle);function IFe(t){let e=KB(t);CFe.forEach(n=>e[n]=wFe+n);for(let n in ng)e[n]=vle+n;return St(e,GDe(t,ng,uD)),e}function Pn(t,e,n){return arguments.length===1?ng[t]:(ng[t]=e,n&&(uD[t]=n),iD&&(iD.functions[t]=vle+t),this)}Pn("bandwidth",lFe,Ta);Pn("copy",cFe,Ta);Pn("domain",uFe,Ta);Pn("range",fFe,Ta);Pn("invert",dFe,Ta);Pn("scale",pFe,Ta);Pn("gradient",hFe,Ta);Pn("geoArea",UDe,Ta);Pn("geoBounds",VDe,Ta);Pn("geoCentroid",$De,Ta);Pn("geoShape",mFe,Ta);Pn("geoScale",zDe,Ta);Pn("indata",ADe,kDe);Pn("data",ule,aD);Pn("treePath",_Fe,aD);Pn("treeAncestors",EFe,aD);Pn("vlSelectionTest",rle,Wb);Pn("vlSelectionIdTest",ile,Wb);Pn("vlSelectionResolve",ole,Wb);Pn("vlSelectionTuples",ale);function Ks(t,e){let n={},i;try{t=fr(t)?t:ht(t)+"",i=XB(t)}catch(o){he("Expression parse error: "+t)}i.visit(o=>{if(o.type!==jB)return;let s=o.callee.name,l=yle.visitors[s];l&&l(s,o.arguments,e,n)});let a=iD(i);return a.globals.forEach(o=>{let s=fle+o;!ut(n,s)&&e.getSignal(o)&&(n[s]=e.signalRef(o))}),{$expr:St({code:a.code},e.options.ast?{ast:i}:null),$fields:a.fields,$params:n}}function RFe(t){let e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(i=>e.parseOperator(i)),n.forEach(i=>e.parseOperatorParameters(i)),(t.streams||[]).forEach(i=>e.parseStream(i)),(t.updates||[]).forEach(i=>e.parseUpdate(i)),e.resolve()}var PFe=hi(["rule"]),xle=hi(["group","image","rect"]);function MFe(t,e){let n="";return PFe[e]||(t.x2&&(t.x?(xle[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(xle[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function dD(t){return(t+"").toLowerCase()}function LFe(t){return dD(t)==="operator"}function OFe(t){return dD(t)==="collect"}function cv(t,e,n){n.endsWith(";")||(n="return("+n+");");let i=Function(...e.concat(n));return t&&t.functions?i.bind(t.functions):i}function BFe(t,e,n,i){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var DFe={operator:(t,e)=>cv(t,["_"],e.code),parameter:(t,e)=>cv(t,["datum","_"],e.code),event:(t,e)=>cv(t,["event"],e.code),handler:(t,e)=>{let n=`var datum=event.item&&event.item.datum;return ${e.code};`;return cv(t,["_","event"],n)},encode:(t,e)=>{let{marktype:n,channels:i}=e,a="var o=item,datum=o.datum,m=0,$;";for(let o in i){let s="o["+ht(o)+"]";a+=`$=${i[o].code};if(${s}!==$)${s}=$,m=1;`}return a+=MFe(i,n),a+="return m;",cv(t,["item","_"],a)},codegen:{get(t){let e=`[${t.map(ht).join("][")}]`,n=Function("_",`return _${e};`);return n.path=e,n},comparator(t,e){let n,i=(o,s)=>{let l=e[s],c,u;return o.path?(c=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,c=`this.f${s}(a)`,u=`this.f${s}(b)`),BFe(c,u,-l,l)},a=Function("a","b","var u, v; return "+t.map(i).join("")+"0;");return n?a.bind(n):a}}};function FFe(t){let e=this;LFe(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function kFe(t){let e=this;if(t.params){let n=e.get(t.id);n||he("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function GFe(t,e){e=e||{};let n=this;for(let i in t){let a=t[i];e[i]=ot(a)?a.map(o=>ble(o,n,e)):ble(a,n,e)}return e}function ble(t,e,n){if(!t||!Lt(t))return t;for(let i=0,a=Sle.length,o;i<a;++i)if(o=Sle[i],ut(t,o.key))return o.parse(t,e,n);return t}var Sle=[{key:"$ref",parse:UFe},{key:"$key",parse:$Fe},{key:"$expr",parse:VFe},{key:"$field",parse:zFe},{key:"$encode",parse:HFe},{key:"$compare",parse:jFe},{key:"$context",parse:WFe},{key:"$subflow",parse:ZFe},{key:"$tupleid",parse:XFe}];function UFe(t,e){return e.get(t.$ref)||he("Operator not defined: "+t.$ref)}function VFe(t,e,n){t.$params&&e.parseParameters(t.$params,n);let i="e:"+t.$expr.code;return e.fn[i]||(e.fn[i]=ha(e.parameterExpression(t.$expr),t.$fields))}function $Fe(t,e){let n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=gy(t.$key,t.$flat,e.expr.codegen))}function zFe(t,e){if(!t.$field)return null;let n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Mi(t.$field,t.$name,e.expr.codegen))}function jFe(t,e){let n="c:"+t.$compare+"_"+t.$order,i=st(t.$compare).map(a=>a&&a.$tupleid?mt:a);return e.fn[n]||(e.fn[n]=py(i,t.$order,e.expr.codegen))}function HFe(t,e){let n=t.$encode,i={};for(let a in n){let o=n[a];i[a]=ha(e.encodeExpression(o.$expr),o.$fields),i[a].output=o.$output}return i}function WFe(t,e){return e}function ZFe(t,e){let n=t.$subflow;return function(i,a,o){let s=e.fork().parse(n),l=s.get(n.operators[0].id),c=s.signals.parent;return c&&c.set(o),l.detachSubflow=()=>e.detach(s),l}}function XFe(){return mt}function qFe(t){var e=this,n=t.filter!=null?e.eventExpression(t.filter):void 0,i=t.stream!=null?e.get(t.stream):void 0,a;t.source?i=e.events(t.source,t.type,n):t.merge&&(a=t.merge.map(o=>e.get(o)),i=a[0].merge.apply(a[0],a.slice(1))),t.between&&(a=t.between.map(o=>e.get(o)),i=i.between(a[0],a[1])),t.filter&&(i=i.filter(n)),t.throttle!=null&&(i=i.throttle(+t.throttle)),t.debounce!=null&&(i=i.debounce(+t.debounce)),i==null&&he("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}function KFe(t){var e=this,n=Lt(n=t.source)?n.$ref:n,i=e.get(n),a=null,o=t.update,s=void 0;i||he("Source not defined: "+t.source),a=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),o&&o.$expr&&(o.$params&&(s=e.parseParameters(o.$params)),o=e.handlerExpression(o.$expr)),e.update(t,i,a,o,s)}var YFe={skip:!0};function JFe(t){var e=this,n={};if(t.signals){var i=n.signals={};Object.keys(e.signals).forEach(o=>{let s=e.signals[o];t.signals(o,s)&&(i[o]=s.value)})}if(t.data){var a=n.data={};Object.keys(e.data).forEach(o=>{let s=e.data[o];t.data(o,s)&&(a[o]=s.input.value)})}return e.subcontext&&t.recurse!==!1&&(n.subcontext=e.subcontext.map(o=>o.getState(t))),n}function QFe(t){var e=this,n=e.dataflow,i=t.data,a=t.signals;Object.keys(a||{}).forEach(o=>{n.update(e.signals[o],a[o],YFe)}),Object.keys(i||{}).forEach(o=>{n.pulse(e.data[o].input,n.changeset().remove(pi).insert(i[o]))}),(t.subcontext||[]).forEach((o,s)=>{let l=e.subcontext[s];l&&l.setState(o)})}function fD(t,e,n,i){return new Ale(t,e,n,i)}function Ale(t,e,n,i){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=i||DFe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Nle(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}Ale.prototype=Nle.prototype={fork(){let t=new Nle(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);let e=Object.keys(t.nodes);for(let n of e)t.nodes[n]._targets=null;for(let n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){let n=this,i=n.dataflow,a=t.value;if(n.set(t.id,e),OFe(t.type)&&a&&(a.$ingest?i.ingest(e,a.$ingest,a.$format):a.$request?i.preload(e,a.$request,a.$format):i.pulse(e,i.changeset().insert(a))),t.root&&(n.root=e),t.parent){let o=n.get(t.parent.$ref);o?(i.connect(o,[e]),e.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(t.parent.$ref),i.connect(o,[e]),e.targets().add(o)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(let o in t.data){let s=n.data[o]||(n.data[o]={});t.data[o].forEach(l=>s[l]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[dD(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,i,a){this.dataflow.on(e,n,i,a,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:RFe,parseOperator:FFe,parseOperatorParameters:kFe,parseParameters:GFe,parseStream:qFe,parseUpdate:KFe,getState:JFe,setState:QFe};function eke(t){let e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),Ole(e,t.description()))}function Ole(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function tke(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}var pD="default";function rke(t){let e=t._signals.cursor||(t._signals.cursor=t.add({user:pD,item:null}));t.on(t.events("view","pointermove"),e,(n,i)=>{let a=e.value,o=a?fr(a)?a:a.user:pD,s=i.item&&i.item.cursor||null;return a&&o===a.user&&s==a.item?a:{user:o,item:s}}),t.add(null,function(n){let i=n.cursor,a=this.value;return fr(i)||(a=i.item,i=i.user),mD(t,i&&i!==pD?i:a||i),a},{cursor:e})}function mD(t,e){let n=t.globalCursor()?typeof document!="undefined"&&document.body:t.container();if(n)return e==null?n.style.removeProperty("cursor"):n.style.cursor=e}function Yb(t,e){var n=t._runtime.data;return ut(n,e)||he("Unrecognized data set: "+e),n[e]}function nke(t,e){return arguments.length<2?Yb(this,t).values.value:Qb.call(this,t,bd().remove(pi).insert(e))}function Qb(t,e){OI(e)||he("Second argument to changes must be a changeset.");let n=Yb(this,t);return n.modified=!0,this.pulse(n.input,e)}function ike(t,e){return Qb.call(this,t,bd().insert(e))}function ake(t,e){return Qb.call(this,t,bd().remove(e))}function Ble(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function Dle(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function eS(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function oke(t){var e=eS(t),n=Ble(t),i=Dle(t);t._renderer.background(t.background()),t._renderer.resize(n,i,e),t._handler.origin(e),t._resizeListeners.forEach(a=>{try{a(n,i)}catch(o){t.error(o)}})}function ske(t,e,n){var i=t._renderer,a=i&&i.canvas(),o,s,l;return a&&(l=eS(t),s=e.changedTouches?e.changedTouches[0]:e,o=Px(s,a),o[0]-=l[0],o[1]-=l[1]),e.dataflow=t,e.item=n,e.vega=lke(t,n,o),e}function lke(t,e,n){let i=e?e.mark.marktype==="group"?e:e.mark.group:null;function a(s){var l=i,c;if(s){for(c=e;c;c=c.mark.group)if(c.mark.name===s){l=c;break}}return l&&l.mark&&l.mark.interactive?l:{}}function o(s){if(!s)return n;fr(s)&&(s=a(s));let l=n.slice();for(;s;)l[0]-=s.x||0,l[1]-=s.y||0,s=s.mark&&s.mark.group;return l}return{view:en(t),item:en(e||{}),group:a,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}var Tle="view",cke="timer",uke="window",dke={trap:!1};function fke(t){let e=St({defaults:{}},t),n=(i,a)=>{a.forEach(o=>{ot(i[o])&&(i[o]=hi(i[o]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function Fle(t,e,n,i){t._eventListeners.push({type:n,sources:st(e),handler:i})}function pke(t,e){var n=t._eventConfig.defaults,i=n.prevent,a=n.allow;return i===!1||a===!0?!1:i===!0||a===!1?!0:i?i[e]:a?!a[e]:t.preventDefault()}function qb(t,e,n){let i=t._eventConfig&&t._eventConfig[e];return i===!1||Lt(i)&&!i[n]?(t.warn(`Blocked ${e} ${n} event listener.`),!1):!0}function hke(t,e,n){var i=this,a=new r3(n),o=function(u,d){i.runAsync(null,()=>{t===Tle&&pke(i,e)&&u.preventDefault(),a.receive(ske(i,u,d))})},s;if(t===cke)qb(i,"timer",e)&&i.timer(o,e);else if(t===Tle)qb(i,"view",e)&&i.addEventListener(e,o,dke);else if(t===uke?qb(i,"window",e)&&typeof window!="undefined"&&(s=[window]):typeof document!="undefined"&&qb(i,"selector",e)&&(s=Array.from(document.querySelectorAll(t))),!s)i.warn("Can not resolve event source: "+t);else{for(var l=0,c=s.length;l<c;++l)s[l].addEventListener(e,o);Fle(i,s,e,o)}return a}function Cle(t){return t.item}function wle(t){return t.item.mark.source}function Ile(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function mke(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","pointerover",Cle),wle,Ile(t)),this.on(this.events("view","pointerout",Cle),wle,Ile(e)),this}function gke(){var t=this._tooltip,e=this._timers,n=this._handler.handlers(),i=this._eventListeners,a,o,s,l,c;for(a=e.length;--a>=0;)e[a].stop();for(a=i.length;--a>=0;)for(s=i[a],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(t&&t.call(this,this._handler,null,null,null),a=n.length;--a>=0;)c=n[a].type,l=n[a].handler,this._handler.off(c,l);return this}function No(t,e,n){let i=document.createElement(t);for(let a in e)i.setAttribute(a,e[a]);return n!=null&&(i.textContent=n),i}var _ke="vega-bind",Eke="vega-bind-name",vke="vega-bind-radio";function yke(t,e,n){if(!e)return;let i=n.param,a=n.state;return a||(a=n.state={elements:null,active:!1,set:null,update:s=>{s!=t.signal(i.signal)&&t.runAsync(null,()=>{a.source=!0,t.signal(i.signal,s)})}},i.debounce&&(a.update=my(i.debounce,a.update))),(i.input==null&&i.element?xke:Ske)(a,e,i,t),a.active||(t.on(t._signals[i.signal],null,()=>{a.source?a.source=!1:a.set(t.signal(i.signal))}),a.active=!0),a}function xke(t,e,n,i){let a=n.event||"input",o=()=>t.update(e.value);i.signal(n.signal,e.value),e.addEventListener(a,o),Fle(i,e,a,o),t.set=s=>{e.value=s,e.dispatchEvent(bke(a))}}function bke(t){return typeof Event!="undefined"?new Event(t):{type:t}}function Ske(t,e,n,i){let a=i.signal(n.signal),o=No("div",{class:_ke}),s=n.input==="radio"?o:o.appendChild(No("label"));s.appendChild(No("span",{class:Eke},n.name||n.signal)),e.appendChild(o);let l=Nke;switch(n.input){case"checkbox":l=Ake;break;case"select":l=Tke;break;case"radio":l=Cke;break;case"range":l=wke;break}l(t,s,n,a)}function Nke(t,e,n,i){let a=No("input");for(let o in n)o!=="signal"&&o!=="element"&&a.setAttribute(o==="input"?"type":o,n[o]);a.setAttribute("name",n.signal),a.value=i,e.appendChild(a),a.addEventListener("input",()=>t.update(a.value)),t.elements=[a],t.set=o=>a.value=o}function Ake(t,e,n,i){let a={type:"checkbox",name:n.signal};i&&(a.checked=!0);let o=No("input",a);e.appendChild(o),o.addEventListener("change",()=>t.update(o.checked)),t.elements=[o],t.set=s=>o.checked=!!s||null}function Tke(t,e,n,i){let a=No("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,l)=>{let c={value:s};Jb(s,i)&&(c.selected=!0),a.appendChild(No("option",c,(o[l]||s)+""))}),e.appendChild(a),a.addEventListener("change",()=>{t.update(n.options[a.selectedIndex])}),t.elements=[a],t.set=s=>{for(let l=0,c=n.options.length;l<c;++l)if(Jb(n.options[l],s)){a.selectedIndex=l;return}}}function Cke(t,e,n,i){let a=No("span",{class:vke}),o=n.labels||[];e.appendChild(a),t.elements=n.options.map((s,l)=>{let c={type:"radio",name:n.signal,value:s};Jb(s,i)&&(c.checked=!0);let u=No("input",c);u.addEventListener("change",()=>t.update(s));let d=No("label",{},(o[l]||s)+"");return d.prepend(u),a.appendChild(d),u}),t.set=s=>{let l=t.elements,c=l.length;for(let u=0;u<c;++u)Jb(l[u].value,s)&&(l[u].checked=!0)}}function wke(t,e,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;let a=n.max!=null?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,a,+i)||0,s=n.step||ma(o,a,100),l=No("input",{type:"range",name:n.signal,min:o,max:a,step:s});l.value=i;let c=No("span",{},+i);e.appendChild(l),e.appendChild(c);let u=()=>{c.textContent=l.value,t.update(+l.value)};l.addEventListener("input",u),l.addEventListener("change",u),t.elements=[l],t.set=d=>{l.value=d,c.textContent=d}}function Jb(t,e){return t===e||t+""==e+""}function kle(t,e,n,i,a,o){return e=e||new i(t.loader()),e.initialize(n,Ble(t),Dle(t),eS(t),a,o).background(t.background())}function gD(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function Ike(t,e,n,i){let a=new i(t.loader(),gD(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,eS(t),t);return e&&e.handlers().forEach(o=>{a.on(o.type,o.handler)}),a}function Rke(t,e){let n=this,i=n._renderType,a=n._eventConfig.bind,o=Mx(i);t=n._el=t?hD(n,t,!0):null,eke(n),o||n.error("Unrecognized renderer type: "+i);let s=o.handler||m1,l=t?o.renderer:o.headless;return n._renderer=l?kle(n,n._renderer,t,l):null,n._handler=Ike(n,n._handler,t,s),n._redraw=!0,t&&a!=="none"&&(e=e?n._elBind=hD(n,e,!0):t.appendChild(No("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&a!=="container"&&(c.element=hD(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{yke(n,c.element||e,c)})),n}function hD(t,e,n){if(typeof e=="string")if(typeof document!="undefined"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&n)try{e.textContent=""}catch(i){e=null,t.error(i)}return e}var uv=t=>+t||0,Pke=t=>({top:t,bottom:t,left:t,right:t});function Rle(t){return Lt(t)?{top:uv(t.top),bottom:uv(t.bottom),left:uv(t.left),right:uv(t.right)}:Pke(uv(t))}async function _D(t,e,n,i){let a=Mx(e),o=a&&a.headless;return o||he("Unrecognized renderer type: "+e),await t.runAsync(),kle(t,null,null,o,n,i).renderAsync(t._scenegraph.root)}async function Mke(t,e){t!==$d.Canvas&&t!==$d.SVG&&t!==$d.PNG&&he("Unrecognized image type: "+t);let n=await _D(this,t,e);return t===$d.SVG?Lke(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Lke(t,e){let n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}async function Oke(t,e){return(await _D(this,$d.Canvas,t,e)).canvas()}async function Bke(t){return(await _D(this,$d.SVG,t)).svg()}function Dke(t,e,n){return fD(t,xd,ng,n).parse(e)}function Fke(t){var e=this._runtime.scales;return ut(e,t)||he("Unrecognized scale or projection: "+t),e[t].value}var Gle="width",Ule="height",ED="padding",Ple={skip:!0};function Vle(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===ED?i.left+i.right:0)}function $le(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===ED?i.top+i.bottom:0)}function kke(t){var e=t._signals,n=e[Gle],i=e[Ule],a=e[ED];function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,l=>{t._width=l.size,t._viewWidth=Vle(t,l.size),o()},{size:n}),t._resizeHeight=t.add(null,l=>{t._height=l.size,t._viewHeight=$le(t,l.size),o()},{size:i});let s=t.add(null,o,{pad:a});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=i.rank+1,s.rank=a.rank+1}function Gke(t,e,n,i,a,o){this.runAfter(s=>{let l=0;s._autosize=0,s.width()!==n&&(l=1,s.signal(Gle,n,Ple),s._resizeWidth.skip(!0)),s.height()!==i&&(l=1,s.signal(Ule,i,Ple),s._resizeHeight.skip(!0)),s._viewWidth!==t&&(s._resize=1,s._viewWidth=t),s._viewHeight!==e&&(s._resize=1,s._viewHeight=e),(s._origin[0]!==a[0]||s._origin[1]!==a[1])&&(s._resize=1,s._origin=a),l&&s.run("enter"),o&&s.runAfter(c=>c.resize())},!1,1)}function Uke(t){return this._runtime.getState(t||{data:Vke,signals:$ke,recurse:!0})}function Vke(t,e){return e.modified&&ot(e.input.value)&&!t.startsWith("_:vega:_")}function $ke(t,e){return!(t==="parent"||e instanceof xd.proxy)}function zke(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function jke(t,e){function n(i){t({timestamp:Date.now(),elapsed:i})}this._timers.push(RO(n,e))}function Hke(t,e,n,i){let a=t.element();a&&a.setAttribute("title",Wke(i))}function Wke(t){return t==null?"":ot(t)?zle(t):Lt(t)&&!Il(t)?Zke(t):t+""}function Zke(t){return Object.keys(t).map(e=>{let n=t[e];return e+": "+(ot(n)?zle(n):jle(n))}).join(`
`)}function zle(t){return"["+t.map(jle).join(", ")+"]"}function jle(t){return ot(t)?"[\u2026]":Lt(t)&&!Il(t)?"{\u2026}":t}function Xke(){if(this.renderer()==="canvas"&&this._renderer._canvas){let t=null,e=()=>{t!=null&&t();let n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",e),t=()=>{n.removeEventListener("change",e)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};e()}}function dv(t,e){let n=this;if(e=e||{},Wp.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),e.logLevel!=null&&n.logLevel(e.logLevel),e.locale||t.locale){let o=St({},t.locale,e.locale);n.locale(fI(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||$d.Canvas,n._scenegraph=new lx;let i=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||Hke,n._redraw=!0,n._handler=new m1().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=fke(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);let a=Dke(n,t,e.expr);n._runtime=a,n._signals=a.signals,n._bind=(t.bindings||[]).map(o=>({state:null,param:St({},o)})),a.root&&a.root.set(i),i.source=a.data.root.input,n.pulse(a.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Vle(n,n._width),n._viewHeight=$le(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,kke(n),tke(n),rke(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind),e.watchPixelRatio&&n._watchPixelRatio()}function Kb(t,e){return ut(t._signals,e)?t._signals[e]:he("Unrecognized signal name: "+ht(e))}function Hle(t,e){let n=(t._targets||[]).filter(i=>i._update&&i._update.handler===e);return n.length?n[0]:null}function Mle(t,e,n,i){let a=Hle(n,i);return a||(a=gD(t,()=>i(e,n.value)),a.handler=i,t.on(n,null,a)),t}function Lle(t,e,n){let i=Hle(e,n);return i&&e._targets.remove(i),t}ze(dv,Wp,{async evaluate(t,e,n){if(await Wp.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,oke(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&t3(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){let e=t!=null?t+"":null;return e!==this._desc&&Ole(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){let i=Kb(this,t);return arguments.length===1?i.value:this.update(i,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",Rle(t)):Rle(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(Mx(t)||he("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Wp.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Kb(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Gke,addEventListener(t,e,n){let i=e;return n&&n.trap===!1||(i=gD(this,e),i.raw=e),this._handler.on(t,i),this},removeEventListener(t,e){for(var n=this._handler.handlers(t),i=n.length,a,o;--i>=0;)if(o=n[i].type,a=n[i].handler,t===o&&(e===a||e===a.raw)){this._handler.off(o,a);break}return this},addResizeListener(t){let e=this._resizeListeners;return e.includes(t)||e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return Mle(this,t,Kb(this,t),e)},removeSignalListener(t,e){return Lle(this,Kb(this,t),e)},addDataListener(t,e){return Mle(this,t,Yb(this,t).values,e)},removeDataListener(t,e){return Lle(this,Yb(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){let e=mD(this,null);this._globalCursor=!!t,e&&mD(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:jke,events:hke,finalize:gke,hover:mke,data:nke,change:Qb,insert:ike,remove:ake,scale:Fke,initialize:Rke,toImageURL:Mke,toCanvas:Oke,toSVG:Bke,getState:Uke,setState:zke,_watchPixelRatio:Xke});var qke="view",tS="[",rS="]",Wle="{",Zle="}",Kke=":",Xle=",",Yke="@",Jke=">",Qke=/[[\]{}]/,eGe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},qle,Kle;function yD(t,e,n){return qle=e||qke,Kle=n||eGe,Yle(t.trim()).map(vD)}function tGe(t){return Kle[t]}function fv(t,e,n,i,a){let o=t.length,s=0,l;for(;e<o;++e){if(l=t[e],!s&&l===n)return e;a&&a.indexOf(l)>=0?--s:i&&i.indexOf(l)>=0&&++s}return e}function Yle(t){let e=[],n=t.length,i=0,a=0;for(;a<n;)a=fv(t,a,Xle,tS+Wle,rS+Zle),e.push(t.substring(i,a).trim()),i=++a;if(e.length===0)throw"Empty event selector: "+t;return e}function vD(t){return t[0]==="["?rGe(t):nGe(t)}function rGe(t){let e=t.length,n=1,i;if(n=fv(t,n,rS,tS,rS),n===e)throw"Empty between selector: "+t;if(i=Yle(t.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==Jke)throw"Expected '>' after between selector: "+t;i=i.map(vD);let a=vD(t.slice(1).trim());return a.between?{between:i,stream:a}:(a.between=i,a)}function nGe(t){let e={source:qle},n=[],i=[0,0],a=0,o=0,s=t.length,l=0,c,u;if(t[s-1]===Zle){if(l=t.lastIndexOf(Wle),l>=0){try{i=iGe(t.substring(l+1,s-1))}catch(d){throw"Invalid throttle specification: "+t}t=t.slice(0,l).trim(),s=t.length}else throw"Unmatched right brace: "+t;l=0}if(!s)throw t;if(t[0]===Yke&&(a=++l),c=fv(t,l,Kke),c<s&&(n.push(t.substring(o,c).trim()),o=l=++c),l=fv(t,l,tS),l===s)n.push(t.substring(o,s).trim());else if(n.push(t.substring(o,l).trim()),u=[],o=++l,o===s)throw"Unmatched left bracket: "+t;for(;l<s;){if(l=fv(t,l,rS),l===s)throw"Unmatched left bracket: "+t;if(u.push(t.substring(o,l).trim()),l<s-1&&t[++l]!==tS)throw"Expected left bracket: "+t;o=++l}if(!(s=n.length)||Qke.test(n[s-1]))throw"Invalid event selector: "+t;return s>1?(e.type=n[1],a?e.markname=n[0].slice(1):tGe(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),u!=null&&(e.filter=u),i[0]&&(e.throttle=i[0]),i[1]&&(e.debounce=i[1]),e}function iGe(t){let e=t.split(Xle);if(!t.length||e.length>2)throw t;return e.map(n=>{let i=+n;if(i!==i)throw t;return i})}function aGe(t){return Lt(t)?t:{type:t||"pad"}}var pv=t=>+t||0,oGe=t=>({top:t,bottom:t,left:t,right:t});function sGe(t){return Lt(t)?t.signal?t:{top:pv(t.top),bottom:pv(t.bottom),left:pv(t.left),right:pv(t.right)}:oGe(pv(t))}var Si=t=>Lt(t)&&!ot(t)?St({},t):{value:t};function Jle(t,e,n,i){return n!=null?(Lt(n)&&!ot(n)||ot(n)&&n.length&&Lt(n[0])?t.update[e]=n:t[i||"enter"][e]={value:n},1):0}function Gi(t,e,n){for(let i in e)Jle(t,i,e[i]);for(let i in n)Jle(t,i,n[i],"update")}function cg(t,e,n){for(let i in e)n&&ut(n,i)||(t[i]=St(t[i]||{},e[i]));return t}function ag(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var PD="mark",MD="frame",LD="scope",lGe="axis",cGe="axis-domain",uGe="axis-grid",dGe="axis-label",fGe="axis-tick",pGe="axis-title",hGe="legend",mGe="legend-band",gGe="legend-entry",_Ge="legend-gradient",_ce="legend-label",EGe="legend-symbol",vGe="legend-title",yGe="title",xGe="title-text",bGe="title-subtitle";function SGe(t,e,n,i,a){let o={},s={},l,c,u,d;c="lineBreak",e==="text"&&a[c]!=null&&!ag(c,t)&&xD(o,c,a[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===MD?a.group:n===PD?St({},a.mark,a[e]):null;for(c in d)u=ag(c,t)||(c==="fill"||c==="stroke")&&(ag("fill",t)||ag("stroke",t)),u||xD(o,c,d[c]);st(i).forEach(f=>{let p=a.style&&a.style[f];for(let h in p)ag(h,t)||xD(o,h,p[h])}),t=St({},t);for(c in o)d=o[c],d.signal?(l=l||{})[c]=d:s[c]=d;return t.enter=St(s,t.enter),l&&(t.update=St(l,t.update)),t}function xD(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}var Ece=t=>fr(t)?ht(t):t.signal?`(${t.signal})`:vce(t);function uS(t){if(t.gradient!=null)return AGe(t);let e=t.signal?`(${t.signal})`:t.color?NGe(t.color):t.field!=null?vce(t.field):t.value!==void 0?ht(t.value):void 0;return t.scale!=null&&(e=TGe(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${iS(t.exponent)})`),t.mult!=null&&(e+=`*${iS(t.mult)}`),t.offset!=null&&(e+=`+${iS(t.offset)}`),t.round&&(e=`round(${e})`),e}var nS=(t,e,n,i)=>`(${t}(${[e,n,i].map(uS).join(",")})+'')`;function NGe(t){return t.c?nS("hcl",t.h,t.c,t.l):t.h||t.s?nS("hsl",t.h,t.s,t.l):t.l||t.a?nS("lab",t.l,t.a,t.b):t.r||t.g||t.b?nS("rgb",t.r,t.g,t.b):null}function AGe(t){let e=[t.start,t.stop,t.count].map(n=>n==null?null:ht(n));for(;e.length&&Vt(e)==null;)e.pop();return e.unshift(Ece(t.gradient)),`gradient(${e.join(",")})`}function iS(t){return Lt(t)?"("+uS(t)+")":t}function vce(t){return yce(Lt(t)?t:{datum:t})}function yce(t){let e,n,i;if(t.signal)e="datum",i=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(i=t.parent,e+=".datum"):i=t.group}else t.datum?(e="datum",i=t.datum):he("Invalid field reference: "+ht(t));return t.signal||(i=fr(i)?sy(i).map(ht).join("]["):yce(i)),e+"["+i+"]"}function TGe(t,e){let n=Ece(t.scale);return t.range!=null?e=`lerp(_range(${n}), ${+t.range})`:(e!==void 0&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+iS(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function CGe(t){let e="";return t.forEach(n=>{let i=uS(n);e+=n.test?`(${n.test})?${i}:`:i}),Vt(e)===":"&&(e+="null"),e}function xce(t,e,n,i,a,o){let s={};o=o||{},o.encoders={$encode:s},t=SGe(t,e,n,i,a.config);for(let l in t)s[l]=wGe(t[l],e,o,a);return o}function wGe(t,e,n,i){let a={},o={};for(let s in t)t[s]!=null&&(a[s]=RGe(IGe(t[s]),i,n,o));return{$expr:{marktype:e,channels:a},$fields:Object.keys(o),$output:Object.keys(t)}}function IGe(t){return ot(t)?CGe(t):uS(t)}function RGe(t,e,n,i){let a=Ks(t,e);return a.$fields.forEach(o=>i[o]=1),St(n,a.$params),a.$expr}var PGe="outer",MGe=["value","update","init","react","bind"];function Qle(t,e){he(t+' for "outer" push: '+ht(e))}function bce(t,e){let n=t.name;if(t.push===PGe)e.signals[n]||Qle("No prior signal definition",n),MGe.forEach(i=>{t[i]!==void 0&&Qle("Invalid property ",i)});else{let i=e.addSignal(n,t.value);t.react===!1&&(i.react=!1),t.bind&&e.addBinding(n,t.bind)}}function ND(t,e,n,i){this.id=-1,this.type=t,this.value=e,this.params=n,i&&(this.parent=i)}function dS(t,e,n,i){return new ND(t,e,n,i)}function cS(t,e){return dS("operator",t,e)}function Et(t){let e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function gv(t,e){return e?{$field:t,$name:e}:{$field:t}}var AD=gv("key");function ece(t,e){return{$compare:t,$order:e}}function LGe(t,e){let n={$key:t};return e&&(n.$flat=!0),n}var OGe="ascending",BGe="descending";function DGe(t){return Lt(t)?(t.order===BGe?"-":"+")+fS(t.op,t.field):""}function fS(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}var OD="scope",TD="view";function ni(t){return t&&t.signal}function FGe(t){return t&&t.expr}function aS(t){if(ni(t))return!0;if(Lt(t)){for(let e in t)if(aS(t[e]))return!0}return!1}function Ys(t,e){return t!=null?t:e}function L1(t){return t&&t.signal||t}var tce="timer";function _v(t,e){return(t.merge?GGe:t.stream?UGe:t.type?VGe:he("Invalid stream specification: "+ht(t)))(t,e)}function kGe(t){return t===OD?TD:t||TD}function GGe(t,e){let n=t.merge.map(a=>_v(a,e)),i=BD({merge:n},t,e);return e.addStream(i).id}function UGe(t,e){let n=_v(t.stream,e),i=BD({stream:n},t,e);return e.addStream(i).id}function VGe(t,e){let n;t.type===tce?(n=e.event(tce,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(kGe(t.source),t.type);let i=BD({stream:n},t,e);return Object.keys(i).length===1?n:e.addStream(i).id}function BD(t,e,n){let i=e.between;return i&&(i.length!==2&&he('Stream "between" parameter must have 2 entries: '+ht(e)),t.between=[_v(i[0],n),_v(i[1],n)]),i=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push($Ge(e.marktype,e.markname,e.markrole)),e.source===OD&&i.push("inScope(event.item)"),i.length&&(t.filter=Ks("("+i.join(")&&(")+")",n).$expr),(i=e.throttle)!=null&&(t.throttle=+i),(i=e.debounce)!=null&&(t.debounce=+i),e.consume&&(t.consume=!0),t}function $Ge(t,e,n){let i="event.item";return i+(t&&t!=="*"?"&&"+i+".mark.marktype==='"+t+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(e?"&&"+i+".mark.name==='"+e+"'":"")}var zGe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function jGe(t,e,n){let i=t.encode,a={target:n},o=t.events,s=t.update,l=[];o||he("Signal update missing events specification."),fr(o)&&(o=yD(o,e.isSubscope()?OD:TD)),o=st(o).filter(c=>c.signal||c.scale?(l.push(c),0):1),l.length>1&&(l=[WGe(l)]),o.length&&l.push(o.length>1?{merge:o}:o[0]),i!=null&&(s&&he("Signal encode and update are mutually exclusive."),s="encode(item(),"+ht(i)+")"),a.update=fr(s)?Ks(s,e):s.expr!=null?Ks(s.expr,e):s.value!=null?s.value:s.signal!=null?{$expr:zGe,$params:{$value:e.signalRef(s.signal)}}:he("Invalid signal update specification."),t.force&&(a.options={force:!0}),l.forEach(c=>e.addUpdate(St(HGe(c,e),a)))}function HGe(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):_v(t,e)}}function WGe(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function ZGe(t,e){let n=e.getSignal(t.name),i=t.update;t.init&&(i?he("Signals can not include both init and update expressions."):(i=t.init,n.initonly=!0)),i&&(i=Ks(i,e),n.update=i.$expr,n.params=i.$params),t.on&&t.on.forEach(a=>jGe(a,e,n.id))}var Ar=t=>(e,n,i)=>dS(t,n,e||void 0,i),Sce=Ar("aggregate"),XGe=Ar("axisticks"),Nce=Ar("bound"),Qs=Ar("collect"),rce=Ar("compare"),qGe=Ar("datajoin"),Ace=Ar("encode"),KGe=Ar("expression"),YGe=Ar("facet"),JGe=Ar("field"),QGe=Ar("key"),eUe=Ar("legendentries"),tUe=Ar("load"),rUe=Ar("mark"),nUe=Ar("multiextent"),iUe=Ar("multivalues"),aUe=Ar("overlap"),oUe=Ar("params"),Tce=Ar("prefacet"),sUe=Ar("projection"),lUe=Ar("proxy"),cUe=Ar("relay"),Cce=Ar("render"),uUe=Ar("scale"),B1=Ar("sieve"),dUe=Ar("sortitems"),wce=Ar("viewlayout"),fUe=Ar("values"),pUe=0,Ice={min:"min",max:"max",count:"sum"};function hUe(t,e){let n=t.type||"linear";XP(n)||he("Unrecognized scale type: "+ht(n)),e.addScale(t.name,{type:n,domain:void 0})}function mUe(t,e){let n=e.getScale(t.name).params,i;n.domain=Rce(t.domain,t,e),t.range!=null&&(n.range=Mce(t,e,n)),t.interpolate!=null&&AUe(t.interpolate,n),t.nice!=null&&(n.nice=NUe(t.nice,e)),t.bins!=null&&(n.bins=SUe(t.bins,e));for(i in t)ut(n,i)||i==="name"||(n[i]=ds(t[i],e))}function ds(t,e){return Lt(t)?t.signal?e.signalRef(t.signal):he("Unsupported object: "+ht(t)):t}function oS(t,e){return t.signal?e.signalRef(t.signal):t.map(n=>ds(n,e))}function pS(t){he("Can not find data set: "+ht(t))}function Rce(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&he("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(ot(t)?gUe:t.fields?EUe:_Ue)(t,e,n)}function gUe(t,e,n){return t.map(i=>ds(i,n))}function _Ue(t,e,n){let i=n.getData(t.data);return i||pS(t.data),Od(e.type)?i.valuesRef(n,t.field,Pce(t.sort,!1)):YP(e.type)?i.domainRef(n,t.field):i.extentRef(n,t.field)}function EUe(t,e,n){let i=t.data,a=t.fields.reduce((o,s)=>(s=fr(s)?{data:i,field:s}:ot(s)||s.signal?vUe(s,n):s,o.push(s),o),[]);return(Od(e.type)?yUe:YP(e.type)?xUe:bUe)(t,n,a)}function vUe(t,e){let n="_:vega:_"+pUe++,i=Qs({});if(ot(t))i.value={$ingest:t};else if(t.signal){let a="setdata("+ht(n)+","+t.signal+")";i.params.input=e.signalRef(a)}return e.addDataPipeline(n,[i,B1({})]),{data:n,field:"data"}}function yUe(t,e,n){let i=Pce(t.sort,!0),a,o,s=n.map(u=>{let d=e.getData(u.data);return d||pS(u.data),d.countsRef(e,u.field,i)}),l={groupby:AD,pulse:s};i&&(a=i.op||"count",o=i.field?fS(a,i.field):"count",l.ops=[Ice[a]],l.fields=[e.fieldRef(o)],l.as=[o]),a=e.add(Sce(l));let c=e.add(Qs({pulse:Et(a)}));return o=e.add(fUe({field:AD,sort:e.sortRef(i),pulse:Et(c)})),Et(o)}function Pce(t,e){return t&&(!t.field&&!t.op?Lt(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?he("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!Ice[t.op]&&he("Multiple domain scales can not be sorted using "+t.op)),t}function xUe(t,e,n){let i=n.map(a=>{let o=e.getData(a.data);return o||pS(a.data),o.domainRef(e,a.field)});return Et(e.add(iUe({values:i})))}function bUe(t,e,n){let i=n.map(a=>{let o=e.getData(a.data);return o||pS(a.data),o.extentRef(e,a.field)});return Et(e.add(nUe({extents:i})))}function SUe(t,e){return t.signal||ot(t)?oS(t,e):e.objectProperty(t)}function NUe(t,e){return t.signal?e.signalRef(t.signal):Lt(t)?{interval:ds(t.interval),step:ds(t.step)}:ds(t)}function AUe(t,e){e.interpolate=ds(t.type||t),t.gamma!=null&&(e.interpolateGamma=ds(t.gamma))}function Mce(t,e,n){let i=e.config.range,a=t.range;if(a.signal)return e.signalRef(a.signal);if(fr(a)){if(i&&ut(i,a))return t=St({},t,{range:i[a]}),Mce(t,e,n);a==="width"?a=[0,{signal:"width"}]:a==="height"?a=Od(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:he("Unrecognized scale range value: "+ht(a))}else if(a.scheme){n.scheme=ot(a.scheme)?oS(a.scheme,e):ds(a.scheme,e),a.extent&&(n.schemeExtent=oS(a.extent,e)),a.count&&(n.schemeCount=ds(a.count,e));return}else if(a.step){n.rangeStep=ds(a.step,e);return}else{if(Od(t.type)&&!ot(a))return Rce(a,t,e);ot(a)||he("Unsupported range type: "+ht(a))}return a.map(o=>(ot(o)?oS:ds)(o,e))}function TUe(t,e){let n=e.config.projection||{},i={};for(let a in t)a!=="name"&&(i[a]=CD(t[a],a,e));for(let a in n)i[a]==null&&(i[a]=CD(n[a],a,e));e.addProjection(t.name,i)}function CD(t,e,n){return ot(t)?t.map(i=>CD(i,e,n)):Lt(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:he("Unsupported parameter object: "+ht(t)):t}var el="top",ug="left",dg="right",af="bottom",Lce="center",CUe="vertical",wUe="start",IUe="middle",RUe="end",wD="index",DD="label",PUe="offset",lg="perc",MUe="perc2",fs="value",vv="guide-label",FD="guide-title",LUe="group-title",OUe="group-subtitle",nce="symbol",sS="gradient",ID="discrete",RD="size",BUe="shape",DUe="fill",FUe="stroke",kUe="strokeWidth",GUe="strokeDash",UUe="opacity",kD=[RD,BUe,DUe,FUe,kUe,GUe,UUe],yv={name:1,style:1,interactive:1},ir={value:0},ps={value:1},hS="group",Oce="rect",GD="rule",VUe="symbol",D1="text";function Ev(t){return t.type=hS,t.interactive=t.interactive||!1,t}function Ka(t,e){let n=(i,a)=>Ys(t[i],Ys(e[i],a));return n.isVertical=i=>CUe===Ys(t.direction,e.direction||(i?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>Ys(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>Ys(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>Ys(t.columns,Ys(e.columns,+n.isVertical(!0))),n}function Bce(t,e){let n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function $Ue(t,e,n){let i=e.config.style[n];return i&&i[t]}function mS(t,e,n){return`item.anchor === '${wUe}' ? ${t} : item.anchor === '${RUe}' ? ${e} : ${n}`}var UD=mS(ht(ug),ht(dg),ht(Lce));function zUe(t){let e=t("tickBand"),n=t("tickOffset"),i,a;return e?e.signal?(i={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},a={signal:`(${e.signal}) === 'extent'`},Lt(n)||(n={signal:`(${e.signal}) === 'extent' ? 0 : ${n}`})):e==="extent"?(i=1,a=!0,n=0):(i=.5,a=!1):(i=t("bandPosition"),a=t("tickExtra")),{extra:a,band:i,offset:n}}function Dce(t,e){return e?t?Lt(t)?Object.assign({},t,{offset:Dce(t.offset,e)}):{value:t,offset:e}:e:t}function Ao(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=cg(t.encode,e,yv)):t.interactive=!1,t}function jUe(t,e,n,i){let a=Ka(t,n),o=a.isVertical(),s=a.gradientThickness(),l=a.gradientLength(),c,u,d,f,p;o?(u=[0,1],d=[0,0],f=s,p=l):(u=[0,0],d=[1,0],f=l,p=s);let h={enter:c={opacity:ir,x:ir,y:ir,width:Si(f),height:Si(p)},update:St({},c,{opacity:ps,fill:{gradient:e,start:u,stop:d}}),exit:{opacity:ir}};return Gi(h,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),Ao({type:Oce,role:_Ge,encode:h},i)}function HUe(t,e,n,i,a){let o=Ka(t,n),s=o.isVertical(),l=o.gradientThickness(),c=o.gradientLength(),u,d,f,p,h="";s?(u="y",f="y2",d="x",p="width",h="1-"):(u="x",f="x2",d="y",p="height");let m={opacity:ir,fill:{scale:e,field:fs}};m[u]={signal:h+"datum."+lg,mult:c},m[d]=ir,m[f]={signal:h+"datum."+MUe,mult:c},m[p]=Si(l);let _={enter:m,update:St({},m,{opacity:ps}),exit:{opacity:ir}};return Gi(_,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Ao({type:Oce,role:mGe,key:fs,from:a,encode:_},i)}var WUe=`datum.${lg}<=0?"${ug}":datum.${lg}>=1?"${dg}":"${Lce}"`,ZUe=`datum.${lg}<=0?"${af}":datum.${lg}>=1?"${el}":"${IUe}"`;function ice(t,e,n,i){let a=Ka(t,e),o=a.isVertical(),s=Si(a.gradientThickness()),l=a.gradientLength(),c=a("labelOverlap"),u,d,f,p,h="",m={enter:u={opacity:ir},update:d={opacity:ps,text:{field:DD}},exit:{opacity:ir}};return Gi(m,{fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:Ys(t.labelLimit,e.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=d.baseline={signal:ZUe},f="y",p="x",h="1-"):(u.align=d.align={signal:WUe},u.baseline={value:"top"},f="x",p="y"),u[f]=d[f]={signal:h+"datum."+lg,mult:l},u[p]=d[p]=s,s.offset=Ys(t.labelOffset,e.gradientLabelOffset)||0,c=c?{separation:a("labelSeparation"),method:c,order:"datum."+wD}:void 0,Ao({type:D1,role:_ce,style:vv,key:fs,from:i,encode:m,overlap:c},n)}function XUe(t,e,n,i,a){let o=Ka(t,e),s=n.entries,l=!!(s&&s.interactive),c=s?s.name:void 0,u=o("clipHeight"),d=o("symbolOffset"),f={data:"value"},p=`(${a}) ? datum.${PUe} : datum.${RD}`,h=u?Si(u):{field:RD},m=`datum.${wD}`,_=`max(1, ${a})`,E,v,y,x,S;h.mult=.5,E={enter:v={opacity:ir,x:{signal:p,mult:.5,offset:d},y:h},update:y={opacity:ps,x:v.x,y:v.y},exit:{opacity:ir}};let N=null,w=null;t.fill||(N=e.symbolBaseFillColor,w=e.symbolBaseStrokeColor),Gi(E,{fill:o("symbolFillColor",N),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",w),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),kD.forEach(L=>{t[L]&&(y[L]=v[L]={scale:t[L],field:fs})});let T=Ao({type:VUe,role:EGe,key:fs,from:f,clip:u?!0:void 0,encode:E},n.symbols),I=Si(d);I.offset=o("labelOffset"),E={enter:v={opacity:ir,x:{signal:p,offset:I},y:h},update:y={opacity:ps,text:{field:DD},x:v.x,y:v.y},exit:{opacity:ir}},Gi(E,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});let R=Ao({type:D1,role:_ce,style:vv,key:fs,from:f,encode:E},n.labels);return E={enter:{noBound:{value:!u},width:ir,height:u?Si(u):ir,opacity:ir},exit:{opacity:ir},update:y={opacity:ps,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(x=`ceil(item.mark.items.length / ${_})`,y.row.signal=`${m}%${x}`,y.column.signal=`floor(${m} / ${x})`,S={field:["row",m]}):(y.row.signal=`floor(${m} / ${_})`,y.column.signal=`${m} % ${_}`,S={field:m}),y.column.signal=`(${a})?${y.column.signal}:${m}`,i={facet:{data:i,name:"value",groupby:wD}},Ev({role:LD,from:i,encode:cg(E,s,yv),marks:[T,R],name:c,interactive:l,sort:S})}function qUe(t,e){let n=Ka(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}var VD='item.orient === "left"',$D='item.orient === "right"',gS=`(${VD} || ${$D})`,KUe=`datum.vgrad && ${gS}`,YUe=mS('"top"','"bottom"','"middle"'),JUe=mS('"right"','"left"','"center"'),QUe=`datum.vgrad && ${$D} ? (${JUe}) : (${gS} && !(datum.vgrad && ${VD})) ? "left" : ${UD}`,eVe=`item._anchor || (${gS} ? "middle" : "start")`,tVe=`${KUe} ? (${VD} ? -90 : 90) : 0`,rVe=`${gS} ? (datum.vgrad ? (${$D} ? "bottom" : "top") : ${YUe}) : "top"`;function nVe(t,e,n,i){let a=Ka(t,e),o={enter:{opacity:ir},update:{opacity:ps,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ir}};return Gi(o,{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:eVe},angle:{signal:tVe},align:{signal:QUe},baseline:{signal:rVe},text:t.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),baseline:a("titleBaseline")}),Ao({type:D1,role:vGe,style:FD,from:i,encode:o},n)}function iVe(t,e){let n;return Lt(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+ace(t.path)+")":t.sphere&&(n="geoShape("+ace(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function ace(t){return Lt(t)&&t.signal?t.signal:ht(t)}function Fce(t){let e=t.role||"";return e.startsWith("axis")||e.startsWith("legend")||e.startsWith("title")?e:t.type===hS?LD:e||PD}function aVe(t){return{marktype:t.type,name:t.name||void 0,role:t.role||Fce(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function oVe(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function zD(t,e){let n=FI(t.type);n||he("Unrecognized transform type: "+ht(t.type));let i=dS(n.type.toLowerCase(),null,kce(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i}function kce(t,e,n){let i={},a=t.params.length;for(let o=0;o<a;++o){let s=t.params[o];i[s.name]=sVe(s,e,n)}return i}function sVe(t,e,n){let i=t.type,a=e[t.name];if(i==="index")return lVe(t,e,n);if(a===void 0){t.required&&he("Missing required "+ht(e.type)+" parameter: "+ht(t.name));return}else{if(i==="param")return cVe(t,e,n);if(i==="projection")return n.projectionRef(e[t.name])}return t.array&&!ni(a)?a.map(o=>oce(t,o,n)):oce(t,a,n)}function oce(t,e,n){let i=t.type;if(ni(e))return lce(i)?he("Expression references can not be signals."):bD(i)?n.fieldRef(e):cce(i)?n.compareRef(e):n.signalRef(e.signal);{let a=t.expr||bD(i);return a&&uVe(e)?n.exprRef(e.expr,e.as):a&&dVe(e)?gv(e.field,e.as):lce(i)?Ks(e,n):fVe(i)?Et(n.getData(e).values):bD(i)?gv(e):cce(i)?n.compareRef(e):e}}function lVe(t,e,n){return fr(e.from)||he('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function cVe(t,e,n){let i=e[t.name];return t.array?(ot(i)||he("Expected an array of sub-parameters. Instead: "+ht(i)),i.map(a=>sce(t,a,n))):sce(t,i,n)}function sce(t,e,n){let i=t.params.length,a;for(let s=0;s<i;++s){a=t.params[s];for(let l in a.key)if(a.key[l]!==e[l]){a=null;break}if(a)break}a||he("Unsupported parameter: "+ht(e));let o=St(kce(a,e,n),a.key);return Et(n.add(oUe(o)))}var uVe=t=>t&&t.expr,dVe=t=>t&&t.field,fVe=t=>t==="data",lce=t=>t==="expr",bD=t=>t==="field",cce=t=>t==="compare";function pVe(t,e,n){let i,a,o,s,l;return t?(i=t.facet)&&(e||he("Only group marks can be faceted."),i.field!=null?s=l=lS(i,n):(t.data?l=Et(n.getData(t.data).aggregate):(o=zD(St({type:"aggregate",groupby:st(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=lS(i,n),s=l=Et(n.add(o))),a=n.keyRef(i.groupby,!0))):s=Et(n.add(Qs(null,[{}]))),s||(s=lS(t,n)),{key:a,pulse:s,parent:l}}function lS(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:Et(e.getData(t.data).output)}function O1(t,e,n,i,a){this.scope=t,this.input=e,this.output=n,this.values=i,this.aggregate=a,this.index={}}O1.fromEntries=function(t,e){let n=e.length,i=e[n-1],a=e[n-2],o=e[0],s=null,l=1;for(o&&o.type==="load"&&(o=e[1]),t.add(e[0]);l<n;++l)e[l].params.pulse=Et(e[l-1]),t.add(e[l]),e[l].type==="aggregate"&&(s=e[l]);return new O1(t,o,a,i,s)};function Gce(t){return fr(t)?t:null}function uce(t,e,n){let i=fS(n.op,n.field),a;if(e.ops){for(let o=0,s=e.as.length;o<s;++o)if(e.as[o]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((a=n.op.signal)?t.signalRef(a):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function hv(t,e,n,i,a,o,s){let l=e[n]||(e[n]={}),c=DGe(o),u=Gce(a),d,f;if(u!=null&&(t=e.scope,u=u+(c?"|"+c:""),d=l[u]),!d){let p=o?{field:AD,pulse:e.countsRef(t,a,o)}:{field:t.fieldRef(a),pulse:Et(e.output)};c&&(p.sort=t.sortRef(o)),f=t.add(dS(i,void 0,p)),s&&(e.index[a]=f),d=Et(f),u!=null&&(l[u]=d)}return d}O1.prototype={countsRef(t,e,n){let i=this,a=i.counts||(i.counts={}),o=Gce(e),s,l,c;return o!=null&&(t=i.scope,s=a[o]),s?n&&n.field&&uce(t,s.agg.params,n):(c={groupby:t.fieldRef(e,"key"),pulse:Et(i.output)},n&&n.field&&uce(t,c,n),l=t.add(Sce(c)),s=t.add(Qs({pulse:Et(l)})),s={agg:l,ref:Et(s)},o!=null&&(a[o]=s)),s.ref},tuplesRef(){return Et(this.values)},extentRef(t,e){return hv(t,this,"extent","extent",e,!1)},domainRef(t,e){return hv(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return hv(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return hv(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return hv(t,this,"indata","tupleindex",e,!0,!0)}};function hVe(t,e,n){let i=t.from.facet,a=i.name,o=lS(i,e),s;i.name||he("Facet must have a name: "+ht(i)),i.data||he("Facet must reference a data set: "+ht(i)),i.field?s=e.add(Tce({field:e.fieldRef(i.field),pulse:o})):i.groupby?s=e.add(YGe({key:e.keyRef(i.groupby),group:Et(e.proxy(n.parent)),pulse:o})):he("Facet must specify groupby or field: "+ht(i));let l=e.fork(),c=l.add(Qs()),u=l.add(B1({pulse:Et(c)}));l.addData(a,new O1(l,c,c,u)),l.addSignal("parent",null),s.params.subflow={$subflow:l.parse(t).toRuntime()}}function mVe(t,e,n){let i=e.add(Tce({pulse:n.pulse})),a=e.fork();a.add(B1()),a.addSignal("parent",null),i.params.subflow={$subflow:a.parse(t).toRuntime()}}function Uce(t,e,n){let i=t.remove,a=t.insert,o=t.toggle,s=t.modify,l=t.values,c=e.add(cS()),u="if("+t.trigger+',modify("'+n+'",'+[a,i,o,s,l].map(f=>f==null?"null":f).join(",")+"),0)",d=Ks(u,e);c.update=d.$expr,c.params=d.$params}function _S(t,e){let n=Fce(t),i=t.type===hS,a=t.from&&t.from.facet,o=t.overlap,s=t.layout||n===LD||n===MD,l,c,u,d,f,p,h,m=n===PD||s||a,_=pVe(t.from,i,e);c=e.add(qGe({key:_.key||(t.key?gv(t.key):void 0),pulse:_.pulse,clean:!i}));let E=Et(c);c=u=e.add(Qs({pulse:E})),c=e.add(rUe({markdef:aVe(t),interactive:oVe(t.interactive,e),clip:iVe(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Et(c)}));let v=Et(c);c=d=e.add(Ace(xce(t.encode,t.type,n,t.style,e,{mod:!1,pulse:v}))),c.params.parent=e.encode(),t.transform&&t.transform.forEach(w=>{let T=zD(w,e),I=T.metadata;(I.generates||I.changes)&&he("Mark transforms should not generate new data."),I.nomod||(d.params.mod=!0),T.params.pulse=Et(c),e.add(c=T)}),t.sort&&(c=e.add(dUe({sort:e.compareRef(t.sort),pulse:Et(c)})));let y=Et(c);(a||s)&&(s=e.add(wce({layout:e.objectProperty(t.layout),legends:e.legends,mark:v,pulse:y})),p=Et(s));let x=e.add(Nce({mark:v,pulse:p||y}));h=Et(x),i&&(m&&(l=e.operators,l.pop(),s&&l.pop()),e.pushState(y,p||h,E),a?hVe(t,e,_):m?mVe(t,e,_):e.parse(t),e.popState(),m&&(s&&l.push(s),l.push(x))),o&&(h=gVe(o,h,e));let S=e.add(Cce({pulse:h})),N=e.add(B1({pulse:Et(S)},void 0,e.parent()));t.name!=null&&(f=t.name,e.addData(f,new O1(e,u,S,N)),t.on&&t.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&he("Marks only support modify triggers."),Uce(w,e,f)}))}function gVe(t,e,n){let i=t.method,a=t.bound,o=t.separation,s={separation:ni(o)?n.signalRef(o.signal):o,method:ni(i)?n.signalRef(i.signal):i,pulse:e};if(t.order&&(s.sort=n.compareRef({field:t.order})),a){let l=a.tolerance;s.boundTolerance=ni(l)?n.signalRef(l.signal):+l,s.boundScale=n.scaleRef(a.scale),s.boundOrient=a.orient}return Et(n.add(aUe(s)))}function _Ve(t,e){let n=e.config.legend,i=t.encode||{},a=Ka(t,n),o=i.legend||{},s=o.name||void 0,l=o.interactive,c=o.style,u={},d=0,f,p,h;kD.forEach(x=>t[x]?(u[x]=t[x],d=d||t[x]):0),d||he("Missing valid scale for legend.");let m=EVe(t,e.scaleType(d)),_={title:t.title!=null,scales:u,type:m,vgrad:m!=="symbol"&&a.isVertical()},E=Et(e.add(Qs(null,[_]))),v={enter:{x:{value:0},y:{value:0}}},y=Et(e.add(eUe(p={type:m,scale:e.scaleRef(d),count:e.objectProperty(a("tickCount")),limit:e.property(a("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return m===sS?(h=[jUe(t,d,n,i.gradient),ice(t,n,i.labels,y)],p.count=p.count||e.signalRef(`max(2,2*floor((${L1(a.gradientLength())})/100))`)):m===ID?h=[HUe(t,d,n,i.gradient,y),ice(t,n,i.labels,y)]:(f=qUe(t,n),h=[XUe(t,n,i,y,L1(f.columns))],p.size=xVe(t,e,h[0].marks)),h=[Ev({role:gGe,from:E,encode:v,marks:h,layout:f,interactive:l})],_.title&&h.push(nVe(t,n,i.title,E)),_S(Ev({role:hGe,from:E,encode:cg(yVe(a,t,n),o,yv),marks:h,aria:a("aria"),description:a("description"),zindex:a("zindex"),name:s,interactive:l,style:c}),e)}function EVe(t,e){let n=t.type||nce;return!t.type&&vVe(t)===1&&(t.fill||t.stroke)&&(n=K3(e)?sS:j8(e)?ID:nce),n!==sS?n:j8(e)?ID:sS}function vVe(t){return kD.reduce((e,n)=>e+(t[n]?1:0),0)}function yVe(t,e,n){let i={enter:{},update:{}};return Gi(i,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),i}function xVe(t,e,n){let i=L1(dce("size",t,n)),a=L1(dce("strokeWidth",t,n)),o=L1(bVe(n[1].encode,e,vv));return Ks(`max(ceil(sqrt(${i})+${a}),${o})`,e)}function dce(t,e,n){return e[t]?`scale("${e[t]}",datum)`:Bce(t,n[0].encode)}function bVe(t,e,n){return Bce("fontSize",t)||$Ue("fontSize",e,n)}var SVe=`item.orient==="${ug}"?-90:item.orient==="${dg}"?90:0`;function NVe(t,e){t=fr(t)?{text:t}:t;let n=Ka(t,e.config.title),i=t.encode||{},a=i.group||{},o=a.name||void 0,s=a.interactive,l=a.style,c=[],u={},d=Et(e.add(Qs(null,[u])));return c.push(CVe(t,n,AVe(t),d)),t.subtitle&&c.push(wVe(t,n,i.subtitle,d)),_S(Ev({role:yGe,from:d,encode:TVe(n,a),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:l}),e)}function AVe(t){let e=t.encode;return e&&e.title||St({name:t.name,interactive:t.interactive,style:t.style},e)}function TVe(t,e){let n={enter:{},update:{}};return Gi(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:UD},angle:{signal:SVe},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),cg(n,e,yv)}function CVe(t,e,n,i){let a={value:0},o=t.text,s={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return Gi(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),Ao({type:D1,role:xGe,style:LUe,from:i,encode:s},n)}function wVe(t,e,n,i){let a={value:0},o=t.subtitle,s={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return Gi(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),Ao({type:D1,role:bGe,style:OUe,from:i,encode:s},n)}function IVe(t,e){let n=[];t.transform&&t.transform.forEach(i=>{n.push(zD(i,e))}),t.on&&t.on.forEach(i=>{Uce(i,e,t.name)}),e.addDataPipeline(t.name,RVe(t,e,n))}function RVe(t,e,n){let i=[],a=null,o=!1,s=!1,l,c,u,d,f;for(t.values?ni(t.values)||aS(t.format)?(i.push(fce(e,t)),i.push(a=M1())):i.push(a=M1({$ingest:t.values,$format:t.format})):t.url?aS(t.url)||aS(t.format)?(i.push(fce(e,t)),i.push(a=M1())):i.push(a=M1({$request:t.url,$format:t.format})):t.source&&(a=l=st(t.source).map(p=>Et(e.getData(p).output)),i.push(null)),c=0,u=n.length;c<u;++c)d=n[c],f=d.metadata,!a&&!f.source&&i.push(a=M1()),i.push(d),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?a=d:f.changes&&(a=null);return l&&(u=l.length-1,i[0]=cUe({derive:o,pulse:u?l:l[0]}),(o||u)&&i.splice(1,0,M1())),a||i.push(M1()),i.push(B1({})),i}function M1(t){let e=Qs({},t);return e.metadata={source:!0},e}function fce(t,e){return tUe({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}var Vce=t=>t===af||t===el,ES=(t,e,n)=>ni(t)?OVe(t.signal,e,n):t===ug||t===el?e:n,Ni=(t,e,n)=>ni(t)?MVe(t.signal,e,n):Vce(t)?e:n,Js=(t,e,n)=>ni(t)?LVe(t.signal,e,n):Vce(t)?n:e,$ce=(t,e,n)=>ni(t)?BVe(t.signal,e,n):t===el?{value:e}:{value:n},PVe=(t,e,n)=>ni(t)?DVe(t.signal,e,n):t===dg?{value:e}:{value:n},MVe=(t,e,n)=>zce(`${t} === '${el}' || ${t} === '${af}'`,e,n),LVe=(t,e,n)=>zce(`${t} !== '${el}' && ${t} !== '${af}'`,e,n),OVe=(t,e,n)=>jD(`${t} === '${ug}' || ${t} === '${el}'`,e,n),BVe=(t,e,n)=>jD(`${t} === '${el}'`,e,n),DVe=(t,e,n)=>jD(`${t} === '${dg}'`,e,n),zce=(t,e,n)=>(e=e!=null?Si(e):e,n=n!=null?Si(n):n,pce(e)&&pce(n)?(e=e?e.signal||ht(e.value):null,n=n?n.signal||ht(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[St({test:t},e)].concat(n||[])),pce=t=>t==null||Object.keys(t).length===1,jD=(t,e,n)=>({signal:`${t} ? (${og(e)}) : (${og(n)})`}),FVe=(t,e,n,i,a)=>({signal:(i!=null?`${t} === '${ug}' ? (${og(i)}) : `:"")+(n!=null?`${t} === '${af}' ? (${og(n)}) : `:"")+(a!=null?`${t} === '${dg}' ? (${og(a)}) : `:"")+(e!=null?`${t} === '${el}' ? (${og(e)}) : `:"")+"(null)"}),og=t=>ni(t)?t.signal:t==null?null:ht(t),kVe=(t,e)=>e===0?0:ni(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},sg=(t,e)=>{let n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function ig(t,e,n,i){let a;if(e&&ut(e,t))return e[t];if(ut(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":a="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":a=t[5].toLowerCase()+t.slice(6)}return i[FD][a]}else if(t.startsWith("label")){switch(t){case"labelColor":a="fill";break;case"labelFont":case"labelFontSize":a=t[5].toLowerCase()+t.slice(6)}return i[vv][a]}return null}function hce(t){let e={};for(let n of t)if(n)for(let i in n)e[i]=1;return Object.keys(e)}function GVe(t,e){var n=e.config,i=n.style,a=n.axis,o=e.scaleType(t.scale)==="band"&&n.axisBand,s=t.orient,l,c,u;if(ni(s)){let f=hce([n.axisX,n.axisY]),p=hce([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);l={};for(u of f)l[u]=Ni(s,ig(u,n.axisX,a,i),ig(u,n.axisY,a,i));c={};for(u of p)c[u]=FVe(s.signal,ig(u,n.axisTop,a,i),ig(u,n.axisBottom,a,i),ig(u,n.axisLeft,a,i),ig(u,n.axisRight,a,i))}else l=s===el||s===af?n.axisX:n.axisY,c=n["axis"+s[0].toUpperCase()+s.slice(1)];return l||c||o?St({},a,l,c,o):a}function UVe(t,e,n,i){let a=Ka(t,e),o=t.orient,s,l,c={enter:s={opacity:ir},update:l={opacity:ps},exit:{opacity:ir}};Gi(c,{stroke:a("domainColor"),strokeCap:a("domainCap"),strokeDash:a("domainDash"),strokeDashOffset:a("domainDashOffset"),strokeWidth:a("domainWidth"),strokeOpacity:a("domainOpacity")});let u=mce(t,0),d=mce(t,1);return s.x=l.x=Ni(o,u,ir),s.x2=l.x2=Ni(o,d),s.y=l.y=Js(o,u,ir),s.y2=l.y2=Js(o,d),Ao({type:GD,role:cGe,from:i,encode:c},n)}function mce(t,e){return{scale:t.scale,range:e}}function VVe(t,e,n,i,a){let o=Ka(t,e),s=t.orient,l=t.gridScale,c=ES(s,1,-1),u=$Ve(t.offset,c),d,f,p,h={enter:d={opacity:ir},update:p={opacity:ps},exit:f={opacity:ir}};Gi(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});let m={scale:t.scale,field:fs,band:a.band,extra:a.extra,offset:a.offset,round:o("tickRound")},_=Ni(s,{signal:"height"},{signal:"width"}),E=l?{scale:l,range:0,mult:c,offset:u}:{value:0,offset:u},v=l?{scale:l,range:1,mult:c,offset:u}:St(_,{mult:c,offset:u});return d.x=p.x=Ni(s,m,E),d.y=p.y=Js(s,m,E),d.x2=p.x2=Js(s,v),d.y2=p.y2=Ni(s,v),f.x=Ni(s,m),f.y=Js(s,m),Ao({type:GD,role:uGe,key:fs,from:i,encode:h},n)}function $Ve(t,e){if(e!==1)if(!Lt(t))t=ni(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let n=t=St({},t);for(;n.mult!=null;)if(Lt(n.mult))n=n.mult=St({},n.mult);else return n.mult=ni(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n.mult=e}return t}function zVe(t,e,n,i,a,o){let s=Ka(t,e),l=t.orient,c=ES(l,-1,1),u,d,f,p={enter:u={opacity:ir},update:f={opacity:ps},exit:d={opacity:ir}};Gi(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});let h=Si(a);h.mult=c;let m={scale:t.scale,field:fs,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=u.y=Ni(l,ir,m),f.y2=u.y2=Ni(l,h),d.x=Ni(l,m),f.x=u.x=Js(l,ir,m),f.x2=u.x2=Js(l,h),d.y=Js(l,m),Ao({type:GD,role:fGe,key:fs,from:i,encode:p},n)}function SD(t,e,n,i,a){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+i+","+a+")"}}function jVe(t,e,n,i,a,o){let s=Ka(t,e),l=t.orient,c=t.scale,u=ES(l,-1,1),d=L1(s("labelFlush")),f=L1(s("labelFlushOffset")),p=s("labelAlign"),h=s("labelBaseline"),m=d===0||!!d,_,E=Si(a);E.mult=u,E.offset=Si(s("labelPadding")||0),E.offset.mult=u;let v={scale:c,field:fs,band:.5,offset:Dce(o.offset,s("labelOffset"))},y=Ni(l,m?SD(c,d,'"left"','"right"','"center"'):{value:"center"},PVe(l,"left","right")),x=Ni(l,$ce(l,"bottom","top"),m?SD(c,d,'"top"','"bottom"','"middle"'):{value:"middle"}),S=SD(c,d,`-(${f})`,f,0);m=m&&f;let N={opacity:ir,x:Ni(l,v,E),y:Js(l,v,E)},w={enter:N,update:_={opacity:ps,text:{field:DD},x:N.x,y:N.y,align:y,baseline:x},exit:{opacity:ir,x:N.x,y:N.y}};Gi(w,{dx:!p&&m?Ni(l,S):null,dy:!h&&m?Js(l,S):null}),Gi(w,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:h});let T=s("labelBound"),I=s("labelOverlap");return I=I||T?{separation:s("labelSeparation"),method:I,order:"datum.index",bound:T?{scale:c,orient:l,tolerance:T}:null}:void 0,_.align!==y&&(_.align=sg(_.align,y)),_.baseline!==x&&(_.baseline=sg(_.baseline,x)),Ao({type:D1,role:dGe,style:vv,key:fs,from:i,encode:w,overlap:I},n)}function HVe(t,e,n,i){let a=Ka(t,e),o=t.orient,s=ES(o,-1,1),l,c,u={enter:l={opacity:ir,anchor:Si(a("titleAnchor",null)),align:{signal:UD}},update:c=St({},l,{opacity:ps,text:Si(t.title)}),exit:{opacity:ir}},d={signal:`lerp(range("${t.scale}"), ${mS(0,1,.5)})`};return c.x=Ni(o,d),c.y=Js(o,d),l.angle=Ni(o,ir,kVe(s,90)),l.baseline=Ni(o,$ce(o,af,el),{value:af}),c.angle=l.angle,c.baseline=l.baseline,Gi(u,{fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),angle:a("titleAngle"),baseline:a("titleBaseline")}),WVe(a,o,u,n),u.update.align=sg(u.update.align,l.align),u.update.angle=sg(u.update.angle,l.angle),u.update.baseline=sg(u.update.baseline,l.baseline),Ao({type:D1,role:pGe,style:FD,from:i,encode:u},n)}function WVe(t,e,n,i){let a=(l,c)=>l!=null?(n.update[c]=sg(Si(l),n.update[c]),!1):!ag(c,i),o=a(t("titleX"),"x"),s=a(t("titleY"),"y");n.enter.auto=s===o?Si(s):Ni(e,Si(s),Si(o))}function ZVe(t,e){let n=GVe(t,e),i=t.encode||{},a=i.axis||{},o=a.name||void 0,s=a.interactive,l=a.style,c=Ka(t,n),u=zUe(c),d={scale:t.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:t.title!=null},f=Et(e.add(Qs({},[d]))),p=Et(e.add(XGe({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),h=[],m;return d.grid&&h.push(VVe(t,n,i.grid,p,u)),d.ticks&&(m=c("tickSize"),h.push(zVe(t,n,i.ticks,p,m,u))),d.labels&&(m=d.ticks?m:0,h.push(jVe(t,n,i.labels,p,m,u))),d.domain&&h.push(UVe(t,n,i.domain,f)),d.title&&h.push(HVe(t,n,i.title,f)),_S(Ev({role:lGe,from:f,encode:cg(XVe(c,t),a,yv),marks:h,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:s,style:l}),e)}function XVe(t,e){let n={enter:{},update:{}};return Gi(n,{orient:t("orient"),offset:t("offset")||0,position:Ys(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function jce(t,e,n){let i=st(t.signals),a=st(t.scales);return n||i.forEach(o=>bce(o,e)),st(t.projections).forEach(o=>TUe(o,e)),a.forEach(o=>hUe(o,e)),st(t.data).forEach(o=>IVe(o,e)),a.forEach(o=>mUe(o,e)),(n||i).forEach(o=>ZGe(o,e)),st(t.axes).forEach(o=>ZVe(o,e)),st(t.marks).forEach(o=>_S(o,e)),st(t.legends).forEach(o=>_Ve(o,e)),t.title&&NVe(t.title,e),e.parseLambdas(),e}var qVe=t=>cg({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function KVe(t,e){let n=e.config,i=Et(e.root=e.add(cS())),a=YVe(t,n);a.forEach(u=>bce(u,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;let o=e.add(Qs()),s=e.add(Ace(xce(qVe(t.encode),hS,MD,t.style,e,{pulse:Et(o)}))),l=e.add(wce({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:i,pulse:Et(s)}));e.operators.pop(),e.pushState(Et(s),Et(l),null),jce(t,e,a),e.operators.push(l);let c=e.add(Nce({mark:i,pulse:Et(l)}));return c=e.add(Cce({pulse:Et(c)})),c=e.add(B1({pulse:Et(c)})),e.addData("root",new O1(e,o,o,c)),e}function mv(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function YVe(t,e){let n=s=>Ys(t[s],e[s]),i=[mv("background",n("background")),mv("autosize",aGe(n("autosize"))),mv("padding",sGe(n("padding"))),mv("width",n("width")||0),mv("height",n("height")||0)],a=i.reduce((s,l)=>(s[l.name]=l,s),{}),o={};return st(t.signals).forEach(s=>{ut(a,s.name)?s=St(a[s.name],s):i.push(s),o[s.name]=s}),st(e.signals).forEach(s=>{!ut(o,s.name)&&!ut(a,s.name)&&i.push(s)}),i}function Hce(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function gce(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}Hce.prototype=gce.prototype={parse(t){return jce(t,this)},fork(){return new gce(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){let e=t instanceof ND?Et(t):t;return this.add(lUe({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(i,a,o){let s,l;i&&(s=i.data||(i.data={}),l=s[a]||(s[a]=[]),l.push(o))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(let i in e.index)n(e.index[i],t,"index:"+i)}return this},pushState(t,e,n){this._encode.push(Et(this.add(B1({pulse:t})))),this._parent.push(e),this._lookup.push(n?Et(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Vt(this._parent)},encode(){return Vt(this._encode)},lookup(){return Vt(this._lookup)},markpath(){let t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(fr(t))return gv(t,e);t.signal||he("Unsupported field reference: "+ht(t));let n=t.signal,i=this.field[n];if(!i){let a={name:this.signalRef(n)};e&&(a.as=e),this.field[n]=i=Et(this.add(JGe(a)))}return i},compareRef(t){let e=!1,n=o=>ni(o)?(e=!0,this.signalRef(o.signal)):FGe(o)?(e=!0,this.exprRef(o.expr)):o,i=st(t.field).map(n),a=st(t.order).map(n);return e?Et(this.add(rce({fields:i,orders:a}))):ece(i,a)},keyRef(t,e){let n=!1,i=o=>ni(o)?(n=!0,Et(a[o.signal])):o,a=this.signals;return t=st(t).map(i),n?Et(this.add(QGe({fields:t,flat:e}))):LGe(t,e)},sortRef(t){if(!t)return t;let e=fS(t.op,t.field),n=t.order||OGe;return n.signal?Et(this.add(rce({fields:e,orders:this.signalRef(n.signal)}))):ece(e,n)},event(t,e){let n=t+":"+e;if(!this.events[n]){let i=this.id();this.streams.push({id:i,source:t,type:e}),this.events[n]=i}return this.events[n]},hasOwnSignal(t){return ut(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&he("Duplicate signal name: "+ht(t));let n=e instanceof ND?e:this.add(cS(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||he("Unrecognized signal name: "+ht(t)),this.signals[t]},signalRef(t){return this.signals[t]?Et(this.signals[t]):(ut(this.lambdas,t)||(this.lambdas[t]=this.add(cS(null))),Et(this.lambdas[t]))},parseLambdas(){let t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){let i=t[e],a=Ks(i,this),o=this.lambdas[i];o.params=a.$params,o.update=a.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!Lt(t)?t:this.signalRef(t.signal||HD(t))},exprRef(t,e){let n={expr:Ks(t,this)};return e&&(n.expr.$name=e),Et(this.add(KGe(n)))},addBinding(t,e){this.bindings||he("Nested signals do not support binding: "+ht(t)),this.bindings.push(St({signal:t},e))},addScaleProj(t,e){ut(this.scales,t)&&he("Duplicate scale or projection name: "+ht(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,uUe(e))},addProjection(t,e){this.addScaleProj(t,sUe(e))},getScale(t){return this.scales[t]||he("Unrecognized scale name: "+ht(t)),this.scales[t]},scaleRef(t){return Et(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return ut(this.data,t)&&he("Duplicate data set name: "+ht(t)),this.data[t]=e},getData(t){return this.data[t]||he("Undefined data set name: "+ht(t)),this.data[t]},addDataPipeline(t,e){return ut(this.data,t)&&he("Duplicate data set name: "+ht(t)),this.addData(t,O1.fromEntries(this,e))}};function HD(t){return(ot(t)?JVe:QVe)(t)}function JVe(t){let e=t.length,n="[";for(let i=0;i<e;++i){let a=t[i];n+=(i>0?",":"")+(Lt(a)?a.signal||HD(a):ht(a))}return n+"]"}function QVe(t){let e="{",n=0,i,a;for(i in t)a=t[i],e+=(++n>1?",":"")+ht(i)+":"+(Lt(a)?a.signal||HD(a):ht(a));return e+"}"}function e$e(){let t="sans-serif",i="#4c78a8",a="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:a},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:a,font:t,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:a,font:t,fontSize:10},"guide-title":{fill:a,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:a,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:a,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function fg(t,e,n){return Lt(t)||he("Input Vega specification must be an object."),e=nY(e$e(),e,t.config),KVe(t,new Hce(e,n)).toRuntime()}St(xd,IR,eL,aL,SO,FO,AB,hB,IB,MB,BB,kB);var To="$";function vS(){}vS.prototype=Wce.prototype={constructor:vS,has:function(t){return To+t in this},get:function(t){return this[To+t]},set:function(t,e){return this[To+t]=e,this},remove:function(t){var e=To+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===To&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===To&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===To&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===To&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===To&&++t;return t},empty:function(){for(var t in this)if(t[0]===To)return!1;return!0},each:function(t){for(var e in this)e[0]===To&&t(this[e],e.slice(1),this)}};function Wce(t,e){var n=new vS;if(t instanceof vS)t.each(function(l,c){n.set(c,l)});else if(Array.isArray(t)){var i=-1,a=t.length,o;if(e==null)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(o=t[i],i,t),o)}else if(t)for(var s in t)n.set(s,t[s]);return n}var xv=Wce;function yS(){}var F1=xv.prototype;yS.prototype=t$e.prototype={constructor:yS,has:F1.has,add:function(t){return t+="",this[To+t]=t,this},remove:F1.remove,clear:F1.clear,values:F1.keys,size:F1.size,empty:F1.empty,each:F1.each};function t$e(t,e){var n=new yS;if(t instanceof yS)t.each(function(o){n.add(o)});else if(t){var i=-1,a=t.length;if(e==null)for(;++i<a;)n.add(t[i]);else for(;++i<a;)n.add(e(t[i],i,t))}return n}var qje=Ma(Kce(),1);var a$e=Object.defineProperty,o$e=(t,e,n)=>e in t?a$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TS=(t,e,n)=>(o$e(t,typeof e!="symbol"?e+"":e,n),n);var mue={fillColor:[185,182,182],strokeColor:[124,122,121]};var WD=.9,ZD=.8,XD=1.2;var s$e=[100,100,100,255],l$e=[200,200,200,255];var c$e="basebucket.com",u$e="default",Ia=2**18,gue=0,nF=-10,_ue=20;var Ca=Ia/2**13,iF=Ia/2**9,d$e=Ca/2,f$e=Ca*2**4;var p$e=5,Eue=mue.fillColor,YD=mue.strokeColor;var KDt=.7*256;var aF="node-polygon-layer",vue="edge-node-layer";var oF="connection-handle-layer",sF=[44,255,255,255],YDt=new Pe({key:"default",namespace:c$e,boardId:u$e,type:"NodeType",name:{name:"Default Type"},appearance:{fillColor:Eue,strokeColor:YD,extrusion:p$e}});function h$e(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function yue(t,e,n){return h$e(t)?t.map((i,a)=>yue(i,e[a],n)):n*e+(1-n)*t}function SS(t,e,n,i,a){if(!t[0]&&t[0]!==0||!t[1]&&t[1]!==0)return null;if(a===t9||a===O2){let s=(e[0]||e[1])/4;return m$e(s,t)}let o=0;return g$e(e[0]-o*2,e[1]-o*2,t,n).map(([s,l])=>[s,l,i||0])}function m$e(t,e,n=32){let[i,a]=e,o=[];for(let s=0;s<=n;s++){let l=s/n*2*Math.PI,c=i+t*Math.cos(l),u=a+t*Math.sin(l);o.push([c,u])}return o}function g$e(t,e,n,i,a=0,o=6){let s=(t+a*2)/2-i,l=(e+a*2)/2-i,[c,u]=n,d=[];for(let f=0;f<=o;f++){let p=f/o*Math.PI/2,h=c+s+i*Math.sin(p),m=u-l-i*Math.cos(p);d.push([h,m])}for(let f=0;f<=o;f++){let p=f/o*Math.PI/2,h=c+s+i*Math.cos(p),m=u+l+i*Math.sin(p);d.push([h,m])}for(let f=0;f<=o;f++){let p=f/o*Math.PI/2,h=c-s-i*Math.sin(p),m=u+l+i*Math.cos(p);d.push([h,m])}for(let f=0;f<=o;f++){let p=f/o*Math.PI/2,h=c-s-i*Math.cos(p),m=u-l-i*Math.sin(p);d.push([h,m])}return d.push(d[0]),d}var Sv="selected-node-bounds";function _$e({layout:t,interactionManager:e,nodeProps:n}){if(!t.polygons[Sv])return null;let i=[{key:"selection-box",type:"SelectionBox",namespace:hr,versionUri:Sv}],a={getPolygon:t.updateTriggers.selectedNodeBoundsChange};return new da({id:t.getLayerId(Sv),data:i,getPolygon:s=>t.polygons[s.versionUri],getLineColor:s$e,getLineWidth:1,lineWidthUnits:"pixels",pickable:!1,extruded:!1,stroked:!0,filled:!1,lineWidthMinPixels:1,lineWidthMaxPixels:4,updateTriggers:a,transitions:t.getTransitions()})}var qD={basemapMvt:{}},lF=new Map;function xue(t){return`${t}`}function bue(t,e){return{namespace:hr,type:"Type",key:t,appearance:e}}lF.set(xue("building"),bue("building",{fillColor:[255,0,0,255],strokeColor:[0,255,0,255]}));lF.set(xue("park"),bue("park",{fillColor:[255,0,0,255],strokeColor:[0,255,0,255]}));var E$e=lF,CS=class{constructor({parentNodeProps:t,nodePropsList:e=[],edgePropsList:n=[],timeline:i,cameraFrame:a}){le(this,"parentNodeProps");le(this,"id");le(this,"nodes",new Map);le(this,"cameraFrame");le(this,"animations",new Map);le(this,"insightCursor",null);le(this,"timeline");le(this,"typeNodePropsMap",E$e);le(this,"polygons",{});le(this,"updateTriggers",{});le(this,"_viewIsActive",!1);var o;this.parentNodeProps=t,this.id=Pe.nodePropsToUri(t),this.timeline=i,a&&(this.cameraFrame=a),console.log("init layout"),(o=t.appearance)!=null&&o.startWithActivatedView&&this.setViewActive(!0)}applyNodeProps(t,e,n){this.nodes=t;for(let a of e)a.type===di&&this.typeNodePropsMap.set(a.key,a);let i=[];for(let a of e){let o=Pe.nodePropsToUri(a);if(a.nodeUri=o,a.timing||a.timing===0)if(a.deletedAt)this.animations.delete(o);else{let s=this.animations.get(o);s||(s=new mq({}),this.animations.set(o,s)),s.updateKeyframe(a,a.timing,this.timeline)}a.relations&&i.push(a)}for(let a of i){let{relations:o}=a,s=Pe.nodePropsToUri(a);for(let l of Object.keys(o)){let c=o[l];for(let u of c){let d=B2({sourceUri:s,relationKey:l,targetUri:u})}}}}applyEdgeProps(t){}run(t,e){}getViewId(){return this.id}getLayerId(t,e){return`${e||this.id}-${t}`}viewIsActive(t=!1){return t?!0:this._viewIsActive}setViewActive(t){this._viewIsActive=t}getView({nodeProps:t,interactionMode:e,disableController:n,orthographic:i}){let{viewX:a,viewY:o,width:s,height:l,paddingLeft:c,paddingBottom:u,paddingRight:d,paddingTop:f}=this.cameraFrame,p=Pe.nodePropsToUri(t);return new xc({id:p,width:s,height:l,x:a,y:o,padding:{left:c||220,bottom:u||0,right:d||220,top:f||0},controller:n?!1:{dragMode:e==="rotating"?"rotate":"pan",dragPan:e==="panning",dragRotate:e==="rotating",inertia:!1,doubleClickZoom:!1,scrollZoom:n?null:{speed:.01,smooth:!0}},orthographic:i||!1})}getConnectionTypeFromRelationKey(t){return t.reduce((e,n)=>{let{relationKey:i}=n;if(!i)return e;switch(i){case pZ:case rC:case tC:case Sp:case aC:case hZ:case mZ:case"collaboratesOn":case"worksAt":case"isModelOf":case"isVersionOf":e.insight.push(n);break;case $o:case Is:case L2:case iC:case M2:case nC:case fZ:e.downstream.push(n);break;default:break}return e},{contains:[],containedIn:[],downstream:[],upstream:[],insight:[]})}applyUpdateTriggers(t={}){for(let e of Object.keys(t))t[e]&&(this.updateTriggers[e]=Date.now())}setInsightCursor(t){if(t===null)this.insightCursor=null;else{let e=Math.round(t);this.timeline.setTime(e),this.insightCursor=e}}setTime(t){let e=Math.round(t)}hasView(){return!!this.cameraFrame}getViewState(){return this.getCameraFrame()}setCameraFrame(t){this.cameraFrame={...this.cameraFrame,...t}}updateCameraFrameFromAnimation(){}getCameraFrame(){return this.insightCursor,this.cameraFrame}getCameraAnimationFrame(){return{}}createDefaultCameraTimelineProps(t,e,n){return{id:e.id,attributes:t,timings:[0,1],keyframes:[{...e},n||{...e}],easings:yue,interpolators:"linear"}}getBackgroundColor(){var t;return(t=this.getCameraFrame())==null?void 0:t.backgroundColor}getZoom(){var t;return((t=this.getCameraFrame())==null?void 0:t.zoom)||0}getRotationX(){let t=this.getCameraFrame();return(t==null?void 0:t.rotationX)||90}isTilted(){var t;return(((t=this.cameraFrame)==null?void 0:t.rotationX)||0)!==90}isRotated(){var t;return(((t=this.cameraFrame)==null?void 0:t.rotationOrbit)||0)!==0}getNodeFrame(t){if(!t.timing&&t.timing!==0){let e=Pe.nodePropsToVersionUri(t),n=this.nodes.get(e);return n?n.appearance:void 0}else{let e=this.animations.get(Pe.nodePropsToUri(t));if(e){let n=e.getFrame(),i=[...e.timings].reverse();return n.timing=i.find(a=>a<=this.insightCursor)||0,n}return}}getNodeFrameByUri(t){if(this.insightCursor===null){let e=this.nodes.get(`${t}/latest`);if(!e){console.warn("no node found in layout nodes with /latest",t);return}return this.getNodeFrame(e)}else return this.getNodeFrame(Pe.uriToNodeProps(t,{timing:this.insightCursor}))}getNodeFrameAtTiming(t,e){let n=this.insightCursor;this.setInsightCursor(e);let i=this.getNodeFrame(t);return this.setInsightCursor(n),i}getResizeHandleRadius(t){return t==="hover"?8:5}getTransitions(){}getVisibleNodes(){let t=this.insightCursor,e=[...this.nodes.values()].filter(i=>i.timing===void 0).map(i=>(i.versionUri=Pe.nodePropsToVersionUri(i),i.nodeUri=Pe.nodePropsToUri(i),i));return t===null?e.filter(i=>{var a,o;return((a=i.appearance)==null?void 0:a.position)&&((o=i.appearance)==null?void 0:o.size)}):e.map(i=>{let a=this.getNodeFrame({...i,timing:t});if(a||(a=this.getNodeFrameAtTiming(i,0)),!a)return i;let o=this.nodes.get(`${i.nodeUri}/${a.timing}`)||i;return{...o,appearance:o0(o.appearance,a),versionUri:Pe.nodePropsToVersionUri({...o,timing:t}),timing:t}}).filter(i=>{var a,o;return((a=i.appearance)==null?void 0:a.position)&&((o=i.appearance)==null?void 0:o.size)})}getNodePropsFromNodeFrameUri(t){let e=this.getNodeFrameByUri(t),{key:n,namespace:i,type:a}=Pe.uriToNodeProps(t);return e?{nodeUri:t,key:n,namespace:i,type:a,timing:this.insightCursor,appearance:e}:{nodeUri:t,key:n,namespace:i,type:a,timing:this.insightCursor,appearance:{}}}getNodePosition(t,e){let n=e||this.timeline.getTime(),i=this.getNodeFrame(t);return(i==null?void 0:i.position)||[0,0,0]}getNodeSize(t){let e=this.getNodeFrame(t);return(e==null?void 0:e.size)||[0,0]}getNodeRadius(t){let e=this.getNodeFrame(t);return e?e.size[0]/2||0:Ca}getNodeExtrusion(t){let e=this.getNodeFrame(t);return(e==null?void 0:e.extrusion)||0}getDefaultNodeSize(){let t=this.getZoom();return vr(Ca/2**(t-1),d$e,f$e)}getNodeScale(t){let e=this.getNodeFrame(t);return(e==null?void 0:e.scale)||[1,1,1]}getNodeOrientation(t){let e=this.getNodeFrame(t);return(e==null?void 0:e.rotation)||[0,0,0]}getNodeFillColor(t,e,n="default"){var l,c;let i=this.getNodeFrame(t),a=((c=(l=this.typeNodePropsMap.get(n))==null?void 0:l.appearance)==null?void 0:c.fillColor)||Eue;if(!i)return this.getColorNuanace([...a,255],e);let s=[...i.fillColor||a,i.opacity||1*255];return this.getColorNuanace(s,e)}getColorNuanace(t,e="default"){return e==="hover"?(t[0]=t[0]*WD,t[1]=t[1]*WD,t[2]=t[2]*WD):e==="dragging"?(t[0]=t[0]*ZD,t[1]=t[1]*ZD,t[2]=t[2]*ZD):e==="inside"&&(t[0]=t[0]*XD,t[1]=t[1]*XD,t[2]=t[2]*XD),t}getNodeStrokeColor(t,e){let n=this.getNodeFrame(t);if(!n)return this.getColorNuanace([...YD,255],e);let a=[...n.strokeColor||YD,n.opacity||1*255];return this.getColorNuanace(a,e)}getNodeImageUrl(t){var a,o,s;let e=this.getNodeFrame(t),n=((o=(a=this.typeNodePropsMap.get(t.type))==null?void 0:a.appearance)==null?void 0:o.imageUrl)||((s=t.appearance)==null?void 0:s.imageUrl);return e&&e.imageUrl||n}getNodeAsset3dUrl(t){var a,o,s;let e=this.getNodeFrame(t),n=((o=(a=this.typeNodePropsMap.get(t.type))==null?void 0:a.appearance)==null?void 0:o.asset3dUrl)||((s=t.appearance)==null?void 0:s.asset3dUrl);return e&&e.asset3dUrl||n}getCornerRadius(t="node"){let e=this.getZoom(),n=t==="node"?Ca*4:Ca;return Math.min(Ca/5,n/2**e)}getExtrusionFactor(){return 5/2**this.getZoom()}getEdgeFrame(t){t.timing}getEdgeFrameByEdgeId(t){this.insightCursor}getVisibleEdges(){let t=this.insightCursor,e=this.getVisibleNodes(),n=e.reduce((a,o)=>a.set(o.nodeUri,o),new Map);return e.reduce((a,o)=>{let{relations:s={}}=o,l=o.nodeUri;for(let c of Object.keys(s)){let u=s[c];for(let d of u){let f=n.get(d);if(!f){console.log("target node not visible",d);continue}let p=B2({sourceUri:l,relationKey:c,targetUri:d}),h=this.getEdgeFrameByEdgeId(p)||{};a.push({id:p,source:o,target:f,sourceUri:l,targetUri:d,relationKey:c,appearance:h,timing:t})}}return a},[])}getEdgeFillColor(t,e){var i;let n=((i=t.appearance)==null?void 0:i.fillColor)||[160,160,160,200];return this.getColorNuanace(n,e)}getEdgeWidth(t){return 3}updateSelectedNodesBox(t){if(!t.length){delete this.polygons[Sv],this.updateTriggers.selectedNodeBoundsChange=Date.now();return}let e=[Number.MAX_VALUE,Number.MAX_VALUE],n=[Number.MIN_VALUE,Number.MIN_VALUE];for(let u of t){let d=Pe.versionUriToNodeUri(u),f=this.getNodeFrameByUri(d);if(!f){console.log("no node frame for selection box",d);continue}let p=f.size,h=f.position,m=h[0]-p[0]/2,_=h[1]-p[1]/2;e[0]=Math.min(e[0],m),e[1]=Math.min(e[1],_),n[0]=Math.max(n[0],m+p[0]),n[1]=Math.max(n[1],_+p[1])}let i=this.getDefaultNodeSize(),a=Math.min(n[0]-e[0],n[1]-e[1]),o=vr(a/8,i/16,i/8),s=o/2,l=n[0]-e[0]+s*2,c=n[1]-e[1]+s*2;return this.polygons[Sv]=SS([(e[0]+n[0])/2,(e[1]+n[1])/2],[l,c],o),this.updateTriggers.selectedNodeBoundsChange=Date.now(),[e[0],e[1],n[0],n[1]]}setLastNodePositionUpdate(){this.updateTriggers.nodePositionChange=Date.now()}setLastNodeStyleUpdate(){this.updateTriggers.nodeFillColorChange=Date.now(),this.updateTriggers.nodeStrokeColorChange=Date.now()}getLayerFrame(t){let e=this.animations.get(t);if(e)return console.log("layerKeyframes",e),e.getFrame()}getLayerFillColor(t){var n;let e=this.getLayerFrame(t);return e!=null&&e.fillColor?e.fillColor:((!qD[t]||!qD[t].fillColor)&&console.warn("no fill color for layer - return blue -> fix a color",t),((n=qD[t])==null?void 0:n.fillColor)||[0,0,255])}};function v$e({layout:t}){let e=t.getCameraFrame();return new Yu({id:t.getLayerId("main-grid"),zoomOffset:0,extent:[0,0,Ia,Ia],minZoom:(e==null?void 0:e.minZoom)||nF,coordinateSystem:_t.CARTESIAN,getTileData:n=>{let i=n.bbox,o=(i.right-i.left)/2**4,s=n.zoom,l=[];for(let c=i.left;c<=i.right;c+=o)for(let u=i.top;u<=i.bottom;u+=o)l.push({position:[c,u],zoom:s});return{dots:l}},renderSubLayers:n=>{let{tile:i,id:a}=n,{dots:o}=i.data;return[new zo({id:t.getLayerId(`grid-dots-${n.tile.id}`),data:o,radiusUnits:"pixels",coordinateSystem:_t.CARTESIAN,getPosition:s=>s.position,getRadius:1.1,getFillColor:s=>[210,210,210]})]}})}var y$e=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec3 instanceSourceDirections;
attribute vec3 instanceTargetDirections;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int widthUnits;

uniform float numSegments;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset2(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

vec3 bezier(vec3 A, vec3 B, vec3 C, vec3 D, float t) {
  vec3 E = mix(A, B, t);
  vec3 F = mix(B, C, t);
  vec3 G = mix(C, D, t);

  vec3 H = mix(E, F, t);
  vec3 I = mix(F, G, t);

  vec3 P = mix(H, I, t);

  return P;
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / numSegments);
}

vec4 computeCurve(vec4 source, vec4 target, vec3 sourceDir, vec3 targetDir, float segmentRatio) {
  vec3 start = source.xyz;
  vec2 mid = (target.xy - source.xy) * 0.5;
  vec2 offset1 = mid * sourceDir.xy * sourceDir.xy;
  vec2 offset2 = mid * targetDir.xy * targetDir.xy;
  
  vec3 cp1 = start + vec3(offset1, 0);
  vec3 cp2 = target.xyz - vec3(offset2, 0);
  vec3 end = target.xyz;
  vec3 bez = bezier(start, cp1, cp2, end, segmentRatio);
  return vec4(bez.xyz, 1.0);
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);

  float segmentIndex = positions.x;
  vec4 p = computeCurve(source, target, instanceSourceDirections, instanceTargetDirections, segmentIndex);
  // next point
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec4 nextP = computeCurve(source, target, instanceSourceDirections, instanceTargetDirections, nextSegmentRatio);
  
  geometry.position = computeCurve(source_commonspace, target_commonspace, instanceSourceDirections, instanceTargetDirections, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  float direction = float(positions.y);
  direction = mix(-1.0, 1.0, step(segmentIndex, 0.0)) * direction;
  vec2 segmentDir = nextP.xy - p.xy;
  vec3 offset = vec3(
    getExtrusionOffset2(segmentDir, direction, widthPixels),
    0.0);

  DECKGL_FILTER_SIZE(offset, geometry);
  DECKGL_FILTER_GL_POSITION(p, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);

  // gl_Position = project_common_position_to_clipspace(p + vec4(offset.xyz, 0.0));

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,x$e=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec3 instanceSourceDirections;
attribute vec3 instanceTargetDirections;
attribute vec3 instanceSourceDirections64Low;
attribute vec3 instanceTargetDirections64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;
attribute float instanceIsPlaceholder;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;
uniform bool billboard;

uniform float numSegments;

varying vec4 vColor;
varying vec2 uv;

varying vec2 vDirection;
varying vec2 vPathPosition;
varying float vPathLength;
varying vec3 vPathOffset;
varying float vPathThickness;
varying float vIsPlaceholder;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset2(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset_screenspace = dir_screenspace * offset_direction * width * project_uScale;
  // vec2 offset_commonspace = project_position(offset_screenspace);
  // vec2 offset_clipspace = project_common_position_to_clipspace(vec4(offset_commonspace, 0, 1)).xy;
  return offset_screenspace / project_uViewportSize;
}

vec3 bezier(vec3 A, vec3 B, vec3 C, vec3 D, float t) {
  vec3 E = mix(A, B, t);
  vec3 F = mix(B, C, t);
  vec3 G = mix(C, D, t);

  vec3 H = mix(E, F, t);
  vec3 I = mix(F, G, t);

  vec3 P = mix(H, I, t);

  return P;
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / numSegments);
}

vec3 computeCurve(vec3 source, vec3 target, vec3 sourceDir, vec3 targetDir, float segmentRatio) {
  vec3 start = source;
  vec2 mid = (target.xy - source.xy) * 0.5;
  vec2 offset1 = mid * sourceDir.xy * sourceDir.xy;
  vec2 offset2 = mid * targetDir.xy * targetDir.xy;
  
  vec3 cp1 = source + vec3(offset1, 0);
  vec3 cp2 = target - vec3(offset2, 0);
  vec3 end = target;
  vec3 bez = bezier(start, cp1, cp2, end, segmentRatio);
  return bez;
}

void main(void) {
  geometry.pickingColor = instancePickingColors;

  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;


  // Position
  vec3 source = project_position(source_world, source_world_64low);
  vec3 target = project_position(target_world, target_world_64low);
  
  // this is integer i..NUM_SEGMENTS
  float segmentIndex = positions.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  vec3 p = computeCurve(source, target, instanceSourceDirections, instanceTargetDirections, segmentRatio);
  // next point
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 nextP = computeCurve(source, target, instanceSourceDirections, instanceTargetDirections, nextSegmentRatio);

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  float direction = float(positions.y);
  direction = mix(-1.0, 1.0, step(segmentIndex, 0.0)) * direction;
  vec2 segmentDir = nextP.xy - p.xy;
  //vec2 offset = getExtrusionOffset2(segmentDir, direction, widthPixels);
  //gl_Position = vec4(p, 1.0) + vec4(offset, 0.0, 0.0);
  vec3 offset = vec3(
    getExtrusionOffset2(segmentDir, direction, widthPixels),
    0.0);

  DECKGL_FILTER_SIZE(offset, geometry);

  // vec4 pos = vec4(mix(p, nextP, segmentIndex), 1.0);
  geometry.position = vec4(p.xyz, 1.0);
  uv = positions.xy;
  geometry.uv = uv;

  // //gl_Position = vec4(p.xyz, 1.0) + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 1.0);
  gl_Position = project_common_position_to_clipspace(vec4(p.xyz, 1.0) + vec4(offset.xyz, 0.0));

  vDirection = segmentDir.xy;
  // vColor = vec4(instanceColors / 255., opacity);
  vPathPosition = p.xy;
  vPathLength = length(source.xy - target.xy);
  vPathThickness = instanceWidths;
  vPathOffset = offset;
  vIsPlaceholder = instanceIsPlaceholder;
  
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,b$e=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,S$e=`precision highp float;
varying vec4 vColor;
varying vec2 vPathPosition;
varying float vPathLength;
varying vec3 vPathOffset;
varying float vPathThickness;
varying vec2 vDirection;
varying float vIsPlaceholder;

uniform vec2 project_uViewportSize;
uniform float project_uScale;
// uniform float time;

void main(void) {
  vec2 vDashArray = vec2(0.7, 0.3) * project_uScale;

  float solidLength = vDashArray.x;
  float gapLength = vDashArray.y;
  float unitLength = solidLength + gapLength;

  float pos = dot(vDirection, vPathPosition) * 0.5;

  float offsetLength = length(vPathOffset);
  float viewportRatio = project_uViewportSize.y;

  float unitOffset = mod(pos, unitLength);

  if (vIsPlaceholder > 0.0) {
    if (unitOffset > solidLength) {
      // for dashes:
      gl_FragColor = vec4(vColor.xyz, 0.6);
      // for lines on the sides
      if (offsetLength > (vPathThickness * 0.5) * project_uScale / viewportRatio - 0.003) {
        gl_FragColor = vec4(vColor.xyz, 1.0);
      } else {
        discard;
      }
    } else {
      discard;
    }
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  gl_FragColor = vColor;

  // wood effect
  // float pos = (vPathPosition.x * vDirection.x + vPathPosition.y * vDirection.y) * 0.5;
  // float pos = (vPathPosition.x) * 0.5;
  // float offsetLength = length(vPathOffset);
  // float viewportRatio = project_uViewportSize.y;
  
  // float unitOffset = mod(pos, unitLength);

  // float d = mod(vPathLength - time * 0.0001, 1000.);
  // float a1 = d < 300. ? mix(0., 1., d / 300.) : 0.0;
  // float a2 = exp(abs(1.) * 3.);
  // float a = a1 * a2;


  // if (vIsSideFlow > 0.0) {
  //   // if (offsetLength > (vPathThickness * 0.5) * 0.3 * project_uScale) {
  //   //   gl_FragColor = vec4(vColor.xyz, 1.0);
  //   //   //gl_FragColor = vColor;
  //   // } else {
  //   //   discard;
  //   // }


  //   // // Calculate the distance to the outline
  //   // float outlineDistance = abs(distance) - vPathThickness / 2.0;

  //   // // Calculate the antialiasing factor
  //   // float antialias = fwidth(outlineDistance);

  //   // // Calculate the normal vector of the Bezier curve at the current fragment
  //   // vec2 curveNormal = normalize(vec2(vCurveDirection.y, -vCurveDirection.x));

  //   // // Calculate the signed distance to the outline
  //   // float signedDistance = dot(curveNormal, fragCoord - p) * sign(distance);

  //   // // Create the final output color
  //   // vec3 color = mix(vec3(0.0), vec3(1.0), smoothstep(0.0, antialias, signedDistance));
  //   // gl_FragColor = vec4(color, 1.0);

  //   if (unitOffset > solidLength) {
  //     // for dashes:
  //     gl_FragColor = vec4(vColor.xyz, 0.6);
  //     // for lines on the sides
  //   } else {
  //     //discard;
  //     //gl_FragColor = vec4(0.9, 0.9, 0.9, 0.6);
  //   }
  // } else {
    
  // }

  // if (vIsPlaceholder > 0.0) {
  //   if (unitOffset > solidLength) {
  //     // for dashes:
  //     gl_FragColor = vec4(vColor.xyz, 0.6);
  //     // for lines on the sides
  //     if (offsetLength > (vPathThickness * 0.5) * project_uScale / viewportRatio - 0.003) {
  //       gl_FragColor = vec4(vColor.xyz, 1.0);
  //       //gl_FragColor = vColor;
  //     } else {
  //       discard;
  //     }
  //   } else {
  //     discard;
  //   }
  // }

}
`,xS=50,N$e=[0,0,0,255],A$e={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceDirection:{type:"accessor",value:t=>t.sourceDirection},getTargetDirection:{type:"accessor",value:t=>t.targetDirection},getColor:{type:"accessor",value:N$e},getWidth:{type:"accessor",value:1},getIsPlaceholder:{type:"accessor",value:t=>1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},wS=class extends Dr{getShaders(){let{show3d:t}=this.props;return super.getShaders({vs:t?x$e:y$e,fs:t?S$e:b$e,modules:[On,Bn]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:ji.DOUBLE,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:ji.DOUBLE,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceDirections:{size:3,type:ji.DOUBLE,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourceDirection"},instanceTargetDirections:{size:3,type:ji.DOUBLE,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetDirection"},instanceColors:{size:this.props.colorFormat.length,type:ji.UNSIGNED_BYTE,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceIsPlaceholder:{size:1,type:ji.DOUBLE,accessor:"getIsPlaceholder"},instancePickingColors:{size:4,type:ji.UNSIGNED_BYTE,accessor:(e,n)=>{let{index:i,target:a}=n;return this.encodePickingColor(e&&e.__source?e.__source.index:i,a)}}})}getPickingInfo(t){let e=super.getPickingInfo(t),{index:n}=e,{data:i}=this.props;return i[0]&&i[0].__source&&(e.object=i.find(a=>a.__source.index===n)),e}updateState(t){var o;super.updateState(t);let{oldProps:e,props:n,changeFlags:i}=t,a=n.show3d!==e.show3d;if(t.changeFlags.extensionsChanged||a){let{gl:s}=this.context;(o=this.state.model)==null||o.delete(),this.state.model=this._getModel(s),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){let{widthUnits:e,widthScale:n,widthMinPixels:i,widthMaxPixels:a,wrapLongitude:o}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:wi[e],widthScale:n,widthMinPixels:i,widthMaxPixels:a,useShortestPath:o?1:0,numSegments:xS,billboard:!1}).draw(),o&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){let e=[];for(let n=0;n<=xS;n++)e=e.concat([n/(this.props.show3d?1:xS),-1,0,n/(this.props.show3d?1:xS),1,0]);return new wr(t,{...this.getShaders(),id:this.props.id,geometry:new Nn({drawMode:ji.TRIANGLE_STRIP,attributes:{positions:new Float32Array(e)}}),isInstanced:!0})}};TS(wS,"layerName","CurveLayer");TS(wS,"defaultProps",A$e);function G1(t,e){let n=e[0]-t[0],i=e[1]-t[1],a=Math.sqrt(n*n+i*i),o=[n/a,i/a],s=[[1,0],[-1,0],[0,1],[0,-1]],l=s[0],c=-2;for(let u of s){let d=o[0]*u[0]+o[1]*u[1];d>c&&(l=u,c=d)}return l}function Tr(t,e,n=0,i=0){let a=G1(t,e);return[t[0]+a[0]*n*.5,t[1]+a[1]*i*.5,0]}function Yce(t,e,n=5){let i=Tr(t,e),a=Tr(e,t),o=G1(t,e),s=G1(e,t),l=JD([i[0],i[1],0],[a[0],a[1],0],[...o,0],[...s,0],.5),c=(mg(i,a)-90)*(Math.PI/180),u=l[0]+n*Math.cos(c),d=l[1]+n*Math.sin(c);return[u,d]}function Jce(t,e,n=.5,i=5){let a=Tr(t,e),o=Tr(e,t),s=(mg(a,o)-90)*(Math.PI/180),l=[(a[0]+o[0])*n,(a[1]+o[1])*n],c=l[0]+i*Math.cos(s),u=l[1]+i*Math.sin(s);return[c,u]}function Qce(t,e,n=!1){let i=Tr(t,e),a=Tr(e,t),o=G1(t,e),s=G1(e,t),l=JD([i[0],i[1],0],[a[0],a[1],0],[...o,0],[...s,0],.4),c=JD([i[0],i[1],0],[a[0],a[1],0],[...o,0],[...s,0],.5);return n&&i[0]>a[0]?mg(c,l)+180:mg(l,c)}function eue(t,e,n=!1){let i=Tr(t,e),a=Tr(e,t);return n&&i[0]>a[0]?mg(a,i)+180:mg(i,a)}function mg(t,e){let[n,i]=t[0]<e[0]?[t,e]:[e,t],a=i[0]-n[0],o=i[1]-n[1];return Math.atan2(o,a)*180/Math.PI}function pg(t,e,n){let i=pr.create();return pr.lerp(i,t,e,n),i}function T$e(t,e,n,i,a){let o=pg(t,e,a),s=pg(e,n,a),l=pg(n,i,a),c=pg(o,s,a),u=pg(s,l,a);return pg(c,u,a)}function JD(t,e,n,i,a){let o=pr.mul(pr.create(),pr.sub(pr.create(),e,t),pr.fromValues(.5,.5,.5)),s=pr.mul(pr.create(),o,pr.mul(pr.create(),n,n)),l=pr.mul(pr.create(),o,pr.mul(pr.create(),i,i)),c=pr.add(pr.create(),t,s),u=pr.sub(pr.create(),e,l);return T$e(t,c,u,e,a)}function C$e({layout:t,interactionManager:e,parentNode:n}){let a=[],o={getSourcePosition:t.updateTriggers.nodePositionChange,getTargetPosition:t.updateTriggers.nodePositionChange,getPath:t.updateTriggers.nodePositionChange,getColor:t.updateTriggers.edgeFillColorChange,getPosition:t.updateTriggers.nodePositionChange,getPolygon:t.updateTriggers.nodePositionChange,getAngle:t.updateTriggers.nodePositionChange},s=t.getVisibleEdges();if(s.length===0)return[];let l=t.getConnectionTypeFromRelationKey(s),c=[...l.downstream,...l.upstream],u={id:t.getLayerId("edge-bezier-layer"),pickable:!0,data:c,show3d:t.isTilted(),getSourcePosition:h=>{let m=Pe.uriToNodeProps(h.sourceUri),_=Pe.uriToNodeProps(h.targetUri),E=t.getNodePosition(m),v=t.getNodePosition(_),y=t.getNodeSize(m),[x,S]=E,[N,w]=y,[T,I]=v;return Tr([x,S],[T,I],N,w)},getTargetPosition:h=>{let m=Pe.uriToNodeProps(h.sourceUri),_=Pe.uriToNodeProps(h.targetUri),E=t.getNodePosition(m),v=t.getNodePosition(_),y=t.getNodeSize(_),[x,S]=E,[N,w]=v,[T,I]=y;return Tr([N,w],[x,S],T,I)},getSourceDirection:h=>{let m=Pe.uriToNodeProps(h.sourceUri),_=Pe.uriToNodeProps(h.targetUri),E=t.getNodePosition(m),v=t.getNodePosition(_);return G1([E[0],E[1]],[v[0],v[1]])},getTargetDirection:h=>{let m=Pe.uriToNodeProps(h.sourceUri),_=Pe.uriToNodeProps(h.targetUri),E=t.getNodePosition(m),v=t.getNodePosition(_);return G1([v[0],v[1]],[E[0],E[1]])},getIsPlaceholder:h=>h.isPlaceholder?1:0,updateTriggers:o,onHover:h=>{if(!h||!h.object){e.onEdgeLeave();return}h.object&&e.onEdgeEnter(h.object)},onClick:h=>{let{coordinate:m,object:_}=h;m&&_&&e.onEdgeClick(_)},getWidth:h=>t.getEdgeWidth(h),getColor:h=>{let m=e.edgeSelectionColors[h.edgeId];return m||t.getEdgeFillColor(h,e.edgeInteractionStates[h.edgeId])}},d=new wS(u);a.push(d);let f=[...l.contains,...l.containedIn,...l.insight],p=new jo({id:t.getLayerId("edge-line-layer"),pickable:!1,data:f.map(h=>{let m=Pe.uriToNodeProps(h.sourceUri),_=Pe.uriToNodeProps(h.targetUri),E=t.getNodePosition(m),v=t.getNodePosition(_),y=t.getNodeSize(m),x=t.getNodeSize(_),[S,N]=E,[w,T]=y,[I,R]=v,L=Tr([S,N],[I,R],w,T),[O,H]=x,U=Tr([I,R],[S,N],O,H);return h._path=[L,U],h}),getPath:h=>h._path,updateTriggers:o,widthUnits:"pixels",getWidth:h=>t.getEdgeWidth(h),getColor:h=>{let m=e.edgeSelectionColors[h.edgeId];return m||t.getEdgeFillColor(h,e.edgeInteractionStates[h.edgeId])},onHover:h=>{if(!h||!h.object){e.onEdgeLeave();return}h.object&&e.onEdgeEnter(h.object)},onClick:h=>{let{coordinate:m,object:_}=h;m&&_&&e.onEdgeClick(_)},getDashArray:[5,5],dashJustified:!0,dashGapPickable:!0,extensions:[new Qu({dash:!0})]});return a.push(p),a}function w$e({visibleNodes:t,layout:e,interactionManager:n,parentNode:i,viewId:a}){var d,f;let o={getPolygon:[e.updateTriggers.nodePositionChange+e.updateTriggers.nodeSizeChange],getFillColor:e.updateTriggers.nodeFillColorChange,getLineColor:e.updateTriggers.nodeStrokeColorChange},s=((d=i==null?void 0:i.appearance)==null?void 0:d.position[0])||0,l=((f=i==null?void 0:i.appearance)==null?void 0:f.position[1])||0,c=1;return new da({id:a,data:t.filter(p=>!p.appearance.hideNode),coordinateSystem:_t.CARTESIAN,getPolygon:p=>{let h=p.appearance,m=h.size,_=h.position,E=Math.min(m[0],m[1]),v=vr(E/8,Ca/8,Ca/8);return SS([_[0]+s,_[1]+l],m,v)},getFillColor:p=>e.getNodeFillColor(p,n.nodeInteractionStates[p.versionUri],p.type),getLineColor:p=>{let h=n.nodeSelectionColors[p.versionUri];return h||e.getNodeStrokeColor(p,n.nodeInteractionStates[p.versionUri])},getLineWidth:p=>1,getElevation:p=>(e.getNodeExtrusion(p)||1)*c,lineWidthUnits:"pixels",pickable:!0,onHover:p=>{if(!p||!p.object){e.setLastNodeStyleUpdate(),n.onNodeLeave();return}p.object&&p.object.versionUri&&(e.setLastNodeStyleUpdate(),n.onNodeEnter(p.object))},onDragStart:p=>{let{coordinate:h,object:m}=p;h&&m&&m.versionUri&&n.onNodeDragStart(h,m)},onDrag:p=>{n.onNodeDrag(p.coordinate,[p.x,p.y])},onDragEnd:()=>{n.onNodeDragEnd()},onClick:p=>{let{coordinate:h,object:m}=p;console.log("click",h,m),h&&m&&m.versionUri&&n.onNodeClick(m)},extruded:e.isTilted(),stroked:!e.isTilted(),filled:!0,lineWidthMinPixels:1,lineWidthMaxPixels:4,updateTriggers:o,transitions:e.getTransitions()})}var I$e="node-icon-layer";function R$e({visibleNodes:t,layout:e,interactionManager:n,parentNode:i}){let a=e.getVisibleNodes().filter(l=>{var c,u,d,f,p,h;return!n.viewport.nodeViewerIsActive(l)&&(((c=l.appearance)==null?void 0:c.snapshotUrl)&&!((u=l.appearance)!=null&&u.hideSnapshotUrl)||((d=l.appearance)==null?void 0:d.imageUrl)&&!((f=l.appearance)!=null&&f.hideImageUrl)||((h=(p=e.typeNodePropsMap.get(l.type))==null?void 0:p.appearance)==null?void 0:h.imageUrl))}),o={getPolygon:[e.updateTriggers.nodePositionChange+e.updateTriggers.nodeSizeChange],getIcon:e.updateTriggers.nodeIconChange},s=e.getExtrusionFactor();return new ua({id:e.getLayerId(I$e),data:a,pickable:!0,visible:!e.isTilted(),billboard:!1,getIcon:l=>{var d,f;let c=l.appearance.snapshotUrl||l.appearance.imageUrl||((f=(d=e.typeNodePropsMap.get(l.type))==null?void 0:d.appearance)==null?void 0:f.imageUrl),u=l.appearance.size;return{url:c,width:u[0],height:u[1],id:`${c}${l.updatedAt}`}},onHover:l=>{},onDragStart:l=>{let{coordinate:c,object:u}=l;c&&u&&u.versionUri&&n.onNodeDragStart(c,u)},onDrag:l=>{n.onNodeDrag(l.coordinate,[l.x,l.y])},onDragEnd:()=>{n.onNodeDragEnd()},onClick:l=>{let{coordinate:c,object:u}=l;c&&u&&u.versionUri&&n.onNodeClick(u)},getPosition:l=>e.getNodePosition(l),sizeUnits:"common",sizeScale:1,getSize:l=>{let c=e.getNodeSize(l);return Math.min(c[0],c[1])-1},updateTriggers:o,transitions:e.getTransitions()})}var P$e="node-label-layer";function M$e({layout:t,interactionManager:e,parentNode:n}){let i=t.getVisibleNodes().filter(s=>{var l;return(l=s.appearance)==null?void 0:l.position}),a={getPosition:t.updateTriggers.nodePositionChange,getText:t.updateTriggers.nodeLabelChange},o=t.getExtrusionFactor();return new fa({id:t.getLayerId(P$e),pickable:!0,data:i,coordinateSystem:_t.CARTESIAN,getPosition:s=>{var d;if((d=s.name)!=null&&d.position)return s.name.position;let[l,c]=s.appearance.position,u=s.appearance.size;return[l,c-u[1]/2]},getPixelOffset:s=>s.name.position?[0,0]:[0,10],getText:s=>{var l;return(l=s.name)==null?void 0:l.name},getSize:s=>13,getColor:s=>[108,108,108,255],billboard:!0,sizeUnits:"pixels",characterSet:"auto",fontFamily:"Manrope",sizeMaxPixels:20,sizeMinPixels:10,maxWidth:20,getAlignmentBaseline:"top",updateTriggers:a,onHover:s=>{if(!s||!s.object){t.setLastNodeStyleUpdate(),e.onNodeLeave();return}s.object&&s.object.versionUri&&(t.setLastNodeStyleUpdate(),e.onNodeEnter(s.object))},onClick:s=>{let{coordinate:l,object:c}=s;l&&c&&c.versionUri&&e.onNodeClick(c)}})}var L$e=4,tue=O$e({caret:{mask:!0,x:32,y:0,width:32,height:32,anchorX:32},"half-caret":{mask:!0,x:32,y:32,width:32,height:32,anchorX:32},"caret-lg":{mask:!0,x:0,y:0,width:32,height:64,anchorX:32},triangle:{mask:!0,x:64,y:0,width:32,height:32,anchorX:32},"triangle-ex":{mask:!0,x:64,y:0,width:32,height:32},"half-triangle":{mask:!0,x:64,y:32,width:32,height:32,anchorX:32},"half-triangle-ex":{mask:!0,x:64,y:32,width:32,height:32},"triangle-n":{mask:!0,x:104,y:4,width:24,height:24},"triangle-n-ex":{mask:!0,x:96,y:0,width:32,height:32,anchorX:8},"half-triangle-n":{mask:!0,x:96,y:32,width:32,height:32,anchorX:32},"half-triangle-n-ex":{mask:!0,x:96,y:32,width:32,height:32,anchorX:8},"triangle-w":{mask:!0,x:128,y:0,width:32,height:64,anchorX:32},"triangle-w-ex":{mask:!0,x:128,y:0,width:32,height:64},"circle-ex":{mask:!0,x:192,y:0,width:32,height:32,anchorX:0},"circle-lg-ex":{mask:!0,x:192,y:32,width:32,height:32,anchorX:0},dot:{mask:!0,x:224,y:0,width:32,height:32,anchorX:8},"dot-ex":{mask:!0,x:224,y:0,width:32,height:32,anchorX:0},"dot-lg":{mask:!0,x:224,y:32,width:32,height:32,anchorX:12},"dot-lg-ex":{mask:!0,x:224,y:32,width:32,height:32,anchorX:0}},L$e);function O$e(t,e){for(let n in t){let i=t[n];i.x*=e,i.y*=e,i.width*=e,i.height*=e,i.anchorX&&(i.anchorX*=e),i.anchorY&&(i.anchorY*=e)}return t}var cF="bezier-edge-label-layer",uF="straight-edge-label-layer";function B$e({layout:t,interactionManager:e,parentNode:n}){let a=[],o={getSourcePosition:t.updateTriggers.nodePositionChange,getTargetPosition:t.updateTriggers.nodePositionChange,getPath:t.updateTriggers.nodePositionChange,getPosition:t.updateTriggers.nodePositionChange,getPolygon:t.updateTriggers.nodePositionChange,getAngle:t.updateTriggers.nodePositionChange},s=t.getVisibleEdges();if(s.length===0)return[];let l=t.getConnectionTypeFromRelationKey(s),c=[...l.downstream,...l.upstream],u=new fa({id:t.getLayerId(cF),pickable:!0,data:c,getPosition:m=>{let _=Pe.uriToNodeProps(m.sourceUri),E=Pe.uriToNodeProps(m.targetUri),v=t.getNodePosition(_),y=t.getNodePosition(E),x=t.getNodeSize(_),[S,N]=v,[w,T]=x,[I,R]=y,L=Tr([S,N],[I,R],w,T),O=t.getNodeSize(E),[H,U]=O,X=Tr([I,R],[S,N],H,U);return Yce(L,X,.5)},getAngle:m=>{let _=Pe.uriToNodeProps(m.sourceUri),E=Pe.uriToNodeProps(m.targetUri),v=t.getNodePosition(_),y=t.getNodePosition(E),x=t.getNodeSize(_),[S,N]=v,[w,T]=x,[I,R]=y,L=Tr([S,N],[I,R],w,T),O=t.getNodeSize(E),[H,U]=O,X=Tr([I,R],[S,N],H,U);return Qce(L,X)},getText:m=>m.name||m.relationKey,getSize:m=>{var _;return((_=m.appearance)==null?void 0:_.fontSize)||12},getColor:m=>{var _;return((_=m.appearance)==null?void 0:_.fontColor)||[108,108,108,255]},billboard:!0,sizeUnits:"pixels",characterSet:"auto",fontFamily:"Montserrat",getAlignmentBaseline:"top",sizeMaxPixels:Number.MAX_SAFE_INTEGER,sizeMinPixels:0,maxWidth:-1,updateTriggers:o,onHover:m=>{if(!m||!m.object){e.onEdgeLeave();return}m.object&&e.onEdgeEnter(m.object)},onClick:m=>{let{coordinate:_,object:E}=m;_&&E&&e.onEdgeClick(E)},collisionEnabled:!1,getCollisionPriority:m=>1e3,extensions:[new Mc]});c.length>0&&a.push(u);let d=[...l.contains,...l.containedIn,...l.insight],f=new fa({id:t.getLayerId(uF),pickable:!0,data:d,getPosition:m=>{let _=Pe.uriToNodeProps(m.sourceUri),E=Pe.uriToNodeProps(m.targetUri),v=t.getNodePosition(_),y=t.getNodePosition(E),x=t.getNodeSize(_),[S,N]=v,[w,T]=x,[I,R]=y,L=Tr([S,N],[I,R],w,T),O=t.getNodeSize(E),[H,U]=O,X=Tr([I,R],[S,N],H,U);return Jce(L,X,.5)},getAngle:m=>{let _=Pe.uriToNodeProps(m.sourceUri),E=Pe.uriToNodeProps(m.targetUri),v=t.getNodePosition(_),y=t.getNodePosition(E),x=t.getNodeSize(_),[S,N]=v,[w,T]=x,[I,R]=y,L=Tr([S,N],[I,R],w,T),O=t.getNodeSize(E),[H,U]=O,X=Tr([I,R],[S,N],H,U);return eue(L,X)},getText:m=>m.name||m.relationKey,getSize:m=>{var _;return((_=m.appearance)==null?void 0:_.fontSize)||12},getColor:m=>{var _;return((_=m.appearance)==null?void 0:_.fontColor)||[108,108,108,255]},billboard:!0,sizeUnits:"pixels",characterSet:"auto",fontFamily:"Montserrat",getAlignmentBaseline:"top",sizeMaxPixels:Number.MAX_SAFE_INTEGER,sizeMinPixels:0,maxWidth:-1,updateTriggers:o,collisionEnabled:!1,getCollisionPriority:m=>1e3,extensions:[new Mc]});d.length>0&&a.push(f);let p=new ua({data:c,id:t.getLayerId("bezier-edge-arrow-head-layer"),iconAtlas:"deck://arrowAtlas",iconMapping:tue,getPosition:m=>{let _=Pe.uriToNodeProps(m.sourceUri),E=Pe.uriToNodeProps(m.targetUri),v=t.getNodePosition(_),y=t.getNodePosition(E),x=t.getNodeSize(_),[S,N]=v,[w,T]=x,[I,R]=y,L=Tr([S,N],[I,R],w,T),O=t.getNodeSize(E),[H,U]=O,X=Tr([I,R],[S,N],H,U);return Yce(L,X,1)},getAngle:m=>{let _=Pe.uriToNodeProps(m.sourceUri),E=Pe.uriToNodeProps(m.targetUri),v=t.getNodePosition(_),y=t.getNodePosition(E),x=t.getNodeSize(_),[S,N]=v,[w,T]=x,[I,R]=y,L=Tr([S,N],[I,R],w,T),O=t.getNodeSize(E),[H,U]=O,X=Tr([I,R],[S,N],H,U);return Qce(L,X,!0)},getColor:m=>{var _;return((_=m.appearance)==null?void 0:_.fontColor)||[108,108,108,255]},getIcon:m=>"triangle-n",getSize:m=>2.5,billboard:!1,sizeUnits:"pixels",sizeScale:5,updateTriggers:o});c.length>0&&a.push(p);let h=new ua({data:d,id:t.getLayerId("straight-edge-arrow-head-layer"),iconAtlas:"deck://arrowAtlas",iconMapping:tue,getPosition:m=>{let _=Pe.uriToNodeProps(m.sourceUri),E=Pe.uriToNodeProps(m.targetUri),v=t.getNodePosition(_),y=t.getNodePosition(E),x=t.getNodeSize(_),[S,N]=v,[w,T]=x,[I,R]=y,L=Tr([S,N],[I,R],w,T),O=t.getNodeSize(E),[H,U]=O,X=Tr([I,R],[S,N],H,U);return Jce(L,X,.5)},getAngle:m=>{let _=Pe.uriToNodeProps(m.sourceUri),E=Pe.uriToNodeProps(m.targetUri),v=t.getNodePosition(_),y=t.getNodePosition(E),x=t.getNodeSize(_),[S,N]=v,[w,T]=x,[I,R]=y,L=Tr([S,N],[I,R],w,T),O=t.getNodeSize(E),[H,U]=O,X=Tr([I,R],[S,N],H,U);return eue(L,X,!0)},getColor:m=>{var _;return((_=m.appearance)==null?void 0:_.fontColor)||[108,108,108,255]},getIcon:m=>"triangle-n",getSize:m=>2.5,billboard:!1,sizeUnits:"pixels",sizeScale:5,updateTriggers:o});return d.length>0&&a.push(h),a}function Sue({visibleNodes:t,layout:e,interactionManager:n,parentNode:i,viewId:a}){var f,p;let o=t.filter(h=>{var m,_,E;return((m=h.appearance)==null?void 0:m.asset3dUrl)||((E=(_=e.typeNodePropsMap.get(h.type))==null?void 0:_.appearance)==null?void 0:E.asset3dUrl)}),s={getPosition:e.updateTriggers.nodePositionChange,getScale:e.updateTriggers.nodeScaleChange,getOrientation:e.updateTriggers.nodeRotateChange},l=((f=i==null?void 0:i.appearance)==null?void 0:f.position[0])||0,c=((p=i==null?void 0:i.appearance)==null?void 0:p.position[1])||0,u=1,d=new Map;return o.forEach(h=>{var E,v;let m=h.appearance.asset3dUrl||((v=(E=e.typeNodePropsMap.get(h.type))==null?void 0:E.appearance)==null?void 0:v.asset3dUrl);d.has(m)||d.set(m,{id:e.getLayerId(m,a),data:[],_animations:{"*":{speed:1}},_lighting:"pbr",pickable:!0,scenegraph:m,sizeScale:1,getPosition:y=>{let{position:x,extrusion:S=1}=y.appearance||{},w=S*u,T=x||[0,0];return[T[0]+l,T[1]+c,w+8]},getScale:y=>{var S;let x=((S=y.appearance)==null?void 0:S.scale)||[1,1,1];return[x[0]*4,x[1]*4,x[2]*4]},getOrientation:y=>e.isTilted()?[0,0,90]:[-45,0,0],updateTriggers:s}),d.get(m).data.push(h)}),[...d.values()].map(h=>new Ju(h))}function D$e({layout:t,interactionManager:e,parentNode:n}){let{resizeNode:i}=e;if(!i)return[];let a=[],o=(y,x)=>y.versionUri+x,s=t.getNodeSize(i),l=t.getNodePosition(i),c=.5,u=s[0],d=s[1],p=t.getDefaultNodeSize()/6,h=y=>{let x=[l[0]+y[0]*(u*c),l[1]+y[1]*(d*c),0],S={key:o(i,y.join("-")),type:"ResizeHandle",namespace:i.namespace,direction:y,handlePos:x,resizeNode:i,versionUri:o(i,y.join("-")),polygon:SS([x[0],x[1]],[p,p],0)};return S.versionUri=Pe.nodePropsToVersionUri(S),S};i.polygon=SS([l[0],l[1]],s,4);let m=[h([-1,1]),h([-1,-1]),h([1,1]),h([1,-1])],_={getPolygon:t.updateTriggers.nodePositionChange,getFillColor:t.updateTriggers.nodeFillColorChange,getLineColor:t.updateTriggers.nodeStrokeColorChange},E=new da({id:t.getLayerId("resize-surrounding-layer-polygon"),data:[i],pickable:!1,getPolygon:y=>y.polygon,getFillColor:y=>t.getNodeFillColor(y,e.nodeInteractionStates[y.versionUri],y.type),getLineColor:y=>[0,0,200],filled:!1,stroked:!0,extruded:!1,lineWidthUnits:"pixels",coordinateSystem:_t.CARTESIAN,getLineWidth:1,wireframe:!1,updateTriggers:_,transitions:void 0}),v=new da({id:t.getLayerId("resize-layer-polygon"),data:m,pickable:!0,getPolygon:y=>y.polygon,getFillColor:y=>t.getNodeFillColor(y.resizeNode,e.nodeInteractionStates[y.versionUri],y.type),getLineColor:y=>{let x=y.resizeNode,S=e.nodeSelectionColors[x.versionUri];return S||t.getNodeStrokeColor(x,e.nodeInteractionStates[x.versionUri])},filled:!0,stroked:!0,extruded:!1,lineWidthUnits:"pixels",coordinateSystem:_t.CARTESIAN,onHover:y=>{if(!y||!y.object){t.setLastNodeStyleUpdate(),e.onNodeLeave();return}y.object&&y.object.versionUri&&(t.setLastNodeStyleUpdate(),e.onNodeEnter(y.object))},onDragStart:y=>{let{coordinate:x,object:S}=y;x&&S&&S.versionUri&&e.onResizeHandleDragStart(x,S)},onDrag:({coordinate:y,object:x})=>{let S=t.getNodeSize(i),N=t.getNodePosition(i);x.resizeNode.appearance.position=N,x.resizeNode.appearance.size=S,e.onResizeHandleDrag({coordinate:y,resizeHandle:x})},onDragEnd:()=>{e.onResizeHandleDragEnd()},getLineWidth:1,wireframe:!1,updateTriggers:_,transitions:void 0});return a.push(v),a}function F$e({layout:t,interactionManager:e,parentNode:n}){let i=e.getConnectionHandles();if(i.length===0)return[];let a=[],o={getPosition:t.updateTriggers.connectionHandlesChange,getRadius:t.updateTriggers.connectionHandlesChange},s=10,l=5,c=[100,100,240,255],u=1,d=!0,f=!0;return a.push(new zo({id:t.getLayerId(oF),pickable:!0,data:i,getPosition:p=>p.handlePosition,getRadius:p=>6,getFillColor:p=>t.getNodeFillColor(p,e.nodeInteractionStates[p.versionUri],p.type),getLineColor:p=>{let h=e.nodeSelectionColors[p.versionUri];return h||t.getNodeStrokeColor(p,e.nodeInteractionStates[p.versionUri])},getLineWidth:u,lineWidthMinPixels:1,lineWidthMaxPixels:2,radiusUnits:"pixels",stroked:!0,updateTriggers:o,onHover:p=>{if(!p||!p.object){t.setLastNodeStyleUpdate(),e.onNodeLeave();return}p.object&&p.object.versionUri&&(t.setLastNodeStyleUpdate(),e.onNodeEnter(p.object))},onDragStart:p=>{let{coordinate:h,object:m}=p;h&&m&&m.versionUri&&e.onConnectionHandleDragStart(h,m)},onDrag:p=>{let{coordinate:h,x:m,y:_}=p;e.onConnectionHandleDrag(h,[m,_])},onDragEnd:()=>{e.onConnectionHandleDragEnd()}})),a}function k$e({layout:t,interactionManager:e,parentNode:n}){let i=e.temporaryEdge;if((i==null?void 0:i.length)!==2)return[];let a=[],o=i[0],s=i[1];return e.temporaryEdgeType==="line"?a.push(new Sl({id:t.getLayerId("temporary-edge-line-layer"),data:[{source:o,target:s}],getSourcePosition:l=>l.source.handlePosition,getTargetPosition:l=>l.target.handlePosition,getSourceDirection:l=>l.source.direction,getTargetDirection:l=>l.target.direction,getIsPlaceholder:l=>0,widthUnits:"pixels",widthMinPixels:1,widthMaxPixels:2,getWidth:l=>2,getColor:l=>[200,200,200,255]})):a.push(new wS({id:t.getLayerId("temporary-edge-bezier-layer"),data:[{source:o,target:s}],getSourcePosition:l=>l.source.handlePosition,getTargetPosition:l=>l.target.handlePosition,getSourceDirection:l=>l.source.direction,getTargetDirection:l=>l.target.direction,getIsPlaceholder:l=>0,widthUnits:"pixels",widthMinPixels:1,widthMaxPixels:2,getWidth:l=>2,getColor:l=>[200,200,200,255]})),a}var bS="mouse-selection-bounds";function G$e({layout:t,interactionManager:e,nodeProps:n}){let i=[{versionUri:bS}];if(!t.polygons[bS])return null;let a={getPolygon:t.updateTriggers.mouseSelectionBoundsChange};return new da({id:t.getLayerId(bS),data:i,getPolygon:s=>t.polygons[bS],getLineColor:l$e,getLineWidth:2,lineWidthUnits:"pixels",pickable:!1,extruded:!1,stroked:!0,filled:!1,lineWidthMinPixels:1,lineWidthMaxPixels:4,updateTriggers:a,transitions:t.getTransitions()})}var dF=class extends CS{getLayers(t,e,n,i){try{let a=this.getVisibleNodes(),o=[];if(!i){let f=v$e({layout:this});f&&o.push(f)}let s=C$e({layout:this,interactionManager:t,parentNode:e});if(s&&s.length>0&&o.push(...s),!i){let f=k$e({layout:this,interactionManager:t,parentNode:e});f&&f.length>0&&o.push(f)}let l=w$e({viewId:this.getLayerId(aF),visibleNodes:a,layout:this,interactionManager:t,parentNode:e});l&&o.push(l);let c=R$e({visibleNodes:a,layout:this,interactionManager:t,parentNode:e});if(o.push(c),this.isTilted()){let f=Sue({visibleNodes:a,layout:this,interactionManager:t,parentNode:e,viewId:n});o.push(f)}let u=M$e({layout:this,interactionManager:t,parentNode:e});o.push(u);let d=B$e({layout:this,interactionManager:t,parentNode:e});if(o.push(...d),!i){let f=G$e({layout:this,interactionManager:t,nodeProps:e});f&&o.push(f);let p=_$e({layout:this,interactionManager:t,nodeProps:e});p&&o.push(p);let h=D$e({layout:this,interactionManager:t,parentNode:e});h.length>0&&o.push(...h);let m=F$e({layout:this,interactionManager:t,parentNode:e});m.length>0&&o.push(...m)}return o}catch(a){console.error("Error in BoardLayout.getLayers",a)}}},U$e={"legend-title":function(t,e){t.title=e.text},"legend-symbol":function(t,e){let{bounds:n,fill:i,shape:a}=e,o={bounds:n,fill:i,shape:a},s=e.datum.index;t.rows[s]=t.rows[s]||{},t.rows[s].symbol=o},"legend-label":function(t,e){let n=e.datum.index;t.rows[n]=t.rows[n]||{};let i=t.rows[n];i.label=e.text,i.value=e.datum.value}},V$e=(t,e,n,i,a,o)=>{In(n,function(s){let l=U$e[s.mark.role];l?l(e.legend,s):console.log(`need to render legend ${s.mark.role}`)})},Nue=V$e;function $$e(t){return[t.r,t.g,t.b,t.opacity*255]}function tl(t){if(t){let e=as(t);if(e){let n=e.rgb();return $$e(n)}}}function KD(t){let e=[...t];return e.length>3&&(e[3]=e[3]/255),`rgba(${e.join(",")})`}var z$e=1,QD=-1,j$e=.05,H$e=(t,e,n,i,a,o)=>{In(n,function(s){let l=e.view==="2d"?0:s.z||0,c=(e.view==="2d"?0:s.depth||0)+j$e,u=-1,d=t.assignCubeOrdinal(s.datum);if(d>t.maxOrdinal&&(t.maxOrdinal=d),d!==void 0){let{key:f,type:p,namespace:h,observedAt:m,order:_}=s.datum,E={key:f,type:p,namespace:h,ordinal:d,size:[s.width,s.height,c],position:[i+(s.x||0),u*(a+(s.y||0))-s.height,l],color:tl(s.fill)||t.defaultCubeColor||[128,128,128,128]};m&&(E.observedAt=m),_&&(E.order=_),E.color[3]=s.opacity===void 0?255:255*s.opacity,e.cubeData.push(E)}})},W$e=H$e;function hg(t){let e=-t[1];t[0]===QD&&(t[0]=0),t[1]=t[2],t[2]=e}var Z$e=(t,e,n,i,a,o)=>{In(n,function(s){let l=s.x||0,c=s.y||0,u=s.x2!=null?s.x2:l,d=s.y2!=null?s.y2:c,f=k1(l+i,c+a,u+i,d+a,s.stroke,s.strokeWidth);s.mark.role==="axis-tick"?(t.currAxis.role==="z"&&(hg(f.sourcePosition),hg(f.targetPosition)),t.currAxis.ticks.push(f)):s.mark.role==="axis-domain"?(t.currAxis.role==="z"&&(hg(f.sourcePosition),hg(f.targetPosition)),t.currAxis.domain=f):e.gridLines.push(f)})};function k1(t,e,n,i,a,o){return{sourcePosition:[t,-e,QD],targetPosition:[n,-i,QD],color:tl(a),strokeWidth:o}}function X$e(t,e,n,i,a,o,s=!1){let l=[k1(t,e,t+i,e,a,o),k1(t+i,e,t+i,e+n,a,o),k1(t+i,e+n,t,e+n,a,o),k1(t,e+n,t,e,a,o)];return s&&(l.push(k1(t,e,t+i,e+n,a,o)),l.push(k1(t,e+n,t+i,e,a,o))),l}var q$e=Z$e,K$e=-1,Y$e=(t,e,n,i,a,o)=>{let s={opacity:1,strokeOpacity:1,strokeWidth:1,...n.items[0]},l={strokeWidth:s.strokeWidth,strokeColor:tl(s.stroke),positions:n.items.map(c=>[c.x,K$e*c.y,c.z||0])};l.strokeColor[3]*=s.strokeOpacity,l.strokeColor[3]*=s.opacity,e.pathData.push(l)},J$e=Y$e,Q$e=(t,e,n,i,a,o)=>{In(n,function(c){if(!c.text)return;let u=c.fontSize*1,d=rze(c.baseline),f=d==="top"?c.fontSize/2:0,p={color:tl(c.fill),text:c.limit===void 0?c.text:yy(c.text,c.limit,"right",c.ellipsis||"..."),position:[i+(c.x||0),-1*(a+(c.y||0)+f),0],size:u,angle:eze(c.angle),textAnchor:tze(c.align),alignmentBaseline:d,metaData:c.metaData};if(c.mark.role==="axis-label"){let h=p;h.value=c.datum.value,t.currAxis.role==="z"&&hg(h.position),t.currAxis.tickText.push(h)}else c.mark.role==="axis-title"?(t.currAxis.role==="z"&&hg(p.position),t.currAxis.title=p):e.textData.push(p)})};function eze(t){return t&&!isNaN(t)?360-t:0}function tze(t){switch(t){case"center":return"middle";case"left":return"start";case"right":return"end"}return"start"}function rze(t){switch(t){case"middle":return"center"}return t||"bottom"}var nze=Q$e,rue=-1,ize=(t,e,n,i,a,o)=>{let s={fillOpacity:1,opacity:1,strokeOpacity:1,strokeWidth:0,depth:0,...n.items[0]},l=n.items.map(f=>(f={z:0,...f},f={x2:f.x,y2:f.y,z2:f.z,...f},[f.x,rue*f.y,f.z,f.x2,rue*f.y2,f.z2])),c=[],u=[l[0][0],l[0][1],l[0][2]];l.forEach(f=>{c.push([f[0],f[1],f[2]])}),l.reverse().forEach(f=>{c.push([f[3],f[4],f[5]])}),c.push(u);let d={fillColor:tl(s.fill)||[0,0,0,0],positions:c,strokeColor:tl(s.stroke)||[0,0,0,0],strokeWidth:s.strokeWidth,depth:s.depth};d.fillColor[3]*=s.fillOpacity,d.fillColor[3]*=s.opacity,d.strokeColor[3]*=s.strokeOpacity,d.strokeColor[3]*=s.opacity,e.polygonData.push(d)},aze=ize,oze=(t,e,n,i,a,o)=>{let s=n.bounds.width(),l=n.bounds.height(),{x1:c,x2:u,y1:d,y2:f}=n.bounds,p=0,h=0,m=n.items[0],{innerRadius:_,outerRadius:E}=m,v=200,y=f3().innerRadius(_).outerRadius(E),x=[],S=Math.PI;for(let N of n.items){let{startAngle:w,endAngle:T,fill:I,datum:R}=N,L=w-S,O=T-S,H={strokeWidth:s/4,strokeColor:tl(I),positions:[]},U=(ne,be)=>{H.positions.push([ne+p,(be+h)*-1,0])},X=y.centroid({startAngle:-L,endAngle:-L});U(X[0],X[1]*-1);for(let ne=0;ne<=v;ne++){let be=ne/v,q=L+be*(O-L),ie=y.centroid({startAngle:-q,endAngle:-q});U(ie[0],ie[1]*-1)}let W=y.centroid({startAngle:-O,endAngle:-O});U(W[0],W[1]*-1),x.push(H)}e.pathData.push(...x)},sze=oze,nue=-1,lze=(t,e,n,i,a,o)=>{let s=n.bounds.width(),l=n.bounds.height(),c=n.items[0],u=s/2,d=l/2,f=[];console.log("scene",n);for(let p of n.items){let{startX:h,startY:m,endX:_,endY:E,stroke:v,strokeWidth:y,datum:x}=p;console.log("item",p);let S={strokeWidth:y,strokeColor:tl(v),positions:[]};S.positions.push([h,m*nue,0]),S.positions.push([_,E*nue,0]),f.push(S)}e.pathData.push(...f)},cze=lze,uze=(t,e,n,i,a,o)=>{var l;let s={fillOpacity:1,opacity:1,strokeOpacity:1,strokeWidth:0,depth:0,...n.items[0]};console.log("shape",n.items);for(let c of n.items){let u=[];if(c.datum.type!=="MultiLineString"){if(((l=c.datum.geometry)==null?void 0:l.type)==="Polygon"){u=c.datum.geometry.coordinates[0].map(f=>[f[0],f[1],0]);let d={fillColor:tl(s.fill)||[0,0,0,0],positions:u,strokeColor:tl(s.stroke)||[0,0,0,0],strokeWidth:s.strokeWidth,depth:s.depth};e.polygonData.push(d),d.fillColor[3]*=s.fillOpacity,d.fillColor[3]*=s.opacity,d.strokeColor[3]*=s.strokeOpacity,d.strokeColor[3]*=s.opacity}}}},dze=uze;function fze(t){return t.orient?t:t.datum}function pze(t,e){if(t.mark.role==="legend")return 1;if(t.mark.role==="axis"){if(t.mark.zindex===e.zAxisZindex&&e.zAxisZindex!==void 0)return 4;let n=fze(t);if(n)switch(n.orient){case"bottom":case"top":return 2;case"left":case"right":return 3}}}var hze=(t,e,n,i,a,o)=>{In(n,function(s){let l=s.x||0,c=s.y||0;if(s.context&&s.context.background&&!e.backgroundColor&&(e.backgroundColor=tl(s.context.background)),s.stroke){let u={datum:s.datum,lines:X$e(l+i,c+a,s.height,s.width,s.stroke,z$e)};e.facets.push(u)}o=pze(s,t)||o,mze(t,e,o),In(s,function(u){Aue(t,e,u,l+i,c+a,o)})})};function mze(t,e,n){let i,a;switch(n){case 2:i=e.axes.x,a="x";break;case 3:i=e.axes.y,a="y";break;case 4:i=e.axes.z,a="z";break;default:return}t.currAxis={domain:null,tickText:[],ticks:[],role:a},i.push(t.currAxis)}var gze={group:hze,legend:Nue,rect:W$e,rule:q$e,line:J$e,area:aze,text:nze,arc:sze,path:cze,shape:dze},Aue=(t,e,n,i,a,o)=>{if(n.marktype!=="group"&&o===1)Nue(t,e,n,i,a,o);else{let s=gze[n.marktype];s?s(t,e,n,i,a,o):console.warn(`need to render ${n.marktype}`)}};function _ze(t,e,n){Aue(t,e,n,0,0,null),iue(e.axes.x,0),iue(e.axes.y,1)}function iue(t,e){t.forEach(n=>{n.domain&&Eze(n.domain,e),n.ticks.sort((i,a)=>i.sourcePosition[e]-a.sourcePosition[e]),n.tickText.sort((i,a)=>i.position[e]-a.position[e])})}function Eze(t,e){if(t.sourcePosition[e]>t.targetPosition[e]){let n=t.targetPosition;t.targetPosition=t.sourcePosition,t.sourcePosition=n}}var vze=`#define SHADER_NAME cube-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  // use highlight color if this fragment belongs to the selected object.
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);

  // use picking color if rendering to picking FBO.
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
}
`,aue=.05,yze=`#define SHADER_NAME cube-layer-vertex-shader

attribute vec3 positions;
attribute vec3 normals;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec3 instanceSizes;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

// Custom uniforms
uniform float lightingMix;

// Result
varying vec4 vColor;

void main(void) {

  float x = instanceSizes.x > 0.0 ? max(instanceSizes.x, ${aue.toFixed(1)}) : 0.0;
  float y = instanceSizes.y > 0.0 ? max(instanceSizes.y, ${aue.toFixed(1)}) : 0.0;

  // if alpha == 0.0, do not render element
  float noRender = float(instanceColors.a == 0.0);
  float finalXScale = project_size(x) * mix(1.0, 0.0, noRender);
  float finalYScale = project_size(y) * mix(1.0, 0.0, noRender);
  float finalZScale = project_size(instanceSizes.z) * mix(1.0, 0.0, noRender);

  // cube geometry vertics are between -1 to 1, scale and transform it to between 0, 1
  vec3 offset = vec3(
    (positions.x + 1.0) / 2.0 * finalXScale,
    (positions.y + 1.0) / 2.0 * finalYScale,
    (positions.z + 1.0) / 2.0 * finalZScale);

  // extrude positions
  vec4 position_worldspace;
  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, position_worldspace);
  
  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, position_worldspace.xyz, project_normal(normals));
  vec3 mixedLight = mix(instanceColors.rgb, lightColor, lightingMix);
  vec4 color = vec4(mixedLight, instanceColors.a) / 255.0;
  vColor = color;

  // Set color to be rendered to picking fbo (also used to check for selection highlight).
  picking_setPickingColor(instancePickingColors);
}
`,xze=5121,bze=5130,Sze=[255,0,255,255],Nze={lightingMix:.5,getSize:t=>t.size,getPosition:t=>t.position,getRotation:t=>t.rotation,getColor:t=>t.color,material:{ambient:.5,diffuse:1}},fF=class extends Dr{getShaders(){return{vs:yze,fs:vze,modules:[On,Ru,Bn]}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:bze,transition:!0,accessor:"getPosition"},instanceSizes:{size:3,transition:!0,accessor:"getSize"},instanceRotations:{size:3,transition:!0,accessor:"getRotation"},instanceColors:{size:4,type:xze,transition:!0,accessor:"getColor",defaultValue:Sze}})}updateState({props:t,oldProps:e,changeFlags:n}){super.updateState({props:t,oldProps:e,changeFlags:n});let{gl:i}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(i)}),this.getAttributeManager().invalidateAll()}_getModel(t){return new wr(t,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new ep,isInstanced:!0}))}draw({uniforms:t}){let{lightingMix:e}=this.props;this.state.model.setUniforms(Object.assign({},t,{lightingMix:e})).draw()}};TS(fF,"layerName","VegaCubeLayer");TS(fF,"defaultProps",Nze);function Aze({visibleNodes:t,layout:e,interactionManager:n,parentNode:i,viewId:a}){var p;let o={getPosition:e.updateTriggers.nodePositionChange,getColor:e.updateTriggers.nodeFillColorChange},s=((p=i.appearance)==null?void 0:p.position)||[Ia/2,Ia/2,0],l=s[0],c=s[1],u=s[2],d=Pe.nodePropsToVersionUri(i),f={lightingMix:.5,id:`${a}-${d}-node-cubes`,data:t,coordinateSystem:_t.CARTESIAN,pickable:!0,autoHighlight:!0,getSize:h=>h.appearance.scale,getColor:h=>h.appearance.fillColor,getPosition:h=>{let m=h.appearance.position;return[m[0]+l,m[1]+c,m[2]+u+.1]},updateTriggers:o};return new fF(f)}function Tze(t){return[t.r,t.g,t.b,t.opacity*255]}function Cze(t,e){let n=ja(t[0],t[1],t[2],t[3]/255),i=Wc(n);i.s=e;let a=i.rgb();return Tze(a)}var oue={cssPrefix:"vega-deckgl-",defaultCubeColor:[128,128,128,255],highlightColor:[0,0,0,255]},wze={onCubeClick:(t,e)=>{},onCubeHover:(t,e)=>{},transitionDurations:{color:100,position:600,size:600,view:600}},Ize={colors:{activeCube:"purple",defaultCube:KD(oue.defaultCubeColor),hoveredCube:KD(oue.highlightColor),selectedCube:"yellow",axisSelectHighlight:KD([128,128,128,128]),axisLine:"#000",axisText:"#000",unselectedColorMethod:t=>{let e=Cze(t,.05);return e[3]=171,e}},language:{headers:{chart:"Chart",details:"Details",legend:"Legend",selection:"Select & Filter"},bing:"bing",newColorMap:"remap color to filtered items",oldColorMap:"keep same colors",deselect:"deselect",exclude:"exclude",isolate:"isolate",legendOther:"other",nextDetail:">",previousDetail:"<",reset:"reset",colorBinCount:"Color bin count",colorReverse:"Color reverse",count:"Count",percent:"Percent",sum:"Sum",scatterPointScale:"Point scale",FacetMaxBins:"Facet max bins",FacetVMaxBins:"Cross facet max bins",XMaxBins:"X axis max bins",YMaxBins:"Y axis max bins",XGridSize:"X grid size",YGridSize:"Y grid size",InnerPaddingSize:"Inner padding size",OuterPaddingSize:"Outer padding size",treeMapMethod:"Treemap layout",facetColumns:"Facet columns",facetRows:"Facet rows",markOpacitySignal:"Mark opacity",textScaleSignal:"Text scale",xAxisTextAngleSignal:"X axis text angle",yAxisTextAngleSignal:"Y axis text angle",zGrounded:"Z grounded",zScaleProportion:"Z scale proportion to Y",selectionCount:t=>`${t} items selected`},maxLegends:19,onError:t=>{},transitionDurations:{...wze.transitionDurations,scope:600},selectionPolygonZ:-1,tickSize:4},Ot={Active:"__SandDance__Active",Collapsed:"__SandDance__Collapsed",Contains:"__SandDance__Contains",Count:"__SandDance__Count",Sum:"__SandDance__Sum",SumOfCount:"__SandDance__CountSum",SumOfSum:"__SandDance__SumSum",Selected:"__SandDance__Selected",First:"__SandDance__First",Last:"__SandDance__Last",Top:"__SandDance__Top",TopColor:"__SandDance__TopColor",TopIndex:"__SandDance__TopIndex",PowerBISelectionId:"__SandDance__PowerBISelectionId",FacetSearch:"__SandDance__FacetSearch",FacetTitle:"__SandDance__FacetTitle",Ordinal:"__SandDance__Ordinal",WrapCol:"__SandDance__WrapCol",WrapRow:"__SandDance__WrapRow",Value:"__SandDance__Value",OffsetX:"__SandDance__X",OffsetY:"__SandDance__Y",OffsetHeight:"__SandDance__H",OffsetWidth:"__SandDance__W"},sue={Color:"scale_color",X:"scale_x",Y:"scale_y",Z:"scale_z"},ce={ViewportWidth:"ViewportWidth",ViewportHeight:"ViewportHeight",MinCellWidth:"MinCellWidth",MinCellHeight:"MinCellHeight",PlotOffsetLeft:"PlotOffsetLeft",PlotOffsetTop:"PlotOffsetTop",PlotOffsetBottom:"PlotOffsetBottom",PlotOffsetRight:"PlotOffsetRight",PlotHeightIn:"PlotHeightIn",PlotWidthIn:"PlotWidthIn",PlotHeightOut:"PlotHeightOut",PlotWidthOut:"PlotWidthOut",ColorBinCount:"RoleColor_BinCountSignal",ColorReverse:"RoleColor_ReverseSignal",FacetAxesAdjustX:"RoleFacet_AxesAdjustSignalX",FacetAxesAdjustY:"RoleFacet_AxesAdjustSignalY",FacetBins:"RoleFacet_BinsSignal",FacetVBins:"RoleFacetV_BinsSignal",FacetPaddingTop:"FacetPaddingTop",FacetPaddingBottom:"FacetPaddingBottom",FacetPaddingLeft:"FacetPaddingLeft",MarkOpacity:"Mark_OpacitySignal",PointScale:"Chart_PointScaleSignal",TextAngleX:"Text_AngleXSignal",TextAngleY:"Text_AngleYSignal",TextScale:"Text_ScaleSignal",TextSize:"Text_SizeSignal",TextTitleSize:"Text_TitleSizeSignal",TreeMapMethod:"Chart_TreeMapMethodSignal",XBins:"RoleX_BinsSignal",YBins:"RoleY_BinsSignal",ZHeight:"RoleZ_HeightSignal",ZGrounded:"RoleZ_Grounded",ZProportion:"RoleZ_ProportionSignal"},Rze="__Other",Tue="none",of=10,sf=100,gg=15,Pze=0,Mze=0,eF=0,lue=0,tF=0,Lze=0,Oze=100,Bze=100,Dze=0,Fze=0,kze=0,Gze=0,Uze=0,Vze=0,$ze=20;function pF(t){switch(t.insight.totalStyle){case"sum-strip":case"sum-strip-percent":case"sum-treemap":return!1;default:return!0}}function zze(t){let{insight:e,specColumns:n,specViewOptions:i}=t,{language:a}=i,o={orientation:"horizontal",groupby:{column:n.y,defaultBins:of,maxbinsSignalName:ce.YBins,maxbinsSignalDisplayName:t.specViewOptions.language.YMaxBins,maxbins:sf},minBandWidth:gg,showAxes:!0},s={title:null},l={x:s,y:{title:n.y&&n.y.name},z:{title:n.z&&n.z.name}},c=[{layoutType:"Band",props:o}];if(e.totalStyle==="sum-strip-percent"){s.aggregate="percent",s.title=a.percent;let u={addPercentageScale:!0,sortOrder:"ascending",orientation:"horizontal",size:n.size,sort:n.sort,z:n.z};c.push({layoutType:"Strip",props:u})}else{let u={niceScale:!0,dock:"left",globalAggregateMaxExtentSignal:"aggMaxExtent",globalAggregateMaxExtentScaledSignal:"aggMaxExtentScaled",sumBy:n.size,showAxes:!0};switch(c.push({layoutType:"AggregateContainer",props:u}),e.totalStyle){case"sum-treemap":{s.aggregate="sum",s.title=a.sum;let d={corner:"top-left",size:n.size,treeMapMethod:i.language.treeMapMethod,z:n.z};c.push({layoutType:"Treemap",props:d});break}case"sum-strip":{s.aggregate="sum",s.title=a.sum;let d={sortOrder:"ascending",orientation:"horizontal",size:n.size,sort:n.sort,z:n.z};c.push({layoutType:"Strip",props:d});break}case"count-strip":{s.aggregate="count",s.title=a.count;let d={sortOrder:"ascending",orientation:"horizontal",size:n.size,sort:n.sort,z:n.z};c.push({layoutType:"Strip",props:d});break}default:{s.aggregate="count",s.title=a.count;let d={sortBy:n.sort,fillDirection:"down-right",z:n.z,maxGroupedUnits:u.globalAggregateMaxExtentSignal,maxGroupedFillSize:u.globalAggregateMaxExtentScaledSignal};c.push({layoutType:"Square",props:d});break}}}return{axisScales:l,layouts:c,specCapabilities:{countsAndSums:!0,percentage:!0,roles:[{role:"y",binnable:!0,axisSelection:n.y&&n.y.quantitative?"range":"exact",axisSelectionBetweenTicks:!0,signals:[ce.YBins]},{role:"z",axisSelection:n.z&&n.z.quantitative?"range":"exact",allowNone:!0},{role:"color",allowNone:!0},{role:"sort",allowNone:!0},{role:"size",allowNone:pF,excludeCategoric:!0,signals:[ce.TreeMapMethod]},{role:"facet",allowNone:!0,signals:[ce.FacetBins]},{role:"facetV",allowNone:!0,signals:[ce.FacetVBins]}]}}}function cue(t){let{insight:e,specColumns:n,specViewOptions:i}=t,{language:a}=i,o={orientation:"vertical",groupby:{column:n.x,defaultBins:of,maxbinsSignalName:ce.XBins,maxbinsSignalDisplayName:t.specViewOptions.language.XMaxBins,maxbins:sf},minBandWidth:gg,showAxes:!0},s={title:null},l={x:{title:n.x&&n.x.name},y:s,z:{title:n.z&&n.z.name}},c=[{layoutType:"Band",props:o}];if(e.totalStyle==="sum-strip-percent"){s.aggregate="percent",s.title=a.percent;let u={addPercentageScale:!0,sortOrder:"descending",orientation:"vertical",size:n.size,sort:n.sort,z:n.z};c.push({layoutType:"Strip",props:u})}else{let u={niceScale:!0,dock:"bottom",globalAggregateMaxExtentSignal:"aggMaxExtent",globalAggregateMaxExtentScaledSignal:"aggMaxExtentScaled",sumBy:n.size,showAxes:!0};switch(c.push({layoutType:"AggregateContainer",props:u}),e.totalStyle){case"sum-treemap":{s.aggregate="sum",s.title=a.sum;let d={corner:"bottom-left",size:n.size,treeMapMethod:i.language.treeMapMethod,z:n.z};c.push({layoutType:"Treemap",props:d});break}case"sum-strip":{s.aggregate="sum",s.title=a.sum;let d={sortOrder:"descending",orientation:"vertical",size:n.size,sort:n.sort,z:n.z};c.push({layoutType:"Strip",props:d});break}case"count-strip":{s.aggregate="count",s.title=a.count;let d={sortOrder:"descending",orientation:"vertical",sort:n.sort,z:n.z};c.push({layoutType:"Strip",props:d});break}default:{s.aggregate="count",s.title=a.count;let d={sortBy:n.sort,fillDirection:"right-up",z:n.z,maxGroupedUnits:u.globalAggregateMaxExtentSignal,maxGroupedFillSize:u.globalAggregateMaxExtentScaledSignal};c.push({layoutType:"Square",props:d});break}}}return{axisScales:l,layouts:c,specCapabilities:{countsAndSums:!0,percentage:!0,roles:[{role:"x",binnable:!0,axisSelection:n.x&&n.x.quantitative?"range":"exact",axisSelectionBetweenTicks:!0,signals:[ce.XBins]},{role:"z",axisSelection:n.z&&n.z.quantitative?"range":"exact",allowNone:!0},{role:"color",allowNone:!0},{role:"sort",allowNone:!0},{role:"size",allowNone:pF,excludeCategoric:!0,signals:[ce.TreeMapMethod]},{role:"facet",allowNone:!0,signals:[ce.FacetBins]},{role:"facetV",allowNone:!0,signals:[ce.FacetVBins]}]}}}function jze(t){let{insight:e,specColumns:n,specViewOptions:i}=t,a={x:{title:n.x&&n.x.name},y:{title:n.y&&n.y.name},z:{title:n.z&&n.z.name}},o={excludeEncodingRuleMap:!0,orientation:"horizontal",groupby:{column:n.y,defaultBins:of,maxbinsSignalName:ce.YBins,maxbinsSignalDisplayName:t.specViewOptions.language.YMaxBins,maxbins:sf},minBandWidth:gg,showAxes:!0},s={excludeEncodingRuleMap:!0,orientation:"vertical",groupby:{column:n.x,defaultBins:of,maxbinsSignalName:ce.XBins,maxbinsSignalDisplayName:t.specViewOptions.language.XMaxBins,maxbins:sf},minBandWidth:gg,showAxes:!0},l={onBuild:null,aggregation:null,sumBy:n.size},c=[{layoutType:"Band",props:s},{layoutType:"Band",props:o},{layoutType:"AggregateSquare",props:l}];switch(e.totalStyle){case"sum-treemap":{l.aggregation="sum";let u={corner:"bottom-left",size:n.size,treeMapMethod:i.language.treeMapMethod,z:n.z};c.push({layoutType:"Treemap",props:u});break}case"sum-strip":{l.aggregation="sum";let u={sortOrder:"ascending",orientation:"vertical",size:n.size,sort:n.sort,z:n.z};c.push({layoutType:"Strip",props:u});break}case"count-strip":{l.aggregation="count";let u={sortOrder:"ascending",orientation:"vertical",sort:n.sort,z:n.z};c.push({layoutType:"Strip",props:u});break}default:{l.aggregation="count";let u={sortBy:n.sort,fillDirection:"right-down",z:n.z,maxGroupedUnits:null,maxGroupedFillSize:null};l.onBuild=(d,f)=>{u.maxGroupedUnits=d,u.maxGroupedFillSize=f},c.push({layoutType:"Square",props:u});break}}return{axisScales:a,layouts:c,specCapabilities:{countsAndSums:!0,roles:[{role:"x",binnable:!0,axisSelection:n.x&&n.x.quantitative?"range":"exact",axisSelectionBetweenTicks:!0,signals:[ce.XBins]},{role:"y",binnable:!0,axisSelection:n.y&&n.y.quantitative?"range":"exact",axisSelectionBetweenTicks:!0,signals:[ce.YBins]},{role:"z",axisSelection:n.z&&n.z.quantitative?"range":"exact",allowNone:!0},{role:"color",allowNone:!0},{role:"sort",allowNone:!0},{role:"size",allowNone:pF,excludeCategoric:!0,signals:[ce.TreeMapMethod]},{role:"facet",allowNone:!0,signals:[ce.FacetBins]},{role:"facetV",allowNone:!0,signals:[ce.FacetVBins]}]}}}function Hze(t){let{specColumns:e}=t,n={sortBy:e.sort,fillDirection:"right-down",z:e.z,collapseYHeight:!0};return{axisScales:{z:{title:e.z&&e.z.name}},layouts:[{layoutType:"Square",props:n}],specCapabilities:{countsAndSums:!1,roles:[{role:"z",axisSelection:e.z&&e.z.quantitative?"range":"exact",allowNone:!0},{role:"color",allowNone:!0},{role:"sort",allowNone:!0},{role:"facet",allowNone:!0,signals:[ce.FacetBins]},{role:"facetV",allowNone:!0,signals:[ce.FacetVBins]}]}}}function Wze(t){let{specColumns:e,specViewOptions:n}=t,i={x:e.x,y:e.y,z:e.z,size:e.size,scatterPointScaleDisplay:n.language.scatterPointScale,zGrounded:n.language.zGrounded};return{axisScales:{x:{title:e.x&&e.x.name},y:{title:e.y&&e.y.name},z:{title:e.z&&e.z.name}},layouts:[{layoutType:"Scatter",props:i}],specCapabilities:{countsAndSums:!1,roles:[{role:"x",axisSelection:e.x&&e.x.quantitative?"range":"exact"},{role:"y",axisSelection:e.y&&e.y.quantitative?"range":"exact"},{role:"z",axisSelection:e.z&&e.z.quantitative?"range":"exact",allowNone:!0},{role:"color",allowNone:!0},{role:"size",excludeCategoric:!0,allowNone:!0},{role:"facet",allowNone:!0,signals:[ce.FacetBins]},{role:"facetV",allowNone:!0,signals:[ce.FacetVBins]}],signals:[ce.PointScale,ce.ZGrounded]}}}function Zze(t){let{specColumns:e,specViewOptions:n}=t,i={x:{title:e.x&&e.x.name},y:{title:e.y&&e.y.name},z:{title:n.language.count}},a={excludeEncodingRuleMap:!0,orientation:"horizontal",groupby:{column:e.y,defaultBins:of,maxbinsSignalName:ce.YBins,maxbinsSignalDisplayName:t.specViewOptions.language.YMaxBins,maxbins:sf},minBandWidth:gg,showAxes:!0},o={excludeEncodingRuleMap:!0,orientation:"vertical",groupby:{column:e.x,defaultBins:of,maxbinsSignalName:ce.XBins,maxbinsSignalDisplayName:t.specViewOptions.language.XMaxBins,maxbins:sf},minBandWidth:gg,showAxes:!0},s={sort:e.sort};return{axisScales:i,customZScale:!0,layouts:[{layoutType:"Band",props:o},{layoutType:"Band",props:a},{layoutType:"Stack",props:s}],specCapabilities:{countsAndSums:!1,roles:[{role:"x",binnable:!0,axisSelection:e.x&&e.x.quantitative?"range":"exact",axisSelectionBetweenTicks:!0,signals:[ce.XBins]},{role:"y",binnable:!0,axisSelection:e.y&&e.y.quantitative?"range":"exact",axisSelectionBetweenTicks:!0,signals:[ce.YBins]},{role:"color",allowNone:!0},{role:"sort",allowNone:!0},{role:"facet",allowNone:!0,signals:[ce.FacetBins]},{role:"facetV",allowNone:!0,signals:[ce.FacetVBins]}]}}}function Xze(t){let{specColumns:e}=t,n={sortOrder:"ascending",orientation:"vertical",size:e.size,sort:e.sort,z:e.z},i={z:{title:e.z&&e.z.name}},a=[];if(e.facet){i.y={title:null,aggregate:e.size?"sum":"count"};let l={dock:"top",niceScale:!1,globalAggregateMaxExtentScaledSignal:"globalAggregateMaxExtentScaledSignal",globalAggregateMaxExtentSignal:"globalAggregateMaxExtentSignal",sumBy:e.size,showAxes:!1};a.push({layoutType:"AggregateContainer",props:l})}return a.push({layoutType:"Strip",props:n}),{axisScales:i,layouts:a,specCapabilities:{countsAndSums:!1,roles:[{role:"size",allowNone:!0,excludeCategoric:!0},{role:"z",axisSelection:e.z&&e.z.quantitative?"range":"exact",allowNone:!0},{role:"color",allowNone:!0},{role:"sort",allowNone:!0},{role:"facet",allowNone:!0,signals:[ce.FacetBins]},{role:"facetV",allowNone:!0,signals:[ce.FacetVBins]}]}}}function qze(t){let{specColumns:e,specViewOptions:n}=t,i={corner:"top-left",group:e.group,size:e.size,treeMapMethod:n.language.treeMapMethod,z:e.z},a={z:{title:e.z&&e.z.name}},o=[];if(e.facet){a.y={title:null,aggregate:"sum"};let c={dock:"top",niceScale:!1,globalAggregateMaxExtentScaledSignal:"globalAggregateMaxExtentScaledSignal",globalAggregateMaxExtentSignal:"globalAggregateMaxExtentSignal",sumBy:e.size,showAxes:!1};o.push({layoutType:"AggregateContainer",props:c})}return o.push({layoutType:"Treemap",props:i}),{axisScales:a,layouts:o,specCapabilities:{countsAndSums:!1,roles:[{role:"size",excludeCategoric:!0},{role:"group",allowNone:!0},{role:"z",axisSelection:e.z&&e.z.quantitative?"range":"exact",allowNone:!0},{role:"color",allowNone:!0},{role:"facet",allowNone:!0,signals:[ce.FacetBins]},{role:"facetV",allowNone:!0,signals:[ce.FacetVBins]}],signals:[ce.TreeMapMethod]}}}function Kze(t,e,n,i){let a,o=e,s={x:0,y:0},l;switch(t){case"cross":{a={layoutType:"Cross",props:{axisTextColor:i,colRowTitles:!0,groupbyX:o,groupbyY:n}},l={bottom:tF,left:eF,top:0},s.y=lue,s.x=Lze;break}case"wrap":default:{a={layoutType:"Wrap",props:{axisTextColor:i,cellTitles:!0,groupby:o}},l={bottom:tF,left:eF,top:lue};break}}return{layoutPair:a,facetLayout:{facetPadding:l,plotPadding:s}}}var Yze={barchart:cue,barchartH:zze,barchartV:cue,density:jze,grid:Hze,scatterplot:Wze,stacks:Zze,strips:Xze,treemap:qze};function Jze(t){let{insight:e,specColumns:n,specViewOptions:i}=t,a=Yze[e.chart];if(a){let o=a(t);if(e.columns.facet){let s={column:n.facet,defaultBins:of,maxbins:sf,maxbinsSignalDisplayName:i.language.FacetMaxBins,maxbinsSignalName:ce.FacetBins},l={column:n.facetV,defaultBins:of,maxbins:sf,maxbinsSignalDisplayName:i.language.FacetVMaxBins,maxbinsSignalName:ce.FacetVBins},{facetLayout:c,layoutPair:u}=Kze(e.facetStyle,s,l,i.colors.axisText);o.layouts.unshift(u),o.facetLayout=c,o.collapseFacetAxes=i.collapseFacetAxes}return o}}function Cue(t){return!!as(t)}function Qze(t){return t.type==="number"||t.type==="integer"}function eje(t,e,n){let i=e[0],a=i?Object.keys(i):[],o={...t(e,a),...n},s=a.map(l=>({name:l,type:o[l]}));return wue(s,e),s}function tje(t,e){function n(i){return e.filter(a=>a.name===i)[0]}return{color:n(t.columns&&t.columns.color),facet:n(t.columns&&t.columns.facet),facetV:n(t.columns&&t.columns.facetV),group:n(t.columns&&t.columns.group),size:n(t.columns&&t.columns.size),sort:n(t.columns&&t.columns.sort),uid:n(t.columns&&t.columns.uid),x:n(t.columns&&t.columns.x),y:n(t.columns&&t.columns.y),z:n(t.columns&&t.columns.z)}}function wue(t,e){t.forEach(n=>{n&&(typeof n.quantitative!="boolean"&&(n.quantitative=Qze(n)),n.stats||(n.stats=nje(e,n)),n.type==="string"&&typeof n.isColorData!="boolean"&&rje(e,n))})}function rje(t,e){if(!e.stats.hasColorData){e.isColorData=!1;return}for(let n=0;n<t.length;n++)if(!Cue(t[n][e.name])){e.isColorData=!1;return}e.isColorData=!0}function nje(t,e){let n={},i={distinctValueCount:null,max:null,mean:null,min:null},a=0;for(let o=0;o<t.length;o++){let l=t[o][e.name];n[l]=!0,(i.max===null||l>i.max)&&(i.max=l),(i.min===null||l<i.min)&&(i.min=l);let c=+l;isNaN(c)||(a+=c),e.type==="string"&&!i.hasColorData&&Cue(l)&&(i.hasColorData=!0)}return e.quantitative&&(i.mean=t.length>0&&a/t.length,i.hasNegative=ije(e,t),e.type==="integer"&&(i.isSequential=aje(e,t))),i.distinctValueCount=Object.keys(n).length,i}function ije(t,e){for(let n=1;n<e.length;n++)if(e[n][t.name]<0)return!0;return!1}function aje(t,e){if(e.length<2)return!1;let n=t.name;for(let i=1;i<e.length;i++)if(e[i][n]!==e[i-1][n]+1)return!1;return!0}function uue(t,...e){t.axes||(t.axes=[]),t.axes.push(...e)}function Ya(t,...e){t.data||(t.data=[]),t.data.push(...e)}function Ja(t,...e){t.marks||(t.marks=[]),t.marks.push(...e)}function _g(t,...e){t.scales||(t.scales=[]),t.scales.push(...e.filter(Boolean))}function wa(t,...e){t.signals||(t.signals=[]),t.signals.push(...e)}function Qa(t,...e){t.transform||(t.transform=[]),t.transform.push(...e)}function oje(t,e){for(let n=0;n<t.length;n++)if(t[n].name===e)return{data:t[n],index:n}}function lf(t){return t.map(n=>n.groupby).reduce((n,i)=>n.concat(i),[])}function Hn(...t){return t.filter(Boolean).join(" + ")}function sje(t){let{axesOffsets:e,axisScales:n,axesScopes:i,axesTitlePadding:a,allGlobalScales:o,globalScope:s,labelBaseline:l,plotOffsetSignals:c,specColumns:u,specViewOptions:d}=t,{scope:f}=s;o.forEach(p=>{let{scales:h}=p;for(let m in h){let _=h[m];if(_){_g(f,..._);let{showAxes:E}=p,v;if(m==="z"&&(E=!1,t.view==="3d"&&d.zAxisOptions&&!t.hideZAxis&&d.zAxisOptions.showZAxis&&(E=!0,v=d.zAxisOptions.zIndex)),E&&n){let y=n[m];if(y){let x=d.colors.axisLine,S=m==="x",N=u[m]||{quantitative:!0},T={title:y.title,horizontal:S,column:N,specViewOptions:d,lineColor:x,titlePadding:a[m],labelBaseline:l[m],zindex:v};if(i.main.forEach(I=>uue(I.scope,due({...T,scale:I.scale||_[0],showTitle:I.title,showLabels:I.labels,showLines:I.lines}))),i[m]&&i[m].forEach(I=>uue(I.scope,due({...T,scale:I.scale||_[0],showTitle:I.title,showLabels:I.labels,showLines:I.lines}))),c[m]&&e[m]){let I=c[m];I.update=`${e[m]}`}}}}}})}function due(t){let{column:e,horizontal:n,labelBaseline:i,lineColor:a,scale:o,showLabels:s,showTitle:l,showLines:c,specViewOptions:u,title:d,titlePadding:f,zindex:p}=t,h={zindex:p,scale:o.name,orient:n?"bottom":"left",domain:c,ticks:c,...c&&{domainColor:a,tickColor:a,tickSize:u.tickSize},...l&&{title:d,titleAlign:n?"left":"right",titleAngle:{signal:n?ce.TextAngleX:ce.TextAngleY},titleColor:u.colors.axisText,titleFontSize:{signal:ce.TextTitleSize},titleLimit:Bze,titlePadding:f},labels:s,...s&&{labelAlign:n?"left":"right",labelBaseline:i,labelAngle:{signal:n?ce.TextAngleX:ce.TextAngleY},labelColor:u.colors.axisText,labelFontSize:{signal:ce.TextSize},labelLimit:Oze}};return e.quantitative&&(h.format="~r"),h}function Wt(t){return t.replace(".","\\.").replace("[","\\[").replace("]","\\]")}function lje(t){return t.replace(/[.,:;+=\-/<>{}|~!@#$%^*[\]`'"()?\s\\]/g,"")}function Iue(t,e,n,i,a,o){return{name:t,type:"linear",range:i,round:!0,reverse:a,domain:{data:e,field:Wt(n)},zero:o,nice:!0}}function Rue(t,e,n,i,a){let o={name:t,type:"point",range:n,domain:{data:e,field:Wt(i),sort:!0},padding:.5};return a!==void 0&&(o.reverse=a),o}function cje(t,e,n,i,a){a=a||Tue;let o={data:n,field:Wt(i)},s={scheme:a},l={signal:ce.ColorReverse};switch(e!=="continuous"&&(s.count={signal:ce.ColorBinCount}),e){case"continuous":return{name:t,type:"linear",domain:o,range:s,reverse:l};case"quantile":return{name:t,type:"quantile",domain:o,range:s,reverse:l};default:return{name:t,type:"quantize",domain:o,range:s,reverse:l}}}var uje=.6;function dje(t,e){let{specViewOptions:n}=t;return[{name:ce.ZProportion,value:uje,bind:{name:n.language.zScaleProportion,debounce:50,input:"range",min:.2,max:2,step:.1}},{name:ce.ZHeight,update:`${e} * ${ce.ZProportion}`},{name:ce.TextScale,value:1.2,bind:{name:n.language.textScaleSignal,debounce:50,input:"range",min:.5,max:2,step:.1}},{name:ce.TextSize,update:`${ce.TextScale} * 10`},{name:ce.TextTitleSize,update:`${ce.TextScale} * 15`},{name:ce.TextAngleX,value:30,bind:{name:n.language.xAxisTextAngleSignal,debounce:50,input:"range",min:0,max:90,step:1}},{name:ce.TextAngleY,value:0,bind:{name:n.language.yAxisTextAngleSignal,debounce:50,input:"range",min:-90,max:0,step:1}},{name:ce.MarkOpacity,value:1,bind:{name:n.language.markOpacitySignal,debounce:50,input:"range",min:.1,max:1,step:.05}}]}function fje(t){let{specViewOptions:e}=t;return{name:ce.ColorBinCount,value:7,bind:{name:e.language.colorBinCount,input:"range",min:1,max:e.maxLegends+1,step:1}}}function pje(t){let{specViewOptions:e}=t;return{name:ce.ColorReverse,value:!1,bind:{name:e.language.colorReverse,input:"checkbox"}}}function NS(t,e,n){t.update=`${e}((${t.update}), (${n}))`}function hje(t,e){let n={orient:"none",title:t.name,fill:e,encode:{symbols:{update:{shape:{value:"square"}}}}};return t.quantitative&&(n.type="symbol",n.format="~r"),n}function mje(t,e){let{specColumns:n,insight:i}=t;if(n.color&&!i.hideLegend&&!i.directColor&&!n.color.isColorData)return[hje(n.color,e)]}function gje(t,e,n,i,a,o,s){return[{name:a,source:n,transform:[{type:"aggregate",groupby:[Wt(t.name)]},{type:"window",ops:["count"],as:[s]},{type:"filter",expr:`datum[${JSON.stringify(s)}] <= ${e}`}]},{name:i,source:n,transform:[{type:"lookup",from:a,key:Wt(t.name),fields:[t.name].map(Wt),values:[t.name].map(Wt),as:[o]},{type:"formula",expr:`datum[${JSON.stringify(o)}] == null ? '${Rze}' : datum[${JSON.stringify(o)}]`,as:o}]}]}function _je(t){let{colorReverseSignalName:e,dataName:n,scope:i,legendDataName:a,scaleName:o,specContext:s,topLookupName:l}=t,c=n,{insight:u,specColumns:d,specViewOptions:f}=s,p=mje(s,o);return p&&(i.legends=p),d.color&&!d.color.quantitative&&(Ya(i,...gje(d.color,f.maxLegends,n,a,l,Ot.TopColor,Ot.TopIndex)),c=a),d.color&&!d.color.isColorData&&!u.directColor&&(d.color.quantitative?_g(i,cje(o,u.colorBin,n,d.color.name,u.scheme)):_g(i,{name:o,type:"ordinal",domain:{data:c,field:Ot.TopColor,sort:!0},range:{scheme:u.scheme||Tue},reverse:{signal:e}})),wa(i,fje(s),pje(s)),{topColorField:Ot.TopColor,colorDataName:c}}function Eje(t,e,n,i,a){let o=`parent[${JSON.stringify(Ot.FacetTitle)}]`,s=`datum[${JSON.stringify(Ot.Ordinal)}] - 1`,l=Mue(e.dataName,i,s),c=Pue(n.dataName,i,s);Ja(t,l.header,c.footer),Ja(l.header,{type:"text",encode:{enter:{align:{value:"center"},baseline:{value:"middle"},fill:{value:a}},update:{metaData:{signal:`{search: parent[${JSON.stringify(Ot.FacetSearch)}]}`},x:{signal:`${i.layoutWidth} / 2`},limit:{signal:i.layoutWidth},fontSize:{signal:ce.TextSize},text:{signal:o}}}}),Ja(c.footer,{type:"text",encode:{enter:{align:{value:"left"},baseline:{value:"middle"},fill:{value:a}},update:{metaData:{signal:`{search: parent[${JSON.stringify(Ot.FacetSearch)}]}`},y:{signal:`${i.layoutHeight} / 2`},limit:{signal:ce.PlotOffsetRight},fontSize:{signal:ce.TextSize},text:{signal:o}}}})}function vje(t,e,n){Ja(t,{type:"text",encode:{enter:{align:{value:"center"},baseline:{value:"bottom"},fill:{value:n}},update:{metaData:{signal:`{search: parent[${JSON.stringify(Ot.FacetSearch)}]}`},x:{signal:`(${e.layoutWidth}) / 2`},text:{signal:`parent[${JSON.stringify(Ot.FacetTitle)}]`},fontSize:{signal:ce.TextSize},limit:{signal:e.layoutWidth},y:{signal:`-${ce.FacetPaddingTop} / 2`}}}})}function yje(t){let{colSeqName:e,colTitleScale:n,globalScope:i,facetScope:a,plotScope:o,rowSeqName:s,rowTitleScale:l}=t,{sizeSignals:c}=a,u=fue(e,c.colCount),d=fue(s,c.rowCount),f="datum.data",p=Mue(e,c,f),h=Pue(s,c,f);return Ya(i,u,d),Ja(i,p.footer,h.header),_g(i,n,l),{main:[{scope:a.facetScope,lines:!0,labels:!1,title:!1}],x:[{scope:p.footer,lines:!0,labels:!0,title:!1},{scope:o,scale:n,lines:!1,labels:!1,title:!0}],y:[{scope:h.header,lines:!0,labels:!0,title:!1},{scope:o,scale:l,lines:!1,labels:!1,title:!0}]}}function Pue(t,e,n){let i=s=>({type:"group",from:{data:t},encode:{update:{x:{signal:s},y:{signal:`${ce.PlotOffsetTop} + ${ce.FacetPaddingTop} + (${n}) * (${e.layoutHeight} + ${ce.FacetPaddingTop} + ${ce.FacetPaddingBottom})`},height:{signal:e.layoutHeight}}}}),a=i(ce.PlotOffsetLeft),o=i(`${ce.PlotOffsetLeft} + ${ce.PlotWidthOut} + ${ce.PlotOffsetRight} / 2`);return{header:a,footer:o}}function Mue(t,e,n){let i=s=>({type:"group",from:{data:t},encode:{update:{x:{signal:`(${n}) * (${e.layoutWidth} + ${ce.FacetPaddingLeft}) + ${ce.FacetPaddingLeft} + ${ce.PlotOffsetLeft} - ${ce.FacetAxesAdjustX}`},y:{signal:`${s} - ${ce.FacetAxesAdjustY}`},width:{signal:e.layoutWidth}}}}),a=i(`${ce.PlotOffsetTop} / 2`),o=i(`${ce.PlotOffsetTop} + ${ce.PlotHeightOut}`);return{header:a,footer:o}}function fue(t,e){return{name:t,transform:[{type:"sequence",start:0,stop:{signal:e}}]}}function xje(t,e,n){let{specColumns:i,insight:a,specViewOptions:o}=t,s=i.color;return s?s.isColorData||a.directColor?{field:Wt(s.name)}:{scale:n,field:s.quantitative?Wt(s.name):e}:{value:o.colors.defaultCube}}function bje(t){return{signal:ce.MarkOpacity}}var Sje=class{constructor(t){le(this,"_markDataName");le(this,"data");le(this,"zSize");le(this,"sizeSignals");le(this,"offsets");le(this,"scope");le(this,"_markGroup");le(this,"signals");let{dataName:e,markGroup:n,scope:i,signals:a}=t;this.scope=i,this._markGroup=n,this.signals=a,this.data=oje(i.data,e).data,this._markDataName=e,this.offsets={x:"0",y:"0",h:ce.PlotHeightIn,w:ce.PlotWidthIn},this.sizeSignals={layoutHeight:ce.PlotHeightIn,layoutWidth:ce.PlotWidthIn},this.zSize=ce.PlotHeightIn}get markDataName(){return this._markDataName}setMarkDataName(t){this._markDataName=t}get markGroup(){return this._markGroup}setMarkGroup(t){this._markGroup=t}},Jl=class{constructor(t){le(this,"prefix");le(this,"id");this.props=t,this.id=t.id}getGrouping(){return null}getAggregateSumOp(){return null}build(){throw"Not implemented"}};function rn(){return`datum.${Ot.Collapsed}`}var Nje=class extends Jl{constructor(e){super(e);le(this,"aggregation");le(this,"names");this.props=e;let n=this.aggregation=this.getAggregation(),i=this.prefix=`agg_${this.id}`;this.names={barCount:`${i}_count`,aggregateField:`${i}_aggregate_value`,globalAggregateExtentSignal:`${i}_${n}_extent`,scale:`scale_${i}`,extentData:`data_${i}_extent`,offsets:`data_${i}_offsets`}}getAggregateSumOp(){if(this.aggregation==="sum")return{field:Wt(this.props.sumBy.name),op:"sum",as:Ot.Sum}}build(){let{aggregation:e,names:n,props:i}=this,{dock:a,globalScope:o,groupings:s,niceScale:l,parentScope:c,showAxes:u}=i;Qa(o.data,{...this.getTransforms(e,lf(s)),as:[n.aggregateField]},{type:"extent",field:Wt(n.aggregateField),signal:n.globalAggregateExtentSignal}),wa(o.scope,{name:i.globalAggregateMaxExtentSignal,update:`${n.globalAggregateExtentSignal}[1]`});let d=a==="left",f=`scale(${JSON.stringify(n.scale)}, datum[${JSON.stringify(n.aggregateField)}])`,p={x:c.offsets.x,y:Hn(c.offsets.y,a==="bottom"?f:""),h:d?c.offsets.h:a==="top"?f:`${c.offsets.h} - ${f}`,w:d?f:c.offsets.w},h={type:"linear",name:n.scale,domain:[0,{signal:i.globalAggregateMaxExtentSignal}],range:d?[0,{signal:c.sizeSignals.layoutWidth}]:[{signal:c.sizeSignals.layoutHeight},0],nice:l,zero:!0,reverse:a==="top"},m=`scale(${JSON.stringify(n.scale)}, ${i.globalAggregateMaxExtentSignal})`;return wa(o.scope,{name:i.globalAggregateMaxExtentScaledSignal,update:a==="bottom"?`${c.sizeSignals.layoutHeight} - ${m}`:m}),{offsets:p,sizeSignals:d?{layoutHeight:c.sizeSignals.layoutHeight,layoutWidth:null}:{layoutHeight:null,layoutWidth:c.sizeSignals.layoutWidth},globalScales:{showAxes:u,scales:{x:d?[h]:void 0,y:d?void 0:[h]}},encodingRuleMap:d?{x:[{test:rn(),signal:c.offsets.x}],width:[{test:rn(),value:0}]}:{y:[{test:rn(),signal:a==="top"?c.offsets.y:Hn(c.offsets.y,c.offsets.h)}],height:[{test:rn(),value:0}]}}}getTransforms(e,n){let i={type:"joinaggregate",groupby:n.map(Wt),ops:[e]};return e==="sum"&&(i.fields=[this.props.sumBy.name].map(Wt)),i}getAggregation(){let{props:e}=this,n;switch(e.dock==="left"?n=e.axesScales.x:n=e.axesScales.y,n.aggregate){case"sum":return"sum";default:return"count"}}},Aje=class extends Jl{constructor(e){super(e);le(this,"names");this.props=e;let n=this.props.aggregation,i=this.prefix=`agg_${this.id}`;this.names={barCount:`${i}_count`,aggregateField:`${i}_aggregate_value`,globalAggregateExtentSignal:`${i}_${n}_extent`,extentData:`data_${i}_extent`}}build(){let{names:e,props:n}=this,{aggregation:i,globalScope:a,groupings:o,onBuild:s,parentScope:l}=n,{sizeSignals:c}=l;Qa(a.data,{...this.getTransforms(i,lf(o)),as:[e.aggregateField]},{type:"extent",field:Wt(e.aggregateField),signal:e.globalAggregateExtentSignal});let u=`datum[${JSON.stringify(e.aggregateField)}]`,d=`min((${c.layoutHeight}), (${c.layoutWidth}))`,f=`(${[d,d].join(" * ")})`,p=`((${u}) / (${e.globalAggregateExtentSignal}[1]))`,m=`sqrt(${`(${[f,p].join(" * ")})`})`;s&&s(u,m);let E={x:Hn(l.offsets.x,`(${l.offsets.w} - ${m}) / 2`),y:Hn(l.offsets.y,`(${l.offsets.h} - ${m}) / 2`),h:m,w:m};return{offsets:E,sizeSignals:{layoutHeight:null,layoutWidth:null},encodingRuleMap:{y:[{test:rn(),signal:E.y}],height:[{test:rn(),value:0}]}}}getTransforms(e,n){let i={type:"joinaggregate",groupby:n.map(Wt),ops:[e]};return e==="sum"&&(i.fields=[this.props.sumBy.name].map(Wt)),i}};function AS(t,e,n){let{column:i,defaultBins:a,maxbins:o,maxbinsSignalDisplayName:s,maxbinsSignalName:l}=n;if(i.quantitative){let c=`${t}_bin_${lje(i.name)}`,u=`${c}_end`,d=`${c}_bins`,f=`${c}_bin_extent`;e=`${c}_sequence`;let p={type:"extent",field:Wt(i.name),signal:f},h={name:l,value:a,bind:{name:s,debounce:50,input:"range",min:1,max:o,step:1}},m={type:"bin",field:Wt(i.name),as:[c,u],signal:d,extent:{signal:`[${f}[0], ${f}[1] + 1e-11]`},maxbins:{signal:l}},_={name:e,transform:[{type:"sequence",start:{signal:`${d}.start`},stop:{signal:`${d}.stop`},step:{signal:`${d}.step`}},{type:"formula",expr:"datum.data",as:c},{type:"formula",expr:`datum.data + ${d}.step`,as:u},{type:"window",ops:["row_number"],as:[Ot.Ordinal]},{type:"formula",expr:`datum.data === ${d}.start`,as:Ot.First},{type:"formula",expr:`datum.data === ${d}.stop - ${d}.step`,as:Ot.Last}]};return{discreteColumn:n,native:!1,transforms:[p,m],fields:[c,u],binSignal:d,dataSequence:_,domainDataName:e,signals:[h],fullScaleDataname:_.name}}else return{discreteColumn:n,native:!0,fields:[i.name],domainDataName:e,fullScaleDataname:e}}var Tje=class extends Jl{constructor(e){super(e);le(this,"bin");le(this,"names");this.props=e;let n=this.prefix=`band_${this.id}`;this.names={xScale:`scale_${n}_x`,yScale:`scale_${n}_y`,bandWidth:`${n}_bandwidth`,accumulative:`${n}_accumulative`},this.bin=AS(this.prefix,e.globalScope.data.name,e.groupby)}getGrouping(){return this.bin.fields}build(){let{bin:e,names:n,props:i}=this,{globalScope:a,minBandWidth:o,orientation:s,parentScope:l,showAxes:c}=i,u=e.fields[0];e.native===!1&&(wa(a.scope,...e.signals),Qa(a.data,...e.transforms),Ya(a.scope,e.dataSequence)),Ya(a.scope,{name:n.accumulative,source:e.fullScaleDataname,transform:[{type:"aggregate",groupby:this.getGrouping().map(Wt),ops:["count"]}]});let d=s==="horizontal",f=d?a.signals.minCellHeight:a.signals.minCellWidth;NS(f,"max",`length(data(${JSON.stringify(n.accumulative)})) * ${o}`),wa(a.scope,{name:n.bandWidth,update:`bandwidth(${JSON.stringify(d?n.yScale:n.xScale)})`});let p=this.getScales(e,d),h;return i.excludeEncodingRuleMap||(h=d?{x:[{test:rn(),signal:l.offsets.x}],width:[{test:rn(),value:0}]}:{y:[{test:rn(),signal:Hn(l.offsets.y,l.offsets.h)}],height:[{test:rn(),value:0}]}),{offsets:this.getOffset(d,u),sizeSignals:d?{layoutHeight:n.bandWidth,layoutWidth:l.sizeSignals.layoutWidth}:{layoutHeight:l.sizeSignals.layoutHeight,layoutWidth:n.bandWidth},globalScales:{showAxes:c,scales:{x:d?void 0:p,y:d?p:void 0}},encodingRuleMap:h}}getOffset(e,n){let{names:i,props:a}=this,{parentScope:o}=a;return{x:Hn(o.offsets.x,e?"":`scale(${JSON.stringify(i.xScale)}, datum[${JSON.stringify(n)}])`),y:Hn(o.offsets.y,e?`scale(${JSON.stringify(i.yScale)}, datum[${JSON.stringify(n)}])`:""),h:e?i.bandWidth:o.offsets.h,w:e?o.offsets.w:i.bandWidth}}getScales(e,n){let{names:i}=this,{parentScope:a}=this.props,o=Wt(e.fields[0]),s=[],l;return n?l={type:"band",name:i.yScale,range:[0,{signal:a.sizeSignals.layoutHeight}],padding:.1,domain:{data:e.domainDataName,field:o,sort:!0},reverse:!0}:l={type:"band",name:i.xScale,range:[0,{signal:a.sizeSignals.layoutWidth}],padding:.1,domain:{data:e.domainDataName,field:o,sort:!0}},s.push(l),s}};function Lue(t){let e=n=>`datum[${JSON.stringify(t.fields[n])}]`;return t.discreteColumn.column.quantitative?`format(${e(0)}, '~r') + ' - ' + format(${e(1)}, '~r')`:e(0)}function bv(t,e){return e&&(t=[e,...t]),`{${t.join()}}`}function Oue(t,e,n,i){if(t.discreteColumn.column.quantitative){let a=[`name:${JSON.stringify(t.discreteColumn.column.name)}`,"operator:'>='",`value:datum[${JSON.stringify(t.fields[0])}]`],o=["clause:'&&'",`name:${JSON.stringify(t.discreteColumn.column.name)}`,"operator:'<'",`value:datum[${JSON.stringify(t.fields[1])}]`];return bv([`expressions:[ datum[${JSON.stringify(e)}] ? null : ${bv(a)}, datum[${JSON.stringify(n)}] ? null : ${bv(o)}]`],i)}else{let a=[`name:${JSON.stringify(t.discreteColumn.column.name)}`,"operator:'=='",`value:datum[${JSON.stringify(t.fields[0])}]`];return bv([`expressions:[${bv(a)}]`],i)}}function Bue(t,e,n,i){let a=n.map(Wt),o=`${e}_bin_order`;return{data:{name:o,source:t,transform:[{type:"aggregate",groupby:a},{type:"collect",sort:{field:a,order:a.map(l=>i)}},{type:"window",ops:["row_number"],as:[Ot.Ordinal]}]},scale:Due(o,`scale_${e}_order`,n)}}function Due(t,e,n){return{type:"ordinal",name:e,domain:{data:t,field:Wt(n[0])},range:{data:t,field:Ot.Ordinal}}}var Cje=class extends Jl{constructor(e){super(e);le(this,"binX");le(this,"binY");le(this,"names");this.props=e;let n=this.prefix=`cross_${this.id}`;this.binX=AS(`${n}_x`,e.globalScope.data.name,e.groupbyX),this.binY=AS(`${n}_y`,e.globalScope.data.name,e.groupbyY),this.names={facetDataName:`data_${n}_facet`,searchUnion:`data_${n}_search`,dimScale:`scale_${n}`,dimCount:`${n}_count`,dimCategorical:`data_${n}_cat`,dimCellSize:`${n}_cell_size`,dimCellSizeCalc:`${n}_cell_calc`}}getGrouping(){return this.binX.fields.concat(this.binY.fields)}build(){let{binX:e,binY:n,names:i,prefix:a,props:o}=this,{axisTextColor:s,colRowTitles:l,globalScope:c,parentScope:u}=o,d={x:{dataName:null,quantitative:null},y:{dataName:null,quantitative:null}},f={dim:"x",bin:e,sortOrder:"ascending",size:u.sizeSignals.layoutWidth,layout:u.sizeSignals.layoutWidth,min:c.signals.minCellWidth.name,out:c.signals.plotWidthOut,offset:ce.FacetPaddingLeft,padding:ce.FacetPaddingLeft,dataOut:null,scaleName:null,position:null},p={dim:"y",bin:n,sortOrder:"ascending",size:u.sizeSignals.layoutHeight,layout:u.sizeSignals.layoutHeight,min:c.signals.minCellHeight.name,out:c.signals.plotHeightOut,offset:ce.FacetPaddingTop,padding:`(${ce.FacetPaddingTop} + ${ce.FacetPaddingBottom})`,dataOut:null,scaleName:null,position:null};[f,p].forEach(y=>{let{bin:x,dim:S,padding:N,sortOrder:w}=y,T,I,R,L,O=d[S];if(x.native===!1)wa(c.scope,...x.signals),Qa(c.data,...x.transforms),Ya(c.scope,x.dataSequence),Qa(x.dataSequence,{type:"formula",expr:`indata(${JSON.stringify(c.markDataName)}, ${JSON.stringify(x.fields[0])}, datum[${JSON.stringify(x.fields[0])}])`,as:Ot.Contains}),T=x.dataSequence,I=x.dataSequence.name,R=`length(data(${JSON.stringify(I)}))`,L=Due(I,`${i.dimScale}_${S}`,x.fields),O.dataName=x.dataSequence.name;else{I=c.markDataName;let W=Bue(I,`${a}_${S}`,x.fields,w);T=W.data,Ya(c.scope,W.data),R=`length(data(${JSON.stringify(W.data.name)}))`,L=W.scale,O.dataName=W.data.name}O.quantitative=x.discreteColumn.column.quantitative,y.dataOut=T,y.scaleName=L.name,Qa(T,{type:"formula",expr:Oue(x,Ot.First,Ot.Last),as:Ot.FacetSearch},{type:"formula",expr:Lue(x),as:Ot.FacetTitle}),_g(c.scope,L);let H=`${i.dimCount}_${S}`,U=`${i.dimCellSizeCalc}_${S}`,X=`${i.dimCellSize}_${S}`;wa(c.scope,{name:H,update:R}),wa(c.scope,{name:U,update:`${y.layout} / ${H}`},{name:X,update:`max(${y.min}, (${U} - ${N}))`}),NS(y.out,"max",`((${X} + ${N}) * ${H})`),y.position=this.dimensionOffset(y)});let m={type:"group",encode:{update:{y:{signal:p.position}}},from:{data:p.dataOut.name},data:[{name:i.searchUnion,source:f.dataOut.name,transform:[{type:"formula",expr:`[datum[${JSON.stringify(Ot.FacetSearch)}], merge(parent[${JSON.stringify(Ot.FacetSearch)}], { clause: '&&'})]`,as:Ot.FacetSearch}]}]},_={style:"cell",name:a,type:"group",encode:{update:{height:{signal:`${i.dimCellSize}_y`},width:{signal:`${i.dimCellSize}_x`},x:{signal:f.position}}},from:{data:i.searchUnion}};Ja(c.markGroup,m),Ja(m,_);let E={x:this.dimensionOffset(f),y:this.dimensionOffset(p),h:`${i.dimCellSize}_y`,w:`${i.dimCellSize}_x`},v={layoutHeight:`${i.dimCellSize}_y`,layoutWidth:`${i.dimCellSize}_x`,colCount:`${i.dimCount}_x`,rowCount:`${i.dimCount}_y`};return l&&Eje(c.scope,d.x,d.y,v,s),{facetScope:_,offsets:E,sizeSignals:v,titles:d}}dimensionOffset(e){let{names:n}=this;return`${e.offset} + (scale(${JSON.stringify(e.scaleName)}, datum[${JSON.stringify(e.bin.fields[0])}]) - 1) * (${n.dimCellSize}_${e.dim} + ${e.padding})`}},wje=class extends Jl{constructor(e){super(e);le(this,"names");this.props=e;let n=this.prefix=`scatter_${this.id}`;this.names={aggregateData:`data_${n}_aggregate`,markData:`data_${n}_mark`,sizeExtent:`${n}_sizeExtent`,sizeRange:`${n}_sizeRange`,sizeScale:`${n}_sizeScale`,xScale:`scale_${n}_x`,yScale:`scale_${n}_y`,zScale:`scale_${n}_z`}}build(){let{names:e,prefix:n,props:i}=this,{globalScope:a,parentScope:o,scatterPointScaleDisplay:s,size:l,x:c,y:u,z:d,zGrounded:f}=i,p=l&&l.quantitative&&l;wa(a.scope,{name:ce.PointScale,value:5,bind:{name:s,debounce:50,input:"range",min:1,max:10,step:1}},{name:ce.ZGrounded,value:!1,bind:{name:f,input:"checkbox"}}),p&&(Qa(a.data,{type:"extent",field:Wt(p.name),signal:e.sizeExtent}),_g(a.scope,{name:e.sizeScale,type:"linear",domain:[0,{signal:`${e.sizeExtent}[1]`}],range:[0,{signal:e.sizeRange}]}),wa(a.scope,{name:e.sizeRange,update:`min(${o.sizeSignals.layoutHeight}, ${o.sizeSignals.layoutWidth}) / ${$ze}`})),Ya(a.scope,{name:e.markData,source:a.markDataName,transform:[c,u,d].map(x=>!x||!x.quantitative?void 0:{type:"filter",expr:`isValid(datum[${JSON.stringify(x.name)}])`}).filter(Boolean)}),a.setMarkDataName(e.markData);let h={showAxes:!0,scales:{}},m=d?`scale(${JSON.stringify(e.zScale)}, datum[${JSON.stringify(d.name)}])`:null,_=p?`scale(${JSON.stringify(e.sizeScale)}, datum[${JSON.stringify(p.name)}]) * ${ce.PointScale}`:ce.PointScale,E={height:[{test:rn(),value:0},{signal:_}],width:{signal:_},...d&&{z:[{test:rn(),value:0},{signal:`${ce.ZGrounded} ? 0 : ${m}`}],depth:[{test:rn(),value:0},{signal:`${ce.ZGrounded} ? ${m} : ${_}`}]}};[{column:c,xyz:"x",scaleName:e.xScale,reverse:!1,signal:o.sizeSignals.layoutWidth},{column:u,xyz:"y",scaleName:e.yScale,reverse:!0,signal:o.sizeSignals.layoutHeight},{column:d,xyz:"z",scaleName:e.zScale,reverse:!1,signal:`(${a.zSize}) * ${ce.ZProportion}`}].forEach(x=>{let{column:S,reverse:N,scaleName:w,signal:T,xyz:I}=x;if(!S)return;let R;S.quantitative?R=Iue(w,a.data.name,S.name,[0,{signal:T}],N,!1):R=Rue(w,a.data.name,[0,{signal:T}],S.name,N),h.scales[I]=[R]});let y={name:n,type:"rect",from:{data:a.markDataName},encode:{update:E}};return Ja(a.markGroup,y),{offsets:{x:Hn(o.offsets.x,`scale(${JSON.stringify(e.xScale)}, datum[${JSON.stringify(c.name)}])`),y:Hn(o.offsets.y,`scale(${JSON.stringify(e.yScale)}, datum[${JSON.stringify(u.name)}]) - ${_}`),h:_,w:_},sizeSignals:{layoutHeight:null,layoutWidth:null},globalScales:h,mark:y,encodingRuleMap:{y:[{test:rn(),signal:Hn(o.offsets.y,o.sizeSignals.layoutHeight)}]}}}};function hF(t,e,n,i){if(t){let a=[0,{signal:`(${e}) * ${ce.ZProportion}`}];return t.quantitative?Iue(i,n,t.name,a,!1,!0):Rue(i,n,a,t.name,!1)}}var Ije=class extends Jl{constructor(e){super(e);le(this,"names");this.props=e;let n=this.prefix=`square_${this.id}`;this.names={bandWidth:this.getBandWidth(),maxGroupField:`${n}_max_group`,maxGroupSignal:`${n}_max_grouping`,stack0:`${n}_stack0`,stack1:`${n}_stack1`,zScale:`scale_${n}_z`}}build(){let{names:e,prefix:n,props:i}=this,{fillDirection:a,globalScope:o,groupings:s,parentScope:l,collapseYHeight:c,sortBy:u,z:d}=i,f=hF(d,o.zSize,o.data.name,e.zScale);Qa(o.data,{type:"stack",groupby:lf(s).map(Wt),as:[e.stack0,e.stack1],...u&&{sort:{field:Wt(u.name),order:"ascending"}}});let{gap:p,levelSize:h,size:m,squaresPerBand:_}=this.addSignals(),E={signal:a==="down-right"?m:h},v={name:n,type:"rect",from:{data:o.markDataName},encode:{update:{height:c?[{test:rn(),value:0},E]:E,width:{signal:a==="down-right"?h:m},...d&&{z:{value:0},depth:[{test:rn(),value:0},{scale:e.zScale,field:Wt(d.name)}]}}}};Ja(o.markGroup,v);let{tx:y,ty:x}=this.transformXY(p,h,_);return{...d&&{globalScales:{showAxes:!0,scales:{z:[f]}}},offsets:{x:Hn(l.offsets.x,y.expr),y:Hn(l.offsets.y,x.expr),h:m,w:m},mark:v,sizeSignals:{layoutHeight:m,layoutWidth:m},...c&&{encodingRuleMap:{y:[{test:rn(),signal:l.offsets.y}]}}}}getBandWidth(){let{offsets:e}=this.props.parentScope;switch(this.props.fillDirection){case"down-right":return e.h;default:return e.w}}addSignals(){let{names:e,props:n}=this,{fillDirection:i,globalScope:a,groupings:o,parentScope:s}=n,{maxGroupedFillSize:l,maxGroupedUnits:c}=n;c||(o?(Qa(a.data,{type:"joinaggregate",groupby:lf(o).map(Wt),ops:["count"],as:[e.maxGroupField]},{type:"extent",field:e.maxGroupField,signal:e.maxGroupSignal}),c=`(${e.maxGroupSignal}[1])`):c=`length(data(${JSON.stringify(a.data.name)}))`),l||(l=i==="down-right"?s.offsets.w:s.offsets.h);let u=`((${e.bandWidth}) / (${l}))`,d=`ceil(sqrt(${c} * ${u}))`,f=`min(0.1 * ((${e.bandWidth}) / (${d} - 1)), 1)`,p=`(((${e.bandWidth}) / ${d}) - ${f})`,h=`ceil(${c} / ${d})`,m=`(((${l}) / ${h}) - ${f})`;return{gap:f,levelSize:m,size:p,squaresPerBand:d}}transformXY(e,n,i){let{names:a,prefix:o}=this,s=`(${a.bandWidth}) / ${i} * ((datum[${JSON.stringify(a.stack0)}]) % ${i})`,l=`floor((datum[${JSON.stringify(a.stack0)}]) / ${i})`,{fillDirection:c,parentScope:u}=this.props,d={type:"formula",expr:null,as:`${o}_${Ot.OffsetX}`},f={type:"formula",expr:null,as:`${o}_${Ot.OffsetY}`};switch(c){case"down-right":{d.expr=`${l} * (${n} + ${e})`,f.expr=s;break}case"right-up":{d.expr=s,f.expr=`${u.offsets.h} - ${n} - ${l} * (${n} + ${e})`;break}case"right-down":default:{d.expr=s,f.expr=`${l} * (${n} + ${e})`;break}}return{tx:d,ty:f}}},Rje=class extends Jl{constructor(e){super(e);le(this,"names");this.props=e;let n=this.prefix=`stack_${this.id}`;this.names={cube:`${n}_cube`,globalDataName:`data_${n}_count`,globalExtent:`${n}_global_extent`,levelDataName:`data_${n}_level`,count:`${n}_count`,stack0:`${n}_stack0`,stack1:`${n}_stack1`,sequence:`data_${n}_sequence`,sides:`${n}_sides`,size:`${n}_size`,squared:`${n}_squared`,maxCount:`${n}_maxCount`,maxLevels:`${n}_maxLevels`,zScale:`${n}_zScale`}}build(){let{names:e,props:n}=this,{globalScope:i,groupings:a,parentScope:o,sort:s}=n,{sizeSignals:l}=o;Qa(i.data,{type:"joinaggregate",groupby:lf(a).map(Wt),ops:["count"],as:[e.count]},{type:"extent",field:e.count,signal:e.globalExtent},{type:"stack",groupby:lf(a).map(Wt),as:[e.stack0,e.stack1],...s&&{sort:{field:Wt(s.name),order:"ascending"}}}),Ya(i.scope,{name:e.sequence,transform:[{type:"sequence",start:1,stop:{signal:`max(sqrt(${e.globalExtent}[1]),2)`}},{type:"formula",expr:"datum.data * datum.data",as:"squared"},{type:"formula",expr:`ceil(${e.globalExtent}[1] / datum.squared)`,as:"maxlevels"},{type:"formula",expr:`(${e.size} - (datum.data - 1) * datum.data) / datum.data`,as:"side"},{type:"formula",expr:"datum.side * datum.maxlevels + datum.maxlevels - 1",as:"sidecubeheight"},{type:"formula",expr:`abs(${i.zSize} - datum.sidecubeheight)`,as:"heightmatch"},{type:"collect",sort:{field:"heightmatch",order:"ascending"}},{type:"window",ops:["row_number"]},{type:"filter",expr:"datum.row_number === 1"}]}),wa(i.scope,{name:e.size,update:`min((${l.layoutHeight}), (${l.layoutWidth}))`},{name:e.squared,update:`data('${e.sequence}')[0].squared`},{name:e.sides,update:`sqrt(${e.squared})`},{name:e.cube,update:`(${e.size} - (${e.sides} - 1)) / ${e.sides}`},{name:e.maxLevels,update:`data('${e.sequence}')[0].maxlevels`},{name:e.maxCount,update:`${e.maxLevels} * ${e.squared}`});let c=`floor(datum[${JSON.stringify(e.stack0)}] / ${e.squared})`,u=`(datum[${JSON.stringify(e.stack0)}] % ${e.squared})`,d=`(${u} % ${e.sides})`,f=`floor(${u} / ${e.sides})`,p=`(${l.layoutWidth} - ${e.size}) / 2`,h=`(${l.layoutHeight} - ${e.size}) / 2`,m={x:Hn(o.offsets.x,p,`${d} * (${e.cube} + 1)`),y:Hn(o.offsets.y,h,`${f} * (${e.cube} + 1)`),h:e.size,w:e.size},_={type:"rect",from:{data:this.names.levelDataName},encode:{update:{z:{signal:`${c} * (${e.cube} + 1)`},height:{signal:e.cube},width:{signal:e.cube},depth:{signal:e.cube}}}};Ja(i.markGroup,_);let E={type:"linear",name:e.zScale,domain:[0,{signal:e.maxCount}],range:[0,{signal:`${e.maxLevels} * (${e.cube} + 1) - 1`}],nice:!1};return{offsets:m,mark:_,sizeSignals:{layoutHeight:e.size,layoutWidth:e.size},globalScales:{showAxes:!0,scales:{z:[E]}},encodingRuleMap:{y:[{test:rn(),signal:o.offsets.y}],z:[{test:rn(),value:0}],depth:[{test:rn(),value:0}],height:[{test:rn(),value:0}]}}}},Pje=class extends Jl{constructor(e){super(e);le(this,"names");this.props=e;let n=this.prefix=`strip_${this.id}`;this.names={firstField:`${n}${Ot.First}`,lastField:`${n}${Ot.Last}`,valueField:`${n}${Ot.Value}`,scale:`scale_${n}`,zScale:`scale_${n}_z`}}build(){let{names:e,prefix:n,props:i}=this,{addPercentageScale:a,globalScope:o,groupings:s,orientation:l,size:c,sort:u,sortOrder:d,parentScope:f,z:p}=i,h=hF(p,o.zSize,o.data.name,e.zScale),m=l==="horizontal",_=[];u&&_.push({type:"collect",sort:{field:Wt(u.name),order:d}});let E;c?(E=c.name,_.push({type:"filter",expr:`datum[${JSON.stringify(c.name)}] > 0`})):(E=e.valueField,_.push({type:"formula",expr:"1",as:E}));let v={type:"stack",field:Wt(E),offset:"normalize",as:[e.firstField,e.lastField]};s.length&&(v.groupby=lf(s).map(Wt)),_.push(v),Qa(o.data,..._);let y=[e.lastField,e.firstField].map(w=>`datum[${JSON.stringify(w)}]`).join(" - "),x={x:Hn(f.offsets.x,m?`datum[${JSON.stringify(e.firstField)}] * (${f.offsets.w})`:""),y:Hn(f.offsets.y,m?"":`datum[${JSON.stringify(e.firstField)}] * (${f.offsets.h})`),h:m?f.offsets.h:`(${y}) * (${f.offsets.h})`,w:m?`(${y}) * (${f.offsets.w})`:f.offsets.w},S={name:n,type:"rect",from:{data:o.markDataName},encode:{update:{height:{signal:x.h},width:{signal:x.w},...p&&{z:{value:0},depth:[{test:rn(),value:0},{scale:e.zScale,field:Wt(p.name)}]}}}};Ja(o.markGroup,S);let N;return a&&(N=[{type:"linear",name:e.scale,domain:[0,100],range:m?[0,{signal:f.sizeSignals.layoutWidth}]:[{signal:f.sizeSignals.layoutHeight},0]}]),{globalScales:{showAxes:!0,scales:{x:m?N:void 0,y:m?void 0:N,z:h&&[h]}},offsets:x,sizeSignals:{layoutHeight:null,layoutWidth:null},mark:S}}},Mje=class extends Jl{constructor(e){super(e);le(this,"names");this.props=e;let n=this.prefix=`treemap_${this.id}`;this.names={dataName:`data_${n}`,dataHeightWidth:`data_${n}_hw`,dataExtents:`data_${n}_extents`,dataFacet:`data_${n}_facet`,dataFacetMark:`data_${n}_facetMark`,fieldChildren:`${n}_children`,fieldDepth:`${n}_depth`,fieldX0:`${n}_x0`,fieldX1:`${n}_x1`,fieldY0:`${n}_y0`,fieldY1:`${n}_y1`,fieldHeight:`${n}_h`,fieldWidth:`${n}_w`,heightExtent:`${n}_heightExtent`,widthExtent:`${n}_widthExtent`,zScale:`scale_${n}_z`}}build(){let{names:e,props:n}=this,{globalScope:i,parentScope:a,treeMapMethod:o,z:s}=n,l=hF(s,i.zSize,i.data.name,e.zScale),c={x:Hn(a.offsets.x,rF(e.fieldX0)),y:Hn(a.offsets.y,rF(e.fieldY0)),h:pue(e.fieldY1,e.fieldY0),w:pue(e.fieldX1,e.fieldX0)},u=this.transformedMark(c);return wa(i.scope,{name:ce.TreeMapMethod,value:"squarify",bind:{name:o,input:"select",options:["squarify","binary"]}}),{...s&&{globalScales:{showAxes:!0,scales:{z:[l]}}},mark:u,offsets:c,sizeSignals:{layoutHeight:null,layoutWidth:null}}}transformedMark(e){let{names:n,props:i}=this,{globalScope:a,groupings:o,parentScope:s}=i;if(o.length){Ya(a.scope,{name:n.dataHeightWidth,source:a.markDataName,transform:[{type:"formula",expr:s.offsets.h,as:n.fieldHeight},{type:"formula",expr:s.offsets.w,as:n.fieldWidth}]});let l={name:n.dataFacetMark,source:n.dataFacet},c={type:"group",from:{facet:{name:n.dataFacet,data:n.dataHeightWidth,groupby:lf(o).map(Wt)}},data:[{name:n.dataExtents,source:n.dataFacet,transform:[{type:"extent",field:n.fieldHeight,signal:n.heightExtent},{type:"extent",field:n.fieldWidth,signal:n.widthExtent}]},l]};return a.setMarkDataName(n.dataFacetMark),Ja(a.markGroup,c),a.setMarkGroup(c),this.treemapTransform(l,`${n.widthExtent}[0]`,`${n.heightExtent}[0]`),this.addMark(e,c,a.markDataName)}else return this.treemapTransform(a.data,s.offsets.w,s.offsets.h),this.addMark(e,a.markGroup,a.markDataName)}addMark(e,n,i){let{names:a,prefix:o,props:s}=this,{z:l}=s,c={name:o,type:"rect",from:{data:i},encode:{update:{width:{signal:e.w},height:{signal:e.h},...l&&{z:{value:0},depth:[{test:rn(),value:0},{scale:a.zScale,field:Wt(l.name)}]}}}};return Ja(n,c),c}treemapTransform(e,n,i){let{names:a,props:o}=this,{group:s,size:l}=o;Qa(e,{type:"filter",expr:`datum[${JSON.stringify(l.name)}] > 0`},{type:"nest",keys:[s&&s.name||"__NONE__"]},{type:"treemap",field:Wt(l.name),sort:{field:"value",order:"descending"},round:!0,method:{signal:ce.TreeMapMethod},paddingInner:1,paddingOuter:0,size:[{signal:n},{signal:i}],as:[a.fieldX0,a.fieldY0,a.fieldX1,a.fieldY1,a.fieldDepth,a.fieldChildren]})}};function rF(t){return`datum[${JSON.stringify(t)}]`}function pue(...t){return t.map(e=>rF(e)).join(" - ")}var Lje=class extends Jl{constructor(e){super(e);le(this,"bin");le(this,"names");this.props=e;let n=this.prefix=`wrap_${this.id}`;this.bin=AS(this.prefix,e.globalScope.data.name,e.groupby),this.names={outputData:`data_${n}_out`,rowColumnDataName:`data_${n}_row_col`,cellHeight:`${n}_cellHeight`,cellWidth:`${n}_cellWidth`,fits:`${n}_fits`,target:`${n}_target`,minArea:`${n}_minArea`,aspect:`${n}_aspect`,minAspect:`${n}_minAspect`,idealAspect:`${n}_idealAspect`,dataLength:`${n}_dataLength`,rxc0:`${n}_rxc0`,rxc1:`${n}_rxc1`,rxc2:`${n}_rxc2`,rxc:`${n}_rxc`,growColCount:`${n}_growColCount`,growCellWidth:`${n}_growCellWidth`,fitsArea:`${n}_fitsArea`,colCount:`${n}_colCount`}}getGrouping(){return this.bin.fields}build(){let{bin:e,names:n,prefix:i,props:a}=this,{axisTextColor:o,cellTitles:s,globalScope:l,parentScope:c}=a,u;if(e.native===!1)wa(l.scope,...e.signals),Qa(l.data,...e.transforms),Ya(l.scope,e.dataSequence),Qa(e.dataSequence,{type:"formula",expr:`indata(${JSON.stringify(l.data.name)}, ${JSON.stringify(e.fields[0])}, datum[${JSON.stringify(e.fields[0])}])`,as:Ot.Contains}),u=e.dataSequence.name;else{let x=Bue(l.data.name,i,e.fields,"ascending");Ya(l.scope,x.data),u=x.data.name}Ya(l.scope,{name:n.rxc0,transform:[{type:"sequence",start:1,stop:{signal:`ceil(sqrt(${n.dataLength})) + 1`}},{type:"formula",expr:`ceil(${n.dataLength} / datum.data)`,as:"complement"}]},{name:n.rxc1,source:n.rxc0,transform:[{type:"project",fields:["data"],as:["cols"]}]},{name:n.rxc2,source:n.rxc0,transform:[{type:"project",fields:["complement"],as:["cols"]}]},{name:n.rxc,source:[n.rxc1,n.rxc2],transform:[{type:"formula",expr:`ceil(${n.dataLength} / datum.cols)`,as:"rows"},{type:"formula",expr:`${c.sizeSignals.layoutWidth} / datum.cols`,as:"cellw"},{type:"formula",expr:`datum.cols === 1 ? max(datum.cellw, ${ce.MinCellWidth}) : datum.cellw`,as:"cellw"},{type:"formula",expr:`${c.sizeSignals.layoutHeight} / datum.rows`,as:"cellh"},{type:"formula",expr:`datum.rows === 1 ? max(datum.cellh, ${ce.MinCellHeight}) : datum.cellh`,as:"cellh"},{type:"formula",expr:`(datum.cellw >= ${ce.MinCellWidth} && datum.cellh >= ${ce.MinCellHeight})`,as:"meetsmin"},{type:"filter",expr:"datum.meetsmin"},{type:"formula",expr:"datum.cellw / datum.cellh",as:n.aspect},{type:"formula",expr:`abs(datum.${n.aspect} - ${n.target})`,as:n.idealAspect},{type:"formula",expr:`${n.dataLength} / (datum.cols * datum.rows)`,as:"coverage"},{type:"collect",sort:{field:[n.idealAspect,"coverage"],order:["ascending","descending"]}}]},{name:n.rowColumnDataName,source:u,transform:[{type:"formula",expr:`floor((datum[${JSON.stringify(Ot.Ordinal)}] - 1) / ${n.colCount})`,as:Ot.WrapRow},{type:"formula",expr:`(datum[${JSON.stringify(Ot.Ordinal)}] - 1) % ${n.colCount}`,as:Ot.WrapCol},{type:"formula",expr:Oue(e,Ot.First,Ot.Last),as:Ot.FacetSearch},{type:"formula",expr:Lue(e),as:Ot.FacetTitle}]});let d={name:n.outputData,source:l.data.name,transform:[{type:"lookup",from:n.rowColumnDataName,key:Wt(e.fields[0]),fields:[e.fields[0]].map(Wt),values:[Ot.WrapRow,Ot.WrapCol]}]};Ya(l.scope,d),l.setMarkDataName(n.outputData),wa(l.scope,{name:n.minAspect,update:`${ce.MinCellWidth} / ${ce.MinCellHeight}`},{name:n.target,update:`${n.minAspect} === 1 ? ${1.2} : ${n.minAspect}`},{name:n.minArea,update:`${ce.MinCellWidth}*${ce.MinCellHeight}`},{name:n.aspect,update:`${c.sizeSignals.layoutWidth} / ${c.sizeSignals.layoutHeight}`},{name:n.dataLength,update:`data(${JSON.stringify(u)}).length`},{name:n.growColCount,update:`max(floor(${c.sizeSignals.layoutWidth} / ${ce.MinCellWidth}), 1)`},{name:n.growCellWidth,update:`${c.sizeSignals.layoutWidth} / ${n.growColCount}`},{name:n.fitsArea,update:`((${n.dataLength} * ${n.minArea}) <= (${c.sizeSignals.layoutWidth} * ${c.sizeSignals.layoutHeight}))`},{name:n.fits,update:`${n.fitsArea} && length(data(${JSON.stringify(n.rxc)})) > 0`},{name:n.colCount,update:`${n.fits} ? data(${JSON.stringify(n.rxc)})[0].cols : ${n.growColCount}`},{name:n.cellWidth,update:`${n.fits} ? data(${JSON.stringify(n.rxc)})[0].cellw : ${n.growCellWidth}`},{name:n.cellHeight,update:`${n.fits} ? data(${JSON.stringify(n.rxc)})[0].cellh : ${ce.MinCellHeight}`}),NS(l.signals.plotHeightOut,"max",`(${n.cellHeight} * ceil(${n.dataLength} / ${n.colCount}))`),NS(l.signals.plotWidthOut,"max",`(${n.cellWidth} * ${n.colCount})`);let f=[n.cellHeight,ce.FacetPaddingTop,ce.FacetPaddingBottom].join(" - "),p=[n.cellWidth,ce.FacetPaddingLeft].join(" - "),h=Hn(c.offsets.x,`datum[${JSON.stringify(Ot.WrapCol)}] * ${n.cellWidth}`,ce.FacetPaddingLeft),m=Hn(c.offsets.y,`datum[${JSON.stringify(Ot.WrapRow)}] * ${n.cellHeight}`,ce.FacetPaddingTop),_={height:{signal:f},width:{signal:p},x:{signal:h},y:{signal:m}},E={x:h,y:m,h:f,w:p},v={style:"cell",name:i,type:"group",from:{data:n.rowColumnDataName},encode:{update:_}};Ja(l.markGroup,v);let y={layoutHeight:`(${n.cellHeight} - ${ce.FacetPaddingTop} - ${ce.FacetPaddingBottom})`,layoutWidth:`(${n.cellWidth} - ${ce.FacetPaddingLeft})`,colCount:n.colCount,rowCount:`ceil(${n.dataLength} / ${n.colCount})`};return s&&vje(v,y,o),{facetScope:v,sizeSignals:y,offsets:E}}},Oje={AggregateContainer:Nje,AggregateSquare:Aje,Band:Tje,Cross:Cje,Scatter:wje,Square:Ije,Stack:Rje,Strip:Pje,Treemap:Mje,Wrap:Lje},Bje=class{constructor(t,e){le(this,"globalSignals");this.props=t,this.specContext=e,this.globalSignals={facetAxesAdjustX:{name:ce.FacetAxesAdjustX,update:t.facetLayout&&t.collapseFacetAxes?eF.toString():"0"},facetAxesAdjustY:{name:ce.FacetAxesAdjustY,update:t.facetLayout&&t.collapseFacetAxes?tF.toString():"0"},minCellWidth:{name:ce.MinCellWidth,update:`${Pze}`},minCellHeight:{name:ce.MinCellHeight,update:`${Mze}`},plotOffsetLeft:{name:ce.PlotOffsetLeft,update:"0"},plotOffsetTop:{name:ce.PlotOffsetTop,update:"0"},plotOffsetBottom:{name:ce.PlotOffsetBottom,update:"0"},plotOffsetRight:{name:ce.PlotOffsetRight,update:"0"},plotHeightOut:{name:ce.PlotHeightOut,update:ce.PlotHeightIn},plotWidthOut:{name:ce.PlotWidthOut,update:ce.PlotWidthIn}}}validate(){let{specContext:t}=this,{specCapabilities:e}=this.props,{roles:n}=e,i=n.filter(s=>{switch(typeof s.allowNone){case"boolean":return!s.allowNone;case"undefined":return!0;case"function":return!s.allowNone(t)}}),a=n.filter(s=>s.excludeCategoric);return i.map(s=>t.specColumns[s.role]?null:`Field ${s.role} is required.`).concat(a.map(s=>t.specColumns[s.role]&&!t.specColumns[s.role].quantitative?`Field ${s.role} must be quantitative.`:null)).filter(Boolean)}build(){let{globalSignals:t,specContext:e}=this,{facetLayout:n,specCapabilities:i}=this.props,{insight:a,specColumns:o,specViewOptions:s}=e,l="data_source",{vegaSpec:c,groupMark:u}=this.initSpec(l),{topColorField:d,colorDataName:f}=_je({scope:c,dataName:l,specContext:e,scaleName:sue.Color,legendDataName:"data_legend",topLookupName:"data_topcolorlookup",colorReverseSignalName:ce.ColorReverse}),p=new Sje({dataName:f,markGroup:u,scope:c,signals:t});n&&(wa(c,{name:ce.FacetPaddingBottom,update:`${n.facetPadding.bottom}`},{name:ce.FacetPaddingLeft,update:`${n.facetPadding.left}`},{name:ce.FacetPaddingTop,update:`${n.facetPadding.top}`}),t.plotOffsetTop.update=`${n.plotPadding.y}`,t.plotOffsetRight.update=`${n.plotPadding.x}`);let{firstScope:h,finalScope:m,specResult:_,allGlobalScales:E,allEncodingRules:v}=this.iterateLayouts(p,(y,x)=>{n&&y===0&&(p.zSize=x.offsets.h)});if(_)return _;if(E.length>0){let y=t.plotHeightOut.name,x=t.plotWidthOut.name,S={type:"linear",name:"scale_facet_col_title",domain:[0,1],range:[0,{signal:x}]},N={type:"linear",name:"scale_facet_row_title",domain:[0,1],range:[{signal:y},0]},w=n?yje({globalScope:p.scope,plotScope:u,facetScope:h,colTitleScale:S,rowTitleScale:N,colSeqName:"data_FacetCellColTitles",rowSeqName:"data_FacetCellRowTitles"}):{main:[{scope:u,lines:!0,labels:!0,title:!0}]};sje({globalScope:p,allGlobalScales:E,axisScales:this.props.axisScales,plotOffsetSignals:{x:t.plotOffsetLeft,y:t.plotOffsetBottom},axesOffsets:{x:Uze,y:Vze},axesTitlePadding:n?{x:kze,y:Gze}:{x:Dze,y:Fze},labelBaseline:{x:"top",y:"middle"},specColumns:o,specViewOptions:s,axesScopes:w,hideZAxis:!!n,view:a.view})}if(m.mark){let{update:y}=m.mark.encode,x="output";m.mark.from.data=x,Ya(p.markGroup,{name:x,source:p.markDataName,transform:[{type:"formula",expr:m.offsets.x,as:Ot.OffsetX},{type:"formula",expr:m.offsets.y,as:Ot.OffsetY}]}),y.x={field:Ot.OffsetX},y.y={field:Ot.OffsetY},v.forEach(S=>{for(let N in S)if(y[N]){let w=S[N];if(Array.isArray(y[N])){let T=y[N];w.forEach(I=>T.unshift(I))}else{let T=y[N],I=[];y[N]=I,w.forEach(R=>I.push(R)),I.push(T)}}}),y.fill=xje(e,d,sue.Color),y.opacity=bje(e)}return{specCapabilities:i,vegaSpec:c}}initSpec(t){let{globalSignals:e}=this,{facetAxesAdjustX:n,facetAxesAdjustY:i,minCellWidth:a,minCellHeight:o,plotOffsetLeft:s,plotOffsetBottom:l,plotOffsetTop:c,plotOffsetRight:u,plotHeightOut:d,plotWidthOut:f}=e,{specContext:p}=this,{insight:h}=p,m={type:"group",encode:{update:{x:{signal:`${ce.PlotOffsetLeft} - ${ce.FacetAxesAdjustX}`},y:{signal:ce.PlotOffsetTop},height:{signal:`${ce.PlotHeightOut} - ${ce.FacetAxesAdjustY}`},width:{signal:`${ce.PlotWidthOut} + ${ce.FacetAxesAdjustX}`}}}},_="input";return{vegaSpec:{$schema:"https://vega.github.io/schema/vega/v5.json",data:[{name:_},{name:t,source:_,transform:[]}],marks:[m],signals:dje(p,ce.ViewportHeight).concat([a,o,{name:ce.ViewportHeight,update:`max(${ce.MinCellHeight}, ${h.size.height})`},{name:ce.ViewportWidth,update:`max(${ce.MinCellWidth}, ${h.size.width})`},s,c,l,u,n,i,{name:ce.PlotHeightIn,update:`${ce.ViewportHeight} - ${ce.PlotOffsetBottom} + ${ce.FacetAxesAdjustY}`},{name:ce.PlotWidthIn,update:`${ce.ViewportWidth} - ${ce.PlotOffsetLeft} - ${ce.PlotOffsetRight}`},d,f,{name:"height",update:`${ce.PlotOffsetTop} + ${ce.PlotHeightOut} + ${ce.PlotOffsetBottom} - ${ce.FacetAxesAdjustY}`},{name:"width",update:`${ce.PlotWidthOut} + ${ce.PlotOffsetLeft} + ${ce.PlotOffsetRight}`}])},groupMark:m}}iterateLayouts(t,e){let n,i={sizeSignals:t.sizeSignals,offsets:t.offsets},a,o,s=[],{layouts:l,specCapabilities:c}=this.props,u=[],d=[];for(let f=0;f<l.length;f++){if(!i)continue;let p={globalScope:t,parentScope:i,axesScales:this.props.axisScales,groupings:s,id:f},h=this.createLayout(l[f],p);try{o=h.build(),o.id=f;let m=h.getGrouping();m&&s.push({id:f,groupby:m,fieldOps:[{field:null,op:"count",as:Ot.Count}]});let _=h.getAggregateSumOp();_&&s[s.length-1].fieldOps.push(_),e(f,o)}catch(m){n={errors:[m.stack],specCapabilities:c,vegaSpec:null};break}o&&o.globalScales&&u.push(o.globalScales),o.encodingRuleMap&&d.push(o.encodingRuleMap),f===0&&(a=o),i=o}return{firstScope:a,finalScope:i,specResult:n,allGlobalScales:u,allEncodingRules:d}}createLayout(t,e){let{layoutType:n,props:i}=t,a={...i,...e},o=Oje[n],s=new o(a);return s.id=e.id,s}};function Dje(t,e){let{specColumns:n}=t,i=[n.color,n.facet,n.facetV,n.group,n.size,n.sort,n.x,n.y,n.z];wue(i,e);let a=Jze(t),o=new Bje(a,t),s;if(o){try{let l=o.validate();l.length?s={errors:l,specCapabilities:a.specCapabilities,vegaSpec:null}:s=o.build()}catch(l){s={specCapabilities:null,vegaSpec:null,errors:[l.stack]}}if(!s.errors){let l=s.vegaSpec.data[0];l.values=e}}else s={specCapabilities:null,vegaSpec:null,errors:[`could not build spec for ${t.insight.chart}`]};return s}var hue="GL_ORDINAL";function Fje(t,e,n){let i=t.uid&&t.uid.name;return n?e.forEach((a,o)=>{let s=i?a[i]:o;a[hue]=n[s]}):(n={},e.forEach((a,o)=>{a[hue]=o;let s=i?a[i]:o;n[s]=o})),n}var kje=1010;function Gje(t,e,n={},i=Ize){try{let f=fg({$schema:"https://vega.github.io/schema/vega/v4.json",data:[{name:"source",values:e,transform:t.transform}]})}catch(f){console.log("transform error:"),console.log(f)}let a=eje(RI,e,n.columnTypes),o=tje(t,a),s=Fje(o,e,n.ordinalMap),l=e,c={specColumns:o,insight:t,specViewOptions:{...i,zAxisOptions:{showZAxis:!0,zIndex:kje}}},u=Dje(c,l);return{ordinalMap:s,specResult:u}}var Uje={gwpTotal:"GWP Total Kg CO2e"};function Vje(t,e,n,i){t.chart=t.chart||{x:"component",y:"amount"};let a=t.chart.vegaType||"barchart";return a==="donutchart"?$je(t,e,n,i):a==="stackedbarchart"?jje(t,e,n,i):zje(t,e,n,i)}function $je(t,e,n,i){let a=t.chart||{},o=e.reduce((c,u)=>(u[a.y]&&u[a.x]&&c.push({id:u.versionUri,name:u.name,value:u[a.y],category:u[a.x]||"unknown"}),c),[]),s="m3";return!o||o.length===0?(console.warn("no values found when generating donut chart"),null):{$schema:"https://vega.github.io/schema/vega/v5.json",description:"A basic donut chart example.",width:n,height:i,autosize:"none",signals:[{name:"startAngle",value:0},{name:"endAngle",value:6.29},{name:"padAngle",value:0},{name:"innerRadius",value:n/4},{name:"cornerRadius",value:0},{name:"sort",value:!1},{name:"textOffset",update:"width / 8"}],data:[{name:"source",values:o},{name:"aggregated",source:"source",transform:[{type:"aggregate",groupby:["category"],fields:["value"],ops:["sum"],as:["total_value"]}]},{name:"pie",source:"aggregated",transform:[{type:"pie",field:"total_value",startAngle:0,endAngle:6.29,sort:!1},{type:"formula",expr:"round(datum.total_value * 100) / 100",as:"rounded_total_value"}]}],scales:[{name:"color",type:"ordinal",domain:{data:"source",field:"category"},scheme:a.scheme||"tableau20"}],marks:[{type:"arc",from:{data:"pie"},encode:{enter:{fill:{scale:"color",field:"category"},x:{signal:"width / 2"},y:{signal:"height / 2"}},update:{startAngle:{field:"startAngle"},endAngle:{field:"endAngle"},padAngle:{signal:"padAngle"},innerRadius:{signal:"innerRadius"},outerRadius:{signal:"width / 2"},cornerRadius:{signal:"cornerRadius"}}}},{type:"text",from:{data:"pie"},encode:{enter:{x:{signal:"width / 2  + (innerRadius + textOffset) * cos((datum.startAngle + datum.endAngle) / 2 - PI/2)"},y:{signal:"height / 2  + (innerRadius + textOffset) * sin((datum.startAngle + datum.endAngle) / 2 - PI/2)"},align:{value:"center"},baseline:{value:"middle"},fill:{value:"black"},text:{signal:`datum.category + ": " + datum.rounded_total_value + " ${s}"`}}}}]}}function zje(t,e,n,i){let a=t.chart||{},o=e.reduce((l,c)=>(c[a.y]&&c[a.x]&&l.push({id:c.versionUri,name:c.name,value:c[a.y],category:c[a.x]||"unknown"}),l),[]);return{$schema:"https://vega.github.io/schema/vega/v5.json",description:"A bar chart from bucket results",width:n,height:i,data:[{name:"source",values:o},{name:"aggregated",source:"source",transform:[{type:"aggregate",groupby:["category"],fields:["value"],ops:["sum"],as:["total_value"]}]}],scales:[{name:"xscale",type:"band",domain:{data:"aggregated",field:"category"},range:"width",padding:.1},{name:"yscale",domain:{data:"aggregated",field:"total_value"},nice:!0,range:"height"},{name:"color",type:"ordinal",domain:{data:"aggregated",field:"category"},scheme:a.scheme||"tableau20"}],axes:[{orient:"bottom",scale:"xscale"},{orient:"left",scale:"yscale"}],marks:[{type:"group",marks:[{type:"rect",from:{data:"aggregated"},encode:{enter:{fill:{scale:"color",field:"category"},x:{scale:"xscale",field:"category"},width:{scale:"xscale",band:1},y:{scale:"yscale",field:"total_value"},y2:{scale:"yscale",value:0}}}}]}]}}function jje(t,e,n,i){let a=t.chart||{},o=a.stackedPropertyKeys||[a.z],s=e.reduce((c,u)=>{for(let d of o)u[d]&&u[a.y]&&u[a.x]&&c.push({id:u.versionUri,name:u.name,c:u[d],y:u[a.y],x:u[a.x]||"unknown"});return c},[]);return{$schema:"https://vega.github.io/schema/vega/v5.json",description:"A basic stacked bar chart example.",width:n,height:i,padding:5,data:[{name:"table",values:s,transform:[{type:"stack",groupby:["x"],sort:{field:"x"},field:"y"}]}],scales:[{name:"x",type:"band",range:"width",domain:{data:"table",field:"x"},padding:.5},{name:"y",type:"linear",range:"height",nice:!0,zero:!0,domain:{data:"table",field:"y1"}},{name:"color",type:"ordinal",domain:{data:"table",field:"c"},scheme:a.scheme||"tableau20"}],axes:[{orient:"bottom",scale:"x",zindex:1,labelPadding:50,labelAngle:45,labelAlign:"left",labelBaseline:"middle",tickSize:n/50,offset:n/50},{orient:"left",scale:"y",zindex:1,title:Uje[a.y]||a.y,titlePadding:50,labelAlign:"right",labelBaseline:"bottom",labelAngle:0}],marks:[{type:"rect",from:{data:"table"},encode:{enter:{x:{scale:"x",field:"x"},width:{scale:"x",band:1,offset:-1},y:{scale:"y",field:"y0"},y2:{scale:"y",field:"y1"},fill:{scale:"color",field:"c"}},update:{fillOpacity:{value:1}},hover:{fillOpacity:{value:.5}}}}]}}function Hje({visibleLines:t,layout:e,interactionManager:n,parentNode:i,viewId:a}){var f;let o={getPosition:e.updateTriggers.nodePositionChange,getColor:e.updateTriggers.nodeFillColorChange},s=((f=i.appearance)==null?void 0:f.position)||[Ia/2,Ia/2,0],l=s[0],c=s[1],u=s[2],d=Pe.nodePropsToVersionUri(i);return new Sl({id:`${a}-${d}-node-chart-lines`,data:t,widthUnits:"pixels",coordinateSystem:_t.CARTESIAN,getSourcePosition:p=>[p.sourcePosition[0]+l,p.sourcePosition[1]+c,p.sourcePosition[2]+u],getTargetPosition:p=>[p.targetPosition[0]+l,p.targetPosition[1]+c,p.targetPosition[2]+u],getColor:p=>p.color,getWidth:p=>p.strokeWidth,updateTriggers:o})}function Wje({visibleText:t,layout:e,interactionManager:n,parentNode:i,viewId:a}){var f;let o={getPosition:e.updateTriggers.nodePositionChange,getColor:e.updateTriggers.nodeFillColorChange},s=((f=i.appearance)==null?void 0:f.position)||[Ia/2,Ia/2,0],l=s[0],c=s[1],u=s[2],d=Pe.nodePropsToVersionUri(i);return new fa({id:`${a}-${d}-node-chart-texts`,data:t,getPosition:p=>{let h=p.position;return[h[0]+l,h[1]+c,h[2]+u]},getTextAnchor:p=>p.textAnchor,getText:p=>p.text,getAngle:p=>p.angle,getSize:p=>13,getColor:p=>p.color,billboard:!0,sizeUnits:"pixels",characterSet:"auto",fontFamily:"Manrope",sizeMaxPixels:20,sizeMinPixels:10,maxWidth:20,getAlignmentBaseline:"center",updateTriggers:o})}var mF=class extends CS{constructor(){super(...arguments);le(this,"stage")}applyNodeProps(e,n,i){if(n.length!==1)return console.log("need to be one nodeProps for chart layout - the parent node merged with original node"),[];if(i.length===0)return console.log("need to have cached segments"),[];let a=n[0],o=this.setCubeCache(a,i);return super.applyNodeProps(this.nodes,[...o.values()],null)}setCubeCache(e,n){var _;let i=Pe.nodePropsToVersionUri(e),a=Zje(e,n);if(!a){console.log("no vega spec",a);return}a.autosize="none";let o=new dv(fg(a),{renderer:"none"});o.run();let s={cubeData:[],pathData:[],polygonData:[],axes:{x:[],y:[],z:[]},axesTextData:[],axesLines:[],gridLines:[],textData:[],legend:{rows:{}},facets:[]},l=o.scenegraph().root;if(!l){console.log("scene is not rendered yet");return}let c={},u={maxOrdinal:0,currAxis:null,defaultCubeColor:null,assignCubeOrdinal:()=>u.maxOrdinal++,zAxisZindex:c==null?void 0:c.zAxisZindex},[d,f]=((_=e.appearance)==null?void 0:_.size)||[Ca,Ca];_ze(u,s,l),this.stage=s;let p=d/2*-1,h=f/2;this.setAxesTextAndLines(s,p,h),this.adjustPositions(s,p,h);let m=[];for(let E of s.cubeData){let v=[E.position[0]-d/2,E.position[1]+f/2,E.position[2]],y={...e,ordinal:E.ordinal,appearance:{...e.appearance,position:v,scale:E.size,fillColor:E.color}},x=Pe.nodePropsToVersionUri(y);y.versionUri=x,this.nodes.set(x,y),m.push(y)}return m}setAxesTextAndLines(e,n,i){let a=[],o=[],{x:s,y:l,z:c}=e.axes;s&&l&&c&&[s,l,c].forEach(u=>{u.forEach(d=>{if(d.domain){let f=d.domain;f.sourcePosition[0]+=n,f.sourcePosition[1]+=i,f.targetPosition[0]+=n,f.targetPosition[1]+=i,a.push(f)}if(d.ticks)for(let f=0;f<d.ticks.length;f++){let p=d.ticks[f];p.sourcePosition[0]+=n,p.sourcePosition[1]+=i,p.targetPosition[0]+=n,p.targetPosition[1]+=i,a.push(p)}if(d.tickText){for(let f=0;f<d.tickText.length;f++){let p=d.tickText[f];p.position[0]=p.position[0]+n,p.position[1]=p.position[1]+i}o.push(...d.tickText)}d.title&&(d.title.position[0]+=n,d.title.position[1]+=i,o.push(d.title))})}),e.axesTextData=o,e.axesLines=a}adjustPositions(e,n,i){e.textData.forEach(a=>{a.position[0]=a.position[0]-n,a.position[1]=a.position[1]-i})}getLayers(e,n,i){if(!this.stage)return console.log("no stage in chart layout"),[];let a=[],o=[...this.stage.gridLines,...this.stage.axesLines],s=[...this.stage.textData,...this.stage.axesTextData],l=Hje({visibleLines:o,layout:this,interactionManager:e,parentNode:n,viewId:i});l&&a.push(l);let c=this.getVisibleNodes(),u=Aze({visibleNodes:c,layout:this,interactionManager:e,parentNode:n,viewId:i});a.push(u);let d=Wje({visibleText:s,layout:this,interactionManager:e,parentNode:n,viewId:i});return d&&a.push(d),a}};function Zje(t,e){var s;let[n,i]=((s=t.appearance)==null?void 0:s.size)||[Ca,Ca],a,o;try{if(t.layoutKey==="cubes"){let l=Xje(t.chart||{});l.size.width=l.size.width||n,l.size.height=l.size.height||i,o=Gje(l,e),a=o.specResult.vegaSpec}else t.chart=t.chart||{x:"component",y:"volume"},a=Vje(t,e,n,i)}catch(l){console.error("error getting vega spec",l);return}if(!a){console.error("no vega spec",o);return}return a}function Xje(t){let{chart:e=$u.chart,height:n,width:i,view:a,facetStyle:o,totalStyle:s,colorBin:l,scheme:c,uid:u,x:d=$u.x,y:f=$u.y,z:p=$u.z,group:h,color:m=$u.color,sort:_,facet:E,facetV:v,...y}=t;return{chart:e,size:{width:i||0,height:n||0},columns:{uid:u,x:d,y:f,z:p,group:h,color:m,sort:_,facet:E,facetV:v},scheme:c||"tableau20",facetStyle:o,totalStyle:s,colorBin:l,view:a}}var Fue=class extends CS{getView({nodeProps:t,interactionMode:e,disableController:n,orthographic:i}){let{viewX:a,viewY:o,width:s,height:l,paddingLeft:c,paddingBottom:u,paddingRight:d,paddingTop:f}=this.cameraFrame,p=Pe.nodePropsToUri(t);return new xc({id:p,width:s,height:l,x:a,y:o,padding:{left:c||0,bottom:u||0,right:d||0,top:f||0},controller:n?!1:{dragMode:"rotate",dragPan:e==="panning",dragRotate:!0,inertia:!1,doubleClickZoom:!1,scrollZoom:n?null:{speed:.01,smooth:!0}},orthographic:!1,clear:!0})}getLayers(t,e,n){let{key:i,type:a,namespace:o,timing:s,appearance:l}=e,u=[{key:i,type:a,namespace:o,timing:s,appearance:{...l,position:[0,0,0]}}],d=[],f=Sue({visibleNodes:u,layout:this,interactionManager:t,viewId:n});return d.push(...f),d}},kue=class extends CS{getLayers(t,e,n){return[]}};function Gue(t,e,n,i,a){if(!t[0]&&t[0]!==0||!t[1]&&t[1]!==0)return null;if(a===t9||a===O2){let s=(e[0]||e[1])/4;return Kje(s,t)}let o=0;return Yje(e[0]-o*2,e[1]-o*2,t,n).map(([s,l])=>[s,l,i||0])}function Kje(t,e,n=32){let[i,a]=e,o=[];for(let s=0;s<=n;s++){let l=s/n*2*Math.PI,c=i+t*Math.cos(l),u=a+t*Math.sin(l);o.push([c,u])}return o}function Yje(t,e,n,i,a=0,o=6){let s=(t+a*2)/2-i,l=(e+a*2)/2-i,[c,u]=n,d=[];for(let f=0;f<=o;f++){let p=f/o*Math.PI/2,h=c+s+i*Math.sin(p),m=u-l-i*Math.cos(p);d.push([h,m])}for(let f=0;f<=o;f++){let p=f/o*Math.PI/2,h=c+s+i*Math.cos(p),m=u+l+i*Math.sin(p);d.push([h,m])}for(let f=0;f<=o;f++){let p=f/o*Math.PI/2,h=c-s-i*Math.sin(p),m=u+l+i*Math.cos(p);d.push([h,m])}for(let f=0;f<=o;f++){let p=f/o*Math.PI/2,h=c-s-i*Math.cos(p),m=u-l-i*Math.sin(p);d.push([h,m])}return d.push(d[0]),d}function Nv(t,e,n){return t<e?e:t>n?n:t}function Uue(t,e,n,i){let a=(e==null?void 0:e[0])||0,o=(e==null?void 0:e[1])||0,s=(n==null?void 0:n[0])||0,l=(n==null?void 0:n[1])||0;if(!a||!o||!s||!l){console.warn("Invalid start values for resize, look into this");return}let c=s,u=l,d=a,f=o,p=[d,f];if(!p)return;let h=d-c/2,m=d+c/2,_=f-u/2,E=f+u/2,v=[h,_,m,E],y=t;y[0]===-1&&y[1]===-1&&(v[0]=i[0],v[1]=i[1]),y[0]===1&&y[1]===-1&&(v[2]=i[0],v[1]=i[1]),y[0]===1&&y[1]===1&&(v[2]=i[0],v[3]=i[1]),y[0]===-1&&y[1]===1&&(v[0]=i[0],v[3]=i[1]),c=Nv(v[2]-v[0],16,1024),u=Nv(v[3]-v[1],16,1024);let x=Nv(p[0],v[0]+c/2,v[2]-c/2),S=Nv(p[1],v[1]+u/2,v[3]-u/2);return p=[x,S],{position:[p[0],p[1],0],size:[c,u]}}var IS=class{constructor({viewport:e}){le(this,"viewport");le(this,"viewportInteractionState",null);le(this,"disableController",!1);le(this,"nodeSelectionColors",{});le(this,"edgeSelectionColors",{});le(this,"nodeInteractionStates",{});le(this,"edgeInteractionStates",{});le(this,"preventClickFlag",!1);le(this,"doubleClickTimeout");le(this,"dragNode",null);le(this,"lastDragNodeCoord",null);le(this,"hoverNode",null);le(this,"hoverEdge",null);le(this,"connectionStartNode",null);le(this,"initialConnectionHandles",[]);le(this,"sourceConnectionHandles",[]);le(this,"targetNodeConnectionHandles",[]);le(this,"mouseConnectionHandle",null);le(this,"dragConnectionHandle",null);le(this,"connectionHandleDragInfo",null);le(this,"temporaryEdge",[]);le(this,"temporaryConnectionEdgeHandles",[]);le(this,"temporaryConnectionEdgeType","curve");le(this,"hasPotentialConnection",!1);le(this,"resizeNode",null);le(this,"resizePolygon",null);le(this,"hoverResizeHandle",null);le(this,"disableViewportInteraction",()=>{this.disableController=!0,this.viewport.update()});le(this,"enableViewportInteraction",()=>{this.disableController=!1,this.viewport.update()});le(this,"onNodeDragStart",(e,n)=>(this.lastDragNodeCoord=e,this.dragNode=n,this.viewport.emit("node:dragstart",n),this.disableViewportInteraction(),!0));le(this,"onNodeDrag",(e,n)=>{if(!e||!this.dragNode)return;let i=[e[0]-this.lastDragNodeCoord[0],e[1]-this.lastDragNodeCoord[1]];this.lastDragNodeCoord=e,this.createInitialConnectionHandles(),this.viewport.emit("node:drag",{node:this.dragNode,offset:i})});le(this,"onNodeDragEnd",()=>{this.viewport.emit("node:dragend",this.dragNode),this.dragNode=null,this.lastDragNodeCoord=null,this.enableViewportInteraction()});le(this,"onNodeClick",e=>{this.viewport.emit("node:click",e)});le(this,"onEdgeClick",e=>{this.viewport.emit("edge:click",e)});le(this,"onResizeHandleDragStart",(e,n)=>(this.disableViewportInteraction(),(this.resizeNode.layoutKey==="map"||this.resizeNode.layoutKey==="gltf")&&this.viewport.activateView(this.resizeNode),!0));le(this,"onResizeHandleDrag",({coordinate:e,resizeHandle:n})=>{let{resizeNode:i,direction:a}=n,{appearance:o,key:s,namespace:l,type:c,timing:u,boardId:d}=i,f=[e[0],e[1],o.position[2]],{position:p,size:h}=Uue(a,o.position,o.size,f),m={key:s,namespace:l,type:c,timing:u,boardId:d,appearance:{position:p,size:h}};this.createInitialConnectionHandles(),this.viewport.updateNodeViewFromUserInteraction(i,{}),this.viewport.emit("node:resize",{change:m})});le(this,"onResizeHandleDragEnd",()=>{var e,n;(((e=this.resizeNode)==null?void 0:e.layoutKey)==="map"||((n=this.resizeNode)==null?void 0:n.layoutKey)==="gltf")&&this.viewport.deactivateViews(),this.enableViewportInteraction()});le(this,"createInitialConnectionHandles",()=>{if(!this.connectionStartNode){this.initialConnectionHandles=[];return}let{position:e,size:n}=this.viewport.boardLayout.getNodeFrame(this.connectionStartNode)||{};if(!e||!n)return;let i="initial-handle",a=Pe.nodePropsToVersionUri(this.connectionStartNode),o=Math.max(n[0],n[1])/10;this.initialConnectionHandles=[{...this.connectionStartNode,handleType:i,versionUri:a,direction:[-1,0],handlePosition:[e[0]-n[0]/2-o,e[1],0]},{...this.connectionStartNode,handleType:i,versionUri:a,direction:[0,1],handlePosition:[e[0],e[1]+n[1]/2+o,0]},{...this.connectionStartNode,handleType:i,versionUri:a,direction:[1,0],handlePosition:[e[0]+n[0]/2+o,e[1],0]},{...this.connectionStartNode,handleType:i,versionUri:a,direction:[0,-1],handlePosition:[e[0],e[1]-n[1]/2-o,0]}]});le(this,"onConnectionHandleDragStart",(e,n)=>{this.connectionHandleDragInfo={startCoord:e},this.dragConnectionHandle=n,this.viewport.setNodeInteractionState(n.key,"dragging"),this.disableViewportInteraction(),this.targetNodeConnectionHandles=this.createTargetConnectionHandles(this.connectionStartNode);let i=this.viewport.boardLayout.getNodeFrame(this.connectionStartNode);return this.sourceConnectionHandles=this.createNodePropsConnectionHandles({...this.connectionStartNode,appearance:i},"source-handle"),this.initialConnectionHandles=[],this.viewport.boardLayout.updateTriggers.connectionHandlesChange=Date.now(),!0});le(this,"onConnectionHandleDrag",(e,n)=>{if(!this.dragConnectionHandle)return;let i=[...this.targetNodeConnectionHandles],a=this.connectionStartNode,o=30,s=this.findNearestConnectionHandle(...n,o),l=(s==null?void 0:s.versionUri)===a.versionUri,c=[e[0],e[1],0],u=this.sourceConnectionHandles.reduce((m,_)=>{let E=Math.sqrt(Math.pow(m.handlePosition[0]-e[0],2)+Math.pow(m.handlePosition[1]-e[1],2)),v=Math.sqrt(Math.pow(_.handlePosition[0]-e[0],2)+Math.pow(_.handlePosition[1]-e[1],2));return E<v?m:_}),d=i.length>0?i.reduce((m,_)=>{let E=Math.sqrt(Math.pow(m.handlePosition[0]-c[0],2)+Math.pow(m.handlePosition[1]-c[1],2)),v=Math.sqrt(Math.pow(_.handlePosition[0]-c[0],2)+Math.pow(_.handlePosition[1]-c[1],2));return E<v?m:_}):null,f=d?Math.sqrt(Math.pow(d.handlePosition[0]-e[0],2)+Math.pow(d.handlePosition[1]-e[1],2)):null,p=u?Math.sqrt(Math.pow(u.handlePosition[0]-e[0],2)+Math.pow(u.handlePosition[1]-e[1],2)):null,h=f&&s&&!l;this.temporaryEdge[0]&&(this.viewport.setNodeInteractionState(this.temporaryEdge[0].versionUri,"default"),this.viewport.setNodeInteractionState(this.temporaryEdge[0].key,"default")),this.temporaryEdge[1]&&(this.viewport.setNodeInteractionState(this.temporaryEdge[1].versionUri,"default"),this.viewport.setNodeInteractionState(this.temporaryEdge[1].key,"default")),this.mouseConnectionHandle={key:a.key,namespace:a.namespace,type:a.type,versionUri:a.versionUri,handleType:"initial-handle",direction:[0,0],handlePosition:[e[0],e[1],0]},this.temporaryEdge=[u,h?d:this.mouseConnectionHandle],h&&(this.viewport.setNodeInteractionState(this.temporaryEdge[0].key,"hover"),this.viewport.setNodeInteractionState(this.temporaryEdge[0].versionUri,"hover"),this.viewport.setNodeInteractionState(this.temporaryEdge[1].key,"hover"),this.viewport.setNodeInteractionState(this.temporaryEdge[1].versionUri,"hover")),this.connectionHandleDragInfo.nearestNode=s,this.connectionHandleDragInfo.startNode=a,this.connectionHandleDragInfo.distanceToNearestEndHandle=f,this.connectionHandleDragInfo.distanceToStartHandle=p,this.connectionHandleDragInfo.hasPotentialConnection=h,this.connectionHandleDragInfo.nearestNodeIsStartNode=l,this.connectionHandleDragInfo.lastCoord=e,this.viewport.boardLayout.updateTriggers.connectionHandlesChange=Date.now(),this.viewport.update()});le(this,"onConnectionHandleDragEnd",(e=!1)=>{let{hasPotentialConnection:n,distanceToStartHandle:i,startNode:a,nearestNode:o}=this.connectionHandleDragInfo,s=Ca;if(this.temporaryEdge.length===2&&n){let l=this.temporaryEdge[0],c=this.temporaryEdge[1],u=l.appearance.position,d=c.appearance.position,f=u[0]>d[0]?Is:$o;(a==null?void 0:a.type)===e9&&(f=Sp),l.relations=l.relations||{},l.relations[f]=l.relations[f]||[],l.relations[f].push(Pe.nodePropsToUri(c)),e||this.viewport.emit("connection:nodes",l)}else if(this.temporaryEdge[0]&&this.mouseConnectionHandle&&i>s/2){let l=Pe.nodePropsToUri(this.temporaryEdge[0]);this.viewport.emit("connection:bucket",{fromUri:l,toCoord:this.connectionHandleDragInfo.lastCoord})}this.temporaryEdge[0]&&(this.viewport.setNodeInteractionState(this.temporaryEdge[0].versionUri,"default"),this.viewport.setNodeInteractionState(this.temporaryEdge[0].key,"default")),this.temporaryEdge[1]&&(this.viewport.setNodeInteractionState(this.temporaryEdge[1].versionUri,"default"),this.viewport.setNodeInteractionState(this.temporaryEdge[1].key,"default")),this.temporaryEdge=[],this.sourceConnectionHandles=[],this.dragConnectionHandle=null,this.mouseConnectionHandle=null,this.targetNodeConnectionHandles=[],this.connectionHandleDragInfo=null,this.viewport.setInteractionMode("panning"),this.enableViewportInteraction(),this.viewport.boardLayout.updateTriggers.connectionHandlesChange=Date.now(),this.viewport.update()});le(this,"createNodePropsConnectionHandles",(e,n="initial-handle")=>{let i=Pe.nodePropsToVersionUri(e),a=e.appearance.position,o=e.appearance.size;return[{...e,handleType:n,versionUri:i,direction:[-1,0],handlePosition:[a[0]-o[0]/2,a[1],0]},{...e,handleType:n,versionUri:i,direction:[0,1],handlePosition:[a[0],a[1]+o[1]/2,0]},{...e,handleType:n,versionUri:i,direction:[1,0],handlePosition:[a[0]+o[0]/2,a[1],0]},{...e,handleType:n,versionUri:i,direction:[0,-1],handlePosition:[a[0],a[1]-o[1]/2,0]}]});le(this,"createTargetConnectionHandles",e=>[]);le(this,"findNearestConnectionHandle",(e,n,i)=>{let a=this.viewport.deck.pickObject({x:e,y:n,radius:i,layerIds:[this.viewport.boardLayout.getLayerId(oF)],unproject3D:!0});return a!=null&&a.object?a.object:null});this.viewport=e,this.getCursor=this.getCursor.bind(this)}setResizeNode(e){if(e&&e.appearance&&e.appearance.position&&e.appearance.size){this.resizeNode=e;let{size:n,position:i}=e.appearance,a=Math.min(n[0],n[1]),o=this.viewport.getDefaultNodeSize(),s=vr(a/8,o/8,o/8);this.resizePolygon=Gue([i[0],i[1]],n,s)}else this.resizeNode=null,this.resizePolygon=null}setConnectionNode(e){this.connectionStartNode=e,this.createInitialConnectionHandles()}setNodeSelectionColors(e){let n=Object.keys(this.nodeSelectionColors).filter(a=>!e[a]),i=Object.keys(e).filter(a=>e[a]);for(let a of n){delete this.nodeSelectionColors[a];let o=Pe.versionUriToNodeUri(a);this.viewport.nodeViewLayouts[o]&&this.viewport.nodeViewLayouts[o].viewIsActive()&&this.viewport.emitSnapshot(o)}for(let a of i)this.nodeSelectionColors[a]=e[a]}setEdgeSelectionColors(e){this.edgeSelectionColors={...this.edgeSelectionColors,...e}}getCursor({isDragging:e,isHovering:n}){if(this.hoverResizeHandle){let i=this.hoverResizeHandle.direction;if(i[0]===-1&&i[1]===-1)return"nesw-resize";if(i[0]===1&&i[1]===-1)return"nwse-resize";if(i[0]===1&&i[1]===1)return"nesw-resize";if(i[0]===-1&&i[1]===1)return"nwse-resize"}return this.dragNode||e?"grabbing":this.hoverEdge||this.hoverNode?"pointer":"grab"}getNodeInteractionState(e){return this.nodeInteractionStates[e]||"default"}setNodeInteractionState(e,n){this.nodeInteractionStates[e]=n}setEdgeInteractionState(e,n){this.edgeInteractionStates[e]=n}onNodeEnter(e){return this.hoverNode&&(this.setNodeInteractionState(this.hoverNode.versionUri,"default"),this.hoverNode=null),this.setNodeInteractionState(e.versionUri,"hover"),this.hoverNode=e,this.viewport.update(),!0}onNodeLeave(){return this.hoverNode&&(this.setNodeInteractionState(this.hoverNode.versionUri,"default"),this.hoverNode=null),this.viewport.update(),!0}onEdgeEnter(e){return this.setEdgeInteractionState(e.edgeId,"hover"),this.hoverEdge=e,this.viewport.update(),!0}onEdgeLeave(){return this.hoverEdge&&(this.setEdgeInteractionState(this.hoverEdge.edgeId,"default"),this.hoverEdge=null),this.viewport.update(),!0}onResizeHandleEnter(e){return this.hoverResizeHandle||(this.hoverResizeHandle=e,this.viewport.update(),this.viewport.emit("resizehandle:enter",e)),!0}onResizeHandleLeave(){return this.hoverResizeHandle&&(this.hoverResizeHandle=null,this.viewport.update(),this.viewport.emit("resizehandle:leave")),!0}getConnectionHandles(){return[...this.sourceConnectionHandles||[],...this.targetNodeConnectionHandles||[],...this.initialConnectionHandles||[]]}};function Vue(t,e){let n;return function(...a){let o=()=>{clearTimeout(n),t(...a)};clearTimeout(n),n=setTimeout(o,e)}}var Jje=!0,gF={manual:dF,cubes:mF,vega:mF,image:kue,gltf:Fue},RS=class extends G2{constructor(n){var h,m,_,E,v,y,x,S,N,w;super();le(this,"props");le(this,"deck");le(this,"canvas");le(this,"boardLayout");le(this,"nodeViewLayouts",{});le(this,"nodes",new Map);le(this,"projectNode");le(this,"timeline");le(this,"interactionManager");le(this,"interactionMode","panning");le(this,"shouldAnimate",!1);le(this,"videoCapture");le(this,"presenting",!1);le(this,"cubeCache",new Map);le(this,"selectedVersionUriCache",[]);le(this,"emitSnapshot",Vue(n=>{this.snapshot(n),this.update()},1e3));le(this,"downloadNodes",(n,i,a="json",o)=>{let s=o||[],l=s.reduce((p,h)=>(p[h]=!0,p),{}),c=i.map(p=>{let h=p,m={};for(let _ of Object.keys(h))s.length&&!l[_]||(m[_]=h[_]);return m}),u,d;if(a==="csv"){let p=c.map(h=>{let m={};for(let _ of Object.keys(h))typeof h[_]=="object"?h[_]instanceof Array&&h[_].length>0?(h[_][0].type==="Property"&&(m[_]=h[_].map(E=>E.value).join(" ")),h[_][0].type==="Relation"?m[_]=h[_].map(E=>E.object).join(" "):m[_]=h[_].join(" ")):h[_].type==="Property"&&(m[_]=h[_].value):m[_]=h[_]||" ";return m});u=`${n}.csv`,d=LZ(p,o)}else u=`${n}.json`,d=JSON.stringify(c);let f=document.createElement("a");f.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(d)),f.setAttribute("download",u),f.style.display="none",document.body.appendChild(f),f.click(),document.body.removeChild(f)});let{interactionMode:i,debug:a,projectNode:o,presenting:s,...l}=n,{projectNode:c,...u}=OZ,d=Object.assign({width:window.innerWidth,height:window.innerHeight},u,l,{onLoad:this.onLoad.bind(this),onError:T=>{n.onContextLost&&n.onContextLost(T)},getTooltip:null,debug:Jje||a||!1});this.props=d,this.presenting=s||!1,i&&(this.interactionMode=i),this.timeline=new hq;let f=(h=o.appearance)!=null&&h.position?[...o.appearance.position]:[Ia/2,Ia/2,0],p={position:f,target:f,zoom:((m=o.appearance)==null?void 0:m.zoom)||gue,rotationOrbit:((_=o.appearance)==null?void 0:_.rotationOrbit)||0,rotationX:((E=o.appearance)==null?void 0:E.rotationX)||90,minZoom:((v=o.appearance)==null?void 0:v.minZoom)||nF,maxZoom:((y=o.appearance)==null?void 0:y.maxZoom)||_ue,backgroundColor:((x=o.appearance)==null?void 0:x.backgroundColor)||sF,viewX:((S=o.appearance)==null?void 0:S.viewX)||0,viewY:((N=o.appearance)==null?void 0:N.viewY)||0,paddingLeft:((w=o.appearance)==null?void 0:w.paddingLeft)||0,width:this.props.width,height:this.props.height};this.projectNode={id:o.id||c.id,key:o.key||c.key,type:gZ,name:o.name||c.name,boardId:o.id||c.id,namespace:o.namespace||c.namespace,appearance:{...p,size:[iF,iF]}},this.boardLayout=new dF({parentNodeProps:this.projectNode,nodePropsList:[],edgePropsList:[],timeline:this.timeline,cameraFrame:{...p}}),console.log("this.boardLayout",this.boardLayout),console.log("id",this.boardLayout.getViewId()),this.interactionManager=new IS({viewport:this}),console.log(this.projectNode,"<- p"),this.onViewStateChange=this.onViewStateChange.bind(this),this.layerFilter=this.layerFilter.bind(this),console.log("viewport",d),this.deck=new Bu(d),console.log("deck",this.deck)}dispose(){var n;(n=this.deck)==null||n.finalize(),this.deck=null}onLoad(){console.log("onLoad");let{gl:n}=this.deck.deckRenderer;this.deck._addResources({arrowAtlas:DZ(n)}),this.canvas=this.deck.canvas,this.update(),this.emit("viewport:onload")}boardIsTilted(){return this.boardLayout.isTilted()}getBoardZoom(){return this.boardLayout.getZoom()}getViews(){var i,a;let n=[this.boardLayout.getView({nodeProps:this.boardLayout.parentNodeProps,interactionMode:this.interactionMode,disableController:this.interactionManager.disableController,orthographic:this.props.orthographic!==!1})];if(!this.boardLayout.isTilted()&&!this.boardLayout.isRotated()){let o=this.boardLayout.getVisibleNodes()||[];for(let s of o){let l=s.nodeUri,c=this.nodeViewLayouts[l];if(c&&c.hasView()&&c.viewIsActive(this.presenting)){let u=(a=this.nodeViewLayouts[l])==null?void 0:a.getView({nodeProps:s,orthographic:((i=s.appearance)==null?void 0:i.orthographic)||!1,disableController:this.presenting});n.push(u)}}}return n}getViewStates(){var a;let n={[this.boardLayout.getViewId()]:this.boardLayout.cameraFrame},i=this.boardLayout.getVisibleNodes()||[];for(let o of i){let s=o.nodeUri,l=this.nodeViewLayouts[s];if(l&&l.hasView()&&l.viewIsActive(this.presenting)){let c=(a=this.nodeViewLayouts[s])==null?void 0:a.getViewState();n[s]=c}}return n}snapRotation(n){return n>1||n<-1?n:Math.round(n)}setBoardCameraFrame(n,i){this.presenting||(this.boardLayout.cameraFrame={...this.boardLayout.cameraFrame,...n,rotationOrbit:this.snapRotation(n.rotationOrbit)})}onViewStateChange({viewState:n,viewId:i,interactionState:a,oldViewState:o}){if(i===this.boardLayout.getViewId()){this.setBoardCameraFrame(n,i);let s=this.boardLayout.getVisibleNodes()||[];for(let l of s)this.updateNodeViewFromUserInteraction(l,n);this.update(),this.updateSelectedNodeBox(this.selectedVersionUriCache),this.emit("viewport:camerachange",n)}else{let s=i,l=this.nodeViewLayouts[s];l&&(l.setCameraFrame(n,s),this.update())}}updateNodeViewFromUserInteraction(n,i){var a;if(n.layoutKey==="map"||n.layoutKey==="timeline"||n.layoutKey==="gltf"){let o=Pe.nodePropsToUri(n),s=this.boardLayout.getViewId(),l=this.nodeViewLayouts[o];if(l&&l.hasView()){let c=(a=this.deck)==null?void 0:a.getViewports().find(u=>u.id===s);if(c){let u=this.getNodePixels(n,c),d=this.boardLayout.getNodeFrame(n)||l.getCameraFrame();console.log("get node frame",d);let f=0,p=u.viewX+f,h=u.viewY+f,m=u.width-f*2,_=u.height-f*2;l.setCameraFrame({...d,viewX:p,viewY:h,width:m,height:_},o)}}}else if(n.layoutKey==="geo"){let o=Pe.nodePropsToUri(n),s=this.nodeViewLayouts[o]}}deactivateViews(){for(let n of Object.values(this.nodeViewLayouts))n.viewIsActive(this.presenting)&&(console.log("deactivate and snapshot",n.id),this.snapshot(n.id),n.setViewActive(!1),this.emit("view:deactivate",n));this.update()}activateView(n){var a,o,s,l,c,u,d,f;let i=Pe.nodePropsToUri(n);if(console.log("activateView",i,n),this.nodeViewLayouts[i]){let p=this.getNodePixels(n);this.nodeViewLayouts[i].setCameraFrame({...p,zoom:((a=n.appearance)==null?void 0:a.zoom)||0,rotationX:((o=n.appearance)==null?void 0:o.rotationX)||0,rotationOrbit:((s=n.appearance)==null?void 0:s.rotationOrbit)||0,longitude:(l=n.appearance)==null?void 0:l.longitude,latitude:(c=n.appearance)==null?void 0:c.latitude,bearing:((u=n.appearance)==null?void 0:u.bearing)||0,pitch:((d=n.appearance)==null?void 0:d.pitch)||0,target:((f=n.appearance)==null?void 0:f.target)||[0,0,0]}),this.nodeViewLayouts[i].setViewActive(!0),this.emit("view:activate",this.nodeViewLayouts[i])}else console.warn("no node layout for",i);this.update()}nodeViewerIsActive(n){var i;return(i=this.nodeViewLayouts[Pe.nodePropsToUri(n)])==null?void 0:i.viewIsActive(this.presenting)}snapshot(n){var _;let i=this.canvas.getContext("webgl2"),a,o,s,l,c,u;if(!n||n===this.boardLayout.getViewId()){if(a=this.props.width,o=this.props.height,s=this.props.viewX||0,l=this.props.viewY||0,!a||!o){console.warn("no width or height");return}c=this.boardLayout.parentNodeProps,u=this.boardLayout.getCameraFrame()}else{let E=this.nodeViewLayouts[n];if(E){if(c=this.boardLayout.getNodePropsFromNodeFrameUri(n),!c){console.warn("no node frame for snapshot",(_=this.deck)==null?void 0:_.getViewports(),n,c);return}let y=this.getNodePixels(c);a=y.width,o=y.height,s=y.viewX,l=y.viewY,u=E.getCameraFrame()}else{console.warn("no node layout for snapshot",n);return}}this.deck.redraw("true"),i.finish();let d=new Uint8Array(a*o*4),f=i.drawingBufferHeight-l-o;i.readPixels(s,f,a,o,i.RGBA,i.UNSIGNED_BYTE,d);let p=document.createElement("canvas");p.width=a,p.height=o;let h=p.getContext("2d"),m=new ImageData(new Uint8ClampedArray(d),a,o);h.putImageData(m,0,0),h.save(),h.scale(1,-1),h.drawImage(p,0,0,a,o,0,-o,a,o),h.restore(),p.toBlob(E=>{this.emit("snapshot",{nodeProps:c,cameraView:u,blob:E})})}layerFilter({layer:n,viewport:i}){return!(!n||!i||!n.id.startsWith(i.id))}getLayers(){let n=this.boardLayout.getLayers(this.interactionManager,null,this.boardLayout.getViewId(),this.presenting)||[],i=this.boardLayout.getVisibleNodes()||[];for(let a of i){let{nodeUri:o}=a,s=this.nodeViewLayouts[o];if(s&&(!s.hasView()||s.viewIsActive(this.presenting))){let l=s.getLayers(this.interactionManager,{...a,appearance:{...a.appearance,position:a.appearance.position,size:a.appearance.size}},s.hasView()?s.getViewId():this.boardLayout.getViewId());l&&l.length>0&&n.push(...l)}}return n}getNodeFrame(n){return this.boardLayout.getNodeFrame(n)}async getFile(n,i){}getProps({onNextFrame:n=void 0,extraProps:i=void 0}={}){let a=this.boardLayout.getBackgroundColor()||this.props.backgroundColor||sF,o={...this.props,...i,_animate:!1,parameters:{depthMask:!0,depthTest:!0,blend:!0,blendFunc:[ji.SRC_ALPHA,ji.ONE_MINUS_SRC_ALPHA,ji.ONE,ji.ONE_MINUS_SRC_ALPHA],polygonOffsetFill:!0,depthFunc:ji.LEQUAL,blendEquation:ji.FUNC_ADD,clearColor:[a[0]/256,a[1]/256,a[2]/256,1]},width:this.props.width,height:this.props.height,viewState:this.getViewStates(),views:this.getViews(),onViewStateChange:this.onViewStateChange,layerFilter:this.layerFilter,getCursor:this.interactionManager.getCursor,layers:this.getLayers(),effects:[],getTooltip:null};return n?o.onAfterRender=()=>this.onAfterRender(n):o.onAfterRender=()=>{},o}getZoom(){let n=this.boardLayout.getViewState();return(n==null?void 0:n.zoom)||0}getProjectNode(){return this.projectNode}setInteractionMode(n){this.interactionMode=n}pixelToCartesian(n,i){var a;try{let o=(a=this.deck)==null?void 0:a.getViewports().find(s=>s.id===this.boardLayout.getViewId());return o?o.unproject([n||0,i||0]):(console.log("no viewport found",this.boardLayout.getViewId()),null)}catch(o){return console.log("error pixel to cartesian",o),null}}cartesianToPixel(n,i){var a;try{let o=(a=this.deck)==null?void 0:a.getViewports().find(s=>s.id===this.boardLayout.getViewId());return o?o.project([n,i]):(console.log("no viewport found",this.boardLayout.getViewId()),null)}catch(o){return null}}update(n){if(!this.deck){console.log("no deck");return}n&&this.boardLayout.applyUpdateTriggers(n);try{this.deck.setProps(this.getProps())}catch(i){console.log("error updating viewport",i)}}getNodePixels(n,i){var f,p;let a=this.boardLayout.getNodeFrame(n);if(!a){console.warn("no nodeFrame found in board layout - this is only for nodes within views - rare!?");let h=Pe.nodePropsToUri(n),m=this.nodeViewLayouts[h];m?(a=m.getNodeFrame(n),a||console.warn("no nodeFrame found in nodeLayout in getNodePixels",this,n)):console.warn("no nodeLayout found in getNodePixels",h)}if(!a){console.warn("no nodeFrame found in getNodePixels",n);let h=((f=n.appearance)==null?void 0:f.position)||[0,0,0],m=((p=n.appearance)==null?void 0:p.size)||[Ia,Ia];a={position:h,size:m}}let o=a.size[0],s=a.size[1],l=a.position[0]-o/2,c=a.position[1]+s/2,u=i?i.project([l,c]):this.cartesianToPixel(l,c),d=i?i.project([l+o,c-s]):this.cartesianToPixel(l+o,c-s);return!u||!d?(console.log("no pixelTopLeft or pixelBottomRight",n),{viewX:0,viewY:0,width:10,height:10}):{viewX:Math.round(u[0]),viewY:Math.round(u[1]),width:Math.round(d[0]-u[0]),height:Math.round(d[1]-u[1])}}setTime(n){}setInsightCursor(n){this.boardLayout.setInsightCursor(n>=0?n:null);for(let i of Object.values(this.nodeViewLayouts))i.setInsightCursor(n);this.interactionManager.createInitialConnectionHandles(),this.boardLayout.setLastNodePositionUpdate(),this.update()}setAnimationProps(){this.deck.setProps(this.getProps({onNextFrame:this.setAnimationProps}))}record({formatConfigs:n={},filename:i=void 0,timecode:a={start:0,end:0,framerate:30},onStopped:o=void 0,onSave:s=void 0,onComplete:l=void 0}){this.shouldAnimate=!0,this.seek({timeMs:a.start}),this.deck.setProps(this.getProps({onNextFrame:this.setAnimationProps}))}stopRecording({onStopped:n,onSave:i,onComplete:a,abort:o}){this.shouldAnimate=!1,this.videoCapture.stop({onStopped:n,onSave:i,onComplete:a,abort:o})}seek({timeMs:n}){}onAfterRender(n,i=!0){let a=this.deck&&this.deck.props.layers.every(o=>o&&o.isLoaded);this.videoCapture&&this.videoCapture.isRecording()&&a&&i&&this.videoCapture.capture(this.canvas,o=>{this.seek({timeMs:o}),n(o)})}getNodeInteractionState(n){return this.interactionManager.nodeInteractionStates[n]||"default"}setNodeInteractionState(n,i){this.interactionManager.nodeInteractionStates[n]=i}getEdgeInteractionState(n){return this.interactionManager.edgeInteractionStates[n]||"default"}setEdgeInteractionState(n,i){this.interactionManager.edgeInteractionStates[n]=i}getDefaultNodeSize(){return this.boardLayout.getDefaultNodeSize()}getFullTriggers(){return{nodePositionChange:Date.now(),nodeSizeChange:Date.now(),nodeExtrusionChange:Date.now(),nodeScaleChange:Date.now(),nodeRotateChange:Date.now(),nodeFillColorChange:Date.now(),nodeStrokeColorChange:Date.now()}}updatePolygons(){this.boardLayout.setLastNodePositionUpdate(),this.update()}nodeHasSeparateLayoutParent(n,i){let a=`${n.parentId}/latest`,o=i.get(a);return o?!!gF[o.layoutKey]:!1}updateNodeProps({nodes:n,changedNodeProps:i,updateTriggers:a}){this.nodes=n,console.log("updateNodeProps",i,a);let o=new Map([...n].filter(([f,p])=>this.nodeHasSeparateLayoutParent(p,n))),s=new Map([...n].filter(([f,p])=>!this.nodeHasSeparateLayoutParent(p,n))),l=i.filter(f=>!f.parentId);l.length>0&&this.boardLayout.applyNodeProps(s,l);let c=i.filter(f=>f.layoutKey&&f.layoutKey!=="node");for(let f of c){let p=Pe.nodePropsToUri(f);if(this.nodeViewLayouts[p]){if(this.nodeViewLayouts[p].parentNodeProps.layoutKey!==f.layoutKey){let h=n.get(p),m=h?sC([h,f])[0]:f;this.createNodeViewer(m)}}else{let h=n.get(p),m=h?sC([h,f])[0]:f;this.createNodeViewer(m)}}let u=i.filter(f=>f.parentId&&!this.nodeViewLayouts[f.parentId]);u.length>0&&this.boardLayout.applyNodeProps(s,u);let d=i.filter(f=>f.parentId&&this.nodeViewLayouts[f.parentId]);for(let f of d){let p=this.nodeViewLayouts[f.parentId],h=new Map([...o].filter(([m,_])=>_.parentId===f.parentId));p.applyNodeProps(h,[f])}for(let f of i){let p=Pe.nodePropsToVersionUri(f),h=Pe.nodePropsToUri(f),m=this.nodeViewLayouts[h];if(m){let _=n.get(p);if(!_){console.log("original node not found",_,p,f,n);continue}let E=f.layoutKey||_.layoutKey;if(E==="cubes"||E==="vega"&&(a!=null&&a.parametricChange||a!=null&&a.propertyChange)){let v=yZ(_);E==="cubes"&&v.length===0&&(v=[{versionUri:Pe.nodePropsToVersionUri(f),amount:1,component:f.type}]),this.cubeCache.set(Pe.nodePropsToVersionUri(f),v),console.log("set segments",v),m.applyNodeProps([],[_],v)}else if(a!=null&&a.chartChange){let v=this.cubeCache.get(p);v&&m.applyNodeProps([],[_],v)}else{let v=this.cubeCache.get(p);v&&m.applyNodeProps([],[_],v)}}}this.boardLayout.applyUpdateTriggers(a),Object.keys(a||{}).length>0&&this.update()}getCubeCache(n){}createNodeViewer(n){var o,s,l,c,u,d,f,p,h,m,_,E,v;if(!gF[n.layoutKey]){console.warn("no layout for",n.layoutKey);return}let i=Pe.nodePropsToUri(n),a=new gF[n.layoutKey]({parentNodeProps:n,timeline:this.boardLayout.timeline});if(n.layoutKey==="map"){let y=this.getNodePixels(n);a.setCameraFrame({...y,minZoom:((o=n.appearance)==null?void 0:o.minZoom)||0,maxZoom:((s=n.appearance)==null?void 0:s.maxZoom)||20,zoom:((l=n.appearance)==null?void 0:l.zoom)||0,longitude:((c=n.appearance)==null?void 0:c.longitude)||.1,latitude:((u=n.appearance)==null?void 0:u.latitude)||.1,bearing:((d=n.appearance)==null?void 0:d.bearing)||0,pitch:((f=n.appearance)==null?void 0:f.pitch)||0})}else if(n.layoutKey==="gltf"){console.log("start gltf",n);let y=this.getNodePixels(n);a.setCameraFrame({...y,minZoom:((p=n.appearance)==null?void 0:p.minZoom)||-10,maxZoom:((h=n.appearance)==null?void 0:h.maxZoom)||20,zoom:((m=n.appearance)==null?void 0:m.zoom)||0,rotationX:((_=n.appearance)==null?void 0:_.rotationX)||0,rotationOrbit:((E=n.appearance)==null?void 0:E.rotationOrbit)||0,target:((v=n.appearance)==null?void 0:v.target)||[0,0,0]})}this.nodeViewLayouts[i]=a}updateEdgeProps({changedEdgeProps:n}){this.boardLayout.applyEdgeProps(n),this.update()}updateMySelection(n){let i=n.reduce((a,o,s)=>(a[o]=[0,0,0],a),{});console.log("update selection",i),this.interactionManager.setNodeSelectionColors(i),this.boardLayout.setLastNodeStyleUpdate(),this.updateSelectedNodeBox(n),this.update()}updateMyEdgeSelection(n){let i=n.reduce((a,o,s)=>(a[o]=[0,0,0],a),{});this.interactionManager.setEdgeSelectionColors(i),this.boardLayout.updateTriggers.edgeFillColorChange=Date.now(),this.update()}updateSelectedNodeBox(n){this.selectedVersionUriCache=n;let i=this.boardLayout.updateSelectedNodesBox(n)||null;if(i){let a=this.cartesianToPixel(i[0],i[1]),o=this.cartesianToPixel(i[2],i[3]);if(a&&o){let s=[...a,...o];this.emit("viewport:selectionextent",{pixelExtent:s});return}}this.emit("viewport:selectionextent",{pixelExtent:null})}setResizeNode(n){this.interactionManager.setResizeNode(n),this.update()}setConnectionNode(n){this.interactionManager.setConnectionNode(n),this.update()}setSelectionColors(n){this.interactionManager.setNodeSelectionColors(n)}createEdgeId(n,i,a){return B2({sourceUri:n,relationKey:i,targetUri:a})}pickBoardLayout(n,i=!1){try{let[a,o]=n,s=this.deck.pickObject({x:a,y:o,layerIds:[this.boardLayout.getLayerId("node-icon-layer"),this.boardLayout.getLayerId(aF),this.boardLayout.getLayerId(vue),this.boardLayout.getLayerId(cF),this.boardLayout.getLayerId(uF),this.boardLayout.getLayerId("edge-bezier-layer"),this.boardLayout.getLayerId("edge-line-layer")],unproject3D:i});return(s==null?void 0:s.object)||null}catch(a){return null}}pick(n,i=!1){try{let[a,o]=n,s=this.deck.pickObject({x:a,y:o,unproject3D:i});return(s==null?void 0:s.object)||null}catch(a){return null}}setResizeHandles(n){}setNodeType(n,i){}runAutoLayout(n,i){return[]}};return r4(Qje);})();
/*!
 * Copyright (c) Microsoft Corporation.
 * Licensed under the MIT License.
 */
/*! Bundled license information:

canvas/lib/context2d.js:
  (*!
   * Canvas - Context2d
   * Copyright (c) 2010 LearnBoost <tj@learnboost.com>
   * MIT Licensed
   *)

canvas/lib/pngstream.js:
  (*!
   * Canvas - PNGStream
   * Copyright (c) 2010 LearnBoost <tj@learnboost.com>
   * MIT Licensed
   *)

canvas/lib/pdfstream.js:
  (*!
   * Canvas - PDFStream
   *)

canvas/lib/jpegstream.js:
  (*!
   * Canvas - JPEGStream
   * Copyright (c) 2010 LearnBoost <tj@learnboost.com>
   * MIT Licensed
   *)

canvas/lib/canvas.js:
  (*!
   * Canvas
   * Copyright (c) 2010 LearnBoost <tj@learnboost.com>
   * MIT Licensed
   *)

simple-concat/index.js:
  (*! simple-concat. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

canvas/lib/image.js:
  (*!
   * Canvas - Image
   * Copyright (c) 2010 LearnBoost <tj@learnboost.com>
   * MIT Licensed
   *)

canvas/lib/pattern.js:
  (*!
   * Canvas - CanvasPattern
   * Copyright (c) 2010 LearnBoost <tj@learnboost.com>
   * MIT Licensed
   *)
*/
//# sourceMappingURL=index.global.js.map